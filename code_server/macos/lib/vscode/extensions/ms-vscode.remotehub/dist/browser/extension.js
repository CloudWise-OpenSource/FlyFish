(()=>{var gu={879:(d,P)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ByteStream=void 0;class E{constructor(L){this.bytes=L,this.byteIndexCurrent=0}hasMoreBytes(){return this.byteIndexCurrent<this.bytes.length}readBytes(L){const T=this.byteIndexCurrent;return this.byteIndexCurrent+=L,this.bytes.slice(T,this.byteIndexCurrent)}readByte(){let L=this.bytes[this.byteIndexCurrent];return this.byteIndexCurrent++,L}readString(L){let T="";for(let w=0;w<L;w++){const m=this.readByte();m!=0&&(T+=String.fromCharCode(m))}return T}}P.ByteStream=E},7106:(d,P)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ChunkSize=P.HeaderSizeInBytes=P.FileNameMaxLength=void 0,P.FileNameMaxLength=99,P.HeaderSizeInBytes=500,P.ChunkSize=512},5759:(d,P,E)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TarFile=void 0;const F=E(879),L=E(7106),T=E(4108),w=E(3335);class m{constructor(S){this.entries=S}static fromBytes(S){const A=new F.ByteStream(S),I=[],x=L.ChunkSize;let j=0;for(;A.hasMoreBytes()==!0;){const X=A.readBytes(x);let z=!0;for(let Y=0;Y<X.length;Y++)if(X[Y]!=0){z=!1;break}if(z==!0){if(j++,j==2)break}else{j=0;const Y=T.TarFileEntry.fromBytes(X,A);I.push(Y)}}let J=new m(I);return J.consolidateLongPathEntries(),J}consolidateLongPathEntries(){var S;const A=w.TarFileTypeFlag.Instances().LongFilePath.name,I=this.entries;for(let x=0;x<I.length;x++){const j=I[x];if(((S=j.header.typeFlag)===null||S===void 0?void 0:S.name)==A){const J=I[x+1];J.header.fileName=j.dataAsBytes.reduce((X,z)=>X+=String.fromCharCode(z),""),J.header.fileName=J.header.fileName.replace(/\0/g,""),I.splice(x,1),x--}}}}P.TarFile=m},4108:(d,P,E)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TarFileEntry=void 0;const F=E(7106),L=E(2895);class T{constructor(m,k){this.header=m,this.dataAsBytes=k}static fromBytes(m,k){const S=F.ChunkSize,A=L.TarFileEntryHeader.fromBytes(m),I=A.fileSizeInBytes,j=Math.ceil(I/S)*S,J=k.readBytes(j).slice(0,I);return new T(A,J)}}P.TarFileEntry=T},2895:(d,P,E)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TarFileEntryHeader=void 0;const F=E(879),L=E(3335);class T{constructor(m,k,S,A,I,x,j,J,X,z,Y,ie,ne,ae,M,Z){this.fileName=m,this.fileMode=k,this.userIDOfOwner=S,this.userIDOfGroup=A,this.fileSizeInBytes=I,this.timeModifiedInUnixFormat=x,this.checksum=j,this.typeFlag=J,this.nameOfLinkedFile=X,this.uStarIndicator=z,this.uStarVersion=Y,this.userNameOfOwner=ie,this.groupNameOfOwner=ne,this.deviceNumberMajor=ae,this.deviceNumberMinor=M,this.filenamePrefix=Z,this.fullFileName=Z+m}static fromBytes(m){const k=new F.ByteStream(m),S=k.readString(100).trim(),A=k.readString(8),I=k.readString(8),x=k.readString(8),j=k.readString(12),J=k.readBytes(12),X=k.readString(8),z=k.readString(1),Y=k.readString(100),ie=k.readString(6),ne=k.readString(2),ae=k.readString(32),M=k.readString(32),Z=k.readString(8),q=k.readString(8),ee=k.readString(155),se=k.readBytes(12),pe=parseInt(j.trim(),8),_=parseInt(X,8),O=L.TarFileTypeFlag.Instances()._All,H="_"+z,$=O[H];return new T(S,A,I,x,pe,J,_,$,Y,ie,ne,ae,M,Z,q,ee)}}P.TarFileEntryHeader=T},3335:(d,P)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TarFileTypeFlag=void 0;class E{constructor(T,w){this.value=T,this.id="_"+this.value,this.name=w}static Instances(){return E._instances==null&&(E._instances=new F),E._instances}}P.TarFileTypeFlag=E;class F{constructor(){this.Normal=new E("0","Normal"),this.HardLink=new E("1","Hard Link"),this.SymbolicLink=new E("2","Symbolic Link"),this.CharacterSpecial=new E("3","Character Special"),this.BlockSpecial=new E("4","Block Special"),this.Directory=new E("5","Directory"),this.FIFO=new E("6","FIFO"),this.ContiguousFile=new E("7","Contiguous File"),this.LongFilePath=new E("L","././@LongLink"),this._All=[this.Normal,this.HardLink,this.SymbolicLink,this.CharacterSpecial,this.BlockSpecial,this.Directory,this.FIFO,this.ContiguousFile,this.LongFilePath];for(let T=0;T<this._All.length;T++){const w=this._All[T];this._All[w.id]=w}}}},5790:(d,P,E)=>{"use strict";var F;F={value:!0},P.t9=F=F=F=void 0;const L=E(5759);F={enumerable:!0,get:function(){return L.TarFile}};const T=E(4108);F={enumerable:!0,get:function(){return T.TarFileEntry}};const w=E(2895);F={enumerable:!0,get:function(){return w.TarFileEntryHeader}},P.t9=m=>L.TarFile.fromBytes(m)},9669:(d,P,E)=>{d.exports=E(1609)},5448:(d,P,E)=>{"use strict";var F=E(4867),L=E(6026),T=E(4372),w=E(5327),m=E(4097),k=E(4109),S=E(7985),A=E(5061);d.exports=function(x){return new Promise(function(J,X){var z=x.data,Y=x.headers;F.isFormData(z)&&delete Y["Content-Type"];var ie=new XMLHttpRequest;if(x.auth){var ne=x.auth.username||"",ae=x.auth.password?unescape(encodeURIComponent(x.auth.password)):"";Y.Authorization="Basic "+btoa(ne+":"+ae)}var M=m(x.baseURL,x.url);if(ie.open(x.method.toUpperCase(),w(M,x.params,x.paramsSerializer),!0),ie.timeout=x.timeout,ie.onreadystatechange=function(){if(!(!ie||ie.readyState!==4)&&!(ie.status===0&&!(ie.responseURL&&ie.responseURL.indexOf("file:")===0))){var ee="getAllResponseHeaders"in ie?k(ie.getAllResponseHeaders()):null,se=!x.responseType||x.responseType==="text"?ie.responseText:ie.response,pe={data:se,status:ie.status,statusText:ie.statusText,headers:ee,config:x,request:ie};L(J,X,pe),ie=null}},ie.onabort=function(){!ie||(X(A("Request aborted",x,"ECONNABORTED",ie)),ie=null)},ie.onerror=function(){X(A("Network Error",x,null,ie)),ie=null},ie.ontimeout=function(){var ee="timeout of "+x.timeout+"ms exceeded";x.timeoutErrorMessage&&(ee=x.timeoutErrorMessage),X(A(ee,x,"ECONNABORTED",ie)),ie=null},F.isStandardBrowserEnv()){var Z=(x.withCredentials||S(M))&&x.xsrfCookieName?T.read(x.xsrfCookieName):void 0;Z&&(Y[x.xsrfHeaderName]=Z)}if("setRequestHeader"in ie&&F.forEach(Y,function(ee,se){typeof z=="undefined"&&se.toLowerCase()==="content-type"?delete Y[se]:ie.setRequestHeader(se,ee)}),F.isUndefined(x.withCredentials)||(ie.withCredentials=!!x.withCredentials),x.responseType)try{ie.responseType=x.responseType}catch(q){if(x.responseType!=="json")throw q}typeof x.onDownloadProgress=="function"&&ie.addEventListener("progress",x.onDownloadProgress),typeof x.onUploadProgress=="function"&&ie.upload&&ie.upload.addEventListener("progress",x.onUploadProgress),x.cancelToken&&x.cancelToken.promise.then(function(ee){!ie||(ie.abort(),X(ee),ie=null)}),z||(z=null),ie.send(z)})}},1609:(d,P,E)=>{"use strict";var F=E(4867),L=E(1849),T=E(321),w=E(7185),m=E(5655);function k(A){var I=new T(A),x=L(T.prototype.request,I);return F.extend(x,T.prototype,I),F.extend(x,I),x}var S=k(m);S.Axios=T,S.create=function(I){return k(w(S.defaults,I))},S.Cancel=E(5263),S.CancelToken=E(4972),S.isCancel=E(6502),S.all=function(I){return Promise.all(I)},S.spread=E(8713),S.isAxiosError=E(6268),d.exports=S,d.exports.default=S},5263:d=>{"use strict";function P(E){this.message=E}P.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},P.prototype.__CANCEL__=!0,d.exports=P},4972:(d,P,E)=>{"use strict";var F=E(5263);function L(T){if(typeof T!="function")throw new TypeError("executor must be a function.");var w;this.promise=new Promise(function(S){w=S});var m=this;T(function(S){m.reason||(m.reason=new F(S),w(m.reason))})}L.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},L.source=function(){var w,m=new L(function(S){w=S});return{token:m,cancel:w}},d.exports=L},6502:d=>{"use strict";d.exports=function(E){return!!(E&&E.__CANCEL__)}},321:(d,P,E)=>{"use strict";var F=E(4867),L=E(5327),T=E(782),w=E(3572),m=E(7185);function k(S){this.defaults=S,this.interceptors={request:new T,response:new T}}k.prototype.request=function(A){typeof A=="string"?(A=arguments[1]||{},A.url=arguments[0]):A=A||{},A=m(this.defaults,A),A.method?A.method=A.method.toLowerCase():this.defaults.method?A.method=this.defaults.method.toLowerCase():A.method="get";var I=[w,void 0],x=Promise.resolve(A);for(this.interceptors.request.forEach(function(J){I.unshift(J.fulfilled,J.rejected)}),this.interceptors.response.forEach(function(J){I.push(J.fulfilled,J.rejected)});I.length;)x=x.then(I.shift(),I.shift());return x},k.prototype.getUri=function(A){return A=m(this.defaults,A),L(A.url,A.params,A.paramsSerializer).replace(/^\?/,"")},F.forEach(["delete","get","head","options"],function(A){k.prototype[A]=function(I,x){return this.request(m(x||{},{method:A,url:I,data:(x||{}).data}))}}),F.forEach(["post","put","patch"],function(A){k.prototype[A]=function(I,x,j){return this.request(m(j||{},{method:A,url:I,data:x}))}}),d.exports=k},782:(d,P,E)=>{"use strict";var F=E(4867);function L(){this.handlers=[]}L.prototype.use=function(w,m){return this.handlers.push({fulfilled:w,rejected:m}),this.handlers.length-1},L.prototype.eject=function(w){this.handlers[w]&&(this.handlers[w]=null)},L.prototype.forEach=function(w){F.forEach(this.handlers,function(k){k!==null&&w(k)})},d.exports=L},4097:(d,P,E)=>{"use strict";var F=E(1793),L=E(7303);d.exports=function(w,m){return w&&!F(m)?L(w,m):m}},5061:(d,P,E)=>{"use strict";var F=E(481);d.exports=function(T,w,m,k,S){var A=new Error(T);return F(A,w,m,k,S)}},3572:(d,P,E)=>{"use strict";var F=E(4867),L=E(8527),T=E(6502),w=E(5655);function m(k){k.cancelToken&&k.cancelToken.throwIfRequested()}d.exports=function(S){m(S),S.headers=S.headers||{},S.data=L(S.data,S.headers,S.transformRequest),S.headers=F.merge(S.headers.common||{},S.headers[S.method]||{},S.headers),F.forEach(["delete","get","head","post","put","patch","common"],function(x){delete S.headers[x]});var A=S.adapter||w.adapter;return A(S).then(function(x){return m(S),x.data=L(x.data,x.headers,S.transformResponse),x},function(x){return T(x)||(m(S),x&&x.response&&(x.response.data=L(x.response.data,x.response.headers,S.transformResponse))),Promise.reject(x)})}},481:d=>{"use strict";d.exports=function(E,F,L,T,w){return E.config=F,L&&(E.code=L),E.request=T,E.response=w,E.isAxiosError=!0,E.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},E}},7185:(d,P,E)=>{"use strict";var F=E(4867);d.exports=function(T,w){w=w||{};var m={},k=["url","method","data"],S=["headers","auth","proxy","params"],A=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],I=["validateStatus"];function x(z,Y){return F.isPlainObject(z)&&F.isPlainObject(Y)?F.merge(z,Y):F.isPlainObject(Y)?F.merge({},Y):F.isArray(Y)?Y.slice():Y}function j(z){F.isUndefined(w[z])?F.isUndefined(T[z])||(m[z]=x(void 0,T[z])):m[z]=x(T[z],w[z])}F.forEach(k,function(Y){F.isUndefined(w[Y])||(m[Y]=x(void 0,w[Y]))}),F.forEach(S,j),F.forEach(A,function(Y){F.isUndefined(w[Y])?F.isUndefined(T[Y])||(m[Y]=x(void 0,T[Y])):m[Y]=x(void 0,w[Y])}),F.forEach(I,function(Y){Y in w?m[Y]=x(T[Y],w[Y]):Y in T&&(m[Y]=x(void 0,T[Y]))});var J=k.concat(S).concat(A).concat(I),X=Object.keys(T).concat(Object.keys(w)).filter(function(Y){return J.indexOf(Y)===-1});return F.forEach(X,j),m}},6026:(d,P,E)=>{"use strict";var F=E(5061);d.exports=function(T,w,m){var k=m.config.validateStatus;!m.status||!k||k(m.status)?T(m):w(F("Request failed with status code "+m.status,m.config,null,m.request,m))}},8527:(d,P,E)=>{"use strict";var F=E(4867);d.exports=function(T,w,m){return F.forEach(m,function(S){T=S(T,w)}),T}},5655:(d,P,E)=>{"use strict";var F=E(4867),L=E(6016),T={"Content-Type":"application/x-www-form-urlencoded"};function w(S,A){!F.isUndefined(S)&&F.isUndefined(S["Content-Type"])&&(S["Content-Type"]=A)}function m(){var S;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(S=E(5448)),S}var k={adapter:m(),transformRequest:[function(A,I){return L(I,"Accept"),L(I,"Content-Type"),F.isFormData(A)||F.isArrayBuffer(A)||F.isBuffer(A)||F.isStream(A)||F.isFile(A)||F.isBlob(A)?A:F.isArrayBufferView(A)?A.buffer:F.isURLSearchParams(A)?(w(I,"application/x-www-form-urlencoded;charset=utf-8"),A.toString()):F.isObject(A)?(w(I,"application/json;charset=utf-8"),JSON.stringify(A)):A}],transformResponse:[function(A){if(typeof A=="string")try{A=JSON.parse(A)}catch(I){}return A}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(A){return A>=200&&A<300}};k.headers={common:{Accept:"application/json, text/plain, */*"}},F.forEach(["delete","get","head"],function(A){k.headers[A]={}}),F.forEach(["post","put","patch"],function(A){k.headers[A]=F.merge(T)}),d.exports=k},1849:d=>{"use strict";d.exports=function(E,F){return function(){for(var T=new Array(arguments.length),w=0;w<T.length;w++)T[w]=arguments[w];return E.apply(F,T)}}},5327:(d,P,E)=>{"use strict";var F=E(4867);function L(T){return encodeURIComponent(T).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}d.exports=function(w,m,k){if(!m)return w;var S;if(k)S=k(m);else if(F.isURLSearchParams(m))S=m.toString();else{var A=[];F.forEach(m,function(j,J){j===null||typeof j=="undefined"||(F.isArray(j)?J=J+"[]":j=[j],F.forEach(j,function(z){F.isDate(z)?z=z.toISOString():F.isObject(z)&&(z=JSON.stringify(z)),A.push(L(J)+"="+L(z))}))}),S=A.join("&")}if(S){var I=w.indexOf("#");I!==-1&&(w=w.slice(0,I)),w+=(w.indexOf("?")===-1?"?":"&")+S}return w}},7303:d=>{"use strict";d.exports=function(E,F){return F?E.replace(/\/+$/,"")+"/"+F.replace(/^\/+/,""):E}},4372:(d,P,E)=>{"use strict";var F=E(4867);d.exports=F.isStandardBrowserEnv()?function(){return{write:function(w,m,k,S,A,I){var x=[];x.push(w+"="+encodeURIComponent(m)),F.isNumber(k)&&x.push("expires="+new Date(k).toGMTString()),F.isString(S)&&x.push("path="+S),F.isString(A)&&x.push("domain="+A),I===!0&&x.push("secure"),document.cookie=x.join("; ")},read:function(w){var m=document.cookie.match(new RegExp("(^|;\\s*)("+w+")=([^;]*)"));return m?decodeURIComponent(m[3]):null},remove:function(w){this.write(w,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:d=>{"use strict";d.exports=function(E){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(E)}},6268:d=>{"use strict";d.exports=function(E){return typeof E=="object"&&E.isAxiosError===!0}},7985:(d,P,E)=>{"use strict";var F=E(4867);d.exports=F.isStandardBrowserEnv()?function(){var T=/(msie|trident)/i.test(navigator.userAgent),w=document.createElement("a"),m;function k(S){var A=S;return T&&(w.setAttribute("href",A),A=w.href),w.setAttribute("href",A),{href:w.href,protocol:w.protocol?w.protocol.replace(/:$/,""):"",host:w.host,search:w.search?w.search.replace(/^\?/,""):"",hash:w.hash?w.hash.replace(/^#/,""):"",hostname:w.hostname,port:w.port,pathname:w.pathname.charAt(0)==="/"?w.pathname:"/"+w.pathname}}return m=k(window.location.href),function(A){var I=F.isString(A)?k(A):A;return I.protocol===m.protocol&&I.host===m.host}}():function(){return function(){return!0}}()},6016:(d,P,E)=>{"use strict";var F=E(4867);d.exports=function(T,w){F.forEach(T,function(k,S){S!==w&&S.toUpperCase()===w.toUpperCase()&&(T[w]=k,delete T[S])})}},4109:(d,P,E)=>{"use strict";var F=E(4867),L=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];d.exports=function(w){var m={},k,S,A;return w&&F.forEach(w.split(`
`),function(x){if(A=x.indexOf(":"),k=F.trim(x.substr(0,A)).toLowerCase(),S=F.trim(x.substr(A+1)),k){if(m[k]&&L.indexOf(k)>=0)return;k==="set-cookie"?m[k]=(m[k]?m[k]:[]).concat([S]):m[k]=m[k]?m[k]+", "+S:S}}),m}},8713:d=>{"use strict";d.exports=function(E){return function(L){return E.apply(null,L)}}},4867:(d,P,E)=>{"use strict";var F=E(1849),L=Object.prototype.toString;function T(_){return L.call(_)==="[object Array]"}function w(_){return typeof _=="undefined"}function m(_){return _!==null&&!w(_)&&_.constructor!==null&&!w(_.constructor)&&typeof _.constructor.isBuffer=="function"&&_.constructor.isBuffer(_)}function k(_){return L.call(_)==="[object ArrayBuffer]"}function S(_){return typeof FormData!="undefined"&&_ instanceof FormData}function A(_){var O;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?O=ArrayBuffer.isView(_):O=_&&_.buffer&&_.buffer instanceof ArrayBuffer,O}function I(_){return typeof _=="string"}function x(_){return typeof _=="number"}function j(_){return _!==null&&typeof _=="object"}function J(_){if(L.call(_)!=="[object Object]")return!1;var O=Object.getPrototypeOf(_);return O===null||O===Object.prototype}function X(_){return L.call(_)==="[object Date]"}function z(_){return L.call(_)==="[object File]"}function Y(_){return L.call(_)==="[object Blob]"}function ie(_){return L.call(_)==="[object Function]"}function ne(_){return j(_)&&ie(_.pipe)}function ae(_){return typeof URLSearchParams!="undefined"&&_ instanceof URLSearchParams}function M(_){return _.replace(/^\s*/,"").replace(/\s*$/,"")}function Z(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function q(_,O){if(!(_===null||typeof _=="undefined"))if(typeof _!="object"&&(_=[_]),T(_))for(var H=0,$=_.length;H<$;H++)O.call(null,_[H],H,_);else for(var y in _)Object.prototype.hasOwnProperty.call(_,y)&&O.call(null,_[y],y,_)}function ee(){var _={};function O(y,U){J(_[U])&&J(y)?_[U]=ee(_[U],y):J(y)?_[U]=ee({},y):T(y)?_[U]=y.slice():_[U]=y}for(var H=0,$=arguments.length;H<$;H++)q(arguments[H],O);return _}function se(_,O,H){return q(O,function(y,U){H&&typeof y=="function"?_[U]=F(y,H):_[U]=y}),_}function pe(_){return _.charCodeAt(0)===65279&&(_=_.slice(1)),_}d.exports={isArray:T,isArrayBuffer:k,isBuffer:m,isFormData:S,isArrayBufferView:A,isString:I,isNumber:x,isObject:j,isPlainObject:J,isUndefined:w,isDate:X,isFile:z,isBlob:Y,isFunction:ie,isStream:ne,isURLSearchParams:ae,isStandardBrowserEnv:Z,forEach:q,merge:ee,extend:se,trim:M,stripBOM:pe}},5623:d=>{"use strict";d.exports=P;function P(L,T,w){L instanceof RegExp&&(L=E(L,w)),T instanceof RegExp&&(T=E(T,w));var m=F(L,T,w);return m&&{start:m[0],end:m[1],pre:w.slice(0,m[0]),body:w.slice(m[0]+L.length,m[1]),post:w.slice(m[1]+T.length)}}function E(L,T){var w=T.match(L);return w?w[0]:null}P.range=F;function F(L,T,w){var m,k,S,A,I,x=w.indexOf(L),j=w.indexOf(T,x+1),J=x;if(x>=0&&j>0){if(L===T)return[x,j];for(m=[],S=w.length;J>=0&&!I;)J==x?(m.push(J),x=w.indexOf(L,J+1)):m.length==1?I=[m.pop(),j]:(k=m.pop(),k<S&&(S=k,A=j),j=w.indexOf(T,J+1)),J=x<j&&x>=0?x:j;m.length&&(I=[S,A])}return I}},5186:(d,P,E)=>{var F=E(3698),L=E(2505),T=E(6417),w=Function.bind,m=w.bind(w);function k(j,J,X){var z=m(T,null).apply(null,X?[J,X]:[J]);j.api={remove:z},j.remove=z,["before","error","after","wrap"].forEach(function(Y){var ie=X?[J,Y,X]:[J,Y];j[Y]=j.api[Y]=m(L,null).apply(null,ie)})}function S(){var j="h",J={registry:{}},X=F.bind(null,J,j);return k(X,J,j),X}function A(){var j={registry:{}},J=F.bind(null,j);return k(J,j),J}var I=!1;function x(){return I||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),I=!0),A()}x.Singular=S.bind(),x.Collection=A.bind(),d.exports=x,d.exports.Hook=x,d.exports.Singular=x.Singular,d.exports.Collection=x.Collection},2505:d=>{d.exports=P;function P(E,F,L,T){var w=T;E.registry[L]||(E.registry[L]=[]),F==="before"&&(T=function(m,k){return Promise.resolve().then(w.bind(null,k)).then(m.bind(null,k))}),F==="after"&&(T=function(m,k){var S;return Promise.resolve().then(m.bind(null,k)).then(function(A){return S=A,w(S,k)}).then(function(){return S})}),F==="error"&&(T=function(m,k){return Promise.resolve().then(m.bind(null,k)).catch(function(S){return w(S,k)})}),E.registry[L].push({hook:T,orig:w})}},3698:d=>{d.exports=P;function P(E,F,L,T){if(typeof L!="function")throw new Error("method for before hook must be a function");return T||(T={}),Array.isArray(F)?F.reverse().reduce(function(w,m){return P.bind(null,E,m,w,T)},L)():Promise.resolve().then(function(){return E.registry[F]?E.registry[F].reduce(function(w,m){return m.hook.bind(null,w,T)},L)():L(T)})}},6417:d=>{d.exports=P;function P(E,F,L){if(!!E.registry[F]){var T=E.registry[F].map(function(w){return w.orig}).indexOf(L);T!==-1&&E.registry[F].splice(T,1)}}},3644:(d,P,E)=>{var F=E(1048),L=E(5623);d.exports=J;var T="\0SLASH"+Math.random()+"\0",w="\0OPEN"+Math.random()+"\0",m="\0CLOSE"+Math.random()+"\0",k="\0COMMA"+Math.random()+"\0",S="\0PERIOD"+Math.random()+"\0";function A(M){return parseInt(M,10)==M?parseInt(M,10):M.charCodeAt(0)}function I(M){return M.split("\\\\").join(T).split("\\{").join(w).split("\\}").join(m).split("\\,").join(k).split("\\.").join(S)}function x(M){return M.split(T).join("\\").split(w).join("{").split(m).join("}").split(k).join(",").split(S).join(".")}function j(M){if(!M)return[""];var Z=[],q=L("{","}",M);if(!q)return M.split(",");var ee=q.pre,se=q.body,pe=q.post,_=ee.split(",");_[_.length-1]+="{"+se+"}";var O=j(pe);return pe.length&&(_[_.length-1]+=O.shift(),_.push.apply(_,O)),Z.push.apply(Z,_),Z}function J(M){return M?(M.substr(0,2)==="{}"&&(M="\\{\\}"+M.substr(2)),ae(I(M),!0).map(x)):[]}function X(M){return M}function z(M){return"{"+M+"}"}function Y(M){return/^-?0\d/.test(M)}function ie(M,Z){return M<=Z}function ne(M,Z){return M>=Z}function ae(M,Z){var q=[],ee=L("{","}",M);if(!ee||/\$$/.test(ee.pre))return[M];var se=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(ee.body),pe=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(ee.body),_=se||pe,O=ee.body.indexOf(",")>=0;if(!_&&!O)return ee.post.match(/,.*\}/)?(M=ee.pre+"{"+ee.body+m+ee.post,ae(M)):[M];var H;if(_)H=ee.body.split(/\.\./);else if(H=j(ee.body),H.length===1&&(H=ae(H[0],!1).map(z),H.length===1)){var y=ee.post.length?ae(ee.post,!1):[""];return y.map(function(Pe){return ee.pre+H[0]+Pe})}var $=ee.pre,y=ee.post.length?ae(ee.post,!1):[""],U;if(_){var Q=A(H[0]),fe=A(H[1]),te=Math.max(H[0].length,H[1].length),oe=H.length==3?Math.abs(A(H[2])):1,me=ie,_e=fe<Q;_e&&(oe*=-1,me=ne);var xe=H.some(Y);U=[];for(var he=Q;me(he,fe);he+=oe){var Ee;if(pe)Ee=String.fromCharCode(he),Ee==="\\"&&(Ee="");else if(Ee=String(he),xe){var we=te-Ee.length;if(we>0){var Ae=new Array(we+1).join("0");he<0?Ee="-"+Ae+Ee.slice(1):Ee=Ae+Ee}}U.push(Ee)}}else U=F(H,function(Ze){return ae(Ze,!1)});for(var ke=0;ke<U.length;ke++)for(var Re=0;Re<y.length;Re++){var De=$+U[ke]+y[Re];(!Z||_||De)&&q.push(De)}return q}},1048:d=>{d.exports=function(E,F){for(var L=[],T=0;T<E.length;T++){var w=F(E[T],T);P(w)?L.push.apply(L,w):L.push(w)}return L};var P=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"}},4098:function(d,P){var E=typeof self!="undefined"?self:this,F=function(){function T(){this.fetch=!1,this.DOMException=E.DOMException}return T.prototype=E,new T}();(function(T){var w=function(m){var k={searchParams:"URLSearchParams"in T,iterable:"Symbol"in T&&"iterator"in Symbol,blob:"FileReader"in T&&"Blob"in T&&function(){try{return new Blob,!0}catch(y){return!1}}(),formData:"FormData"in T,arrayBuffer:"ArrayBuffer"in T};function S(y){return y&&DataView.prototype.isPrototypeOf(y)}if(k.arrayBuffer)var A=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],I=ArrayBuffer.isView||function(y){return y&&A.indexOf(Object.prototype.toString.call(y))>-1};function x(y){if(typeof y!="string"&&(y=String(y)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(y))throw new TypeError("Invalid character in header field name");return y.toLowerCase()}function j(y){return typeof y!="string"&&(y=String(y)),y}function J(y){var U={next:function(){var Q=y.shift();return{done:Q===void 0,value:Q}}};return k.iterable&&(U[Symbol.iterator]=function(){return U}),U}function X(y){this.map={},y instanceof X?y.forEach(function(U,Q){this.append(Q,U)},this):Array.isArray(y)?y.forEach(function(U){this.append(U[0],U[1])},this):y&&Object.getOwnPropertyNames(y).forEach(function(U){this.append(U,y[U])},this)}X.prototype.append=function(y,U){y=x(y),U=j(U);var Q=this.map[y];this.map[y]=Q?Q+", "+U:U},X.prototype.delete=function(y){delete this.map[x(y)]},X.prototype.get=function(y){return y=x(y),this.has(y)?this.map[y]:null},X.prototype.has=function(y){return this.map.hasOwnProperty(x(y))},X.prototype.set=function(y,U){this.map[x(y)]=j(U)},X.prototype.forEach=function(y,U){for(var Q in this.map)this.map.hasOwnProperty(Q)&&y.call(U,this.map[Q],Q,this)},X.prototype.keys=function(){var y=[];return this.forEach(function(U,Q){y.push(Q)}),J(y)},X.prototype.values=function(){var y=[];return this.forEach(function(U){y.push(U)}),J(y)},X.prototype.entries=function(){var y=[];return this.forEach(function(U,Q){y.push([Q,U])}),J(y)},k.iterable&&(X.prototype[Symbol.iterator]=X.prototype.entries);function z(y){if(y.bodyUsed)return Promise.reject(new TypeError("Already read"));y.bodyUsed=!0}function Y(y){return new Promise(function(U,Q){y.onload=function(){U(y.result)},y.onerror=function(){Q(y.error)}})}function ie(y){var U=new FileReader,Q=Y(U);return U.readAsArrayBuffer(y),Q}function ne(y){var U=new FileReader,Q=Y(U);return U.readAsText(y),Q}function ae(y){for(var U=new Uint8Array(y),Q=new Array(U.length),fe=0;fe<U.length;fe++)Q[fe]=String.fromCharCode(U[fe]);return Q.join("")}function M(y){if(y.slice)return y.slice(0);var U=new Uint8Array(y.byteLength);return U.set(new Uint8Array(y)),U.buffer}function Z(){return this.bodyUsed=!1,this._initBody=function(y){this._bodyInit=y,y?typeof y=="string"?this._bodyText=y:k.blob&&Blob.prototype.isPrototypeOf(y)?this._bodyBlob=y:k.formData&&FormData.prototype.isPrototypeOf(y)?this._bodyFormData=y:k.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)?this._bodyText=y.toString():k.arrayBuffer&&k.blob&&S(y)?(this._bodyArrayBuffer=M(y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):k.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(y)||I(y))?this._bodyArrayBuffer=M(y):this._bodyText=y=Object.prototype.toString.call(y):this._bodyText="",this.headers.get("content-type")||(typeof y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):k.searchParams&&URLSearchParams.prototype.isPrototypeOf(y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},k.blob&&(this.blob=function(){var y=z(this);if(y)return y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(ie)}),this.text=function(){var y=z(this);if(y)return y;if(this._bodyBlob)return ne(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ae(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},k.formData&&(this.formData=function(){return this.text().then(pe)}),this.json=function(){return this.text().then(JSON.parse)},this}var q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ee(y){var U=y.toUpperCase();return q.indexOf(U)>-1?U:y}function se(y,U){U=U||{};var Q=U.body;if(y instanceof se){if(y.bodyUsed)throw new TypeError("Already read");this.url=y.url,this.credentials=y.credentials,U.headers||(this.headers=new X(y.headers)),this.method=y.method,this.mode=y.mode,this.signal=y.signal,!Q&&y._bodyInit!=null&&(Q=y._bodyInit,y.bodyUsed=!0)}else this.url=String(y);if(this.credentials=U.credentials||this.credentials||"same-origin",(U.headers||!this.headers)&&(this.headers=new X(U.headers)),this.method=ee(U.method||this.method||"GET"),this.mode=U.mode||this.mode||null,this.signal=U.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}se.prototype.clone=function(){return new se(this,{body:this._bodyInit})};function pe(y){var U=new FormData;return y.trim().split("&").forEach(function(Q){if(Q){var fe=Q.split("="),te=fe.shift().replace(/\+/g," "),oe=fe.join("=").replace(/\+/g," ");U.append(decodeURIComponent(te),decodeURIComponent(oe))}}),U}function _(y){var U=new X,Q=y.replace(/\r?\n[\t ]+/g," ");return Q.split(/\r?\n/).forEach(function(fe){var te=fe.split(":"),oe=te.shift().trim();if(oe){var me=te.join(":").trim();U.append(oe,me)}}),U}Z.call(se.prototype);function O(y,U){U||(U={}),this.type="default",this.status=U.status===void 0?200:U.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in U?U.statusText:"OK",this.headers=new X(U.headers),this.url=U.url||"",this._initBody(y)}Z.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new X(this.headers),url:this.url})},O.error=function(){var y=new O(null,{status:0,statusText:""});return y.type="error",y};var H=[301,302,303,307,308];O.redirect=function(y,U){if(H.indexOf(U)===-1)throw new RangeError("Invalid status code");return new O(null,{status:U,headers:{location:y}})},m.DOMException=T.DOMException;try{new m.DOMException}catch(y){m.DOMException=function(U,Q){this.message=U,this.name=Q;var fe=Error(U);this.stack=fe.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function $(y,U){return new Promise(function(Q,fe){var te=new se(y,U);if(te.signal&&te.signal.aborted)return fe(new m.DOMException("Aborted","AbortError"));var oe=new XMLHttpRequest;function me(){oe.abort()}oe.onload=function(){var _e={status:oe.status,statusText:oe.statusText,headers:_(oe.getAllResponseHeaders()||"")};_e.url="responseURL"in oe?oe.responseURL:_e.headers.get("X-Request-URL");var xe="response"in oe?oe.response:oe.responseText;Q(new O(xe,_e))},oe.onerror=function(){fe(new TypeError("Network request failed"))},oe.ontimeout=function(){fe(new TypeError("Network request failed"))},oe.onabort=function(){fe(new m.DOMException("Aborted","AbortError"))},oe.open(te.method,te.url,!0),te.credentials==="include"?oe.withCredentials=!0:te.credentials==="omit"&&(oe.withCredentials=!1),"responseType"in oe&&k.blob&&(oe.responseType="blob"),te.headers.forEach(function(_e,xe){oe.setRequestHeader(xe,_e)}),te.signal&&(te.signal.addEventListener("abort",me),oe.onreadystatechange=function(){oe.readyState===4&&te.signal.removeEventListener("abort",me)}),oe.send(typeof te._bodyInit=="undefined"?null:te._bodyInit)})}return $.polyfill=!0,T.fetch||(T.fetch=$,T.Headers=X,T.Request=se,T.Response=O),m.Headers=X,m.Request=se,m.Response=O,m.fetch=$,Object.defineProperty(m,"__esModule",{value:!0}),m}({})})(F),F.fetch.ponyfill=!0,delete F.fetch.polyfill;var L=F;P=L.fetch,P.default=L.fetch,P.fetch=L.fetch,P.Headers=L.Headers,P.Request=L.Request,P.Response=L.Response,d.exports=P},7360:function(d,P){var E,F,L;(function(T,w){F=[],E=w,L=typeof E=="function"?E.apply(P,F):E,L!==void 0&&(d.exports=L)})(this,function(){function w(ne){var ae={single:function(M,Z,q){if(!M||(z(M)||(M=ae.getPreparedSearch(M)),!Z))return null;z(Z)||(Z=ae.getPrepared(Z));var ee=q&&q.allowTypo!==void 0?q.allowTypo:ne&&ne.allowTypo!==void 0?ne.allowTypo:!0,se=ee?ae.algorithm:ae.algorithmNoTypo;return se(M,Z,M[0])},go:function(M,Z,q){if(!M)return A;M=ae.prepareSearch(M);var ee=M[0],se=q&&q.threshold||ne&&ne.threshold||-9007199254740991,pe=q&&q.limit||ne&&ne.limit||9007199254740991,_=q&&q.allowTypo!==void 0?q.allowTypo:ne&&ne.allowTypo!==void 0?ne.allowTypo:!0,O=_?ae.algorithm:ae.algorithmNoTypo,H=0,$=0,y=Z.length;if(q&&q.keys)for(var U=q.scoreFn||J,Q=q.keys,fe=Q.length,te=y-1;te>=0;--te){for(var oe=Z[te],me=new Array(fe),_e=fe-1;_e>=0;--_e){var xe=Q[_e],he=X(oe,xe);if(!he){me[_e]=null;continue}z(he)||(he=ae.getPrepared(he)),me[_e]=O(M,he,ee)}me.obj=oe;var Ee=U(me);Ee!==null&&(Ee<se||(me.score=Ee,H<pe?(ie.add(me),++H):(++$,Ee>ie.peek().score&&ie.replaceTop(me))))}else if(q&&q.key)for(var xe=q.key,te=y-1;te>=0;--te){var oe=Z[te],he=X(oe,xe);if(!!he){z(he)||(he=ae.getPrepared(he));var we=O(M,he,ee);we!==null&&(we.score<se||(we={target:we.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:we.score,indexes:we.indexes,obj:oe},H<pe?(ie.add(we),++H):(++$,we.score>ie.peek().score&&ie.replaceTop(we))))}}else for(var te=y-1;te>=0;--te){var he=Z[te];if(!!he){z(he)||(he=ae.getPrepared(he));var we=O(M,he,ee);we!==null&&(we.score<se||(H<pe?(ie.add(we),++H):(++$,we.score>ie.peek().score&&ie.replaceTop(we))))}}if(H===0)return A;for(var Ae=new Array(H),te=H-1;te>=0;--te)Ae[te]=ie.poll();return Ae.total=H+$,Ae},goAsync:function(M,Z,q){var ee=!1,se=new Promise(function(pe,_){if(!M)return pe(A);M=ae.prepareSearch(M);var O=M[0],H=Y(),$=Z.length-1,y=q&&q.threshold||ne&&ne.threshold||-9007199254740991,U=q&&q.limit||ne&&ne.limit||9007199254740991,Q=q&&q.allowTypo!==void 0?q.allowTypo:ne&&ne.allowTypo!==void 0?ne.allowTypo:!0,fe=Q?ae.algorithm:ae.algorithmNoTypo,te=0,oe=0;function me(){if(ee)return _("canceled");var _e=Date.now();if(q&&q.keys)for(var xe=q.scoreFn||J,he=q.keys,Ee=he.length;$>=0;--$){for(var we=Z[$],Ae=new Array(Ee),ke=Ee-1;ke>=0;--ke){var Re=he[ke],De=X(we,Re);if(!De){Ae[ke]=null;continue}z(De)||(De=ae.getPrepared(De)),Ae[ke]=fe(M,De,O)}Ae.obj=we;var Ze=xe(Ae);if(Ze!==null&&!(Ze<y)&&(Ae.score=Ze,te<U?(H.add(Ae),++te):(++oe,Ze>H.peek().score&&H.replaceTop(Ae)),$%1e3==0&&Date.now()-_e>=10)){m?setImmediate(me):setTimeout(me);return}}else if(q&&q.key)for(var Re=q.key;$>=0;--$){var we=Z[$],De=X(we,Re);if(!!De){z(De)||(De=ae.getPrepared(De));var Pe=fe(M,De,O);if(Pe!==null&&!(Pe.score<y)&&(Pe={target:Pe.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:Pe.score,indexes:Pe.indexes,obj:we},te<U?(H.add(Pe),++te):(++oe,Pe.score>H.peek().score&&H.replaceTop(Pe)),$%1e3==0&&Date.now()-_e>=10)){m?setImmediate(me):setTimeout(me);return}}}else for(;$>=0;--$){var De=Z[$];if(!!De){z(De)||(De=ae.getPrepared(De));var Pe=fe(M,De,O);if(Pe!==null&&!(Pe.score<y)&&(te<U?(H.add(Pe),++te):(++oe,Pe.score>H.peek().score&&H.replaceTop(Pe)),$%1e3==0&&Date.now()-_e>=10)){m?setImmediate(me):setTimeout(me);return}}}if(te===0)return pe(A);for(var ot=new Array(te),Bt=te-1;Bt>=0;--Bt)ot[Bt]=H.poll();ot.total=te+oe,pe(ot)}m?setImmediate(me):me()});return se.cancel=function(){ee=!0},se},highlight:function(M,Z,q){if(M===null)return null;Z===void 0&&(Z="<b>"),q===void 0&&(q="</b>");for(var ee="",se=0,pe=!1,_=M.target,O=_.length,H=M.indexes,$=0;$<O;++$){var y=_[$];if(H[se]===$){if(++se,pe||(pe=!0,ee+=Z),se===H.length){ee+=y+q+_.substr($+1);break}}else pe&&(pe=!1,ee+=q);ee+=y}return ee},prepare:function(M){if(!!M)return{target:M,_targetLowerCodes:ae.prepareLowerCodes(M),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(M){if(!!M)return{target:M,_targetLowerCodes:ae.prepareLowerCodes(M),_nextBeginningIndexes:ae.prepareNextBeginningIndexes(M),score:null,indexes:null,obj:null}},prepareSearch:function(M){if(!!M)return ae.prepareLowerCodes(M)},getPrepared:function(M){if(M.length>999)return ae.prepare(M);var Z=k.get(M);return Z!==void 0||(Z=ae.prepare(M),k.set(M,Z)),Z},getPreparedSearch:function(M){if(M.length>999)return ae.prepareSearch(M);var Z=S.get(M);return Z!==void 0||(Z=ae.prepareSearch(M),S.set(M,Z)),Z},algorithm:function(M,Z,q){for(var ee=Z._targetLowerCodes,se=M.length,pe=ee.length,_=0,O=0,H=0,$=0;;){var y=q===ee[O];if(y){if(I[$++]=O,++_,_===se)break;q=M[H===0?_:H===_?_+1:H===_-1?_-1:_]}if(++O,O>=pe)for(;;){if(_<=1)return null;if(H===0){--_;var U=M[_];if(q===U)continue;H=_}else{if(H===1)return null;--H,_=H,q=M[_+1];var U=M[_];if(q===U)continue}$=_,O=I[$-1]+1;break}}var _=0,Q=0,fe=!1,te=0,oe=Z._nextBeginningIndexes;oe===null&&(oe=Z._nextBeginningIndexes=ae.prepareNextBeginningIndexes(Z.target));var me=O=I[0]===0?0:oe[I[0]-1];if(O!==pe)for(;;)if(O>=pe){if(_<=0){if(++Q,Q>se-2)break;if(M[Q]===M[Q+1])continue;O=me;continue}--_;var _e=x[--te];O=oe[_e]}else{var y=M[Q===0?_:Q===_?_+1:Q===_-1?_-1:_]===ee[O];if(y){if(x[te++]=O,++_,_===se){fe=!0;break}++O}else O=oe[O]}{if(fe)var xe=x,he=te;else var xe=I,he=$;for(var Ee=0,we=-1,Ae=0;Ae<se;++Ae){var O=xe[Ae];we!==O-1&&(Ee-=O),we=O}fe?Q!==0&&(Ee+=-20):(Ee*=1e3,H!==0&&(Ee+=-20)),Ee-=pe-se,Z.score=Ee,Z.indexes=new Array(he);for(var Ae=he-1;Ae>=0;--Ae)Z.indexes[Ae]=xe[Ae];return Z}},algorithmNoTypo:function(M,Z,q){for(var ee=Z._targetLowerCodes,se=M.length,pe=ee.length,_=0,O=0,H=0;;){var $=q===ee[O];if($){if(I[H++]=O,++_,_===se)break;q=M[_]}if(++O,O>=pe)return null}var _=0,y=!1,U=0,Q=Z._nextBeginningIndexes;Q===null&&(Q=Z._nextBeginningIndexes=ae.prepareNextBeginningIndexes(Z.target));var fe=O=I[0]===0?0:Q[I[0]-1];if(O!==pe)for(;;)if(O>=pe){if(_<=0)break;--_;var te=x[--U];O=Q[te]}else{var $=M[_]===ee[O];if($){if(x[U++]=O,++_,_===se){y=!0;break}++O}else O=Q[O]}{if(y)var oe=x,me=U;else var oe=I,me=H;for(var _e=0,xe=-1,he=0;he<se;++he){var O=oe[he];xe!==O-1&&(_e-=O),xe=O}y||(_e*=1e3),_e-=pe-se,Z.score=_e,Z.indexes=new Array(me);for(var he=me-1;he>=0;--he)Z.indexes[he]=oe[he];return Z}},prepareLowerCodes:function(M){for(var Z=M.length,q=[],ee=M.toLowerCase(),se=0;se<Z;++se)q[se]=ee.charCodeAt(se);return q},prepareBeginningIndexes:function(M){for(var Z=M.length,q=[],ee=0,se=!1,pe=!1,_=0;_<Z;++_){var O=M.charCodeAt(_),H=O>=65&&O<=90,$=H||O>=97&&O<=122||O>=48&&O<=57,y=H&&!se||!pe||!$;se=H,pe=$,y&&(q[ee++]=_)}return q},prepareNextBeginningIndexes:function(M){for(var Z=M.length,q=ae.prepareBeginningIndexes(M),ee=[],se=q[0],pe=0,_=0;_<Z;++_)se>_?ee[_]=se:(se=q[++pe],ee[_]=se===void 0?Z:se);return ee},cleanup:j,new:w};return ae}var m=typeof window=="undefined",k=new Map,S=new Map,A=[];A.total=0;var I=[],x=[];function j(){k.clear(),S.clear(),I=[],x=[]}function J(ne){for(var ae=-9007199254740991,M=ne.length-1;M>=0;--M){var Z=ne[M];if(Z!==null){var q=Z.score;q>ae&&(ae=q)}}return ae===-9007199254740991?null:ae}function X(ne,ae){var M=ne[ae];if(M!==void 0)return M;var Z=ae;Array.isArray(ae)||(Z=ae.split("."));for(var q=Z.length,ee=-1;ne&&++ee<q;)ne=ne[Z[ee]];return ne}function z(ne){return typeof ne=="object"}var Y=function(){var ne=[],ae=0,M={};function Z(){for(var q=0,ee=ne[q],se=1;se<ae;){var pe=se+1;q=se,pe<ae&&ne[pe].score<ne[se].score&&(q=pe),ne[q-1>>1]=ne[q],se=1+(q<<1)}for(var _=q-1>>1;q>0&&ee.score<ne[_].score;_=(q=_)-1>>1)ne[q]=ne[_];ne[q]=ee}return M.add=function(q){var ee=ae;ne[ae++]=q;for(var se=ee-1>>1;ee>0&&q.score<ne[se].score;se=(ee=se)-1>>1)ne[ee]=ne[se];ne[ee]=q},M.poll=function(){if(ae!==0){var q=ne[0];return ne[0]=ne[--ae],Z(),q}},M.peek=function(q){if(ae!==0)return ne[0]},M.replaceTop=function(q){ne[0]=q,Z()},M},ie=Y();return w()})},1171:(d,P,E)=>{d.exports=z,z.Minimatch=Y;var F={sep:"/"};try{F=E(6470)}catch(_){}var L=z.GLOBSTAR=Y.GLOBSTAR={},T=E(3644),w={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},m="[^/]",k=m+"*?",S="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",A="(?:(?!(?:\\/|^)\\.).)*?",I=x("().*{}+?[]^$\\!");function x(_){return _.split("").reduce(function(O,H){return O[H]=!0,O},{})}var j=/\/+/;z.filter=J;function J(_,O){return O=O||{},function(H,$,y){return z(H,_,O)}}function X(_,O){_=_||{},O=O||{};var H={};return Object.keys(O).forEach(function($){H[$]=O[$]}),Object.keys(_).forEach(function($){H[$]=_[$]}),H}z.defaults=function(_){if(!_||!Object.keys(_).length)return z;var O=z,H=function(y,U,Q){return O.minimatch(y,U,X(_,Q))};return H.Minimatch=function(y,U){return new O.Minimatch(y,X(_,U))},H},Y.defaults=function(_){return!_||!Object.keys(_).length?Y:z.defaults(_).Minimatch};function z(_,O,H){if(typeof O!="string")throw new TypeError("glob pattern string required");return H||(H={}),!H.nocomment&&O.charAt(0)==="#"?!1:O.trim()===""?_==="":new Y(O,H).match(_)}function Y(_,O){if(!(this instanceof Y))return new Y(_,O);if(typeof _!="string")throw new TypeError("glob pattern string required");O||(O={}),_=_.trim(),F.sep!=="/"&&(_=_.split(F.sep).join("/")),this.options=O,this.set=[],this.pattern=_,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}Y.prototype.debug=function(){},Y.prototype.make=ie;function ie(){if(!this._made){var _=this.pattern,O=this.options;if(!O.nocomment&&_.charAt(0)==="#"){this.comment=!0;return}if(!_){this.empty=!0;return}this.parseNegate();var H=this.globSet=this.braceExpand();O.debug&&(this.debug=console.error),this.debug(this.pattern,H),H=this.globParts=H.map(function($){return $.split(j)}),this.debug(this.pattern,H),H=H.map(function($,y,U){return $.map(this.parse,this)},this),this.debug(this.pattern,H),H=H.filter(function($){return $.indexOf(!1)===-1}),this.debug(this.pattern,H),this.set=H}}Y.prototype.parseNegate=ne;function ne(){var _=this.pattern,O=!1,H=this.options,$=0;if(!H.nonegate){for(var y=0,U=_.length;y<U&&_.charAt(y)==="!";y++)O=!O,$++;$&&(this.pattern=_.substr($)),this.negate=O}}z.braceExpand=function(_,O){return ae(_,O)},Y.prototype.braceExpand=ae;function ae(_,O){if(O||(this instanceof Y?O=this.options:O={}),_=typeof _=="undefined"?this.pattern:_,typeof _=="undefined")throw new TypeError("undefined pattern");return O.nobrace||!_.match(/\{.*\}/)?[_]:T(_)}Y.prototype.parse=Z;var M={};function Z(_,O){if(_.length>1024*64)throw new TypeError("pattern is too long");var H=this.options;if(!H.noglobstar&&_==="**")return L;if(_==="")return"";var $="",y=!!H.nocase,U=!1,Q=[],fe=[],te,oe=!1,me=-1,_e=-1,xe=_.charAt(0)==="."?"":H.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",he=this;function Ee(){if(te){switch(te){case"*":$+=k,y=!0;break;case"?":$+=m,y=!0;break;default:$+="\\"+te;break}he.debug("clearStateChar %j %j",te,$),te=!1}}for(var we=0,Ae=_.length,ke;we<Ae&&(ke=_.charAt(we));we++){if(this.debug("%s	%s %s %j",_,we,$,ke),U&&I[ke]){$+="\\"+ke,U=!1;continue}switch(ke){case"/":return!1;case"\\":Ee(),U=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",_,we,$,ke),oe){this.debug("  in class"),ke==="!"&&we===_e+1&&(ke="^"),$+=ke;continue}he.debug("call clearStateChar %j",te),Ee(),te=ke,H.noext&&Ee();continue;case"(":if(oe){$+="(";continue}if(!te){$+="\\(";continue}Q.push({type:te,start:we-1,reStart:$.length,open:w[te].open,close:w[te].close}),$+=te==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",te,$),te=!1;continue;case")":if(oe||!Q.length){$+="\\)";continue}Ee(),y=!0;var Re=Q.pop();$+=Re.close,Re.type==="!"&&fe.push(Re),Re.reEnd=$.length;continue;case"|":if(oe||!Q.length||U){$+="\\|",U=!1;continue}Ee(),$+="|";continue;case"[":if(Ee(),oe){$+="\\"+ke;continue}oe=!0,_e=we,me=$.length,$+=ke;continue;case"]":if(we===_e+1||!oe){$+="\\"+ke,U=!1;continue}if(oe){var De=_.substring(_e+1,we);try{RegExp("["+De+"]")}catch(Nn){var Ze=this.parse(De,M);$=$.substr(0,me)+"\\["+Ze[0]+"\\]",y=y||Ze[1],oe=!1;continue}}y=!0,oe=!1,$+=ke;continue;default:Ee(),U?U=!1:I[ke]&&!(ke==="^"&&oe)&&($+="\\"),$+=ke}}for(oe&&(De=_.substr(_e+1),Ze=this.parse(De,M),$=$.substr(0,me)+"\\["+Ze[0],y=y||Ze[1]),Re=Q.pop();Re;Re=Q.pop()){var Pe=$.slice(Re.reStart+Re.open.length);this.debug("setting tail",$,Re),Pe=Pe.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Nn,Hn,Vr){return Vr||(Vr="\\"),Hn+Hn+Vr+"|"}),this.debug(`tail=%j
   %s`,Pe,Pe,Re,$);var ot=Re.type==="*"?k:Re.type==="?"?m:"\\"+Re.type;y=!0,$=$.slice(0,Re.reStart)+ot+"\\("+Pe}Ee(),U&&($+="\\\\");var Bt=!1;switch($.charAt(0)){case".":case"[":case"(":Bt=!0}for(var wr=fe.length-1;wr>-1;wr--){var Nt=fe[wr],Ln=$.slice(0,Nt.reStart),Bi=$.slice(Nt.reStart,Nt.reEnd-8),Mn=$.slice(Nt.reEnd-8,Nt.reEnd),rr=$.slice(Nt.reEnd);Mn+=rr;var $n=Ln.split("(").length-1,qr=rr;for(we=0;we<$n;we++)qr=qr.replace(/\)[+*?]?/,"");rr=qr;var _r="";rr===""&&O!==M&&(_r="$");var Bn=Ln+Bi+rr+_r+Mn;$=Bn}if($!==""&&y&&($="(?=.)"+$),Bt&&($=xe+$),O===M)return[$,y];if(!y)return se(_);var Ni=H.nocase?"i":"";try{var Wr=new RegExp("^"+$+"$",Ni)}catch(Nn){return new RegExp("$.")}return Wr._glob=_,Wr._src=$,Wr}z.makeRe=function(_,O){return new Y(_,O||{}).makeRe()},Y.prototype.makeRe=q;function q(){if(this.regexp||this.regexp===!1)return this.regexp;var _=this.set;if(!_.length)return this.regexp=!1,this.regexp;var O=this.options,H=O.noglobstar?k:O.dot?S:A,$=O.nocase?"i":"",y=_.map(function(U){return U.map(function(Q){return Q===L?H:typeof Q=="string"?pe(Q):Q._src}).join("\\/")}).join("|");y="^(?:"+y+")$",this.negate&&(y="^(?!"+y+").*$");try{this.regexp=new RegExp(y,$)}catch(U){this.regexp=!1}return this.regexp}z.match=function(_,O,H){H=H||{};var $=new Y(O,H);return _=_.filter(function(y){return $.match(y)}),$.options.nonull&&!_.length&&_.push(O),_},Y.prototype.match=ee;function ee(_,O){if(this.debug("match",_,this.pattern),this.comment)return!1;if(this.empty)return _==="";if(_==="/"&&O)return!0;var H=this.options;F.sep!=="/"&&(_=_.split(F.sep).join("/")),_=_.split(j),this.debug(this.pattern,"split",_);var $=this.set;this.debug(this.pattern,"set",$);var y,U;for(U=_.length-1;U>=0&&(y=_[U],!y);U--);for(U=0;U<$.length;U++){var Q=$[U],fe=_;H.matchBase&&Q.length===1&&(fe=[y]);var te=this.matchOne(fe,Q,O);if(te)return H.flipNegate?!0:!this.negate}return H.flipNegate?!1:this.negate}Y.prototype.matchOne=function(_,O,H){var $=this.options;this.debug("matchOne",{this:this,file:_,pattern:O}),this.debug("matchOne",_.length,O.length);for(var y=0,U=0,Q=_.length,fe=O.length;y<Q&&U<fe;y++,U++){this.debug("matchOne loop");var te=O[U],oe=_[y];if(this.debug(O,te,oe),te===!1)return!1;if(te===L){this.debug("GLOBSTAR",[O,te,oe]);var me=y,_e=U+1;if(_e===fe){for(this.debug("** at the end");y<Q;y++)if(_[y]==="."||_[y]===".."||!$.dot&&_[y].charAt(0)===".")return!1;return!0}for(;me<Q;){var xe=_[me];if(this.debug(`
globstar while`,_,me,O,_e,xe),this.matchOne(_.slice(me),O.slice(_e),H))return this.debug("globstar found match!",me,Q,xe),!0;if(xe==="."||xe===".."||!$.dot&&xe.charAt(0)==="."){this.debug("dot detected!",_,me,O,_e);break}this.debug("globstar swallow a segment, and continue"),me++}return!!(H&&(this.debug(`
>>> no match, partial?`,_,me,O,_e),me===Q))}var he;if(typeof te=="string"?($.nocase?he=oe.toLowerCase()===te.toLowerCase():he=oe===te,this.debug("string match",te,oe,he)):(he=oe.match(te),this.debug("pattern match",te,oe,he)),!he)return!1}if(y===Q&&U===fe)return!0;if(y===Q)return H;if(U===fe){var Ee=y===Q-1&&_[y]==="";return Ee}throw new Error("wtf?")};function se(_){return _.replace(/\\(.)/g,"$1")}function pe(_){return _.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},778:(d,P,E)=>{var F=E(2479);d.exports=F(L),d.exports.strict=F(T),L.proto=L(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return L(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return T(this)},configurable:!0})});function L(w){var m=function(){return m.called?m.value:(m.called=!0,m.value=w.apply(this,arguments))};return m.called=!1,m}function T(w){var m=function(){if(m.called)throw new Error(m.onceError);return m.called=!0,m.value=w.apply(this,arguments)},k=w.name||"Function wrapped with `once`";return m.onceError=k+" shouldn't be called more than once",m.called=!1,m}},6470:d=>{"use strict";function P(T){if(typeof T!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(T))}function E(T,w){for(var m="",k=0,S=-1,A=0,I,x=0;x<=T.length;++x){if(x<T.length)I=T.charCodeAt(x);else{if(I===47)break;I=47}if(I===47){if(!(S===x-1||A===1))if(S!==x-1&&A===2){if(m.length<2||k!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var j=m.lastIndexOf("/");if(j!==m.length-1){j===-1?(m="",k=0):(m=m.slice(0,j),k=m.length-1-m.lastIndexOf("/")),S=x,A=0;continue}}else if(m.length===2||m.length===1){m="",k=0,S=x,A=0;continue}}w&&(m.length>0?m+="/..":m="..",k=2)}else m.length>0?m+="/"+T.slice(S+1,x):m=T.slice(S+1,x),k=x-S-1;S=x,A=0}else I===46&&A!==-1?++A:A=-1}return m}function F(T,w){var m=w.dir||w.root,k=w.base||(w.name||"")+(w.ext||"");return m?m===w.root?m+k:m+T+k:k}var L={resolve:function(){for(var w="",m=!1,k,S=arguments.length-1;S>=-1&&!m;S--){var A;S>=0?A=arguments[S]:(k===void 0&&(k=process.cwd()),A=k),P(A),A.length!==0&&(w=A+"/"+w,m=A.charCodeAt(0)===47)}return w=E(w,!m),m?w.length>0?"/"+w:"/":w.length>0?w:"."},normalize:function(w){if(P(w),w.length===0)return".";var m=w.charCodeAt(0)===47,k=w.charCodeAt(w.length-1)===47;return w=E(w,!m),w.length===0&&!m&&(w="."),w.length>0&&k&&(w+="/"),m?"/"+w:w},isAbsolute:function(w){return P(w),w.length>0&&w.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var w,m=0;m<arguments.length;++m){var k=arguments[m];P(k),k.length>0&&(w===void 0?w=k:w+="/"+k)}return w===void 0?".":L.normalize(w)},relative:function(w,m){if(P(w),P(m),w===m||(w=L.resolve(w),m=L.resolve(m),w===m))return"";for(var k=1;k<w.length&&w.charCodeAt(k)===47;++k);for(var S=w.length,A=S-k,I=1;I<m.length&&m.charCodeAt(I)===47;++I);for(var x=m.length,j=x-I,J=A<j?A:j,X=-1,z=0;z<=J;++z){if(z===J){if(j>J){if(m.charCodeAt(I+z)===47)return m.slice(I+z+1);if(z===0)return m.slice(I+z)}else A>J&&(w.charCodeAt(k+z)===47?X=z:z===0&&(X=0));break}var Y=w.charCodeAt(k+z),ie=m.charCodeAt(I+z);if(Y!==ie)break;Y===47&&(X=z)}var ne="";for(z=k+X+1;z<=S;++z)(z===S||w.charCodeAt(z)===47)&&(ne.length===0?ne+="..":ne+="/..");return ne.length>0?ne+m.slice(I+X):(I+=X,m.charCodeAt(I)===47&&++I,m.slice(I))},_makeLong:function(w){return w},dirname:function(w){if(P(w),w.length===0)return".";for(var m=w.charCodeAt(0),k=m===47,S=-1,A=!0,I=w.length-1;I>=1;--I)if(m=w.charCodeAt(I),m===47){if(!A){S=I;break}}else A=!1;return S===-1?k?"/":".":k&&S===1?"//":w.slice(0,S)},basename:function(w,m){if(m!==void 0&&typeof m!="string")throw new TypeError('"ext" argument must be a string');P(w);var k=0,S=-1,A=!0,I;if(m!==void 0&&m.length>0&&m.length<=w.length){if(m.length===w.length&&m===w)return"";var x=m.length-1,j=-1;for(I=w.length-1;I>=0;--I){var J=w.charCodeAt(I);if(J===47){if(!A){k=I+1;break}}else j===-1&&(A=!1,j=I+1),x>=0&&(J===m.charCodeAt(x)?--x==-1&&(S=I):(x=-1,S=j))}return k===S?S=j:S===-1&&(S=w.length),w.slice(k,S)}else{for(I=w.length-1;I>=0;--I)if(w.charCodeAt(I)===47){if(!A){k=I+1;break}}else S===-1&&(A=!1,S=I+1);return S===-1?"":w.slice(k,S)}},extname:function(w){P(w);for(var m=-1,k=0,S=-1,A=!0,I=0,x=w.length-1;x>=0;--x){var j=w.charCodeAt(x);if(j===47){if(!A){k=x+1;break}continue}S===-1&&(A=!1,S=x+1),j===46?m===-1?m=x:I!==1&&(I=1):m!==-1&&(I=-1)}return m===-1||S===-1||I===0||I===1&&m===S-1&&m===k+1?"":w.slice(m,S)},format:function(w){if(w===null||typeof w!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof w);return F("/",w)},parse:function(w){P(w);var m={root:"",dir:"",base:"",ext:"",name:""};if(w.length===0)return m;var k=w.charCodeAt(0),S=k===47,A;S?(m.root="/",A=1):A=0;for(var I=-1,x=0,j=-1,J=!0,X=w.length-1,z=0;X>=A;--X){if(k=w.charCodeAt(X),k===47){if(!J){x=X+1;break}continue}j===-1&&(J=!1,j=X+1),k===46?I===-1?I=X:z!==1&&(z=1):I!==-1&&(z=-1)}return I===-1||j===-1||z===0||z===1&&I===j-1&&I===x+1?j!==-1&&(x===0&&S?m.base=m.name=w.slice(1,j):m.base=m.name=w.slice(x,j)):(x===0&&S?(m.name=w.slice(1,I),m.base=w.slice(1,j)):(m.name=w.slice(x,I),m.base=w.slice(x,j)),m.ext=w.slice(I,j)),x>0?m.dir=w.slice(0,x-1):S&&(m.dir="/"),m},sep:"/",delimiter:":",win32:null,posix:null};L.posix=L,d.exports=L},189:function(d,P,E){"use strict";var F=this&&this.__spreadArrays||function(){for(var S=0,A=0,I=arguments.length;A<I;A++)S+=arguments[A].length;for(var x=Array(S),j=0,A=0;A<I;A++)for(var J=arguments[A],X=0,z=J.length;X<z;X++,j++)x[j]=J[X];return x};Object.defineProperty(P,"__esModule",{value:!0}),P.config=P.loadMessageBundle=void 0;var L=E(1926),T=E(800),w=E(800);Object.defineProperty(P,"MessageFormat",{enumerable:!0,get:function(){return w.MessageFormat}}),Object.defineProperty(P,"BundleFormat",{enumerable:!0,get:function(){return w.BundleFormat}});function m(S){return function(A,I){for(var x=[],j=2;j<arguments.length;j++)x[j-2]=arguments[j];if(typeof A=="number")throw new Error("Browser implementation does currently not support externalized strings.");return T.localize.apply(void 0,F([A,I],x))}}P.loadMessageBundle=m;function k(S){return T.setPseudo((S==null?void 0:S.locale.toLowerCase())==="pseudo"),m}P.config=k,L.default.install(Object.freeze({loadMessageBundle:m,config:k}))},800:(d,P,E)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.config=P.loadMessageBundle=P.localize=P.format=P.setPseudo=P.isPseudo=P.isDefined=P.BundleFormat=P.MessageFormat=void 0;var F=E(1926),L;(function(j){j.file="file",j.bundle="bundle",j.both="both"})(L=P.MessageFormat||(P.MessageFormat={}));var T;(function(j){j.standalone="standalone",j.languagePack="languagePack"})(T=P.BundleFormat||(P.BundleFormat={}));var w;(function(j){function J(X){var z=X;return z&&m(z.key)&&m(z.comment)}j.is=J})(w||(w={}));function m(j){return typeof j!="undefined"}P.isDefined=m,P.isPseudo=!1;function k(j){P.isPseudo=j}P.setPseudo=k;function S(j,J){var X;return P.isPseudo&&(j="\uFF3B"+j.replace(/[aouei]/g,"$&$&")+"\uFF3D"),J.length===0?X=j:X=j.replace(/\{(\d+)\}/g,function(z,Y){var ie=Y[0],ne=J[ie],ae=z;return typeof ne=="string"?ae=ne:(typeof ne=="number"||typeof ne=="boolean"||ne===void 0||ne===null)&&(ae=String(ne)),ae}),X}P.format=S;function A(j,J){for(var X=[],z=2;z<arguments.length;z++)X[z-2]=arguments[z];return S(J,X)}P.localize=A;function I(j){return F.default().loadMessageBundle(j)}P.loadMessageBundle=I;function x(j){return F.default().config(j)}P.config=x},1926:(d,P)=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});var E;function F(){if(E===void 0)throw new Error("No runtime abstraction layer installed");return E}(function(L){function T(w){if(w===void 0)throw new Error("No runtime abstraction layer provided");E=w}L.install=T})(F||(F={})),P.default=F},2479:d=>{d.exports=P;function P(E,F){if(E&&F)return P(E)(F);if(typeof E!="function")throw new TypeError("need wrapper function");return Object.keys(E).forEach(function(T){L[T]=E[T]}),L;function L(){for(var T=new Array(arguments.length),w=0;w<T.length;w++)T[w]=arguments[w];var m=E.apply(this,T),k=T[T.length-1];return typeof m=="function"&&m!==k&&Object.keys(k).forEach(function(S){m[S]=k[S]}),m}}}},hs={};function Ie(d){var P=hs[d];if(P!==void 0)return P.exports;var E=hs[d]={exports:{}};return gu[d].call(E.exports,E,E.exports,Ie),E.exports}(()=>{Ie.n=d=>{var P=d&&d.__esModule?()=>d.default:()=>d;return Ie.d(P,{a:P}),P}})(),(()=>{Ie.d=(d,P)=>{for(var E in P)Ie.o(P,E)&&!Ie.o(d,E)&&Object.defineProperty(d,E,{enumerable:!0,get:P[E]})}})(),(()=>{Ie.o=(d,P)=>Object.prototype.hasOwnProperty.call(d,P)})(),(()=>{Ie.r=d=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}})();var $i={};(()=>{"use strict";Ie.r($i),Ie.d($i,{activate:()=>u_,isVirtualWorkspace:()=>as,isWeb:()=>vr,openWorkspace:()=>ut,showRepositoryNotFoundMessage:()=>ss});const d=require("vscode");var P=Ie(189);function E(){this.__data__=[],this.size=0}const F=E;function L(e,t){return e===t||e!==e&&t!==t}const T=L;function w(e,t){for(var r=e.length;r--;)if(T(e[r][0],t))return r;return-1}const m=w;var k=Array.prototype,S=k.splice;function A(e){var t=this.__data__,r=m(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():S.call(t,r,1),--this.size,!0}const I=A;function x(e){var t=this.__data__,r=m(t,e);return r<0?void 0:t[r][1]}const j=x;function J(e){return m(this.__data__,e)>-1}const X=J;function z(e,t){var r=this.__data__,n=m(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}const Y=z;function ie(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ie.prototype.clear=F,ie.prototype.delete=I,ie.prototype.get=j,ie.prototype.has=X,ie.prototype.set=Y;const ne=ie;function ae(){this.__data__=new ne,this.size=0}const M=ae;function Z(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}const q=Z;function ee(e){return this.__data__.get(e)}const se=ee;function pe(e){return this.__data__.has(e)}const _=pe;var O=typeof global=="object"&&global&&global.Object===Object&&global;const H=O;var $=typeof self=="object"&&self&&self.Object===Object&&self,y=H||$||Function("return this")();const U=y;var Q=U.Symbol;const fe=Q;var te=Object.prototype,oe=te.hasOwnProperty,me=te.toString,_e=fe?fe.toStringTag:void 0;function xe(e){var t=oe.call(e,_e),r=e[_e];try{e[_e]=void 0;var n=!0}catch(o){}var i=me.call(e);return n&&(t?e[_e]=r:delete e[_e]),i}const he=xe;var Ee=Object.prototype,we=Ee.toString;function Ae(e){return we.call(e)}const ke=Ae;var Re="[object Null]",De="[object Undefined]",Ze=fe?fe.toStringTag:void 0;function Pe(e){return e==null?e===void 0?De:Re:Ze&&Ze in Object(e)?he(e):ke(e)}const ot=Pe;function Bt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}const wr=Bt;var Nt="[object AsyncFunction]",Ln="[object Function]",Bi="[object GeneratorFunction]",Mn="[object Proxy]";function rr(e){if(!wr(e))return!1;var t=ot(e);return t==Ln||t==Bi||t==Nt||t==Mn}const $n=rr;var qr=U["__core-js_shared__"];const _r=qr;var Bn=function(){var e=/[^.]+$/.exec(_r&&_r.keys&&_r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ni(e){return!!Bn&&Bn in e}const Wr=Ni;var Nn=Function.prototype,Hn=Nn.toString;function Vr(e){if(e!=null){try{return Hn.call(e)}catch(t){}try{return e+""}catch(t){}}return""}const nr=Vr;var mu=/[\\^$.*+?()[\]{}|]/g,vu=/^\[object .+?Constructor\]$/,wu=Function.prototype,_u=Object.prototype,bu=wu.toString,yu=_u.hasOwnProperty,Eu=RegExp("^"+bu.call(yu).replace(mu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Tu(e){if(!wr(e)||Wr(e))return!1;var t=$n(e)?Eu:vu;return t.test(nr(e))}const Su=Tu;function ku(e,t){return e==null?void 0:e[t]}const Cu=ku;function xu(e,t){var r=Cu(e,t);return Su(r)?r:void 0}const br=xu;var Au=br(U,"Map");const Zr=Au;var Du=br(Object,"create");const Kr=Du;function Ru(){this.__data__=Kr?Kr(null):{},this.size=0}const Pu=Ru;function Fu(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}const Ou=Fu;var Uu="__lodash_hash_undefined__",Iu=Object.prototype,Gu=Iu.hasOwnProperty;function Lu(e){var t=this.__data__;if(Kr){var r=t[e];return r===Uu?void 0:r}return Gu.call(t,e)?t[e]:void 0}const Mu=Lu;var $u=Object.prototype,Bu=$u.hasOwnProperty;function Nu(e){var t=this.__data__;return Kr?t[e]!==void 0:Bu.call(t,e)}const Hu=Nu;var ju="__lodash_hash_undefined__";function zu(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Kr&&t===void 0?ju:t,this}const qu=zu;function yr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yr.prototype.clear=Pu,yr.prototype.delete=Ou,yr.prototype.get=Mu,yr.prototype.has=Hu,yr.prototype.set=qu;const fs=yr;function Wu(){this.size=0,this.__data__={hash:new fs,map:new(Zr||ne),string:new fs}}const Vu=Wu;function Zu(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}const Ku=Zu;function Qu(e,t){var r=e.__data__;return Ku(t)?r[typeof t=="string"?"string":"hash"]:r.map}const jn=Qu;function Xu(e){var t=jn(this,e).delete(e);return this.size-=t?1:0,t}const Yu=Xu;function Ju(e){return jn(this,e).get(e)}const ed=Ju;function td(e){return jn(this,e).has(e)}const rd=td;function nd(e,t){var r=jn(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}const id=nd;function Er(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Er.prototype.clear=Vu,Er.prototype.delete=Yu,Er.prototype.get=ed,Er.prototype.has=rd,Er.prototype.set=id;const ps=Er;var od=200;function sd(e,t){var r=this.__data__;if(r instanceof ne){var n=r.__data__;if(!Zr||n.length<od-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ps(n)}return r.set(e,t),this.size=r.size,this}const ad=sd;function Tr(e){var t=this.__data__=new ne(e);this.size=t.size}Tr.prototype.clear=M,Tr.prototype.delete=q,Tr.prototype.get=se,Tr.prototype.has=_,Tr.prototype.set=ad;const Hi=Tr;var cd="__lodash_hash_undefined__";function ld(e){return this.__data__.set(e,cd),this}const ud=ld;function dd(e){return this.__data__.has(e)}const hd=dd;function zn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ps;++t<r;)this.add(e[t])}zn.prototype.add=zn.prototype.push=ud,zn.prototype.has=hd;const fd=zn;function pd(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}const gd=pd;function md(e,t){return e.has(t)}const vd=md;var wd=1,_d=2;function bd(e,t,r,n,i,o){var s=r&wd,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var p=-1,f=!0,h=r&_d?new fd:void 0;for(o.set(e,t),o.set(t,e);++p<a;){var g=e[p],v=t[p];if(n)var C=s?n(v,g,p,t,e,o):n(g,v,p,e,t,o);if(C!==void 0){if(C)continue;f=!1;break}if(h){if(!gd(t,function(R,D){if(!vd(h,D)&&(g===R||i(g,R,r,n,o)))return h.push(D)})){f=!1;break}}else if(!(g===v||i(g,v,r,n,o))){f=!1;break}}return o.delete(e),o.delete(t),f}const gs=bd;var yd=U.Uint8Array;const ms=yd;function Ed(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}const Td=Ed;function Sd(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}const kd=Sd;var Cd=1,xd=2,Ad="[object Boolean]",Dd="[object Date]",Rd="[object Error]",Pd="[object Map]",Fd="[object Number]",Od="[object RegExp]",Ud="[object Set]",Id="[object String]",Gd="[object Symbol]",Ld="[object ArrayBuffer]",Md="[object DataView]",vs=fe?fe.prototype:void 0,ji=vs?vs.valueOf:void 0;function $d(e,t,r,n,i,o,s){switch(r){case Md:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Ld:return!(e.byteLength!=t.byteLength||!o(new ms(e),new ms(t)));case Ad:case Dd:case Fd:return T(+e,+t);case Rd:return e.name==t.name&&e.message==t.message;case Od:case Id:return e==t+"";case Pd:var a=Td;case Ud:var l=n&Cd;if(a||(a=kd),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=xd,s.set(e,t);var u=gs(a(e),a(t),n,i,o,s);return s.delete(e),u;case Gd:if(ji)return ji.call(e)==ji.call(t)}return!1}const Bd=$d;function Nd(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}const Hd=Nd;var jd=Array.isArray;const qn=jd;function zd(e,t,r){var n=t(e);return qn(e)?n:Hd(n,r(e))}const qd=zd;function Wd(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}const Vd=Wd;function Zd(){return[]}const Kd=Zd;var Qd=Object.prototype,Xd=Qd.propertyIsEnumerable,ws=Object.getOwnPropertySymbols,Yd=ws?function(e){return e==null?[]:(e=Object(e),Vd(ws(e),function(t){return Xd.call(e,t)}))}:Kd;const Jd=Yd;function eh(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}const th=eh;function rh(e){return e!=null&&typeof e=="object"}const Qr=rh;var nh="[object Arguments]";function ih(e){return Qr(e)&&ot(e)==nh}const _s=ih;var bs=Object.prototype,oh=bs.hasOwnProperty,sh=bs.propertyIsEnumerable,ah=_s(function(){return arguments}())?_s:function(e){return Qr(e)&&oh.call(e,"callee")&&!sh.call(e,"callee")};const ch=ah;function lh(){return!1}const uh=lh;var ys=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Es=ys&&typeof module=="object"&&module&&!module.nodeType&&module,dh=Es&&Es.exports===ys,Ts=dh?U.Buffer:void 0,hh=Ts?Ts.isBuffer:void 0,fh=hh||uh;const zi=fh;var ph=9007199254740991,gh=/^(?:0|[1-9]\d*)$/;function mh(e,t){var r=typeof e;return t=t==null?ph:t,!!t&&(r=="number"||r!="symbol"&&gh.test(e))&&e>-1&&e%1==0&&e<t}const vh=mh;var wh=9007199254740991;function _h(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=wh}const Ss=_h;var bh="[object Arguments]",yh="[object Array]",Eh="[object Boolean]",Th="[object Date]",Sh="[object Error]",kh="[object Function]",Ch="[object Map]",xh="[object Number]",Ah="[object Object]",Dh="[object RegExp]",Rh="[object Set]",Ph="[object String]",Fh="[object WeakMap]",Oh="[object ArrayBuffer]",Uh="[object DataView]",Ih="[object Float32Array]",Gh="[object Float64Array]",Lh="[object Int8Array]",Mh="[object Int16Array]",$h="[object Int32Array]",Bh="[object Uint8Array]",Nh="[object Uint8ClampedArray]",Hh="[object Uint16Array]",jh="[object Uint32Array]",Fe={};Fe[Ih]=Fe[Gh]=Fe[Lh]=Fe[Mh]=Fe[$h]=Fe[Bh]=Fe[Nh]=Fe[Hh]=Fe[jh]=!0,Fe[bh]=Fe[yh]=Fe[Oh]=Fe[Eh]=Fe[Uh]=Fe[Th]=Fe[Sh]=Fe[kh]=Fe[Ch]=Fe[xh]=Fe[Ah]=Fe[Dh]=Fe[Rh]=Fe[Ph]=Fe[Fh]=!1;function zh(e){return Qr(e)&&Ss(e.length)&&!!Fe[ot(e)]}const qh=zh;function Wh(e){return function(t){return e(t)}}const Vh=Wh;var ks=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xr=ks&&typeof module=="object"&&module&&!module.nodeType&&module,Zh=Xr&&Xr.exports===ks,qi=Zh&&H.process,Kh=function(){try{var e=Xr&&Xr.require&&Xr.require("util").types;return e||qi&&qi.binding&&qi.binding("util")}catch(t){}}();const Cs=Kh;var xs=Cs&&Cs.isTypedArray,Qh=xs?Vh(xs):qh;const As=Qh;var Xh=Object.prototype,Yh=Xh.hasOwnProperty;function Jh(e,t){var r=qn(e),n=!r&&ch(e),i=!r&&!n&&zi(e),o=!r&&!n&&!i&&As(e),s=r||n||i||o,a=s?th(e.length,String):[],l=a.length;for(var c in e)(t||Yh.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||vh(c,l)))&&a.push(c);return a}const ef=Jh;var tf=Object.prototype;function rf(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||tf;return e===r}const nf=rf;function of(e,t){return function(r){return e(t(r))}}var sf=of(Object.keys,Object);const af=sf;var cf=Object.prototype,lf=cf.hasOwnProperty;function uf(e){if(!nf(e))return af(e);var t=[];for(var r in Object(e))lf.call(e,r)&&r!="constructor"&&t.push(r);return t}const df=uf;function hf(e){return e!=null&&Ss(e.length)&&!$n(e)}const ff=hf;function pf(e){return ff(e)?ef(e):df(e)}const gf=pf;function mf(e){return qd(e,gf,Jd)}const Ds=mf;var vf=1,wf=Object.prototype,_f=wf.hasOwnProperty;function bf(e,t,r,n,i,o){var s=r&vf,a=Ds(e),l=a.length,c=Ds(t),u=c.length;if(l!=u&&!s)return!1;for(var p=l;p--;){var f=a[p];if(!(s?f in t:_f.call(t,f)))return!1}var h=o.get(e),g=o.get(t);if(h&&g)return h==t&&g==e;var v=!0;o.set(e,t),o.set(t,e);for(var C=s;++p<l;){f=a[p];var R=e[f],D=t[f];if(n)var N=s?n(D,R,f,t,e,o):n(R,D,f,e,t,o);if(!(N===void 0?R===D||i(R,D,r,n,o):N)){v=!1;break}C||(C=f=="constructor")}if(v&&!C){var G=e.constructor,W=t.constructor;G!=W&&"constructor"in e&&"constructor"in t&&!(typeof G=="function"&&G instanceof G&&typeof W=="function"&&W instanceof W)&&(v=!1)}return o.delete(e),o.delete(t),v}const yf=bf;var Ef=br(U,"DataView");const Wi=Ef;var Tf=br(U,"Promise");const Vi=Tf;var Sf=br(U,"Set");const Zi=Sf;var kf=br(U,"WeakMap");const Ki=kf;var Rs="[object Map]",Cf="[object Object]",Ps="[object Promise]",Fs="[object Set]",Os="[object WeakMap]",Us="[object DataView]",xf=nr(Wi),Af=nr(Zr),Df=nr(Vi),Rf=nr(Zi),Pf=nr(Ki),ir=ot;(Wi&&ir(new Wi(new ArrayBuffer(1)))!=Us||Zr&&ir(new Zr)!=Rs||Vi&&ir(Vi.resolve())!=Ps||Zi&&ir(new Zi)!=Fs||Ki&&ir(new Ki)!=Os)&&(ir=function(e){var t=ot(e),r=t==Cf?e.constructor:void 0,n=r?nr(r):"";if(n)switch(n){case xf:return Us;case Af:return Rs;case Df:return Ps;case Rf:return Fs;case Pf:return Os}return t});const Is=ir;var Ff=1,Gs="[object Arguments]",Ls="[object Array]",Wn="[object Object]",Of=Object.prototype,Ms=Of.hasOwnProperty;function Uf(e,t,r,n,i,o){var s=qn(e),a=qn(t),l=s?Ls:Is(e),c=a?Ls:Is(t);l=l==Gs?Wn:l,c=c==Gs?Wn:c;var u=l==Wn,p=c==Wn,f=l==c;if(f&&zi(e)){if(!zi(t))return!1;s=!0,u=!1}if(f&&!u)return o||(o=new Hi),s||As(e)?gs(e,t,r,n,i,o):Bd(e,t,l,r,n,i,o);if(!(r&Ff)){var h=u&&Ms.call(e,"__wrapped__"),g=p&&Ms.call(t,"__wrapped__");if(h||g){var v=h?e.value():e,C=g?t.value():t;return o||(o=new Hi),i(v,C,r,n,o)}}return f?(o||(o=new Hi),yf(e,t,r,n,i,o)):!1}const If=Uf;function $s(e,t,r,n,i){return e===t?!0:e==null||t==null||!Qr(e)&&!Qr(t)?e!==e&&t!==t:If(e,t,r,n,$s,i)}const Gf=$s;function Lf(e,t){return Gf(e,t)}const Mf=Lf,Ct="remoteHub";class Bs{constructor(){this._onDidChange=new d.EventEmitter,this._onDidChangeAny=new d.EventEmitter}static configure(t){t.subscriptions.push(d.workspace.onDidChangeConfiguration(Ce.onConfigurationChanged,Ce))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(t){if(!t.affectsConfiguration(Ct)){this._onDidChangeAny.fire(t);return}this._onDidChangeAny.fire(t),this._onDidChange.fire(t)}get(t,r,n){return n===void 0?d.workspace.getConfiguration(t===void 0?void 0:Ct,r).get(t===void 0?Ct:t):d.workspace.getConfiguration(t===void 0?void 0:Ct,r).get(t===void 0?Ct:t,n)}getAny(t,r,n){return n===void 0?d.workspace.getConfiguration(void 0,r).get(t):d.workspace.getConfiguration(void 0,r).get(t,n)}changed(t,r,n){var i;return(i=t==null?void 0:t.affectsConfiguration(`${Ct}.${r}`,n))!=null?i:!0}inspect(t,r){return d.workspace.getConfiguration(t===void 0?void 0:Ct,r).inspect(t===void 0?Ct:t)}inspectAny(t,r){return d.workspace.getConfiguration(void 0,r).inspect(t)}async migrate(t,r,n){const i=Ce.inspect(t);if(i===void 0)return!1;let o=!1;return i.globalValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.globalValue):i.globalValue,d.ConfigurationTarget.Global),o=!0),i.workspaceValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceValue):i.workspaceValue,d.ConfigurationTarget.Workspace),o=!0),i.workspaceFolderValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,d.ConfigurationTarget.WorkspaceFolder),o=!0),!o&&n.fallbackValue!==void 0&&(await this.update(r,n.fallbackValue,d.ConfigurationTarget.Global),o=!0),o}async migrateIfMissing(t,r,n){const i=Ce.inspect(t);if(i===void 0)return;const o=Ce.inspect(r);i.globalValue!==void 0&&(o===void 0||o.globalValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.globalValue):i.globalValue,d.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(o===void 0||o.workspaceValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceValue):i.workspaceValue,d.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(o===void 0||o.workspaceFolderValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,d.ConfigurationTarget.WorkspaceFolder)}name(t){return t}update(t,r,n){return d.workspace.getConfiguration(Ct).update(t,r,n)}updateAny(t,r,n,i){return d.workspace.getConfiguration(void 0,n===d.ConfigurationTarget.Global?void 0:i).update(t,r,n)}updateEffective(t,r){const n=Ce.inspect(t);return n.workspaceFolderValue!==void 0?r===n.workspaceFolderValue?Promise.resolve(void 0):Ce.update(t,r,d.ConfigurationTarget.WorkspaceFolder):n.workspaceValue!==void 0?r===n.workspaceValue?Promise.resolve(void 0):Ce.update(t,r,d.ConfigurationTarget.Workspace):n.globalValue===r||n.globalValue===void 0&&r===n.defaultValue?Promise.resolve(void 0):Ce.update(t,Mf(r,n.defaultValue)?void 0:r,d.ConfigurationTarget.Global)}}const Ce=new Bs;var Vn;(function(e){e.HasVirtualFolders="remoteHub:hasVirtualFolders",e.VirtualFolderProviders="remoteHub:virtualFolderProviders"})(Vn||(Vn={}));const Ns=new Map;function Sr(e){return e==="isWeb"?vr:e==="remoteName"?d.env.remoteName:e==="virtualWorkspace"?as():e.startsWith("config.")?Ce.getAny(e.substr(7)):Ns.get(e)}async function Hs(e,t){Ns.set(e,t),await d.commands.executeCommand("setContext",e,t)}const st="";var ze;(function(e){e.Silent="silent",e.Errors="errors",e.Verbose="verbose",e.Debug="debug"})(ze||(ze={}));const js="RemoteHub",Zn=`[${js}]`,ft=class{static configure(e,t){this._isDebugging=e.extensionMode===d.ExtensionMode.Development,this.level=t}static get level(){return this._level}static set level(e){var t,r;this._level=e,e===ze.Silent?((t=this.output)==null||t.dispose(),this.output=void 0):this.output=(r=this.output)!=null?r:d.window.createOutputChannel(js)}static get isDebugging(){return this._isDebugging}static debug(e,...t){this.level!==ze.Debug&&!ft.isDebugging||(ft.isDebugging&&console.log(this.timestamp,Zn,e!=null?e:st,...t),this.output!=null&&this.level===ze.Debug&&this.output.appendLine(`${this.timestamp} ${e!=null?e:st}${this.toLoggableParams(!0,t)}`))}static error(e,t,...r){if(!(this.level===ze.Silent&&!ft.isDebugging)){if(t===void 0){const n=e.stack;if(n){const i=/.*\s*?at\s(.+?)\s/.exec(n);i!=null&&(t=i[1])}}ft.isDebugging&&console.error(this.timestamp,Zn,t!=null?t:st,...r,e),this.output!=null&&this.level!==ze.Silent&&this.output.appendLine(`${this.timestamp} ${t!=null?t:st}${this.toLoggableParams(!1,r)}
${e==null?void 0:e.toString()}`)}}static log(e,...t){this.level!==ze.Verbose&&this.level!==ze.Debug&&!ft.isDebugging||(ft.isDebugging&&console.log(this.timestamp,Zn,e!=null?e:st,...t),this.output!=null&&(this.level===ze.Verbose||this.level===ze.Debug)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:st}${this.toLoggableParams(!1,t)}`))}static warn(e,...t){this.level===ze.Silent&&!ft.isDebugging||(ft.isDebugging&&console.warn(this.timestamp,Zn,e!=null?e:st,...t),this.output!=null&&this.level!==ze.Silent&&this.output.appendLine(`${this.timestamp} ${e!=null?e:st}${this.toLoggableParams(!1,t)}`))}static showOutputChannel(){var e;(e=this.output)==null||e.show()}static toLoggable(e,t){if(typeof e!="object")return String(e);if(e instanceof d.Uri)return`Uri(${e.toString(!0)})`;try{return JSON.stringify(e,t)}catch{return"<error>"}}static get timestamp(){const e=new Date;return`[${e.toISOString().replace(/T/," ").replace(/\..+/,st)}:${`00${e.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(e,t){if(t.length===0||e&&this.level!==ze.Debug&&!ft.isDebugging)return st;const r=t.map(n=>this.toLoggable(n)).join(", ");return r.length!==0?` \u2014 ${r}`:st}};let ue=ft;ue._level=ze.Silent;class $f{constructor(t){this.menuItem=t}get label(){return`${this.menuItem.icon?`${this.menuItem.icon} `:""}${this.menuItem.title}`}get detail(){return this.menuItem.extension.builtin?"Built-in":this.menuItem.extension.name||this.menuItem.extension.id}async execute(t){return void await d.commands.executeCommand(this.menuItem.command,t)}}var Qi;(function(e){async function t(r,n,i){const o=Bf(r).map(l=>new $f(l)),s=d.window.createQuickPick(),a=[];try{return await new Promise(c=>{a.push(s.onDidHide(()=>c(void 0)),s.onDidAccept(()=>{if(s.activeItems.length!==0){const[u]=s.activeItems;c(u)}})),s.title=i,s.placeholder=n,s.items=o,s.show()})}finally{s.dispose(),a.forEach(l=>void l.dispose())}}e.show=t})(Qi||(Qi={}));function Bf(e){var t,r,n,i,o;const s=new Map,[,a]=e.extension.id.split(".");for(const c of d.extensions.all){const{name:u,displayName:p,contributes:f}=c.packageJSON;if(!f)continue;const h=(r=(t=f.virtualWorkspaces)==null?void 0:t.menus)==null?void 0:r.continueOn;if(h==null?void 0:h.length){const g=new Map(((n=f.commands)!=null?n:[]).map(v=>[v.command,v]));for(const v of h){if(!v.command)continue;if(s.has(v.command)){ue.warn(`Duplicate 'continueOn' menu command: ${v.command}`);continue}const C=g.get(v.command);if(!C){ue.warn(`Unable to find 'continueOn' menu command: ${v.command}`);continue}if(!Nf(v.when))continue;const R=(o=(i=v.group)==null?void 0:i.lastIndexOf("@"))!=null?o:-1;s.set(v.command,{extension:{id:u,name:p,builtin:u===a},command:C.command,title:C.title,icon:typeof C.icon=="string"?C.icon:void 0,group:R>0?v.group.substr(0,R):v.group,order:R>0?Number(v.group.substr(R+1)):0,category:C.category})}}}function l(c,u){const p=c.group,f=u.group;if(p!==f){if(!p)return 1;if(!f||p==="navigation")return-1;if(f==="navigation")return 1;const h=p.localeCompare(f);if(h!==0)return h}return c.order<u.order?-1:c.order>u.order?1:c.title.localeCompare(u.title)}return[...s.values()].sort(l)}function Nf(e){if(!e)return!0;function t(r){return r==="isWeb"||r==="remoteName"||r==="virtualWorkspace"||r.startsWith("remoteHub:")||r.startsWith("config.")}return e.split("&&").every(r=>{const n=/^(?:(!)?(\S+)|(\S+)\s?(==|!=|=~)\s?(\S+))$/.exec(r.trim());if(!n)return!0;const[,i,o,s,a,l]=n;if(o){if(o==="false")return!1;if(!t(o))return!0;const c=Sr(o);return i?!c:c}if(s&&a&&l)switch(a){case"==":return!t(s)||!t(l)||Sr(s)==Sr(l);case"!=":return!t(s)||!t(l)||Sr(s)!=Sr(l);case"=~":{if(!t(s))return!0;const c=Sr(s);try{return new RegExp(l.slice(1,-1)).test(String(c!=null?c:""))}catch{return!1}}}return!0})}function*zs(e,t){for(const r of e)yield*t(r)}function*Hf(e,t){for(const r of e)t(r)&&(yield r)}function*Ht(e,t){for(const r of e){const n=t(r);n!=null&&(yield n)}}function jf(e,t){let r="";const n=e[Symbol.iterator]();let i=n.next();if(i.done)return r;for(;;){const o=i.value.toString();if(i=n.next(),i.done){r+=o;break}r+=o,r+=t}return r}function*Kn(e,t){for(const r of e)yield t(r)}function*zf(...e){for(const t of e)for(const r of t)yield r}function*qf(e){const t=new Set;for(const r of e)t.has(r)||(t.add(r),yield r)}const qs=47;function pt(e){const t=e.path;let r=0,n=-1,i=!0;for(let o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===qs){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)}function S_(e){const t=e.path;if(t.length===1)return"/";let r,n=-1,i=!0;for(let o=t.length-1;o>=1;--o)if(r=t.charCodeAt(o),r===qs){if(!i){n=o;break}}else i=!1;return n===-1?"/":t.slice(0,n)}function Wf(e){const t=e.path.lastIndexOf("/");return t===-1?e.with({path:"/"}):e.with({path:e.path.substring(0,t)})}function Yr(e,t){return Ws(e,t).path}function Ws(e,t){return t.path.startsWith(e.path)?d.Uri.joinPath(e,t.path.substr(e.path.length)):d.Uri.joinPath(e,t.path)}function Qn(e,t){return typeof t=="string"?(t.startsWith("/")||(t=`/${t}`),Jr(e,t)&&e.path.substr(t.length+(t.endsWith("/")?0:1)).split("/").length===1):Jr(e,t)&&e.path.substr(t.path.length+(t.path.endsWith("/")?0:1)).split("/").length===1}function Jr(e,t){return typeof t=="string"?(t.startsWith("/")||(t=`/${t}`),t.length===1||e.path.startsWith(t.endsWith("/")?t:`${t}/`)):t.scheme===e.scheme&&t.authority===e.authority&&(t.path.length===1||e.path.startsWith(t.path.endsWith("/")?t.path:`${t.path}/`))}const Vs=/(?:^|&)originalRoot=([^&]+)/i;var at;(function(e){e[e.Abort=0]="Abort",e[e.KeepCurrent=1]="KeepCurrent",e[e.DiscardCurrent=2]="DiscardCurrent",e[e.Merge=3]="Merge"})(at||(at={}));class Vf{constructor(t,r,n,i){this.providerService=t,this.uri=r,this.name=n,this.provider=i}createRelativeUri(t){return this.providerService.createRelativeUri(this.uri,t)}}const gt=class{constructor(){this._providers=new Map,this._onDidChangeProviders=new d.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new d.EventEmitter,this.disposable=d.Disposable.from(d.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onWorkspaceFoldersChanged(e){if(e.added.length)for(const t of e.added){if(t.uri.scheme!==gt.scheme||this._repositories.has(t.uri.toString()))continue;const r=this.getProvider(t.uri);if(!r)continue;const n=new Vf(this,t.uri,t.name,r);this._repositories.set(t.uri.toString(),n),this._onDidChangeRepositories.fire({added:[n],removed:[]})}if(e.removed.length)for(const t of e.removed){if(t.uri.scheme!==gt.scheme||!this._repositories.has(t.uri.toString()))continue;const r=this._repositories.get(t.uri.toString());r&&(this._repositories.delete(t.uri.toString()),this._onDidChangeRepositories.fire({added:[],removed:[r]}))}Hs(Vn.HasVirtualFolders,this._repositories.size!==0),Hs(Vn.VirtualFolderProviders,jf(qf(Kn(this._repositories.values(),t=>t.provider.id)),","))}get count(){return this._providers.size}get providers(){return[...this._providers.values()]}get repositories(){return[...this._repositories.values()]}get schemes(){return this.providers.map(e=>e.id)}register(e,t,r,n,i){var o;if(this._providers.has(e))throw new Error(`Scheme '${e}' already has a provider registered`);const s={id:e,name:t,api:r,fs:n,uris:i};return this._providers.set(e,s),this._onDidChangeProviders.fire({added:[s],removed:[]}),this.onWorkspaceFoldersChanged({added:(o=d.workspace.workspaceFolders)!=null?o:[],removed:[]}),{dispose:()=>{this._providers.delete(e);const a=[...this._repositories.values()].filter(l=>l.provider.id===e);for(const l of a)this._repositories.delete(l.uri.toString());this._onDidChangeRepositories.fire({added:[],removed:a}),this._onDidChangeProviders.fire({added:[],removed:[s]})}}}getProvider(e){const t=typeof e=="string"?e:this.getProviderScheme(e);return this._providers.get(t)}getProviderScheme(e){const[t]=e.authority.split("+");return t}getApiProvider(e){var t;const r=(t=this.getProvider(e))==null?void 0:t.api;if(r)return r;throw new Error(`Scheme '${this.getProviderScheme(e)}' has no registered provider`)}getFileSystemProvider(e){var t;const r=(t=this.getProvider(e))==null?void 0:t.fs;if(r)return r;throw new Error(`Scheme '${this.getProviderScheme(e)}' has no registered provider`)}getUriHandler(e){var t;const r=(t=this.getProvider(e))==null?void 0:t.uris;if(r)return r;throw new Error(`Scheme '${typeof e=="string"?e:this.getProviderScheme(e)}' has no registered provider`)}findRemoteUrlHandler(e,t){if(t){const r=this.getProvider(t),n=r==null?void 0:r.uris.canOpenRemoteUrl(e);return n!==void 0?{provider:r,urlType:n}:void 0}for(const r of this._providers.values()){const n=r.uris.canOpenRemoteUrl(e);if(n!==void 0)return{provider:r,urlType:n}}}getRemoteWorkspaceSourceProviders(e){var t,r,n,i;return e?(i=(n=(t=this.getProvider(e))==null?void 0:(r=t.api).getRemoteWorkspaceSourceProviders)==null?void 0:n.call(r))!=null?i:[]:[...zs(this._providers.values(),o=>{var s,a,l;return(l=(a=(s=o.api).getRemoteWorkspaceSourceProviders)==null?void 0:a.call(s))!=null?l:[]})]}async openWorkspaceForRemoteUrl(e,t,r=Ge.CurrentWindow){var n;const i=this.findRemoteUrlHandler(e,t);return(n=i==null?void 0:i.provider)==null?void 0:n.uris.openWorkspaceForRemoteUrl(e,r)}createProviderUri(e,t,r){return this.getProviderUri(this.getUriHandler(e).createVirtualUri(gt.baseVirtualWorkspaceUri,t,r))}createRelativeProviderUri(e,t){return this.getProviderUri(this.createRelativeUri(e,t))}createRelativeUri(e,t){const r=this.getProviderRootUri(e);let n=`${r.path}/`;n.endsWith("/")&&(n=n.slice(0,-1));const i=r.with({path:`${r.path}/${t.startsWith("/")?t.substr(1):t}`});return e.scheme===gt.scheme?this.getVirtualUri(i):i}createRelativeVirtualUri(e,t){return this.getVirtualUri(this.createRelativeUri(e,t))}createVirtualUri(e,t,r){return this.getUriHandler(e).createVirtualUri(gt.baseVirtualWorkspaceUri,t,r)}async getBestExternalUri(e,t){var r,n,i,o;const{provider:s,repo:a,HEAD:l,defaultBranch:c,pullRequest:u}=await this.getMetadata(e);switch(t){case zt.Clone:return this.getExternalUri(s.id,{repo:a,clone:!0});case zt.Repository:return this.getExternalUri(s.id,{repo:a});case zt.PullRequest:return u?this.getExternalUri(s.id,{repo:a,pullRequest:u.id}):void 0;case zt.Commit:return this.getExternalUri(s.id,{repo:a,sha:l.sha});case zt.Branch:return this.getExternalUri(s.id,{repo:a,branch:(n=(r=l.branch)==null?void 0:r.name)!=null?n:c.name})}return this.getExternalUri(s.id,{repo:a,...u?{pullRequest:u.id}:l.detached?{sha:l.sha}:{branch:(o=(i=l.branch)==null?void 0:i.name)!=null?o:c.name}})}getExternalUri(e,t){var r,n;return(n=(r=this.getUriHandler(e)).getExternalUri)==null?void 0:n.call(r,t)}getProviderUri(e,t){var r,n,i;if(e.scheme!==gt.scheme)return((r=t==null?void 0:t.original)!=null?r:!0)||!e.query?e:e.with({query:e.query.replace(Vs,"")});const o=this.getUriHandler(e),a=((n=o.getProviderUri)!=null?n:l=>l.with({scheme:this.getProviderScheme(l)}))(e);return((i=t==null?void 0:t.original)!=null?i:!0)?a.with({query:`${a.query?`${a.query}&`:""}originalRoot=${encodeURIComponent(o.getProviderRootUri(e).toString(!1))}`}):a}getProviderRootUri(e){return e=this.getProviderUri(e),this.getUriHandler(e).getProviderRootUri(e)}getRelativeFilePath(e,t){return t=this.getProviderUri(t),this.getUriHandler(t).getRelativeFilePath(e,t)}getVirtualUri(e){var t,r,n;if(e.scheme===gt.scheme)return e;let i;const o=e.query?Vs.exec(e.query):void 0;if(o){const[,s]=o;i=Ws(d.Uri.parse(decodeURIComponent(s)),e)}else i=e.with({scheme:gt.scheme});return(n=(r=(t=this.getUriHandler(e)).getVirtualUri)==null?void 0:r.call(t,e,i))!=null?n:i}getVirtualRootUri(e){return this.getVirtualUri(this.getProviderRootUri(e))}getVirtualWorkspaceUri(e){var t;return(t=d.workspace.getWorkspaceFolder(this.getVirtualUri(e)))==null?void 0:t.uri}createIGitRepository(e,t,r,n){var i,o;return(o=(i=this.getApiProvider(e)).createIGitRepository)==null?void 0:o.call(i,e,t,r,n)}getMetadata(e){return this.getApiProvider(e).getMetadata(e)}async clone(e){const t=await this.getBestExternalUri(e,zt.Clone);if(!t)throw new Error("No url found for clone");if(vr)return void d.env.openExternal(d.Uri.parse(`${d.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(t.toString(!0))}`));try{const r=d.extensions.getExtension("vscode.git");if(r)await(r==null?void 0:r.activate()),await d.commands.executeCommand("git.clone",t.toString(!0));else throw new Error("Git extension not found")}catch(r){ue.error(r,"Unable to clone repository")}}createBranch(e,t,r,n){return this.getApiProvider(e).createBranch(e,t,r,n)}createCommit(e,t,r,n){return this.getApiProvider(e).createCommit(e,t,r,n)}createPullRequest(e,t,r,n,i){return this.getApiProvider(e).createPullRequest(e,t,r,n,i)}fetch(e,t){return this.getApiProvider(e).fetch(e,t)}fork(e){return this.getApiProvider(e).fork(e)}getBranches(e,t){return this.getApiProvider(e).getBranches(e,t)}getCommit(e,t){return this.getApiProvider(e).getCommit(e,t)}getCommitOperations(e,t,r){let n;return(r==null?void 0:r.staged)?(n=t.getStagedChanges(e),n.length===0&&r.staged==="auto"&&(n=t.getChanges(e))):n=t.getChanges(e),this.getApiProvider(e).getCommitOperations(e,n,t)}getCommits(e,t){var r;return(r=this.getApiProvider(e))==null?void 0:r.getCommits(e,t)}getFileContent(e,t,r){return this.getApiProvider(e).getFileContent(e,t,r)}getFork(e){return this.getApiProvider(e).getFork(e)}async getIncomingChanges(e){var t,r,n;return(n=(r=(t=this.getApiProvider(e)).getIncomingChanges)==null?void 0:r.call(t,e))!=null?n:[]}getPullRequest(e,t){return this.getApiProvider(e).getPullRequest(e,t)}getTags(e,t){return this.getApiProvider(e).getTags(e,t)}async getTarGz(e,t){var r,n;return(n=(r=this.getApiProvider(e)).getTarGz)==null?void 0:n.call(r,e,t)}pushCommit(e,t,r,n){return this.getApiProvider(e).pushCommit(e,t,r,n)}switchTo(e,t,r){return this.getApiProvider(e).switchTo(e,t,r)}sync(e,t,r){return this.getApiProvider(e).sync(e,t,{conflictResolution:0,...r})}stat(e){return this.getFileSystemProvider(e).stat(e)}readDirectory(e){return this.getFileSystemProvider(e).readDirectory(e)}readFile(e){return this.getFileSystemProvider(e).readFile(e)}provideFileSearchResults(e,t,r){return this.getFileSystemProvider(t.folder).provideFileSearchResults(e,t,r)}provideTextSearchResults(e,t,r,n){return this.getFileSystemProvider(t.folder).provideTextSearchResults(e,t,r,n)}};let Le=gt;Le.scheme="vscode-vfs",Le.baseVirtualWorkspaceUri=d.Uri.parse(`${gt.scheme}://`);var jt;(function(e){e[e.Repository=0]="Repository",e[e.PullRequest=1]="PullRequest"})(jt||(jt={}));var zt;(function(e){e[e.Clone=-1]="Clone",e[e.Repository=0]="Repository",e[e.PullRequest=1]="PullRequest",e[e.Branch=2]="Branch",e[e.Commit=3]="Commit"})(zt||(zt={}));var Me;(function(e){e[e.Repository=0]="Repository",e[e.PullRequest=1]="PullRequest",e[e.Branch=2]="Branch",e[e.Commit=3]="Commit",e[e.File=4]="File"})(Me||(Me={}));class Zs extends Error{constructor(t){super(t.message);this.original=t,Error.captureStackTrace(this,Zs)}}class en extends Error{constructor(t,r){super(t.message);this.original=t,this.name=r,Error.captureStackTrace(this,en)}}class tn extends Error{constructor(t){super(t);Error.captureStackTrace(this,tn)}}class or extends Error{constructor(t,r){super(t.message);this.original=t,this.duplicate=r,Error.captureStackTrace(this,or)}}class Xn extends Error{constructor(t){super(t.message);this.original=t,Error.captureStackTrace(this,Xn)}}class Xi extends Error{constructor(t=!1){super(t?"Unable to synchronize the repository":"Unable to fetch the repository");Error.captureStackTrace(this,Xi)}}class Yn extends Error{constructor(){super("Sync operation will result in conflicts");Error.captureStackTrace(this,Yn)}}var Ge;(function(e){e.CurrentWindow="currentWindow",e.NewWindow="newWindow",e.AddToWorkspace="addToWorkspace"})(Ge||(Ge={}));var rn;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed",e[e.Merged=2]="Merged"})(rn||(rn={}));var mt;(function(e){e[e.Commit=0]="Commit",e[e.Tag=1]="Tag"})(mt||(mt={}));var Ke;(function(e){e[e.Admin=100]="Admin",e[e.Maintain=40]="Maintain",e[e.Write=30]="Write",e[e.Triage=20]="Triage",e[e.Read=10]="Read",e[e.None=0]="None"})(Ke||(Ke={}));class Ks{constructor(t){this.defaultDelay=t}dispose(){this.cancelTimeout()}debounce(t,r=this.defaultDelay){return this.task=t,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,i)=>{this.resolver=n,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const n=this.task;return this.task=void 0,n()}})),this.timeout=setTimeout(()=>{var n;this.timeout=void 0,(n=this.resolver)==null||n.call(this,void 0)},r),this.completionPromise}cancel(){var t;this.cancelTimeout(),this.completionPromise&&((t=this.rejecter)==null||t.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}const Jn=(0,P.loadMessageBundle)(),Yi=Symbol("QuickPickGoBack");var Ji;(function(e){async function t(r,n,i,o,s){const a=r.getRemoteWorkspaceSourceProviders();let l;a.length===0?l=[]:l=a.map(f=>new Qs(f));const c=d.window.createQuickPick(),u=[];let p=n;try{for(;;){const f=await new Promise(h=>{u.push(c.onDidHide(()=>h(void 0)),c.onDidChangeValue(g=>{g=g.trim(),g.length===0?(c.ignoreFocusOut=!1,c.items=l):(c.ignoreFocusOut=!0,c.items=[new eo(r,g),...l])}),c.onDidAccept(()=>{if(c.activeItems.length!==0){const[g]=c.activeItems;g.validate()&&h(g)}}),c.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[g]=c.activeItems;let v=!0;if(g===void 0?v=Boolean(c.value):v=g instanceof eo,v){if(c.buttons.length===1)return;c.buttons=[kr.AddToWorkspace]}else{if(c.buttons.length===0)return;c.buttons=[]}}),c.onDidTriggerButton(g=>{if(g===kr.AddToWorkspace){const[v]=c.activeItems;if(!(v instanceof eo))return;v.validate()&&(p=Ge.AddToWorkspace,h(v))}})),c.title=o,c.placeholder=i,c.matchOnDescription=!0,c.items=l,c.sortByLabel=!1,c.show()});if(f instanceof Qs){const h=await f.show(p,f.type===jt.PullRequest?Jn("pick pr","Choose a pull request"):Jn("pick repo","Choose a repository"),o,s);if(h===Yi)continue;return h}return[f,p]}}finally{c.dispose(),u.forEach(f=>void f.dispose())}}e.show=t})(Ji||(Ji={}));class Qs{constructor(t){this.provider=t}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.type===jt.PullRequest?Jn("open pr from","Open Pull Request from {0}",this.provider.name):Jn("open repo from","Open Repository from {0}",this.provider.name)}`}get type(){return this.provider.type}async show(t,r,n,i){const o=d.window.createQuickPick(),s=new Ks(500),a=[s];async function l(h,g,v){return(await h.provideSources(g,v)).map(R=>({label:`${h.type===jt.PullRequest?"$(git-pull-request) ":"$(repo) "}${R.name}`,description:R.description,detail:R.detail,url:R.url}))}const c=l(this.provider,void 0,{sort:"updated"});let u=t,p,f=!1;try{const h=await new Promise(g=>{a.push(o.onDidHide(()=>g(void 0)),o.onDidChangeValue(v=>{f=!1,v=v.trim(),o.busy=!0;let C=v,R;const D=v.indexOf("/");D!==-1&&(R=v.substring(0,D),C=v.substr(D+1));const N=s.debounce(v?()=>l(this.provider,C,{user:R,sort:"stars"}):()=>c);p===void 0&&(p=N.then(async G=>{p=void 0;const W=o.activeItems;o.items=G!=null?G:await c,f&&W.length!==0&&(o.activeItems=o.items.filter(ce=>W.some(re=>re.url===ce.url))),o.busy=!1}))}),o.onDidAccept(()=>{if(o.activeItems.length!==0){const[v]=o.activeItems;g(v)}}),o.onDidChangeActive(()=>{if(f=o.activeItems.length!==0,u!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[v]=o.activeItems;if(v===void 0){if(o.buttons.length===1)return;o.buttons=[d.QuickInputButtons.Back]}else{if(o.buttons.length===2)return;o.buttons=[d.QuickInputButtons.Back,kr.AddToWorkspace]}}),o.onDidTriggerButton(v=>{if(v===kr.AddToWorkspace){const[C]=o.activeItems;if(C===void 0)return;u=Ge.AddToWorkspace,g(C)}}),o.onDidTriggerButton(()=>g(Yi))),o.title=n,o.placeholder=r,o.matchOnDetail=!0,o.ignoreFocusOut=!0,o.sortByLabel=!1,o.buttons=[d.QuickInputButtons.Back],o.busy=!0,o.show(),p=s.debounce(async()=>c,0).then(v=>{p=void 0;const C=o.activeItems;o.items=v!=null?v:[],f&&C.length!==0&&(o.activeItems=o.items.filter(R=>C.some(D=>D.url===R.url))),o.busy=!1})});return h===Yi?h:[h,u]}finally{o.dispose(),a.forEach(h=>void h.dispose())}}validate(){return!0}}class eo{constructor(t,r){this.url=r,this.alwaysShow=!0,this.handler=t.findRemoteUrlHandler(r)}get label(){if(this.handler)switch(this.handler.urlType){case Me.PullRequest:return`Open ${this.handler.provider.name} Pull Request`;case Me.Branch:return`Open ${this.handler.provider.name} Repository to Branch`;case Me.Commit:return`Open ${this.handler.provider.name} Repository to Commit`;case Me.File:return`Open ${this.handler.provider.name} Repository to File`;default:return`Open ${this.handler.provider.name} Repository`}return"Enter a Remote Url"}get description(){return this.url}validate(){return this.handler!==void 0}}var kr;(function(e){e.AddToWorkspace={iconPath:new d.ThemeIcon("plus"),tooltip:"Add to Workspace"}})(kr||(kr={}));const qe=(0,P.loadMessageBundle)();function Zf(e,t,r,n){async function i(s){const[a,l]=await Ji.show(t,s,qe("open repo placeholder","Enter a remote url, or select a remote provider"),s===Ge.AddToWorkspace?qe("open repo title add to workspace","Add Remote Repository to Workspace"):qe("open repo title current window","Open Remote Repository"),{allowAddToWorkspace:as()});if(!!a)try{await t.openWorkspaceForRemoteUrl(a.url,void 0,l!=null?l:s)}catch(c){if(c instanceof en){ss(c.name);return}ue.error(c)}}async function o(s,a,l){if(l==null?void 0:l.workspaceFolder){const u=r.getForWorkspaceFolder(l.workspaceFolder,a);if(u!==void 0)return u}const c=a?r.getForWorkspace(a):r.getForWorkspace();if(c.length!==0){if(c.length>1){const u=await d.window.showQuickPick(c.map(p=>({label:p.name,description:p.data.provider.name,folder:p})),{placeHolder:s});return u?u.folder:void 0}return c[0]}}return[d.commands.registerCommand("remoteHub.openRepository",()=>i()),d.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>i(Ge.AddToWorkspace)),d.commands.registerCommand("remoteHub.continueOn",async()=>{const s=await o(qe("continue on choose repository placeholder","Choose which repository to continue elsewhere"));if(s===void 0)return;const a=await Qi.show(e,qe("continue on placeholder","Choose how you would like to continue working"),qe("continue on title","Continue '{0}' on",s.data.name));if(!a)return;if(n.hasChanges(s.folderUri)){const c={title:qe("continue","Continue")},u={title:qe("cancel","Cancel"),isCloseAffordance:!0};if(await d.window.showWarningMessage(qe("continue on uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them from elsewhere.`),{modal:!0},c,u)!==c)return}const l=t.getExternalUri(s.data.provider.id,{repo:s.data.repo});await a.execute({provider:s.data.provider,workspaceFolder:s.folderUri,name:s.data.name,url:l==null?void 0:l.toString(!0)})}),d.commands.registerCommand("remoteHub.openOnDesktop",async s=>{if(!vr)return;const a=await o(qe("continue on desktop choose repository placeholder","Choose which repository to open on the desktop"),void 0,s);if(a===void 0)return;const l=await t.getBestExternalUri(a.folderUri);l!==void 0&&d.env.openExternal(d.Uri.parse(`${d.env.uriScheme}://${e.extension.id}/open?url=${encodeURIComponent(l.toString(!0))}`))}),d.commands.registerCommand("remoteHub.openOnWeb",async s=>{if(vr)return;const a=await o(qe("continue on web choose repository placeholder","Choose which repository to open on the web"),void 0,s);if(a===void 0)return;const l=await t.getBestExternalUri(a.folderUri);l!==void 0&&d.env.openExternal(l.with({authority:"vscode.dev",path:`${l.authority}${l.path}`}))}),d.commands.registerCommand("remoteHub.openOnRemote",async s=>{const{provider:a,...l}=s,c=t.getExternalUri(a.id,l);if(c){await d.env.openExternal(c);return}d.window.showErrorMessage(qe("open on remote command provider not supported","Unable to open the resource on {0}",s.provider.name))}),d.commands.registerCommand("remoteHub.clone",async s=>{const a=await o(qe("clone placeholder","Choose which repository to clone"),void 0,s);if(a!==void 0){if(s===void 0&&n.hasChanges(a.folderUri)){const l={title:qe("continue","Continue")},c={title:qe("cancel","Cancel"),isCloseAffordance:!0};if(await d.window.showWarningMessage(qe("clone uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},l,c)!==l)return}await t.clone(a.folderUri)}}),d.commands.registerCommand("remoteHub.openInCodespaces",()=>{d.env.openExternal(d.Uri.parse("https://github.dev"))})]}function qt(e){return e}async function to(e,t){return d.commands.executeCommand(e,t)}class Kf{constructor(){this._timeout=0,this._disposable=Ce.onDidChange(this.onConfigurationChanged,this),this.maybeQueueFetch()}dispose(){this._disposable.dispose(),this._timeout&&clearTimeout(this._timeout)}get config(){var t;if(this._config===void 0){const r=Ce.get("autoFetch");this._config={enabled:(t=r.enabled)!=null?t:!0,interval:r.interval*1e3}}return this._config}onConfigurationChanged(t){!Ce.changed(t,"autoFetch")||(this._config=void 0,this.maybeQueueFetch())}async fetchAll(){try{await to("remoteHub.fetchAll",{silent:!0})}catch(t){ue.error(t,"Autofetch failed")}this.maybeQueueFetch()}maybeQueueFetch(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),!!this.config.enabled&&(this._timeout=setTimeout(()=>this.fetchAll(),this.config.interval))}}class Qf extends Error{constructor(t){super(t);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Xf=Ie(778),Yf=Ie.n(Xf);const Jf=Yf()(e=>console.warn(e));class Wt extends Error{constructor(t,r,n){super(t);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return Jf(new Qf("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}var ep=Ie(9669),tp=Ie.n(ep);const rp=new TextDecoder,np=new TextEncoder;async function ei(e){const t=typeof e=="string"?np.encode(e):e;let r;if(globalThis.crypto.subtle)r=await globalThis.crypto.subtle.digest({name:"sha-1"},t);else{const n=new ea;n.update(t),r=n.digest()}return globalThis.btoa(encodeURIComponent(rp.decode(r)))}var Xs;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE"})(Xs||(Xs={}));function ro(e,t,r=32){const n=r-t,i=~((1<<n)-1);return(e<<t|(i&e)>>>n)>>>0}function Ys(e,t=0,r=e.byteLength,n=0){for(let i=0;i<r;i++)e[t+i]=n}const Js=class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(e){const t=this._buff;let r=this._buffLen,n=0;const i=e.byteLength;for(;n<i;){const o=Math.min(64-r,i-n);for(let s=0;s<o;s++)t[r++]=e[n++];r>=64&&(this._step(),r-=64,this._totalLen+=64)}this._buffLen=r}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this._h0,!1),t.setUint32(4,this._h1,!1),t.setUint32(8,this._h2,!1),t.setUint32(12,this._h3,!1),t.setUint32(16,this._h4,!1),e}_wrapUp(){this._buff[this._buffLen++]=128,Ys(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Ys(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=Js._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,ro(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let r=this._h0,n=this._h1,i=this._h2,o=this._h3,s=this._h4,a,l,c;for(let u=0;u<80;u++)u<20?(a=n&i|~n&o,l=1518500249):u<40?(a=n^i^o,l=1859775393):u<60?(a=n&i|n&o|i&o,l=2400959708):(a=n^i^o,l=3395469782),c=ro(r,5)+a+s+l+e.getUint32(u*4,!1)&4294967295,s=o,o=i,i=ro(n,30),n=r,r=c;this._h0=this._h0+r&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+s&4294967295}};let ea=Js;ea._bigBlock32=new DataView(new ArrayBuffer(320));function xt(){}xt.prototype={diff:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.callback;typeof n=="function"&&(i=n,n={}),this.options=n;var o=this;function s(v){return i?(setTimeout(function(){i(void 0,v)},0),!0):v}t=this.castInput(t),r=this.castInput(r),t=this.removeEmpty(this.tokenize(t)),r=this.removeEmpty(this.tokenize(r));var a=r.length,l=t.length,c=1,u=a+l,p=[{newPos:-1,components:[]}],f=this.extractCommon(p[0],r,t,0);if(p[0].newPos+1>=a&&f+1>=l)return s([{value:this.join(r),count:r.length}]);function h(){for(var v=-1*c;v<=c;v+=2){var C=void 0,R=p[v-1],D=p[v+1],N=(D?D.newPos:0)-v;R&&(p[v-1]=void 0);var G=R&&R.newPos+1<a,W=D&&0<=N&&N<l;if(!G&&!W){p[v]=void 0;continue}if(!G||W&&R.newPos<D.newPos?(C=op(D),o.pushComponent(C.components,void 0,!0)):(C=R,C.newPos++,o.pushComponent(C.components,!0,void 0)),N=o.extractCommon(C,r,t,v),C.newPos+1>=a&&N+1>=l)return s(ip(o,C.components,r,t,o.useLongestToken));p[v]=C}c++}if(i)(function v(){setTimeout(function(){if(c>u)return i();h()||v()},0)})();else for(;c<=u;){var g=h();if(g)return g}},pushComponent:function(t,r,n){var i=t[t.length-1];i&&i.added===r&&i.removed===n?t[t.length-1]={count:i.count+1,added:r,removed:n}:t.push({count:1,added:r,removed:n})},extractCommon:function(t,r,n,i){for(var o=r.length,s=n.length,a=t.newPos,l=a-i,c=0;a+1<o&&l+1<s&&this.equals(r[a+1],n[l+1]);)a++,l++,c++;return c&&t.components.push({count:c}),t.newPos=a,l},equals:function(t,r){return this.options.comparator?this.options.comparator(t,r):t===r||this.options.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function ip(e,t,r,n,i){for(var o=0,s=t.length,a=0,l=0;o<s;o++){var c=t[o];if(c.removed){if(c.value=e.join(n.slice(l,l+c.count)),l+=c.count,o&&t[o-1].added){var p=t[o-1];t[o-1]=t[o],t[o]=p}}else{if(!c.added&&i){var u=r.slice(a,a+c.count);u=u.map(function(h,g){var v=n[l+g];return v.length>h.length?v:h}),c.value=e.join(u)}else c.value=e.join(r.slice(a,a+c.count));a+=c.count,c.added||(l+=c.count)}}var f=t[s-1];return s>1&&typeof f.value=="string"&&(f.added||f.removed)&&e.equals("",f.value)&&(t[s-2].value+=f.value,t.pop()),t}function op(e){return{newPos:e.newPos,components:e.components.slice(0)}}var sp=new xt;function k_(e,t,r){return sp.diff(e,t,r)}function ta(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var ra=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,na=/\S/,ti=new xt;ti.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!na.test(e)&&!na.test(t)},ti.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&ra.test(t[r])&&ra.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};function C_(e,t,r){return r=ta(r,{ignoreWhitespace:!0}),ti.diff(e,t,r)}function x_(e,t,r){return ti.diff(e,t,r)}var ri=new xt;ri.tokenize=function(e){var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};function ap(e,t,r){return ri.diff(e,t,r)}function A_(e,t,r){var n=ta(r,{ignoreWhitespace:!0});return ri.diff(e,t,n)}var ia=new xt;ia.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function D_(e,t,r){return ia.diff(e,t,r)}var oa=new xt;oa.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function R_(e,t,r){return oa.diff(e,t,r)}function ni(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ni=function(t){return typeof t}:ni=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(e)}function At(e){return cp(e)||lp(e)||up(e)||dp()}function cp(e){if(Array.isArray(e))return no(e)}function lp(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function up(e,t){if(!!e){if(typeof e=="string")return no(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return no(e,t)}}function no(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hp=Object.prototype.toString,Cr=new xt;Cr.useLongestToken=!0,Cr.tokenize=ri.tokenize,Cr.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,i=n===void 0?function(o,s){return typeof s=="undefined"?r:s}:n;return typeof e=="string"?e:JSON.stringify(io(e,null,null,i),i,"  ")},Cr.equals=function(e,t){return xt.prototype.equals.call(Cr,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function P_(e,t,r){return Cr.diff(e,t,r)}function io(e,t,r,n,i){t=t||[],r=r||[],n&&(e=n(i,e));var o;for(o=0;o<t.length;o+=1)if(t[o]===e)return r[o];var s;if(hp.call(e)==="[object Array]"){for(t.push(e),s=new Array(e.length),r.push(s),o=0;o<e.length;o+=1)s[o]=io(e[o],t,r,n,i);return t.pop(),r.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),ni(e)==="object"&&e!==null){t.push(e),s={},r.push(s);var a=[],l;for(l in e)e.hasOwnProperty(l)&&a.push(l);for(a.sort(),o=0;o<a.length;o+=1)l=a[o],s[l]=io(e[l],t,r,n,l);t.pop(),r.pop()}else s=e;return s}var ii=new xt;ii.tokenize=function(e){return e.slice()},ii.join=ii.removeEmpty=function(e){return e};function F_(e,t,r){return ii.diff(e,t,r)}function oo(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.split(/\r\n|[\n\v\f\r\x85]/),n=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function s(){var c={};for(i.push(c);o<r.length;){var u=r[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(u))break;var p=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(u);p&&(c.index=p[1]),o++}for(a(c),a(c),c.hunks=[];o<r.length;){var f=r[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(f))break;if(/^@@/.test(f))c.hunks.push(l());else{if(f&&t.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(f));o++}}}function a(c){var u=/^(---|\+\+\+)\s+(.*)$/.exec(r[o]);if(u){var p=u[1]==="---"?"old":"new",f=u[2].split("	",2),h=f[0].replace(/\\\\/g,"\\");/^".*"$/.test(h)&&(h=h.substr(1,h.length-2)),c[p+"FileName"]=h,c[p+"Header"]=(f[1]||"").trim(),o++}}function l(){var c=o,u=r[o++],p=u.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),f={oldStart:+p[1],oldLines:typeof p[2]=="undefined"?1:+p[2],newStart:+p[3],newLines:typeof p[4]=="undefined"?1:+p[4],lines:[],linedelimiters:[]};f.oldLines===0&&(f.oldStart+=1),f.newLines===0&&(f.newStart+=1);for(var h=0,g=0;o<r.length&&!(r[o].indexOf("--- ")===0&&o+2<r.length&&r[o+1].indexOf("+++ ")===0&&r[o+2].indexOf("@@")===0);o++){var v=r[o].length==0&&o!=r.length-1?" ":r[o][0];if(v==="+"||v==="-"||v===" "||v==="\\")f.lines.push(r[o]),f.linedelimiters.push(n[o]||`
`),v==="+"?h++:v==="-"?g++:v===" "&&(h++,g++);else break}if(!h&&f.newLines===1&&(f.newLines=0),!g&&f.oldLines===1&&(f.oldLines=0),t.strict){if(h!==f.newLines)throw new Error("Added line count did not match for hunk at line "+(c+1));if(g!==f.oldLines)throw new Error("Removed line count did not match for hunk at line "+(c+1))}return f}for(;o<r.length;)s();return i}function fp(e,t,r){var n=!0,i=!1,o=!1,s=1;return function a(){if(n&&!o){if(i?s++:n=!1,e+s<=r)return s;o=!0}if(!i)return o||(n=!0),t<=e-s?-s++:(i=!0,a())}}function pp(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=oo(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var n=e.split(/\r\n|[\n\v\f\r\x85]/),i=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],o=t.hunks,s=r.compareLine||function(Mt,Je,dt,ht){return Je===ht},a=0,l=r.fuzzFactor||0,c=0,u=0,p,f;function h(Mt,Je){for(var dt=0;dt<Mt.lines.length;dt++){var ht=Mt.lines[dt],zr=ht.length>0?ht[0]:" ",Mi=ht.length>0?ht.substr(1):ht;if(zr===" "||zr==="-"){if(!s(Je+1,n[Je],zr,Mi)&&(a++,a>l))return!1;Je++}}return!0}for(var g=0;g<o.length;g++){for(var v=o[g],C=n.length-v.oldLines,R=0,D=u+v.oldStart-1,N=fp(D,c,C);R!==void 0;R=N())if(h(v,D+R)){v.offset=u+=R;break}if(R===void 0)return!1;c=v.offset+v.oldStart+v.oldLines}for(var G=0,W=0;W<o.length;W++){var ce=o[W],re=ce.oldStart+ce.offset+G-1;G+=ce.newLines-ce.oldLines;for(var ge=0;ge<ce.lines.length;ge++){var ve=ce.lines[ge],le=ve.length>0?ve[0]:" ",de=ve.length>0?ve.substr(1):ve,Ye=ce.linedelimiters[ge];if(le===" ")re++;else if(le==="-")n.splice(re,1),i.splice(re,1);else if(le==="+")n.splice(re,0,de),i.splice(re,0,Ye),re++;else if(le==="\\"){var nt=ce.lines[ge-1]?ce.lines[ge-1][0]:null;nt==="+"?p=!0:nt==="-"&&(f=!0)}}}if(p)for(;!n[n.length-1];)n.pop(),i.pop();else f&&(n.push(""),i.push(`
`));for(var it=0;it<n.length-1;it++)n[it]=n[it]+i[it];return n.join("")}function O_(e,t){typeof e=="string"&&(e=oo(e));var r=0;function n(){var i=e[r++];if(!i)return t.complete();t.loadFile(i,function(o,s){if(o)return t.complete(o);var a=pp(s,i,t);t.patched(i,a,function(l){if(l)return t.complete(l);n()})})}n()}function sa(e,t,r,n,i,o,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var a=ap(r,n,s);a.push({value:"",lines:[]});function l(R){return R.map(function(D){return" "+D})}for(var c=[],u=0,p=0,f=[],h=1,g=1,v=function(D){var N=a[D],G=N.lines||N.value.replace(/\n$/,"").split(`
`);if(N.lines=G,N.added||N.removed){var W;if(!u){var ce=a[D-1];u=h,p=g,ce&&(f=s.context>0?l(ce.lines.slice(-s.context)):[],u-=f.length,p-=f.length)}(W=f).push.apply(W,At(G.map(function(it){return(N.added?"+":"-")+it}))),N.added?g+=G.length:h+=G.length}else{if(u)if(G.length<=s.context*2&&D<a.length-2){var re;(re=f).push.apply(re,At(l(G)))}else{var ge,ve=Math.min(G.length,s.context);(ge=f).push.apply(ge,At(l(G.slice(0,ve))));var le={oldStart:u,oldLines:h-u+ve,newStart:p,newLines:g-p+ve,lines:f};if(D>=a.length-2&&G.length<=s.context){var de=/\n$/.test(r),Ye=/\n$/.test(n),nt=G.length==0&&f.length>le.oldLines;!de&&nt&&r.length>0&&f.splice(le.oldLines,0,"\\ No newline at end of file"),(!de&&!nt||!Ye)&&f.push("\\ No newline at end of file")}c.push(le),u=0,p=0,f=[]}h+=G.length,g+=G.length}},C=0;C<a.length;C++)v(C);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:o,hunks:c}}function gp(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var n=e.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),t.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),t.push.apply(t,n.lines)}return t.join(`
`)+`
`}function mp(e,t,r,n,i,o,s){return gp(sa(e,t,r,n,i,o,s))}function vp(e,t,r,n,i,o){return mp(e,e,t,r,n,i,o)}function wp(e,t){return e.length!==t.length?!1:so(e,t)}function so(e,t){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function _p(e){var t=co(e.lines),r=t.oldLines,n=t.newLines;r!==void 0?e.oldLines=r:delete e.oldLines,n!==void 0?e.newLines=n:delete e.newLines}function U_(e,t,r){e=aa(e,r),t=aa(t,r);var n={};(e.index||t.index)&&(n.index=e.index||t.index),(e.newFileName||t.newFileName)&&(ca(e)?ca(t)?(n.oldFileName=oi(n,e.oldFileName,t.oldFileName),n.newFileName=oi(n,e.newFileName,t.newFileName),n.oldHeader=oi(n,e.oldHeader,t.oldHeader),n.newHeader=oi(n,e.newHeader,t.newHeader)):(n.oldFileName=e.oldFileName,n.newFileName=e.newFileName,n.oldHeader=e.oldHeader,n.newHeader=e.newHeader):(n.oldFileName=t.oldFileName||e.oldFileName,n.newFileName=t.newFileName||e.newFileName,n.oldHeader=t.oldHeader||e.oldHeader,n.newHeader=t.newHeader||e.newHeader)),n.hunks=[];for(var i=0,o=0,s=0,a=0;i<e.hunks.length||o<t.hunks.length;){var l=e.hunks[i]||{oldStart:Infinity},c=t.hunks[o]||{oldStart:Infinity};if(la(l,c))n.hunks.push(ua(l,s)),i++,a+=l.newLines-l.oldLines;else if(la(c,l))n.hunks.push(ua(c,a)),o++,s+=c.newLines-c.oldLines;else{var u={oldStart:Math.min(l.oldStart,c.oldStart),oldLines:0,newStart:Math.min(l.newStart+s,c.oldStart+a),newLines:0,lines:[]};bp(u,l.oldStart,l.lines,c.oldStart,c.lines),o++,i++,n.hunks.push(u)}}return n}function aa(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return oo(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return sa(void 0,void 0,t,e)}return e}function ca(e){return e.newFileName&&e.newFileName!==e.oldFileName}function oi(e,t,r){return t===r?t:(e.conflict=!0,{mine:t,theirs:r})}function la(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function ua(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function bp(e,t,r,n,i){var o={offset:t,lines:r,index:0},s={offset:n,lines:i,index:0};for(ha(e,o,s),ha(e,s,o);o.index<o.lines.length&&s.index<s.lines.length;){var a=o.lines[o.index],l=s.lines[s.index];if((a[0]==="-"||a[0]==="+")&&(l[0]==="-"||l[0]==="+"))yp(e,o,s);else if(a[0]==="+"&&l[0]===" "){var c;(c=e.lines).push.apply(c,At(sr(o)))}else if(l[0]==="+"&&a[0]===" "){var u;(u=e.lines).push.apply(u,At(sr(s)))}else a[0]==="-"&&l[0]===" "?da(e,o,s):l[0]==="-"&&a[0]===" "?da(e,s,o,!0):a===l?(e.lines.push(a),o.index++,s.index++):ao(e,sr(o),sr(s))}fa(e,o),fa(e,s),_p(e)}function yp(e,t,r){var n=sr(t),i=sr(r);if(pa(n)&&pa(i)){if(so(n,i)&&ga(r,n,n.length-i.length)){var o;(o=e.lines).push.apply(o,At(n));return}else if(so(i,n)&&ga(t,i,i.length-n.length)){var s;(s=e.lines).push.apply(s,At(i));return}}else if(wp(n,i)){var a;(a=e.lines).push.apply(a,At(n));return}ao(e,n,i)}function da(e,t,r,n){var i=sr(t),o=Ep(r,i);if(o.merged){var s;(s=e.lines).push.apply(s,At(o.merged))}else ao(e,n?o:i,n?i:o)}function ao(e,t,r){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:r})}function ha(e,t,r){for(;t.offset<r.offset&&t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n),t.offset++}}function fa(e,t){for(;t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r)}}function sr(e){for(var t=[],r=e.lines[e.index][0];e.index<e.lines.length;){var n=e.lines[e.index];if(r==="-"&&n[0]==="+"&&(r="+"),r===n[0])t.push(n),e.index++;else break}return t}function Ep(e,t){for(var r=[],n=[],i=0,o=!1,s=!1;i<t.length&&e.index<e.lines.length;){var a=e.lines[e.index],l=t[i];if(l[0]==="+")break;if(o=o||a[0]!==" ",n.push(l),i++,a[0]==="+")for(s=!0;a[0]==="+";)r.push(a),a=e.lines[++e.index];l.substr(1)===a.substr(1)?(r.push(a),e.index++):s=!0}if((t[i]||"")[0]==="+"&&o&&(s=!0),s)return r;for(;i<t.length;)n.push(t[i++]);return{merged:n,changes:r}}function pa(e){return e.reduce(function(t,r){return t&&r[0]==="-"},!0)}function ga(e,t,r){for(var n=0;n<r;n++){var i=t[t.length-r+n].substr(1);if(e.lines[e.index+n]!==" "+i)return!1}return e.index+=r,!0}function co(e){var t=0,r=0;return e.forEach(function(n){if(typeof n!="string"){var i=co(n.mine),o=co(n.theirs);t!==void 0&&(i.oldLines===o.oldLines?t+=i.oldLines:t=void 0),r!==void 0&&(i.newLines===o.newLines?r+=i.newLines:r=void 0)}else r!==void 0&&(n[0]==="+"||n[0]===" ")&&r++,t!==void 0&&(n[0]==="-"||n[0]===" ")&&t++}),{oldLines:t,newLines:r}}function I_(e){for(var t=[],r,n,i=0;i<e.length;i++)r=e[i],r.added?n=1:r.removed?n=-1:n=0,t.push([n,r.value]);return t}function G_(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n.added?t.push("<ins>"):n.removed&&t.push("<del>"),t.push(Tp(n.value)),n.added?t.push("</ins>"):n.removed&&t.push("</del>")}return t.join("")}function Tp(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}function lo(e,t){let r={};for(let o=0;o<t.length;o++){const s=t[o];r[s]?r[s].push(o):r[s]=[o]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let o=0;o<e.length;o++){const s=e[o],a=r[s]||[];let l=0,c=i[0];for(let u=0;u<a.length;u++){const p=a[u];let f;for(f=l;f<i.length&&!(i[f].buffer2index<p&&(f===i.length-1||i[f+1].buffer2index>p));f++);if(f<i.length){const h={buffer1index:o,buffer2index:p,chain:i[f]};if(l===i.length?i.push(c):i[l]=c,l=f+1,c=h,l===i.length)break}}i[l]=c}return i[i.length-1]}function Sp(e,t){const r=lo(e,t);let n=[],i=e.length,o=t.length,s={common:[]};function a(){s.common.length&&(s.common.reverse(),n.push(s),s={common:[]})}for(let l=r;l!==null;l=l.chain){let c={buffer1:[],buffer2:[]};for(;--i>l.buffer1index;)c.buffer1.push(e[i]);for(;--o>l.buffer2index;)c.buffer2.push(t[o]);(c.buffer1.length||c.buffer2.length)&&(a(),c.buffer1.reverse(),c.buffer2.reverse(),n.push(c)),i>=0&&s.common.push(e[i])}return a(),n.reverse(),n}function ma(e,t){const r=lo(e,t);let n=[],i=e.length,o=t.length;for(let s=r;s!==null;s=s.chain){const a=i-s.buffer1index-1,l=o-s.buffer2index-1;i=s.buffer1index,o=s.buffer2index,(a||l)&&n.push({buffer1:[i+1,a],buffer1Content:e.slice(i+1,i+1+a),buffer2:[o+1,l],buffer2Content:t.slice(o+1,o+1+l)})}return n.reverse(),n}function L_(e,t){const r=lo(e,t);let n=[],i=e.length,o=t.length;function s(a,l,c){let u=[];for(let p=0;p<c;p++)u.push(a[l+p]);return{offset:l,length:c,chunk:u}}for(let a=r;a!==null;a=a.chain){const l=i-a.buffer1index-1,c=o-a.buffer2index-1;i=a.buffer1index,o=a.buffer2index,(l||c)&&n.push({buffer1:s(e,a.buffer1index+1,l),buffer2:s(t,a.buffer2index+1,c)})}return n.reverse(),n}function kp(e,t,r){let n=[];function i(l,c){n.push({ab:c,oStart:l.buffer1[0],oLength:l.buffer1[1],abStart:l.buffer2[0],abLength:l.buffer2[1]})}ma(t,e).forEach(l=>i(l,"a")),ma(t,r).forEach(l=>i(l,"b")),n.sort((l,c)=>l.oStart-c.oStart);let o=[],s=0;function a(l){l>s&&(o.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:l-s,bufferContent:t.slice(s,l)}),s=l)}for(;n.length;){let l=n.shift(),c=l.oStart,u=l.oStart+l.oLength,p=[l];for(a(c);n.length;){const f=n[0],h=f.oStart;if(h>u)break;u=Math.max(u,h+f.oLength),p.push(n.shift())}if(p.length===1){if(l.abLength>0){const f=l.ab==="a"?e:r;o.push({stable:!0,buffer:l.ab,bufferStart:l.abStart,bufferLength:l.abLength,bufferContent:f.slice(l.abStart,l.abStart+l.abLength)})}}else{let f={a:[e.length,-1,t.length,-1],b:[r.length,-1,t.length,-1]};for(;p.length;){l=p.shift();const D=l.oStart,N=D+l.oLength,G=l.abStart,W=G+l.abLength;let ce=f[l.ab];ce[0]=Math.min(G,ce[0]),ce[1]=Math.max(W,ce[1]),ce[2]=Math.min(D,ce[2]),ce[3]=Math.max(N,ce[3])}const h=f.a[0]+(c-f.a[2]),g=f.a[1]+(u-f.a[3]),v=f.b[0]+(c-f.b[2]),C=f.b[1]+(u-f.b[3]);let R={stable:!1,aStart:h,aLength:g-h,aContent:e.slice(h,g),oStart:c,oLength:u-c,oContent:t.slice(c,u),bStart:v,bLength:C-v,bContent:r.slice(v,C)};o.push(R)}s=u}return a(t.length),o}function uo(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n);const o=typeof e=="string",s=typeof t=="string",a=typeof r=="string";o&&(e=e.split(n.stringSeparator)),s&&(t=t.split(n.stringSeparator)),a&&(r=r.split(n.stringSeparator));let l=[];const c=kp(e,t,r);let u=[];function p(){u.length&&l.push({ok:u}),u=[]}function f(h,g){if(h.length!==g.length)return!1;for(let v=0;v<h.length;v++)if(h[v]!==g[v])return!1;return!0}return c.forEach(h=>{h.stable?u.push(...h.bufferContent):n.excludeFalseConflicts&&f(h.aContent,h.bContent)?u.push(...h.aContent):(p(),l.push({conflict:{a:h.aContent,aIndex:h.aStart,o:h.oContent,oIndex:h.oStart,b:h.bContent,bIndex:h.bStart}}))}),p(),l}function M_(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},n);const o=uo(e,t,r,n);let s=!1,a=[];return o.forEach(l=>{l.ok?a=a.concat(l.ok):l.conflict&&(s=!0,a.push(`<<<<<<<${n.label.a?` ${n.label.a}`:""}`),a=a.concat(l.conflict.a),a.push(`|||||||${n.label.o?` ${n.label.o}`:""}`),a=a.concat(l.conflict.o),a.push("======="),a=a.concat(l.conflict.b),a.push(`>>>>>>>${n.label.b?` ${n.label.b}`:""}`))}),{conflict:s,result:a}}function Cp(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n);const o=uo(e,t,r,n);let s=!1,a=[];for(let l=0;l<o.length;l++){const c=o[l];c.ok?a=a.concat(c.ok):(s=!0,a=a.concat([`
<<<<<<<<<
`],c.conflict.a,[`
=========
`],c.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:a}}function $_(e,t,r,n){n=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},n);const o=uo(e,t,r,n);let s=!1,a=[];for(let l=0;l<o.length;l++){const c=o[l];if(c.ok)a=a.concat(c.ok);else{const u=Sp(c.conflict.a,c.conflict.b);for(let p=0;p<u.length;p++){let f=u[p];f.common?a=a.concat(f.common):(s=!0,a=a.concat([`
<<<<<<<<<
`],f.buffer1,[`
=========
`],f.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:a}}function B_(e,t){let r=[],n=0;function i(o){for(;n<o;)r.push(e[n]),n++}for(let o=0;o<t.length;o++){let s=t[o];i(s.buffer1.offset);for(let a=0;a<s.buffer2.chunk.length;a++)r.push(s.buffer2.chunk[a]);n+=s.buffer1.length}return i(e.length),r}function N_(e){return e.map(t=>({buffer1:{offset:t.buffer1.offset,length:t.buffer1.length},buffer2:{chunk:t.buffer2.chunk}}))}function H_(e){return e.map(t=>({buffer1:t.buffer2,buffer2:t.buffer1}))}const Dt=(0,P.loadMessageBundle)(),va=`===================================================================
`,nn=new TextDecoder,xp=new TextEncoder;var ye;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(ye||(ye={}));const wa="github.working.changes|",ho="github.working|";function si(e,t,r){return{type:e.type,rootUri:t,uri:r!=null?r:e.uri}}class Ap{constructor(t,r){this.providerService=t,this.memento=r,this._onDidChange=new d.EventEmitter,this._operationsMap=new Map}get onDidChange(){return this._onDidChange.event}async acceptAll(t){const r=this.getChanges(t);if(r.length===0)return;await this.saveWorkingOperations(t,void 0);const n=[];for(const i of r){await this.discardWorkingContent(i.uri);let o;i.type===2&&i.fileType===d.FileType.Directory&&(r.some(s=>Qn(s.uri,i.uri))||(o={type:3,uri:i.uri,rootUri:t})),n.push(o!=null?o:si(i,t))}this._onDidChange.fire(n)}async discard(t){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const n=t.toString(),i=this.getWorkingOperations(r);if(i.length===0)return;const o=i.findIndex(p=>p.uri.toString()===n);if(o===-1)return;const[s]=i.splice(o,1);await this.saveWorkingOperations(r,i),await this.discardWorkingContent(t);let a;switch(s.type){case 2:a=3;break;case 3:a=2;break;default:a=s.type;break}this._onDidChange.fire([{type:a,rootUri:r,uri:t}]);const l=Wf(t),c=l.toString(),u=i.find(p=>p.uri.toString()===c);(u==null?void 0:u.type)===2&&(i.some(p=>Qn(p.uri,l))||await this.discard(l))}async discardAll(t){const r=this.getChanges(t);if(r.length===0)return;await this.saveWorkingOperations(t,void 0);const n=[];for(const i of r){await this.discardWorkingContent(i.uri);let o;switch(i.type){case 2:o=3;break;case 3:o=2;break;default:o=i.type;break}n.push({type:o,rootUri:t,uri:i.uri})}this._onDidChange.fire(n)}async stage(t){const[r,n]=this.getWorkingOperation(t);r!==void 0&&await this.spliceOperation(t,n,{...r,staged:!0,timestamp:Date.now()})}async stageAll(t){const r=this.getWorkingOperations(t).map(n=>({...n,staged:!0,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),this._onDidChange.fire(r.map(n=>si(n,t))))}async unstage(t){const[r,n]=this.getWorkingOperation(t);r!==void 0&&await this.spliceOperation(t,n,{...r,staged:!1,timestamp:Date.now()})}async unstageAll(t){const r=this.getWorkingOperations(t).map(n=>({...n,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),this._onDidChange.fire(r.map(n=>si(n,t))))}hasChanges(t){return this.getWorkingOperations(t).length!==0}hasMergeConflicts(t){return this.getWorkingOperations(t).some(r=>r.conflicts!==void 0)}hasStagedChanges(t){return this.getWorkingOperations(t).some(r=>r.staged&&r.conflicts===void 0)}hasWorkingChanges(t){return this.getWorkingOperations(t).some(r=>!r.staged&&r.conflicts===void 0)}getChange(t){const[r]=this.getWorkingOperation(t);return r}getChanges(t,r){let n=this.getWorkingOperations(t);if((r==null?void 0:r.excludeConflicts)||(r==null?void 0:r.predicate)){const{excludeConflicts:i,predicate:o}=r;n=n.filter(s=>{var a;return(!i||s.conflicts===void 0)&&((a=o==null?void 0:o(s))!=null?a:!0)})}return n}getContent(t){return this.memento.get(`${ho}${t.toString()}`)}getMergeConflicts(t,r){return this.getWorkingOperations(t).filter(i=>{var o,s;return i.conflicts!==void 0&&((s=(o=r==null?void 0:r.predicate)==null?void 0:o.call(r,i))!=null?s:!0)})}getStagedChanges(t,r){return this.getWorkingOperations(t).filter(i=>{var o,s;return i.staged&&i.conflicts===void 0&&((s=(o=r==null?void 0:r.predicate)==null?void 0:o.call(r,i))!=null?s:!0)})}getWorkingChanges(t,r){return this.getWorkingOperations(t).filter(i=>{var o,s;return!i.staged&&i.conflicts===void 0&&((s=(o=r==null?void 0:r.predicate)==null?void 0:o.call(r,i))!=null?s:!0)})}async createPatch(t,r){if(r===void 0){const o=[];for(const s of this.getChanges(t)){const a=await this.createPatchCore(t,s);o.push(a)}return o.join("")}const n=this.getChange(r);if(n===void 0)throw new Error(`Unable to create patch for ${r.toString(!0)}`);return await this.createPatchCore(t,n)}async createPatchCore(t,r){const n=this.getContent(r.uri),i=nn.decode(await d.workspace.fs.readFile(this.providerService.getProviderUri(r.uri))),o=this.providerService.getRelativeFilePath(t,r.uri),s=vp(o,i,n),a=s.indexOf(va);return`${`diff --git a/${o} b/${o}`}
${s.substr(a+va.length)}`}async keep(t,r){const[n,i]=this.getWorkingOperation(t);if(n===void 0)return;if(r===void 0&&n.conflicts){const[,s]=n.conflicts.status;switch(s){case 1:switch(n.type){case 1:case 2:case 3:await this.spliceOperation(t,i,{...n,conflicts:void 0,timestamp:Date.now()});break}break;case 2:switch(n.type){case 1:case 3:await this.spliceOperation(t,i,{...n,conflicts:void 0,timestamp:Date.now()});break;case 2:await this.spliceOperation(t,i,{...n,type:1,size:n.size,hash:n.hash,originalHash:n.originalHash,conflicts:void 0,timestamp:Date.now()});break}break;case 3:switch(n.type){case 3:await this.discard(t);break;case 1:await this.spliceOperation(t,i,{...n,type:2,originalHash:void 0,conflicts:void 0,timestamp:Date.now()});break;case 2:await this.spliceOperation(t,i,{...n,conflicts:void 0,timestamp:Date.now()});break}break}return}if(r===void 0)return;switch(r.type){case 1:switch(n.type){case 3:await this.spliceOperation(t,i,{...n,type:3,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()});return;case 2:break;case 1:break}break;case 2:switch(n.type){case 1:case 3:return;case 2:break}break;case 3:switch(n.type){case 3:return this.discard(t);case 1:await this.spliceOperation(t,i,{...n,type:2,originalHash:void 0,conflicts:void 0,timestamp:Date.now()});return;case 2:return}}const o=r!==void 0?await d.workspace.fs.readFile(r.providerUri):void 0;await this.spliceOperation(t,i,{...n,type:1,originalHash:o!==void 0?await ei(o):n.originalHash,conflicts:void 0,timestamp:Date.now()})}async merge(t,r,n){const[i,o]=this.getWorkingOperation(t);if(i===void 0)return;switch(r.type){case 1:switch(i.type){case 3:return void this.spliceOperation(t,o,{...i,type:3,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:r.providerUri,status:[i.type,r.type]},timestamp:Date.now()});case 2:break;case 1:break}break;case 2:switch(i.type){case 3:case 1:return;case 2:break}break;case 3:switch(i.type){case 3:return void this.discard(t);case 1:return void this.spliceOperation(t,o,{...i,type:2,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:r.providerUri,status:[i.type,r.type]},timestamp:Date.now()});case 2:return}}const s=this.getContent(t),a=await d.workspace.fs.readFile(n.providerUri),l=await d.workspace.fs.readFile(r.providerUri),c=Cp(s,nn.decode(a),nn.decode(l),{excludeFalseConflicts:!0,stringSeparator:`
`}),u=c.result;let p;if(c.conflict){let f;const h=[];let g=0;for(const R of u)R===`
<<<<<<<<<
`?f={start:g,mid:g,end:g}:R===`
=========
`?f.mid=g:R===`
>>>>>>>>>
`&&(f.end=g,h.push(f)),g++;let v=0,C=0;for(const R of h)u.splice(R.start-v,1),v++,C=R.end-R.mid+1,u.splice(R.mid-v,C),v+=C;p={baseUri:n.providerUri,incomingUri:r.providerUri,status:[i.type,r.type]}}await this.onFileChanged(t,xp.encode(u.join(`
`)),()=>l!=null?l:new Uint8Array(0),p)}resolveDiffCommand(t,r,n,i){const[o]=this.getWorkingOperation(t);return(o==null?void 0:o.type)===3?this.resolveOpenCommand(r):((o==null?void 0:o.type)===2&&(r=r.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[r,t,n,i]})}resolveOpenCommand(t,r){return{command:"vscode.open",title:"Open File",arguments:[t,r]}}getStat(t){var r;const[n]=this.getWorkingOperation(t);if(n!==void 0){if(n.type===3)throw d.FileSystemError.FileNotFound(`The ${n.fileType===d.FileType.Directory?"folder":"file"} has been deleted.`);return{type:n.fileType,size:(r=n.size)!=null?r:0,ctime:0,mtime:n.timestamp}}}updateDirectoryEntries(t,r){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return r;const i=Yr(n,t),o=this.getChanges(n);for(const s of o)switch(s.type){case 1:break;case 2:{Qn(s.uri,i)&&r.push([Yr(t,s.uri),s.fileType]);break}case 3:{if(Qn(s.uri,i)){const a=Yr(t,s.uri),l=r.findIndex(([c])=>c===a);l!==-1&&r.splice(l,1)}break}}return r}async onDirectoryCreated(t){const[r,n]=this.getWorkingOperation(t);await this.spliceOperation(t,n,r===void 0?{type:2,uri:t,fileType:d.FileType.Directory,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...r,timestamp:Date.now()})}async onDirectoryDeleted(t){const[r,n]=this.getWorkingOperation(t);if((r==null?void 0:r.type)===2){await this.discard(t);return}await this.discardWorkingContent(t),await this.spliceOperation(t,n,{type:3,uri:t,fileType:d.FileType.Directory,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0})}async onFileChanged(t,r,n,i){const[o,s]=this.getWorkingOperation(t),a=await ei(r),l=await ei(await n());if(a===l){await this.discard(t);return}a===(o==null?void 0:o.hash)&&l===(o==null?void 0:o.originalHash)||(await this.saveWorkingContent(t,nn.decode(r)),await this.spliceOperation(t,s,o===void 0?{type:1,uri:t,fileType:d.FileType.File,timestamp:Date.now(),size:r.byteLength,hash:a,originalHash:l,conflicts:i,staged:!1}:{...o,hash:a,originalHash:l,conflicts:i,staged:!1,timestamp:Date.now()}))}async onFileCreated(t,r){const[n,i]=this.getWorkingOperation(t),o=await ei(r);await this.saveWorkingContent(t,nn.decode(r)),await this.spliceOperation(t,i,n===void 0?{type:2,uri:t,fileType:d.FileType.File,timestamp:Date.now(),size:r.byteLength,hash:o,originalHash:o}:{...n,type:2,hash:o,timestamp:Date.now()})}async onFileDeleted(t){const[r,n]=this.getWorkingOperation(t);if((r==null?void 0:r.type)===2){await this.discard(t);return}await this.discardWorkingContent(t),await this.spliceOperation(t,n,{type:3,uri:t,fileType:d.FileType.File,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0})}getWorkingOperation(t){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return[void 0,-1];const n=t.toString(),i=this.getWorkingOperations(r),o=i.findIndex(s=>s.uri.toString()===n);return o===-1?[void 0,-1]:[i[o],o]}getWorkingOperations(t){let r=this._operationsMap.get(t.toString());if(r===void 0){const n=this.memento.get(`${wa}${t.toString()}`);r=Dp(typeof n=="string"?n:JSON.stringify(n)),this._operationsMap.set(t.toString(),r)}return r}async saveWorkingOperations(t,r){this._operationsMap.delete(t.toString()),await this.memento.update(`${wa}${t.toString()}`,r)}async saveWorkingContent(t,r){await this.memento.update(`${ho}${t.toString()}`,r)}async discardWorkingContent(t){await this.memento.update(`${ho}${t.toString()}`,void 0)}async spliceOperation(t,r,n){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=this.getWorkingOperations(i);r!==-1?o.splice(r,1,n):o.push(n),await this.saveWorkingOperations(i,o),this._onDidChange.fire([si(n,i,t)])}}function Dp(e){if(!e)return[];let t=!1;const r=JSON.parse(e,(n,i)=>{if(n==="type")switch(i){case"changed":i=1;break;case"created":i=2;break;case"deleted":i=3;break}else{if((n==="uri"||n.endsWith("Uri"))&&i!==null)return typeof i=="string"?d.Uri.parse(i):d.Uri.from(i);if(n==="base"||n==="incoming")return t=!0,typeof i=="string"?d.Uri.parse(i):d.Uri.from(i)}return i});if(t)for(const n of r)n.conflicts&&("base"in n.conflicts&&(n.conflicts.baseUri=n.conflicts.base,delete n.conflicts.base),"incoming"in n.conflicts&&(n.conflicts.incomingUri=n.conflicts.incoming,delete n.conflicts.incoming));return r}function _a(e){switch(e){case 1:return Dt("change type changed","Modified");case 2:return Dt("change type created","Added");case 3:return Dt("change type deleted","Deleted")}}function Rp(e){const[t,r]=e;switch(t){case 1:switch(r){case 1:case 2:return Dt("conflict status changed both","Modified by Both");case 3:return Dt("conflict status deleted them","Deleted by Incoming")}break;case 2:switch(r){case 1:case 2:return Dt("conflict status created both","Added by Both");case 3:return Dt("conflict status deleted them","Deleted by Incoming")}break;case 3:switch(r){case 1:case 2:return Dt("conflict status deleted us","Deleted by Current");case 3:return Dt("conflict status deleted both","Deleted by Both")}break}}const ba=class{constructor(e){this.memento=e,this._onDidChange=new d.EventEmitter}get onDidChange(){return this._onDidChange.event}delete(e){return this.set(e,void 0)}get(e,t){var r,n,i,o,s;this.assertMatchingScheme(e);const a=this.memento.get(`${Le.scheme}.metadata|${e.toString()}`);if(a!=null){if((t==null?void 0:t.skipValidation)||typeof a.version=="number"&&a.version>=ba.schemaVersion&&typeof a.timestamp=="number"&&typeof((r=a.provider)==null?void 0:r.id)=="string"&&typeof a.provider.name=="string"&&typeof a.name=="string"&&a.repo&&typeof a.user=="string"&&typeof a.accessLevel=="number"&&typeof((n=a.HEAD)==null?void 0:n.sha)=="string"&&(typeof((i=a.HEAD.detached)==null?void 0:i.name)=="string"||typeof((o=a.HEAD.branch)==null?void 0:o.name)=="string")&&typeof((s=a.defaultBranch)==null?void 0:s.name)=="string"&&typeof a.defaultBranch.sha=="string")return a;ue.warn("Repository metadata is out of date with current schema")}}getForWorkspace(e){return!d.workspace.workspaceFolders||d.workspace.workspaceFolders.length===0?[]:[...Ht(d.workspace.workspaceFolders,t=>{if(t.uri.scheme!==Le.scheme)return;const r=this.get(t.uri);if(!(r===void 0||e&&(r==null?void 0:r.provider.id)!==e))return{folderUri:t.uri,name:t.name,data:r}})]}getForWorkspaceFolder(e,t){if(!d.workspace.workspaceFolders||d.workspace.workspaceFolders.length===0)return;const r=d.workspace.getWorkspaceFolder(e);if(!r||r.uri.scheme!==Le.scheme)return;const n=this.get(r.uri);if(!(!n||t!==void 0&&n.provider.id!==t))return{folderUri:r.uri,name:r.name,data:n}}async set(e,t){this.assertMatchingScheme(e),!(t===void 0&&this.get(e)===void 0)&&(await this.memento.update(`${Le.scheme}.metadata|${e.toString()}`,t),this._onDidChange.fire(e))}assertMatchingScheme(e){if(e.scheme!==Le.scheme)throw new Error(`Uri scheme '${e.scheme}' must match configured scheme '${Le.scheme}'; uri=${e.toString()}`)}};let ai=ba;ai.schemaVersion=5;function ya(e){if(e==="HEAD")return"branch";if(Ea(e))return"sha";if(Ta(e))return"branch"}const Pp=/^[0-9a-f]{40}$/i;function Ea(e){return e!==void 0&&Pp.test(e)}const Fp=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function Ta(e){return Fp.test(e)}function Qe(e){return e===""||e==="~"||e==="HEAD"?e:e.endsWith("^")?`${e.substr(0,7)}^`:e.substr(0,7)}function on(e){const[t,r]=e.authority.split("+");let n,i;r&&([n,i]=r.split("~"));const[,o,s,a,...l]=e.path.split("/");return{scheme:t,repo:{owner:o,project:s,name:a},path:l.join("/")||"",ref:n||void 0,pullRequest:i?Number(i):void 0}}function Sa(e,t){const{repo:r}=t!=null?t:on(e);return e.with({path:`/${r.owner}/${r.project}/${r.name}`})}function j_(e,t,r){const{repo:{owner:n,name:i}}=e instanceof Uri?on(e):e;return Uri.parse(`azdo://azdo+${t}/${n}/${i}/${r}`)}class Op{constructor(t,r){this.providerService=t,this.metadataStore=r,this.pendingMetadataRequests=new Map,this.rootUriToMetadataMap=new Map}dispose(){}async getMetadata(t){t=this.providerService.getVirtualUri(t);const r=on(t),n=Sa(t,r),i=n.toString();let o=this.pendingMetadataRequests.get(i);o===void 0&&(o=this.getMetadataCore(n),this.pendingMetadataRequests.set(i,o));try{return{...await o,path:r.path,scheme:r.scheme}}finally{this.pendingMetadataRequests.delete(i)}}async getMetadataCore(t){var r,n,i,o;const s=t.toString();let a=this.rootUriToMetadataMap.get(s);if(a!==void 0)return a;if(a=this.metadataStore.get(t),a!==void 0)return this.rootUriToMetadataMap.set(s,a),a;let{repo:{owner:l,project:c,name:u},ref:p,pullRequest:f}=on(t);(!p||/HEAD/i.test(p))&&(p="HEAD");const h=ya(p);if(h===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);const g=await this.getRepositoryInfo(l,c,u,{ref:p,pr:f});if(g===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let v;if(h==="sha")v=p;else if(v=(n=(r=g.ref)==null?void 0:r.sha)!=null?n:g.defaultBranch.sha,v===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let C;return((i=g.ref)==null?void 0:i.prefix)==="refs/heads/"?C={sha:v,branch:{name:g.ref.name,sha:g.ref.sha}}:((o=g.ref)==null?void 0:o.prefix)==="refs/tags/"?C={sha:v,detached:{type:mt.Tag,name:g.ref.name}}:C={sha:v,detached:{type:mt.Commit,name:Qe(v)}},a={version:ai.schemaVersion,timestamp:Date.now(),provider:{id:"azdo",name:"Azure DevOps"},name:`${g.repo.owner}/${g.repo.name}`,repo:g.repo,user:g.user,accessLevel:g.accessLevel,HEAD:C,defaultBranch:g.defaultBranch,pullRequest:g.pullRequest},await this.updateMetadata(t,a),a}async updateMetadata(t,r){this.rootUriToMetadataMap.set(t.toString(),r),await this.metadataStore.set(this.providerService.getVirtualUri(t),r)}getRemoteWorkspaceSourceProviders(){return[{name:"Azure DevOps",type:jt.Repository,icon:"$(rocket)",provideSources:async(t,r)=>(await this.searchRepositoriesQuery(t!=null?t:"",r)).map(i=>({name:i.repoWithOwner,description:`${i.fork?i.fork:""}${i.stars>0?`${i.fork?" \u2022 ":""}$(star-full) ${i.stars}`:""}`,detail:i.description,url:i.url}))}]}async createBranch(t,r,n,i){try{return"TestBranch"}catch(o){throw o instanceof Wt&&o.status===422?o.message==="Reference already exists"?new or(o,!0):new or(o,!1):(ue.error(o),o)}}async createCommit(t,r,n,i){throw new Error}async createPullRequest(t,r,n,i,o){throw new Error}async fetch(t,r){const[n,i]=await this.fetchCore(t,{...r,sync:!1});n&&await this.updateMetadata(t,i)}async fetchCore(t,r){const n=await this.getMetadata(t);return[!1,n]}async fork(t){throw new Error}async getBranches(t,r){return{branches:[]}}async getCommit(t,r){const n={oid:"123",message:"Hey there!",parents:{nodes:[{oid:"231"}]},author:{name:"you",date:"today",email:""},committer:{name:"you",date:"today"}};return{hash:n.oid,message:n.message,parents:n.parents.nodes.map(i=>i.oid),authorDate:new Date(n.author.date),authorEmail:n.author.email,authorName:n.author.name,commitDate:new Date(n.committer.date)}}getCommitOperations(t,r,n){return r.map(o=>{const s=this.providerService.getRelativeFilePath(t,o.uri);switch(o.type){case ye.Created:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case ye.Changed:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case ye.Deleted:return{type:o.type,path:s,fileType:o.fileType}}})}async getCommits(t,r){try{throw new Error}catch(n){return}}async getFileContent(t,r,n){try{const i=await this.getMetadata(t),o=i.repo;let s=`https://dev.azure.com/${o.owner}/${o.project}/_apis/git/repositories/${o.name}/items?api-version=6.0`;i.path&&(s=`${s}&path=${i.path}&includeContent=true`);const a=await xr(s);return(a==null?void 0:a.content)?new TextEncoder().encode(a.content):new TextEncoder().encode("404: Unable to retrieve content")}catch(i){throw ue.error(i),i}}async getFork(t){throw new Error}async getIncomingChanges(t){return this.getIncomingChangesCore(t,await this.getMetadata(t))}getIncomingChangesCore(t,r){var n,i,o;return((o=(i=(n=r.state)==null?void 0:n.incomingChanges)==null?void 0:i.length)!=null?o:0)===0?[]:r.state.incomingChanges.map(s=>({uri:d.Uri.joinPath(t,s.path),type:s.type}))}async getObjectDetails(t,r,n){throw new Error}async getPullRequest(t,r){throw new Error}async getPullRequestForBranch(t,r,n){throw new Error}async getRepoItems(t){const r=await xr(`https://dev.azure.com/${t.repo.owner}/${t.repo.project}/_apis/git/repositories/${t.repo.name}/items?api-version=6.0&scopePath=${t.path}&recursionLevel=1&includeContentMetadata=true&$format=json`);return r==null?void 0:r.value}async getRepoFileNames(t){try{const r=await this.getMetadata(t),n=await this.getRepoItems(r);return Ht(n,i=>i.isFolder?void 0:i.path.substr(1))}catch(r){return[]}}async getTags(t,r){return{tags:[]}}async getTarGz(t,r){throw new Error}async pushCommit(t,r,n,i){throw new Error}async queryRepositoryObject(t,r){}async searchPullRequestsQuery(t){return[]}async searchRepositoriesQuery(t,r){try{const n=await xr("https://dev.azure.com/homitc/AzDODemo/_apis/git/repositories?api-version=6.0");return n==null?void 0:n.value.map(i=>({repoWithOwner:i.name,description:void 0,url:i.webUrl,fork:void 0,stars:0}))}catch(n){return[]}}async searchCodeQuery(t,r,n){return{matches:[],limitHit:!0}}async switchTo(t,r,n){const{name:i,repo:o,HEAD:{branch:s}}=await this.getMetadata(t);r.startsWith("refs/heads/")?r=r.substr(11):r.startsWith("refs/tags/")&&(r=r.substr(10)),(s==null?void 0:s.name)!==r&&await ut(this.providerService.createVirtualUri(t,{repo:o,ref:r}),i,(n==null?void 0:n.openInNewWindow)?Ge.NewWindow:Ge.CurrentWindow)}async sync(t,r,n){}async getRepositoryInfo(t,r,n,i){const o=`https://dev.azure.com/${t}/${r}/_apis/git/repositories/${n}?api-version=6.0`,s=await xr(o);if(!s)return;if(i={ref:s.defaultBranch.split("/").pop()},i.ref){if(Ea(i.ref))throw new Error("Not supported yet :(");{const l=`https://dev.azure.com/${t}/${r}/_apis/git/repositories/${n}/stats/branches?name=${i.ref}&api-version=6.0`,c=await xr(l);let u;if(i.ref===s.defaultBranch)u=c;else{const p=`https://dev.azure.com/${t}/${r}/_apis/git/repositories/${n}/stats/branches?name=${i.ref}&api-version=6.0`;u=await xr(p)}if(u){const p={user:"jepetty",repo:{owner:t,project:r,name:n},repoId:s.id,accessLevel:Ke.Admin,defaultBranch:{name:i.ref,sha:u==null?void 0:u.commit.commitId}};return c&&(p.ref={name:c.name,sha:c.commit.commitId,prefix:"refs/heads/"}),p}}}else throw new Error("Not supported yet :(")}}var ar;(function(e){e.ADMIN="ADMIN",e.MAINTAIN="MAINTAIN",e.WRITE="WRITE",e.TRIAGE="TRIAGE",e.READ="READ",e.NONE="NONE"})(ar||(ar={}));function z_(e){switch(e){case ar.ADMIN:return RepositoryAccessLevel.Admin;case ar.MAINTAIN:return RepositoryAccessLevel.Maintain;case ar.WRITE:return RepositoryAccessLevel.Write;case ar.TRIAGE:return RepositoryAccessLevel.Triage;case ar.READ:return RepositoryAccessLevel.Read;default:return RepositoryAccessLevel.None}}async function q_(e,t){const{repo:r}=t!=null?t:on(e);return e.with({path:`/${r.organization}/${r.project}/_git/${r.name}`})}async function xr(e,t){const r=d.Uri.parse(e);return Up(e)}async function W_(e,t){let r=Uri.parse(e);const n=new URLSearchParams(r.query);return n.set("api-version","5.1"),r=r.with({query:n.toString()}),Ip(r.toString(),t)}async function Up(e,t){const r=await tp().get(e,t);if(r.status!==404)return r.data}async function Ip(e,t,r){return(await axios.post(e,r,t)).data}var Ar=Ie(7360);function Gp(e){return e.replace(/[-\\{}*+?|^$.[\]()#]/g,"\\$&")}function Lp(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=Gp(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e=`\\b${e}`),/\B/.test(e.charAt(e.length-1))||(e=`${e}\\b`));let n="";return r.global&&(n+="g"),r.matchCase||(n+="i"),r.multiline&&(n+="m"),r.unicode&&(n+="u"),new RegExp(e,n)}var ka=Ie(1171);let Ca,xa,fo;const Mp=(e,t,r,n)=>{const i=`${t.join("--")};;;;${r.join("--")}`,o=e.map(l=>l.path).join("::");if(Ca===o&&i==xa&&fo)return fo;const s=new Set,a=l=>(t.length===0||t.some(c=>ka(l,c,{dot:!0})))&&!r.some(c=>ka(l,c,{dot:!0}));for(const l of e)a(l.path)&&(!n||l.size<n)&&s.add(l.path);return Ca=o,xa=i,fo=s,s},$p=(e,t,r,n)=>{var i;const o=[];let s;if(typeof e=="string")s=e;else{const u=e;if(u[0]==255&&u[1]==254)s=new TextDecoder("utf-16le").decode(u);else if(u[0]==254&&u[1]==255)s=new TextDecoder("utf-16be").decode(u);else if(s=new TextDecoder("utf8").decode(u),s.slice(0,1e3).includes("\uFFFD")&&u.includes(0))return[]}const a=[];let l=null,c=n.remainingResultQuota;for(;c>=0&&(l=r.exec(s));)a.push({matchStartIndex:l.index,matchedText:l[0]}),c--;if(a.length){const u=new Set,p=new Set,f=[],h=D=>s.slice(f[D].start,f[D].end);let g=0,v=null;const C=/\r?\n/g;for(;v=C.exec(s);)f.push({start:g,end:v.index}),g=v.index+v[0].length;g<s.length&&f.push({start:g,end:s.length});let R=0;for(const{matchStartIndex:D,matchedText:N}of a){if(c<0)break;for(;Boolean(f[R+1])&&D>f[R].end;)R++;let G=R;for(;Boolean(f[G+1])&&D+N.length>f[G].end;)G++;if(n.beforeContext)for(let le=Math.max(0,R-n.beforeContext);le<R;le++)u.add(le);let W="",ce=0;for(let le=R;le<=G;le++){let de=h(le);((i=n.previewOptions)==null?void 0:i.charsPerLine)&&de.length>n.previewOptions.charsPerLine&&(ce=Math.max(D-f[R].start-20,0),de=de.substr(ce,n.previewOptions.charsPerLine)),W+=`${de}
`,p.add(le)}const re=new d.Range(R,D-f[R].start,G,D+N.length-f[G].start),ge=new d.Range(0,D-f[R].start-ce,G-R,D+N.length-f[G].start-(G===R?ce:0)),ve={uri:d.Uri.file(t),ranges:re,preview:{text:W,matches:ge}};if(o.push(ve),n.afterContext)for(let le=G+1;le<=Math.min(G+n.afterContext,f.length-1);le++)u.add(le)}for(const D of u)p.has(D)||o.push({uri:d.Uri.file(t),text:h(D),lineNumber:D+1})}return o};var Bp=Ie(5790);/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Np=4,Aa=0,Da=1,Hp=2;function Dr(e){let t=e.length;for(;--t>=0;)e[t]=0}const jp=0,Ra=1,zp=2,qp=3,Wp=258,po=29,sn=256,an=sn+1+po,Rr=30,go=19,Pa=2*an+1,cr=15,mo=16,Vp=7,vo=256,Fa=16,Oa=17,Ua=18,wo=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ci=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Zp=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ia=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kp=512,Rt=new Array((an+2)*2);Dr(Rt);const cn=new Array(Rr*2);Dr(cn);const ln=new Array(Kp);Dr(ln);const un=new Array(Wp-qp+1);Dr(un);const _o=new Array(po);Dr(_o);const li=new Array(Rr);Dr(li);function bo(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let Ga,La,Ma;function yo(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const $a=e=>e<256?ln[e]:ln[256+(e>>>7)],dn=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Xe=(e,t,r)=>{e.bi_valid>mo-r?(e.bi_buf|=t<<e.bi_valid&65535,dn(e,e.bi_buf),e.bi_buf=t>>mo-e.bi_valid,e.bi_valid+=r-mo):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},vt=(e,t,r)=>{Xe(e,r[t*2],r[t*2+1])},Ba=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},Qp=e=>{e.bi_valid===16?(dn(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Xp=(e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,p,f,h,g,v=0;for(f=0;f<=cr;f++)e.bl_count[f]=0;for(r[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Pa;c++)u=e.heap[c],f=r[r[u*2+1]*2+1]+1,f>l&&(f=l,v++),r[u*2+1]=f,!(u>n)&&(e.bl_count[f]++,h=0,u>=a&&(h=s[u-a]),g=r[u*2],e.opt_len+=g*(f+h),o&&(e.static_len+=g*(i[u*2+1]+h)));if(v!==0){do{for(f=l-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,v-=2}while(v>0);for(f=l;f!==0;f--)for(u=e.bl_count[f];u!==0;)p=e.heap[--c],!(p>n)&&(r[p*2+1]!==f&&(e.opt_len+=(f-r[p*2+1])*r[p*2],r[p*2+1]=f),u--)}},Na=(e,t,r)=>{const n=new Array(cr+1);let i=0,o,s;for(o=1;o<=cr;o++)n[o]=i=i+r[o-1]<<1;for(s=0;s<=t;s++){let a=e[s*2+1];a!==0&&(e[s*2]=Ba(n[a]++,a))}},Yp=()=>{let e,t,r,n,i;const o=new Array(cr+1);for(r=0,n=0;n<po-1;n++)for(_o[n]=r,e=0;e<1<<wo[n];e++)un[r++]=n;for(un[r-1]=n,i=0,n=0;n<16;n++)for(li[n]=i,e=0;e<1<<ci[n];e++)ln[i++]=n;for(i>>=7;n<Rr;n++)for(li[n]=i<<7,e=0;e<1<<ci[n]-7;e++)ln[256+i++]=n;for(t=0;t<=cr;t++)o[t]=0;for(e=0;e<=143;)Rt[e*2+1]=8,e++,o[8]++;for(;e<=255;)Rt[e*2+1]=9,e++,o[9]++;for(;e<=279;)Rt[e*2+1]=7,e++,o[7]++;for(;e<=287;)Rt[e*2+1]=8,e++,o[8]++;for(Na(Rt,an+1,o),e=0;e<Rr;e++)cn[e*2+1]=5,cn[e*2]=Ba(e,5);Ga=new bo(Rt,wo,sn+1,an,cr),La=new bo(cn,ci,0,Rr,cr),Ma=new bo(new Array(0),Zp,0,go,Vp)},Ha=e=>{let t;for(t=0;t<an;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Rr;t++)e.dyn_dtree[t*2]=0;for(t=0;t<go;t++)e.bl_tree[t*2]=0;e.dyn_ltree[vo*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},ja=e=>{e.bi_valid>8?dn(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Jp=(e,t,r,n)=>{ja(e),n&&(dn(e,r),dn(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},za=(e,t,r,n)=>{const i=t*2,o=r*2;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},Eo=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&za(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!za(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},qa=(e,t,r)=>{let n,i,o=0,s,a;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],i=e.pending_buf[e.l_buf+o],o++,n===0?vt(e,i,t):(s=un[i],vt(e,s+sn+1,t),a=wo[s],a!==0&&(i-=_o[s],Xe(e,i,a)),n--,s=$a(n),vt(e,s,r),a=ci[s],a!==0&&(n-=li[s],Xe(e,n,a)));while(o<e.last_lit);vt(e,vo,t)},To=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,l=-1,c;for(e.heap_len=0,e.heap_max=Pa,s=0;s<o;s++)r[s*2]!==0?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[c*2+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)Eo(e,r,s);c=o;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Eo(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,r[c*2]=r[s*2]+r[a*2],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,r[s*2+1]=r[a*2+1]=c,e.heap[1]=c++,Eo(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Xp(e,t),Na(r,l,e.bl_count)},Wa=(e,t,r)=>{let n,i=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)o=s,s=t[(n+1)*2+1],!(++a<l&&o===s)&&(a<c?e.bl_tree[o*2]+=a:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[Fa*2]++):a<=10?e.bl_tree[Oa*2]++:e.bl_tree[Ua*2]++,a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))},Va=(e,t,r)=>{let n,i=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),n=0;n<=r;n++)if(o=s,s=t[(n+1)*2+1],!(++a<l&&o===s)){if(a<c)do vt(e,o,e.bl_tree);while(--a!=0);else o!==0?(o!==i&&(vt(e,o,e.bl_tree),a--),vt(e,Fa,e.bl_tree),Xe(e,a-3,2)):a<=10?(vt(e,Oa,e.bl_tree),Xe(e,a-3,3)):(vt(e,Ua,e.bl_tree),Xe(e,a-11,7));a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}},eg=e=>{let t;for(Wa(e,e.dyn_ltree,e.l_desc.max_code),Wa(e,e.dyn_dtree,e.d_desc.max_code),To(e,e.bl_desc),t=go-1;t>=3&&e.bl_tree[Ia[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},tg=(e,t,r,n)=>{let i;for(Xe(e,t-257,5),Xe(e,r-1,5),Xe(e,n-4,4),i=0;i<n;i++)Xe(e,e.bl_tree[Ia[i]*2+1],3);Va(e,e.dyn_ltree,t-1),Va(e,e.dyn_dtree,r-1)},rg=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Aa;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Da;for(r=32;r<sn;r++)if(e.dyn_ltree[r*2]!==0)return Da;return Aa};let Za=!1;const ng=e=>{Za||(Yp(),Za=!0),e.l_desc=new yo(e.dyn_ltree,Ga),e.d_desc=new yo(e.dyn_dtree,La),e.bl_desc=new yo(e.bl_tree,Ma),e.bi_buf=0,e.bi_valid=0,Ha(e)},Ka=(e,t,r,n)=>{Xe(e,(jp<<1)+(n?1:0),3),Jp(e,t,r,!0)},ig=e=>{Xe(e,Ra<<1,3),vt(e,vo,Rt),Qp(e)},og=(e,t,r,n)=>{let i,o,s=0;e.level>0?(e.strm.data_type===Hp&&(e.strm.data_type=rg(e)),To(e,e.l_desc),To(e,e.d_desc),s=eg(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?Ka(e,t,r,n):e.strategy===Np||o===i?(Xe(e,(Ra<<1)+(n?1:0),3),qa(e,Rt,cn)):(Xe(e,(zp<<1)+(n?1:0),3),tg(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),qa(e,e.dyn_ltree,e.dyn_dtree)),Ha(e),n&&ja(e)},sg=(e,t,r)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(un[r]+sn+1)*2]++,e.dyn_dtree[$a(t)*2]++),e.last_lit===e.lit_bufsize-1);var ag=ng,cg=Ka,lg=og,ug=sg,dg=ig,hg={_tr_init:ag,_tr_stored_block:cg,_tr_flush_block:lg,_tr_tally:ug,_tr_align:dg},hn=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0};const fg=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},pg=new Uint32Array(fg());var Be=(e,t,r,n)=>{const i=pg,o=n+r;e^=-1;for(let s=n;s<o;s++)e=e>>>8^i[(e^t[s])&255];return e^-1},lr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ur={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:gg,_tr_stored_block:mg,_tr_flush_block:vg,_tr_tally:Vt,_tr_align:wg}=hg,{Z_NO_FLUSH:dr,Z_PARTIAL_FLUSH:_g,Z_FULL_FLUSH:bg,Z_FINISH:Zt,Z_BLOCK:Qa,Z_OK:wt,Z_STREAM_END:Xa,Z_STREAM_ERROR:et,Z_DATA_ERROR:yg,Z_BUF_ERROR:So,Z_DEFAULT_COMPRESSION:Eg,Z_FILTERED:Tg,Z_HUFFMAN_ONLY:ui,Z_RLE:Sg,Z_FIXED:kg,Z_DEFAULT_STRATEGY:Cg,Z_UNKNOWN:xg,Z_DEFLATED:di}=ur,Ag=9,Dg=15,Rg=8,Pg=29,ko=256+1+Pg,Fg=30,Og=19,Ug=2*ko+1,Ig=15,Te=3,Kt=258,ct=Kt+Te+1,Gg=32,hi=42,Co=69,fi=73,pi=91,gi=103,hr=113,fn=666,$e=1,pn=2,fr=3,Pr=4,Lg=3,Qt=(e,t)=>(e.msg=lr[t],t),Ya=e=>(e<<1)-(e>4?9:0),Xt=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Yt=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const Jt=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Ne=(e,t)=>{vg(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Jt(e.strm)},Se=(e,t)=>{e.pending_buf[e.pending++]=t},gn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Mg=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=hn(e.adler,t,i,r):e.state.wrap===2&&(e.adler=Be(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},Ja=(e,t)=>{let r=e.max_chain_length,n=e.strstart,i,o,s=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-ct?e.strstart-(e.w_size-ct):0,c=e.window,u=e.w_mask,p=e.prev,f=e.strstart+Kt;let h=c[n+s-1],g=c[n+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(c[i+s]!==g||c[i+s-1]!==h||c[i]!==c[n]||c[++i]!==c[n+1])){n+=2,i++;do;while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<f);if(o=Kt-(f-n),n=f-Kt,o>s){if(e.match_start=t,s=o,o>=a)break;h=c[n+s-1],g=c[n+s]}}while((t=p[t&u])>l&&--r!=0);return s<=e.lookahead?s:e.lookahead},pr=e=>{const t=e.w_size;let r,n,i,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ct)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);o+=t}if(e.strm.avail_in===0)break;if(n=Mg(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=Te)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Yt(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Yt(e,e.ins_h,e.window[s+Te-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<Te)););}while(e.lookahead<ct&&e.strm.avail_in!==0)},$g=(e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(pr(e),e.lookahead===0&&t===dr)return $e;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Ne(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ct&&(Ne(e,!1),e.strm.avail_out===0))return $e}return e.insert=0,t===Zt?(Ne(e,!0),e.strm.avail_out===0?fr:Pr):(e.strstart>e.block_start&&(Ne(e,!1),e.strm.avail_out===0),$e)},xo=(e,t)=>{let r,n;for(;;){if(e.lookahead<ct){if(pr(e),e.lookahead<ct&&t===dr)return $e;if(e.lookahead===0)break}if(r=0,e.lookahead>=Te&&(e.ins_h=Yt(e,e.ins_h,e.window[e.strstart+Te-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-ct&&(e.match_length=Ja(e,r)),e.match_length>=Te)if(n=Vt(e,e.strstart-e.match_start,e.match_length-Te),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Te){e.match_length--;do e.strstart++,e.ins_h=Yt(e,e.ins_h,e.window[e.strstart+Te-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Yt(e,e.ins_h,e.window[e.strstart+1]);else n=Vt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ne(e,!1),e.strm.avail_out===0))return $e}return e.insert=e.strstart<Te-1?e.strstart:Te-1,t===Zt?(Ne(e,!0),e.strm.avail_out===0?fr:Pr):e.last_lit&&(Ne(e,!1),e.strm.avail_out===0)?$e:pn},Fr=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<ct){if(pr(e),e.lookahead<ct&&t===dr)return $e;if(e.lookahead===0)break}if(r=0,e.lookahead>=Te&&(e.ins_h=Yt(e,e.ins_h,e.window[e.strstart+Te-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Te-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ct&&(e.match_length=Ja(e,r),e.match_length<=5&&(e.strategy===Tg||e.match_length===Te&&e.strstart-e.match_start>4096)&&(e.match_length=Te-1)),e.prev_length>=Te&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Te,n=Vt(e,e.strstart-1-e.prev_match,e.prev_length-Te),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=Yt(e,e.ins_h,e.window[e.strstart+Te-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=Te-1,e.strstart++,n&&(Ne(e,!1),e.strm.avail_out===0))return $e}else if(e.match_available){if(n=Vt(e,0,e.window[e.strstart-1]),n&&Ne(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return $e}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Vt(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Te-1?e.strstart:Te-1,t===Zt?(Ne(e,!0),e.strm.avail_out===0?fr:Pr):e.last_lit&&(Ne(e,!1),e.strm.avail_out===0)?$e:pn},Bg=(e,t)=>{let r,n,i,o;const s=e.window;for(;;){if(e.lookahead<=Kt){if(pr(e),e.lookahead<=Kt&&t===dr)return $e;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Te&&e.strstart>0&&(i=e.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=e.strstart+Kt;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=Kt-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Te?(r=Vt(e,1,e.match_length-Te),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Vt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Ne(e,!1),e.strm.avail_out===0))return $e}return e.insert=0,t===Zt?(Ne(e,!0),e.strm.avail_out===0?fr:Pr):e.last_lit&&(Ne(e,!1),e.strm.avail_out===0)?$e:pn},Ng=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(pr(e),e.lookahead===0)){if(t===dr)return $e;break}if(e.match_length=0,r=Vt(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Ne(e,!1),e.strm.avail_out===0))return $e}return e.insert=0,t===Zt?(Ne(e,!0),e.strm.avail_out===0?fr:Pr):e.last_lit&&(Ne(e,!1),e.strm.avail_out===0)?$e:pn};function _t(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const mn=[new _t(0,0,0,0,$g),new _t(4,4,8,4,xo),new _t(4,5,16,8,xo),new _t(4,6,32,32,xo),new _t(4,4,16,16,Fr),new _t(8,16,32,32,Fr),new _t(8,16,128,128,Fr),new _t(8,32,128,256,Fr),new _t(32,128,258,1024,Fr),new _t(32,258,258,4096,Fr)],Hg=e=>{e.window_size=2*e.w_size,Xt(e.head),e.max_lazy_match=mn[e.level].max_lazy,e.good_match=mn[e.level].good_length,e.nice_match=mn[e.level].nice_length,e.max_chain_length=mn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Te-1,e.match_available=0,e.ins_h=0};function jg(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=di,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Ug*2),this.dyn_dtree=new Uint16Array((2*Fg+1)*2),this.bl_tree=new Uint16Array((2*Og+1)*2),Xt(this.dyn_ltree),Xt(this.dyn_dtree),Xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ig+1),this.heap=new Uint16Array(2*ko+1),Xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*ko+1),Xt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ec=e=>{if(!e||!e.state)return Qt(e,et);e.total_in=e.total_out=0,e.data_type=xg;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?hi:hr,e.adler=t.wrap===2?0:1,t.last_flush=dr,gg(t),wt},tc=e=>{const t=ec(e);return t===wt&&Hg(e.state),t},zg=(e,t)=>!e||!e.state||e.state.wrap!==2?et:(e.state.gzhead=t,wt),rc=(e,t,r,n,i,o)=>{if(!e)return et;let s=1;if(t===Eg&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>Ag||r!==di||n<8||n>15||t<0||t>9||o<0||o>kg)return Qt(e,et);n===8&&(n=9);const a=new jg;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Te-1)/Te),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=t,a.strategy=o,a.method=r,tc(e)},qg=(e,t)=>rc(e,t,di,Dg,Rg,Cg),Wg=(e,t)=>{let r,n;if(!e||!e.state||t>Qa||t<0)return e?Qt(e,et):et;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===fn&&t!==Zt)return Qt(e,e.avail_out===0?So:et);i.strm=e;const o=i.last_flush;if(i.last_flush=t,i.status===hi)if(i.wrap===2)e.adler=0,Se(i,31),Se(i,139),Se(i,8),i.gzhead?(Se(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Se(i,i.gzhead.time&255),Se(i,i.gzhead.time>>8&255),Se(i,i.gzhead.time>>16&255),Se(i,i.gzhead.time>>24&255),Se(i,i.level===9?2:i.strategy>=ui||i.level<2?4:0),Se(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Se(i,i.gzhead.extra.length&255),Se(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Be(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=Co):(Se(i,0),Se(i,0),Se(i,0),Se(i,0),Se(i,0),Se(i,i.level===9?2:i.strategy>=ui||i.level<2?4:0),Se(i,Lg),i.status=hr);else{let s=di+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=ui||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,s|=a<<6,i.strstart!==0&&(s|=Gg),s+=31-s%31,i.status=hr,gn(i,s),i.strstart!==0&&(gn(i,e.adler>>>16),gn(i,e.adler&65535)),e.adler=1}if(i.status===Co)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=Be(e.adler,i.pending_buf,i.pending-r,r)),Jt(e),r=i.pending,i.pending===i.pending_buf_size));)Se(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=Be(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=fi)}else i.status=fi;if(i.status===fi)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=Be(e.adler,i.pending_buf,i.pending-r,r)),Jt(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.name.length?n=i.gzhead.name.charCodeAt(i.gzindex++)&255:n=0,Se(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=Be(e.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.gzindex=0,i.status=pi)}else i.status=pi;if(i.status===pi)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=Be(e.adler,i.pending_buf,i.pending-r,r)),Jt(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.comment.length?n=i.gzhead.comment.charCodeAt(i.gzindex++)&255:n=0,Se(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=Be(e.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.status=gi)}else i.status=gi;if(i.status===gi&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Jt(e),i.pending+2<=i.pending_buf_size&&(Se(i,e.adler&255),Se(i,e.adler>>8&255),e.adler=0,i.status=hr)):i.status=hr),i.pending!==0){if(Jt(e),e.avail_out===0)return i.last_flush=-1,wt}else if(e.avail_in===0&&Ya(t)<=Ya(o)&&t!==Zt)return Qt(e,So);if(i.status===fn&&e.avail_in!==0)return Qt(e,So);if(e.avail_in!==0||i.lookahead!==0||t!==dr&&i.status!==fn){let s=i.strategy===ui?Ng(i,t):i.strategy===Sg?Bg(i,t):mn[i.level].func(i,t);if((s===fr||s===Pr)&&(i.status=fn),s===$e||s===fr)return e.avail_out===0&&(i.last_flush=-1),wt;if(s===pn&&(t===_g?wg(i):t!==Qa&&(mg(i,0,0,!1),t===bg&&(Xt(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),Jt(e),e.avail_out===0))return i.last_flush=-1,wt}return t!==Zt?wt:i.wrap<=0?Xa:(i.wrap===2?(Se(i,e.adler&255),Se(i,e.adler>>8&255),Se(i,e.adler>>16&255),Se(i,e.adler>>24&255),Se(i,e.total_in&255),Se(i,e.total_in>>8&255),Se(i,e.total_in>>16&255),Se(i,e.total_in>>24&255)):(gn(i,e.adler>>>16),gn(i,e.adler&65535)),Jt(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?wt:Xa)},Vg=e=>{if(!e||!e.state)return et;const t=e.state.status;return t!==hi&&t!==Co&&t!==fi&&t!==pi&&t!==gi&&t!==hr&&t!==fn?Qt(e,et):(e.state=null,t===hr?Qt(e,yg):wt)},Zg=(e,t)=>{let r=t.length;if(!e||!e.state)return et;const n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==hi||n.lookahead)return et;if(i===1&&(e.adler=hn(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(Xt(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(r-n.w_size,r),0),t=l,r=n.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,pr(n);n.lookahead>=Te;){let l=n.strstart,c=n.lookahead-(Te-1);do n.ins_h=Yt(n,n.ins_h,n.window[l+Te-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--c);n.strstart=l,n.lookahead=Te-1,pr(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Te-1,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,n.wrap=i,wt};var Kg=qg,Qg=rc,Xg=tc,Yg=ec,Jg=zg,em=Wg,tm=Vg,rm=Zg,nm="pako deflate (from Nodeca project)",vn={deflateInit:Kg,deflateInit2:Qg,deflateReset:Xg,deflateResetKeep:Yg,deflateSetHeader:Jg,deflate:em,deflateEnd:tm,deflateSetDictionary:rm,deflateInfo:nm};const im=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var om=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)im(r,n)&&(e[n]=r[n])}}return e},sm=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let s=e[n];r.set(s,i),i+=s.length}return r},mi={assign:om,flattenChunks:sm};let nc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){nc=!1}const wn=new Uint8Array(256);for(let e=0;e<256;e++)wn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;wn[254]=wn[254]=1;var am=e=>{let t,r,n,i,o,s=e.length,a=0;for(i=0;i<s;i++)r=e.charCodeAt(i),(r&64512)==55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),(r&64512)==55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const cm=(e,t)=>{if(t<65534&&e.subarray&&nc)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var lm=(e,t)=>{let r,n;const i=t||e.length,o=new Array(i*2);for(n=0,r=0;r<i;){let s=e[r++];if(s<128){o[n++]=s;continue}let a=wn[s];if(a>4){o[n++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<i;)s=s<<6|e[r++]&63,a--;if(a>1){o[n++]=65533;continue}s<65536?o[n++]=s:(s-=65536,o[n++]=55296|s>>10&1023,o[n++]=56320|s&1023)}return cm(o,n)},um=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)==128;)r--;return r<0||r===0?t:r+wn[e[r]]>t?r:t},_n={string2buf:am,buf2string:lm,utf8border:um};function dm(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ic=dm;const oc=Object.prototype.toString,{Z_NO_FLUSH:hm,Z_SYNC_FLUSH:fm,Z_FULL_FLUSH:pm,Z_FINISH:gm,Z_OK:vi,Z_STREAM_END:mm,Z_DEFAULT_COMPRESSION:vm,Z_DEFAULT_STRATEGY:wm,Z_DEFLATED:_m}=ur;function bn(e){this.options=mi.assign({level:vm,method:_m,chunkSize:16384,windowBits:15,memLevel:8,strategy:wm},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ic,this.strm.avail_out=0;let r=vn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==vi)throw new Error(lr[r]);if(t.header&&vn.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=_n.string2buf(t.dictionary):oc.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=vn.deflateSetDictionary(this.strm,n),r!==vi)throw new Error(lr[r]);this._dict_set=!0}}bn.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?gm:hm,typeof e=="string"?r.input=_n.string2buf(e):oc.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===fm||o===pm)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=vn.deflate(r,o),i===mm)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=vn.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===vi;if(r.avail_out===0){this.onData(r.output);continue}if(o>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0},bn.prototype.onData=function(e){this.chunks.push(e)},bn.prototype.onEnd=function(e){e===vi&&(this.result=mi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Ao(e,t){const r=new bn(t);if(r.push(e,!0),r.err)throw r.msg||lr[r.err];return r.result}function bm(e,t){return t=t||{},t.raw=!0,Ao(e,t)}function ym(e,t){return t=t||{},t.gzip=!0,Ao(e,t)}var Em=bn,Tm=Ao,Sm=bm,km=ym,Cm=ur,xm={Deflate:Em,deflate:Tm,deflateRaw:Sm,gzip:km,constants:Cm};const wi=30,Am=12;var Dm=function(t,r){let n,i,o,s,a,l,c,u,p,f,h,g,v,C,R,D,N,G,W,ce,re,ge,ve,le;const de=t.state;n=t.next_in,ve=t.input,i=n+(t.avail_in-5),o=t.next_out,le=t.output,s=o-(r-t.avail_out),a=o+(t.avail_out-257),l=de.dmax,c=de.wsize,u=de.whave,p=de.wnext,f=de.window,h=de.hold,g=de.bits,v=de.lencode,C=de.distcode,R=(1<<de.lenbits)-1,D=(1<<de.distbits)-1;e:do{g<15&&(h+=ve[n++]<<g,g+=8,h+=ve[n++]<<g,g+=8),N=v[h&R];t:for(;;){if(G=N>>>24,h>>>=G,g-=G,G=N>>>16&255,G===0)le[o++]=N&65535;else if(G&16){W=N&65535,G&=15,G&&(g<G&&(h+=ve[n++]<<g,g+=8),W+=h&(1<<G)-1,h>>>=G,g-=G),g<15&&(h+=ve[n++]<<g,g+=8,h+=ve[n++]<<g,g+=8),N=C[h&D];r:for(;;){if(G=N>>>24,h>>>=G,g-=G,G=N>>>16&255,G&16){if(ce=N&65535,G&=15,g<G&&(h+=ve[n++]<<g,g+=8,g<G&&(h+=ve[n++]<<g,g+=8)),ce+=h&(1<<G)-1,ce>l){t.msg="invalid distance too far back",de.mode=wi;break e}if(h>>>=G,g-=G,G=o-s,ce>G){if(G=ce-G,G>u&&de.sane){t.msg="invalid distance too far back",de.mode=wi;break e}if(re=0,ge=f,p===0){if(re+=c-G,G<W){W-=G;do le[o++]=f[re++];while(--G);re=o-ce,ge=le}}else if(p<G){if(re+=c+p-G,G-=p,G<W){W-=G;do le[o++]=f[re++];while(--G);if(re=0,p<W){G=p,W-=G;do le[o++]=f[re++];while(--G);re=o-ce,ge=le}}}else if(re+=p-G,G<W){W-=G;do le[o++]=f[re++];while(--G);re=o-ce,ge=le}for(;W>2;)le[o++]=ge[re++],le[o++]=ge[re++],le[o++]=ge[re++],W-=3;W&&(le[o++]=ge[re++],W>1&&(le[o++]=ge[re++]))}else{re=o-ce;do le[o++]=le[re++],le[o++]=le[re++],le[o++]=le[re++],W-=3;while(W>2);W&&(le[o++]=le[re++],W>1&&(le[o++]=le[re++]))}}else if((G&64)==0){N=C[(N&65535)+(h&(1<<G)-1)];continue r}else{t.msg="invalid distance code",de.mode=wi;break e}break}}else if((G&64)==0){N=v[(N&65535)+(h&(1<<G)-1)];continue t}else if(G&32){de.mode=Am;break e}else{t.msg="invalid literal/length code",de.mode=wi;break e}break}}while(n<i&&o<a);W=g>>3,n-=W,g-=W<<3,h&=(1<<g)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),de.hold=h,de.bits=g};const Or=15,sc=852,ac=592,cc=0,Do=1,lc=2,Rm=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Pm=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Fm=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Om=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var yn=(e,t,r,n,i,o,s,a)=>{const l=a.bits;let c=0,u=0,p=0,f=0,h=0,g=0,v=0,C=0,R=0,D=0,N,G,W,ce,re,ge=null,ve=0,le;const de=new Uint16Array(Or+1),Ye=new Uint16Array(Or+1);let nt=null,it=0,Mt,Je,dt;for(c=0;c<=Or;c++)de[c]=0;for(u=0;u<n;u++)de[t[r+u]]++;for(h=l,f=Or;f>=1&&de[f]===0;f--);if(h>f&&(h=f),f===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<f&&de[p]===0;p++);for(h<p&&(h=p),C=1,c=1;c<=Or;c++)if(C<<=1,C-=de[c],C<0)return-1;if(C>0&&(e===cc||f!==1))return-1;for(Ye[1]=0,c=1;c<Or;c++)Ye[c+1]=Ye[c]+de[c];for(u=0;u<n;u++)t[r+u]!==0&&(s[Ye[t[r+u]]++]=u);if(e===cc?(ge=nt=s,le=19):e===Do?(ge=Rm,ve-=257,nt=Pm,it-=257,le=256):(ge=Fm,nt=Om,le=-1),D=0,u=0,c=p,re=o,g=h,v=0,W=-1,R=1<<h,ce=R-1,e===Do&&R>sc||e===lc&&R>ac)return 1;for(;;){Mt=c-v,s[u]<le?(Je=0,dt=s[u]):s[u]>le?(Je=nt[it+s[u]],dt=ge[ve+s[u]]):(Je=32+64,dt=0),N=1<<c-v,G=1<<g,p=G;do G-=N,i[re+(D>>v)+G]=Mt<<24|Je<<16|dt|0;while(G!==0);for(N=1<<c-1;D&N;)N>>=1;if(N!==0?(D&=N-1,D+=N):D=0,u++,--de[c]==0){if(c===f)break;c=t[r+s[u]]}if(c>h&&(D&ce)!==W){for(v===0&&(v=h),re+=p,g=c-v,C=1<<g;g+v<f&&(C-=de[g+v],!(C<=0));)g++,C<<=1;if(R+=1<<g,e===Do&&R>sc||e===lc&&R>ac)return 1;W=D&ce,i[W]=h<<24|g<<16|re-o|0}}return D!==0&&(i[re+D]=c-v<<24|64<<16|0),a.bits=h,0};const Um=0,uc=1,dc=2,{Z_FINISH:hc,Z_BLOCK:Im,Z_TREES:_i,Z_OK:gr,Z_STREAM_END:Gm,Z_NEED_DICT:Lm,Z_STREAM_ERROR:tt,Z_DATA_ERROR:fc,Z_MEM_ERROR:pc,Z_BUF_ERROR:Mm,Z_DEFLATED:gc}=ur,mc=1,vc=2,wc=3,_c=4,bc=5,yc=6,Ec=7,Tc=8,Sc=9,kc=10,bi=11,Pt=12,Ro=13,Cc=14,Po=15,xc=16,Ac=17,Dc=18,Rc=19,yi=20,Ei=21,Pc=22,Fc=23,Oc=24,Uc=25,Ic=26,Fo=27,Gc=28,Lc=29,Ue=30,Mc=31,$m=32,Bm=852,Nm=592,Hm=15,$c=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function jm(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bc=e=>{if(!e||!e.state)return tt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=mc,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Bm),t.distcode=t.distdyn=new Int32Array(Nm),t.sane=1,t.back=-1,gr},Nc=e=>{if(!e||!e.state)return tt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Bc(e)},Hc=(e,t)=>{let r;if(!e||!e.state)return tt;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?tt:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Nc(e))},jc=(e,t)=>{if(!e)return tt;const r=new jm;e.state=r,r.window=null;const n=Hc(e,t);return n!==gr&&(e.state=null),n},zm=e=>jc(e,Hm);let zc=!0,Oo,Uo;const qm=e=>{if(zc){Oo=new Int32Array(512),Uo=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(yn(uc,e.lens,0,288,Oo,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;yn(dc,e.lens,0,32,Uo,0,e.work,{bits:5}),zc=!1}e.lencode=Oo,e.lenbits=9,e.distcode=Uo,e.distbits=5},qc=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Wm=(e,t)=>{let r,n,i,o,s,a,l,c,u,p,f,h,g,v,C=0,R,D,N,G,W,ce,re,ge;const ve=new Uint8Array(4);let le,de;const Ye=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return tt;r=e.state,r.mode===Pt&&(r.mode=Ro),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,c=r.hold,u=r.bits,p=a,f=l,ge=gr;e:for(;;)switch(r.mode){case mc:if(r.wrap===0){r.mode=Ro;break}for(;u<16;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(r.wrap&2&&c===35615){r.check=0,ve[0]=c&255,ve[1]=c>>>8&255,r.check=Be(r.check,ve,2,0),c=0,u=0,r.mode=vc;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=Ue;break}if((c&15)!==gc){e.msg="unknown compression method",r.mode=Ue;break}if(c>>>=4,u-=4,re=(c&15)+8,r.wbits===0)r.wbits=re;else if(re>r.wbits){e.msg="invalid window size",r.mode=Ue;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=c&512?kc:Pt,c=0,u=0;break;case vc:for(;u<16;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==gc){e.msg="unknown compression method",r.mode=Ue;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Ue;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&(ve[0]=c&255,ve[1]=c>>>8&255,r.check=Be(r.check,ve,2,0)),c=0,u=0,r.mode=wc;case wc:for(;u<32;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&(ve[0]=c&255,ve[1]=c>>>8&255,ve[2]=c>>>16&255,ve[3]=c>>>24&255,r.check=Be(r.check,ve,4,0)),c=0,u=0,r.mode=_c;case _c:for(;u<16;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&(ve[0]=c&255,ve[1]=c>>>8&255,r.check=Be(r.check,ve,2,0)),c=0,u=0,r.mode=bc;case bc:if(r.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&(ve[0]=c&255,ve[1]=c>>>8&255,r.check=Be(r.check,ve,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=yc;case yc:if(r.flags&1024&&(h=r.length,h>a&&(h=a),h&&(r.head&&(re=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+h),re)),r.flags&512&&(r.check=Be(r.check,n,h,o)),a-=h,o+=h,r.length-=h),r.length))break e;r.length=0,r.mode=Ec;case Ec:if(r.flags&2048){if(a===0)break e;h=0;do re=n[o+h++],r.head&&re&&r.length<65536&&(r.head.name+=String.fromCharCode(re));while(re&&h<a);if(r.flags&512&&(r.check=Be(r.check,n,h,o)),a-=h,o+=h,re)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Tc;case Tc:if(r.flags&4096){if(a===0)break e;h=0;do re=n[o+h++],r.head&&re&&r.length<65536&&(r.head.comment+=String.fromCharCode(re));while(re&&h<a);if(r.flags&512&&(r.check=Be(r.check,n,h,o)),a-=h,o+=h,re)break e}else r.head&&(r.head.comment=null);r.mode=Sc;case Sc:if(r.flags&512){for(;u<16;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(c!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Ue;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Pt;break;case kc:for(;u<32;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}e.adler=r.check=$c(c),c=0,u=0,r.mode=bi;case bi:if(r.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,r.hold=c,r.bits=u,Lm;e.adler=r.check=1,r.mode=Pt;case Pt:if(t===Im||t===_i)break e;case Ro:if(r.last){c>>>=u&7,u-=u&7,r.mode=Fo;break}for(;u<3;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=Cc;break;case 1:if(qm(r),r.mode=yi,t===_i){c>>>=2,u-=2;break e}break;case 2:r.mode=Ac;break;case 3:e.msg="invalid block type",r.mode=Ue}c>>>=2,u-=2;break;case Cc:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if((c&65535)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ue;break}if(r.length=c&65535,c=0,u=0,r.mode=Po,t===_i)break e;case Po:r.mode=xc;case xc:if(h=r.length,h){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;i.set(n.subarray(o,o+h),s),a-=h,o+=h,l-=h,s+=h,r.length-=h;break}r.mode=Pt;break;case Ac:for(;u<14;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ue;break}r.have=0,r.mode=Dc;case Dc:for(;r.have<r.ncode;){for(;u<3;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}r.lens[Ye[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[Ye[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,le={bits:r.lenbits},ge=yn(Um,r.lens,0,19,r.lencode,0,r.work,le),r.lenbits=le.bits,ge){e.msg="invalid code lengths set",r.mode=Ue;break}r.have=0,r.mode=Rc;case Rc:for(;r.have<r.nlen+r.ndist;){for(;C=r.lencode[c&(1<<r.lenbits)-1],R=C>>>24,D=C>>>16&255,N=C&65535,!(R<=u);){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(N<16)c>>>=R,u-=R,r.lens[r.have++]=N;else{if(N===16){for(de=R+2;u<de;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(c>>>=R,u-=R,r.have===0){e.msg="invalid bit length repeat",r.mode=Ue;break}re=r.lens[r.have-1],h=3+(c&3),c>>>=2,u-=2}else if(N===17){for(de=R+3;u<de;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}c>>>=R,u-=R,re=0,h=3+(c&7),c>>>=3,u-=3}else{for(de=R+7;u<de;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}c>>>=R,u-=R,re=0,h=11+(c&127),c>>>=7,u-=7}if(r.have+h>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ue;break}for(;h--;)r.lens[r.have++]=re}}if(r.mode===Ue)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Ue;break}if(r.lenbits=9,le={bits:r.lenbits},ge=yn(uc,r.lens,0,r.nlen,r.lencode,0,r.work,le),r.lenbits=le.bits,ge){e.msg="invalid literal/lengths set",r.mode=Ue;break}if(r.distbits=6,r.distcode=r.distdyn,le={bits:r.distbits},ge=yn(dc,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,le),r.distbits=le.bits,ge){e.msg="invalid distances set",r.mode=Ue;break}if(r.mode=yi,t===_i)break e;case yi:r.mode=Ei;case Ei:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,r.hold=c,r.bits=u,Dm(e,f),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,c=r.hold,u=r.bits,r.mode===Pt&&(r.back=-1);break}for(r.back=0;C=r.lencode[c&(1<<r.lenbits)-1],R=C>>>24,D=C>>>16&255,N=C&65535,!(R<=u);){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(D&&(D&240)==0){for(G=R,W=D,ce=N;C=r.lencode[ce+((c&(1<<G+W)-1)>>G)],R=C>>>24,D=C>>>16&255,N=C&65535,!(G+R<=u);){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}c>>>=G,u-=G,r.back+=G}if(c>>>=R,u-=R,r.back+=R,r.length=N,D===0){r.mode=Ic;break}if(D&32){r.back=-1,r.mode=Pt;break}if(D&64){e.msg="invalid literal/length code",r.mode=Ue;break}r.extra=D&15,r.mode=Pc;case Pc:if(r.extra){for(de=r.extra;u<de;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Fc;case Fc:for(;C=r.distcode[c&(1<<r.distbits)-1],R=C>>>24,D=C>>>16&255,N=C&65535,!(R<=u);){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if((D&240)==0){for(G=R,W=D,ce=N;C=r.distcode[ce+((c&(1<<G+W)-1)>>G)],R=C>>>24,D=C>>>16&255,N=C&65535,!(G+R<=u);){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}c>>>=G,u-=G,r.back+=G}if(c>>>=R,u-=R,r.back+=R,D&64){e.msg="invalid distance code",r.mode=Ue;break}r.offset=N,r.extra=D&15,r.mode=Oc;case Oc:if(r.extra){for(de=r.extra;u<de;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ue;break}r.mode=Uc;case Uc:if(l===0)break e;if(h=f-l,r.offset>h){if(h=r.offset-h,h>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ue;break}h>r.wnext?(h-=r.wnext,g=r.wsize-h):g=r.wnext-h,h>r.length&&(h=r.length),v=r.window}else v=i,g=s-r.offset,h=r.length;h>l&&(h=l),l-=h,r.length-=h;do i[s++]=v[g++];while(--h);r.length===0&&(r.mode=Ei);break;case Ic:if(l===0)break e;i[s++]=r.length,l--,r.mode=Ei;break;case Fo:if(r.wrap){for(;u<32;){if(a===0)break e;a--,c|=n[o++]<<u,u+=8}if(f-=l,e.total_out+=f,r.total+=f,f&&(e.adler=r.check=r.flags?Be(r.check,i,f,s-f):hn(r.check,i,f,s-f)),f=l,(r.flags?c:$c(c))!==r.check){e.msg="incorrect data check",r.mode=Ue;break}c=0,u=0}r.mode=Gc;case Gc:if(r.wrap&&r.flags){for(;u<32;){if(a===0)break e;a--,c+=n[o++]<<u,u+=8}if(c!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Ue;break}c=0,u=0}r.mode=Lc;case Lc:ge=Gm;break e;case Ue:ge=fc;break e;case Mc:return pc;case $m:default:return tt}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,r.hold=c,r.bits=u,(r.wsize||f!==e.avail_out&&r.mode<Ue&&(r.mode<Fo||t!==hc))&&qc(e,e.output,e.next_out,f-e.avail_out),p-=e.avail_in,f-=e.avail_out,e.total_in+=p,e.total_out+=f,r.total+=f,r.wrap&&f&&(e.adler=r.check=r.flags?Be(r.check,i,f,e.next_out-f):hn(r.check,i,f,e.next_out-f)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Pt?128:0)+(r.mode===yi||r.mode===Po?256:0),(p===0&&f===0||t===hc)&&ge===gr&&(ge=Mm),ge},Vm=e=>{if(!e||!e.state)return tt;let t=e.state;return t.window&&(t.window=null),e.state=null,gr},Zm=(e,t)=>{if(!e||!e.state)return tt;const r=e.state;return(r.wrap&2)==0?tt:(r.head=t,t.done=!1,gr)},Km=(e,t)=>{const r=t.length;let n,i,o;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==bi)?tt:n.mode===bi&&(i=1,i=hn(i,t,r,0),i!==n.check)?fc:(o=qc(e,t,r,r),o?(n.mode=Mc,pc):(n.havedict=1,gr))};var Qm=Nc,Xm=Hc,Ym=Bc,Jm=zm,ev=jc,tv=Wm,rv=Vm,nv=Zm,iv=Km,ov="pako inflate (from Nodeca project)",Ft={inflateReset:Qm,inflateReset2:Xm,inflateResetKeep:Ym,inflateInit:Jm,inflateInit2:ev,inflate:tv,inflateEnd:rv,inflateGetHeader:nv,inflateSetDictionary:iv,inflateInfo:ov};function sv(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var av=sv;const Wc=Object.prototype.toString,{Z_NO_FLUSH:cv,Z_FINISH:lv,Z_OK:En,Z_STREAM_END:Io,Z_NEED_DICT:Go,Z_STREAM_ERROR:uv,Z_DATA_ERROR:Vc,Z_MEM_ERROR:dv}=ur;function Tn(e){this.options=mi.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ic,this.strm.avail_out=0;let r=Ft.inflateInit2(this.strm,t.windowBits);if(r!==En)throw new Error(lr[r]);if(this.header=new av,Ft.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=_n.string2buf(t.dictionary):Wc.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Ft.inflateSetDictionary(this.strm,t.dictionary),r!==En)))throw new Error(lr[r])}Tn.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?lv:cv,Wc.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Ft.inflate(r,s),o===Go&&i&&(o=Ft.inflateSetDictionary(r,i),o===En?o=Ft.inflate(r,s):o===Vc&&(o=Go));r.avail_in>0&&o===Io&&r.state.wrap>0&&e[r.next_in]!==0;)Ft.inflateReset(r),o=Ft.inflate(r,s);switch(o){case uv:case Vc:case Go:case dv:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===Io))if(this.options.to==="string"){let l=_n.utf8border(r.output,r.next_out),c=r.next_out-l,u=_n.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===En&&a===0)){if(o===Io)return o=Ft.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},Tn.prototype.onData=function(e){this.chunks.push(e)},Tn.prototype.onEnd=function(e){e===En&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Lo(e,t){const r=new Tn(t);if(r.push(e),r.err)throw r.msg||lr[r.err];return r.result}function hv(e,t){return t=t||{},t.raw=!0,Lo(e,t)}var fv=Tn,pv=Lo,gv=hv,mv=Lo,vv=ur,wv={Inflate:fv,inflate:pv,inflateRaw:gv,ungzip:mv,constants:vv};const{Deflate:_v,deflate:bv,deflateRaw:yv,gzip:Ev}=xm,{Inflate:Tv,inflate:Sv,inflateRaw:kv,ungzip:Cv}=wv;var xv=_v,Av=bv,Dv=yv,Rv=Ev,Pv=Tv,Fv=Sv,Ov=kv,Zc=Cv,Uv=ur,J_={Deflate:xv,deflate:Av,deflateRaw:Dv,gzip:Rv,Inflate:Pv,inflate:Fv,inflateRaw:Ov,ungzip:Zc,constants:Uv};const eb=null,Mo=(0,P.loadMessageBundle)(),Kc=new TextDecoder,Qc=new TextEncoder;class Iv{constructor(t,r=0){this.retainFor=r;try{this.weakRef=new WeakRef(t)}catch{}this.retain(t)}retain(t){this.retainTimeout&&clearTimeout(this.retainTimeout),this.strongRef=t,this.retainTimeout=setTimeout(()=>{this.strongRef=void 0,this.retainTimeout=void 0},this.retainFor)}deref(){var t,r;const n=(r=this.strongRef)!=null?r:(t=this.weakRef)==null?void 0:t.deref();return n&&this.retain(n),n}}class Gv{constructor(t){this.root=t,this.ongoingReqests=new Map,this.usageFile=d.Uri.joinPath(this.root,"usageHistory.json"),this._disposable=d.Disposable.from(...this.registerCommands())}dispose(){this._disposable.dispose()}registerCommands(){return[d.commands.registerCommand("remoteHub.enableIndexing",async()=>{const t={title:Mo("search download prompt allow","Allow")},r={title:Mo("search download prompt cancel","Cancel"),isCloseAffordance:!0};await d.window.showInformationMessage(Mo("search download prompt",`In order to provide full-text search capabilities, a local index of the repository must be created.

Do you want to allow a local index to be created? This can be configured with the "Repo Limit" and "Size Limit" settings of Remote Hub`),{modal:!0},t,r)===t&&await Ce.update("search.download.enabled",!0,d.ConfigurationTarget.Global)}),d.commands.registerCommand("remoteHub.deleteLocalRepositoryData",async()=>{const t=i=>{const o=[{power:9,name:"GB"},{power:6,name:"MB"},{power:3,name:"kB"},{power:0,name:"B"}];for(const s of o)if(i>10**s.power)return`${Math.round(i/10**s.power)} ${s.name}`;return"Unknown size"},r=await this.listTars();if(r.length===0){await d.window.showInformationMessage("No Local Data Found");return}const n=d.window.createQuickPick();n.canSelectMany=!0,n.items=r.map(({name:i,size:o,path:s})=>({label:i,path:s,description:o?t(o):void 0})),n.show(),n.onDidAccept(async()=>{n.hide();for(const{label:i,path:o}of n.selectedItems){const s=d.workspace.fs.delete(o),a=d.window.setStatusBarMessage(`$(loading) Deleting ${i}`,s);await s,a.dispose()}}),n.onDidHide(()=>n.dispose())}),d.commands.registerCommand("remoteHub.deleteAllLocalRepositoryData",()=>d.window.withProgress({location:d.ProgressLocation.Notification,title:"Deleting Local Data..."},()=>Promise.all([d.workspace.fs.delete(this.root,{recursive:!0})])))]}getTarFromMemory(t){var r;if(t===this.lastReadKey){const n=(r=this.lastReadValue)==null?void 0:r.deref();if(n)return n;ue.log("Weakref deallocated.")}}async getTarFromDisk(t){try{const r=await d.workspace.fs.readFile(t);return!r||!r.length?void 0:r}catch(r){if(r.code!=="FileNotFound")throw r;return}}async getTarFromNetwork(t,r){if(Ce.get("search.download.enabled")!==!0)throw Error("Unable to search without an index");const n=await t.getTarGz(r);if(n===void 0)throw Error("Unable to search without an index");return n}async getTar(t,r){const{repo:n,HEAD:{sha:i}}=await t.getMetadata(r),o=Object.values(n),s=`${o.join("/")}/${i}`,a=Date.now(),l=()=>`${Date.now()-a}ms`,c=d.Uri.joinPath(this.root,"tars",...o,i),u=c.toString(),p=this.ongoingReqests.get(u);if(ue.log(`Geting .tar for ${s}`),p)return p;const f=(async()=>{const h=this.getTarFromMemory(u);if(h)return ue.log(`Got .tar from memory in ${l()}`),h;let g=await this.getTarFromDisk(c);if((g==null?void 0:g.length)?ue.log(`Got .tar.gz from disk in ${l()}`):(g=await this.getTarFromNetwork(t,r),ue.log(`Got .tar.gz from network in ${l()}`),d.workspace.fs.writeFile(c,g).then(()=>ue.debug(`Sucessfully wrote tarball to disk in ${l()}`),R=>ue.error(R,`Error writing tarball to disk in ${l()}`))),!g||!g.length)throw Error("Internal Error: Invalid search index. Try deleting repository data and running search again: `RemoteHub: Delete Local Repository Data...`");const v=Jc("unzip",()=>Zc(g)),C=Jc("readTar",()=>(0,Bp.t9)(v));return C.entries=C.entries.filter(R=>{var D;return((D=R.header.typeFlag)==null?void 0:D.name)==="Normal"}),C.entries.forEach(R=>{R.header.fullFileName=R.header.fullFileName.replace(/^[^/]+/,"")}),this.lastReadValue=new Iv(C,Number(Date.now())-a),this.lastReadKey=u,C})();return f.finally(()=>(this.ongoingReqests.delete(u),this.markCacheEntryUsed(`${s}`).catch(h=>ue.log(`Error marking entry used: ${h}`)))).finally(()=>this.cleanUpCache().catch(h=>ue.log(`Error cleaning cache: ${h}`))),this.ongoingReqests.set(u,f),f}async readDir(t){try{return(await d.workspace.fs.readDirectory(t)).map(r=>d.Uri.joinPath(t,r[0]))}catch{return[]}}async listTars(){const t=await this.readDir(d.Uri.joinPath(this.root,"tars")).catch(()=>[]),r=(await Promise.all(t.map(i=>this.readDir(i)))).flat(),n=(await Promise.all(r.map(i=>this.readDir(i)))).flat();return Promise.all(n.map(async i=>({name:i.path.replace(/^.*\/tars\//,""),path:i,size:(await d.workspace.fs.stat(i)).size})))}async markCacheEntryUsed(t){let r;try{r=JSON.parse(Kc.decode(await d.workspace.fs.readFile(this.usageFile)))}catch(n){ue.log("Error reading usage data.",n),r={}}r[t]=Number(Date.now()),await d.workspace.fs.writeFile(this.usageFile,Qc.encode(JSON.stringify(r)))}async cleanUpCache(){var t,r;ue.log("Cleaning up search cache...");const n=await this.listTars();let i;try{i=JSON.parse(Kc.decode(await d.workspace.fs.readFile(this.usageFile)))}catch(p){ue.log("Error reading usage data. All existing indicies will be discarded.",p),i={}}const o=[];n.forEach(p=>{var f;const h=/^([^/]*\/[^/]*)\//.exec(p.name);if(!h)throw Error("Unexpected repo entry");const g=h[1],v=(f=i[p.name])!=null?f:0;o.push({...p,lastUsed:v,repo:g})}),o.sort((p,f)=>f.lastUsed-p.lastUsed);let s=0;const a=[],l=new Map,c=(t=Ce.get("search.download.sizeLimit"))!=null?t:100,u=(r=Ce.get("search.download.repoLimit"))!=null?r:4;o.forEach(p=>{var f,h;(p.lastUsed===0||s>c||((f=l.get(p.repo))!=null?f:0)>u)&&a.push(p),s+=p.size,l.set(p.repo,((h=l.get(p.repo))!=null?h:0)+1)}),await Promise.all(a.map(async p=>{await d.workspace.fs.delete(p.path),delete i[p.name],ue.log(`Deleted cache entry for ${p.name}`)})),await d.workspace.fs.writeFile(this.usageFile,Qc.encode(JSON.stringify(i)))}}async function Xc(e,t,r,n,i,o,s){return $o("provideTextSearchResults",async()=>{const a=Lp(n.pattern,Boolean(n.isRegExp),{matchCase:n.isCaseSensitive,wholeWord:n.isWordMatch,multiline:n.isMultiline,global:!0}),l=await $o("fetch tarball",async()=>d.window.withProgress({location:d.ProgressLocation.Window},C=>(C.report({message:"Fetching index..."}),r.getTar(e,i.folder))));if(s.isCancellationRequested)return{limitHit:!1};const{maxResults:c,maxFileSize:u,includes:p,excludes:f}=i,h=Lv(e.getVirtualUri(i.folder),l,t);if(s.isCancellationRequested)return{limitHit:!0};let g=c;const v=Mp(h,p,f,u);return $o("searchFiles",async()=>{var C,R;let D=0;for(const N of h){if(!v.has(N.path))continue;const G=$p(N.contents,N.path,a,{beforeContext:(C=i.beforeContext)!=null?C:0,afterContext:(R=i.afterContext)!=null?R:0,previewOptions:i.previewOptions,remainingResultQuota:g});for(const W of G)o.report({...W,uri:d.Uri.joinPath(i.folder,W.uri.path)});if(g-=G.length,g<=0)return{limitHit:!0};if(D++,D%1e4==0&&(await new Promise(W=>setTimeout(W,0)),s.isCancellationRequested))return{limitHit:!1}}return{limitHit:!1}})})}function Lv(e,t,r){const n=t.entries,i=r.getChanges(e);if(i.length===0)return n.map(u=>({contents:u.dataAsBytes,path:u.header.fullFileName,size:u.dataAsBytes.byteLength}));const o=Hf(i,u=>u.fileType===d.FileType.File),s=Ht(o,u=>{if(u.type!==ye.Created)return;const p=Yc(r.getContent(u.uri));return{path:u.uri.path,size:p.length,contents:p}}),a=Ht(o,u=>{if(u.type!==ye.Changed)return;const p=Yc(r.getContent(u.uri));return{path:u.uri.path,size:p.length,contents:p}}),l=new Set(zf(Kn(a,u=>u.path),Ht(o,u=>{if(u.type===ye.Deleted)return u.uri.path})));return[...Ht(n,u=>{if(!l.has(u.header.fullFileName))return{contents:u.dataAsBytes,path:u.header.fullFileName,size:u.dataAsBytes.byteLength}}),...s,...a]}function Yc(e){if(e===void 0)throw Error("Unexpected undefined value");return e}function Jc(e,t){const r=Date.now(),n=t();return ue.log(`${e} time: ${Date.now()-r}`),n}async function $o(e,t){const r=Date.now(),n=await t();return ue.log(`${e} time: ${Date.now()-r}`),n}const Bo=(0,P.loadMessageBundle)(),Mv={dispose:()=>{}},$v=/(\/|\\)/g,Sn=class{constructor(e,t,r,n,i){this.providerService=e,this.azdo=t,this.changeStore=n,this.tarPit=i,this._onDidChangeFile=new d.EventEmitter,this.fsCache=new Map,this.fileSearchCache=new Map,this.pathTypeMap={},this.disposable=d.Disposable.from(d.workspace.registerFileSystemProvider(Sn.scheme,this,{isCaseSensitive:!0,isReadonly:!0}),d.workspace.registerFileSearchProvider(Sn.scheme,this),d.workspace.registerTextSearchProvider(Sn.scheme,this),r.onDidChange(o=>{this.fsCache.clear(),this.updateOpenDocuments(e.getProviderUri(o))}))}get onDidChangeFile(){return this._onDidChangeFile.event}dispose(){var e;(e=this.disposable)==null||e.dispose()}getCache(e){return this.fsCache}updateOpenDocuments(e){const t=d.workspace.textDocuments.map(r=>{if(!(r.uri.scheme!==Sn.scheme||!Jr(r.uri,e)))return{uri:r.uri,type:d.FileChangeType.Changed}}).filter(r=>Boolean(r));t.length!==0&&this._onDidChangeFile.fire(t)}watch(){return Mv}async stat(e){const t=await this.azdo.getMetadata(e);if(!t.path)return{type:d.FileType.Directory,mtime:0,ctime:0,size:0};if(t.path in this.pathTypeMap||await this.updateWorkspaceItemMap(t,!0),t.path in this.pathTypeMap)return this.pathTypeMap[t.path]===d.FileType.Directory?{type:d.FileType.Directory,mtime:0,ctime:0,size:0}:{type:d.FileType.File,mtime:0,ctime:0,size:0};throw d.FileSystemError.FileNotFound()}async updateWorkspaceItemMap(e,t){const r=new Array,n=await this.azdo.getRepoItems(e);for(const i of n){const o=i.path.substring(1);if(o!==e.path||t){const s=i.isFolder===!0?d.FileType.Directory:d.FileType.File;this.pathTypeMap[o]=s,r.push([o,s])}}return r}async readDirectory(e){const t=await this.azdo.getMetadata(e);return this.updateWorkspaceItemMap(t,!1)}createDirectory(e){throw d.FileSystemError.NoPermissions()}async readFile(e){return await this.azdo.getFileContent(e)}writeFile(e,t,r){throw d.FileSystemError.NoPermissions()}delete(e,t){throw d.FileSystemError.NoPermissions()}rename(e,t,r){throw d.FileSystemError.NoPermissions()}copy(e,t,r){throw d.FileSystemError.NoPermissions()}async provideFileSearchResults(e,t,r){let n=this.fileSearchCache.get(t.folder.toString(!0));if(n===void 0){const o=await this.azdo.getRepoFileNames(t.folder);if(o===void 0||r.isCancellationRequested)return[];n=[...Kn(o,s=>Ar.prepareSlow(s))],this.fileSearchCache.set(t.folder.toString(!0),n)}if(t.maxResults===void 0||t.maxResults===0||t.maxResults>=n.length)return n.map(s=>d.Uri.joinPath(t.folder,s.target));const i=Ar.go(e.pattern.replace($v,"/"),n,{allowTypo:!0,limit:t.maxResults}).map(o=>d.Uri.joinPath(t.folder,o.target));return Ar.cleanup(),i}async provideTextSearchResults(e,t,r,n){const i=[];if(Ce.get("search.download.enabled"))try{return Xc(this.providerService,this.changeStore,this.tarPit,e,t,r,n)}catch{i.push({text:Bo("index error","Error searching with index, falling back to standard search"),type:d.TextSearchCompleteMessageType.Warning})}i.push({text:Bo("enable index","To improve search accuracy, [enable indexing](command:remoteHub.enableIndexing)"),type:d.TextSearchCompleteMessageType.Information}),(e.isCaseSensitive||e.isRegExp||e.isWordMatch)&&i.push({text:Bo("flags not supported","Search flags are not supported by GitHub search. Enable indexing for full search features."),type:d.TextSearchCompleteMessageType.Warning});const o=await this.azdo.searchCodeQuery(e.pattern,t.folder,{maxResults:t.maxResults,context:{before:t.beforeContext,after:t.afterContext}});if(o.warnings&&o.warnings.forEach(a=>{i.push({text:a,type:d.TextSearchCompleteMessageType.Warning})}),o===void 0)return{limitHit:!0,message:i};let s;for(const a of o.matches)s=d.Uri.joinPath(t.folder,a.path),r.report({uri:s,ranges:a.ranges,preview:{text:a.preview,matches:a.matches}});return{limitHit:!1,message:i}}async fsQuery(e,t,r){const n=`${e.toString()}:${Bv(t)}`;let i=r==null?void 0:r.get(n);return i!==void 0||(i=await this.azdo.queryRepositoryObject(e,t),i===void 0?r==null||r.delete(n):r==null||r.set(n,i)),i}};let el=Sn;el.scheme="azdo";function Bv(e){let t=0;if(e.length===0)return t;let r;const n=e.length;for(let i=0;i<n;i++)r=e.charCodeAt(i),t=(t<<5)-t+r,t|=0;return t}const Nv=/^https:\/\/([^.]+)\.visualstudio\.com(?:\/defaultcollection)?\/([^/]+)?\/?(?:[^/]+)?\/?(?:\/pullrequest\/(?:\d+))?(?:\/commit\/?([^/^?]+))?\/?/i,tl=/^https:\/\/dev\.azure\.com(?:\/defaultcollection)?\/([^/]+)?\/?([^/]+)?\/?(?:_git)?\/?([^/]+)?\/?(?:\/pullrequest\/(?:\d+))?(?:\/commit\/?([^/^?]+))?\/?/i,Ot=(0,P.loadMessageBundle)();class Hv{constructor(t,r){this.providerService=t,this.memento=r}canOpenRemoteUrl(t){const r=Nv.exec(t),n=tl.exec(t);if(r){const[,,,i,,o,,s,,a]=r;switch(i||o||s||a){case"pull":break;case"blob":return Me.File;case"tree":return Me.Branch;case"commit":return Me.Commit;default:return Me.Repository}}else if(n){const[,,,i,,o,,s,,a]=n;switch(i||o||s||a){case"pull":break;case"blob":return Me.File;case"tree":return Me.Branch;case"commit":return Me.Commit;default:return Me.Repository}}}async openWorkspaceForRemoteUrl(t,r=Ge.CurrentWindow){const n=tl.exec(t);if(n){const[,i,o,s,a,l,c,u,p,f,h,g]=n,v=a||c||p||h;let C=l||u||f||g||void 0;if(v==="pull")return this.openWorkspaceForPullRequest(r,i,o,s,C);let R;if(v==="blob"){const D=this.createVirtualUri(Le.baseVirtualWorkspaceUri,{repo:{owner:i,project:o,name:s}});if(R=C,C=void 0,R){const G=(await this.providerService.getBranches(D,{query:R.split("/")[0]})).branches.map(W=>`${W.name}/`).sort((W,ce)=>ce.length-W.length);for(const W of G)if(R.startsWith(W)){C=W.slice(0,-1),R=R.substr(C.length);break}}}return this.openWorkspaceForRepository(r,i,o,s,v,C,R)}}createVirtualUri(t,{repo:r,ref:n,pullRequest:i},o){return t.with({authority:`azdo${n?`+${n}${i?`~${i}`:""}`:""}`,path:`/${r.owner}/${r.project}/${r.name}${o?`${o.startsWith("/")?"":"/"}${o}`:""}`})}getExternalUri(t){const r=`https://dev.azure.com/${t.repo.owner}/${t.repo.project}/_git/${t.repo.name}`;return d.Uri.parse(r)}getProviderRootUri(t){return Sa(t)}getRelativeFilePath(t,r){const[,,,,...n]=Yr(t,r).split("/");return n.join("/")||""}async openWorkspaceForRepository(t,r,n,i,o,s,a){if(o==="pull")return this.openWorkspaceForPullRequest(t,r,n,i,s);const l=this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i},ref:s}),c=await this.providerService.getMetadata(l);await ut(l,c.name,t,a?{memento:this.memento,paths:[a]}:void 0)}async openWorkspaceForPullRequest(t,r,n,i,o){var s,a,l,c;const u=await this.providerService.getPullRequest(this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i}}),o);let p;if(u)if((a=(s=u.refs)==null?void 0:s.head)==null?void 0:a.exists)p=this.providerService.createVirtualUri("azdo",{repo:{owner:u.refs.head.owner,project:u.refs.head.repo,name:u.refs.head.repo},ref:u.refs.head.branch,pullRequest:u.id});else if((c=(l=u.refs)==null?void 0:l.base)==null?void 0:c.exists){const f=Ot("pr source branch missing prompt confirm","Open Respository"),h=Ot("pr source branch missing prompt cancel","Cancel");if(await d.window.showInformationMessage(Ot("pr source branch missing prompt",`Unable to find the source branch for pull request #{0}.

Do you want to open the repository on the target branch instead?`,u.id),f,h)!==f)return;p=this.providerService.createVirtualUri("azdo",{repo:{owner:u.refs.base.owner,project:u.refs.base.owner,name:u.refs.base.repo},ref:u.refs.base.branch,pullRequest:u.id})}else{const f=Ot("pr branches missing prompt confirm","Open Respository"),h=Ot("pr branches missing prompt cancel","Cancel");if(await d.window.showInformationMessage(Ot("pr branches missing prompt",`Unable to find either the source or target branch for pull request #{0}.

Do you want to open the repository on the default branch instead?`,u.id),f,h)!==f)return;p=this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i}})}else{const f=Ot("pr missing prompt confirm","Open Respository"),h=Ot("pr missing prompt cancel","Cancel");if(await d.window.showInformationMessage(Ot("pr missing prompt",`Unable to find pull request.

Do you want to open the repository on the default branch instead?`),f,h)!==f)return;p=this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i}})}await ut(p,`${r}/${i}`,t)}}class tb{dispose(){}}class jv{constructor(t){this.providerService=t,this.providers=[],this.services=new Map,this.disposable=d.Disposable.from(t.onDidChangeRepositories(r=>{for(const n of r.added)this.repositoryOpened(n);for(const n of r.removed)this.repositoryClosed(n)}));for(const r of this.providerService.repositories)this.repositoryOpened(r)}dispose(){this.disposable.dispose()}register(t){const r=this.providers.length;return this.providers.push(t),{dispose:()=>this.providers.splice(r,1)}}async repositoryOpened(t){for(const r of this.providers){const n=await r.handles(this.providerService,t);if(n!==void 0){const i=n();this.services.set(t.uri.toString(),{service:i})}}}repositoryClosed(t){const r=this.services.get(t.uri.toString());r!==void 0&&(r.service.dispose(),this.services.delete(t.uri.toString()))}}/*! (c) Andrea Giammarchi - ISC */var Ti={};try{(function(e,t){if(new e("q=%2B").get("q")!==t||new e({q:t}).get("q")!==t||new e([["q",t]]).get("q")!==t||new e(`q=
`).toString()!=="q=%0A"||new e({q:" &"}).toString()!=="q=+%26"||new e({q:"%zx"}).toString()!=="q=%25zx")throw e;Ti.URLSearchParams=e})(URLSearchParams,"+")}catch(e){(function(t,r,n){"use strict";var i=t.create,o=t.defineProperty,s=/[!'\(\)~]|%20|%00/g,a=/%(?![0-9a-fA-F]{2})/g,l=/\+/g,c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},u={append:function(D,N){g(this._ungap,D,N)},delete:function(D){delete this._ungap[D]},get:function(D){return this.has(D)?this._ungap[D][0]:null},getAll:function(D){return this.has(D)?this._ungap[D].slice(0):[]},has:function(D){return D in this._ungap},set:function(D,N){this._ungap[D]=[r(N)]},forEach:function(D,N){var G=this;for(var W in G._ungap)G._ungap[W].forEach(ce,W);function ce(re){D.call(N,re,r(W),G)}},toJSON:function(){return{}},toString:function(){var D=[];for(var N in this._ungap)for(var G=C(N),W=0,ce=this._ungap[N];W<ce.length;W++)D.push(G+"="+C(ce[W]));return D.join("&")}};for(var p in u)o(f.prototype,p,{configurable:!0,writable:!0,value:u[p]});Ti.URLSearchParams=f;function f(D){var N=i(null);switch(o(this,"_ungap",{value:N}),!0){case!D:break;case typeof D=="string":D.charAt(0)==="?"&&(D=D.slice(1));for(var G=D.split("&"),W=0,ce=G.length;W<ce;W++){var re=G[W],ge=re.indexOf("=");-1<ge?g(N,v(re.slice(0,ge)),v(re.slice(ge+1))):re.length&&g(N,v(re),"")}break;case n(D):for(var W=0,ce=D.length;W<ce;W++){var re=D[W];g(N,re[0],re[1])}break;case"forEach"in D:D.forEach(h,N);break;default:for(var ve in D)g(N,ve,D[ve])}}function h(D,N){g(this,N,D)}function g(D,N,G){var W=n(G)?G.join(","):G;N in D?D[N].push(W):D[N]=[W]}function v(D){return decodeURIComponent(D.replace(a,"%25").replace(l," "))}function C(D){return encodeURIComponent(D).replace(s,R)}function R(D){return c[D]}})(Object,String,Array.isArray)}(function(e){var t=!1;try{t=!!Symbol.iterator}catch(n){}"forEach"in e||(e.forEach=function(i,o){var s=this,a=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(l){!l.length||l in a||(a[l]=s.getAll(l)).forEach(function(c){i.call(o,c,l,s)})})}),"keys"in e||(e.keys=function(){return r(this,function(i,o){this.push(o)})}),"values"in e||(e.values=function(){return r(this,function(i,o){this.push(i)})}),"entries"in e||(e.entries=function(){return r(this,function(i,o){this.push([o,i])})}),t&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var i=this.entries(),o=i.next(),s=o.done,a=[],l=Object.create(null),c,u,p;!s;)p=o.value,u=p[0],a.push(u),u in l||(l[u]=[]),l[u].push(p[1]),o=i.next(),s=o.done;for(a.sort(),c=0;c<a.length;c++)this.delete(a[c]);for(c=0;c<a.length;c++)u=a[c],this.append(u,l[u].shift())});function r(n,i){var o=[];return n.forEach(i,o),t?o[Symbol.iterator]():{next:function(){var s=o.shift();return{done:s===void 0,value:s}}}}(function(n){var i=n.defineProperty,o=n.getOwnPropertyDescriptor,s=function(p){function f(v,C){e.append.call(this,v,C),v=this.toString(),p.set.call(this._usp,v?"?"+v:"")}function h(v){e.delete.call(this,v),v=this.toString(),p.set.call(this._usp,v?"?"+v:"")}function g(v,C){e.set.call(this,v,C),v=this.toString(),p.set.call(this._usp,v?"?"+v:"")}return function(v,C){return v.append=f,v.delete=h,v.set=g,i(v,"_usp",{configurable:!0,writable:!0,value:C})}},a=function(p){return function(f,h){return i(f,"_searchParams",{configurable:!0,writable:!0,value:p(h,f)}),h}},l=function(p){var f=p.append;p.append=e.append,URLSearchParams.call(p,p._usp.search.slice(1)),p.append=f},c=function(p,f){if(!(p instanceof f))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+f.name)},u=function(p){var f=p.prototype,h=o(f,"searchParams"),g=o(f,"href"),v=o(f,"search"),C;!h&&v&&v.set&&(C=a(s(v)),n.defineProperties(f,{href:{get:function(){return g.get.call(this)},set:function(R){var D=this._searchParams;g.set.call(this,R),D&&l(D)}},search:{get:function(){return v.get.call(this)},set:function(R){var D=this._searchParams;v.set.call(this,R),D&&l(D)}},searchParams:{get:function(){return c(this,p),this._searchParams||C(this,new URLSearchParams(this.search.slice(1)))},set:function(R){c(this,p),C(this,R)}}}))};try{u(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&u(URL)}catch(p){}})(Object)})(Ti.URLSearchParams.prototype,Object);const zv=Ti.URLSearchParams;var qv=Ie(4098),kn=Ie.n(qv),rl,We;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(We||(We={}));class Wv{constructor(){this[rl]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var t;return(t=this._head)==null?void 0:t.value}get last(){var t;return(t=this._tail)==null?void 0:t.value}has(t){return this._map.has(t)}get(t,r=We.None){const n=this._map.get(t);if(!!n)return r!==We.None&&this.touch(n,r),n.value}set(t,r,n=We.None){let i=this._map.get(t);if(i)i.value=r,n!==We.None&&this.touch(i,n);else{switch(i={key:t,value:r,next:void 0,previous:void 0},n){case We.None:this.addItemLast(i);break;case We.First:this.addItemFirst(i);break;case We.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return Boolean(this.remove(t))}remove(t){const r=this._map.get(t);if(!!r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){const n=this._state;let i=this._head;for(;i;){if(r?t.bind(r)(i.value,i.key,this):t(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const t=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.key,done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}values(){const t=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.value,done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}entries(){const t=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:[r.key,r.value],done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}[(rl=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{const r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}t.next=void 0,t.previous=void 0,this._state++}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==We.First&&r!==We.Last)){if(r===We.First){if(t===this._head)return;const n=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(r===We.Last){if(t===this._tail)return;const n=t.next,i=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){const t=[];return this.forEach((r,n)=>{t.push([n,r])}),t}fromJSON(t){this.clear();for(const[r,n]of t)this.set(r,n)}}class Vv extends Wv{constructor(t,r=1){super();this._limit=t,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,r=We.AsNew){return super.get(t,r)}peek(t){return super.get(t,We.None)}set(t,r){return super.set(t,r,We.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}var nl;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647})(nl||(nl={}));var Si;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647})(Si||(Si={}));var bt;(function(e){function t(n,i){return n===Number.MAX_VALUE&&(n=Si.MAX_VALUE),i===Number.MAX_VALUE&&(i=Si.MAX_VALUE),{line:n,character:i}}e.create=t;function r(n){var i=n;return B.objectLiteral(i)&&B.uinteger(i.line)&&B.uinteger(i.character)}e.is=r})(bt||(bt={}));var He;(function(e){function t(n,i,o,s){if(B.uinteger(n)&&B.uinteger(i)&&B.uinteger(o)&&B.uinteger(s))return{start:bt.create(n,i),end:bt.create(o,s)};if(bt.is(n)&&bt.is(i))return{start:n,end:i};throw new Error("Range#create called with invalid arguments["+n+", "+i+", "+o+", "+s+"]")}e.create=t;function r(n){var i=n;return B.objectLiteral(i)&&bt.is(i.start)&&bt.is(i.end)}e.is=r})(He||(He={}));var No;(function(e){function t(n,i){return{uri:n,range:i}}e.create=t;function r(n){var i=n;return B.defined(i)&&He.is(i.range)&&(B.string(i.uri)||B.undefined(i.uri))}e.is=r})(No||(No={}));var ki;(function(e){function t(n,i,o,s){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}e.create=t;function r(n){var i=n;return B.defined(i)&&He.is(i.targetRange)&&B.string(i.targetUri)&&(He.is(i.targetSelectionRange)||B.undefined(i.targetSelectionRange))&&(He.is(i.originSelectionRange)||B.undefined(i.originSelectionRange))}e.is=r})(ki||(ki={}));var Ho;(function(e){function t(n,i,o,s){return{red:n,green:i,blue:o,alpha:s}}e.create=t;function r(n){var i=n;return B.numberRange(i.red,0,1)&&B.numberRange(i.green,0,1)&&B.numberRange(i.blue,0,1)&&B.numberRange(i.alpha,0,1)}e.is=r})(Ho||(Ho={}));var il;(function(e){function t(n,i){return{range:n,color:i}}e.create=t;function r(n){var i=n;return He.is(i.range)&&Ho.is(i.color)}e.is=r})(il||(il={}));var ol;(function(e){function t(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}e.create=t;function r(n){var i=n;return B.string(i.label)&&(B.undefined(i.textEdit)||er.is(i))&&(B.undefined(i.additionalTextEdits)||B.typedArray(i.additionalTextEdits,er.is))}e.is=r})(ol||(ol={}));var Cn;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(Cn||(Cn={}));var sl;(function(e){function t(n,i,o,s,a){var l={startLine:n,endLine:i};return B.defined(o)&&(l.startCharacter=o),B.defined(s)&&(l.endCharacter=s),B.defined(a)&&(l.kind=a),l}e.create=t;function r(n){var i=n;return B.uinteger(i.startLine)&&B.uinteger(i.startLine)&&(B.undefined(i.startCharacter)||B.uinteger(i.startCharacter))&&(B.undefined(i.endCharacter)||B.uinteger(i.endCharacter))&&(B.undefined(i.kind)||B.string(i.kind))}e.is=r})(sl||(sl={}));var jo;(function(e){function t(n,i){return{location:n,message:i}}e.create=t;function r(n){var i=n;return B.defined(i)&&No.is(i.location)&&B.string(i.message)}e.is=r})(jo||(jo={}));var Ur;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(Ur||(Ur={}));var Ci;(function(e){e.Unnecessary=1,e.Deprecated=2})(Ci||(Ci={}));var zo;(function(e){function t(r){var n=r;return n!=null&&B.string(n.href)}e.is=t})(zo||(zo={}));var xi;(function(e){function t(n,i,o,s,a,l){var c={range:n,message:i};return B.defined(o)&&(c.severity=o),B.defined(s)&&(c.code=s),B.defined(a)&&(c.source=a),B.defined(l)&&(c.relatedInformation=l),c}e.create=t;function r(n){var i,o=n;return B.defined(o)&&He.is(o.range)&&B.string(o.message)&&(B.number(o.severity)||B.undefined(o.severity))&&(B.integer(o.code)||B.string(o.code)||B.undefined(o.code))&&(B.undefined(o.codeDescription)||B.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(B.string(o.source)||B.undefined(o.source))&&(B.undefined(o.relatedInformation)||B.typedArray(o.relatedInformation,jo.is))}e.is=r})(xi||(xi={}));var xn;(function(e){function t(n,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:n,command:i};return B.defined(o)&&o.length>0&&(a.arguments=o),a}e.create=t;function r(n){var i=n;return B.defined(i)&&B.string(i.title)&&B.string(i.command)}e.is=r})(xn||(xn={}));var er;(function(e){function t(o,s){return{range:o,newText:s}}e.replace=t;function r(o,s){return{range:{start:o,end:o},newText:s}}e.insert=r;function n(o){return{range:o,newText:""}}e.del=n;function i(o){var s=o;return B.objectLiteral(s)&&B.string(s.newText)&&He.is(s.range)}e.is=i})(er||(er={}));var Ir;(function(e){function t(n,i,o){var s={label:n};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}e.create=t;function r(n){var i=n;return i!==void 0&&B.objectLiteral(i)&&B.string(i.label)&&(B.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(B.string(i.description)||i.description===void 0)}e.is=r})(Ir||(Ir={}));var Ve;(function(e){function t(r){var n=r;return typeof n=="string"}e.is=t})(Ve||(Ve={}));var tr;(function(e){function t(o,s,a){return{range:o,newText:s,annotationId:a}}e.replace=t;function r(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}e.insert=r;function n(o,s){return{range:o,newText:"",annotationId:s}}e.del=n;function i(o){var s=o;return er.is(s)&&(Ir.is(s.annotationId)||Ve.is(s.annotationId))}e.is=i})(tr||(tr={}));var An;(function(e){function t(n,i){return{textDocument:n,edits:i}}e.create=t;function r(n){var i=n;return B.defined(i)&&Di.is(i.textDocument)&&Array.isArray(i.edits)}e.is=r})(An||(An={}));var Gr;(function(e){function t(n,i,o){var s={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function r(n){var i=n;return i&&i.kind==="create"&&B.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||B.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||B.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ve.is(i.annotationId))}e.is=r})(Gr||(Gr={}));var Lr;(function(e){function t(n,i,o,s){var a={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}e.create=t;function r(n){var i=n;return i&&i.kind==="rename"&&B.string(i.oldUri)&&B.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||B.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||B.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Ve.is(i.annotationId))}e.is=r})(Lr||(Lr={}));var Mr;(function(e){function t(n,i,o){var s={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function r(n){var i=n;return i&&i.kind==="delete"&&B.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||B.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||B.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Ve.is(i.annotationId))}e.is=r})(Mr||(Mr={}));var qo;(function(e){function t(r){var n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(i){return B.string(i.kind)?Gr.is(i)||Lr.is(i)||Mr.is(i):An.is(i)}))}e.is=t})(qo||(qo={}));var Ai=function(){function e(t,r){this.edits=t,this.changeAnnotations=r}return e.prototype.insert=function(t,r,n){var i,o;if(n===void 0?i=er.insert(t,r):Ve.is(n)?(o=n,i=tr.insert(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=tr.insert(t,r,o)),this.edits.push(i),o!==void 0)return o},e.prototype.replace=function(t,r,n){var i,o;if(n===void 0?i=er.replace(t,r):Ve.is(n)?(o=n,i=tr.replace(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=tr.replace(t,r,o)),this.edits.push(i),o!==void 0)return o},e.prototype.delete=function(t,r){var n,i;if(r===void 0?n=er.del(t):Ve.is(r)?(i=r,n=tr.del(t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=tr.del(t,i)),this.edits.push(n),i!==void 0)return i},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),al=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,r){var n;if(Ve.is(t)?n=t:(n=this.nextId(),r=t),this._annotations[n]!==void 0)throw new Error("Id "+n+" is already in use.");if(r===void 0)throw new Error("No annotation provided for id "+n);return this._annotations[n]=r,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),rb=function(){function e(t){var r=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new al(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(n){if(An.is(n)){var i=new Ai(n.edits,r._changeAnnotations);r._textEditChanges[n.textDocument.uri]=i}})):t.changes&&Object.keys(t.changes).forEach(function(n){var i=new Ai(t.changes[n]);r._textEditChanges[n]=i})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(Di.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r={uri:t.uri,version:t.version},n=this._textEditChanges[r.uri];if(!n){var i=[],o={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(o),n=new Ai(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[t];if(!n){var i=[];this._workspaceEdit.changes[t]=i,n=new Ai(i),this._textEditChanges[t]=n}return n}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new al,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Ir.is(r)||Ve.is(r)?i=r:n=r;var o,s;if(i===void 0?o=Gr.create(t,n):(s=Ve.is(i)?i:this._changeAnnotations.manage(i),o=Gr.create(t,n,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e.prototype.renameFile=function(t,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Ir.is(n)||Ve.is(n)?o=n:i=n;var s,a;if(o===void 0?s=Lr.create(t,r,i):(a=Ve.is(o)?o:this._changeAnnotations.manage(o),s=Lr.create(t,r,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},e.prototype.deleteFile=function(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;Ir.is(r)||Ve.is(r)?i=r:n=r;var o,s;if(i===void 0?o=Mr.create(t,n):(s=Ve.is(i)?i:this._changeAnnotations.manage(i),o=Mr.create(t,n,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e}(),cl;(function(e){function t(n){return{uri:n}}e.create=t;function r(n){var i=n;return B.defined(i)&&B.string(i.uri)}e.is=r})(cl||(cl={}));var ll;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){var i=n;return B.defined(i)&&B.string(i.uri)&&B.integer(i.version)}e.is=r})(ll||(ll={}));var Di;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){var i=n;return B.defined(i)&&B.string(i.uri)&&(i.version===null||B.integer(i.version))}e.is=r})(Di||(Di={}));var ul;(function(e){function t(n,i,o,s){return{uri:n,languageId:i,version:o,text:s}}e.create=t;function r(n){var i=n;return B.defined(i)&&B.string(i.uri)&&B.string(i.languageId)&&B.integer(i.version)&&B.string(i.text)}e.is=r})(ul||(ul={}));var Ut;(function(e){e.PlainText="plaintext",e.Markdown="markdown"})(Ut||(Ut={})),function(e){function t(r){var n=r;return n===e.PlainText||n===e.Markdown}e.is=t}(Ut||(Ut={}));var Wo;(function(e){function t(r){var n=r;return B.objectLiteral(r)&&Ut.is(n.kind)&&B.string(n.value)}e.is=t})(Wo||(Wo={}));var dl;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(dl||(dl={}));var hl;(function(e){e.PlainText=1,e.Snippet=2})(hl||(hl={}));var fl;(function(e){e.Deprecated=1})(fl||(fl={}));var pl;(function(e){function t(n,i,o){return{newText:n,insert:i,replace:o}}e.create=t;function r(n){var i=n;return i&&B.string(i.newText)&&He.is(i.insert)&&He.is(i.replace)}e.is=r})(pl||(pl={}));var gl;(function(e){e.asIs=1,e.adjustIndentation=2})(gl||(gl={}));var ml;(function(e){function t(r){return{label:r}}e.create=t})(ml||(ml={}));var vl;(function(e){function t(r,n){return{items:r||[],isIncomplete:!!n}}e.create=t})(vl||(vl={}));var Ri;(function(e){function t(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(n){var i=n;return B.string(i)||B.objectLiteral(i)&&B.string(i.language)&&B.string(i.value)}e.is=r})(Ri||(Ri={}));var wl;(function(e){function t(r){var n=r;return!!n&&B.objectLiteral(n)&&(Wo.is(n.contents)||Ri.is(n.contents)||B.typedArray(n.contents,Ri.is))&&(r.range===void 0||He.is(r.range))}e.is=t})(wl||(wl={}));var _l;(function(e){function t(r,n){return n?{label:r,documentation:n}:{label:r}}e.create=t})(_l||(_l={}));var bl;(function(e){function t(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s={label:r};return B.defined(n)&&(s.documentation=n),B.defined(i)?s.parameters=i:s.parameters=[],s}e.create=t})(bl||(bl={}));var Dn;(function(e){e.Text=1,e.Read=2,e.Write=3})(Dn||(Dn={}));var yl;(function(e){function t(r,n){var i={range:r};return B.number(n)&&(i.kind=n),i}e.create=t})(yl||(yl={}));var Vo;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Vo||(Vo={}));var Zo;(function(e){e.Deprecated=1})(Zo||(Zo={}));var El;(function(e){function t(r,n,i,o,s){var a={name:r,kind:n,location:{uri:o,range:i}};return s&&(a.containerName=s),a}e.create=t})(El||(El={}));var Tl;(function(e){function t(n,i,o,s,a,l){var c={name:n,detail:i,kind:o,range:s,selectionRange:a};return l!==void 0&&(c.children=l),c}e.create=t;function r(n){var i=n;return i&&B.string(i.name)&&B.number(i.kind)&&He.is(i.range)&&He.is(i.selectionRange)&&(i.detail===void 0||B.string(i.detail))&&(i.deprecated===void 0||B.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}e.is=r})(Tl||(Tl={}));var yt;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(yt||(yt={}));var Sl;(function(e){function t(n,i){var o={diagnostics:n};return i!=null&&(o.only=i),o}e.create=t;function r(n){var i=n;return B.defined(i)&&B.typedArray(i.diagnostics,xi.is)&&(i.only===void 0||B.typedArray(i.only,B.string))}e.is=r})(Sl||(Sl={}));var kl;(function(e){function t(n,i,o){var s={title:n},a=!0;return typeof i=="string"?(a=!1,s.kind=i):xn.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}e.create=t;function r(n){var i=n;return i&&B.string(i.title)&&(i.diagnostics===void 0||B.typedArray(i.diagnostics,xi.is))&&(i.kind===void 0||B.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||xn.is(i.command))&&(i.isPreferred===void 0||B.boolean(i.isPreferred))&&(i.edit===void 0||qo.is(i.edit))}e.is=r})(kl||(kl={}));var Cl;(function(e){function t(n,i){var o={range:n};return B.defined(i)&&(o.data=i),o}e.create=t;function r(n){var i=n;return B.defined(i)&&He.is(i.range)&&(B.undefined(i.command)||xn.is(i.command))}e.is=r})(Cl||(Cl={}));var xl;(function(e){function t(n,i){return{tabSize:n,insertSpaces:i}}e.create=t;function r(n){var i=n;return B.defined(i)&&B.uinteger(i.tabSize)&&B.boolean(i.insertSpaces)}e.is=r})(xl||(xl={}));var Al;(function(e){function t(n,i,o){return{range:n,target:i,data:o}}e.create=t;function r(n){var i=n;return B.defined(i)&&He.is(i.range)&&(B.undefined(i.target)||B.string(i.target))}e.is=r})(Al||(Al={}));var Dl;(function(e){function t(n,i){return{range:n,parent:i}}e.create=t;function r(n){var i=n;return i!==void 0&&He.is(i.range)&&(i.parent===void 0||e.is(i.parent))}e.is=r})(Dl||(Dl={}));var nb=null,Rl;(function(e){function t(o,s,a,l){return new Zv(o,s,a,l)}e.create=t;function r(o){var s=o;return!!(B.defined(s)&&B.string(s.uri)&&(B.undefined(s.languageId)||B.string(s.languageId))&&B.uinteger(s.lineCount)&&B.func(s.getText)&&B.func(s.positionAt)&&B.func(s.offsetAt))}e.is=r;function n(o,s){for(var a=o.getText(),l=i(s,function(g,v){var C=g.range.start.line-v.range.start.line;return C===0?g.range.start.character-v.range.start.character:C}),c=a.length,u=l.length-1;u>=0;u--){var p=l[u],f=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=c)a=a.substring(0,f)+p.newText+a.substring(h,a.length);else throw new Error("Overlapping edit");c=f}return a}e.applyEdits=n;function i(o,s){if(o.length<=1)return o;var a=o.length/2|0,l=o.slice(0,a),c=o.slice(a);i(l,s),i(c,s);for(var u=0,p=0,f=0;u<l.length&&p<c.length;){var h=s(l[u],c[p]);h<=0?o[f++]=l[u++]:o[f++]=c[p++]}for(;u<l.length;)o[f++]=l[u++];for(;p<c.length;)o[f++]=c[p++];return o}})(Rl||(Rl={}));var Zv=function(){function e(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content},e.prototype.update=function(t,r){this._content=t.text,this._version=r,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],r=this._content,n=!0,i=0;i<r.length;i++){n&&(t.push(i),n=!1);var o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&t.push(r.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return bt.create(0,t);for(;n<i;){var o=Math.floor((n+i)/2);r[o]>t?i=o:n=o+1}var s=n-1;return bt.create(s,t-r[s])},e.prototype.offsetAt=function(t){var r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;var n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),B;(function(e){var t=Object.prototype.toString;function r(h){return typeof h!="undefined"}e.defined=r;function n(h){return typeof h=="undefined"}e.undefined=n;function i(h){return h===!0||h===!1}e.boolean=i;function o(h){return t.call(h)==="[object String]"}e.string=o;function s(h){return t.call(h)==="[object Number]"}e.number=s;function a(h,g,v){return t.call(h)==="[object Number]"&&g<=h&&h<=v}e.numberRange=a;function l(h){return t.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}e.integer=l;function c(h){return t.call(h)==="[object Number]"&&0<=h&&h<=2147483647}e.uinteger=c;function u(h){return t.call(h)==="[object Function]"}e.func=u;function p(h){return h!==null&&typeof h=="object"}e.objectLiteral=p;function f(h,g){return Array.isArray(h)&&h.every(g)}e.typedArray=f})(B||(B={}));var Rn;(function(e){function t(n){return typeof n=="string"||n instanceof String}e.string=t;function r(n){return typeof n=="number"||n instanceof Number}e.number=r})(Rn||(Rn={}));var Ko;(function(e){function t(r){const n=r;return n!=null&&(Rn.number(n.value)||Rn.string(n.value))&&Rn.string(n.target)}e.is=t})(Ko||(Ko={}));class Kv extends d.Diagnostic{constructor(t,r,n,i){super(t,r,n);this.data=i,this.hasDiagnosticCode=!1}}var Et;(function(e){const t=Object.prototype.toString;function r(u){return typeof u!="undefined"}e.defined=r;function n(u){return u===!0||u===!1}e.boolean=n;function i(u){return t.call(u)==="[object String]"}e.string=i;function o(u){return t.call(u)==="[object Number]"}e.number=o;function s(u){return u!==null&&typeof u=="object"}e.objectLiteral=s;function a(u){return Array.isArray(u)}e.array=a;function l(u){return a(u)&&u.every(p=>i(p))}e.stringArray=l;function c(u,p){return Array.isArray(u)&&u.every(p)}e.typedArray=c})(Et||(Et={}));var Pi;(function(e){function t(r){const n=r;return n&&Et.string(n.language)&&Et.string(n.value)}e.is=t})(Pi||(Pi={}));function Qv(e){const t=b=>d.Uri.parse(b),r=e!=null?e:t;function n(b){return r(b)}function i(b){return b.map(o)}function o(b){const K=new Kv(p(b.range),b.message,h(b.severity),b.data);return b.code!==void 0&&(zo.is(b.codeDescription)?K.code={value:b.code,target:n(b.codeDescription.href)}:Ko.is(b.code)?(K.hasDiagnosticCode=!0,K.code={value:b.code.value,target:n(b.code.target)}):K.code=b.code),b.source&&(K.source=b.source),b.relatedInformation&&(K.relatedInformation=s(b.relatedInformation)),Array.isArray(b.tags)&&(K.tags=l(b.tags)),K}function s(b){return b.map(a)}function a(b){return new d.DiagnosticRelatedInformation(ge(b.location),b.message)}function l(b){if(!b)return;const K=[];for(const be of b){const je=c(be);je!==void 0&&K.push(je)}return K.length>0?K:void 0}function c(b){switch(b){case Ci.Unnecessary:return d.DiagnosticTag.Unnecessary;case Ci.Deprecated:return d.DiagnosticTag.Deprecated;default:return}}function u(b){if(!!b)return new d.Position(b.line,b.character)}function p(b){if(!!b)return new d.Range(u(b.start),u(b.end))}function f(b){return b.map(K=>p(K))}function h(b){if(b==null)return d.DiagnosticSeverity.Error;switch(b){case Ur.Error:return d.DiagnosticSeverity.Error;case Ur.Warning:return d.DiagnosticSeverity.Warning;case Ur.Information:return d.DiagnosticSeverity.Information;case Ur.Hint:return d.DiagnosticSeverity.Hint}return d.DiagnosticSeverity.Error}function g(b){if(Et.string(b))return new d.MarkdownString(b);if(Pi.is(b))return new d.MarkdownString().appendCodeblock(b.value,b.language);if(Array.isArray(b)){const be=[];for(const je of b){const Gn=new d.MarkdownString;Pi.is(je)?Gn.appendCodeblock(je.value,je.language):Gn.appendMarkdown(je),be.push(Gn)}return be}let K;switch(b.kind){case Ut.Markdown:return new d.MarkdownString(b.value);case Ut.PlainText:return K=new d.MarkdownString,K.appendText(b.value),K;default:return K=new d.MarkdownString,K.appendText(`Unsupported Markup content received. Kind is: ${b.kind}`),K}}function v(b){if(Et.string(b))return b;switch(b.kind){case Ut.Markdown:return new d.MarkdownString(b.value);case Ut.PlainText:return b.value;default:return`Unsupported Markup content received. Kind is: ${b.kind}`}}function C(b){if(!!b)return new d.Hover(g(b.contents),p(b.range))}function R(b){if(!!b)return new d.TextEdit(p(b.range),b.newText)}function D(b){if(!!b)return b.map(R)}function N(b){if(!b)return;const K=new d.SignatureHelp;return Et.number(b.activeSignature)?K.activeSignature=b.activeSignature:K.activeSignature=0,Et.number(b.activeParameter)?K.activeParameter=b.activeParameter:K.activeParameter=0,b.signatures&&(K.signatures=G(b.signatures)),K}function G(b){return b.map(W)}function W(b){const K=new d.SignatureInformation(b.label);return b.documentation!==void 0&&(K.documentation=v(b.documentation)),b.parameters!==void 0&&(K.parameters=ce(b.parameters)),b.activeParameter!==void 0&&(K.activeParameter=b.activeParameter),K}function ce(b){return b.map(re)}function re(b){const K=new d.ParameterInformation(b.label);return b.documentation&&(K.documentation=v(b.documentation)),K}function ge(b){if(!!b)return new d.Location(r(b.uri),p(b.range))}function ve(b){if(!!b)return Ye(b)}function le(b){if(!!b)return Ye(b)}function de(b){if(!b)return;const K={targetUri:r(b.targetUri),targetRange:p(b.targetSelectionRange),originSelectionRange:p(b.originSelectionRange),targetSelectionRange:p(b.targetSelectionRange)};if(!K.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return K}function Ye(b){if(!!b)return Et.array(b)?b.length===0?[]:ki.is(b[0])?b.map(je=>de(je)):b.map(be=>ge(be)):ki.is(b)?[de(b)]:ge(b)}function nt(b){if(!!b)return b.map(K=>ge(K))}function it(b){if(!!b)return b.map(Mt)}function Mt(b){const K=new d.DocumentHighlight(p(b.range));return Et.number(b.kind)&&(K.kind=Je(b.kind)),K}function Je(b){switch(b){case Dn.Text:return d.DocumentHighlightKind.Text;case Dn.Read:return d.DocumentHighlightKind.Read;case Dn.Write:return d.DocumentHighlightKind.Write}return d.DocumentHighlightKind.Text}function dt(b,K){if(!!b)return b.map(be=>au(be,K))}function ht(b){return b<=Vo.TypeParameter?b-1:d.SymbolKind.Property}function zr(b){switch(b){case Zo.Deprecated:return d.SymbolTag.Deprecated;default:return}}function Mi(b){if(b==null)return;const K=[];for(const be of b){const je=zr(be);je!==void 0&&K.push(je)}return K.length===0?void 0:K}function au(b,K){const be=new d.SymbolInformation(b.name,ht(b.kind),p(b.location.range),b.location.uri?r(b.location.uri):K);return cu(be,b),b.containerName&&(be.containerName=b.containerName),be}function g_(b){if(b!=null)return b.map(cs)}function cs(b){var K;const be=new d.DocumentSymbol(b.name,(K=b.detail)!=null?K:"",ht(b.kind),p(b.range),p(b.selectionRange));if(cu(be,b),b.children!==void 0&&b.children.length>0){const je=[];for(const Gn of b.children)je.push(cs(Gn));be.children=je}return be}function cu(b,K){b.tags=Mi(K.tags),K.deprecated&&(b.tags?b.tags.includes(d.SymbolTag.Deprecated)||(b.tags=b.tags.concat(d.SymbolTag.Deprecated)):b.tags=[d.SymbolTag.Deprecated])}function ls(b){const K={title:b.title,command:b.command};return b.arguments&&(K.arguments=b.arguments),K}function m_(b){if(!!b)return b.map(ls)}const $t=new Map;$t.set(yt.Empty,d.CodeActionKind.Empty),$t.set(yt.QuickFix,d.CodeActionKind.QuickFix),$t.set(yt.Refactor,d.CodeActionKind.Refactor),$t.set(yt.RefactorExtract,d.CodeActionKind.RefactorExtract),$t.set(yt.RefactorInline,d.CodeActionKind.RefactorInline),$t.set(yt.RefactorRewrite,d.CodeActionKind.RefactorRewrite),$t.set(yt.Source,d.CodeActionKind.Source),$t.set(yt.SourceOrganizeImports,d.CodeActionKind.SourceOrganizeImports);function us(b){if(b==null)return;let K=$t.get(b);if(K)return K;const be=b.split(".");K=d.CodeActionKind.Empty;for(const je of be)K=K.append(je);return K}function v_(b){if(b!=null)return b.map(K=>us(K))}function w_(b){if(b==null)return;const K=new d.CodeAction(b.title);return b.kind!==void 0&&(K.kind=us(b.kind)),b.diagnostics&&(K.diagnostics=i(b.diagnostics)),b.edit&&(K.edit=lu(b.edit)),b.command&&(K.command=ls(b.command)),b.isPreferred!==void 0&&(K.isPreferred=b.isPreferred),K}function lu(b){if(!b)return;const K=new d.WorkspaceEdit;return b.documentChanges?b.documentChanges.forEach(be=>{if(Gr.is(be))K.createFile(r(be.uri),be.options);else if(Lr.is(be))K.renameFile(r(be.oldUri),r(be.newUri),be.options);else if(Mr.is(be))K.deleteFile(r(be.uri),be.options);else if(An.is(be))K.set(r(be.textDocument.uri),D(be.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(be,void 0,4)}`)}):b.changes&&Object.keys(b.changes).forEach(be=>{K.set(r(be),D(b.changes[be]))}),K}function uu(b){return new d.Color(b.red,b.green,b.blue,b.alpha)}function du(b){return new d.ColorInformation(p(b.range),uu(b.color))}function __(b){if(Array.isArray(b))return b.map(du)}function hu(b){const K=new d.ColorPresentation(b.label);return K.additionalTextEdits=D(b.additionalTextEdits),b.textEdit&&(K.textEdit=R(b.textEdit)),K}function b_(b){if(Array.isArray(b))return b.map(hu)}function fu(b){if(b)switch(b){case Cn.Comment:return d.FoldingRangeKind.Comment;case Cn.Imports:return d.FoldingRangeKind.Imports;case Cn.Region:return d.FoldingRangeKind.Region}}function pu(b){return new d.FoldingRange(b.startLine,b.endLine,fu(b.kind))}function y_(b){if(Array.isArray(b))return b.map(pu)}function ds(b){return new d.SelectionRange(p(b.range),b.parent?ds(b.parent):void 0)}function E_(b){if(!Array.isArray(b))return[];const K=[];for(const be of b)K.push(ds(be));return K}return{asUri:n,asDiagnostics:i,asDiagnostic:o,asRange:p,asRanges:f,asPosition:u,asDiagnosticSeverity:h,asDiagnosticTag:c,asHover:C,asTextEdit:R,asTextEdits:D,asSignatureHelp:N,asSignatureInformations:G,asSignatureInformation:W,asParameterInformations:ce,asParameterInformation:re,asDeclarationResult:ve,asDefinitionResult:le,asLocation:ge,asReferences:nt,asDocumentHighlights:it,asDocumentHighlight:Mt,asDocumentHighlightKind:Je,asSymbolKind:ht,asSymbolTag:zr,asSymbolTags:Mi,asSymbolInformations:dt,asSymbolInformation:au,asDocumentSymbols:g_,asDocumentSymbol:cs,asCommand:ls,asCommands:m_,asCodeAction:w_,asCodeActionKind:us,asCodeActionKinds:v_,asWorkspaceEdit:lu,asFoldingRangeKind:fu,asFoldingRange:pu,asFoldingRanges:y_,asColor:uu,asColorInformation:du,asColorInformations:__,asColorPresentation:hu,asColorPresentations:b_,asSelectionRange:ds,asSelectionRanges:E_}}var Tt;(function(e){function t(r=!1){return{hoverProvider:r,declarationProvider:r,definitionProvider:r,typeDefinitionProvider:r,referencesProvider:r,documentSymbolProvider:r,foldingRangeProvider:r,diagnosticProvider:r}}e.create=t})(Tt||(Tt={}));var St;(function(e){const t="v0.1",r="https://prod.richnav.vsengsaas.visualstudio.com/api";async function n(v,C){const R=await kn()(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(R.status===200)return R.json()}async function i(v,C){return(await kn()(v,{method:"Post",body:C})).json()}function o(v,C){return`${r}/${t}/HttpLanguageService/${v}/${C}`}async function s(v){const C=await kn()(`${r}/${t}/WorkspaceSnapshot?commitId=${v}`);if(C.ok)return C.json()}e.getWorkspaceSnapshot=s;async function a(v){const C=new zv;C.append("uriString",v.toString(!0));const R=await i(`${r}/${t}/WorkspaceSnapshot/latest`,C);if(R!==void 0)return{workspaceId:R.WorkspaceId,snapshotId:R.SnapshotId,commitId:R.commitId}}e.getLatestWorkspaceSnapshot=a;async function l(v,C){return n(o(v,"textDocument/capabilities"),C)}e.capabilities=l;async function c(v,C){return n(o(v,"textDocument/hover"),C)}e.provideHover=c;async function u(v,C){return n(o(v,"textDocument/definition"),C)}e.provideDefinition=u;async function p(v,C){return n(o(v,"textDocument/declaration"),C)}e.provideDeclaration=p;async function f(v,C){return n(o(v,"textDocument/typeDefinition"),C)}e.provideTypeDefinition=f;async function h(v,C){return n(o(v,"textDocument/references"),C)}e.provideReferences=h;async function g(v,C){return n(o(v,"textDocument/foldingRange"),C)}e.providerFoldingRanges=g})(St||(St={}));class Xv{async handles(t,r){const n=await t.getMetadata(r.uri),i=await St.getWorkspaceSnapshot(n.HEAD.sha);if(i!==void 0)return()=>new Fi(t,r,i)}}const kt=class{constructor(e,t,r){this.providerService=e,this.repository=t,this.workspaceSnapshot=r,this.metadata=this.providerService.getMetadata(this.repository.uri),this.converter=new Promise((n,i)=>{const o=`vsck://${r.workspaceId}/${this.workspaceSnapshot.snapshotId}/source/`;this.metadata.then(s=>{n(Qv(a=>{const l=d.Uri.parse(a);if(s===void 0)return l;let c=l.path;l.toString(!0).startsWith(o)&&(c=l.toString(!0).substr(o.length));try{return this.repository.createRelativeUri(c)}catch(u){return l}}))},i)}),this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new Vv(2048),d.workspace.onDidOpenTextDocument(async n=>{const i=t.uri;if(!n.uri.toString().startsWith(i.toString()))return;const o=n.uri.toString();if(this.pendingCapabilitiesRequests.has(o))return;const s=await this.getSha();let a=this.capabilitiesCache.get(o);if(a===null)return;if(a===void 0){const f=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(o,f),a=await f,this.pendingCapabilitiesRequests.delete(o),this.capabilitiesCache.set(o,a===void 0?null:a)}if(a===void 0||!d.workspace.textDocuments.some(f=>f===n))return;const l=n.languageId,u=[{scheme:this.repository.uri.scheme,pattern:n.uri.fsPath,language:n.languageId,exclusive:!0}],p=[];kt.registerCapability(l,"hoverProvider",a)&&p.push(d.languages.registerHoverProvider(u,{provideHover:async(f,h)=>(await this.converter).asHover(await St.provideHover(s,this.createTextDocumentPositionParams(f.uri,h)))})),kt.registerCapability(l,"definitionProvider",a)&&p.push(d.languages.registerDefinitionProvider(u,{provideDefinition:async(f,h)=>(await this.converter).asDefinitionResult(await St.provideDefinition(s,this.createTextDocumentPositionParams(f.uri,h)))})),kt.registerCapability(l,"declarationProvider",a)&&p.push(d.languages.registerDeclarationProvider(u,{provideDeclaration:async(f,h)=>(await this.converter).asDeclarationResult(await St.provideDeclaration(s,this.createTextDocumentPositionParams(f.uri,h)))})),kt.registerCapability(l,"typeDefinitionProvider",a)&&p.push(d.languages.registerTypeDefinitionProvider(u,{provideTypeDefinition:async(f,h)=>(await this.converter).asDefinitionResult(await St.provideDeclaration(s,this.createTextDocumentPositionParams(f.uri,h)))})),kt.registerCapability(l,"referencesProvider",a)&&p.push(d.languages.registerReferenceProvider(u,{provideReferences:async(f,h,g)=>{const v={position:{line:h.line,character:h.character},textDocument:{uri:this.createDocumentUri(f.uri).toString(!0)},context:{includeDeclaration:g.includeDeclaration}};return(await this.converter).asReferences(await St.provideReferences(s,v))}})),kt.registerCapability(l,"foldingRangeProvider",a)&&p.push(d.languages.registerFoldingRangeProvider(u,{provideFoldingRanges:async f=>(await this.converter).asFoldingRanges(await St.providerFoldingRanges(s,this.createTextDocumentParams(f.uri)))})),this.registeredFeatures.set(n.uri.toString(),d.Disposable.from(...p)),this.updateStatusBarItem()}),d.workspace.onDidCloseTextDocument(n=>{const i=n.uri.toString(),o=this.registeredFeatures.get(i);o!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),o.dispose()),this.pendingCapabilitiesRequests.delete(i)}),d.window.onDidChangeActiveTextEditor(()=>{this.updateStatusBarItem()})}static registerCapability(e,t,r){var n;const i=this.disabledCapabilities.get(e);if(i==null?void 0:i[t])return!1;const o=this.localCapabilities.get(e);return(o==null?void 0:o[t])?!1:(n=r[t])!=null?n:!1}dispose(){for(const e of this.registeredFeatures.values())e.dispose();this.registeredFeatures.clear()}async updateStatusBarItem(){const e=d.window.activeTextEditor;if(e===void 0){kt.statusBarItem.hide();return}const t=e.document.uri.toString(),r=this.pendingCapabilitiesRequests.get(t);r!==void 0&&(await r,e!==d.window.activeTextEditor)||(this.registeredFeatures.has(t)?kt.statusBarItem.show():kt.statusBarItem.hide())}async capabilities(e){var t;const r=await this.getSha();return(t=await St.capabilities(r,this.createTextDocumentParams(e)))!=null?t:void 0}provideDocumentSymbols(){return Promise.resolve([])}createTextDocumentParams(e){return{textDocument:{uri:this.createDocumentUri(e).toString(!0)}}}createTextDocumentPositionParams(e,t){return{position:{line:t.line,character:t.character},textDocument:{uri:this.createDocumentUri(e).toString(!0)}}}createDocumentUri(e){const t=this.repository.uri.toString(!0),r=e.toString(!0);return d.Uri.file(r.substr(t.length))}async getSha(){return(await this.metadata).HEAD.sha}};let Fi=kt;Fi.localCapabilities=new Map([["javascript",Object.assign(Tt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(Tt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(Tt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(Tt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),Fi.disabledCapabilities=new Map([["javascript",Object.assign(Tt.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(Tt.create(),{declarationProvider:!0})],["typescript",Object.assign(Tt.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(Tt.create(),{declarationProvider:!0})]]),Fi.statusBarItem=function(){const e=d.window.createStatusBarItem(d.StatusBarAlignment.Right);return e.text="Indexed",e.tooltip=["The source file is indexed and provides","enhanced code comprehension features","like Go to Declaration and Find all","references."].join(`
`),e.hide(),e}();class Yv{constructor(t,r){this.providerService=t,this.metadataStore=r}getProvider(t){const r=this.providerService.getProvider(t);return r!==void 0?{id:r.id,name:r.name}:void 0}getProviderUri(t){return this.providerService.getProviderUri(t)}getProviderRootUri(t){return this.providerService.getProviderRootUri(t)}isProviderUri(t,r){return t.scheme!==Le.scheme&&t.scheme===this.providerService.getProviderScheme(t)&&(!r||t.scheme===r)}getVirtualUri(t){return this.providerService.getVirtualUri(t)}getVirtualWorkspaceUri(t){return this.providerService.getVirtualWorkspaceUri(t)}}const Jv={dispose:()=>{}},ew=new TextEncoder;class tw{constructor(t,r,n){this.providerService=t,this.changeStore=n,this._onDidChangeFile=new d.EventEmitter,this.disposable=d.Disposable.from(d.workspace.registerFileSystemProvider(Le.scheme,this,{isCaseSensitive:!0}),d.workspace.registerFileSearchProvider(Le.scheme,this),d.workspace.registerTextSearchProvider(Le.scheme,this),n.onDidChange(i=>{this._onDidChangeFile.fire(i.map(o=>{switch(o.type){case ye.Created:return{type:d.FileChangeType.Created,uri:o.uri};case ye.Changed:return{type:d.FileChangeType.Changed,uri:o.uri};case ye.Deleted:return{type:d.FileChangeType.Deleted,uri:o.uri}}}))}),r.onDidChange(i=>this.updateOpenDocuments(i)))}get onDidChangeFile(){return this._onDidChangeFile.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}updateOpenDocuments(t){const r=d.workspace.textDocuments.map(n=>{if(!(n.uri.scheme!==Le.scheme||!Jr(n.uri,t)))return{uri:n.uri,type:d.FileChangeType.Changed}}).filter(n=>Boolean(n));r.push({type:d.FileChangeType.Changed,uri:t}),this._onDidChangeFile.fire(r)}watch(t,r){return Jv}async stat(t){let r=this.changeStore.getStat(t);return r!==void 0||(r=await this.providerService.stat(this.providerService.getProviderUri(t))),r}async readDirectory(t){let r=await this.providerService.readDirectory(this.providerService.getProviderUri(t));return r=this.changeStore.updateDirectoryEntries(t,r),r}async createDirectory(t){ue.log("createDirectory",t),await this.changeStore.onDirectoryCreated(t)}async readFile(t){const r=this.changeStore.getContent(t);return r!==void 0?ew.encode(r):await this.providerService.readFile(this.providerService.getProviderUri(t))}async writeFile(t,r,n){ue.log("writeFile",t,n);let i;try{if(i=await this.stat(t),!n.overwrite)throw d.FileSystemError.FileExists()}catch(o){if(o instanceof d.FileSystemError&&o.code==="FileNotFound"){if(!n.create)throw d.FileSystemError.FileNotFound()}else throw o}i===void 0?await this.changeStore.onFileCreated(t,r):await this.changeStore.onFileChanged(t,r,()=>this.providerService.readFile(this.providerService.getProviderUri(t)))}async delete(t,r){switch(ue.log("delete",t,r),(await this.stat(t)).type){case d.FileType.File:await this.changeStore.onFileDeleted(t);break;case d.FileType.Directory:{await this.deleteDirectory(t,r);break}default:throw d.FileSystemError.NoPermissions()}}async deleteDirectory(t,r){const n=await this.readDirectory(t);if(n.length!==0){if(!r.recursive&&n.some(([,i])=>i===d.FileType.Directory))throw d.FileSystemError.NoPermissions();for(const[i,o]of n)o===d.FileType.Directory?await this.deleteDirectory(d.Uri.joinPath(t,i),r):await this.changeStore.onFileDeleted(d.Uri.joinPath(t,i))}await this.changeStore.onDirectoryDeleted(t)}async rename(t,r,n){switch(ue.log("rename",t,r,n),(await this.stat(t)).type){case d.FileType.File:{const o=await this.readFile(t);await this.writeFile(r,o,{create:!0,overwrite:n.overwrite}),await this.delete(t,{recursive:!1});break}case d.FileType.Directory:{await this.renameDirectory(t,r,n);break}default:throw d.FileSystemError.NoPermissions()}}async renameDirectory(t,r,n){ue.log("renameDirectory",t,r,n),await this.copyDirectory(t,r,n),await this.delete(t,{recursive:!0})}async copy(t,r,n){switch(ue.log("copy",t,r,n),(await this.stat(t)).type){case d.FileType.File:{const o=await this.readFile(t);await this.writeFile(r,o,{create:!0,overwrite:n.overwrite});break}case d.FileType.Directory:{await this.copyDirectory(t,r,n);break}default:throw d.FileSystemError.NoPermissions()}}async copyDirectory(t,r,n){if(ue.log("copyDirectory",t,r,n),await this.exists(r))throw d.FileSystemError.FileExists();await this.createDirectory(r);const i=await this.readDirectory(t);for(const[o,s]of i)s===d.FileType.Directory?await this.copyDirectory(d.Uri.joinPath(t,o),d.Uri.joinPath(r,o),n):await this.copy(d.Uri.joinPath(t,o),d.Uri.joinPath(r,o),n)}async exists(t){try{return await this.stat(t),!0}catch(r){if(r instanceof d.FileSystemError&&r.code==="FileNotFound")return!1;throw r}}provideFileSearchResults(t,r,n){return this.providerService.provideFileSearchResults(t,{...r,folder:this.providerService.getProviderUri(r.folder)},n)}provideTextSearchResults(t,r,n,i){return this.providerService.provideTextSearchResults(t,{...r,folder:this.providerService.getProviderUri(r.folder)},{report:o=>n.report({...o,uri:this.providerService.getVirtualUri(o.uri)})},i)}}function rw(e){const t=globalThis.atob(e),r=t.length,n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=t.charCodeAt(i);return n}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Pl(e){return Object.prototype.toString.call(e)==="[object Object]"}function Fl(e){var t,r;return Pl(e)===!1?!1:(t=e.constructor,t===void 0?!0:(r=t.prototype,!(Pl(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function Oi(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function nw(e){return e?Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}):{}}function Ol(e,t){const r=Object.assign({},e);return Object.keys(t).forEach(n=>{Fl(t[n])?n in e?r[n]=Ol(e[n],t[n]):Object.assign(r,{[n]:t[n]}):Object.assign(r,{[n]:t[n]})}),r}function Ul(e){for(const t in e)e[t]===void 0&&delete e[t];return e}function Qo(e,t,r){if(typeof t=="string"){let[i,o]=t.split(" ");r=Object.assign(o?{method:i,url:o}:{url:i},r)}else r=Object.assign({},t);r.headers=nw(r.headers),Ul(r),Ul(r.headers);const n=Ol(e||{},r);return e&&e.mediaType.previews.length&&(n.mediaType.previews=e.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function iw(e,t){const r=/\?/.test(e)?"&":"?",n=Object.keys(t);return n.length===0?e:e+r+n.map(i=>i==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(t[i])}`).join("&")}const ow=/\{[^}]+\}/g;function sw(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function aw(e){const t=e.match(ow);return t?t.map(sw).reduce((r,n)=>r.concat(n),[]):[]}function Il(e,t){return Object.keys(e).filter(r=>!t.includes(r)).reduce((r,n)=>(r[n]=e[n],r),{})}function Gl(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function $r(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function Pn(e,t,r){return t=e==="+"||e==="#"?Gl(t):$r(t),r?$r(r)+"="+t:t}function Br(e){return e!=null}function Xo(e){return e===";"||e==="&"||e==="?"}function cw(e,t,r,n){var i=e[r],o=[];if(Br(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),o.push(Pn(t,i,Xo(t)?r:""));else if(n==="*")Array.isArray(i)?i.filter(Br).forEach(function(s){o.push(Pn(t,s,Xo(t)?r:""))}):Object.keys(i).forEach(function(s){Br(i[s])&&o.push(Pn(t,i[s],s))});else{const s=[];Array.isArray(i)?i.filter(Br).forEach(function(a){s.push(Pn(t,a))}):Object.keys(i).forEach(function(a){Br(i[a])&&(s.push($r(a)),s.push(Pn(t,i[a].toString())))}),Xo(t)?o.push($r(r)+"="+s.join(",")):s.length!==0&&o.push(s.join(","))}else t===";"?Br(i)&&o.push($r(r)):i===""&&(t==="&"||t==="?")?o.push($r(r)+"="):i===""&&o.push("");return o}function lw(e){return{expand:uw.bind(null,e)}}function uw(e,t){var r=["+","#",".","/",";","?","&"];return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,o){if(i){let a="";const l=[];if(r.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(c){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(cw(t,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var s=",";return a==="?"?s="&":a!=="#"&&(s=a),(l.length!==0?a:"")+l.join(s)}else return l.join(",")}else return Gl(o)})}function Ll(e){let t=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},e.headers),i,o=Il(e,["method","baseUrl","url","headers","request","mediaType"]);const s=aw(r);r=lw(r).expand(o),/^http/.test(r)||(r=e.baseUrl+r);const a=Object.keys(e).filter(u=>s.includes(u)).concat("baseUrl"),l=Il(o,a);if(!/application\/octet-stream/i.test(n.accept)&&(e.mediaType.format&&(n.accept=n.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),e.mediaType.previews.length)){const u=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=u.concat(e.mediaType.previews).map(p=>{const f=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${p}-preview${f}`}).join(",")}return["GET","HEAD"].includes(t)?r=iw(r,l):"data"in l?i=l.data:Object.keys(l).length?i=l:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof i=="undefined"&&(i=""),Object.assign({method:t,url:r,headers:n},typeof i!="undefined"?{body:i}:null,e.request?{request:e.request}:null)}function dw(e,t,r){return Ll(Qo(e,t,r))}function Ml(e,t){const r=Qo(e,t),n=dw.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:Ml.bind(null,r),merge:Qo.bind(null,r),parse:Ll})}const hw=`octokit-endpoint.js/6.0.11 ${Oi()}`,fw=Ml(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":hw},mediaType:{format:"",previews:[]}}),pw="5.4.15";function gw(e){return e.arrayBuffer()}function $l(e){(Fl(e.body)||Array.isArray(e.body))&&(e.body=JSON.stringify(e.body));let t={},r,n;return(e.request&&e.request.fetch||kn())(e.url,Object.assign({method:e.method,body:e.body,headers:e.headers,redirect:e.redirect},e.request)).then(o=>{n=o.url,r=o.status;for(const a of o.headers)t[a[0]]=a[1];if(r===204||r===205)return;if(e.method==="HEAD"){if(r<400)return;throw new Wt(o.statusText,r,{headers:t,request:e})}if(r===304)throw new Wt("Not modified",r,{headers:t,request:e});if(r>=400)return o.text().then(a=>{const l=new Wt(a,r,{headers:t,request:e});try{let c=JSON.parse(l.message);Object.assign(l,c);let u=c.errors;l.message=l.message+": "+u.map(JSON.stringify).join(", ")}catch(c){}throw l});const s=o.headers.get("content-type");return/application\/json/.test(s)?o.json():!s||/^text\/|charset=utf-8$/.test(s)?o.text():gw(o)}).then(o=>({status:r,url:n,headers:t,data:o})).catch(o=>{throw o instanceof Wt?o:new Wt(o.message,500,{headers:t,request:e})})}function Yo(e,t){const r=e.defaults(t);return Object.assign(function(i,o){const s=r.merge(i,o);if(!s.request||!s.request.hook)return $l(r.parse(s));const a=(l,c)=>$l(r.parse(r.merge(l,c)));return Object.assign(a,{endpoint:r,defaults:Yo.bind(null,r)}),s.request.hook(a,s)},{endpoint:r,defaults:Yo.bind(null,r)})}const Ui=Yo(fw,{headers:{"user-agent":`octokit-request.js/${pw} ${Oi()}`}}),mw="4.6.1";class vw extends Error{constructor(t,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=t,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const ww=["method","baseUrl","url","headers","request","query","mediaType"],_w=["query","method","url"],Bl=/\/api\/v3\/?$/;function bw(e,t,r){if(r){if(typeof t=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const s in r)if(!!_w.includes(s))return Promise.reject(new Error(`[@octokit/graphql] "${s}" cannot be used as variable name`))}const n=typeof t=="string"?Object.assign({query:t},r):t,i=Object.keys(n).reduce((s,a)=>ww.includes(a)?(s[a]=n[a],s):(s.variables||(s.variables={}),s.variables[a]=n[a],s),{}),o=n.baseUrl||e.endpoint.DEFAULTS.baseUrl;return Bl.test(o)&&(i.url=o.replace(Bl,"/api/graphql")),e(i).then(s=>{if(s.data.errors){const a={};for(const l of Object.keys(s.headers))a[l]=s.headers[l];throw new vw(i,{headers:a,data:s.data})}return s.data.data})}function Jo(e,t){const r=e.defaults(t);return Object.assign((i,o)=>bw(r,i,o),{defaults:Jo.bind(null,r),endpoint:Ui.endpoint})}const yw=Jo(Ui,{headers:{"user-agent":`octokit-graphql.js/${mw} ${Oi()}`},method:"POST",url:"/graphql"});function Ew(e){return Jo(e,{method:"POST",url:"/graphql"})}var Tw=Ie(5186);async function Sw(e){const t=e.split(/\./).length===3?"app":/^v\d+\./.test(e)?"installation":"oauth";return{type:"token",token:e,tokenType:t}}function kw(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function Cw(e,t,r,n){const i=t.endpoint.merge(r,n);return i.headers.authorization=kw(e),t(i)}const xw=function(t){if(!t)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof t!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return t=t.replace(/^(token|bearer) +/i,""),Object.assign(Sw.bind(null,t),{hook:Cw.bind(null,t)})},Nl="3.4.0";class es{constructor(t={}){const r=new Tw.Collection,n={baseUrl:Ui.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[t.userAgent,`octokit-core.js/${Nl} ${Oi()}`].filter(Boolean).join(" "),t.baseUrl&&(n.baseUrl=t.baseUrl),t.previews&&(n.mediaType.previews=t.previews),t.timeZone&&(n.headers["time-zone"]=t.timeZone),this.request=Ui.defaults(n),this.graphql=Ew(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},t.log),this.hook=r,t.authStrategy){const{authStrategy:o,...s}=t,a=o(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:s},t.auth));r.wrap("request",a.hook),this.auth=a}else if(!t.auth)this.auth=async()=>({type:"unauthenticated"});else{const o=xw(t.auth);r.wrap("request",o.hook),this.auth=o}this.constructor.plugins.forEach(o=>{Object.assign(this,o(this,t))})}static defaults(t){return class extends this{constructor(...n){const i=n[0]||{};if(typeof t=="function"){super(t(i));return}super(Object.assign({},t,i,i.userAgent&&t.userAgent?{userAgent:`${i.userAgent} ${t.userAgent}`}:null))}}}static plugin(...t){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(t.filter(o=>!n.includes(o))),r}}es.VERSION=Nl,es.plugins=[];const Aw="1.0.3";function Hl(e){e.hook.wrap("request",(t,r)=>{e.log.debug("request",r);const n=Date.now(),i=e.request.endpoint.parse(r),o=i.url.replace(r.baseUrl,"");return t(r).then(s=>(e.log.info(`${i.method} ${o} - ${s.status} in ${Date.now()-n}ms`),s)).catch(s=>{throw e.log.info(`${i.method} ${o} - ${s.status} in ${Date.now()-n}ms`),s})})}Hl.VERSION=Aw;const Dw="2.13.3";function Rw(e){if(!("total_count"in e.data&&!("url"in e.data)))return e;const r=e.data.incomplete_results,n=e.data.repository_selection,i=e.data.total_count;delete e.data.incomplete_results,delete e.data.repository_selection,delete e.data.total_count;const o=Object.keys(e.data)[0],s=e.data[o];return e.data=s,typeof r!="undefined"&&(e.data.incomplete_results=r),typeof n!="undefined"&&(e.data.repository_selection=n),e.data.total_count=i,e}function ts(e,t,r){const n=typeof t=="function"?t.endpoint(r):e.request.endpoint(t,r),i=typeof t=="function"?t:e.request,o=n.method,s=n.headers;let a=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};const l=await i({method:o,url:a,headers:s}),c=Rw(l);return a=((c.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:c}}})}}function jl(e,t,r,n){return typeof r=="function"&&(n=r,r=void 0),zl(e,[],ts(e,t,r)[Symbol.asyncIterator](),n)}function zl(e,t,r,n){return r.next().then(i=>{if(i.done)return t;let o=!1;function s(){o=!0}return t=t.concat(n?n(i.value,s):i.value.data),o?t:zl(e,t,r,n)})}const sb=Object.assign(jl,{iterator:ts}),Pw=null;function ab(e){return typeof e=="string"?Pw.includes(e):!1}function ql(e){return{paginate:Object.assign(jl.bind(null,e),{iterator:ts.bind(null,e)})}}ql.VERSION=Dw;const Wl={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateEnvironmentSecret:["PUT /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getEnvironmentPublicKey:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repositories/{repository_id}/environments/{environment_name}/secrets"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.rest.reactions.deleteLegacy() is deprecated, see https://docs.github.com/rest/reference/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},Vl="5.0.1";function Zl(e,t){const r={};for(const[n,i]of Object.entries(t))for(const[o,s]of Object.entries(i)){const[a,l,c]=s,[u,p]=a.split(/ /),f=Object.assign({method:u,url:p},l);r[n]||(r[n]={});const h=r[n];if(c){h[o]=Fw(e,n,o,f,c);continue}h[o]=e.request.defaults(f)}return r}function Fw(e,t,r,n,i){const o=e.request.defaults(n);function s(...a){let l=o.endpoint.merge(...a);if(i.mapToData)return l=Object.assign({},l,{data:l[i.mapToData],[i.mapToData]:void 0}),o(l);if(i.renamed){const[c,u]=i.renamed;e.log.warn(`octokit.${t}.${r}() has been renamed to octokit.${c}.${u}()`)}if(i.deprecated&&e.log.warn(i.deprecated),i.renamedParameters){const c=o.endpoint.merge(...a);for(const[u,p]of Object.entries(i.renamedParameters))u in c&&(e.log.warn(`"${u}" parameter is deprecated for "octokit.${t}.${r}()". Use "${p}" instead`),p in c||(c[p]=c[u]),delete c[u]);return o(c)}return o(...a)}return Object.assign(s,o)}function Ow(e){return{rest:Zl(e,Wl)}}Ow.VERSION=Vl;function Kl(e){const t=Zl(e,Wl);return{...t,rest:t}}Kl.VERSION=Vl;const Uw="18.5.3",Iw=es.plugin(Hl,Kl,ql).defaults({userAgent:`octokit-rest.js/${Uw}`});var Ql;(function(e){e[e.Force=0]="Force",e[e.ForceWithLease=1]="ForceWithLease"})(Ql||(Ql={}));var Nr;(function(e){e[e.Head=0]="Head",e[e.RemoteHead=1]="RemoteHead",e[e.Tag=2]="Tag"})(Nr||(Nr={}));var Fn;(function(e){e[e.INDEX_MODIFIED=0]="INDEX_MODIFIED",e[e.INDEX_ADDED=1]="INDEX_ADDED",e[e.INDEX_DELETED=2]="INDEX_DELETED",e[e.INDEX_RENAMED=3]="INDEX_RENAMED",e[e.INDEX_COPIED=4]="INDEX_COPIED",e[e.MODIFIED=5]="MODIFIED",e[e.DELETED=6]="DELETED",e[e.UNTRACKED=7]="UNTRACKED",e[e.IGNORED=8]="IGNORED",e[e.INTENT_TO_ADD=9]="INTENT_TO_ADD",e[e.ADDED_BY_US=10]="ADDED_BY_US",e[e.ADDED_BY_THEM=11]="ADDED_BY_THEM",e[e.DELETED_BY_US=12]="DELETED_BY_US",e[e.DELETED_BY_THEM=13]="DELETED_BY_THEM",e[e.BOTH_ADDED=14]="BOTH_ADDED",e[e.BOTH_DELETED=15]="BOTH_DELETED",e[e.BOTH_MODIFIED=16]="BOTH_MODIFIED"})(Fn||(Fn={}));var Xl;(function(e){e.BadConfigFile="BadConfigFile",e.AuthenticationFailed="AuthenticationFailed",e.NoUserNameConfigured="NoUserNameConfigured",e.NoUserEmailConfigured="NoUserEmailConfigured",e.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",e.NotAGitRepository="NotAGitRepository",e.NotAtRepositoryRoot="NotAtRepositoryRoot",e.Conflict="Conflict",e.StashConflict="StashConflict",e.UnmergedChanges="UnmergedChanges",e.PushRejected="PushRejected",e.RemoteConnectionError="RemoteConnectionError",e.DirtyWorkTree="DirtyWorkTree",e.CantOpenResource="CantOpenResource",e.GitNotFound="GitNotFound",e.CantCreatePipe="CantCreatePipe",e.PermissionDenied="PermissionDenied",e.CantAccessRemote="CantAccessRemote",e.RepositoryNotFound="RepositoryNotFound",e.RepositoryIsLocked="RepositoryIsLocked",e.BranchNotFullyMerged="BranchNotFullyMerged",e.NoRemoteReference="NoRemoteReference",e.InvalidBranchName="InvalidBranchName",e.BranchAlreadyExists="BranchAlreadyExists",e.NoLocalChanges="NoLocalChanges",e.NoStashFound="NoStashFound",e.LocalChangesOverwritten="LocalChangesOverwritten",e.NoUpstreamBranch="NoUpstreamBranch",e.IsInSubmodule="IsInSubmodule",e.WrongCase="WrongCase",e.CantLockRef="CantLockRef",e.CantRebaseMultipleBranches="CantRebaseMultipleBranches",e.PatchDoesNotApply="PatchDoesNotApply",e.NoPathFound="NoPathFound",e.UnknownPath="UnknownPath"})(Xl||(Xl={}));function Yl(e,t,r){return[...e.reduce((i,o)=>{const s=t(o),a=i.get(s);if(a===void 0)i.set(s,o);else{const l=r(a,o);l!==void 0&&i.set(s,l)}return i},new Map).values()]}const Gw="";function Lw(...e){if(e.length===1){const t=e[0];return t==null?Gw:typeof t=="string"?t:typeof t=="number"||typeof t=="boolean"?String(t):JSON.stringify(t)}return JSON.stringify(e)}function Mw(e){return e!=null&&typeof e.then=="function"}function $w(e){return(t,r,n)=>{let i;if(typeof n.value=="function"?i=n.value:typeof n.get=="function"&&(i=n.get),i==null)throw new Error("Not supported");const o=`$gate$${r}`;n.value=function(...s){const a=s.length===0?o:`${o}$${(e!=null?e:Lw)(...s)}`;Object.prototype.hasOwnProperty.call(this,a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let l=this[a];if(l===void 0){let c;try{if(c=i.apply(this,s),c==null||!Mw(c))return c;this[a]=l=c.then(u=>(this[a]=void 0,u)).catch(u=>{throw this[a]=void 0,u})}catch(u){throw this[a]=void 0,u}}return l}}}const Bw="github-pr-owner-number";function Nw(e){return`branch.${e}.${Bw}`}const Hw=(0,P.loadMessageBundle)(),jw=new TextDecoder;class zw{constructor(t,r,n,i,o){this.rootUri=t,this.sourceControl=r,this.metadata=n,this.changeStore=i,this.github=o,this._onDidChangeSelection=new d.EventEmitter,this._onDidChangeState=new d.EventEmitter;var s;this.disposable=d.Disposable.from(this.sourceControl.onDidChangeSelection(()=>this._onDidChangeSelection.fire()),this.changeStore.onDidChange(()=>this._onDidChangeState.fire()),this._onDidChangeSelection,this._onDidChangeState),this._inputBox={get value(){return r.inputBox.value}},this._ui={get selected(){return r.selected},onDidChange:this._onDidChangeSelection.event};const{repo:{owner:a,name:l}}=n;this.remote={name:"origin",fetchUrl:`https://github.com/${a}/${l}.git`,isReadOnly:n.accessLevel>=Ke.Write},this.remotes=[this.remote],n.pullRequest&&(n.pullRequest.repo.owner!==a||n.pullRequest.repo.name!==l)&&this.remotes.push({name:"upstream",fetchUrl:`https://github.com/${n.pullRequest.repo.owner}/${n.pullRequest.repo.name}.git`,isReadOnly:!0}),this._state={HEAD:((s=n.HEAD.detached)==null?void 0:s.type)===mt.Tag?{type:Nr.Tag,name:n.HEAD.detached.name,commit:n.HEAD.sha}:n.HEAD.branch?{type:Nr.Head,commit:n.HEAD.sha,name:n.HEAD.branch.name,upstream:{name:n.HEAD.branch.name,remote:this.remote.name}}:void 0,indexChanges:[],mergeChanges:[],onDidChange:this._onDidChangeState.event,rebaseCommit:void 0,refs:[],remotes:this.remotes,submodules:[],get workingTreeChanges(){return[...Ht(i.getChanges(t),c=>c.fileType!==d.FileType.File?void 0:{uri:c.uri,status:Vw(c.type),originalUri:c.uri,renameUri:c.uri})]}}}dispose(){this.disposable.dispose()}get inputBox(){return this._inputBox}get state(){return this._state}get ui(){return this._ui}getConfigs(){return Promise.resolve([])}async getConfig(t){if(!this.metadata.HEAD.branch)return"";if(t===Nw(this.metadata.HEAD.branch.name)){const r=await this.github.getPullRequestForBranch(this.rootUri,this.metadata.HEAD.branch.name);if(r!==void 0)return`${r.repository.owner}#${r.repository.name}#${r.id}`}return""}setConfig(t,r){return Promise.resolve("")}getGlobalConfig(t){throw new Error("Method not implemented.")}async getObjectDetails(t,r){return this.github.getObjectDetails(this.rootUri,t,Jl(r))}detectObjectType(t){return Promise.resolve({mimetype:"text/plain"})}buffer(t,r){throw new Error("Method not implemented.")}async show(t,r){const n=await this.github.getFileContent(this.rootUri,t,Jl(r));return jw.decode(n)}async getCommit(t){const r=await this.github.getCommit(this.rootUri,t);if(r===void 0)throw new Error(`Unable to find commit for ref "${t}"`);return r}clean(t){throw new Error("Method not implemented.")}apply(t,r){throw new Error("Method not implemented.")}diff(t){throw new Error("Method not implemented.")}diffWithHEAD(t){if(t)return"";throw new Error("Method not implemented.")}diffWith(t,r){throw new Error("Method not implemented.")}diffIndexWithHEAD(t){throw new Error("Method not implemented.")}diffIndexWith(t,r){throw new Error("Method not implemented.")}diffBlobs(t,r){throw new Error("Method not implemented.")}diffBetween(t,r,n){throw new Error("Method not implemented.")}hashObject(t){throw new Error("Method not implemented.")}async createBranch(t,r,n){n||(n=this.metadata.HEAD.sha);const i=await this.github.createBranch(this.rootUri,t,n);r&&await this.checkout(i)}deleteBranch(t,r){throw new Error("Method not implemented.")}async getBranch(t){const{branches:r}=await this.github.getBranches(this.rootUri,{query:t,limit:1}),[n]=r;if(n===void 0)throw new Error(`Unable to find branch named "${t}"`);return{type:n.type,name:n.name,commit:n.commit,remote:this.remote.name,upstream:{name:n.name,remote:n.commitUrl}}}async getBranches(t){var r,n;const{branches:i}=await this.github.getBranches(this.rootUri,{query:(n=(r=t.contains)!=null?r:t.pattern)!=null?n:"",limit:t.count});if(i.length===0)throw new Error(`Unable to find branches for "${t.contains}"`);return i.map(o=>({type:o.type,name:o.name,commit:o.commit}))}setBranchUpstream(t,r){throw new Error("Method not implemented.")}getMergeBase(t,r){throw new Error("Method not implemented.")}async status(){}async checkout(t){return this.github.switchTo(this.rootUri,t,{openInNewWindow:!1})}addRemote(t,r){var n;let i;const o=this.remotes.findIndex(s=>s.name===t);return o!==-1&&([i]=this.remotes.splice(o,1)),this.remotes.push({name:t,fetchUrl:r,isReadOnly:(n=i==null?void 0:i.isReadOnly)!=null?n:!1}),Promise.resolve()}removeRemote(t){const r=this.remotes.findIndex(n=>n.name===t);return r!==-1&&this.remotes.splice(r,1),Promise.resolve()}renameRemote(t,r){const n=this.remotes.findIndex(o=>o.name===t);if(n===-1)return Promise.resolve();const[i]=this.remotes.splice(n,1);return this.remotes.push({...i,name:r}),Promise.resolve()}async fetch(t,r,n){return this.github.fetch(this.rootUri)}async pull(t){return this.github.sync(this.rootUri,this.changeStore,{conflictResolution:at.Merge})}push(t,r,n){throw new Error("Method not implemented.")}blame(t){throw new Error("Method not implemented.")}async log(t){if((t==null?void 0:t.maxEntries)!==1||(t==null?void 0:t.path)!==void 0)throw new Error("The specified log options are not yet supported.");return[await this.getCommit(this.metadata.HEAD.sha)]}async commit(t,r){if((r==null?void 0:r.amend)!==void 0||(r==null?void 0:r.empty)!==void 0||(r==null?void 0:r.signCommit)!==void 0||(r==null?void 0:r.signoff)!==void 0)throw new Error("The specified commit options are not yet supported.");let n;(r==null?void 0:r.all)===!1?n=this.changeStore.getStagedChanges(this.rootUri):n=this.changeStore.getChanges(this.rootUri);const i=this.github.getCommitOperations(this.rootUri,n,this.changeStore);if(!i.length){d.window.showInformationMessage(Hw("no changes to commit","There are no changes to commit."));return}await this.github.createCommit(this.rootUri,t,i)}}const qw=/^\/?([a-zA-Z])(?::\/)(.*)$/,Ww=/\\/g;function Jl(e){e=d.Uri.file(e).fsPath.replace(Ww,"/");const t=qw.exec(e);return t!==null&&([,,e]=t),e.startsWith("/")?e.substr(1):e}function Vw(e){switch(e){case ye.Changed:return Fn.MODIFIED;case ye.Created:return Fn.INTENT_TO_ADD;case ye.Deleted:return Fn.DELETED}}var Zw=Object.defineProperty,Kw=Object.getOwnPropertyDescriptor,Qw=(e,t,r,n)=>{for(var i=n>1?void 0:n?Kw(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Zw(t,r,i),i};const Xw=(0,P.loadMessageBundle)();function Ii(e){const[t,r]=e.authority.split("+");let n,i;r&&([n,i]=r.split("~"));const[,o,s,...a]=e.path.split("/");return{scheme:t,repo:{owner:o,name:s},path:a.join("/")||"",ref:n||void 0,pullRequest:i?Number(i):void 0}}function eu(e,t){const{repo:r}=t!=null?t:Ii(e);return e.with({path:`/${r.owner}/${r.name}`})}function rs(e,t,r){const{repo:{owner:n,name:i}}=e instanceof d.Uri?Ii(e):e;return d.Uri.parse(`github://github+${t}/${n}/${i}/${r}`)}class tu{constructor(t,r){this.providerService=t,this.metadataStore=r,this.pendingMetadataRequests=new Map,this.rootUriToMetadataMap=new Map}dispose(){}async ensureAuthenticated(){if(this._session===void 0){async function t(){try{return await d.authentication.getSession("github",["repo"],{createIfNone:!0})}catch{try{const n=await d.authentication.getSession("github",["repo"],{createIfNone:!1});if(n!==void 0)return n}catch{}return new Promise(async n=>{async function i(){const s=await d.authentication.getSession("github",["repo"],{createIfNone:!0});s!==void 0&&n(s)}if(d.authentication.providers.some(s=>s.id==="github")){await i();return}const o=d.authentication.onDidChangeSessions(async s=>{s.provider.id==="github"&&(o.dispose(),await i())})})}}this._session=await t();const r=d.authentication.onDidChangeSessions(n=>{if(this._session===void 0){r.dispose();return}n.provider.id==="github"&&(this._session=void 0,this._graphql=void 0,this._octokit=void 0,r.dispose())})}return this._session}async graphql(){if(this._graphql===void 0){const t=await this.ensureAuthenticated();this._graphql=yw.defaults({headers:{Authorization:`Bearer ${t.accessToken}`}})}return this._graphql}async octokit(t){if(this._octokit===void 0){const r=await this.ensureAuthenticated();this._octokit=Iw.defaults({auth:`token ${r.accessToken}`})}return new this._octokit(t)}async getMetadata(t){t=this.providerService.getVirtualUri(t);const r=Ii(t),n=eu(t,r),i=n.toString();let o=this.pendingMetadataRequests.get(i);o===void 0&&(o=this.getMetadataCore(n),this.pendingMetadataRequests.set(i,o));try{return{...await o,path:r.path,scheme:r.scheme}}finally{this.pendingMetadataRequests.delete(i)}}async getMetadataCore(t){var r,n,i,o;const s=t.toString();let a=this.rootUriToMetadataMap.get(s);if(a!==void 0)return a;if(a=this.metadataStore.get(t),a!==void 0)return this.rootUriToMetadataMap.set(s,a),a;let{repo:{owner:l,name:c},ref:u,pullRequest:p}=Ii(t);(!u||/HEAD/i.test(u))&&(u="HEAD");const f=ya(u);if(f===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);const h=await this.getRepositoryInfo(l,c,{ref:u,pr:p});if(h===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let g;if(f==="sha")g=u;else if(g=(n=(r=h.ref)==null?void 0:r.sha)!=null?n:h.defaultBranch.sha,g===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let v;return((i=h.ref)==null?void 0:i.prefix)==="refs/heads/"?v={sha:g,branch:{name:h.ref.name,sha:h.ref.sha}}:((o=h.ref)==null?void 0:o.prefix)==="refs/tags/"?v={sha:g,detached:{type:mt.Tag,name:h.ref.name}}:v={sha:g,detached:{type:mt.Commit,name:Qe(g)}},a={version:ai.schemaVersion,timestamp:Date.now(),provider:{id:"github",name:"GitHub"},name:`${h.repo.owner}/${h.repo.name}`,repo:h.repo,user:h.user,accessLevel:h.accessLevel,HEAD:v,defaultBranch:h.defaultBranch,pullRequest:h.pullRequest},await this.updateMetadata(t,a),a}async updateMetadata(t,r){this.rootUriToMetadataMap.set(t.toString(),r),await this.metadataStore.set(this.providerService.getVirtualUri(t),r)}getRemoteWorkspaceSourceProviders(){return[{name:"GitHub",type:jt.Repository,icon:"$(github)",provideSources:async(t,r)=>(await this.searchRepositoriesQuery(t!=null?t:"",r)).map(i=>({name:i.repoWithOwner,description:`${i.fork?`$(repo-forked) ${i.fork}`:""}${i.stars>0?`${i.fork?" \u2022 ":""}$(star-full) ${i.stars}`:""}`,detail:i.description,url:i.url}))},{name:"GitHub",type:jt.PullRequest,icon:"$(github)",provideSources:async(t,r)=>(await this.searchPullRequestsQuery(t!=null?t:"")).map(i=>({name:i.title,description:i.reasons.length!==0?i.reasons.sort().join(", "):void 0,detail:`${i.repoWithOwner} #${i.number}`,url:i.url}))}]}createIGitRepository(t,r,n,i){return new zw(t,r,n,i,this.providerService.getProvider(t).api)}async createBranch(t,r,n,i){try{const{repo:{owner:o,name:s}}=i!=null?i:await this.getMetadata(t);return r.startsWith("refs/heads/")||(r=`refs/heads/${r}`),(await(await this.octokit()).git.createRef({owner:o,repo:s,ref:r,sha:n})).data.ref.substr(11)}catch(o){throw o instanceof Wt&&o.status===422?o.message==="Reference already exists"?new or(o,!0):new or(o,!1):(ue.error(o),o)}}async createCommit(t,r,n,i){try{const o=await this.getMetadata(t),{repo:{owner:s,name:a}}=i!=null?i:o,l=await this.octokit(),c=await l.git.getTree({owner:s,repo:a,tree_sha:o.HEAD.sha,recursive:"true"}),u=[];for(const h of n)if(h.fileType===d.FileType.File)switch(h.type){case ye.Created:{u.push({path:h.path,mode:"100644",type:"blob",content:h.content});break}case ye.Changed:{const g=c.data.tree.find(v=>v.path===h.path);if(g!==void 0){const{path:v,mode:C,type:R}=g;u.push({path:v,mode:C,type:R,content:h.content})}else u.push({path:h.path,mode:"100644",type:"blob",content:h.content});break}case ye.Deleted:{u.push({path:h.path,mode:"100644",type:"blob",sha:null});break}}const p=await l.git.createTree({owner:s,repo:a,base_tree:c.data.sha,tree:u});return(await l.git.createCommit({owner:s,repo:a,message:r,tree:p.data.sha,parents:[o.HEAD.sha]})).data.sha}catch(o){throw ue.error(o),o}}async createPullRequest(t,r,n,i,o){var s,a,l;try{const{repo:{owner:c,name:u},HEAD:{branch:p},defaultBranch:f}=await this.getMetadata(t),g=await(await this.octokit()).pulls.create({owner:c,repo:u,base:`refs/heads/${(s=p==null?void 0:p.name)!=null?s:f.name}`,head:o?`${o.repo.owner}:${r}`:r,title:n,draft:(a=i==null?void 0:i.draft)!=null?a:!1,maintainer_can_modify:(l=i==null?void 0:i.canMaintainerModify)!=null?l:!0});return{id:g.data.number.toString(),uri:d.Uri.parse(g.data.html_url)}}catch(c){throw ue.error(c),c}}async fetch(t,r){const[n,i]=await this.fetchCore(t,{...r,sync:!1});n&&await this.updateMetadata(t,i)}async fetchCore(t,r){var n,i,o,s,a,l,c,u,p,f;const h=await this.getMetadata(t);if(h.HEAD.detached)return[!1,h];const g=await this.getBranchTips(t);if(!g)throw ue.warn(`Unabled to fetch branch tips for rootUri=${t.toString(!0)}`),new Xi(r.sync);if(!r.force&&((n=g.defaultBranch)==null?void 0:n.sha)!==void 0&&g.defaultBranch.sha===h.defaultBranch.sha&&((i=g.branch)==null?void 0:i.sha)!==void 0&&g.branch.sha===h.HEAD.branch.sha)return[!1,h];let v;if(((o=g.defaultBranch)==null?void 0:o.sha)!==void 0&&g.defaultBranch.sha!==h.defaultBranch.sha&&(v={defaultBranch:{...h.defaultBranch,sha:g.defaultBranch.sha}}),((s=g.branch)==null?void 0:s.sha)===void 0)return v!==void 0?[!0,{...h,...v}]:[!1,h];if(g.branch.sha!==h.HEAD.branch.sha&&(v={...v,HEAD:{...h.HEAD,branch:{...h.HEAD.branch,sha:g.branch.sha},detached:void 0}}),g.branch.sha===h.HEAD.sha)return h.state!==void 0||v!==void 0?[!0,{...h,...v,state:void 0}]:[!1,h];try{const R=await(await this.octokit()).repos.compareCommits({base:h.HEAD.sha,head:(c=(l=(a=v==null?void 0:v.HEAD)==null?void 0:a.branch)==null?void 0:l.sha)!=null?c:h.HEAD.branch.sha,owner:h.repo.owner,repo:h.repo.name}),D=[];for(const N of(u=R.data.files)!=null?u:[])switch(N.status){case"added":case"copied":D.push({path:N.filename,type:ye.Created});break;case"removed":D.push({path:N.filename,type:ye.Deleted});break;case"modified":D.push({path:N.filename,type:ye.Changed});break;case"renamed":D.push({path:N.filename,type:ye.Created}),D.push({path:N.previous_filename,type:ye.Deleted});break;default:ue.warn(`Unknown file status encountered '${N.status}'`);break}return[!0,{...h,...v,state:{ahead:(p=R.data.behind_by)!=null?p:0,behind:(f=R.data.ahead_by)!=null?f:0,incomingChanges:D}}]}catch(C){return ue.error(C),v!==void 0?[!0,{...h,...v}]:[!1,h]}}async fork(t){try{const{repo:{owner:r,name:n}}=await this.getMetadata(t),o=await(await this.octokit()).repos.createFork({owner:r,repo:n});let s;for(;;){try{if(s=await this.getRepositoryInfo(o.data.owner.login,o.data.name),s!==void 0)break}catch{}await new Promise(a=>setTimeout(a,250))}return{name:`${o.data.owner.login}/${o.data.name}`,repo:{owner:o.data.owner.login,name:o.data.name},url:o.data.url}}catch(r){throw ue.error(r),r}}async getBranches(t,r){var n,i,o;try{const{repo:{owner:s,name:a}}=await this.getMetadata(t),l=`query (
	$owner: String!
	$repo: String!
	$branchQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $branchQuery, refPrefix: "refs/heads/", first: $limit, after: $cursor) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
				}
			}
		}
	}
}`,c=await this.gqlQuery(l,{owner:s,repo:a,branchQuery:(n=r==null?void 0:r.query)!=null?n:"",cursor:r==null?void 0:r.cursor,limit:Math.min(100,(i=r==null?void 0:r.limit)!=null?i:100)});if(c===void 0)return{branches:[]};const u=(o=c.repository)==null?void 0:o.refs;if(u===void 0)return{branches:[]};const p=u.nodes.map(f=>({type:Nr.Head,name:f.name,commit:f.target.oid,commitUrl:f.target.commitUrl}));return{paging:{cursor:u.pageInfo.endCursor,more:u.pageInfo.hasNextPage},branches:p}}catch(s){return{branches:[]}}}async getCommit(t,r){var n;try{const{repo:{owner:i,name:o}}=await this.getMetadata(t),s=`query ($owner: String! $repo: String! $ref: GitObjectID!) {
	repository(name: $repo owner: $owner) {
		object(oid: $ref) {
			...on Commit {
				oid
				message
				parents(first: 100) {
					nodes {
						oid
					}
				}
				author {
					date
					email
					name
				}
				committer {
					date
				}
			}
		}
	}
}`,a=await this.gqlQuery(s,{owner:i,repo:o,ref:r});if(a===void 0)return;const l=(n=a.repository)==null?void 0:n.object;return l===void 0?void 0:{hash:l.oid,message:l.message,parents:l.parents.nodes.map(c=>c.oid),authorDate:new Date(l.author.date),authorEmail:l.author.email,authorName:l.author.name,commitDate:new Date(l.committer.date)}}catch(i){return}}getCommitOperations(t,r,n){return r.map(o=>{const s=this.providerService.getRelativeFilePath(t,o.uri);switch(o.type){case ye.Created:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case ye.Changed:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case ye.Deleted:return{type:o.type,path:s,fileType:o.fileType}}})}async getCommits(t,r){var n,i,o;try{const{repo:{owner:s,name:a}}=await this.getMetadata(t),l=`query (
	$owner: String!
	$repo: String!
	$ref: GitObjectID!
	$path: String
	$cursor: String
	$limit: Int = 100
) {
	repository(name: $repo, owner: $owner) {
		object(oid: $ref) {
			... on Commit {
				history(first: $limit, path: $path, after: $cursor) {
					pageInfo {
						endCursor
						hasNextPage
					}
					nodes {
						... on Commit {
							...commit
						}
					}
				}
			}
		}
	}
}

fragment commit on Commit {
	oid
	message
	parents(first: 100) {
		nodes {
			oid
		}
	}
	author {
		date
		email
		name
	}
	committer {
		date
	}
}
`,c=await this.gqlQuery(l,{owner:s,repo:a,ref:r==null?void 0:r.ref,cursor:r==null?void 0:r.cursor,path:r==null?void 0:r.path,limit:Math.min(100,(n=r==null?void 0:r.limit)!=null?n:100)});if(c===void 0)return;const u=(o=(i=c.repository)==null?void 0:i.object)==null?void 0:o.history;if(u===void 0)return;const p=u.nodes.map(f=>({hash:f.oid,message:f.message,parents:f.parents.nodes.map(h=>h.oid),authorDate:new Date(f.author.date),authorEmail:f.author.email,authorName:f.author.name,commitDate:new Date(f.committer.date)}));return{paging:{cursor:u.pageInfo.endCursor,more:u.pageInfo.hasNextPage},commits:p}}catch(s){return}}async getFileContent(t,r,n){try{const{repo:{owner:i,name:o}}=await this.getMetadata(t),s=await this.getObjectDetails(t,r,n);if(s===void 0)throw new Error(`Cannot read contents of Uri(${t.toString(!0)})`);const l=await(await this.octokit()).git.getBlob({owner:i,repo:o,file_sha:s.object});return rw(l.data.content)}catch(i){throw ue.error(i),i}}async getFork(t){var r,n,i;try{const{repo:{owner:o,name:s}}=await this.getMetadata(t),a=`query ($owner: String!, $repo: String!) {
	repository(owner: $owner, name: $repo) {
		forks(affiliations: OWNER, first: 1) {
			nodes {
				owner {
					login
				}
				name
				url
			}
		}
	}
}`,l=await this.gqlQuery(a,{owner:o,repo:s});if(l===void 0)return;const[c]=(i=(n=(r=l.repository)==null?void 0:r.forks)==null?void 0:n.nodes)!=null?i:[];return c===void 0?void 0:{name:`${c.owner.login}/${c.name}`,repo:{owner:c.owner.login,name:c.name},url:c.url}}catch(o){return}}async getIncomingChanges(t){return this.getIncomingChangesCore(t,await this.getMetadata(t))}getIncomingChangesCore(t,r){var n,i,o;return((o=(i=(n=r.state)==null?void 0:n.incomingChanges)==null?void 0:i.length)!=null?o:0)===0?[]:r.state.incomingChanges.map(s=>({uri:d.Uri.joinPath(t,s.path),type:s.type}))}async getObjectDetails(t,r,n){var i;try{const{repo:{owner:o,name:s},path:a,HEAD:{sha:l}}=await this.getMetadata(t);n=n?this.providerService.getRelativeFilePath(t,this.providerService.createRelativeUri(t,n)):a,r===void 0&&(r=l);const p=(await(await this.octokit()).git.getTree({owner:o,repo:s,tree_sha:r,recursive:"true"})).data.tree.find(f=>f.path===n);if(p===void 0||p.mode===void 0||p.sha===void 0)throw new Error(`Cannot get details of ${n} in ${r}`);return{mode:p.mode,object:p.sha,size:(i=p.size)!=null?i:0}}catch(o){throw ue.error(o),o}}async getPullRequest(t,r){var n,i,o,s,a,l,c;try{const{repo:{owner:u,name:p}}=await this.getMetadata(t),f=`query ($owner: String!, $repo: String!, $number: Int!) {
	repository(name: $repo, owner: $owner) {
		pullRequest(number: $number) {
			author {
				login
				avatarUrl
				url
			}
			permalink
			number
			title
			state
			updatedAt
			closedAt
			mergedAt
			repository {
				name
				owner {
					login
				}
			}
			baseRef {
				name
			}
			baseRefName
			baseRefOid
			baseRepository {
				name
				owner {
					login
				}
			}
			headRef {
				name
			}
			headRefName
			headRefOid
			headRepository {
				name
				owner {
					login
				}
			}
			headRepositoryOwner {
				login
			}
		}
	}
}`,h=await this.gqlQuery(f,{owner:u,repo:p,number:Number(r)}),g=(n=h==null?void 0:h.repository)==null?void 0:n.pullRequest;return g?{author:{name:g.author.login,avatarUrl:g.author.avatarUrl,url:g.author.url},closedAt:g.closedAt?new Date(g.closedAt):void 0,mergedAt:g.mergedAt?new Date(g.mergedAt):void 0,id:g.number.toString(),repository:{name:g.repository.name,owner:g.repository.owner.login},state:Gi(g.state),title:g.title,updatedAt:new Date(g.updatedAt),url:g.permalink,refs:{base:{owner:g.baseRepository.owner.login,repo:g.baseRepository.name,branch:g.baseRefName,sha:g.baseRefOid,exists:g.baseRef!=null},head:{owner:(a=(s=(i=g.headRepository)==null?void 0:i.owner.login)!=null?s:(o=g.headRepositoryOwner)==null?void 0:o.login)!=null?a:"<unknown>",repo:(c=(l=g.headRepository)==null?void 0:l.name)!=null?c:g.baseRepository.name,branch:g.headRefName,sha:g.headRefOid,exists:g.headRef!=null}}}:void 0}catch(u){ue.error(u);return}}async getPullRequestForBranch(t,r,n){var i,o,s,a,l;try{const{repo:{owner:c,name:u}}=await this.getMetadata(t),p=`query ($owner: String!, $repo: String!, $branch: String!, $maxCount: Int!, $states: [PullRequestState!]) {
	repository(name: $repo, owner: $owner) {
		refs(query: $branch, refPrefix: "refs/heads/", first: 1) {
			nodes {
				associatedPullRequests(first: $maxCount, orderBy: {field: UPDATED_AT, direction: DESC}, states: $states) {
					nodes {
						author {
							login
							avatarUrl
							url
						}
						permalink
						number
						title
						state
						updatedAt
						closedAt
						mergedAt
						repository {
							isFork
							name
							owner {
								login
							}
						}
					}
				}
			}
		}
	}
}`,f=await this.gqlQuery(p,{owner:c,repo:u,branch:r,maxCount:(i=n==null?void 0:n.maxCount)!=null?i:1,states:n==null?void 0:n.include}),h=(l=(a=(s=(o=f==null?void 0:f.repository)==null?void 0:o.refs.nodes[0])==null?void 0:s.associatedPullRequests)==null?void 0:a.nodes)==null?void 0:l.filter(v=>!v.repository.isFork||v.repository.owner.login===c);if(h==null||h.length===0)return;h.length>1&&h.sort((v,C)=>(v.repository.owner.login===c?-1:1)-(C.repository.owner.login===c?-1:1)||(v.state==="OPEN"?-1:1)-(C.state==="OPEN"?-1:1)||new Date(C.updatedAt).getTime()-new Date(v.updatedAt).getTime());const[g]=h;return{author:{name:g.author.login,avatarUrl:g.author.avatarUrl,url:g.author.url},closedAt:g.closedAt?new Date(g.closedAt):void 0,mergedAt:g.mergedAt?new Date(g.mergedAt):void 0,id:g.number.toString(),repository:{name:g.repository.name,owner:g.repository.owner.login},state:Gi(g.state),title:g.title,updatedAt:new Date(g.updatedAt),url:g.permalink}}catch(c){ue.error(c);return}}async getRepoFileNames(t){try{const{repo:{owner:r,name:n},HEAD:{sha:i}}=await this.getMetadata(t),o=await(await this.octokit()).git.getTree({owner:r,repo:n,recursive:"1",tree_sha:i});return Ht(o.data.tree,s=>s.type==="blob"?s.path:void 0)}catch(r){return[]}}async getTags(t,r){var n,i,o;try{const{repo:{owner:s,name:a}}=await this.getMetadata(t),l=`query (
	$owner: String!
	$repo: String!
	$tagQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $tagQuery, refPrefix: "refs/tags/", first: $limit, after: $cursor, orderBy: { field: TAG_COMMIT_DATE, direction: DESC }) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
				}
			}
		}
	}
}`,c=await this.gqlQuery(l,{owner:s,repo:a,tagQuery:(n=r==null?void 0:r.query)!=null?n:"",cursor:r==null?void 0:r.cursor,limit:Math.min(100,(i=r==null?void 0:r.limit)!=null?i:100)});if(c===void 0)return{tags:[]};const u=(o=c.repository)==null?void 0:o.refs;if(u===void 0)return{tags:[]};const p=u.nodes.map(f=>({type:Nr.Tag,name:f.name,commit:f.target.oid,commitUrl:f.target.commitUrl}));return{paging:{cursor:u.pageInfo.endCursor,more:u.pageInfo.hasNextPage},tags:p}}catch(s){return{tags:[]}}}async getTarGz(t,r){const{repo:{owner:n,name:i},HEAD:{sha:o}}=await this.getMetadata(t);r=r!=null?r:o;let s=Ce.get("search.download.corsProxy")||void 0;s&&!/^http/.test(s)&&(s=`https://${s}`),s&&!/\/$/.test(s)&&(s=`${s}/`);const a=await this.ensureAuthenticated(),l=s?`${s}api.github.com/repos/${n}/${i}/tarball/${r}`:`https://api.github.com/repos/${n}/${i}/tarball/${r}`,c=await kn()(l,{headers:{Authorization:`Bearer ${a.accessToken}`}});return new Uint8Array(await c.arrayBuffer())}async pushCommit(t,r,n,i){try{const o=await this.getMetadata(t),{repo:{owner:s,name:a}}=i!=null?i:o;if(n===void 0&&o.HEAD.detached)throw new tn("Unable to commit; no current branch");(n==null?void 0:n.startsWith("refs/heads/"))&&(n=n.substr(11));const c=await(await this.octokit()).git.updateRef({owner:s,repo:a,ref:`heads/${n!=null?n:o.HEAD.branch.name}`,sha:r});return n===void 0&&!o.HEAD.detached&&await this.fastForwardTo(t,r,o),c.data.ref}catch(o){throw o instanceof Wt&&o.status===422&&o.message.includes("Update is not a fast forward")?new Xn(o):(ue.error(o),o)}}async queryRepositoryObject(t,r){var n,i;try{const{repo:{owner:o,name:s},HEAD:{sha:a},path:l}=await this.getMetadata(t),c=`query ($owner: String!, $repo: String!, $path: String) {
	repository(owner: $owner, name: $repo) {
		object(expression: $path) {
			${r}
		}
	}
}`,u=await this.gqlQuery(c,{owner:o,repo:s,path:`${a}:${l}`});return(i=(n=u==null?void 0:u.repository)==null?void 0:n.object)!=null?i:void 0}catch(o){return}}async searchPullRequestsQuery(t){try{let r=function(s,a){return{number:s.number,title:s.title,repoWithOwner:s.repository.nameWithOwner,reasons:a?[a]:[],url:s.url}};const n=`query ($authored: String!, $assigned: String!, $reviewRequested: String!, $mentioned: String!) {
	viewer {
		repositories(first: 100, orderBy: { field: STARGAZERS, direction: DESC }) {
			nodes {
				pullRequests(first: 100, states: OPEN, orderBy: { field: UPDATED_AT, direction: DESC }) {
					nodes {
						number
						title
						url
						repository {
							nameWithOwner
						}
					}
				}
			}
		}
	}
	authored: search(first: 100, query: $authored, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	assigned: search(first: 100, query: $assigned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	reviewRequested: search(first: 100, query: $reviewRequested, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	mentioned: search(first: 100, query: $mentioned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
}`;t=t.trim();const i=await this.gqlQuery(n,{authored:(t?`${t} is:pr is:open archived:false author:@me`:"is:pr is:open archived:false author:@me").trim(),assigned:(t?`${t} is:pr is:open archived:false assignee:@me`:"is:pr is:open archived:false assignee:@me").trim(),reviewRequested:(t?`${t} is:pr is:open archived:false review-requested:@me`:"is:pr is:open archived:false review-requested:@me").trim(),mentioned:(t?`${t} is:pr is:open archived:false mentions:@me`:"is:pr is:open archived:false mentions:@me").trim()});return i===void 0?[]:Yl([...i.assigned.nodes.map(s=>r(s,"assigned")),...i.reviewRequested.nodes.map(s=>r(s,"review requested")),...i.mentioned.nodes.map(s=>r(s,"mentioned")),...i.authored.nodes.map(s=>r(s,"authored")),...zs(i.viewer.repositories.nodes,s=>s.pullRequests.nodes.map(a=>r(a)))],s=>s.url,(s,a)=>(a.reasons.length!==0&&s.reasons.push(...a.reasons),s))}catch(r){return[]}}async searchRepositoriesQuery(t,r){try{const n=`query ($search: String!) {
	viewer {
		repositories(first: 100, orderBy: { field: UPDATED_AT, direction: DESC }) {
			nodes {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
	search(first: 100, query: $search, type: REPOSITORY) {
		nodes {
			...on Repository {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
}`;(r==null?void 0:r.user)&&(t+=` user:${r.user}`),(r==null?void 0:r.sort)&&(t+=` sort:${r.sort}`);const i=await this.gqlQuery(n,{search:t.trim()});return i===void 0?[]:Yl((r==null?void 0:r.user)?[...i.search.nodes,...i.viewer.repositories.nodes]:[...i.viewer.repositories.nodes,...i.search.nodes],s=>s.url,s=>s).map(s=>{var a,l,c;return{repoWithOwner:s.nameWithOwner,description:(a=s.description)!=null?a:void 0,url:s.url,fork:(c=(l=s.parent)==null?void 0:l.nameWithOwner)!=null?c:void 0,stars:s.stargazerCount}})}catch(n){return[]}}async searchCodeQuery(t,r,n){var i,o,s;const{repo:{owner:a,name:l},HEAD:c,defaultBranch:u}=await this.getMetadata(r),p=[];((i=c.branch)==null?void 0:i.name)!==u.name&&p.push(Xw("cant search branch","Unable to search {0}, falling back to {1}. Enable indexing for results specific to {0}.",(s=(o=c.branch)==null?void 0:o.name)!=null?s:c.detached.name,u.name));try{const f=await(await this.octokit({request:{headers:{accept:"application/vnd.github.v3.text-match+json"}}})).search.code({q:`${t} repo:${a}/${l}`}),h=new d.Range(0,0,0,0),g=[];let v=0,C;for(const R of f.data.items)for(const D of R.text_matches){if(v++,n.maxResults!==void 0&&v>n.maxResults)return{matches:g,limitHit:!0};C={path:R.path,ranges:[],preview:D.fragment,matches:[]};for(const N of D.matches){let G=0,W=0,ce=0;for(let re=0;re<N.indices[1];re++)re===N.indices[0]&&(W=ce),D.fragment[re]===`
`?(G++,ce=0):ce++;C.ranges.push(h),C.matches.push(new d.Range(G,W,G,ce))}g.push(C)}return{matches:g,limitHit:!1,warnings:p}}catch(f){return{matches:[],limitHit:!0}}}async switchTo(t,r,n){const{name:i,repo:o,HEAD:{branch:s}}=await this.getMetadata(t);r.startsWith("refs/heads/")?r=r.substr(11):r.startsWith("refs/tags/")&&(r=r.substr(10)),(s==null?void 0:s.name)!==r&&await ut(this.providerService.createVirtualUri(t,{repo:o,ref:r}),i,(n==null?void 0:n.openInNewWindow)?Ge.NewWindow:Ge.CurrentWindow)}async sync(t,r,n){var i,o;const[,s]=await this.fetchCore(t,{sync:!0});if(!s.HEAD.detached){if(((o=(i=s==null?void 0:s.state)==null?void 0:i.behind)!=null?o:0)>0&&r.hasChanges(t)){const a=this.getIncomingChangesCore(t,s),l=[];let c;if(a.length>0){c=r.getChanges(t);for(const u of c){const p=this.providerService.getRelativeFilePath(t,u.uri),f=a.find(h=>h.uri.path===u.uri.path);if(f!==void 0){l.push({path:p,current:u,incoming:f});break}}}if(l.length>0)switch(n.conflictResolution){case at.KeepCurrent:for(const u of l)await r.keep(u.current.uri,{type:u.incoming.type,providerUri:rs(s,s.HEAD.branch.sha,u.path)});break;case at.DiscardCurrent:for(const u of l)await r.discard(u.current.uri);break;case at.Merge:for(const u of l)await r.merge(u.current.uri,{type:u.incoming.type,providerUri:rs(s,s.HEAD.branch.sha,u.path)},{providerUri:rs(s,s.HEAD.sha,u.path)});break;case at.Abort:default:throw await this.updateMetadata(t,s),new Yn}}await this.fastForwardTo(t,s.HEAD.branch.sha,s)}}async fastForwardTo(t,r,n){if(n.HEAD.detached)throw new tn("Unable to fast-forward; no current branch");await this.updateMetadata(t,{...n,HEAD:{...n.HEAD,detached:void 0,sha:r},state:void 0,timestamp:Date.now()})}async getBranchTips(t,r){try{const{repo:{owner:n,name:i},HEAD:{branch:o}}=await this.getMetadata(t);r===void 0&&(r=o?`refs/heads/${o.name}`:"");const s=`query ($owner: String!, $repo: String!, $ref: String!) {
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			target {
				oid
			}
		}
		ref(qualifiedName: $ref) {
			target {
				oid
			}
		}
	}
}`,a=await this.gqlQuery(s,{owner:n,repo:i,ref:r});if(!(a==null?void 0:a.repository))return;const{defaultBranchRef:l,ref:c}=a.repository;return!l&&!c?void 0:{defaultBranch:l?{sha:l.target.oid}:void 0,branch:c?{sha:c.target.oid}:void 0}}catch(n){return}}async getRepositoryInfo(t,r,n){var i,o,s,a,l,c,u,p,f,h,g,v,C;try{const R=`query ($owner: String!, $repo: String!, $ref: String = "", $pr: Boolean!, $number: Int = 0) {
	viewer {
		login
	}
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			name
			target {
				oid
			}
		}
		ref(qualifiedName: $ref) {
			name
			prefix
			target {
				oid
			}
		}
		viewerPermission
		parent {
			name
			owner {
				login
			}
			defaultBranchRef {
				name
				target {
					oid
				}
			}
			viewerPermission
			pullRequest(number: $number) @include(if: $pr) {
				number
				title
				state
				maintainerCanModify
				baseRef {
					name
				}
				baseRefName
				baseRefOid
				baseRepository {
					name
					owner {
						login
					}
					defaultBranchRef {
						name
						target {
							oid
						}
					}
					viewerPermission
				}
				headRef {
					name
				}
				headRefName
				headRefOid
				headRepository {
					name
					owner {
						login
					}
					defaultBranchRef {
						name
						target {
							oid
						}
					}
					viewerPermission
				}
				mergeCommit {
					oid
				}
			}
		}
		pullRequest(number: $number) @include(if: $pr) {
			number
			title
			state
			maintainerCanModify
			baseRef {
				name
			}
			baseRefName
			baseRefOid
			baseRepository {
				name
				owner {
					login
				}
				defaultBranchRef {
					name
					target {
						oid
					}
				}
				viewerPermission
			}
			headRef {
				name
			}
			headRefName
			headRefOid
			headRepository {
				name
				owner {
					login
				}
				defaultBranchRef {
					name
					target {
						oid
					}
				}
				viewerPermission
			}
			mergeCommit {
				oid
			}
		}
	}
}`;let D;try{D=await this.gqlQuery(R,{owner:t,repo:r,ref:(n==null?void 0:n.ref)!=="HEAD"?n==null?void 0:n.ref:void 0,pr:Boolean(n==null?void 0:n.pr),number:(i=n==null?void 0:n.pr)!=null?i:0})}catch(W){if(!(W instanceof Error)||!W.message.startsWith("Could not resolve to a PullRequest with the number"))throw W;D=W.data}if(D===void 0)return;const N=(l=(o=D.repository)==null?void 0:o.pullRequest)!=null?l:(a=(s=D.repository)==null?void 0:s.parent)==null?void 0:a.pullRequest;if(N==null?void 0:N.headRef){const W=(u=(c=N.headRepository)==null?void 0:c.defaultBranchRef)!=null?u:void 0;return(W==null?void 0:W.name)===void 0?void 0:{user:D.viewer.login,repo:{owner:N.headRepository.owner.login,name:N.headRepository.name},accessLevel:ru(N.headRepository.viewerPermission),ref:N.headRef?{prefix:"refs/heads/",name:N.headRef.name,sha:N.headRefOid}:(n==null?void 0:n.ref)==="HEAD"?{prefix:"refs/heads/",name:W.name,sha:W.target.oid}:void 0,defaultBranch:{name:W.name,sha:W.target.oid},pullRequest:N?{id:N.number.toString(),repo:{owner:N.baseRepository.owner.login,name:N.baseRepository.name},state:Gi(N.state),title:N.title}:void 0}}const G=(f=(p=D.repository)==null?void 0:p.defaultBranchRef)!=null?f:void 0;return(G==null?void 0:G.name)===void 0?void 0:{user:D.viewer.login,repo:{owner:t,name:r},accessLevel:ru((h=D==null?void 0:D.repository)==null?void 0:h.viewerPermission),ref:((g=D.repository)==null?void 0:g.ref)?{prefix:D.repository.ref.prefix,name:D.repository.ref.name,sha:D.repository.ref.target.oid}:(N==null?void 0:N.baseRef)?{prefix:"refs/heads/",name:N==null?void 0:N.baseRef.name,sha:(C=(v=N.mergeCommit)==null?void 0:v.oid)!=null?C:N==null?void 0:N.baseRefOid}:(n==null?void 0:n.ref)==="HEAD"?{prefix:"refs/heads/",name:G.name,sha:G.target.oid}:void 0,defaultBranch:{name:G.name,sha:G.target.oid},pullRequest:N?{id:N.number.toString(),repo:{owner:t,name:r},state:Gi(N.state),title:N.title}:void 0}}catch(R){if(Yw(R)&&R.errors[0].type==="NOT_FOUND")throw new en(R,`${t}/${r}`);return}}async gqlQuery(t,r){return(await this.graphql())(t,r)}}Qw([$w()],tu.prototype,"ensureAuthenticated",1);function Yw(e){return e instanceof Error&&"name"in e&&e.name==="GraphqlError"}function Gi(e){switch(e){case"OPEN":return rn.Open;case"CLOSED":return rn.Closed;case"MERGED":return rn.Merged}}var mr;(function(e){e.ADMIN="ADMIN",e.MAINTAIN="MAINTAIN",e.WRITE="WRITE",e.TRIAGE="TRIAGE",e.READ="READ",e.NONE="NONE"})(mr||(mr={}));function ru(e){switch(e){case mr.ADMIN:return Ke.Admin;case mr.MAINTAIN:return Ke.Maintain;case mr.WRITE:return Ke.Write;case mr.TRIAGE:return Ke.Triage;case mr.READ:return Ke.Read;default:return Ke.None}}const ns=(0,P.loadMessageBundle)(),Jw={dispose:()=>{}},e_=/(\/|\\)/g,t_=new TextEncoder,On=class{constructor(e,t,r,n,i){this.providerService=e,this.github=t,this.changeStore=n,this.tarPit=i,this._onDidChangeFile=new d.EventEmitter,this.fsCache=new Map,this.fileSearchCache=new Map,this.disposable=d.Disposable.from(d.workspace.registerFileSystemProvider(On.scheme,this,{isCaseSensitive:!0,isReadonly:!0}),d.workspace.registerFileSearchProvider(On.scheme,this),d.workspace.registerTextSearchProvider(On.scheme,this),r.onDidChange(o=>{this.fsCache.clear(),this.updateOpenDocuments(e.getProviderUri(o))}))}get onDidChangeFile(){return this._onDidChangeFile.event}dispose(){var e;(e=this.disposable)==null||e.dispose()}getCache(e){return this.fsCache}updateOpenDocuments(e){const t=d.workspace.textDocuments.map(r=>{if(!(r.uri.scheme!==On.scheme||!Jr(r.uri,e)))return{uri:r.uri,type:d.FileChangeType.Changed}}).filter(r=>Boolean(r));t.length!==0&&this._onDidChangeFile.fire(t)}watch(){return Jw}async stat(e){var t,r;const n=await this.fsQuery(e,`__typename
			...on Blob {
				byteSize
			}`,this.getCache(e));if(n===void 0&&e.query!=="~")throw d.FileSystemError.FileNotFound();const i=await this.github.getMetadata(e);return{type:iu((t=n==null?void 0:n.__typename)!=null?t:"blob"),size:(r=n==null?void 0:n.byteSize)!=null?r:0,ctime:0,mtime:i==null?void 0:i.timestamp}}async readDirectory(e){var t;const r=await this.fsQuery(e,`... on Tree {
				entries {
					name
					type
				}
			}`,this.getCache(e));return((t=r==null?void 0:r.entries)!=null?t:[]).map(n=>[n.name,iu(n.type)])}createDirectory(e){throw d.FileSystemError.NoPermissions()}async readFile(e){var t;const r=await this.fsQuery(e,`... on Blob {
				oid
				isBinary
				isTruncated
				text
			}`);return(r==null?void 0:r.isBinary)||(r==null?void 0:r.isTruncated)?await this.github.getFileContent(e):t_.encode((t=r==null?void 0:r.text)!=null?t:"")}writeFile(e,t,r){throw d.FileSystemError.NoPermissions()}delete(e,t){throw d.FileSystemError.NoPermissions()}rename(e,t,r){throw d.FileSystemError.NoPermissions()}copy(e,t,r){throw d.FileSystemError.NoPermissions()}async provideFileSearchResults(e,t,r){let n=this.fileSearchCache.get(t.folder.toString(!0));if(n===void 0){const o=await this.github.getRepoFileNames(t.folder);if(o===void 0||r.isCancellationRequested)return[];n=[...Kn(o,s=>Ar.prepareSlow(s))],this.fileSearchCache.set(t.folder.toString(!0),n)}if(t.maxResults===void 0||t.maxResults===0||t.maxResults>=n.length)return n.map(s=>d.Uri.joinPath(t.folder,s.target));const i=Ar.go(e.pattern.replace(e_,"/"),n,{allowTypo:!0,limit:t.maxResults}).map(o=>d.Uri.joinPath(t.folder,o.target));return Ar.cleanup(),i}async provideTextSearchResults(e,t,r,n){const i=[];if(Ce.get("search.download.enabled"))try{return Xc(this.providerService,this.changeStore,this.tarPit,e,t,r,n)}catch{i.push({text:ns("index error","Error searching with index, falling back to standard search"),type:d.TextSearchCompleteMessageType.Warning})}i.push({text:ns("enable index","To improve search accuracy, [enable indexing](command:remoteHub.enableIndexing)"),type:d.TextSearchCompleteMessageType.Information}),(e.isCaseSensitive||e.isRegExp||e.isWordMatch)&&i.push({text:ns("flags not supported","Search flags are not supported by GitHub search. Enable indexing for full search features."),type:d.TextSearchCompleteMessageType.Warning});const o=await this.github.searchCodeQuery(e.pattern,t.folder,{maxResults:t.maxResults,context:{before:t.beforeContext,after:t.afterContext}});if(o.warnings&&o.warnings.forEach(a=>{i.push({text:a,type:d.TextSearchCompleteMessageType.Warning})}),o===void 0)return{limitHit:!0,message:i};let s;for(const a of o.matches)s=d.Uri.joinPath(t.folder,a.path),r.report({uri:s,ranges:a.ranges,preview:{text:a.preview,matches:a.matches}});return{limitHit:!1,message:i}}async fsQuery(e,t,r){const n=`${e.toString()}:${r_(t)}`;let i=r==null?void 0:r.get(n);return i!==void 0||(i=await this.github.queryRepositoryObject(e,t),i===void 0?r==null||r.delete(n):r==null||r.set(n,i)),i}};let nu=On;nu.scheme="github";function iu(e){switch(e&&(e=e.toLocaleLowerCase()),e){case"blob":return d.FileType.File;case"tree":return d.FileType.Directory;default:return d.FileType.Unknown}}function r_(e){let t=0;if(e.length===0)return t;let r;const n=e.length;for(let i=0;i<n;i++)r=e.charCodeAt(i),t=(t<<5)-t+r,t|=0;return t}const ou=/^(?:(?:https:\/\/)?github.com\/)?(?<owner>[^/]+)\/(?<repo>[^/]+?)(?:\/(?:tree\/(?<tree>.+)|blob\/(?<blob>.+)|commit\/(?<commit>[0-9a-f]{40})|pull\/(?<pull>[0-9]+)))?(?:\/|\.git$|(?:#(?<hash>.*))?$)/i,It=(0,P.loadMessageBundle)();class n_{constructor(t,r){this.providerService=t,this.memento=r}canOpenRemoteUrl(t){const r=ou.exec(t);if((r==null?void 0:r.groups)===void 0)return;const{blob:n,commit:i,pull:o,tree:s}=r.groups;return o?Me.PullRequest:i?Me.Commit:s?Me.Branch:n?Me.File:Me.Repository}async openWorkspaceForRemoteUrl(t,r=Ge.CurrentWindow){const n=ou.exec(t);if((n==null?void 0:n.groups)===void 0)return;const{owner:i,repo:o,blob:s,commit:a,pull:l,tree:c}=n.groups;if(l)return this.openWorkspaceForPullRequest(r,i,o,l);let u,p;if(s){const f=this.createVirtualUri(Le.baseVirtualWorkspaceUri,{repo:{owner:i,name:o}});if(u=s,u){const g=(await this.providerService.getBranches(f,{query:u.split("/")[0]})).branches.map(v=>`${v.name}/`).sort((v,C)=>C.length-v.length);for(const v of g)if(u.startsWith(v)){p=v.slice(0,-1),u=u.substr(p.length);break}}}else p=a!=null?a:c;return this.openWorkspaceForRepository(r,i,o,p,u)}createVirtualUri(t,{repo:r,ref:n,pullRequest:i},o){return t.with({authority:`github${n?`+${n}${i?`~${i}`:""}`:""}`,path:`/${r.owner}/${r.name}${o?`${o.startsWith("/")?"":"/"}${o}`:""}`})}getExternalUri(t){const r=`https://github.com/${t.repo.owner}/${t.repo.name}`;return t.pullRequest?d.Uri.parse(`${r}/pull/${t.pullRequest}`):t.sha?d.Uri.parse(`${r}/commit/${t.sha}`):t.branch?d.Uri.parse(`${r}/tree/${t.branch}`):t.clone?d.Uri.parse(`${r}.git`):d.Uri.parse(r)}getProviderRootUri(t){return eu(t)}getRelativeFilePath(t,r){const[,,,...n]=Yr(t,r).split("/");return n.join("/")||""}async openWorkspaceForRepository(t,r,n,i,o){const s=this.providerService.createVirtualUri("github",{repo:{owner:r,name:n},ref:i}),a=await this.providerService.getMetadata(s);await ut(s,a.name,t,o?{memento:this.memento,paths:[o]}:void 0)}async openWorkspaceForPullRequest(t,r,n,i){var o,s,a,l;const c=await this.providerService.getPullRequest(this.providerService.createVirtualUri("github",{repo:{owner:r,name:n}}),i);let u;if(c)if((s=(o=c.refs)==null?void 0:o.head)==null?void 0:s.exists)u=this.providerService.createVirtualUri("github",{repo:{owner:c.refs.head.owner,name:c.refs.head.repo},ref:c.refs.head.branch,pullRequest:c.id});else if((l=(a=c.refs)==null?void 0:a.base)==null?void 0:l.exists){const p=It("pr source branch missing prompt confirm","Open Respository"),f=It("pr source branch missing prompt cancel","Cancel");if(await d.window.showInformationMessage(It("pr source branch missing prompt",`Unable to find the source branch for pull request #{0}.

Do you want to open the repository on the target branch instead?`,c.id),p,f)!==p)return;u=this.providerService.createVirtualUri("github",{repo:{owner:c.refs.base.owner,name:c.refs.base.repo},ref:c.refs.base.branch,pullRequest:c.id})}else{const p=It("pr branches missing prompt confirm","Open Respository"),f=It("pr branches missing prompt cancel","Cancel");if(await d.window.showInformationMessage(It("pr branches missing prompt",`Unable to find either the source or target branch for pull request #{0}.

Do you want to open the repository on the default branch instead?`,c.id),p,f)!==p)return;u=this.providerService.createVirtualUri("github",{repo:{owner:r,name:n}})}else{const p=It("pr missing prompt confirm","Open Respository"),f=It("pr missing prompt cancel","Cancel");if(await d.window.showInformationMessage(It("pr missing prompt",`Unable to find pull request.

Do you want to open the repository on the default branch instead?`),p,f)!==p)return;u=this.providerService.createVirtualUri("github",{repo:{owner:r,name:n}})}await ut(u,`${r}/${n}`,t)}}const rt=(0,P.loadMessageBundle)();class i_{constructor(t,r,n){this.providerService=t,this.changeStore=n,this._onDidChangeFileDecorations=new d.EventEmitter,this._decorations=new Map,this.disposable=d.Disposable.from(d.window.registerFileDecorationProvider(this),r.onDidChange(()=>this.onMetadataChanged()),n.onDidChange(i=>this.onUrisChanged(i)))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onMetadataChanged(){this._decorations.clear(),this._onDidChangeFileDecorations.fire(void 0)}onUrisChanged(t){this._onDidChangeFileDecorations.fire(t.map(r=>(this._decorations.delete(r.uri.toString()),r.uri)))}async provideFileDecoration(t,r){if(t.scheme!==Le.scheme)return;const n=t.toString();let i=this._decorations.get(n);if(i!==void 0)return i!=null?i:void 0;const o=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(t));let s;o.length>0&&(s=o.find(l=>l.uri.toString()===n));const a=this.changeStore.getChange(t);if(a===void 0){if(s!==void 0)switch(s.type){case ye.Created:i={badge:"\u2193A",color:new d.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:rt("decoration tooltip incoming change added","Pending Incoming Changes (Added)")};break;case ye.Deleted:i={badge:"\u2193D",color:new d.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:rt("decoration tooltip incoming change deleted","Pending Incoming Changes (Deleted)")};break;case ye.Changed:i={badge:"\u2193M",color:new d.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:rt("decoration tooltip incoming change modified","Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new d.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:rt("decoration tooltip incoming change","Pending Incoming Changes")};break}return this._decorations.set(n,i!=null?i:null),i}if(a.conflicts)i={badge:"\u26A0",color:new d.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:rt("decoration tooltip conflicts","Merge Conflicts ({0})",Rp(a.conflicts.status))};else if(s!==void 0)switch(s.type){case ye.Created:i={badge:"\u26A0",color:new d.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:rt("decoration tooltip possible conflict added","Possible Merge Conflicts (Added)")};break;case ye.Deleted:i={badge:"\u26A0",color:new d.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:rt("decoration tooltip possible conflict deleted","Possible Merge Conflicts (Deleted)")};break;case ye.Changed:i={badge:"\u26A0",color:new d.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:rt("decoration tooltip possible conflict","Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new d.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:rt("decoration tooltip possible conflict","Possible Merge Conflicts")}}else switch(a.type){case ye.Created:i={badge:"A",color:new d.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:rt("decoration tooltip added","Added")};break;case ye.Changed:i={badge:"M",color:new d.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:rt("decoration tooltip modified","Modified")};break;case ye.Deleted:i={badge:"D",color:new d.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:rt("decoration tooltip deleted","Deleted")};break}return this._decorations.set(n,i!=null?i:null),i}}class Hr{constructor(t){this.command=t}get label(){return this.command.title}async execute(){var t;return void await d.commands.executeCommand(this.command.command,...(t=this.command.arguments)!=null?t:[])}}var Li;(function(e){async function t(r,n,i,o,s,a){let l;Array.isArray(s)?l=s:a===void 0&&(a=s);const c=l!=null?l:[],[u,p,f]=await Promise.all([r.getMetadata(n),r.getBranches(n,{limit:100}),r.getTags(n,{limit:100})]),h=u.defaultBranch.name,g=((a==null?void 0:a.filterBranches)?p.branches.filter(a==null?void 0:a.filterBranches):p.branches).sort((v,C)=>(v.name===h?-1:1)-(C.name===h?-1:1)||v.name.localeCompare(C.name));return c.push(...g.map(v=>({label:`$(git-branch) ${v.name}`,description:`$(git-commit) ${Qe(v.commit)}`,name:v.name,sha:v.commit})),...f.tags.map(v=>({label:`$(tag) ${v.name}`,description:`$(git-commit) ${Qe(v.commit)}`,name:v.name,sha:v.commit}))),d.window.showQuickPick(c,{placeHolder:i,title:o,matchOnDescription:!0})}e.show=t})(Li||(Li={}));const V=(0,P.loadMessageBundle)();class o_{constructor(t,r,n){this.providerService=t,this.metadataStore=r,this.changeStore=n,this._onDidCloseRepository=new d.EventEmitter,this._onDidOpenRepository=new d.EventEmitter,this._onDidChangeState=new d.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=d.Disposable.from(Ce.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.metadataStore.onDidChange(async o=>{const s=this.getScmProvider(this.providerService.getVirtualUri(o));s!==void 0&&await this.updateStatusBarCommands(s)},this),this.changeStore.onDidChange(o=>this.update(o[0].rootUri)),...this.registerCommands());const i=this.providerService.repositories;i.length&&this.onRepositoriesChanged({added:i,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(t=>t.repository).filter(t=>Boolean(t))}dispose(){var t;(t=this.disposable)==null||t.dispose()}get staging(){return this._staging===void 0&&(this._staging=Ce.get("staging")),this._staging}get state(){return this._state}refresh(){for(const t of this._scmProviders)this.update(t.sourceControl.rootUri)}onConfigurationChanged(t){Ce.changed(t,"staging")&&(this._staging=void 0,Ce.changed(t,"staging.enabled")&&this.refresh())}async onRepositoriesChanged(t){if(t.added.length)for(const r of t.added){const n=await this.createOrUpdateScmProvider(r.uri,r.name);await this.update(r.uri),n.repository&&this._onDidOpenRepository.fire(n.repository)}if(t.removed.length)for(const r of t.removed){const n=this._scmProviders.findIndex(i=>i.sourceControl.rootUri.toString()===r.uri.toString());if(n!==-1){const i=this._scmProviders[n];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(n,1)}}this._scmProviders.length!==0&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[d.commands.registerCommand("remoteHub.createPullRequest",async t=>{t=this.getSourceControlFrom(t),t!==void 0&&await this.createPullRequest(t)}),d.commands.registerCommand("remoteHub.createDraftPullRequest",async t=>{t=this.getSourceControlFrom(t),t!==void 0&&await this.createPullRequest(t,{draft:!0})}),d.commands.registerCommand("remoteHub.commit",async t=>{t=this.getSourceControlFrom(t),t!==void 0&&await this.commitChanges(t)}),d.commands.registerCommand("remoteHub.discardAllChanges",async t=>{const r=this.getSourceControlFrom(t);if((r==null?void 0:r.rootUri)!==void 0)if(su(t)){const n=this.changeStore.getChanges(r.rootUri);await is(n)&&await this.changeStore.discardAll(r.rootUri)}else{const i=t.resourceStates.filter(Un);if(await is(i))for(const o of i)await this.changeStore.discard(o.resourceUri)}}),d.commands.registerCommand("remoteHub.discardChanges",async t=>{Un(t)&&await is([t])&&await this.changeStore.discard(t.resourceUri)}),d.commands.registerCommand("remoteHub.stageAllChanges",async t=>{const r=this.getSourceControlFrom(t);(r==null?void 0:r.rootUri)!==void 0&&await this.changeStore.stageAll(r.rootUri)}),d.commands.registerCommand("remoteHub.stageChanges",async t=>{Un(t)&&await this.changeStore.stage(t.resourceUri)}),d.commands.registerCommand("remoteHub.unstageAllChanges",async t=>{const r=this.getSourceControlFrom(t);(r==null?void 0:r.rootUri)!==void 0&&await this.changeStore.unstageAll(r.rootUri)}),d.commands.registerCommand("remoteHub.unstageChanges",async t=>{Un(t)&&await this.changeStore.unstage(t.resourceUri)}),d.commands.registerCommand("remoteHub.keepChanges",async t=>{Un(t)&&await this.changeStore.keep(t.resourceUri)}),d.commands.registerCommand("remoteHub.openChanges",async t=>{var r;const{command:n}=t;!n||await d.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}),d.commands.registerCommand("remoteHub.openFile",async t=>{var r;const n=this.changeStore.resolveOpenCommand(t.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:d.ViewColumn.Active});await d.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}),d.commands.registerCommand("remoteHub.createBranch",async t=>{await to("remoteHub.createBranchFrom",{...t,fromSha:"HEAD"})}),d.commands.registerCommand("remoteHub.createBranchFrom",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await In(this._scmProviders,V("choose repo for create branch placeholder","Choose which repository to create a new branch on"),V("choose repo for create branch title","Create Branch"));if(n===void 0)return;const i=await this.providerService.getMetadata(n);if(i.accessLevel<Ke.Write){d.window.showErrorMessage(V("no permissions to create branch ","You don't have access to create branches on this repository."));return}let o;if(t==null?void 0:t.fromSha)o=t.fromSha,o==="HEAD"&&(o=i.HEAD.sha);else{const u=await Li.show(this.providerService,n,V("choose branch for create placeholder","Choose which branch to create the new branch from"),V("choose branch for create title","Create Branch \u2022 {0}",i.name));if(!u)return;o=u.sha}let s;try{s=await d.window.withProgress({location:d.ProgressLocation.SourceControl},()=>os(this.providerService,n,o,V("create branch","Please provide a new branch name"),V("create branch placeholder","New branch name"),V("create branch title","Create Branch \u2022 {0}",i.name)))}catch(u){ue.error(u),d.window.showErrorMessage(V("unable to create branch","Unable to create the new branch."));return}if(!s)return;const a="Switch",l="Open in New Window",c=await d.window.showInformationMessage("Would you like to switch to the new branch?",a,l);!c||await this.providerService.switchTo(n,s,{openInNewWindow:c===l})}),d.commands.registerCommand("remoteHub.exportPatch",async t=>{const r=this.getSourceControlFrom(t);if((r==null?void 0:r.rootUri)===void 0)return;let n;a_(t)&&(n=t.resourceUri);const i=await this.changeStore.createPatch(r.rootUri,n),o=await d.workspace.openTextDocument({language:"diff",content:i});await d.window.showTextDocument(o)}),d.commands.registerCommand("remoteHub.switchToBranch",async t=>{var r,n;const i=(r=t==null?void 0:t.uri)!=null?r:await In(this._scmProviders,V("choose repo for switch branch placeholder","Choose which repository to switch branches on"),V("choose repo for switch branch title","Switch to Branch Or Tag"));if(i===void 0)return;const o=[],s=await this.providerService.getMetadata(i);if(t==null?void 0:t.commands){if(s.HEAD.detached){const{detached:c}=s.HEAD;c.type===mt.Tag?o.push(new Hr(qt({command:"remoteHub.openOnRemote",title:V("open tag on remote command","$(globe) Open Tag on {0}...",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.detached.name}]}))):o.push(new Hr(qt({command:"remoteHub.openOnRemote",title:V("open commit on remote command","$(globe) Open Commit on {0}...",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})))}else o.push(new Hr(qt({command:"remoteHub.openOnRemote",title:V("open branch on remote command","$(globe) Open Branch on {0}...",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));s.accessLevel>=Ke.Write&&o.push(new Hr(qt({command:"remoteHub.createBranch",title:V("create branch command","$(add) Create New Branch..."),arguments:[{uri:i}]})),new Hr(qt({command:"remoteHub.createBranchFrom",title:V("create branch from command","$(add) Create New Branch from..."),arguments:[{uri:i}]})))}const a=(n=s.HEAD.branch)==null?void 0:n.name,l=await Li.show(this.providerService,i,V("choose switch branch placeholder","Choose which branch to switch to"),V("choose switch branch title","Switch to Branch Or Tag \u2022 {0}",s.name),o,{filterBranches:a?c=>c.name!==a:void 0});if(!!l)return l instanceof Hr?void l.execute():void d.window.withProgress({location:d.ProgressLocation.SourceControl},()=>this.providerService.switchTo(i,l.name))}),d.commands.registerCommand("remoteHub.fetch",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await In(this._scmProviders,V("choose repo for fetch placeholder","Choose which repository to fetch"),V("choose repo for fetch title","Fetch Repository"));if(n!==void 0)try{await d.window.withProgress({location:d.ProgressLocation.SourceControl},()=>this.providerService.fetch(n,{force:!0}))}catch(i){d.window.showErrorMessage(V("fetch failed","Unable to fetch repository"))}}),d.commands.registerCommand("remoteHub.fetchAll",async t=>{const r=this.metadataStore.getForWorkspace();if(r.length===0)return;(await d.window.withProgress({location:d.ProgressLocation.SourceControl},async()=>{const i=[];for(const o of r)if(!o.data.HEAD.detached)try{await this.providerService.fetch(o.folderUri)}catch(s){i.push(s)}return i})).length&&!(t==null?void 0:t.silent)&&d.window.showErrorMessage(r.length?V("fetch all failed","Unable to fetch repositories"):V("fetch failed","Unable to fetch repository"))}),d.commands.registerCommand("remoteHub.pull",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await In(this._scmProviders,V("choose repo for pull placeholder","Choose which repository to pull"),V("choose repo for pull title","Pull Repository"));n!==void 0&&await this.sync(n,{pull:!0})}),d.commands.registerCommand("remoteHub.sync",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await In(this._scmProviders,V("choose repo for sync placeholder","Choose which repository to sync"),V("choose repo for sync title","Synchronize Repository"));n!==void 0&&await this.sync(n)})]}async sync(t,{pull:r,...n}={pull:!1}){try{await d.window.withProgress({location:d.ProgressLocation.SourceControl},()=>this.providerService.sync(t,this.changeStore,n))}catch(i){if(i instanceof Yn){const o={title:V("sync keep","Keep My Changes")},s={title:V("sync incoming","Discard My Changes")},a={title:V("sync merge","Merge with Incoming Changes")},l={title:V("sync cancel","Cancel"),isCloseAffordance:!0},c=await d.window.showWarningMessage(r?V("sync pull",`Pulling in changes may cause conflicts with your uncommitted changes, because one of more of those files has changed since you started editing.

Choose how would you like to handle your uncommitted changes, or choose 'Cancel' to abort pulling.`):V("sync",`Synchronizing changes may cause conflicts with your uncommitted changes, because one of more of those files has changed since you started editing.

Choose how would like to handle your uncommitted changes, or choose 'Cancel' to abort synchronizing.`),{modal:!0},a,o,s,l);if(c&&c!==l){let u=at.Merge;c===s?u=at.DiscardCurrent:c===o&&(u=at.KeepCurrent),await d.window.withProgress({location:d.ProgressLocation.SourceControl},()=>this.providerService.sync(t,this.changeStore,{conflictResolution:u}))}}else throw d.window.showErrorMessage(V("sync failed","Unable to synchronize repository")),i}}async commitChanges(t){try{await d.window.withProgress({location:d.ProgressLocation.SourceControl},()=>this.commitChangesCore(t))}catch(r){ue.error(r),d.window.showErrorMessage(V("commit unable","Unable to commit."))}}async commitChangesCore(t){const r=t.rootUri,n=await this.providerService.getMetadata(r);let i,o;for(;;){const a=t.inputBox.value;if(this.changeStore.hasMergeConflicts(r)){t.inputBox.showValidationMessage(V("commit resolve conflicts","You must resolve any pending conflicts before committing."),d.SourceControlInputBoxValidationType.Error);return}const l=this.providerService.getCommitOperations(r,this.changeStore,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1});if(l.length===0){t.inputBox.showValidationMessage(this.staging.enabled?V("commit no staged changes","There are no staged changes to commit."):V("commit no changes","There are no changes to commit."),d.SourceControlInputBoxValidationType.Information);return}if(!a){t.inputBox.showValidationMessage(V("specify commit message","You must specify a commit message before committing."),d.SourceControlInputBoxValidationType.Error);return}if(o===void 0&&n.accessLevel<Ke.Write&&(o=await this.providerService.getFork(r),o===void 0)){const u=V("fork confirm","Fork Repository");if(await d.window.showInformationMessage(V("fork","You\u2019re trying to make changes in a project you don\u2019t have write access to. Would you like to create a fork of this project to commit your proposed changes to?"),u)!==u)return;if(o=await d.window.withProgress({location:d.ProgressLocation.Notification,title:V("fork progress","Forking {0}...",n.name)},()=>this.providerService.fork(r)),o===void 0){d.window.showErrorMessage(V("unable to fork","Unable to fork repository."));return}}const c=await this.providerService.createCommit(r,a,l,o);try{await this.providerService.pushCommit(r,c,i,o)}catch(u){if(u instanceof tn){const p={title:V("push detached head prompt","Commit to New Branch")},f={title:V("cancel","Cancel"),isCloseAffordance:!0};if(await d.window.showErrorMessage(V("push detached head prompt",`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},p,f)!==p)return;if(i=await os(this.providerService,r,n.HEAD.sha,V("push to new branch prompt","Create a new branch to commit your changes to"),V("push to new branch placeholder","New branch name"),V("push to new branch title","Commit \u2022 Create Branch \u2022 {0}",n.name),o),i)continue}else if(u instanceof Xn){const p={title:V("push conflicts prompt pull","Pull")},f={title:V("push conflicts prompt sync","Sync (Pull & Push)")},h={title:V("cancel","Cancel"),isCloseAffordance:!0},g=await d.window.showErrorMessage(V("push conflicts prompt",`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push again) your changes?`),{modal:!0},p,f,h);if(g!==p&&g!==f)return;await this.sync(r,{pull:g===p,conflictResolution:at.Merge});continue}}break}if(t.inputBox.value="",o?await this.changeStore.discardAll(r):await this.changeStore.acceptAll(r),!o&&!i)return;async function s(){var a;if(o){const u=V("commit to fork confirm","Switch to Fork");await d.window.showInformationMessage(V("commit to fork","Committed changes to your fork of {0}. Would you like to switch to your fork to continue making changes?",n.name),u)===u&&ut(this.providerService.createVirtualUri(r,{repo:o.repo,ref:(a=n.HEAD.branch)==null?void 0:a.name}),o.name,Ge.CurrentWindow);return}const l=V("commit to new branch confirm","Switch to Branch");await d.window.showInformationMessage(V("commit to new branch","Committed changes to new branch '{0}'. Would you like to switch to your new branch to continue making changes?",i),l)===l&&ut(this.providerService.createVirtualUri(r,{repo:n.repo,ref:i}),n.name,Ge.CurrentWindow)}s.call(this)}async createPullRequest(t,r){try{await d.window.withProgress({location:d.ProgressLocation.SourceControl},()=>this.createPullRequestCore(t,r))}catch(n){ue.error(n),d.window.showErrorMessage(V("unable to open pr","Unable to open a pull request."))}}async createPullRequestCore(t,r){var n,i;const o=t.rootUri,s=(n=r==null?void 0:r.draft)!=null?n:!1;let a;if(!(r==null?void 0:r.sha)&&(a=this.providerService.getCommitOperations(o,this.changeStore),!a.length)){d.window.showInformationMessage(V("no changes","There are no changes."));return}const l=t.inputBox.value;if(!l){t.inputBox.showValidationMessage(V("specify commit message","Please specify a commit message"),d.SourceControlInputBoxValidationType.Error);return}const c=await this.providerService.getMetadata(o);let u=r==null?void 0:r.fork;if(!u&&c.accessLevel<Ke.Write&&(u=await this.providerService.getFork(o),u===void 0)){const C={title:V("fork confirm","Fork Repository")},R={title:V("cancel","Cancel"),isCloseAffordance:!0};if(await d.window.showInformationMessage(V("fork",`You\u2019re trying to make changes in a project you don\u2019t have write access to.

Would you like to create a fork of this project to commit your proposed changes to?`),{modal:!0},C,R)!==C)return;if(u=await d.window.withProgress({location:d.ProgressLocation.Notification,title:V("fork progress","Forking {0}...",c.name)},()=>this.providerService.fork(o)),u===void 0){d.window.showErrorMessage(V("unable to fork","Unable to fork repository."));return}}const p=await d.window.showInputBox({ignoreFocusOut:!0,placeHolder:V("create pr placeholder","Pull request title"),prompt:V("create pr prompt","Enter a title for the new pull request"),title:V("create pr title","New Pull Request"),value:l});if(!p)return;let f;(a==null?void 0:a.length)?f=await this.providerService.createCommit(o,l,a,u):f=(i=r==null?void 0:r.sha)!=null?i:c.HEAD.sha;const h=await os(this.providerService,o,f,V("create pr branch prompt","Create a new branch for this pull request"),V("create pr branch placeholder","New branch name"),V("create pr branch title","New Pull Request \u2022 Create Branch \u2022 {0}",c.name),u);if(!h)return;const g=await this.providerService.createPullRequest(o,h,p,{draft:s},u);t.inputBox.value="",u?await this.changeStore.discardAll(o):await this.changeStore.acceptAll(o);async function v(){if(u){const D=V("created pr from fork confirm","Switch to Fork");await d.window.showInformationMessage(V("created pr from fork",'Created [Pull Request #{0}]({1} "Open Pull Request #{0} on {2}") for {3}. Would you like to switch to your fork to continue making changes?',g.id,g.uri.toString(!0),c.provider.name,c.name),D)===D&&ut(this.providerService.createVirtualUri(o,{repo:u.repo,ref:h,pullRequest:g.id}),u.name,Ge.CurrentWindow);return}const C=V("created pr from branch confirm","Switch to Branch");await d.window.showInformationMessage(V("created pr from branch",'Created [Pull Request #{0}]({1} "Open Pull Request #{0} on {2}") for {3}. Would you like to switch to your new branch to continue making changes?',g.id,g.uri.toString(!0),c.provider.name,c.name),C)===C&&ut(this.providerService.createVirtualUri(o,{repo:c.repo,ref:h,pullRequest:g.id}),c.name,Ge.CurrentWindow)}v.call(this)}async update(t){const r=d.workspace.getWorkspaceFolder(t);if(r===void 0)return;const n=await this.createOrUpdateScmProvider(t,r.name),i=this.changeStore.getMergeConflicts(t,{predicate:a=>a.fileType===d.FileType.File}).map(a=>({type:a.type,resourceUri:a.uri,command:this.changeStore.resolveDiffCommand(a.uri,a.conflicts.incomingUri,V("diff title with conflicts","{0} (Incoming Changes \u2194 Current Changes)",pt(a.uri)))})),o=this.changeStore.getStagedChanges(t,{predicate:a=>a.fileType===d.FileType.File}).map(a=>({type:a.type,resourceUri:a.uri,command:this.changeStore.resolveDiffCommand(a.uri,this.providerService.getProviderUri(a.uri),V("diff title index","{0} (Index)",pt(a.uri)))})),s=this.changeStore.getWorkingChanges(t,{predicate:a=>a.fileType===d.FileType.File}).map(a=>({type:a.type,resourceUri:a.uri,decorations:{strikeThrough:a.type===ye.Deleted},command:this.changeStore.resolveDiffCommand(a.uri,this.providerService.getProviderUri(a.uri),V("diff title working","{0} (Working Tree)",pt(a.uri)))}));this.ensureMergeConflictsGroup(n).resourceStates=i,this.ensureStagedChangesGroup(n).resourceStates=this.staging.enabled?o:[],this.ensureWorkingChangesGroup(n).resourceStates=this.staging.enabled?s:[...o,...s]}async createOrUpdateScmProvider(t,r){const n=await this.providerService.getMetadata(t);let i=this.getScmProvider(t);if(i===void 0){r=n.name;const o=d.scm.createSourceControl(`remoteHub:${n.provider.id}`,r,t);o.quickDiffProvider={provideOriginalResource:a=>this.providerService.getProviderUri(a)},n.accessLevel>=Ke.Write?(o.acceptInputCommand={command:"remoteHub.commit",title:V("scm input accept command title commit","Commit"),arguments:[o]},o.inputBox.placeholder=V("scm input placeholder commit","Message (Ctrl+Enter to commit to '{0}'",r)):(o.acceptInputCommand={command:"remoteHub.createPullRequest",title:V("scm input accept command title pr","Create a Pull Request"),arguments:[o]},o.inputBox.placeholder=V("scm input placeholder pr","Message (Ctrl+Enter to create a pull request for '{0}'",r));const s=this.providerService.createIGitRepository(t,o,n,this.changeStore);i={id:n.provider.id,name:n.provider.name,sourceControl:o,groups:[],repository:s},this.ensureMergeConflictsGroup(i),this.ensureStagedChangesGroup(i),this.ensureWorkingChangesGroup(i),this._scmProviders.push(i)}return await this.updateStatusBarCommands(i,n),i}async updateStatusBarCommands(t,r){var n,i,o;const s=t.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(s);const{HEAD:a}=r,l=this.changeStore.hasChanges(s),c=[qt({command:"remoteHub.switchToBranch",title:a.detached?a.detached.type===mt.Tag?`$(tag) ${a.detached.name}${l?"*":""}`:`$(git-commit) ${Qe(a.detached.name)}${l?"*":""}`:`$(git-branch) ${a.branch.name}${l?"*":""}`,tooltip:Qe(a.sha),arguments:[{uri:s,commands:!0}]})];a.detached||c.push(qt({command:"remoteHub.sync",title:`$(sync)${((i=(n=r.state)==null?void 0:n.behind)!=null?i:0)>0?` ${(o=r.state)==null?void 0:o.behind}\u2193`:""}`,tooltip:"Sync (Pull & Push)",arguments:[{uri:s}]})),r.pullRequest&&c.push(qt({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:V("scm statusbar command open pr",`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.pullRequest.repo,pullRequest:r.pullRequest.id}]})),t.sourceControl.statusBarCommands=c}ensureMergeConflictsGroup(t){const r="conflicts";let n=t.groups.find(i=>i.id===r);return n===void 0&&(n=t.sourceControl.createResourceGroup(r,V("scm group conflicts","Merge Conflicts")),n.hideWhenEmpty=!0,t.groups.push(n)),n}ensureStagedChangesGroup(t){const r="staged";let n=t.groups.find(i=>i.id===r);return n===void 0&&(n=t.sourceControl.createResourceGroup(r,V("scm group staged","Staged Changes")),n.hideWhenEmpty=!0,t.groups.push(n)),n}ensureWorkingChangesGroup(t){const r="changes";let n=t.groups.find(i=>i.id===r);return n===void 0&&(n=t.sourceControl.createResourceGroup(r,V("scm group changes","Changes")),t.groups.push(n)),n}getScmProvider(t){return this._scmProviders.find(r=>{var n;return((n=r.sourceControl.rootUri)==null?void 0:n.toString())===t.toString()})}getSourceControlFrom(t){if(t===void 0){if(this._scmProviders.length!==1)return;t=this._scmProviders[0].sourceControl}let r;if(su(t))r=t;else if(s_(t)){const n=t,i=this._scmProviders.find(o=>o.groups.includes(n));r=i==null?void 0:i.sourceControl}else{const n=t,i=this._scmProviders.find(o=>o.groups.some(s=>s.resourceStates.includes(n)));r=i==null?void 0:i.sourceControl}return r}}function su(e){return"rootUri"in e&&"inputBox"in e}function s_(e){return e!==void 0&&"id"in e&&"label"in e&&"resourceStates"in e&&Array.isArray(e.resourceStates)}function a_(e){return e!==void 0&&"resourceUri"in e&&e.resourceUri instanceof d.Uri}function Un(e){return"type"in e}async function is(e){var t,r,n;let i,o=V("discard","Discard Changes");if(e.length===1){const a=e[0];a.type===ye.Created?(i=V("confirm delete",`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,pt((t=a.resourceUri)!=null?t:a.uri)),o=V("delete file","Delete file")):a.type===ye.Deleted?(o=V("restore file","Restore file"),i=V("confirm restore","Are you sure you want to restore {0}?",pt((r=a.resourceUri)!=null?r:a.uri))):i=V("confirm discard","Are you sure you want to discard changes in {0}?",pt((n=a.resourceUri)!=null?n:a.uri))}else e.every(a=>a.type===ye.Created)?i=V("confirm delete multiple",`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,e.length):e.every(a=>a.type===ye.Deleted)?(o=V("restore files","Restore files"),i=V("confirm restore multiple","Are you sure you want to restore {0} files?",e.length)):i=V("confirm discard multiple","Are you sure you want to discard changes in {0} files?",e.length);return await d.window.showWarningMessage(i,{modal:!0},o)===o}async function In(e,t,r){if(e.length===0)return;if(e.length===1)return e[0].sourceControl.rootUri;const n=await d.window.showQuickPick(e.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:t,title:r});if(!!n)return n.uri}async function os(e,t,r,n,i,o,s){const a=new Set;let l;const c=d.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise((u,p)=>{l=d.Disposable.from(c.onDidHide(()=>u(void 0)),c.onDidChangeValue(f=>{if(f=f.trim(),!f){c.validationMessage=V("scm create branch prompt validation missing name","Please enter a valid branch name");return}if(a.has(f)){c.validationMessage=V("scm create branch prompt validation already exists","Branch '{0}' already exists",f);return}if(!Ta(f)){c.validationMessage=V("scm create branch prompt validation invalid name","'{0}' isn't a valid branch name",f);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const f=c.value;try{c.enabled=!1,c.busy=!0;const h=await e.createBranch(t,f,r,s);u(h)}catch(h){if(h instanceof or){c.enabled=!0,c.busy=!1,c.validationMessage=h.duplicate?V("scm create branch prompt validation already exists","Branch '{0}' already exists",f):V("scm create branch prompt validation invalid","Invalid branch name '{0}'",f),a.add(f);return}p(h)}})),c.prompt=n,c.placeholder=i,c.title=o,c.show()})}finally{c.dispose(),l==null||l.dispose()}}const Oe=(0,P.loadMessageBundle)();class Gt extends d.TimelineItem{static is(t){return t instanceof Gt}constructor(t,r,n,i,{dateType:o,showAuthor:s,dateFormatter:a}){var l;const c=n.message.indexOf(`
`),u=c!==-1?`${n.message.substring(0,c)} \u2026`:n.message,p=o==="authored"?n.authorDate:n.commitDate;super(u,(l=p==null?void 0:p.getTime())!=null?l:0);this.id=n.hash,this.contextValue=`vscode-vfs:${r}:file:commit`,this.command=i,s&&(this.description=n.authorName),this.detail=Oe("timeline item detail",`{0} ({1}) \u2014 {2}
{3}

{4}`,n.authorName,n.authorEmail,Qe(n.hash),a.format(p),n.message),this.iconPath=new d.ThemeIcon("git-commit"),this.rootUri=t,this.providerId=r,this.hash=n.hash,this.parents=n.parents,this.message=n.message}}class jr extends d.TimelineItem{static is(t){return t instanceof jr}constructor(t,r,n,i,o,{dateFormatter:s,staged:a}){const l=a?Oe("timeline staged changes","Staged Changes"):Oe("timeline uncommitted changes","Uncommitted Changes");super(l,n.timestamp);this.id=a?"index":"working",this.contextValue=`vscode-vfs:${r}:file:${this.id}`,this.command=o,this.iconPath=new d.ThemeIcon("git-commit"),a?this.detail=Oe("timeline index detail",`{0}  \u2014 {1}
{2}

{3}`,Oe("timeline you","You"),Oe("timeline index","Index"),s.format(new Date(n.timestamp)),_a(n.type)):this.detail=Oe("timeline working detail",`{0}  \u2014 {1}
{2}

{3}`,Oe("timeline you","You"),Oe("timeline working","Working Tree"),s.format(new Date(n.timestamp)),_a(n.type)),this.rootUri=t,this.providerId=r,this.hash=a?"~":"",this.parents=i,this.message=l}}class c_{constructor(t,r,n){this.providerService=t,this.changeStore=n,this._onDidChange=new d.EventEmitter,this.id="github-file-history",this.label=Oe("timeline.source","GitHub File History"),this.debouncer=new Ks(500),this.disposable=d.Disposable.from(this.debouncer,t.onDidChangeProviders(this.onProvidersChanged,this),t.onDidChangeRepositories(this.onRepositoriesChanged,this),r.onDidChange(i=>this.onUriChanged(i),this),n.onDidChange(i=>this.onUrisChanged(i),this),Ce.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),t.count&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.providerDisposable)==null||t.dispose(),this.disposable.dispose()}onConfigurationChanged(t){(t.affectsConfiguration("git.timeline.date")||t.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(t){this.ensureProviderRegistration(),this.fireChanged()}onRepositoriesChanged(t){if(this.rootUri===void 0)return;const r=this.rootUri.toString();(t.added.some(n=>n.uri.toString()===r)||t.removed.some(n=>n.uri.toString()===r))&&this.fireChanged()}onUriChanged(t){this.rootUri===void 0||this.rootUri.toString()!==t.toString()||this.fireChanged()}onUrisChanged(t){if(this.rootUri===void 0)return;const r=this.rootUri.toString();t.some(n=>n.rootUri.toString()===r)&&this.fireChanged()}async provideTimeline(t,r,n){var i;try{this.rootUri=this.providerService.getVirtualRootUri(t);for(const g of this.providerService.repositories)if(g.uri.path===this.rootUri.path){this.rootUri=g.uri;break}const o=this.providerService.getRelativeFilePath(this.rootUri,t),s=await this.providerService.getMetadata(this.rootUri);if(!s||n.isCancellationRequested)return{items:[]};const a=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:o||void 0,cursor:r.cursor,limit:typeof r.limit=="number"?r.limit:void 0});if(a===void 0||a.commits.length===0||n.isCancellationRequested)return{items:[]};const l=((i=a.paging)==null?void 0:i.more)?{cursor:a.paging.cursor}:void 0,c=new Intl.DateTimeFormat(d.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),u=Ce.getAny("git.timeline.date",void 0,"committed"),p=Ce.getAny("git.timeline.showAuthor",void 0,!0),f=a.commits.map(g=>new Gt(this.rootUri,s.provider.id,g,this.resolveDiffCommand(g,s,t,o),{dateType:u,showAuthor:p,dateFormatter:c})),h=r.cursor===void 0?this.changeStore.getChange(t):void 0;if(h){const g=Boolean(h.staged&&Ce.get("staging.enabled")),v=new jr(this.rootUri,s.provider.id,h,[a.commits[0].hash],this.changeStore.resolveDiffCommand(h.uri,this.providerService.getProviderUri(h.uri),g?Oe("diff title index","{0} (Index)",pt(h.uri)):Oe("diff title working","{0} (Working Tree)",pt(h.uri))),{dateFormatter:c,staged:g});f.splice(0,0,v)}return{items:f,paging:l}}catch(o){return ue.error(o),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=d.workspace.registerTimelineProvider([Le.scheme,...this.providerService.schemes],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let t;return[d.commands.registerCommand("remoteHub.timeline.copyCommitId",(r,n,i)=>{!Gt.is(r)||d.env.clipboard.writeText(r.hash)}),d.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(r,n,i)=>{!Gt.is(r)||d.env.clipboard.writeText(r.message)}),d.commands.registerCommand("remoteHub.timeline.openDiff",async(r,n,i)=>{var o;!Gt.is(r)&&!jr.is(r)||r.command!==void 0&&await d.commands.executeCommand(r.command.command,...(o=r.command.arguments)!=null?o:[])}),d.commands.registerCommand("remoteHub.timeline.openOnGitHub",async(r,n,i)=>{if(!Gt.is(r))return;const o=await this.providerService.getMetadata(r.rootUri);await to("remoteHub.openOnRemote",{provider:o.provider,repo:o.repo,sha:r.hash})}),d.commands.registerCommand("remoteHub.timeline.selectForCompare",async(r,n,i)=>{!n||!Gt.is(r)&&!jr.is(r)||(t={uri:n,left:r},await d.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),d.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(r,n,i)=>{if(!n||!Gt.is(r)&&!jr.is(r)||n.toString()!==(t==null?void 0:t.uri.toString()))return;const{left:o}=t,s=this.providerService.getRelativeFilePath(r.rootUri,n),a=await this.providerService.getMetadata(r.rootUri),l=pt(n),c=o.parents[0];let u;c===void 0?u=Oe("timeline diff title ref","{0} ({1})",l,Qe(r.hash)):o.hash===""?u=Oe("timeline diff title working","{0} (Working Tree)",l):o.hash==="~"?u=Oe("timeline diff title index","{0} (Index)",l):u=Oe("timeline diff title ref","{0} ({1})",l,Qe(o.hash));let p=o.hash===""||o.hash==="~"?n:this.providerService.createProviderUri(n,{repo:a.repo,ref:c!=null?c:"0000000000000000000000000000000000000000"},s);c===void 0&&(p=p.with({query:"~"}));const f=r.parents[0];let h;f===void 0?h=Oe("timeline diff title ref","{0} ({1})",l,Qe(r.hash)):f==="~"&&r.hash===""?h=Oe("timeline diff title working","{0} (Working Tree)",l):r.hash==="~"?h=Oe("timeline diff title index","{0} (Index)",l):h=Oe("timeline diff title ref","{0} ({1})",l,Qe(r.hash));const g=Oe("timeline diff title","{0} \u27F7 {1}",u,h),v=r.hash===""||r.hash==="~"?n:this.providerService.createProviderUri(n,{repo:a.repo,ref:r.hash},s);await d.commands.executeCommand("vscode.diff",p,v,g)})]}resolveDiffCommand(t,r,n,i,o){const s=pt(n),a=t.parents[0];let l;a===void 0?l=Oe("timeline diff title ref","{0} ({1})",s,Qe(t.hash)):t.hash===""?l=Oe("timeline diff title working","{0} (Working Tree)",s):t.hash==="~"?l=Oe("timeline diff title index","{0} (Index)",s):l=Oe("timeline diff title refs","{0} ({1}) \u27F7  {0} ({2})",s,Qe(a),Qe(t.hash));let c=this.providerService.createProviderUri(n,{repo:r.repo,ref:a!=null?a:"0000000000000000000000000000000000000000"},i);a===void 0&&(c=c.with({query:"~"}));const u=t.hash===""||t.hash==="~"?n:this.providerService.createProviderUri(n,{repo:r.repo,ref:t.hash},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[c,u,l,o]}}}class l_{constructor(t){this.providerService=t,this.disposable=d.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}handleUri(t){switch(ue.log(`RemoteUriHandler.handleUri: uri=${t.toString(!0)}`),t.path){case"/open":{let r;for(const n of t.query.split("&")){const[i,o]=n.split("=");if(i==="url"){r=decodeURIComponent(o);break}}if(ue.warn(`RemoteUriHandler.handleUri: Unable to find url to open in uri=${t.toString(!0)}`),!r)return;r=r.trim(),ue.warn(`RemoteUriHandler.handleUri: Opening url ${r}`),this.providerService.openWorkspaceForRemoteUrl(r,void 0,Ge.NewWindow);break}}}}const Lt=(0,P.loadMessageBundle)();let vr,lt;async function u_(e){if(ue.configure(e,ze.Debug),vr=e.extensionRuntime!==d.ExtensionRuntime.Node,ue.log("Running in",vr?"webworker":"node"),e.extension.id==="ms-vscode.remotehub-insiders"&&d.extensions.getExtension("ms-vscode.remotehub")!=null){ue.log("RemoteHub (Insiders) was NOT activated because RemoteHub is also installed"),d.window.showErrorMessage(Lt("insiders warning","RemoteHub (Insiders) cannot be used while RemoteHub is also installed. Please ensure that only one version of RemoteHub is installed."));return}Bs.configure(e);try{const t=new Le,r=new ai(e.workspaceState);lt=new Ap(t,e.workspaceState);const n=new o_(t,r,lt),i=new Gv(e.globalStorageUri),o=new Yv(t,r),s=new jv(t);e.subscriptions.push(t,t.onDidChangeRepositories(a=>{for(const l of a.added){const c=r.get(l.uri);if(!c)return;const{HEAD:u,defaultBranch:p}=c,f=u.detached?` (${u.detached.type===mt.Commit?Qe(u.detached.name):u.detached.name})`:u.branch.name!==p.name?` (${u.branch.name}) `:"",h={uri:l.uri,type:"folder",label:`${c.name}${f}[${c.provider.name}]`};d.commands.executeCommand("_workbench.addToRecentlyOpened",h)}}),n,new i_(t,r,lt),new Kf,new tw(t,r,lt),new c_(t,r,lt),new l_(t),...Zf(e,t,r,lt),...p_(s),s,i,...d_(t,e.globalState,r,lt,n,i));for(const a of r.getForWorkspace()){if(a.data.HEAD.detached)continue;lt.hasChanges(a.folderUri)?t.fetch(a.folderUri):t.sync(a.folderUri,lt);const l=e.globalState.get(`remoteHub:filesToOpen|${a.folderUri.toString()}`);if(l){e.globalState.update(`remoteHub:filesToOpen|${a.folderUri.toString()}`,void 0);for(const c of l)d.commands.executeCommand("vscode.open",d.Uri.joinPath(a.folderUri,c))}}return Promise.resolve(o)}catch(t){ue.error(t),t instanceof en&&ss(t.name);return}}async function ss(e){const t=Lt("repository not found open","Open Repository");await d.window.showErrorMessage(Lt("repository not found","Unable to find repository named '{0}'. Would you like to open another repository?",e),t)===t&&d.commands.executeCommand("remoteHub.openRepository")}function d_(e,t,r,n,i,o){return[h_(e,t,r,n,i,o),...Ce.get("insiders")?[f_(e,t,r,n,i,o)]:[]]}function h_(e,t,r,n,i,o){const s=new tu(e,r),a=new nu(e,s,r,n,o),l=new n_(e,t);async function c(){var p,f;const h=(p=d.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?p:d.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),g=(f=await(h==null?void 0:h.activate()))==null?void 0:f.registerGitProvider(i),C=r.getForWorkspace("github").find(R=>Boolean(R.data.pullRequest));if(C){const{repo:{owner:R,name:D},id:N}=C.data.pullRequest;d.commands.executeCommand("github.api.preloadPullRequest",`https://github.com/${R}/${D}/pulls/${N}`)}return g}const u=c();return d.Disposable.from(e.register("github","GitHub",s,a,l),s,a,{dispose:async()=>{var p;return void((p=await u)==null?void 0:p.dispose())}})}function f_(e,t,r,n,i,o){const s=new Op(e,r),a=new el(e,s,r,n,o),l=new Hv(e,t);return d.Disposable.from(e.register("azdo","AzureDevOps",s,a,l),s,a)}function p_(e){return[e.register(new Xv)]}function as(){var e,t;return(t=(e=d.workspace.workspaceFolders)==null?void 0:e.every(r=>r.uri.scheme===Le.scheme))!=null?t:!1}async function ut(e,t,r,n){var i,o,s,a;if(r===Ge.AddToWorkspace){const c=(o=(i=d.workspace.workspaceFolders)==null?void 0:i.length)!=null?o:0;return void d.workspace.updateWorkspaceFolders(c,0,{uri:e,name:t})}if(r===Ge.CurrentWindow&&lt!==void 0&&((a=(s=d.workspace.workspaceFolders)==null?void 0:s.some(u=>u.uri.scheme===Le.scheme&&lt.hasChanges(u.uri)))!=null?a:!1)){const u={title:Lt("continue","Continue")},p={title:Lt("cancel","Cancel"),isCloseAffordance:!0};if(await d.window.showWarningMessage(Lt("open folder uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them from anywhere else. You can always re-open this workspace to see your changes again.

Do you want to continue opening a new workspace?`),{modal:!0},u,p)!==u)return}n&&await n.memento.update(`remoteHub:filesToOpen|${e.toString()}`,n.paths);let l;if(d.env.remoteName){const c=Lt("open folder location local","Open from Local Machine"),u=Lt("open folder location remote","Open from Remote Machine"),p=await d.window.showInformationMessage(Lt("open folder location",`Do you want to open the remote repository from your local or remote machine?

Opening from the current remote connection will allow you to continue working on the remote repository from any other machine connected to this remote machine.`),{modal:!0},c,u);if(!p)return;p===c&&(l=!0)}return void d.commands.executeCommand("vscode.openFolder",e,{forceNewWindow:r===Ge.NewWindow,forceLocalWindow:l})}})(),module.exports=$i})();
