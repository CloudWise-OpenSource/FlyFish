{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"vscode\"","webpack:///external \"path\"","webpack:///./src/utils/typeConverters.ts","webpack:///./node_modules/vscode-nls/lib/main.js","webpack:///./src/typescriptService.ts","webpack:///./src/utils/dependentRegistration.ts","webpack:///./src/utils/api.ts","webpack:///./src/utils/dispose.ts","webpack:///./node_modules/diagnostic-channel/dist/src/channel.js","webpack:///./node_modules/applicationinsights/out/Library/Logging.js","webpack:///external \"fs\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack:///./src/utils/arrays.ts","webpack:///./src/protocol.const.ts","webpack:///./node_modules/applicationinsights/out/Library/Util.js","webpack:///./src/utils/languageModeIds.ts","webpack:///./src/utils/fileSchemes.ts","webpack:///external \"os\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack:///./src/utils/cancellation.ts","webpack:///./node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack:///./src/utils/languageDescription.ts","webpack:///./src/utils/tsconfig.ts","webpack:///./node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack:///./node_modules/applicationinsights/out/Declarations/Constants.js","webpack:///external \"url\"","webpack:///./node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack:///./src/utils/modifiers.ts","webpack:///./src/utils/memoize.ts","webpack:///external \"assert\"","webpack:///external \"http\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack:///external \"https\"","webpack:///./src/utils/objects.ts","webpack:///./src/utils/resourceMap.ts","webpack:///./src/utils/previewer.ts","webpack:///./src/languageFeatures/definitionProviderBase.ts","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack:///external \"util\"","webpack:///./node_modules/emitter-listener/listener.js","webpack:///./node_modules/shimmer/index.js","webpack:///external \"child_process\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack:///./node_modules/applicationinsights/out/Library/Config.js","webpack:///./node_modules/applicationinsights/out/Library/Context.js","webpack:///./src/utils/temp.electron.ts","webpack:///./src/commands/learnMoreAboutRefactorings.ts","webpack:///./src/languageFeatures/codeLens/baseCodeLensProvider.ts","webpack:///./src/tsServer/server.ts","webpack:///./src/tsServer/serverError.ts","webpack:///./src/utils/codeAction.ts","webpack:///./src/utils/errorCodes.ts","webpack:///./src/utils/fixNames.ts","webpack:///./src/tsServer/versionProvider.ts","webpack:///./src/utils/async.ts","webpack:///./src/utils/configuration.ts","webpack:///./src/utils/platform.ts","webpack:///./src/utils/relativePathResolver.ts","webpack:///./node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack:///external \"module\"","webpack:///external \"timers\"","webpack:///./node_modules/stack-chain/index.js","webpack:///external \"zlib\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack:///./node_modules/applicationinsights/out/Library/Traceparent.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/scanner.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/format.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/parser.js","webpack:///./node_modules/jsonc-parser/lib/esm/impl/edit.js","webpack:///./node_modules/jsonc-parser/lib/esm/main.js","webpack:///./src/extension.ts","webpack:///./src/api.ts","webpack:///./src/commands/commandManager.ts","webpack:///./src/commands/index.ts","webpack:///./src/commands/configurePlugin.ts","webpack:///./src/commands/goToProjectConfiguration.ts","webpack:///./src/commands/openTsServerLog.ts","webpack:///./src/commands/reloadProject.ts","webpack:///./src/commands/restartTsServer.ts","webpack:///./src/commands/selectTypeScriptVersion.ts","webpack:///./src/languageFeatures/languageConfiguration.ts","webpack:///./src/lazyClientHost.ts","webpack:///./src/typeScriptServiceClientHost.ts","webpack:///./src/languageFeatures/fileConfigurationManager.ts","webpack:///./node_modules/semver/semver.js","webpack:///./src/languageProvider.ts","webpack:///./src/tsServer/cachedResponse.ts","webpack:///./src/languageFeatures/callHierarchy.ts","webpack:///./src/languageFeatures/codeLens/implementationsCodeLens.ts","webpack:///./src/utils/regexp.ts","webpack:///./src/languageFeatures/codeLens/referencesCodeLens.ts","webpack:///./src/tsServer/callbackMap.ts","webpack:///./src/tsServer/requestQueue.ts","webpack:///./src/languageFeatures/completions.ts","webpack:///./src/utils/snippetForFunctionCall.ts","webpack:///./src/languageFeatures/definitions.ts","webpack:///./src/languageFeatures/directiveCommentCompletions.ts","webpack:///./src/languageFeatures/documentHighlight.ts","webpack:///./src/languageFeatures/documentSymbol.ts","webpack:///./src/languageFeatures/fileReferences.ts","webpack:///./src/languageFeatures/fixAll.ts","webpack:///./src/languageFeatures/folding.ts","webpack:///./src/languageFeatures/formatting.ts","webpack:///./src/languageFeatures/hover.ts","webpack:///./src/languageFeatures/implementations.ts","webpack:///./src/languageFeatures/jsDocCompletions.ts","webpack:///./src/languageFeatures/organizeImports.ts","webpack:///./src/languageFeatures/quickFix.ts","webpack:///./src/languageFeatures/refactor.ts","webpack:///./src/languageFeatures/references.ts","webpack:///./src/languageFeatures/rename.ts","webpack:///./src/languageFeatures/semanticTokens.ts","webpack:///./src/languageFeatures/signatureHelp.ts","webpack:///./src/languageFeatures/smartSelect.ts","webpack:///./src/languageFeatures/tagClosing.ts","webpack:///./src/languageFeatures/typeDefinitions.ts","webpack:///./src/tsServer/versionStatus.ts","webpack:///./src/typescriptServiceClient.ts","webpack:///./src/languageFeatures/diagnostics.ts","webpack:///./src/tsServer/bufferSyncSupport.ts","webpack:///./src/tsServer/spawner.ts","webpack:///./src/tsServer/versionManager.ts","webpack:///./src/utils/logger.ts","webpack:///./src/utils/pluginPathsProvider.ts","webpack:///./src/utils/telemetry.ts","webpack:///./node_modules/vscode-extension-telemetry/lib/telemetryReporter.js","webpack:///./node_modules/applicationinsights/out/applicationinsights.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/azure-coretracing.pub.js","webpack:///./node_modules/diagnostic-channel/node_modules/semver/semver.js","webpack:///external \"@opentelemetry/tracing\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack:///external \"stream\"","webpack:///external \"console\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Connection$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Pool$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack:///external \"events\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/tedious.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack:///./node_modules/cls-hooked/index.js","webpack:///./node_modules/cls-hooked/node_modules/semver/semver.js","webpack:///./node_modules/cls-hooked/context.js","webpack:///external \"async_hooks\"","webpack:///./node_modules/cls-hooked/context-legacy.js","webpack:///./node_modules/async-hook-jl/index.js","webpack:///./node_modules/async-hook-jl/async-hook.js","webpack:///./node_modules/async-hook-jl/patches/next-tick.js","webpack:///./node_modules/async-hook-jl/patches/promise.js","webpack:///./node_modules/async-hook-jl/patches/timers.js","webpack:///./node_modules/stack-chain/stack-chain.js","webpack:///./node_modules/stack-chain/format.js","webpack:///./node_modules/continuation-local-storage/context.js","webpack:///./node_modules/async-listener/index.js","webpack:///./node_modules/async-listener/node_modules/semver/semver.js","webpack:///./node_modules/async-listener/glue.js","webpack:///external \"net\"","webpack:///external \"dns\"","webpack:///external \"crypto\"","webpack:///./node_modules/async-listener/es6-wrapped-promise.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Console.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack:///external \"constants\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack:///./node_modules/applicationinsights/out/Library/Tracestate.js","webpack:///./node_modules/applicationinsights/out/Library/QuickPulseStateManager.js","webpack:///./node_modules/applicationinsights/out/Library/ConnectionStringParser.js","webpack:///./node_modules/applicationinsights/out/Library/QuickPulseEnvelopeFactory.js","webpack:///./node_modules/applicationinsights/out/Library/QuickPulseSender.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/NativePerformance.js","webpack:///external \"applicationinsights-native-metrics\"","webpack:///./node_modules/applicationinsights/out/Library/NodeClient.js","webpack:///./node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack:///./node_modules/applicationinsights/out/Library/Channel.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/PerformanceMetricsTelemetryProcessor.js","webpack:///./node_modules/applicationinsights/out/Library/Sender.js","webpack:///./node_modules/applicationinsights/out/Library/EnvelopeFactory.js","webpack:///./src/utils/tracer.ts","webpack:///./src/utils/typingsStatus.ts","webpack:///./src/utils/largeProjectStatus.ts","webpack:///./src/languageFeatures/updatePathsOnRename.ts","webpack:///./src/languageFeatures/workspaceSymbols.ts","webpack:///./src/utils/lazy.ts","webpack:///./src/utils/managedFileContext.ts","webpack:///./src/tsServer/cancellation.electron.ts","webpack:///./src/tsServer/logDirectoryProvider.electron.ts","webpack:///./src/tsServer/serverProcess.electron.ts","webpack:///./src/tsServer/versionProvider.electron.ts","webpack:///./src/utils/activeJsTsEditorTracker.ts","webpack:///./src/utils/fileSystem.electron.ts","webpack:///./src/utils/plugins.ts","webpack:///./src/task/taskProvider.ts","webpack:///./src/test/testUtils.ts","webpack:///./src/utils/fs.ts","webpack:///./src/task/tsconfigProvider.ts","webpack:///./src/languageFeatures/tsconfig.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","Range","Position","fromTextSpan","span","fromLocations","start","end","toTextSpan","range","toLocation","vscode","Math","max","line","offset","toFileRangeRequestArgs","file","startLine","startOffset","character","endLine","endOffset","toFormattingRequestArgs","fromLocation","tslocation","vsPosition","toFileLocationRequestArgs","position","Location","resource","tsTextSpan","TextEdit","fromCodeEdit","edit","newText","WorkspaceEdit","withFileCodeEdits","workspaceEdit","client","edits","toResource","fileName","textChange","textChanges","replace","fromFileCodeEdits","SymbolKind","fromProtocolScriptElementKind","kind","PConst","Kind","Module","class","Class","enum","Enum","enumMember","EnumMember","interface","Interface","indexSignature","callSignature","method","Method","memberVariable","memberGetAccessor","memberSetAccessor","Property","variable","let","const","localVariable","alias","Variable","function","localFunction","Function","constructSignature","constructorImplementation","Constructor","typeParameter","TypeParameter","string","String","MessageFormat","BundleFormat","LocalizeInfo","resolvedBundles","options","isPseudo","path","fs","toString","isDefined","isNumber","isString","readJsonFileSync","filename","JSON","parse","readFileSync","format","message","args","length","match","rest","index","arg","replacement","createScopedLocalizeFunction","messages","_i","arguments","console","error","Error","stack","warn","localize","cacheBundle","bundle","loadNlsBundleOrCreateFromI18n","header","bundlePath","result","join","cacheRoot","id","hash","useMemoryOnly","writeBundle","encoding","flag","Date","utimes","err","code","SyntaxError","log","unlink","metaDataPath","languagePackLocation","translationsConfig","languagePack","contents","metaData","module_2","entry","translations","outDir","resultMessages","keys","messageKey","translatedMessage","undefined","push","createNLSBundle","writeFileSync","stringify","loadDefaultNlsBundle","folder","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","languagePackId","translationsConfigFile","candidate","root","language","existsSync","lastIndexOf","substring","findInTheBoxBundle","loadMessageBundle","ext","extname","substr","messageFormat","both","headerFile","dirname","parent","tryFindMetaDataHeaderFile","nlsBundle","module_3","json","resolvedLanguage","cacheLanguageResolution","locale","resolveLanguage","Array","isArray","is","comment","process","env","VSCODE_NLS_CONFIG","vscodeOptions_1","availableLanguages","toLowerCase","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","exists","writeFile","_a","initializeSettings","config","opts","bundleFormat","standalone","ServerType","ServerResponse","Cancelled","reason","type","NoContent","ClientCapability","capabilities","this","Set","capability","has","Condition","Disposable","getValue","onUpdate","super","_onDidChange","_register","EventEmitter","onDidChange","event","_value","newValue","fire","ConditionalRegistration","conditions","doRegister","registration","condition","update","dispose","every","minVersion","apiVersion","gte","onTsServerStarted","configValue","workspace","getConfiguration","onDidChangeConfiguration","some","requiredCapability","onDidChangeCapabilities","disposeAll","disposables","item","pop","_isDisposed","_disposables","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","version","subscribers","contextPreservationFunction","cb","knownPatches","currentlyPublishing","shouldPublish","listeners","filter","publish","standardEvent_1","timestamp","now","data","forEach","listener","e","subscribe","unsubscribe","splice","reset","_this","getOwnPropertyNames","prop","bindToContext","addContextPreservation","preserver","previousPreservationStack","registerMonkeyPatch","packageName","patcher","getPatchesObject","global","diagnosticsSource","channel","Logging","info","optionalParams","enableDebug","TAG","disableWarnings","disableErrors","__export","empty","freeze","a","b","itemEquals","x","array","concat","apply","directory","externalModuleName","keyword","primitiveType","script","warning","parameter","DiagnosticCategory","suggestion","KindModifiers","optional","depreacted","color","dtsFile","tsFile","tsxFile","jsFile","jsxFile","jsonFile","fileExtensionKindModifiers","DisplayPartKind","functionName","methodName","parameterName","propertyName","punctuation","text","EventName","__assign","assign","http","https","url","constants","RequestResponseHeaders","Util","getCookie","cookie","cookieName","cookies","split","trim","indexOf","str","int32ArrayToBase64","toChar","v","fromCharCode","map","Buffer","from","random32","random","randomu32","w3cTraceId","tmp","hexValues","oct","clockSequenceHi","isValidW3CId","obj","isError","isPrimitive","input","propType","isDate","msToTimeSpan","totalms","isNaN","sec","toFixed","min","floor","hour","days","extractError","looseError","extractObject","origProperty","toJSON","validateStringMap","field","stringTarget","constructor","MAX_PROPERTY_LENGTH","canIncludeCorrelationHeader","requestUrl","excludedDomains","correlationHeaderExcludedDomains","RegExp","test","hostname","getCorrelationContextTarget","response","contextHeaders","headers","requestContextHeader","keyValues","keyValue","makeRequest","requestOptions","requestCallback","requestUrlParsed","host","port","pathname","proxyUrl","protocol","proxyHttpsUrl","proxyHttpUrl","proxyUrlParsed","Host","isHttps","httpsAgent","agent","httpAgent","tlsRestrictedAgent","request","safeIncludeCorrelationHeader","correlationHeader","addCorrelationIdHeaderFromString","setHeader","requestContextSourceKey","correlationId","components","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","typescript","typescriptreact","javascript","javascriptreact","jsxTags","doc","languages","untitled","git","vsls","walkThroughSnippet","vscodeNotebookCell","semanticSupportedSchemes","disabledSchemes","Domain","noopDisposable","nulToken","isCancellationRequested","onCancellationRequested","CorrelationIdManager","queryCorrelationId","callback","appIdUrlString","profileQueryEndpoint","instrumentationKey","completedLookups","pendingLookups","fetchAppId","disableAppInsightsAutoCollection","req","res","statusCode","appId_1","setEncoding","on","correlationIdPrefix","setTimeout","correlationIdRetryIntervalMs","cancelCorrelationIdQuery","generateRequestId","parentId","suffix","currentRootId","appendSuffix","generateRootId","getRootId","endIndex","startIndex","delimiter","requestIdMaxLength","trimPosition","w3cEnabled","allDiagnosticLanguages","standardLanguageDescriptions","diagnosticOwner","diagnosticSource","diagnosticLanguage","modeIds","languageModeIds","configFilePattern","basename","fsPath","DiagChannel","CorrelationContextManager","getCurrentContext","enabled","context","session","CONTEXT_NAME","generateContextObject","operationId","operationName","correlationContextHeader","traceparent","tracestate","operation","customProperties","CustomPropertiesImpl","runWithContext","fn","wrapEmitter","emitter","bindEmitter","wrapCallback","enable","forceClsHooked","isNodeVersionCompatible","hasEverEnabled","cls","shouldUseClsHooked","createNamespace","registerContextPreservation","disable","nodeVer","versions","node","parseInt","canUseClsHooked","greater800","less820","greater470","props","addHeaderData","keyvals","keyval","parts","serializeToHeader","getProperty","setProperty","val","bannedCharacters","QuickPulseCounter","PerformanceCounter","DEFAULT_BREEZE_ENDPOINT","DEFAULT_LIVEMETRICS_ENDPOINT","DEFAULT_LIVEMETRICS_HOST","PerformanceToQuickPulseCounter","PROCESSOR_TIME","REQUEST_RATE","REQUEST_DURATION","COMMITTED_BYTES","REQUEST_FAILURE_RATE","DEPENDENCY_RATE","DEPENDENCY_FAILURE_RATE","DEPENDENCY_DURATION","EXCEPTION_RATE","QuickPulseDocumentType","Event","Exception","Trace","Metric","Request","Dependency","Availability","QuickPulseType","TelemetryTypeStringToQuickPulseType","EventData","ExceptionData","MessageData","MetricData","RequestData","RemoteDependencyData","AvailabilityData","TelemetryTypeStringToQuickPulseDocumentType","requestContextTargetKey","requestIdHeader","parentIdHeader","rootIdHeader","traceparentHeader","traceStateHeader","kindModifiers","_target","descriptor","fnKey","memoizeKey","configurable","writable","HttpDependencyParser","CorrelationContextManager_1","Traceparent","AutoCollectHttpDependencies","INSTANCE","_client","isEnabled","_isEnabled","_isInitialized","_initialize","IsInitialized","isInitialized","originalRequest","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","telemetry","uniqueRequestId","uniqueTraceparent","requestParser","currentContext","isValidTraceId","traceId","updateSpanId","getBackCompatRequestId","requestNumber","getUrl","getHeader","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","onError","equals","one","other","oneKeys","sort","otherKeys","ResourceMap","_normalizePath","defaultPathNormalizer","_map","Map","size","toKey","set","delete","clear","values","isCaseInsensitivePath","isWindowsPath","onCaseInsenitiveFileSystem","scheme","fileSchemes","processInlineTags","_","tag","link","replaceLinks","getTagDocumentation","filePathConverter","body","convertLinkTags","param","label","makeCodeblock","captionTagMatches","emailMatch","getTagBodyText","plainWithLinks","out","currentLink","part","target","with","fragment","tagsMarkdownPreview","tags","addMarkdownDocumentation","documentation","converter","appendMarkdown","tagsPreview","MarkdownString","definitionType","document","token","toOpenedFilePath","typeConverters","execute","location","publishers","unpatchedModules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","shimmer","wrap","unwrap","SYMBOL","propertyIsEnumerable","_listeners","self","_events","_findAndProcess","before","unprocessed","_process","_wrap","unwrapped","visit","wrapped","onAddListener","onEmit","addListener","removeListener","emit","adding","existing","slice","returned","__wrapped","remover","isFunction","funktion","logger","nodule","wrapper","original","__unwrap","massWrap","nodules","names","massUnwrap","os","Constants","AutoCollectPerformance","collectionInterval","enableLiveMetricsCounters","_lastIntervalRequestExecutionTime","_lastIntervalDependencyExecutionTime","_collectionInterval","_enableLiveMetricsCounters","_handle","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","_lastDependencies","totalDependencyCount","_totalDependencyCount","totalFailedDependencyCount","_totalFailedDependencyCount","_lastExceptions","totalExceptionCount","_totalExceptionCount","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","setInterval","trackPerformance","unref","clearInterval","countRequest","duration","success","durationMs","_intervalRequestExecutionTime","countException","countDependency","_intervalDependencyExecutionTime","_trackCpu","_trackMemory","_trackNetwork","_trackDependencyRate","_trackExceptionRate","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","trackMetric","PROCESS_TIME","freeMem","freemem","usedMem","memoryUsage","rss","committedMemory","totalmem","PRIVATE_BYTES","AVAILABLE_BYTES","lastRequests","requests","intervalRequests","intervalFailedRequests","elapsedMs","elapsedSeconds","averageRequestExecutionTime","requestsPerSec","failedRequestsPerSec","lastDependencies","dependencies","intervalDependencies","intervalFailedDependencies","averageDependencyExecutionTime","dependenciesPerSec","failedDependenciesPerSec","lastExceptions","exceptions","intervalExceptions","exceptionsPerSec","_lastRequestExecutionTime","_lastDependencyExecutionTime","ConnectionStringParser","Config","setupString","endpointBase","connectionStringEnv","ENV_connectionString","csCode","csEnv","iKeyCode","instrumentationkey","_getInstrumentationKey","endpointUrl","ingestionendpoint","maxBatchSize","maxBatchIntervalMs","disableAppInsights","samplingPercentage","setCorrelationId","ENV_http_proxy","ENV_https_proxy","ENV_profileQueryEndpoint","_quickPulseHost","liveendpoint","ENV_quickPulseHost","_profileQueryEndpoint","endpoint","iKey","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","ENV_nativeMetricsDisablers","ENV_nativeMetricsDisableAll","Contracts","Context","packageJsonPath","ContextTagKeys","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","resolve","__dirname","appVersion","packageJson","exception","applicationVersion","deviceId","cloudRoleInstance","deviceOSVersion","release","cloudRole","DefaultRoleName","arch","platform","sdkVersion","internalSdkVersion","makeRandomHexString","chars","getRootTempDir","dir","getuid","tmpdir","mkdirSync","getInstanceTempDir","prefix","LearnMoreAboutRefactoringsCommand","docUrl","window","activeTextEditor","isTypeScriptDocument","openExternal","Uri","ExecutionTarget","RequestState","ProcessBasedTsServer","_serverId","_serverSource","_tsServerLogFile","_requestCanceller","_version","_telemetryReporter","_tracer","_requestQueue","RequestQueue","_callbacks","CallbackMap","_pendingResponses","_onEvent","onEvent","_onExit","onExit","_onError","onData","msg","dispatchMessage","destroy","serverRequest","write","kill","dispatchResponse","_serverType","seq","request_seq","fetch","traceRequestCompleted","onSuccess","traceEvent","sendNextRequests","command","tryDeletePendingRequest","logTrace","tryCancelOngoingRequest","fetchCallback","traceResponse","TypeScriptServerError","executeInfo","createRequest","requestInfo","expectsResponse","expectsResult","isAsync","queueingType","getQueueingType","lowPriority","Promise","reject","add","queuingStartTime","tryCancelRequest","catch","logTelemetry","enqueue","dequeue","sendRequest","requestItem","traceRequest","fenceCommands","RequestQueueingType","Fence","LowPriority","Normal","RequestRouter","servers","delegate","sharedCommands","executionTarget","requestStates","Unresolved","firstRequest","source","CancellationTokenSource","state","Resolved","cancel","serverIndex","server","executeImpl","then","erroredRequest","find","onFatalError","Errored","canRun","GetErrRoutingTsServer","getErrServer","getErr","mainServer","primary","router","includes","diagnosticEvents","tsServerLogFile","configFileDiag","syntaxDiag","semanticDiag","suggestionDiag","SyntaxRoutingTsServer","enableDynamicRouting","_projectLoading","syntaxServer","syntax","semanticServer","semantic","execInfo","Semantic","Syntax","syntaxAlwaysCommands","semanticCommands","projectLoading","syntaxAllowedCommands","projectLoadingStart","projectLoadingFinish","serverId","serverMessage","serverStack","sanitizedStack","displayName","parsedResult","parseErrorText","serverCommand","serverid","sanitizedstack","badclient","errorText","errorPrefix","startsWith","prefixFreeErrorText","newlineIndex","sanitizeStack","regex","exec","getEditForCodeAction","action","changes","async","applyCodeActionCommands","commands","applyEdit","variableDeclaredButNeverUsed","propertyDeclaretedButNeverUsed","allImportsAreUnused","unreachableCode","unusedLabel","fallThroughCaseInSwitch","notAllCodePathsReturnAValue","incorrectlyImplementsInterface","cannotFindName","extendsShouldBeImplements","asyncOnlyAllowedInAsyncFunctions","annotateWithTypeFromJSDoc","constructorForDerivedNeedSuperCall","extendsInterfaceBecomesImplements","awaitInSyncFunction","classIncorrectlyImplementsInterface","classDoesntImplementInheritedAbstractMember","unusedIdentifier","forgottenThisPropertyAccess","spelling","fixImport","addMissingAwait","addMissingOverride","defaultDelay","timeout","completionPromise","task","delay","cancelTimeout","clearTimeout","TsServerLogLevel","fromString","Terse","Verbose","Off","ImplicitProjectConfiguration","configuration","checkJs","readCheckJs","experimentalDecorators","readExperimentalDecorators","strictNullChecks","readImplicitStrictNullChecks","strictFunctionTypes","readImplicitStrictFunctionTypes","objects","TypeScriptServiceConfiguration","tsServerLogLevel","extractLocale","globalTsdk","extractGlobalTsdk","localTsdk","extractLocalTsdk","npmLocation","readNpmLocation","readTsServerLogLevel","tsServerPluginPaths","readTsServerPluginPaths","implictProjectConfiguration","disableAutomaticTypeAcquisition","readDisableAutomaticTypeAcquisition","separateSyntaxServer","readUseSeparateSyntaxServer","enableProjectDiagnostics","readEnableProjectDiagnostics","maxTsServerMemory","readMaxTsServerMemory","enablePromptUseWorkspaceTsdk","readEnablePromptUseWorkspaceTsdk","watchOptions","readWatchOptions","includePackageJsonAutoImports","readIncludePackageJsonAutoImports","enableTsServerTracing","readEnableTsServerTracing","inspectValue","pathPrefixes","sep","pathPrefix","homedir","inspect","globalValue","fixPathPrefixes","workspaceValue","setting","memoryInMB","Number","isSafeInteger","navigator","uiKind","UIKind","Web","relativePath","workspaceFolders","rootPrefixes","rootPrefix","uri","semver","moduleModule","nativeModules","binding","originalRequire","patchedModules","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","satisfies","versionSpecifier","patch","_stackChain","Base","Data","DataPoint","DataPointType","Envelope","ExceptionDetails","PageViewData","SeverityLevel","StackFrame","extendStatics","__extends","setPrototypeOf","__proto__","__","_super","ver","properties","measurements","RequestParser","startTime","_setStatus","status","endTime","_isSuccess","traceFlag","DEFAULT_TRACE_FLAG","DEFAULT_VERSION","spanId","traceparentArr","len","isValidSpanId","legacyRootId","HttpRequestParser","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","getOperationId","getRequestId","getOperationName","getCorrelationContextHeader","getTraceparent","getTracestate","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","wrapServerEventHandler","originalAddListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","getOperationParentId","once","headersSent","ellapsedMilliseconds","requestTelemetry","getRequestTelemetry","tagOverrides","getRequestTags","getLegacyRootId","createScanner","ignoreTrivia","pos","tokenOffset","lineNumber","lineStartOffset","tokenLineStartOffset","prevTokenLineStartOffset","scanError","scanHexDigits","count","exact","digits","ch","charCodeAt","scanNext","isWhiteSpace","isLineBreak","ch3","scanString","safeLength","commentClosed","isDigit","scanNumber","isUnknownContentCharacter","setPosition","newPosition","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenStartLine","getTokenStartCharacter","getTokenError","documentText","initialIndentLevel","formatText","formatTextStart","rangeStart","rangeEnd","isEOL","content","nChars","tabSize","charAt","computeIndentLevel","indentValue","eol","getEOL","lineBreak","indentLevel","insertSpaces","repeat","scanner","hasError","newLineAndIndent","editOperations","addEdit","firstToken","firstTokenStart","firstTokenEnd","secondToken","replaceContent","ParseOptions","parseTree","errors","DEFAULT","currentParent","children","ensurePropertyComplete","onValue","valueNode","onObjectBegin","onObjectProperty","onObjectEnd","onArrayBegin","onArrayEnd","onLiteralValue","getNodeType","onSeparator","colonOffset","findNodeAtLocation","path_1","segment","found","_b","propertyNode","visitor","_scanner","toNoArgVisit","visitFunction","toOneArgVisit","onComment","disallowComments","allowTrailingComma","handleError","skipUntilAfter","skipUntil","parseString","isValue","parseValue","needsComma","parseArray","parseObject","tokenValue","parseLiteral","allowEmptyContent","originalPath","lastSegment","propertyIndex","removeBegin","removeEnd","previous","withFormatting","newProperty","getInsertionIndex","insertIndex","removalIndex","toRemove","isArrayInsertion","toModify","formattingOptions","begin","edit_1","segments","earlyReturnException","previousNode","previousNodeInst","isAtPropertyKey","setPreviousNode","last","matches","pattern","k","currentProperty","previousParents","findNodeAtOffset","includeRightBound","contains","getNodePath","getNodeValue","replaceCh","printParseErrorCode","modify","applyEdits","pluginManager","PluginManager","subscriptions","commandManager","CommandManager","onCompletionAccepted","logDirectoryProvider","NodeLogDirectoryProvider","versionProvider","DiskTypeScriptVersionProvider","LanguageConfigurationManager","activeJsTsEditorTracker","ActiveJsTsEditorTracker","lazyClientHost","createLazyClientHost","cancellerFactory","nodeRequestCancellerFactory","processFactory","ChildServerProcess","registerBaseCommands","register","serviceClient","lazilyActivateClient","getExtensionApi","rmdirSync","temp","recursive","ApiV0","_pluginManager","pluginId","setConfiguration","registerCommand","impl","thisArg","ReloadTypeScriptProjectsCommand","ReloadJavaScriptProjectsCommand","SelectTypeScriptVersionCommand","OpenTsServerLogCommand","RestartTsServerCommand","TypeScriptGoToProjectConfigCommand","JavaScriptGoToProjectConfigCommand","ConfigurePluginCommand","editor","activeJsTsEditor","openProjectConfigForFile","openTsServerLogFile","reloadProjects","restartTsServer","showVersionPicker","jsTsLanguageConfiguration","indentationRules","decreaseIndentPattern","increaseIndentPattern","unIndentedLinePattern","wordPattern","onEnterRules","beforeText","afterText","indentAction","IndentAction","IndentOutdent","appendText","None","previousLineText","removeText","Indent","EMPTY_ELEMENTS","jsxTagsLanguageConfiguration","standardLanguages","registerConfiguration","setLanguageConfiguration","onCaseInsensitiveFileSystem","services","lazy","clientHost","supportedLanguage","flatten","plugins","hasActivated","maybeActivate","textDocument","languageId","isSupportedDocument","toPath","textDocuments","openListener","onDidOpenTextDocument","styleCheckDiagnostics","errorCodes","TypeScriptServiceClientHost","descriptions","languagePerId","reportStyleCheckAsWarnings","allModeIds","getAllModeIds","onDiagnosticsReceived","diagnostics","diagnosticsReceived","onConfigDiagnosticsReceived","diag","configFileDiagnosticsReceived","onResendModelsRequested","populateService","AtaProgressReporter","typingsStatus","ProjectStatus","fileConfigurationManager","description","manager","telemetryReporter","handles","ensureServiceStarted","onReady","plugin","configNamespace","registerExtensionLanguageProvider","isExternal","triggerAllDiagnostics","configurationChanged","executeWithoutWaitingForResponse","findLanguage","bufferSyncSupport","typescriptConfig","openTextDocument","reInitialize","createMarkerDatas","configFile","tsDiag","diagnostic","Diagnostic","getDiagnosticSeverity","tsDiagnosticToVsDiagnostic","converted","relatedInformation","coalesce","DiagnosticRelatedInformation","reportsUnnecessary","DiagnosticTag","Unnecessary","reportsDeprecated","Deprecated","resultConverted","reportUnnecessary","reportDeprecated","isStyleCheckDiagnostic","category","DiagnosticSeverity","Warning","Hint","FileConfigurationManager","formatOptions","onDidCloseTextDocument","getFormattingOptions","ensureConfigurationOptions","visibleTextEditors","currentOptions","getFileOptions","cachedOptions","cachedOptionsValue","getFormatOptions","preferences","getPreferences","indentSize","convertTabsToSpaces","newLineCharacter","insertSpaceAfterCommaDelimiter","insertSpaceAfterConstructor","insertSpaceAfterSemicolonInForStatements","insertSpaceBeforeAndAfterBinaryOperators","insertSpaceAfterKeywordsInControlFlowStatements","insertSpaceAfterFunctionKeywordForAnonymousFunctions","insertSpaceBeforeFunctionParenthesis","insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis","insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets","insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces","insertSpaceAfterOpeningAndBeforeClosingEmptyBraces","insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces","insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces","insertSpaceAfterTypeAssertion","placeOpenBraceOnNewLineForFunctions","placeOpenBraceOnNewLineForControlBlocks","semicolons","lt","v290","preferencesConfig","quotePreference","getQuoteStylePreference","importModuleSpecifierPreference","getImportModuleSpecifierPreference","importModuleSpecifierEnding","getImportModuleSpecifierEndingPreference","allowTextChangesInNewFiles","providePrefixAndSuffixTextForRename","allowRenameOfImportPath","includeAutomaticOptionalChainCompletions","provideRefactorNotApplicableReason","generateReturnInDocTemplate","includeCompletionsForImportStatements","includeCompletionsWithSnippetText","displayPartsForJSDoc","v333","debug","SemVer","NODE_DEBUG","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","re","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","er","TypeError","raw","major","minor","prerelease","num","build","valid","clean","compare","compareMain","comparePre","compareIdentifiers","inc","identifier","diff","version1","version2","eq","v1","v2","numeric","anum","bnum","gt","neq","lte","cmp","op","ret","Comparator","comp","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","list","rsort","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","maxSV","rangeObj","minSatisfying","minSV","validRange","ltr","gtr","parsed","r1","r2","coerce","LanguageProvider","registerProviders","selector","documentSelector","cachedResponse","CachedResponse","all","provider","diagnosticsManager","updateValidate","updateSuggestionDiagnostics","base","setValidate","_diagnosticLanguage","setEnableSuggestions","requestAllDiagnostics","diagnosticsKind","updateDiagnostics","severity","TypeScriptCallHierarchySupport","filepath","fromProtocolCallHierarchyItem","selectionRange","fromProtocolCallHierarchyIncomingCall","fromProtocolCallHierarchyOutgoingCall","useFileName","selectionSpan","isSourceFileItem","detail","asRelativePath","containerName","CallHierarchyItem","parseKindModifier","SymbolTag","CallHierarchyIncomingCall","fromSpans","CallHierarchyOutgoingCall","v380","conditionalRegistration","requireMinVersion","requireSomeCapability","registerCallHierarchyProvider","_asyncCallbacks","cause","cancellation","queue","sequenceNumber","shift","displayParts","insertText","snippet","parameterCount","parameterListParts","isInMethod","hasOptionalParameters","parenCount","braceCount","outer","next","nameIsFollowedByOptionalIndicator","nameIsThis","getParameterListParts","SnippetString","joiner","paramterPart","appendPlaceholder","appendJoinedPlaceholders","appendTabstop","TypeScriptDefinitionProvider","v270","textSpan","definitions","contextStart","contextEnd","originSelectionRange","targetRange","targetUri","targetSelectionRange","getSymbolLocations","EnhancedSyntax","registerDefinitionProvider","TypeScriptDocumentHighlightProvider","filesToSearch","highlight","convertDocumentHighlight","highlightSpans","DocumentHighlight","DocumentHighlightKind","Write","Read","registerDocumentHighlightProvider","TypeScriptDocumentSymbolProvider","childItems","convertNavTree","output","shouldInclude","shouldInclueEntry","spans","symbolInfo","convertSymbol","child","intersection","includedChild","nameSpan","DocumentSymbol","getSymbolKind","registerDocumentSymbolProvider","TypeScriptFoldingProvider","_context","convertOutliningSpan","getFoldingRangeKind","lineAt","adjustFoldingEnd","FoldingRange","foldEndCharacter","getText","translate","foldEndPairCharacters","FoldingRangeKind","Comment","Region","Imports","v280","registerFoldingRangeProvider","TypeScriptFormattingProvider","formattingOptionsManager","textEdit","lText","modeId","requireConfiguration","formattingProvider","registerOnTypeFormattingEditProvider","registerDocumentRangeFormattingEditProvider","TypeScriptHoverProvider","interruptGetErr","ensureConfigurationForDocument","Hover","getContents","displayString","hasCapabilityForResource","markdownDocumentation","registerHoverProvider","TypeScriptImplementationProvider","registerImplementationProvider","TypeScriptReferenceSupport","ref","refs","includeDeclaration","isDefinition","registerReferenceProvider","minTypeScriptVersion","fromVersionString","DocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","getLegend","SemanticTokensLegend","tokenTypes","tokenModifiers","_provideSemanticTokens","offsetAt","requestArg","versionBeforeRequest","cancelOnResourceChange","iv","waitForDocumentChangesToEnd","CancellationError","tokenSpan","builder","SemanticTokensBuilder","tsClassification","tokenType","getTokenTypeFromClassification","getTokenModifierFromClassification","tokenTypeMap","startPos","positionAt","endPos","startCharacter","endCharacter","TypeScriptSignatureHelpProvider","triggerReason","toTsTriggerReason","SignatureHelp","signatures","items","signature","convertSignature","activeSignature","getActiveSignature","activeParameter","getActiveParameter","previouslyActiveSignature","activeSignatureHelp","isRetrigger","existingIndex","findIndex","selectedItemIndex","isVariadic","argumentIndex","parameters","SignatureInformation","Previewer","prefixDisplayParts","textIndex","separatorLabel","separatorDisplayParts","ParameterInformation","suffixDisplayParts","triggerKind","SignatureHelpTriggerKind","TriggerCharacter","triggerCharacter","ContentChange","Invoke","triggerCharacters","retriggerCharacters","registerSignatureHelpProvider","SmartSelection","positions","locations","convertSelectionRange","SelectionRange","v350","registerSelectionRangeProvider","TagClosing","_disposed","_timeout","_cancel","onDidChangeTextDocument","contentChanges","activeDocument","lastChange","lastCharacter","rangeLength","characterDelta","addedLines","activeEditor","insertion","insertSnippet","getTagSnippet","getInsertionPositions","closingTag","activeSelectionPositions","selections","active","isEqual","requireActiveDocument","handler","onDidChangeActiveTextEditor","v300","TypeScriptTypeDefinitionProvider","registerTypeDefinitionProvider","diagnosticsEquals","arrays","FileDiagnostics","_diagnostics","settings","getValidate","getSuggestionDiagnostics","enableSuggestions","getEnableSuggestions","DiagnosticSettings","_languageSettings","validate","defaultSettings","f","currentSettings","newSettings","areLanguageDiagnosticSettingsEqual","DiagnosticsManager","owner","_settings","_updateDelay","_pendingUpdates","_currentDiagnostics","createDiagnosticCollection","rebuild","didUpdate","fileDiagnostics","scheduleDiagnosticsUpdate","updateCurrentDiagnostics","getDiagnostics","fileDiagnostic","CloseOperation","OpenOperation","ChangeOperation","BufferSynchronizer","pathNormalizer","_pending","supportsBatching","updatePending","events","change","reverse","insertString","flush","closedFiles","openFiles","changedFiles","nonRecoverable","v340","SyncedBuffer","synchronizer","fileContent","projectRootPath","getWorkspaceRootForResource","scriptKind","mode2ScriptKind","scriptKindName","v240","tsPluginsForDocument","open","lineCount","close","SyncedBufferMap","filePath","PendingDiagnostics","orderedResources","entries","GetErrRequest","files","onDone","_done","_token","allFiles","normalizedPath","executeAsync","finally","setImmediate","BufferSyncSupport","_validateJavaScript","_validateTypeScript","listening","_onDelete","onDelete","_onWillChange","onWillChange","diagnosticDelayer","Delayer","syncedBuffers","pendingDiagnostics","updateConfiguration","onDidChangeVisibleTextEditors","syncedBuffer","requestDiagnostic","existingDocument","buffer","allBuffers","getForPath","pendingGetErr","wasBufferOpen","triggerDiagnostics","beforeCommand","closeResource","onContentChanged","shouldValidate","resources","handledResources","trigger","sendPendingDiagnostics","ceil","orderedFileSet","getOrderedFileSet","executeGetErrRequest","jsConfig","tsConfig","TypeScriptServerSpawner","_versionProvider","_versionManager","_logDirectoryProvider","_pluginPathsProvider","_logger","_factory","primaryServer","serverType","getCompositeServerType","spawnTsServer","shouldUseSeparateDiagnosticsServer","v400","defaultVersion","canceller","tsServerTraceDirectory","getTsServerArgs","cancellationPipeName","isLoggingEnabled","fork","tsServerPath","kindToServerType","currentVersion","v401","v250","isWeb","logDir","getNewLogDirectory","pluginPaths","getPluginPaths","isUsingBundledTypeScriptVersion","enableForWorkspaceTypeScriptVersions","v260","getTsLocale","v291","v345","pluginPath","resolvePluginPath","isAbsolute","workspacePath","RelativeWorkspacePathResolver","asAbsoluteWorkspacePath","workspaceFolder","VSCodeTelemetryReporter","clientVersionDelegate","_reporter","eventName","reporter","sendTelemetryEvent","packageInfo","aiKey","packageJSON","extensions","getExtension","memoize","appInsights","TelemetryReporter","extensionId","extensionVersion","firstParty","userOptIn","logFilePath","logStream","createWriteStream","flags","autoClose","updateUserOptIn","onDidChangeTelemetryEnabled","optOutListener","TELEMETRY_CONFIG_ID","newOptInValue","isTelemetryEnabled","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","defaultClient","appInsightsClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","commonProperties","getCommonProperties","userId","machineId","sessionId","isNewAppInstall","Desktop","cleanRemoteName","remoteName","shouldSendErrorTelemetry","extension","extensionKind","ExtensionKind","Workspace","_extension","cloneAndChange","anonymizeFilePaths","cleanupPatterns","appRoot","extensionPath","updatedStack","cleanUpIndexes","cleanupPatterns_1","regexp","lastIndex","nodeModulesRegex","fileRegex","_loop_1","y","cleanupPatterns_2","cleanProperties","_key","trackEvent","sendTelemetryErrorEvent","errorProps","sendTelemetryException","trackException","flushEventsToLogger","flushEventsToAI","default","DistributedTracingModes","AutoCollectConsole","AutoCollectExceptions","QuickPulseClient","NativePerformance_1","_forceClsHooked","_disabledExtendedMetrics","_console","_exceptions","_performance","_nativePerformance","_serverRequests","_clientRequests","_performanceLiveMetrics","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_isSendingLiveMetrics","_isNativePerformance","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","liveMetricsClient","Configuration","AutoCollectNativePerformance","getCorrelationContext","wrapWithCorrelationContext","setDistributedTracingMode","AI_AND_W3C","collectConsoleLog","collectExtendedMetrics","extendedMetricsConfig","parseEnabled","disabledMetrics","useAsyncHooks","resendInterval","maxBytesOnDisk","setInternalLogging","enableDebugLogging","enableWarningLogging","setSendLiveMetrics","addCollector","quickPulseClient","azuresdk","consolePub","tedious","diagnostic_channel_1","AzureMonitorSymbol","AzureMonitorSpanProcessor","onStart","onEnd","shutdown","azureCoreTracing","coreTracing","tracer_1","BasicTracer","spanContextPropagator","scopeManager","startSpanOriginal_1","startSpan","parentOperation","getCurrentSpan","addEvent","addSpanProcessor","setTracer","includePrerelease","defaultResult","minver","compver","originalBunyan","originalEmit","_emit","rec","noemit","level","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","chunk","stderr","aiLoggingConsole","Console","originalMethod","consoleMethods_1","mongoCore","originalMongoCore","originalConnect","Server","connect","originalWrite","pool","cbidx","originalLogout","logout","mongo2","originalMongo","instrument","operationIdGenerator","eventMap","requestId","startedData","succeeded","mongo3","contextMap","mongo330","coreTopology","mongodbcorePatchFunction","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","startDate","patchClassMemberFunction","classObject","connectionClass","hrDuration","query","callbackArgs","poolClass","webpackEmptyContext","postgresPool1","originalPgPool","events_1","postgres6","originalPg","originalPgPath","originalClientQuery","Client","queryResult","database","connectionParameters","patchCallback","trackingCallback","rowCount","preparable","plan","postgres7","callbackProvided","_Promise","originalRedis","originalSend","RedisClient","internal_send_command","commandObj","cb_1","pubsubBound","address_1","address","startTime_1","startDate_1","originalTedious","originalMakeRequest","Connection","getPatchedCallback","origCallback","rows","connection","parametersByName","statement","__rest","getOwnPropertySymbols","winston3","originalWinston","AppInsightsTransport","meta","splat","levelKind","npm","levels","syslog","mapLevelToKind","Transport","patchedConfigure","lastLevel","origCreate","createLogger","origConfigure","configure","origRootConfigure","winston2","curLevels","originalLog","Logger","loggingFilter","filters","util","assert","async_hooks","DEBUG_CLS_HOOKED","currentUid","Namespace","_set","_contexts","_indent","getNamespace","namespaces","destroyNamespace","namespace","ok","debug2","_rawDebug","createHook","asyncId","triggerId","executionAsyncId","indentStr","showHidden","depth","colors","triggerAsyncId","triggerIdContext","enter","exit","ERROR_SYMBOL","asyncHooksCurrentId","currentId","createContext","_ns_name","run","runAndReturn","runPromise","promise","thisSymbol","unwrappedContexts","thunk","fromException","asyncHook","invertedProviders","providers","DEBUG","getFunctionName","addHooks","uid","handle","parentUid","parentHandle","_state","stackChain","modifier","_modifiers","deattach","AsyncHook","_asyncHook","attach","frames","callSite","getFileName","asyncWrap","TIMERWRAP","Providers","patchs","ignoreUIDs","State","counter","Hooks","initFns","preFns","postFns","destroyFns","init","hook","pre","post","didThrow","removeElement","_hooks","setupHooks","hooks","remove","removeHooks","NextTickWrap","oldNextTick","nextTick","listenerCount","PromiseWrap","oldThen","makeWrappedHandler","isOnFulfilled","makeUnhandledResolutionHandler","makeUnhandledRejectionHandler","onFulfilled","onRejected","timers","TimeoutWrap","IntervalWrap","ImmediateWrap","timeoutMap","intervalMap","ImmediateMap","activeCallback","clearedInCallback","patchTimer","setFn","clearFn","Handle","timerMap","singleCall","oldSetFn","oldClearFn","timerId","clearImmediate","defaultFormater","extend","TraceModifier","StackFormater","SHORTCIRCUIT_CALLSITE","collectCallSites","captureStackTrace","callSites","_modify","chain","_formater","_previous","formater","restore","_backup","_roolback","prepareStackTrace","SHORTCIRCUIT_FORMATER","originalFrames","stackTraceLimit","isExtensible","getOwnPropertyDescriptor","mutated","lines","ee","FormatErrorString","frame","removeAsyncListener","addAsyncListener","contexts","storage","after","v6plus","v7plus","v8plus","v11plus","net","wrapSetUpListenHandle","socket","onread","onconnection","patchOnRead","ctx","_originalOnread","_normalizeArgs","arg0","_normalizeConnectArgs","Socket","onSocket","childProcess","wrapChildProcess","stdio","activatorFirst","onexit","ChildProcess","_fatalException","_originalNextTick","processors","_nextDomainTick","_tickDomainCallback","activator","asynchronizers","patchGlobalTimers","dns","resolveNaptr","zlib","crypto","lchown","lchmod","ftruncate","Deflate","proto","getPrototypeOf","_transform","toWrap","instrumentPromise","promiseListener","fallback","cbIdx","wrappedPromise","executor","ensureAslWrapper","inherits","wrapThen","overwrite","__asl_wrapper","propagateAslWrapper","nextResult","returnVal","errorVal","aslWrapper","wrapPromise","asyncCatcher","inAsyncTick","listenerStack","union","dest","added","destLength","addedLength","j","missing","errorValues","inErrorTick","handled","errorThrew","threw","AsyncListener","callbacks","createAsyncListener","registered","simpleWrap","_methodNames","Contracts_1","clients","subscriber","trackTrace","Information","Generated_1","RemoteDependencyDataConstants","TYPE_HTTP","TYPE_AI","domainSupportsProperties","domain","deviceLocale","deviceModel","deviceOEMName","deviceType","locationIp","operationParentId","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","userAuthUserId","internalAgentVersion","internalNodeName","Measurement","sampleRate","hasFullStack","parsedStack","metrics","TelemetryType","telemetryTypeToBaseType","baseTypeToTelemetryType","baseType","TelemetryTypeString","bunyanToAILevelMap","10","20","30","40","50","60","Critical","AIlevel","winstonToAILevelMap","og","emerg","alert","crit","notice","verbose","silly","unknown","_canUseUncaughtExceptionMonitor","_exceptionListenerHandle","reThrow","_FALLBACK_ERROR_MESSAGE","isAppCrashing","UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME","UNCAUGHT_EXCEPTION_HANDLER_NAME","_rejectionListenerHandle","UNHANDLED_REJECTION_HANDLER_NAME","_RETHROW_EXIT_MESSAGE","_getUrlFromRequestOptions","baseTelemetry","dependencyId","urlObject","search","dependencyName","toUpperCase","remoteDependencyType","remoteDependencyTarget","resultCode","dependencyTypeName","originalOptions_1","parsedQuery","commandName","dbName","databaseName","queryObj","sqlString","sql","connectionConfig","_connection","socketPath","q","conn","Tracestate","_getAbsoluteUrl","socketRemoteAddress","remoteAddress","parseHeaders","connectionRemoteAddress","legacySocketRemoteAddress","sourceCorrelationId","newTags","_getIp","_getId","encrypted","pathName","ipMatch","check","results","ip","rawHeaders","parseId","setBackCompatFromThisTraceContext","userAgent","tracestateHeader","legacy_parentId","legacy_rootId","cookieValue","cookieParts","fieldmap","parseHeader","fieldarr","validateKeyChars","keyParts","tenant","vendor","tenantValid","Boolean","vendorValid","keydeduper","parts_1","pair","strict","QuickPulseEnvelopeFactory","QuickPulseSender","QuickPulseStateManager","_isCollectingData","_lastSuccessTime","_lastSendSucceeded","_metrics","_documents","_collectors","_sender","collector","_addMetric","addDocument","envelope","telemetryEnvelopeToQuickPulseDocument","_goQuickPulse","enableCollectors","Value","Weight","createQuickPulseMetric","Name","_resetQuickPulseBuffer","createQuickPulseEnvelope","_post","_ping","currentTimeout","POST_INTERVAL","PING_INTERVAL","MAX_POST_WAIT_TIME","FALLBACK_INTERVAL","MAX_PING_WAIT_TIME","ping","_quickPulseDone","shouldPOST","connectionString","_FIELDS_SEPARATOR","reduce","fields","kv","kvParts","_FIELD_KEY_VALUE_SEPARATOR","endpointsuffix","locationPrefix","StreamId","documents","machineName","instance","Documents","InstrumentationKey","Metrics","InvariantVersion","Timestamp","Version","MachineName","Instance","createQuickPulseEventDocument","createQuickPulseExceptionDocument","createQuickPulseTraceDocument","createQuickPulseDependencyDocument","createQuickPulseRequestDocument","createQuickPulseDocument","baseData","severityLevel","Message","exceptionDetails","exceptionMessage","exceptionType","assembly","typeName","ExceptionMessage","ExceptionType","Success","Duration","ResponseCode","responseCode","OperationName","Target","ResultCode","CommandName","OperationId","DependencyTypeName","documentType","__type","DocumentType","Properties","aggregateProperties","meas","QuickPulseConfig","_config","_consecutiveErrors","done","_submitData","postOrPing","payload","quickPulseHost","byteLength","shouldPOSTData","MAX_QPS_FAILURES_BEFORE_WARN","_disabledMetrics","_metricsAvailable","NativeMetricsEmitters","_emitter","_trackNativeMetrics","disableAll","individualOptOuts","optOutsArr","optOutsArr_1","shouldSendAll","_trackGarbageCollection","_trackEventLoop","_trackHeapUsage","gc","gcData","getGCData","name_1","stdDev","sqrt","sumSquares","pow","total","loop","getLoopData","loopUsage","heap","_c","heapUsed","heapTotal","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","Channel","TelemetryProcessors","Sender","EnvelopeFactory","_telemetryProcessors","sender","trackAvailability","track","triggerSend","telemetryType","createEnvelope","toISOString","accepted","runTelemetryProcessors","samplingTelemetryProcessor","performanceMetricsTelemetryProcessor","send","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","setDiskRetryMode","_stringify","_timeoutHandle","isNodeCrashing","bufferIsEmpty","batch","saveOnCrash","getSamplingHashCode","abs","requestData","remoteDependencyData","child_process","_onSuccess","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","ICACLS_PATH","withCredentials","gzip","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","aclProc","spawn","windowsHide","signal","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdout","_getACLIdentitySync","_getACLArguments","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","lstat","stats","mkdir","isDirectory","_getShallowDirectorySize","readdir","totalSize","stat","fileStats","isFile","_getShallowDirectorySizeSync","readdirSync","statSync","TEMPDIR_PREFIX","getTime","fileFullPath","dirSize","tempDir","firstFile","readFile","systemdrive","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","createAvailabilityData","getTags","trace","remoteDependency","parseStack","metric","Aggregation","availabilityData","runLocation","totalSizeInBytes","_StackFrame","parsedFrame","sizeInBytes","left","right","acceptedLeft","acceptedRight","howMany","baseSize","Messages","Tracer","readTrace","TSS_TRACE","responseExpected","queueLength","logLevel","TypingsStatus","_acquiringTypings","onDidBeginInstallTypings","onBeginInstallTypings","eventId","onDidEndInstallTypings","onEndInstallTypings","timer","_promises","_onBegin","_onEndOrTimeout","onTypesInstallerInitializationFailed","withProgress","ProgressLocation","Window","title","dontShowAgain","showWarningMessage","ExcludeHintItem","_item","createStatusBarItem","alignment","StatusBarAlignment","Right","priority","_currentHint","hide","largeRoots","tooltip","show","onConfigureExcludesSelected","configFileName","isImplicitProjectConfigFile","openOrCreateConfig","showTextDocument","toDispose","getCurrentHint","showInformationMessage","onProjectLanguageServiceStateChanged","languageServiceEnabled","projectName","selected","createLargeProjectMonitorFromTypeScript","TypeScriptWorkspaceSymbolProvider","searchAllOpenProjects","getDocument","toOpenedFiledPath","v390","searchValue","maxResultCount","toSymbolInformation","doesResourceLookLikeATypeScriptFile","doesResourceLookLikeAJavaScriptFile","getLabel","SymbolInformation","Field","registerWorkspaceSymbolProvider","LazyValue","_getValue","_hasValue","ManagedFileContextManager","normalizePath","isInManagedFileContext","onDidChangeActiveJsTsEditor","updateContext","isManagedFile","executeCommand","contextName","isManagedScriptFile","isManagedConfigFile","isSupportedLanguageMode","isJsConfigOrTsConfigFileName","NodeRequestCanceller","getTempFile","tracer","logDirectory","mkdtempSync","logPath","globalVersion","bundledVersion","globals","loadVersionsFromSetting","contributedTsNextVersion","tsdkVersions","localTsdkVersions","nodeVersions","localNodeModulesVersions","allVersions","paths","getContributedVersion","showErrorMessage","pathToTs","serverPath","TypeScriptVersion","getApiVersion","isValid","tsdkPathSetting","loadTypeScriptVersionsFromPath","getTypeScriptVersion","tsdkVersion","desc","_onDidChangeActiveJsTsEditor","_activeJsTsEditor","visibleEditor","viewColumn","TypeScriptServerPlugin","_pluginConfigurations","_onDidUpdatePlugins","onDidChangePlugins","_onDidUpdateConfig","onDidUpdateConfig","_plugins","newPlugins","readPlugins","pluginMap","pack","contributes","typescriptServerPlugins","createRandomFile","fileExtension","tmpFile","deleteFile","CURSOR","cursorIndex","selection","Selection","isDirty","save","wait","ms","updateConfig","documentUri","newConfig","oldConfig","configKey","ConfigurationTarget","Global","onChangedDocument","joinLines","expectedDocContent","strictEqual","expectedCursorPos","deepEqual","autoClosingBrackets","typescriptCompleteFunctionCalls","insertMode","snippetSuggestions","suggestSelection","javascriptQuoteStyle","typescriptQuoteStyle","insertModesValues","didChangeDocument","race","retries","FileType","File","configs","findConfigFiles","getWorkspaceFolder","posixPath","findFiles","mapChildren","TsconfigLinkProvider","jsonc","getExtendsLink","getFilesLinks","getReferencesLinks","extendsNode","isPathValue","DocumentLink","getRange","endsWith","workspaceFolderPath","pathNodeToLink","pathNode","getFileTarget","getFolderTarget","patterns","registerDocumentLinkProvider"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 73);\n","module.exports = require(\"vscode\");","module.exports = require(\"path\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Helpers for converting FROM vscode types TO ts types\n */\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { ITypeScriptServiceClient } from '../typescriptService';\n\nexport namespace Range {\n\texport const fromTextSpan = (span: Proto.TextSpan): vscode.Range =>\n\t\tfromLocations(span.start, span.end);\n\n\texport const toTextSpan = (range: vscode.Range): Proto.TextSpan => ({\n\t\tstart: Position.toLocation(range.start),\n\t\tend: Position.toLocation(range.end)\n\t});\n\n\texport const fromLocations = (start: Proto.Location, end: Proto.Location): vscode.Range =>\n\t\tnew vscode.Range(\n\t\t\tMath.max(0, start.line - 1), Math.max(start.offset - 1, 0),\n\t\t\tMath.max(0, end.line - 1), Math.max(0, end.offset - 1));\n\n\texport const toFileRangeRequestArgs = (file: string, range: vscode.Range): Proto.FileRangeRequestArgs => ({\n\t\tfile,\n\t\tstartLine: range.start.line + 1,\n\t\tstartOffset: range.start.character + 1,\n\t\tendLine: range.end.line + 1,\n\t\tendOffset: range.end.character + 1\n\t});\n\n\texport const toFormattingRequestArgs = (file: string, range: vscode.Range): Proto.FormatRequestArgs => ({\n\t\tfile,\n\t\tline: range.start.line + 1,\n\t\toffset: range.start.character + 1,\n\t\tendLine: range.end.line + 1,\n\t\tendOffset: range.end.character + 1\n\t});\n}\n\nexport namespace Position {\n\texport const fromLocation = (tslocation: Proto.Location): vscode.Position =>\n\t\tnew vscode.Position(tslocation.line - 1, tslocation.offset - 1);\n\n\texport const toLocation = (vsPosition: vscode.Position): Proto.Location => ({\n\t\tline: vsPosition.line + 1,\n\t\toffset: vsPosition.character + 1,\n\t});\n\n\texport const toFileLocationRequestArgs = (file: string, position: vscode.Position): Proto.FileLocationRequestArgs => ({\n\t\tfile,\n\t\tline: position.line + 1,\n\t\toffset: position.character + 1,\n\t});\n}\n\nexport namespace Location {\n\texport const fromTextSpan = (resource: vscode.Uri, tsTextSpan: Proto.TextSpan): vscode.Location =>\n\t\tnew vscode.Location(resource, Range.fromTextSpan(tsTextSpan));\n}\n\nexport namespace TextEdit {\n\texport const fromCodeEdit = (edit: Proto.CodeEdit): vscode.TextEdit =>\n\t\tnew vscode.TextEdit(\n\t\t\tRange.fromTextSpan(edit),\n\t\t\tedit.newText);\n}\n\nexport namespace WorkspaceEdit {\n\texport function fromFileCodeEdits(\n\t\tclient: ITypeScriptServiceClient,\n\t\tedits: Iterable<Proto.FileCodeEdits>\n\t): vscode.WorkspaceEdit {\n\t\treturn withFileCodeEdits(new vscode.WorkspaceEdit(), client, edits);\n\t}\n\n\texport function withFileCodeEdits(\n\t\tworkspaceEdit: vscode.WorkspaceEdit,\n\t\tclient: ITypeScriptServiceClient,\n\t\tedits: Iterable<Proto.FileCodeEdits>\n\t): vscode.WorkspaceEdit {\n\t\tfor (const edit of edits) {\n\t\t\tconst resource = client.toResource(edit.fileName);\n\t\t\tfor (const textChange of edit.textChanges) {\n\t\t\t\tworkspaceEdit.replace(resource,\n\t\t\t\t\tRange.fromTextSpan(textChange),\n\t\t\t\t\ttextChange.newText);\n\t\t\t}\n\t\t}\n\n\t\treturn workspaceEdit;\n\t}\n}\n\nexport namespace SymbolKind {\n\texport function fromProtocolScriptElementKind(kind: Proto.ScriptElementKind) {\n\t\tswitch (kind) {\n\t\t\tcase PConst.Kind.module: return vscode.SymbolKind.Module;\n\t\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\t\tcase PConst.Kind.enumMember: return vscode.SymbolKind.EnumMember;\n\t\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\t\tcase PConst.Kind.indexSignature: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.callSignature: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Property;\n\t\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.let: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.const: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.localVariable: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.alias: return vscode.SymbolKind.Variable;\n\t\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\t\tcase PConst.Kind.localFunction: return vscode.SymbolKind.Function;\n\t\t\tcase PConst.Kind.constructSignature: return vscode.SymbolKind.Constructor;\n\t\t\tcase PConst.Kind.constructorImplementation: return vscode.SymbolKind.Constructor;\n\t\t\tcase PConst.Kind.typeParameter: return vscode.SymbolKind.TypeParameter;\n\t\t\tcase PConst.Kind.string: return vscode.SymbolKind.String;\n\t\t\tdefault: return vscode.SymbolKind.Variable;\n\t\t}\n\t}\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions_1 = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions_1.availableLanguages) {\r\n                var value = vscodeOptions_1.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions_1.locale)) {\r\n                options.locale = vscodeOptions_1.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions_1._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions_1._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions_1._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions_1._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions_1._languagePackId)) {\r\n                options.languagePackId = vscodeOptions_1._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions_1._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions_1._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions_1._corruptedFile) {\r\n                        var dirname = path.dirname(vscodeOptions_1._corruptedFile);\r\n                        fs.exists(dirname, function (exists) {\r\n                            if (exists) {\r\n                                fs.writeFile(vscodeOptions_1._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                                    console.error(err);\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as Proto from './protocol';\nimport BufferSyncSupport from './tsServer/bufferSyncSupport';\nimport { ExecutionTarget } from './tsServer/server';\nimport { TypeScriptVersion } from './tsServer/versionProvider';\nimport API from './utils/api';\nimport { TypeScriptServiceConfiguration } from './utils/configuration';\nimport { PluginManager } from './utils/plugins';\nimport { TelemetryReporter } from './utils/telemetry';\n\nexport enum ServerType {\n\tSyntax = 'syntax',\n\tSemantic = 'semantic',\n}\n\nexport namespace ServerResponse {\n\n\texport class Cancelled {\n\t\tpublic readonly type = 'cancelled';\n\n\t\tconstructor(\n\t\t\tpublic readonly reason: string\n\t\t) { }\n\t}\n\n\texport const NoContent = { type: 'noContent' } as const;\n\n\texport type Response<T extends Proto.Response> = T | Cancelled | typeof NoContent;\n}\n\ninterface StandardTsServerRequests {\n\t'applyCodeActionCommand': [Proto.ApplyCodeActionCommandRequestArgs, Proto.ApplyCodeActionCommandResponse];\n\t'completionEntryDetails': [Proto.CompletionDetailsRequestArgs, Proto.CompletionDetailsResponse];\n\t'completionInfo': [Proto.CompletionsRequestArgs, Proto.CompletionInfoResponse];\n\t'completions': [Proto.CompletionsRequestArgs, Proto.CompletionsResponse];\n\t'configure': [Proto.ConfigureRequestArguments, Proto.ConfigureResponse];\n\t'definition': [Proto.FileLocationRequestArgs, Proto.DefinitionResponse];\n\t'definitionAndBoundSpan': [Proto.FileLocationRequestArgs, Proto.DefinitionInfoAndBoundSpanResponse];\n\t'docCommentTemplate': [Proto.FileLocationRequestArgs, Proto.DocCommandTemplateResponse];\n\t'documentHighlights': [Proto.DocumentHighlightsRequestArgs, Proto.DocumentHighlightsResponse];\n\t'format': [Proto.FormatRequestArgs, Proto.FormatResponse];\n\t'formatonkey': [Proto.FormatOnKeyRequestArgs, Proto.FormatResponse];\n\t'getApplicableRefactors': [Proto.GetApplicableRefactorsRequestArgs, Proto.GetApplicableRefactorsResponse];\n\t'getCodeFixes': [Proto.CodeFixRequestArgs, Proto.CodeFixResponse];\n\t'getCombinedCodeFix': [Proto.GetCombinedCodeFixRequestArgs, Proto.GetCombinedCodeFixResponse];\n\t'getEditsForFileRename': [Proto.GetEditsForFileRenameRequestArgs, Proto.GetEditsForFileRenameResponse];\n\t'getEditsForRefactor': [Proto.GetEditsForRefactorRequestArgs, Proto.GetEditsForRefactorResponse];\n\t'getOutliningSpans': [Proto.FileRequestArgs, Proto.OutliningSpansResponse];\n\t'getSupportedCodeFixes': [null, Proto.GetSupportedCodeFixesResponse];\n\t'implementation': [Proto.FileLocationRequestArgs, Proto.ImplementationResponse];\n\t'jsxClosingTag': [Proto.JsxClosingTagRequestArgs, Proto.JsxClosingTagResponse];\n\t'navto': [Proto.NavtoRequestArgs, Proto.NavtoResponse];\n\t'navtree': [Proto.FileRequestArgs, Proto.NavTreeResponse];\n\t'organizeImports': [Proto.OrganizeImportsRequestArgs, Proto.OrganizeImportsResponse];\n\t'projectInfo': [Proto.ProjectInfoRequestArgs, Proto.ProjectInfoResponse];\n\t'quickinfo': [Proto.FileLocationRequestArgs, Proto.QuickInfoResponse];\n\t'references': [Proto.FileLocationRequestArgs, Proto.ReferencesResponse];\n\t'rename': [Proto.RenameRequestArgs, Proto.RenameResponse];\n\t'selectionRange': [Proto.SelectionRangeRequestArgs, Proto.SelectionRangeResponse];\n\t'signatureHelp': [Proto.SignatureHelpRequestArgs, Proto.SignatureHelpResponse];\n\t'typeDefinition': [Proto.FileLocationRequestArgs, Proto.TypeDefinitionResponse];\n\t'updateOpen': [Proto.UpdateOpenRequestArgs, Proto.Response];\n\t'prepareCallHierarchy': [Proto.FileLocationRequestArgs, Proto.PrepareCallHierarchyResponse];\n\t'provideCallHierarchyIncomingCalls': [Proto.FileLocationRequestArgs, Proto.ProvideCallHierarchyIncomingCallsResponse];\n\t'provideCallHierarchyOutgoingCalls': [Proto.FileLocationRequestArgs, Proto.ProvideCallHierarchyOutgoingCallsResponse];\n\t'fileReferences': [Proto.FileRequestArgs, Proto.FileReferencesResponse];\n}\n\ninterface NoResponseTsServerRequests {\n\t'open': [Proto.OpenRequestArgs, null];\n\t'close': [Proto.FileRequestArgs, null];\n\t'change': [Proto.ChangeRequestArgs, null];\n\t'compilerOptionsForInferredProjects': [Proto.SetCompilerOptionsForInferredProjectsArgs, null];\n\t'reloadProjects': [null, null];\n\t'configurePlugin': [Proto.ConfigurePluginRequest, Proto.ConfigurePluginResponse];\n}\n\ninterface AsyncTsServerRequests {\n\t'geterr': [Proto.GeterrRequestArgs, Proto.Response];\n\t'geterrForProject': [Proto.GeterrForProjectRequestArgs, Proto.Response];\n}\n\nexport type TypeScriptRequests = StandardTsServerRequests & NoResponseTsServerRequests & AsyncTsServerRequests;\n\nexport type ExecConfig = {\n\treadonly lowPriority?: boolean;\n\treadonly nonRecoverable?: boolean;\n\treadonly cancelOnResourceChange?: vscode.Uri;\n\treadonly executionTarget?: ExecutionTarget;\n};\n\nexport enum ClientCapability {\n\t/**\n\t * Basic syntax server. All clients should support this.\n\t */\n\tSyntax,\n\n\t/**\n\t * Advanced syntax server that can provide single file IntelliSense.\n\t */\n\tEnhancedSyntax,\n\n\t/**\n\t * Complete, multi-file semantic server\n\t */\n\tSemantic,\n}\n\nexport class ClientCapabilities {\n\tprivate readonly capabilities: ReadonlySet<ClientCapability>;\n\n\tconstructor(...capabilities: ClientCapability[]) {\n\t\tthis.capabilities = new Set(capabilities);\n\t}\n\n\tpublic has(capability: ClientCapability): boolean {\n\t\treturn this.capabilities.has(capability);\n\t}\n}\n\nexport interface ITypeScriptServiceClient {\n\t/**\n\t * Convert a resource (VS Code) to a normalized path (TypeScript).\n\t *\n\t * Does not try handling case insensitivity.\n\t */\n\tnormalizedPath(resource: vscode.Uri): string | undefined;\n\n\t/**\n\t * Map a resource to a normalized path\n\t *\n\t * This will attempt to handle case insensitivity.\n\t */\n\ttoPath(resource: vscode.Uri): string | undefined;\n\n\t/**\n\t * Convert a path to a resource.\n\t */\n\ttoResource(filepath: string): vscode.Uri;\n\n\t/**\n\t * Tries to ensure that a vscode document is open on the TS server.\n\t *\n\t * @return The normalized path or `undefined` if the document is not open on the server.\n\t */\n\ttoOpenedFilePath(document: vscode.TextDocument, options?: {\n\t\tsuppressAlertOnFailure?: boolean\n\t}): string | undefined;\n\n\t/**\n\t * Checks if `resource` has a given capability.\n\t */\n\thasCapabilityForResource(resource: vscode.Uri, capability: ClientCapability): boolean;\n\n\tgetWorkspaceRootForResource(resource: vscode.Uri): string | undefined;\n\n\treadonly onTsServerStarted: vscode.Event<{ version: TypeScriptVersion, usedApiVersion: API }>;\n\treadonly onProjectLanguageServiceStateChanged: vscode.Event<Proto.ProjectLanguageServiceStateEventBody>;\n\treadonly onDidBeginInstallTypings: vscode.Event<Proto.BeginInstallTypesEventBody>;\n\treadonly onDidEndInstallTypings: vscode.Event<Proto.EndInstallTypesEventBody>;\n\treadonly onTypesInstallerInitializationFailed: vscode.Event<Proto.TypesInstallerInitializationFailedEventBody>;\n\n\treadonly capabilities: ClientCapabilities;\n\treadonly onDidChangeCapabilities: vscode.Event<void>;\n\n\tonReady(f: () => void): Promise<void>;\n\n\tshowVersionPicker(): void;\n\n\treadonly apiVersion: API;\n\n\treadonly pluginManager: PluginManager;\n\treadonly configuration: TypeScriptServiceConfiguration;\n\treadonly bufferSyncSupport: BufferSyncSupport;\n\treadonly telemetryReporter: TelemetryReporter;\n\n\texecute<K extends keyof StandardTsServerRequests>(\n\t\tcommand: K,\n\t\targs: StandardTsServerRequests[K][0],\n\t\ttoken: vscode.CancellationToken,\n\t\tconfig?: ExecConfig\n\t): Promise<ServerResponse.Response<StandardTsServerRequests[K][1]>>;\n\n\texecuteWithoutWaitingForResponse<K extends keyof NoResponseTsServerRequests>(\n\t\tcommand: K,\n\t\targs: NoResponseTsServerRequests[K][0]\n\t): void;\n\n\texecuteAsync<K extends keyof AsyncTsServerRequests>(\n\t\tcommand: K,\n\t\targs: AsyncTsServerRequests[K][0],\n\t\ttoken: vscode.CancellationToken\n\t): Promise<ServerResponse.Response<Proto.Response>>;\n\n\t/**\n\t * Cancel on going geterr requests and re-queue them after `f` has been evaluated.\n\t */\n\tinterruptGetErr<R>(f: () => R): R;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ITypeScriptServiceClient, ClientCapability } from '../typescriptService';\nimport API from './api';\nimport { Disposable } from './dispose';\n\nexport class Condition extends Disposable {\n\tprivate _value: boolean;\n\n\tconstructor(\n\t\tprivate readonly getValue: () => boolean,\n\t\tonUpdate: (handler: () => void) => void,\n\t) {\n\t\tsuper();\n\t\tthis._value = this.getValue();\n\n\t\tonUpdate(() => {\n\t\t\tconst newValue = this.getValue();\n\t\t\tif (newValue !== this._value) {\n\t\t\t\tthis._value = newValue;\n\t\t\t\tthis._onDidChange.fire();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic get value(): boolean { return this._value; }\n\n\tprivate readonly _onDidChange = this._register(new vscode.EventEmitter<void>());\n\tpublic readonly onDidChange = this._onDidChange.event;\n}\n\nclass ConditionalRegistration {\n\tprivate registration: vscode.Disposable | undefined = undefined;\n\n\tpublic constructor(\n\t\tprivate readonly conditions: readonly Condition[],\n\t\tprivate readonly doRegister: () => vscode.Disposable\n\t) {\n\t\tfor (const condition of conditions) {\n\t\t\tcondition.onDidChange(() => this.update());\n\t\t}\n\t\tthis.update();\n\t}\n\n\tpublic dispose() {\n\t\tthis.registration?.dispose();\n\t\tthis.registration = undefined;\n\t}\n\n\tprivate update() {\n\t\tconst enabled = this.conditions.every(condition => condition.value);\n\t\tif (enabled) {\n\t\t\tif (!this.registration) {\n\t\t\t\tthis.registration = this.doRegister();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.registration) {\n\t\t\t\tthis.registration.dispose();\n\t\t\t\tthis.registration = undefined;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function conditionalRegistration(\n\tconditions: readonly Condition[],\n\tdoRegister: () => vscode.Disposable,\n): vscode.Disposable {\n\treturn new ConditionalRegistration(conditions, doRegister);\n}\n\nexport function requireMinVersion(\n\tclient: ITypeScriptServiceClient,\n\tminVersion: API,\n) {\n\treturn new Condition(\n\t\t() => client.apiVersion.gte(minVersion),\n\t\tclient.onTsServerStarted\n\t);\n}\n\nexport function requireConfiguration(\n\tlanguage: string,\n\tconfigValue: string,\n) {\n\treturn new Condition(\n\t\t() => {\n\t\t\tconst config = vscode.workspace.getConfiguration(language, null);\n\t\t\treturn !!config.get<boolean>(configValue);\n\t\t},\n\t\tvscode.workspace.onDidChangeConfiguration\n\t);\n}\n\nexport function requireSomeCapability(\n\tclient: ITypeScriptServiceClient,\n\t...capabilities: readonly ClientCapability[]\n) {\n\treturn new Condition(\n\t\t() => capabilities.some(requiredCapability => client.capabilities.has(requiredCapability)),\n\t\tclient.onDidChangeCapabilities\n\t);\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport function disposeAll(disposables: vscode.Disposable[]) {\n\twhile (disposables.length) {\n\t\tconst item = disposables.pop();\n\t\tif (item) {\n\t\t\titem.dispose();\n\t\t}\n\t}\n}\n\nexport abstract class Disposable {\n\tprivate _isDisposed = false;\n\n\tprotected _disposables: vscode.Disposable[] = [];\n\n\tpublic dispose(): any {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isDisposed = true;\n\t\tdisposeAll(this._disposables);\n\t}\n\n\tprotected _register<T extends vscode.Disposable>(value: T): T {\n\t\tif (this._isDisposed) {\n\t\t\tvalue.dispose();\n\t\t} else {\n\t\t\tthis._disposables.push(value);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprotected get isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n}","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\nvar Logging = (function () {\n    function Logging() {\n    }\n    Logging.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (Logging.enableDebug) {\n            console.info(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (!Logging.disableWarnings) {\n            console.warn(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.enableDebug = false;\n    Logging.disableWarnings = false;\n    Logging.disableErrors = false;\n    Logging.TAG = \"ApplicationInsights:\";\n    return Logging;\n}());\nmodule.exports = Logging;\n//# sourceMappingURL=Logging.js.map","module.exports = require(\"fs\");","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./Constants\"));\n__export(require(\"./Generated\"));\n__export(require(\"./TelemetryTypes\"));\n//# sourceMappingURL=index.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const empty = Object.freeze([]);\n\nexport function equals<T>(\n\ta: ReadonlyArray<T>,\n\tb: ReadonlyArray<T>,\n\titemEquals: (a: T, b: T) => boolean = (a, b) => a === b\n): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\treturn a.every((x, i) => itemEquals(x, b[i]));\n}\n\nexport function flatten<T>(array: ReadonlyArray<T>[]): T[] {\n\treturn Array.prototype.concat.apply([], array);\n}\n\nexport function coalesce<T>(array: ReadonlyArray<T | undefined>): T[] {\n\treturn <T[]>array.filter(e => !!e);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class Kind {\n\tpublic static readonly alias = 'alias';\n\tpublic static readonly callSignature = 'call';\n\tpublic static readonly class = 'class';\n\tpublic static readonly const = 'const';\n\tpublic static readonly constructorImplementation = 'constructor';\n\tpublic static readonly constructSignature = 'construct';\n\tpublic static readonly directory = 'directory';\n\tpublic static readonly enum = 'enum';\n\tpublic static readonly enumMember = 'enum member';\n\tpublic static readonly externalModuleName = 'external module name';\n\tpublic static readonly function = 'function';\n\tpublic static readonly indexSignature = 'index';\n\tpublic static readonly interface = 'interface';\n\tpublic static readonly keyword = 'keyword';\n\tpublic static readonly let = 'let';\n\tpublic static readonly localFunction = 'local function';\n\tpublic static readonly localVariable = 'local var';\n\tpublic static readonly method = 'method';\n\tpublic static readonly memberGetAccessor = 'getter';\n\tpublic static readonly memberSetAccessor = 'setter';\n\tpublic static readonly memberVariable = 'property';\n\tpublic static readonly module = 'module';\n\tpublic static readonly primitiveType = 'primitive type';\n\tpublic static readonly script = 'script';\n\tpublic static readonly type = 'type';\n\tpublic static readonly variable = 'var';\n\tpublic static readonly warning = 'warning';\n\tpublic static readonly string = 'string';\n\tpublic static readonly parameter = 'parameter';\n\tpublic static readonly typeParameter = 'type parameter';\n}\n\n\nexport class DiagnosticCategory {\n\tpublic static readonly error = 'error';\n\tpublic static readonly warning = 'warning';\n\tpublic static readonly suggestion = 'suggestion';\n}\n\nexport class KindModifiers {\n\tpublic static readonly optional = 'optional';\n\tpublic static readonly depreacted = 'deprecated';\n\tpublic static readonly color = 'color';\n\n\tpublic static readonly dtsFile = '.d.ts';\n\tpublic static readonly tsFile = '.ts';\n\tpublic static readonly tsxFile = '.tsx';\n\tpublic static readonly jsFile = '.js';\n\tpublic static readonly jsxFile = '.jsx';\n\tpublic static readonly jsonFile = '.json';\n\n\tpublic static readonly fileExtensionKindModifiers = [\n\t\tKindModifiers.dtsFile,\n\t\tKindModifiers.tsFile,\n\t\tKindModifiers.tsxFile,\n\t\tKindModifiers.jsFile,\n\t\tKindModifiers.jsxFile,\n\t\tKindModifiers.jsonFile,\n\t];\n}\n\nexport class DisplayPartKind {\n\tpublic static readonly functionName = 'functionName';\n\tpublic static readonly methodName = 'methodName';\n\tpublic static readonly parameterName = 'parameterName';\n\tpublic static readonly propertyName = 'propertyName';\n\tpublic static readonly punctuation = 'punctuation';\n\tpublic static readonly text = 'text';\n}\n\nexport enum EventName {\n\tsyntaxDiag = 'syntaxDiag',\n\tsemanticDiag = 'semanticDiag',\n\tsuggestionDiag = 'suggestionDiag',\n\tconfigFileDiag = 'configFileDiag',\n\ttelemetry = 'telemetry',\n\tprojectLanguageServiceState = 'projectLanguageServiceState',\n\tprojectsUpdatedInBackground = 'projectsUpdatedInBackground',\n\tbeginInstallTypes = 'beginInstallTypes',\n\tendInstallTypes = 'endInstallTypes',\n\ttypesInstallerInitializationFailed = 'typesInstallerInitializationFailed',\n\tsurveyReady = 'surveyReady',\n\tprojectLoadingStart = 'projectLoadingStart',\n\tprojectLoadingFinish = 'projectLoadingFinish',\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar url = require(\"url\");\nvar constants = require(\"constants\");\nvar Logging = require(\"./Logging\");\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\nvar Util = (function () {\n    function Util() {\n    }\n    /**\n     * helper method to access userId and sessionId cookie\n     */\n    Util.getCookie = function (name, cookie) {\n        var value = \"\";\n        if (name && name.length && typeof cookie === \"string\") {\n            var cookieName = name + \"=\";\n            var cookies = cookie.split(\";\");\n            for (var i = 0; i < cookies.length; i++) {\n                var cookie = cookies[i];\n                cookie = Util.trim(cookie);\n                if (cookie && cookie.indexOf(cookieName) === 0) {\n                    value = cookie.substring(cookieName.length, cookies[i].length);\n                    break;\n                }\n            }\n        }\n        return value;\n    };\n    /**\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\n     */\n    Util.trim = function (str) {\n        if (typeof str === \"string\") {\n            return str.replace(/^\\s+|\\s+$/g, \"\");\n        }\n        else {\n            return \"\";\n        }\n    };\n    /**\n     * Convert an array of int32 to Base64 (no '==' at the end).\n     * MSB first.\n     */\n    Util.int32ArrayToBase64 = function (array) {\n        var toChar = function (v, i) {\n            return String.fromCharCode((v >> i) & 0xFF);\n        };\n        var int32AsString = function (v) {\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\n        };\n        var x = array.map(int32AsString).join(\"\");\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\n        var s = b.toString(\"base64\");\n        return s.substr(0, s.indexOf(\"=\"));\n    };\n    /**\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\n     */\n    Util.random32 = function () {\n        return (0x100000000 * Math.random()) | 0;\n    };\n    /**\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\n     */\n    Util.randomu32 = function () {\n        return Util.random32() + 0x80000000;\n    };\n    /**\n     * generate W3C-compatible trace id\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\n     */\n    Util.w3cTraceId = function () {\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\n        var oct = \"\", tmp;\n        for (var a = 0; a < 4; a++) {\n            tmp = Util.random32();\n            oct +=\n                hexValues[tmp & 0xF] +\n                    hexValues[tmp >> 4 & 0xF] +\n                    hexValues[tmp >> 8 & 0xF] +\n                    hexValues[tmp >> 12 & 0xF] +\n                    hexValues[tmp >> 16 & 0xF] +\n                    hexValues[tmp >> 20 & 0xF] +\n                    hexValues[tmp >> 24 & 0xF] +\n                    hexValues[tmp >> 28 & 0xF];\n        }\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\n    };\n    Util.isValidW3CId = function (id) {\n        return id.length === 32 && id !== \"00000000000000000000000000000000\";\n    };\n    /**\n     * Check if an object is of type Array\n     */\n    Util.isArray = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\n    };\n    /**\n     * Check if an object is of type Error\n     */\n    Util.isError = function (obj) {\n        return obj instanceof Error;\n    };\n    Util.isPrimitive = function (input) {\n        var propType = typeof input;\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\n    };\n    /**\n     * Check if an object is of type Date\n     */\n    Util.isDate = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\n    };\n    /**\n     * Convert ms to c# time span format\n     */\n    Util.msToTimeSpan = function (totalms) {\n        if (isNaN(totalms) || totalms < 0) {\n            totalms = 0;\n        }\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\n        min = min.length < 2 ? \"0\" + min : min;\n        hour = hour.length < 2 ? \"0\" + hour : hour;\n        var daysText = days > 0 ? days + \".\" : \"\";\n        return daysText + hour + \":\" + min + \":\" + sec;\n    };\n    /**\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\n     * Simplify a generic Node Error into a simpler map for customDimensions\n     * Custom errors can still implement toJSON to override this functionality\n     */\n    Util.extractError = function (err) {\n        // Error is often subclassed so may have code OR id properties:\n        // https://nodejs.org/api/errors.html#errors_error_code\n        var looseError = err;\n        return {\n            message: err.message,\n            code: looseError.code || looseError.id || \"\",\n        };\n    };\n    /**\n     * Manually call toJSON if available to pre-convert the value.\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\n     * This avoids double escaping of quotes for Date objects, for example.\n     */\n    Util.extractObject = function (origProperty) {\n        if (origProperty instanceof Error) {\n            return Util.extractError(origProperty);\n        }\n        if (typeof origProperty.toJSON === \"function\") {\n            return origProperty.toJSON();\n        }\n        return origProperty;\n    };\n    /**\n     * Validate that an object is of type { [key: string]: string }\n     */\n    Util.validateStringMap = function (obj) {\n        if (typeof obj !== \"object\") {\n            Logging.info(\"Invalid properties dropped from payload\");\n            return;\n        }\n        var map = {};\n        for (var field in obj) {\n            var property = '';\n            var origProperty = obj[field];\n            var propType = typeof origProperty;\n            if (Util.isPrimitive(origProperty)) {\n                property = origProperty.toString();\n            }\n            else if (origProperty === null || propType === \"undefined\") {\n                property = \"\";\n            }\n            else if (propType === \"function\") {\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\n                continue;\n            }\n            else {\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\n                try {\n                    if (Util.isPrimitive(stringTarget)) {\n                        property = stringTarget;\n                    }\n                    else {\n                        property = JSON.stringify(stringTarget);\n                    }\n                }\n                catch (e) {\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\n                }\n            }\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\n        }\n        return map;\n    };\n    /**\n     * Checks if a request url is not on a excluded domain list\n     * and if it is safe to add correlation headers\n     */\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\n            return true;\n        }\n        for (var i = 0; i < excludedDomains.length; i++) {\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\n            if (regex.test(url.parse(requestUrl).hostname)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Util.getCorrelationContextTarget = function (response, key) {\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\n        if (contextHeaders) {\n            var keyValues = contextHeaders.split(\",\");\n            for (var i = 0; i < keyValues.length; ++i) {\n                var keyValue = keyValues[i].split(\"=\");\n                if (keyValue.length == 2 && keyValue[0] == key) {\n                    return keyValue[1];\n                }\n            }\n        }\n    };\n    /**\n     * Generate request\n     *\n     * Proxify the request creation to handle proxy http\n     *\n     * @param {string} requestUrl url endpoint\n     * @param {Object} requestOptions Request option\n     * @param {Function} requestCallback callback on request\n     * @returns {http.ClientRequest} request object\n     */\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\n            requestUrl = 'https:' + requestUrl;\n        }\n        var requestUrlParsed = url.parse(requestUrl);\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\n        var proxyUrl = undefined;\n        if (requestUrlParsed.protocol === 'https:') {\n            proxyUrl = config.proxyHttpsUrl || undefined;\n        }\n        if (requestUrlParsed.protocol === 'http:') {\n            proxyUrl = config.proxyHttpUrl || undefined;\n        }\n        if (proxyUrl) {\n            if (proxyUrl.indexOf('//') === 0) {\n                proxyUrl = 'http:' + proxyUrl;\n            }\n            var proxyUrlParsed = url.parse(proxyUrl);\n            // https is not supported at the moment\n            if (proxyUrlParsed.protocol === 'https:') {\n                Logging.info(\"Proxies that use HTTPS are not supported\");\n                proxyUrl = undefined;\n            }\n            else {\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\n            }\n        }\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\n        if (isHttps && config.httpsAgent !== undefined) {\n            options.agent = config.httpsAgent;\n        }\n        else if (!isHttps && config.httpAgent !== undefined) {\n            options.agent = config.httpAgent;\n        }\n        else if (isHttps) {\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\n            options.agent = Util.tlsRestrictedAgent;\n        }\n        if (isHttps) {\n            return https.request(options, requestCallback);\n        }\n        else {\n            return http.request(options, requestCallback);\n        }\n    };\n    ;\n    /**\n     * Parse standard <string | string[] | number> request-context header\n     */\n    Util.safeIncludeCorrelationHeader = function (client, request, correlationHeader) {\n        var header; // attempt to cast correlationHeader to string\n        if (typeof correlationHeader === \"string\") {\n            header = correlationHeader;\n        }\n        else if (correlationHeader instanceof Array) {\n            header = correlationHeader.join(\",\");\n        }\n        else if (correlationHeader && typeof correlationHeader.toString === \"function\") {\n            // best effort attempt: requires well-defined toString\n            try {\n                header = correlationHeader.toString();\n            }\n            catch (err) {\n                Logging.warn(\"Outgoing request-context header could not be read. Correlation of requests may be lost.\", err, correlationHeader);\n            }\n        }\n        if (header) {\n            Util.addCorrelationIdHeaderFromString(client, request, header);\n        }\n        else {\n            request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.addCorrelationIdHeaderFromString = function (client, response, correlationHeader) {\n        var components = correlationHeader.split(\",\");\n        var key = RequestResponseHeaders.requestContextSourceKey + \"=\";\n        var found = components.some(function (value) { return value.substring(0, key.length) === key; });\n        if (!found) {\n            response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.MAX_PROPERTY_LENGTH = 8192;\n    Util.tlsRestrictedAgent = new https.Agent({\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\n    });\n    return Util;\n}());\nmodule.exports = Util;\n//# sourceMappingURL=Util.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport const typescript = 'typescript';\nexport const typescriptreact = 'typescriptreact';\nexport const javascript = 'javascript';\nexport const javascriptreact = 'javascriptreact';\nexport const jsxTags = 'jsx-tags';\n\n\nexport function isSupportedLanguageMode(doc: vscode.TextDocument) {\n\treturn vscode.languages.match([typescript, typescriptreact, javascript, javascriptreact], doc) > 0;\n}\n\nexport function isTypeScriptDocument(doc: vscode.TextDocument) {\n\treturn vscode.languages.match([typescript, typescriptreact], doc) > 0;\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const file = 'file';\nexport const untitled = 'untitled';\nexport const git = 'git';\n/** Live share scheme */\nexport const vsls = 'vsls';\nexport const walkThroughSnippet = 'walkThroughSnippet';\nexport const vscodeNotebookCell = 'vscode-notebook-cell';\n\nexport const semanticSupportedSchemes = [\n\tfile,\n\tuntitled,\n\twalkThroughSnippet,\n\tvscodeNotebookCell,\n];\n\n/**\n * File scheme for which JS/TS language feature should be disabled\n */\nexport const disabledSchemes = new Set([\n\tgit,\n\tvsls\n]);\n","module.exports = require(\"os\");","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * The abstract common base of all domains.\n */\nvar Domain = (function () {\n    function Domain() {\n    }\n    return Domain;\n}());\nmodule.exports = Domain;\n//# sourceMappingURL=Domain.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nconst noopDisposable = vscode.Disposable.from();\n\nexport const nulToken: vscode.CancellationToken = {\n\tisCancellationRequested: false,\n\tonCancellationRequested: () => noopDisposable\n};\n","\"use strict\";\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar CorrelationIdManager = (function () {\n    function CorrelationIdManager() {\n    }\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\n        // If it 404s, the iKey is bad and we should give up\n        // If it fails otherwise, try again later\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\n            return;\n        }\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\n            return;\n        }\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\n        var fetchAppId = function () {\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                // This query has been cancelled.\n                return;\n            }\n            var requestOptions = {\n                method: 'GET',\n                // Ensure this request is not captured by auto-collection.\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\n                disableAppInsightsAutoCollection: true\n            };\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\n                if (res.statusCode === 200) {\n                    // Success; extract the appId from the body\n                    var appId_1 = \"\";\n                    res.setEncoding(\"utf-8\");\n                    res.on('data', function (data) {\n                        appId_1 += data;\n                    });\n                    res.on('end', function () {\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\n                        }\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                    });\n                }\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\n                    // Not found, probably a bad key. Do not try again.\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                }\n                else {\n                    // Retry after timeout.\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\n                }\n            });\n            if (req) {\n                req.on('error', function (error) {\n                    // Unable to contact endpoint.\n                    // Do nothing for now.\n                    Logging.warn(CorrelationIdManager.TAG, error);\n                });\n                req.end();\n            }\n        };\n        setTimeout(fetchAppId, 0);\n    };\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\n        if (pendingLookups) {\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\n            }\n        }\n    };\n    /**\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\n     * @param parentId\n     */\n    CorrelationIdManager.generateRequestId = function (parentId) {\n        if (parentId) {\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\n            if (parentId[parentId.length - 1] !== '.') {\n                parentId += '.';\n            }\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\n        }\n        else {\n            return CorrelationIdManager.generateRootId();\n        }\n    };\n    /**\n     * Given a hierarchical identifier of the form |X.*\n     * return the root identifier X\n     * @param id\n     */\n    CorrelationIdManager.getRootId = function (id) {\n        var endIndex = id.indexOf('.');\n        if (endIndex < 0) {\n            endIndex = id.length;\n        }\n        var startIndex = id[0] === '|' ? 1 : 0;\n        return id.substring(startIndex, endIndex);\n    };\n    CorrelationIdManager.generateRootId = function () {\n        return '|' + Util.w3cTraceId() + '.';\n    };\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\n            return parentId + suffix + delimiter;\n        }\n        // Combined identifier would be too long, so we must truncate it.\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\n        // overflow delimiter '#'\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\n        if (parentId.length > trimPosition) {\n            for (; trimPosition > 1; --trimPosition) {\n                var c = parentId[trimPosition - 1];\n                if (c === '.' || c === '_') {\n                    break;\n                }\n            }\n        }\n        if (trimPosition <= 1) {\n            // parentId is not a valid ID\n            return CorrelationIdManager.generateRootId();\n        }\n        suffix = Util.randomu32().toString(16);\n        while (suffix.length < 8) {\n            suffix = '0' + suffix;\n        }\n        return parentId.substring(0, trimPosition) + suffix + '#';\n    };\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\n    CorrelationIdManager.w3cEnabled = false;\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\n    CorrelationIdManager.pendingLookups = {};\n    CorrelationIdManager.completedLookups = {};\n    CorrelationIdManager.requestIdMaxLength = 1024;\n    CorrelationIdManager.currentRootId = Util.randomu32();\n    return CorrelationIdManager;\n}());\nmodule.exports = CorrelationIdManager;\n//# sourceMappingURL=CorrelationIdManager.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename } from 'path';\nimport * as vscode from 'vscode';\nimport * as languageModeIds from './languageModeIds';\n\nexport const enum DiagnosticLanguage {\n\tJavaScript,\n\tTypeScript\n}\n\nexport const allDiagnosticLanguages = [DiagnosticLanguage.JavaScript, DiagnosticLanguage.TypeScript];\n\nexport interface LanguageDescription {\n\treadonly id: string;\n\treadonly diagnosticOwner: string;\n\treadonly diagnosticSource: string;\n\treadonly diagnosticLanguage: DiagnosticLanguage;\n\treadonly modeIds: string[];\n\treadonly configFilePattern?: RegExp;\n\treadonly isExternal?: boolean;\n}\n\nexport const standardLanguageDescriptions: LanguageDescription[] = [\n\t{\n\t\tid: 'typescript',\n\t\tdiagnosticOwner: 'typescript',\n\t\tdiagnosticSource: 'ts',\n\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\tmodeIds: [languageModeIds.typescript, languageModeIds.typescriptreact],\n\t\tconfigFilePattern: /^tsconfig(\\..*)?\\.json$/gi\n\t}, {\n\t\tid: 'javascript',\n\t\tdiagnosticOwner: 'typescript',\n\t\tdiagnosticSource: 'ts',\n\t\tdiagnosticLanguage: DiagnosticLanguage.JavaScript,\n\t\tmodeIds: [languageModeIds.javascript, languageModeIds.javascriptreact],\n\t\tconfigFilePattern: /^jsconfig(\\..*)?\\.json$/gi\n\t}\n];\n\nexport function isTsConfigFileName(fileName: string): boolean {\n\treturn /^tsconfig\\.(.+\\.)?json$/i.test(basename(fileName));\n}\n\nexport function isJsConfigOrTsConfigFileName(fileName: string): boolean {\n\treturn /^[jt]sconfig\\.(.+\\.)?json$/i.test(basename(fileName));\n}\n\nexport function doesResourceLookLikeATypeScriptFile(resource: vscode.Uri): boolean {\n\treturn /\\.tsx?$/i.test(resource.fsPath);\n}\n\nexport function doesResourceLookLikeAJavaScriptFile(resource: vscode.Uri): boolean {\n\treturn /\\.jsx?$/i.test(resource.fsPath);\n}\n",null,"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../Library/Logging\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar CorrelationContextManager = (function () {\n    function CorrelationContextManager() {\n    }\n    /**\n     *  Provides the current Context.\n     *  The context is the most recent one entered into for the current\n     *  logical chain of execution, including across asynchronous calls.\n     */\n    CorrelationContextManager.getCurrentContext = function () {\n        if (!CorrelationContextManager.enabled) {\n            return null;\n        }\n        var context = CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);\n        if (context === undefined) {\n            return null;\n        }\n        return context;\n    };\n    /**\n     *  A helper to generate objects conforming to the CorrelationContext interface\n     */\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader, traceparent, tracestate) {\n        parentId = parentId || operationId;\n        if (this.enabled) {\n            return {\n                operation: {\n                    name: operationName,\n                    id: operationId,\n                    parentId: parentId,\n                    traceparent: traceparent,\n                    tracestate: tracestate\n                },\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\n            };\n        }\n        return null;\n    };\n    /**\n     *  Runs a function inside a given Context.\n     *  All logical children of the execution path that entered this Context\n     *  will receive this Context object on calls to GetCurrentContext.\n     */\n    CorrelationContextManager.runWithContext = function (context, fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn, (_a = {}, _a[CorrelationContextManager.CONTEXT_NAME] = context, _a))();\n        }\n        else {\n            return fn();\n        }\n        var _a;\n    };\n    /**\n     * Wrapper for cls-hooked bindEmitter method\n     */\n    CorrelationContextManager.wrapEmitter = function (emitter) {\n        if (CorrelationContextManager.enabled) {\n            CorrelationContextManager.session.bindEmitter(emitter);\n        }\n    };\n    /**\n     *  Patches a callback to restore the correct Context when getCurrentContext\n     *  is run within it. This is necessary if automatic correlation fails to work\n     *  with user-included libraries.\n     *\n     *  The supplied callback will be given the same context that was present for\n     *  the call to wrapCallback.  */\n    CorrelationContextManager.wrapCallback = function (fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn);\n        }\n        return fn;\n    };\n    /**\n     *  Enables the CorrelationContextManager.\n     */\n    CorrelationContextManager.enable = function (forceClsHooked) {\n        if (this.enabled) {\n            return;\n        }\n        if (!this.isNodeVersionCompatible()) {\n            this.enabled = false;\n            return;\n        }\n        if (!CorrelationContextManager.hasEverEnabled) {\n            this.forceClsHooked = forceClsHooked;\n            this.hasEverEnabled = true;\n            if (typeof this.cls === \"undefined\") {\n                if ((CorrelationContextManager.forceClsHooked === true) || (CorrelationContextManager.forceClsHooked === undefined && CorrelationContextManager.shouldUseClsHooked())) {\n                    this.cls = require('cls-hooked');\n                }\n                else {\n                    this.cls = require('continuation-local-storage');\n                }\n            }\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\n            DiagChannel.registerContextPreservation(function (cb) {\n                return CorrelationContextManager.session.bind(cb);\n            });\n        }\n        this.enabled = true;\n    };\n    /**\n     *  Disables the CorrelationContextManager.\n     */\n    CorrelationContextManager.disable = function () {\n        this.enabled = false;\n    };\n    /**\n     * Reset the namespace\n     */\n    CorrelationContextManager.reset = function () {\n        if (CorrelationContextManager.hasEverEnabled) {\n            CorrelationContextManager.session = null;\n            CorrelationContextManager.session = this.cls.createNamespace('AI-CLS-Session');\n        }\n    };\n    /**\n     *  Reports if CorrelationContextManager is able to run in this environment\n     */\n    CorrelationContextManager.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\n    };\n    /**\n     * We only want to use cls-hooked when it uses async_hooks api (8.2+), else\n     * use async-listener (plain -cls)\n     */\n    CorrelationContextManager.shouldUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 2);\n    };\n    /**\n     * A TypeError is triggered by cls-hooked for node [8.0, 8.2)\n     * @internal Used in tests only\n     */\n    CorrelationContextManager.canUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        var greater800 = (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 0);\n        var less820 = (parseInt(nodeVer[0]) < 8) || (parseInt(nodeVer[0]) <= 8 && parseInt(nodeVer[1]) < 2);\n        var greater470 = parseInt(nodeVer[0]) > 4 || (parseInt(nodeVer[0]) >= 4 && parseInt(nodeVer[1]) >= 7); // cls-hooked requires node 4.7+\n        return !(greater800 && less820) && greater470;\n    };\n    CorrelationContextManager.enabled = false;\n    CorrelationContextManager.hasEverEnabled = false;\n    CorrelationContextManager.forceClsHooked = undefined; // true: use cls-hooked, false: use cls, undefined: choose based on node version\n    CorrelationContextManager.CONTEXT_NAME = \"ApplicationInsights-Context\";\n    return CorrelationContextManager;\n}());\nexports.CorrelationContextManager = CorrelationContextManager;\nvar CustomPropertiesImpl = (function () {\n    function CustomPropertiesImpl(header) {\n        this.props = [];\n        this.addHeaderData(header);\n    }\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\n        var keyvals = header ? header.split(\", \") : [];\n        this.props = keyvals.map(function (keyval) {\n            var parts = keyval.split(\"=\");\n            return { key: parts[0], value: parts[1] };\n        }).concat(this.props);\n    };\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\n        return this.props.map(function (keyval) {\n            return keyval.key + \"=\" + keyval.value;\n        }).join(\", \");\n    };\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                return keyval.value;\n            }\n        }\n        return;\n    };\n    // TODO: Strictly according to the spec, properties which are recieved from\n    // an incoming request should be left untouched, while we may add our own new\n    // properties. The logic here will need to change to track that.\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\n            return;\n        }\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                keyval.value = val;\n                return;\n            }\n        }\n        this.props.push({ key: prop, value: val });\n    };\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\n    return CustomPropertiesImpl;\n}());\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_ENDPOINT = \"https://rt.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_HOST = \"rt.services.visualstudio.com\";\nvar QuickPulseCounter;\n(function (QuickPulseCounter) {\n    // Memory\n    QuickPulseCounter[\"COMMITTED_BYTES\"] = \"\\\\Memory\\\\Committed Bytes\";\n    // CPU\n    QuickPulseCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    // Request\n    QuickPulseCounter[\"REQUEST_RATE\"] = \"\\\\ApplicationInsights\\\\Requests/Sec\";\n    QuickPulseCounter[\"REQUEST_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Requests Failed/Sec\";\n    QuickPulseCounter[\"REQUEST_DURATION\"] = \"\\\\ApplicationInsights\\\\Request Duration\";\n    // Dependency\n    QuickPulseCounter[\"DEPENDENCY_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls Failed/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_DURATION\"] = \"\\\\ApplicationInsights\\\\Dependency Call Duration\";\n    // Exception\n    QuickPulseCounter[\"EXCEPTION_RATE\"] = \"\\\\ApplicationInsights\\\\Exceptions/Sec\";\n})(QuickPulseCounter = exports.QuickPulseCounter || (exports.QuickPulseCounter = {}));\nvar PerformanceCounter;\n(function (PerformanceCounter) {\n    // Memory\n    PerformanceCounter[\"PRIVATE_BYTES\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\";\n    PerformanceCounter[\"AVAILABLE_BYTES\"] = \"\\\\Memory\\\\Available Bytes\";\n    // CPU\n    PerformanceCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    PerformanceCounter[\"PROCESS_TIME\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\";\n    // Requests\n    PerformanceCounter[\"REQUEST_RATE\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\";\n    PerformanceCounter[\"REQUEST_DURATION\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\";\n})(PerformanceCounter = exports.PerformanceCounter || (exports.PerformanceCounter = {}));\n;\n/**\n * Map a PerformanceCounter/QuickPulseCounter to a QuickPulseCounter. If no mapping exists, mapping is *undefined*\n */\nexports.PerformanceToQuickPulseCounter = (_a = {},\n    _a[PerformanceCounter.PROCESSOR_TIME] = QuickPulseCounter.PROCESSOR_TIME,\n    _a[PerformanceCounter.REQUEST_RATE] = QuickPulseCounter.REQUEST_RATE,\n    _a[PerformanceCounter.REQUEST_DURATION] = QuickPulseCounter.REQUEST_DURATION,\n    // Remap quick pulse only counters\n    _a[QuickPulseCounter.COMMITTED_BYTES] = QuickPulseCounter.COMMITTED_BYTES,\n    _a[QuickPulseCounter.REQUEST_FAILURE_RATE] = QuickPulseCounter.REQUEST_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_RATE] = QuickPulseCounter.DEPENDENCY_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE] = QuickPulseCounter.DEPENDENCY_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_DURATION] = QuickPulseCounter.DEPENDENCY_DURATION,\n    _a[QuickPulseCounter.EXCEPTION_RATE] = QuickPulseCounter.EXCEPTION_RATE,\n    _a);\nexports.QuickPulseDocumentType = {\n    Event: \"Event\",\n    Exception: \"Exception\",\n    Trace: \"Trace\",\n    Metric: \"Metric\",\n    Request: \"Request\",\n    Dependency: \"RemoteDependency\",\n    Availability: \"Availability\"\n};\nexports.QuickPulseType = {\n    Event: \"EventTelemetryDocument\",\n    Exception: \"ExceptionTelemetryDocument\",\n    Trace: \"TraceTelemetryDocument\",\n    Metric: \"MetricTelemetryDocument\",\n    Request: \"RequestTelemetryDocument\",\n    Dependency: \"DependencyTelemetryDocument\",\n    Availability: \"AvailabilityTelemetryDocument\"\n};\nexports.TelemetryTypeStringToQuickPulseType = {\n    EventData: exports.QuickPulseType.Event,\n    ExceptionData: exports.QuickPulseType.Exception,\n    MessageData: exports.QuickPulseType.Trace,\n    MetricData: exports.QuickPulseType.Metric,\n    RequestData: exports.QuickPulseType.Request,\n    RemoteDependencyData: exports.QuickPulseType.Dependency,\n    AvailabilityData: exports.QuickPulseType.Availability\n};\nexports.TelemetryTypeStringToQuickPulseDocumentType = {\n    EventData: exports.QuickPulseDocumentType.Event,\n    ExceptionData: exports.QuickPulseDocumentType.Exception,\n    MessageData: exports.QuickPulseDocumentType.Trace,\n    MetricData: exports.QuickPulseDocumentType.Metric,\n    RequestData: exports.QuickPulseDocumentType.Request,\n    RemoteDependencyData: exports.QuickPulseDocumentType.Dependency,\n    AvailabilityData: exports.QuickPulseDocumentType.Availability\n};\nvar _a;\n//# sourceMappingURL=Constants.js.map","module.exports = require(\"url\");","\"use strict\";\nmodule.exports = {\n    /**\n     * Request-Context header\n     */\n    requestContextHeader: \"request-context\",\n    /**\n     * Source instrumentation header that is added by an application while making http\n     * requests and retrieved by the other application when processing incoming requests.\n     */\n    requestContextSourceKey: \"appId\",\n    /**\n     * Target instrumentation header that is added to the response and retrieved by the\n     * calling application when processing incoming responses.\n     */\n    requestContextTargetKey: \"appId\",\n    /**\n     * Request-Id header\n     */\n    requestIdHeader: \"request-id\",\n    /**\n     * Legacy Header containing the id of the immidiate caller\n     */\n    parentIdHeader: \"x-ms-request-id\",\n    /**\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\n     * accross transactions\n     */\n    rootIdHeader: \"x-ms-request-root-id\",\n    /**\n     * Correlation-Context header\n     *\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\n     */\n    correlationContextHeader: \"correlation-context\",\n    /**\n     * W3C distributed tracing protocol header\n     */\n    traceparentHeader: \"traceparent\",\n    /**\n     * W3C distributed tracing protocol state header\n     */\n    traceStateHeader: \"tracestate\"\n};\n//# sourceMappingURL=RequestResponseHeaders.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function parseKindModifier(kindModifiers: string): Set<string> {\n\treturn new Set(kindModifiers.split(/,|\\s+/g));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function memoize(_target: any, key: string, descriptor: any) {\n\tlet fnKey: string | undefined;\n\tlet fn: Function | undefined;\n\n\tif (typeof descriptor.value === 'function') {\n\t\tfnKey = 'value';\n\t\tfn = descriptor.value;\n\t} else if (typeof descriptor.get === 'function') {\n\t\tfnKey = 'get';\n\t\tfn = descriptor.get;\n\t} else {\n\t\tthrow new Error('not supported');\n\t}\n\n\tconst memoizeKey = `$memoize$${key}`;\n\n\tdescriptor[fnKey] = function (...args: any[]) {\n\t\tif (!this.hasOwnProperty(memoizeKey)) {\n\t\t\tObject.defineProperty(this, memoizeKey, {\n\t\t\t\tconfigurable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\twritable: false,\n\t\t\t\tvalue: fn!.apply(this, args)\n\t\t\t});\n\t\t}\n\n\t\treturn this[memoizeKey];\n\t};\n}\n","module.exports = require(\"assert\");","module.exports = require(\"http\");","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Traceparent = require(\"../Library/Traceparent\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectHttpDependencies = (function () {\n    function AutoCollectHttpDependencies(client) {\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpDependencies.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._initialize();\n        }\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpDependencies.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var originalGet = http.get;\n        var originalRequest = http.request;\n        var originalHttpsRequest = https.request;\n        var clientRequestPatch = function (request, options) {\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\n            if (request && options && shouldCollect) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\n            }\n        };\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\n        // Patch both and leave a flag to not double-count on versions that just call through\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\n        http.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        https.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        // Node 8 calls http.request from http.get using a local reference!\n        // We have to patch .get manually in this case and can't just assume request is enough\n        // We have to replace the entire method in this case. We can't call the original.\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\n        http.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n        https.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n    };\n    /**\n     * Tracks an outgoing request. Because it may set headers this method must be called before\n     * writing content to or ending the request.\n     */\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\n        if (!telemetry.options || !telemetry.request || !client) {\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\n            return;\n        }\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var uniqueRequestId;\n        var uniqueTraceparent;\n        if (currentContext && currentContext.operation && currentContext.operation.traceparent && Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId)) {\n            currentContext.operation.traceparent.updateSpanId();\n            uniqueRequestId = currentContext.operation.traceparent.getBackCompatRequestId();\n        }\n        else if (CorrelationIdManager.w3cEnabled) {\n            // Start an operation now so that we can include the w3c headers in the outgoing request\n            var traceparent = new Traceparent();\n            uniqueTraceparent = traceparent.toString();\n            uniqueRequestId = traceparent.getBackCompatRequestId();\n        }\n        else {\n            uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\n        }\n        // Add the source correlationId to the request headers, if a value was not already provided.\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\n        // are not included in the v0.10 type declarations currently used. So check if the\n        // methods exist before invoking them.\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\n            if (client.config && client.config.correlationId) {\n                // getHeader returns \"any\" type in newer versions of node. In basic scenarios, this will be <string | string[] | number>, but could be modified to anything else via middleware\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\n                try {\n                    Util.safeIncludeCorrelationHeader(client, telemetry.request, correlationHeader);\n                }\n                catch (err) {\n                    Logging.warn(\"Request-Context header could not be set. Correlation of requests may be lost\", err);\n                }\n                if (currentContext && currentContext.operation) {\n                    try {\n                        telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\n                        // Also set legacy headers\n                        telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\n                        telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\n                        // Set W3C headers, if available\n                        if (uniqueTraceparent || currentContext.operation.traceparent) {\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, uniqueTraceparent || currentContext.operation.traceparent.toString());\n                        }\n                        else if (CorrelationIdManager.w3cEnabled) {\n                            // should never get here since we set uniqueTraceparent above for the w3cEnabled scenario\n                            var traceparent = new Traceparent().toString();\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, traceparent);\n                        }\n                        if (currentContext.operation.tracestate) {\n                            var tracestate = currentContext.operation.tracestate.toString();\n                            if (tracestate) {\n                                telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader, tracestate);\n                            }\n                        }\n                        var correlationContextHeader = currentContext.customProperties.serializeToHeader();\n                        if (correlationContextHeader) {\n                            telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\n                        }\n                    }\n                    catch (err) {\n                        Logging.warn(\"Correlation headers could not be set. Correlation of requests may be lost.\", err);\n                    }\n                }\n            }\n        }\n        // Collect dependency telemetry about the request when it finishes.\n        if (telemetry.request.on) {\n            telemetry.request.on('response', function (response) {\n                requestParser.onResponse(response);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\n                client.trackDependency(dependencyTelemetry);\n            });\n            telemetry.request.on('error', function (e) {\n                requestParser.onError(e);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\n                client.trackDependency(dependencyTelemetry);\n            });\n        }\n    };\n    AutoCollectHttpDependencies.prototype.dispose = function () {\n        AutoCollectHttpDependencies.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\n    AutoCollectHttpDependencies.requestNumber = 1;\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpDependencies;\n}());\nmodule.exports = AutoCollectHttpDependencies;\n//# sourceMappingURL=HttpDependencies.js.map","module.exports = require(\"https\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as array from './arrays';\n\nexport function equals(one: any, other: any): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\tif (one === null || one === undefined || other === null || other === undefined) {\n\t\treturn false;\n\t}\n\tif (typeof one !== typeof other) {\n\t\treturn false;\n\t}\n\tif (typeof one !== 'object') {\n\t\treturn false;\n\t}\n\tif (Array.isArray(one) !== Array.isArray(other)) {\n\t\treturn false;\n\t}\n\n\tif (Array.isArray(one)) {\n\t\treturn array.equals(one, other, equals);\n\t} else {\n\t\tconst oneKeys: string[] = [];\n\t\tfor (const key in one) {\n\t\t\toneKeys.push(key);\n\t\t}\n\t\toneKeys.sort();\n\t\tconst otherKeys: string[] = [];\n\t\tfor (const key in other) {\n\t\t\totherKeys.push(key);\n\t\t}\n\t\totherKeys.sort();\n\t\tif (!array.equals(oneKeys, otherKeys)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn oneKeys.every(key => equals(one[key], other[key]));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as fileSchemes from '../utils/fileSchemes';\n\n/**\n * Maps of file resources\n *\n * Attempts to handle correct mapping on both case sensitive and case in-sensitive\n * file systems.\n */\nexport class ResourceMap<T> {\n\n\tprivate static readonly defaultPathNormalizer = (resource: vscode.Uri): string => {\n\t\tif (resource.scheme === fileSchemes.file) {\n\t\t\treturn resource.fsPath;\n\t\t}\n\t\treturn resource.toString(true);\n\t};\n\n\tprivate readonly _map = new Map<string, { readonly resource: vscode.Uri, value: T }>();\n\n\tconstructor(\n\t\tprotected readonly _normalizePath: (resource: vscode.Uri) => string | undefined = ResourceMap.defaultPathNormalizer,\n\t\tprotected readonly config: {\n\t\t\treadonly onCaseInsenitiveFileSystem: boolean,\n\t\t},\n\t) { }\n\n\tpublic get size() {\n\t\treturn this._map.size;\n\t}\n\n\tpublic has(resource: vscode.Uri): boolean {\n\t\tconst file = this.toKey(resource);\n\t\treturn !!file && this._map.has(file);\n\t}\n\n\tpublic get(resource: vscode.Uri): T | undefined {\n\t\tconst file = this.toKey(resource);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst entry = this._map.get(file);\n\t\treturn entry ? entry.value : undefined;\n\t}\n\n\tpublic set(resource: vscode.Uri, value: T) {\n\t\tconst file = this.toKey(resource);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\t\tconst entry = this._map.get(file);\n\t\tif (entry) {\n\t\t\tentry.value = value;\n\t\t} else {\n\t\t\tthis._map.set(file, { resource, value });\n\t\t}\n\t}\n\n\tpublic delete(resource: vscode.Uri): void {\n\t\tconst file = this.toKey(resource);\n\t\tif (file) {\n\t\t\tthis._map.delete(file);\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tthis._map.clear();\n\t}\n\n\tpublic get values(): Iterable<T> {\n\t\treturn Array.from(this._map.values(), x => x.value);\n\t}\n\n\tpublic get entries(): Iterable<{ resource: vscode.Uri, value: T }> {\n\t\treturn this._map.values();\n\t}\n\n\tprivate toKey(resource: vscode.Uri): string | undefined {\n\t\tconst key = this._normalizePath(resource);\n\t\tif (!key) {\n\t\t\treturn key;\n\t\t}\n\t\treturn this.isCaseInsensitivePath(key) ? key.toLowerCase() : key;\n\t}\n\n\tprivate isCaseInsensitivePath(path: string) {\n\t\tif (isWindowsPath(path)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn path[0] === '/' && this.config.onCaseInsenitiveFileSystem;\n\t}\n}\n\nfunction isWindowsPath(path: string): boolean {\n\treturn /^[a-zA-Z]:[\\/\\\\]/.test(path);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\n\nexport interface IFilePathToResourceConverter {\n\t/**\n\t * Convert a typescript filepath to a VS Code resource.\n\t */\n\ttoResource(filepath: string): vscode.Uri;\n}\n\nfunction replaceLinks(text: string): string {\n\treturn text\n\t\t// Http(s) links\n\t\t.replace(/\\{@(link|linkplain|linkcode) (https?:\\/\\/[^ |}]+?)(?:[| ]([^{}\\n]+?))?\\}/gi, (_, tag: string, link: string, text?: string) => {\n\t\t\tswitch (tag) {\n\t\t\t\tcase 'linkcode':\n\t\t\t\t\treturn `[\\`${text ? text.trim() : link}\\`](${link})`;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn `[${text ? text.trim() : link}](${link})`;\n\t\t\t}\n\t\t});\n}\n\nfunction processInlineTags(text: string): string {\n\treturn replaceLinks(text);\n}\n\nfunction getTagBodyText(\n\ttag: Proto.JSDocTagInfo,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string | undefined {\n\tif (!tag.text) {\n\t\treturn undefined;\n\t}\n\n\t// Convert to markdown code block if it is not already one\n\tfunction makeCodeblock(text: string): string {\n\t\tif (text.match(/^\\s*[~`]{3}/g)) {\n\t\t\treturn text;\n\t\t}\n\t\treturn '```\\n' + text + '\\n```';\n\t}\n\n\tconst text = convertLinkTags(tag.text, filePathConverter);\n\tswitch (tag.name) {\n\t\tcase 'example':\n\t\t\t// check for caption tags, fix for #79704\n\t\t\tconst captionTagMatches = text.match(/<caption>(.*?)<\\/caption>\\s*(\\r\\n|\\n)/);\n\t\t\tif (captionTagMatches && captionTagMatches.index === 0) {\n\t\t\t\treturn captionTagMatches[1] + '\\n\\n' + makeCodeblock(text.substr(captionTagMatches[0].length));\n\t\t\t} else {\n\t\t\t\treturn makeCodeblock(text);\n\t\t\t}\n\t\tcase 'author':\n\t\t\t// fix obsucated email address, #80898\n\t\t\tconst emailMatch = text.match(/(.+)\\s<([-.\\w]+@[-.\\w]+)>/);\n\n\t\t\tif (emailMatch === null) {\n\t\t\t\treturn text;\n\t\t\t} else {\n\t\t\t\treturn `${emailMatch[1]} ${emailMatch[2]}`;\n\t\t\t}\n\t\tcase 'default':\n\t\t\treturn makeCodeblock(text);\n\t}\n\n\treturn processInlineTags(text);\n}\n\nfunction getTagDocumentation(\n\ttag: Proto.JSDocTagInfo,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string | undefined {\n\tswitch (tag.name) {\n\t\tcase 'augments':\n\t\tcase 'extends':\n\t\tcase 'param':\n\t\tcase 'template':\n\t\t\tconst body = (convertLinkTags(tag.text, filePathConverter)).split(/^(\\S+)\\s*-?\\s*/);\n\t\t\tif (body?.length === 3) {\n\t\t\t\tconst param = body[1];\n\t\t\t\tconst doc = body[2];\n\t\t\t\tconst label = `*@${tag.name}* \\`${param}\\``;\n\t\t\t\tif (!doc) {\n\t\t\t\t\treturn label;\n\t\t\t\t}\n\t\t\t\treturn label + (doc.match(/\\r\\n|\\n/g) ? '  \\n' + processInlineTags(doc) : ` — ${processInlineTags(doc)}`);\n\t\t\t}\n\t}\n\n\t// Generic tag\n\tconst label = `*@${tag.name}*`;\n\tconst text = getTagBodyText(tag, filePathConverter);\n\tif (!text) {\n\t\treturn label;\n\t}\n\treturn label + (text.match(/\\r\\n|\\n/g) ? '  \\n' + text : ` — ${text}`);\n}\n\nexport function plainWithLinks(\n\tparts: readonly Proto.SymbolDisplayPart[] | string,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string {\n\treturn processInlineTags(convertLinkTags(parts, filePathConverter));\n}\n\n/**\n * Convert `@link` inline tags to markdown links\n */\nfunction convertLinkTags(\n\tparts: readonly Proto.SymbolDisplayPart[] | string | undefined,\n\tfilePathConverter: IFilePathToResourceConverter,\n): string {\n\tif (!parts) {\n\t\treturn '';\n\t}\n\n\tif (typeof parts === 'string') {\n\t\treturn parts;\n\t}\n\n\tconst out: string[] = [];\n\n\tlet currentLink: { name?: string, target?: Proto.FileSpan, text?: string } | undefined;\n\tfor (const part of parts) {\n\t\tswitch (part.kind) {\n\t\t\tcase 'link':\n\t\t\t\tif (currentLink) {\n\t\t\t\t\tconst text = currentLink.text ?? currentLink.name;\n\t\t\t\t\tif (currentLink.target) {\n\t\t\t\t\t\tconst link = filePathConverter.toResource(currentLink.target.file)\n\t\t\t\t\t\t\t.with({\n\t\t\t\t\t\t\t\tfragment: `L${currentLink.target.start.line},${currentLink.target.start.offset}`\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tout.push(`[${text}](${link.toString(true)})`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\tout.push(text);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcurrentLink = undefined;\n\t\t\t\t} else {\n\t\t\t\t\tcurrentLink = {};\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'linkName':\n\t\t\t\tif (currentLink) {\n\t\t\t\t\tcurrentLink.name = part.text;\n\t\t\t\t\t// TODO: remove cast once we pick up TS 4.3\n\t\t\t\t\tcurrentLink.target = (part as any as Proto.JSDocLinkDisplayPart).target;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'linkText':\n\t\t\t\tif (currentLink) {\n\t\t\t\t\tcurrentLink.text = part.text;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tout.push(part.text);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn processInlineTags(out.join(''));\n}\n\nexport function tagsMarkdownPreview(\n\ttags: readonly Proto.JSDocTagInfo[],\n\tfilePathConverter: IFilePathToResourceConverter,\n): string {\n\treturn tags.map(tag => getTagDocumentation(tag, filePathConverter)).join('  \\n\\n');\n}\n\nexport function markdownDocumentation(\n\tdocumentation: Proto.SymbolDisplayPart[] | string,\n\ttags: Proto.JSDocTagInfo[],\n\tfilePathConverter: IFilePathToResourceConverter,\n): vscode.MarkdownString {\n\tconst out = new vscode.MarkdownString();\n\taddMarkdownDocumentation(out, documentation, tags, filePathConverter);\n\treturn out;\n}\n\nexport function addMarkdownDocumentation(\n\tout: vscode.MarkdownString,\n\tdocumentation: Proto.SymbolDisplayPart[] | string | undefined,\n\ttags: Proto.JSDocTagInfo[] | undefined,\n\tconverter: IFilePathToResourceConverter,\n): vscode.MarkdownString {\n\tif (documentation) {\n\t\tout.appendMarkdown(plainWithLinks(documentation, converter));\n\t}\n\n\tif (tags) {\n\t\tconst tagsPreview = tagsMarkdownPreview(tags, converter);\n\t\tif (tagsPreview) {\n\t\t\tout.appendMarkdown('\\n\\n' + tagsPreview);\n\t\t}\n\t}\n\treturn out;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport * as typeConverters from '../utils/typeConverters';\n\n\nexport default class TypeScriptDefinitionProviderBase {\n\tconstructor(\n\t\tprotected readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tprotected async getSymbolLocations(\n\t\tdefinitionType: 'definition' | 'implementation' | 'typeDefinition',\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Location[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(file, position);\n\t\tconst response = await this.client.execute(definitionType, args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(location =>\n\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(location.file), location));\n\t}\n}","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../../Library/Logging\");\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\nvar TAG = \"DiagnosticChannel\";\nif (exports.IsInitialized) {\n    var publishers = require(\"diagnostic-channel-publishers\");\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\n    var unpatchedModules = individualOptOuts.split(\",\");\n    var modules = {\n        bunyan: publishers.bunyan,\n        console: publishers.console,\n        mongodb: publishers.mongodb,\n        mongodbCore: publishers.mongodbCore,\n        mysql: publishers.mysql,\n        redis: publishers.redis,\n        pg: publishers.pg,\n        pgPool: publishers.pgPool,\n        winston: publishers.winston\n    };\n    for (var mod in modules) {\n        if (unpatchedModules.indexOf(mod) === -1) {\n            modules[mod].enable();\n            Logging.info(TAG, \"Subscribed to \" + mod + \" events\");\n        }\n    }\n    if (unpatchedModules.length > 0) {\n        Logging.info(TAG, \"Some modules will not be patched\", unpatchedModules);\n    }\n}\nelse {\n    Logging.info(TAG, \"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set\");\n}\nfunction registerContextPreservation(cb) {\n    if (!exports.IsInitialized) {\n        return;\n    }\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\n}\nexports.registerContextPreservation = registerContextPreservation;\n//# sourceMappingURL=initialization.js.map","module.exports = require(\"util\");","'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","module.exports = require(\"child_process\");","\"use strict\";\nvar os = require(\"os\");\nvar Constants = require(\"../Declarations/Constants\");\nvar AutoCollectPerformance = (function () {\n    /**\n     * @param enableLiveMetricsCounters - enable sending additional live metrics information (dependency metrics, exception metrics, committed memory)\n     */\n    function AutoCollectPerformance(client, collectionInterval, enableLiveMetricsCounters) {\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (enableLiveMetricsCounters === void 0) { enableLiveMetricsCounters = false; }\n        this._lastIntervalRequestExecutionTime = 0; // the sum of durations which took place during from app start until last interval\n        this._lastIntervalDependencyExecutionTime = 0;\n        if (!AutoCollectPerformance.INSTANCE) {\n            AutoCollectPerformance.INSTANCE = this;\n        }\n        this._isInitialized = false;\n        this._client = client;\n        this._collectionInterval = collectionInterval;\n        this._enableLiveMetricsCounters = enableLiveMetricsCounters;\n    }\n    AutoCollectPerformance.prototype.enable = function (isEnabled, collectionInterval) {\n        var _this = this;\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        if (isEnabled) {\n            if (!this._handle) {\n                this._lastCpus = os.cpus();\n                this._lastRequests = {\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n                    time: +new Date\n                };\n                this._lastDependencies = {\n                    totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                    totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                    time: +new Date\n                };\n                this._lastExceptions = {\n                    totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                    time: +new Date\n                };\n                if (typeof process.cpuUsage === 'function') {\n                    this._lastAppCpuUsage = process.cpuUsage();\n                }\n                this._lastHrtime = process.hrtime();\n                this._collectionInterval = collectionInterval || this._collectionInterval;\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, this._collectionInterval);\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\n            }\n        }\n        else {\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    AutoCollectPerformance.countRequest = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalRequestExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedRequestCount++;\n        }\n        AutoCollectPerformance._totalRequestCount++;\n    };\n    AutoCollectPerformance.countException = function () {\n        AutoCollectPerformance._totalExceptionCount++;\n    };\n    AutoCollectPerformance.countDependency = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalDependencyExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedDependencyCount++;\n        }\n        AutoCollectPerformance._totalDependencyCount++;\n    };\n    AutoCollectPerformance.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectPerformance.isEnabled = function () {\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\n    };\n    AutoCollectPerformance.prototype.trackPerformance = function () {\n        this._trackCpu();\n        this._trackMemory();\n        this._trackNetwork();\n        this._trackDependencyRate();\n        this._trackExceptionRate();\n    };\n    AutoCollectPerformance.prototype._trackCpu = function () {\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\n        // to find the delta since the last measurement\n        var cpus = os.cpus();\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\n            var totalUser = 0;\n            var totalSys = 0;\n            var totalNice = 0;\n            var totalIdle = 0;\n            var totalIrq = 0;\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\n                var cpu = cpus[i];\n                var lastCpu = this._lastCpus[i];\n                var name = \"% cpu(\" + i + \") \";\n                var model = cpu.model;\n                var speed = cpu.speed;\n                var times = cpu.times;\n                var lastTimes = lastCpu.times;\n                // user cpu time (or) % CPU time spent in user space\n                var user = (times.user - lastTimes.user) || 0;\n                totalUser += user;\n                // system cpu time (or) % CPU time spent in kernel space\n                var sys = (times.sys - lastTimes.sys) || 0;\n                totalSys += sys;\n                // user nice cpu time (or) % CPU time spent on low priority processes\n                var nice = (times.nice - lastTimes.nice) || 0;\n                totalNice += nice;\n                // idle cpu time (or) % CPU time spent idle\n                var idle = (times.idle - lastTimes.idle) || 0;\n                totalIdle += idle;\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\n                var irq = (times.irq - lastTimes.irq) || 0;\n                totalIrq += irq;\n            }\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\n            var appCpuPercent = undefined;\n            if (typeof process.cpuUsage === 'function') {\n                var appCpuUsage = process.cpuUsage();\n                var hrtime = process.hrtime();\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\n                }\n                // Set previous\n                this._lastAppCpuUsage = appCpuUsage;\n                this._lastHrtime = hrtime;\n            }\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESSOR_TIME, value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESS_TIME, value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\n        }\n        this._lastCpus = cpus;\n    };\n    AutoCollectPerformance.prototype._trackMemory = function () {\n        var freeMem = os.freemem();\n        var usedMem = process.memoryUsage().rss;\n        var committedMemory = os.totalmem() - freeMem;\n        this._client.trackMetric({ name: Constants.PerformanceCounter.PRIVATE_BYTES, value: usedMem });\n        this._client.trackMetric({ name: Constants.PerformanceCounter.AVAILABLE_BYTES, value: freeMem });\n        // Only supported by quickpulse service\n        if (this._enableLiveMetricsCounters) {\n            this._client.trackMetric({ name: Constants.QuickPulseCounter.COMMITTED_BYTES, value: committedMemory });\n        }\n    };\n    AutoCollectPerformance.prototype._trackNetwork = function () {\n        // track total request counters\n        var lastRequests = this._lastRequests;\n        var requests = {\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n            time: +new Date\n        };\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\n        var elapsedMs = requests.time - lastRequests.time;\n        var elapsedSeconds = elapsedMs / 1000;\n        var averageRequestExecutionTime = ((AutoCollectPerformance._intervalRequestExecutionTime - this._lastIntervalRequestExecutionTime) / intervalRequests) || 0; // default to 0 in case no requests in this interval\n        this._lastIntervalRequestExecutionTime = AutoCollectPerformance._intervalRequestExecutionTime; // reset\n        if (elapsedMs > 0) {\n            var requestsPerSec = intervalRequests / elapsedSeconds;\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_RATE, value: requestsPerSec });\n            // Only send duration to live metrics if it has been updated!\n            if (!this._enableLiveMetricsCounters || intervalRequests > 0) {\n                this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_DURATION, value: averageRequestExecutionTime });\n            }\n            // Only supported by quickpulse service\n            if (this._enableLiveMetricsCounters) {\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.REQUEST_FAILURE_RATE, value: failedRequestsPerSec });\n            }\n        }\n        this._lastRequests = requests;\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackDependencyRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastDependencies = this._lastDependencies;\n            var dependencies = {\n                totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                time: +new Date\n            };\n            var intervalDependencies = (dependencies.totalDependencyCount - lastDependencies.totalDependencyCount) || 0;\n            var intervalFailedDependencies = (dependencies.totalFailedDependencyCount - lastDependencies.totalFailedDependencyCount) || 0;\n            var elapsedMs = dependencies.time - lastDependencies.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            var averageDependencyExecutionTime = ((AutoCollectPerformance._intervalDependencyExecutionTime - this._lastIntervalDependencyExecutionTime) / intervalDependencies) || 0;\n            this._lastIntervalDependencyExecutionTime = AutoCollectPerformance._intervalDependencyExecutionTime; // reset\n            if (elapsedMs > 0) {\n                var dependenciesPerSec = intervalDependencies / elapsedSeconds;\n                var failedDependenciesPerSec = intervalFailedDependencies / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_RATE, value: dependenciesPerSec });\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE, value: failedDependenciesPerSec });\n                // redundant check for livemetrics, but kept for consistency w/ requests\n                // Only send duration to live metrics if it has been updated!\n                if (!this._enableLiveMetricsCounters || intervalDependencies > 0) {\n                    this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_DURATION, value: averageDependencyExecutionTime });\n                }\n            }\n            this._lastDependencies = dependencies;\n        }\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackExceptionRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastExceptions = this._lastExceptions;\n            var exceptions = {\n                totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                time: +new Date\n            };\n            var intervalExceptions = (exceptions.totalExceptionCount - lastExceptions.totalExceptionCount) || 0;\n            var elapsedMs = exceptions.time - lastExceptions.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            if (elapsedMs > 0) {\n                var exceptionsPerSec = intervalExceptions / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.EXCEPTION_RATE, value: exceptionsPerSec });\n            }\n            this._lastExceptions = exceptions;\n        }\n    };\n    AutoCollectPerformance.prototype.dispose = function () {\n        AutoCollectPerformance.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectPerformance._totalRequestCount = 0;\n    AutoCollectPerformance._totalFailedRequestCount = 0;\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\n    AutoCollectPerformance._totalDependencyCount = 0;\n    AutoCollectPerformance._totalFailedDependencyCount = 0;\n    AutoCollectPerformance._lastDependencyExecutionTime = 0;\n    AutoCollectPerformance._totalExceptionCount = 0;\n    AutoCollectPerformance._intervalDependencyExecutionTime = 0;\n    AutoCollectPerformance._intervalRequestExecutionTime = 0;\n    return AutoCollectPerformance;\n}());\nmodule.exports = AutoCollectPerformance;\n//# sourceMappingURL=Performance.js.map","\"use strict\";\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\nvar ConnectionStringParser = require(\"./ConnectionStringParser\");\nvar Constants = require(\"../Declarations/Constants\");\nvar url = require(\"url\");\nvar Config = (function () {\n    function Config(setupString) {\n        var _this = this;\n        this.endpointBase = Constants.DEFAULT_BREEZE_ENDPOINT;\n        var connectionStringEnv = process.env[Config.ENV_connectionString];\n        var csCode = ConnectionStringParser.parse(setupString);\n        var csEnv = ConnectionStringParser.parse(connectionStringEnv);\n        var iKeyCode = !csCode.instrumentationkey && Object.keys(csCode).length > 0\n            ? null // CS was valid but instrumentation key was not provided, null and grab from env var\n            : setupString; // CS was invalid, so it must be an ikey\n        this.instrumentationKey = csCode.instrumentationkey || iKeyCode /* === instrumentationKey */ || csEnv.instrumentationkey || Config._getInstrumentationKey();\n        this.endpointUrl = (csCode.ingestionendpoint || csEnv.ingestionendpoint || this.endpointBase) + \"/v2/track\";\n        this.maxBatchSize = 250;\n        this.maxBatchIntervalMs = 15000;\n        this.disableAppInsights = false;\n        this.samplingPercentage = 100;\n        this.correlationIdRetryIntervalMs = 30 * 1000;\n        this.correlationHeaderExcludedDomains = [\n            \"*.core.windows.net\",\n            \"*.core.chinacloudapi.cn\",\n            \"*.core.cloudapi.de\",\n            \"*.core.usgovcloudapi.net\",\n            \"*.core.microsoft.scloud\",\n            \"*.core.eaglex.ic.gov\"\n        ];\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\n        this.httpAgent = undefined;\n        this.httpsAgent = undefined;\n        this.profileQueryEndpoint = csCode.ingestionendpoint || csEnv.ingestionendpoint || process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\n        this._quickPulseHost = csCode.liveendpoint || csEnv.liveendpoint || process.env[Config.ENV_quickPulseHost] || Constants.DEFAULT_LIVEMETRICS_HOST;\n        // Parse quickPulseHost if it startswith http(s)://\n        if (this._quickPulseHost.match(/^https?:\\/\\//)) {\n            this._quickPulseHost = url.parse(this._quickPulseHost).host;\n        }\n    }\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\n        get: function () {\n            return this._profileQueryEndpoint;\n        },\n        set: function (endpoint) {\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\n            this._profileQueryEndpoint = endpoint;\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Config.prototype, \"quickPulseHost\", {\n        get: function () {\n            return this._quickPulseHost;\n        },\n        set: function (host) {\n            this._quickPulseHost = host;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Config._getInstrumentationKey = function () {\n        // check for both the documented env variable and the azure-prefixed variable\n        var iKey = process.env[Config.ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\n            || process.env[Config.legacy_ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\n        if (!iKey || iKey == \"\") {\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\n        }\n        return iKey;\n    };\n    // Azure adds this prefix to all environment variables\n    Config.ENV_azurePrefix = \"APPSETTING_\";\n    // This key is provided in the readme\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\n    Config.ENV_quickPulseHost = \"APPINSIGHTS_QUICKPULSE_HOST\";\n    // Azure Connection String\n    Config.ENV_connectionString = \"APPLICATIONINSIGHTS_CONNECTION_STRING\";\n    // Native Metrics Opt Outs\n    Config.ENV_nativeMetricsDisablers = \"APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC\";\n    Config.ENV_nativeMetricsDisableAll = \"APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS\";\n    Config.ENV_http_proxy = \"http_proxy\";\n    Config.ENV_https_proxy = \"https_proxy\";\n    return Config;\n}());\nmodule.exports = Config;\n//# sourceMappingURL=Config.js.map","\"use strict\";\nvar os = require(\"os\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Logging = require(\"./Logging\");\nvar Context = (function () {\n    function Context(packageJsonPath) {\n        this.keys = new Contracts.ContextTagKeys();\n        this.tags = {};\n        this._loadApplicationContext();\n        this._loadDeviceContext();\n        this._loadInternalContext();\n    }\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\n        // note: this should return the host package.json\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\n        if (!Context.appVersion[packageJsonPath]) {\n            Context.appVersion[packageJsonPath] = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.appVersion[packageJsonPath] = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\n    };\n    Context.prototype._loadDeviceContext = function () {\n        this.tags[this.keys.deviceId] = \"\";\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\n        // not yet supported tags\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\n    };\n    Context.prototype._loadInternalContext = function () {\n        // note: this should return the sdk package.json\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\n        if (!Context.sdkVersion) {\n            Context.sdkVersion = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.sdkVersion = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\n    };\n    Context.DefaultRoleName = \"Web\";\n    Context.appVersion = {};\n    Context.sdkVersion = null;\n    return Context;\n}());\nmodule.exports = Context;\n//# sourceMappingURL=Context.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as os from 'os';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\nfunction makeRandomHexString(length: number): string {\n\tconst chars = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\tlet result = '';\n\tfor (let i = 0; i < length; i++) {\n\t\tconst idx = Math.floor(chars.length * Math.random());\n\t\tresult += chars[idx];\n\t}\n\treturn result;\n}\n\nconst getRootTempDir = (() => {\n\tlet dir: string | undefined;\n\treturn () => {\n\t\tif (!dir) {\n\t\t\tconst filename = `vscode-typescript${process.platform !== 'win32' && process.getuid ? process.getuid() : ''}`;\n\t\t\tdir = path.join(os.tmpdir(), filename);\n\t\t}\n\t\tif (!fs.existsSync(dir)) {\n\t\t\tfs.mkdirSync(dir);\n\t\t}\n\t\treturn dir;\n\t};\n})();\n\nexport const getInstanceTempDir = (() => {\n\tlet dir: string | undefined;\n\treturn () => {\n\t\tif (!dir) {\n\t\t\tdir = path.join(getRootTempDir(), makeRandomHexString(20));\n\t\t}\n\t\tif (!fs.existsSync(dir)) {\n\t\t\tfs.mkdirSync(dir);\n\t\t}\n\t\treturn dir;\n\t};\n})();\n\nexport function getTempFile(prefix: string): string {\n\treturn path.join(getInstanceTempDir(), `${prefix}-${makeRandomHexString(20)}.tmp`);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { isTypeScriptDocument } from '../utils/languageModeIds';\nimport { Command } from './commandManager';\n\nexport class LearnMoreAboutRefactoringsCommand implements Command {\n\tpublic static readonly id = '_typescript.learnMoreAboutRefactorings';\n\tpublic readonly id = LearnMoreAboutRefactoringsCommand.id;\n\n\tpublic execute() {\n\t\tconst docUrl = vscode.window.activeTextEditor && isTypeScriptDocument(vscode.window.activeTextEditor.document)\n\t\t\t? 'https://go.microsoft.com/fwlink/?linkid=2114477'\n\t\t\t: 'https://go.microsoft.com/fwlink/?linkid=2116761';\n\n\t\tvscode.env.openExternal(vscode.Uri.parse(docUrl));\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { EventName } from '../protocol.const';\nimport { CallbackMap } from '../tsServer/callbackMap';\nimport { RequestItem, RequestQueue, RequestQueueingType } from '../tsServer/requestQueue';\nimport { TypeScriptServerError } from '../tsServer/serverError';\nimport { ServerResponse, ServerType, TypeScriptRequests } from '../typescriptService';\nimport { TypeScriptServiceConfiguration } from '../utils/configuration';\nimport { Disposable } from '../utils/dispose';\nimport { TelemetryReporter } from '../utils/telemetry';\nimport Tracer from '../utils/tracer';\nimport { OngoingRequestCanceller } from './cancellation';\nimport { TypeScriptVersionManager } from './versionManager';\nimport { TypeScriptVersion } from './versionProvider';\n\nexport enum ExecutionTarget {\n\tSemantic,\n\tSyntax\n}\n\nexport interface ITypeScriptServer {\n\treadonly onEvent: vscode.Event<Proto.Event>;\n\treadonly onExit: vscode.Event<any>;\n\treadonly onError: vscode.Event<any>;\n\n\treadonly tsServerLogFile: string | undefined;\n\n\tkill(): void;\n\n\texecuteImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExecutionTarget }): undefined;\n\texecuteImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\texecuteImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\n\tdispose(): void;\n}\n\nexport interface TsServerDelegate {\n\tonFatalError(command: string, error: Error): void;\n}\n\nexport const enum TsServerProcessKind {\n\tMain = 'main',\n\tSyntax = 'syntax',\n\tSemantic = 'semantic',\n\tDiagnostics = 'diagnostics'\n}\n\nexport interface TsServerProcessFactory {\n\tfork(\n\t\ttsServerPath: string,\n\t\targs: readonly string[],\n\t\tkind: TsServerProcessKind,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tversionManager: TypeScriptVersionManager,\n\t): TsServerProcess;\n}\n\nexport interface TsServerProcess {\n\twrite(serverRequest: Proto.Request): void;\n\n\tonData(handler: (data: Proto.Response) => void): void;\n\tonExit(handler: (code: number | null) => void): void;\n\tonError(handler: (error: Error) => void): void;\n\n\tkill(): void;\n}\n\nexport class ProcessBasedTsServer extends Disposable implements ITypeScriptServer {\n\tprivate readonly _requestQueue = new RequestQueue();\n\tprivate readonly _callbacks = new CallbackMap<Proto.Response>();\n\tprivate readonly _pendingResponses = new Set<number>();\n\n\tconstructor(\n\t\tprivate readonly _serverId: string,\n\t\tprivate readonly _serverSource: ServerType,\n\t\tprivate readonly _process: TsServerProcess,\n\t\tprivate readonly _tsServerLogFile: string | undefined,\n\t\tprivate readonly _requestCanceller: OngoingRequestCanceller,\n\t\tprivate readonly _version: TypeScriptVersion,\n\t\tprivate readonly _telemetryReporter: TelemetryReporter,\n\t\tprivate readonly _tracer: Tracer,\n\t) {\n\t\tsuper();\n\n\t\tthis._process.onData(msg => {\n\t\t\tthis.dispatchMessage(msg);\n\t\t});\n\n\t\tthis._process.onExit(code => {\n\t\t\tthis._onExit.fire(code);\n\t\t\tthis._callbacks.destroy('server exited');\n\t\t});\n\n\t\tthis._process.onError(error => {\n\t\t\tthis._onError.fire(error);\n\t\t\tthis._callbacks.destroy('server errored');\n\t\t});\n\t}\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLogFile() { return this._tsServerLogFile; }\n\n\tprivate write(serverRequest: Proto.Request) {\n\t\tthis._process.write(serverRequest);\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\t\tthis._callbacks.destroy('server disposed');\n\t\tthis._pendingResponses.clear();\n\t}\n\n\tpublic kill() {\n\t\tthis._process.kill();\n\t}\n\n\tprivate dispatchMessage(message: Proto.Message) {\n\t\ttry {\n\t\t\tswitch (message.type) {\n\t\t\t\tcase 'response':\n\t\t\t\t\tif (this._serverSource) {\n\t\t\t\t\t\tthis.dispatchResponse({\n\t\t\t\t\t\t\t...(message as Proto.Response),\n\t\t\t\t\t\t\t_serverType: this._serverSource\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dispatchResponse(message as Proto.Response);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'event':\n\t\t\t\t\tconst event = message as Proto.Event;\n\t\t\t\t\tif (event.event === 'requestCompleted') {\n\t\t\t\t\t\tconst seq = (event as Proto.RequestCompletedEvent).body.request_seq;\n\t\t\t\t\t\tconst callback = this._callbacks.fetch(seq);\n\t\t\t\t\t\tif (callback) {\n\t\t\t\t\t\t\tthis._tracer.traceRequestCompleted(this._serverId, 'requestCompleted', seq, callback);\n\t\t\t\t\t\t\tcallback.onSuccess(undefined);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._tracer.traceEvent(this._serverId, event);\n\t\t\t\t\t\tthis._onEvent.fire(event);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unknown message type ${message.type} received`);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.sendNextRequests();\n\t\t}\n\t}\n\n\tprivate tryCancelRequest(seq: number, command: string): boolean {\n\t\ttry {\n\t\t\tif (this._requestQueue.tryDeletePendingRequest(seq)) {\n\t\t\t\tthis.logTrace(`Canceled request with sequence number ${seq}`);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (this._requestCanceller.tryCancelOngoingRequest(seq)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.logTrace(`Tried to cancel request with sequence number ${seq}. But request got already delivered.`);\n\t\t\treturn false;\n\t\t} finally {\n\t\t\tconst callback = this.fetchCallback(seq);\n\t\t\tif (callback) {\n\t\t\t\tcallback.onSuccess(new ServerResponse.Cancelled(`Cancelled request ${seq} - ${command}`));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate dispatchResponse(response: Proto.Response) {\n\t\tconst callback = this.fetchCallback(response.request_seq);\n\t\tif (!callback) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._tracer.traceResponse(this._serverId, response, callback);\n\t\tif (response.success) {\n\t\t\tcallback.onSuccess(response);\n\t\t} else if (response.message === 'No content available.') {\n\t\t\t// Special case where response itself is successful but there is not any data to return.\n\t\t\tcallback.onSuccess(ServerResponse.NoContent);\n\t\t} else {\n\t\t\tcallback.onError(TypeScriptServerError.create(this._serverId, this._version, response));\n\t\t}\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExecutionTarget }): undefined;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\tconst request = this._requestQueue.createRequest(command, args);\n\t\tconst requestInfo: RequestItem = {\n\t\t\trequest,\n\t\t\texpectsResponse: executeInfo.expectsResult,\n\t\t\tisAsync: executeInfo.isAsync,\n\t\t\tqueueingType: ProcessBasedTsServer.getQueueingType(command, executeInfo.lowPriority)\n\t\t};\n\t\tlet result: Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\t\tif (executeInfo.expectsResult) {\n\t\t\tresult = new Promise<ServerResponse.Response<Proto.Response>>((resolve, reject) => {\n\t\t\t\tthis._callbacks.add(request.seq, { onSuccess: resolve as () => ServerResponse.Response<Proto.Response> | undefined, onError: reject, queuingStartTime: Date.now(), isAsync: executeInfo.isAsync }, executeInfo.isAsync);\n\n\t\t\t\tif (executeInfo.token) {\n\t\t\t\t\texecuteInfo.token.onCancellationRequested(() => {\n\t\t\t\t\t\tthis.tryCancelRequest(request.seq, command);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}).catch((err: Error) => {\n\t\t\t\tif (err instanceof TypeScriptServerError) {\n\t\t\t\t\tif (!executeInfo.token || !executeInfo.token.isCancellationRequested) {\n\t\t\t\t\t\t/* __GDPR__\n\t\t\t\t\t\t\t\"languageServiceErrorResponse\" : {\n\t\t\t\t\t\t\t\t\"${include}\": [\n\t\t\t\t\t\t\t\t\t\"${TypeScriptCommonProperties}\",\n\t\t\t\t\t\t\t\t\t\"${TypeScriptRequestErrorProperties}\"\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tthis._telemetryReporter.logTelemetry('languageServiceErrorResponse', err.telemetry);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t});\n\t\t}\n\n\t\tthis._requestQueue.enqueue(requestInfo);\n\t\tthis.sendNextRequests();\n\n\t\treturn result;\n\t}\n\n\tprivate sendNextRequests(): void {\n\t\twhile (this._pendingResponses.size === 0 && this._requestQueue.length > 0) {\n\t\t\tconst item = this._requestQueue.dequeue();\n\t\t\tif (item) {\n\t\t\t\tthis.sendRequest(item);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate sendRequest(requestItem: RequestItem): void {\n\t\tconst serverRequest = requestItem.request;\n\t\tthis._tracer.traceRequest(this._serverId, serverRequest, requestItem.expectsResponse, this._requestQueue.length);\n\n\t\tif (requestItem.expectsResponse && !requestItem.isAsync) {\n\t\t\tthis._pendingResponses.add(requestItem.request.seq);\n\t\t}\n\n\t\ttry {\n\t\t\tthis.write(serverRequest);\n\t\t} catch (err) {\n\t\t\tconst callback = this.fetchCallback(serverRequest.seq);\n\t\t\tif (callback) {\n\t\t\t\tcallback.onError(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate fetchCallback(seq: number) {\n\t\tconst callback = this._callbacks.fetch(seq);\n\t\tif (!callback) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._pendingResponses.delete(seq);\n\t\treturn callback;\n\t}\n\n\tprivate logTrace(message: string) {\n\t\tthis._tracer.logTrace(this._serverId, message);\n\t}\n\n\tprivate static readonly fenceCommands = new Set(['change', 'close', 'open', 'updateOpen']);\n\n\tprivate static getQueueingType(\n\t\tcommand: string,\n\t\tlowPriority?: boolean\n\t): RequestQueueingType {\n\t\tif (ProcessBasedTsServer.fenceCommands.has(command)) {\n\t\t\treturn RequestQueueingType.Fence;\n\t\t}\n\t\treturn lowPriority ? RequestQueueingType.LowPriority : RequestQueueingType.Normal;\n\t}\n}\n\n\ninterface ExecuteInfo {\n\treadonly isAsync: boolean;\n\treadonly token?: vscode.CancellationToken;\n\treadonly expectsResult: boolean;\n\treadonly lowPriority?: boolean;\n\treadonly executionTarget?: ExecutionTarget;\n}\n\nclass RequestRouter {\n\n\tprivate static readonly sharedCommands = new Set<keyof TypeScriptRequests>([\n\t\t'change',\n\t\t'close',\n\t\t'open',\n\t\t'updateOpen',\n\t\t'configure',\n\t]);\n\n\tconstructor(\n\t\tprivate readonly servers: ReadonlyArray<{\n\t\t\treadonly server: ITypeScriptServer;\n\t\t\tcanRun?(command: keyof TypeScriptRequests, executeInfo: ExecuteInfo): void;\n\t\t}>,\n\t\tprivate readonly delegate: TsServerDelegate,\n\t) { }\n\n\tpublic execute(command: keyof TypeScriptRequests, args: any, executeInfo: ExecuteInfo): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\tif (RequestRouter.sharedCommands.has(command) && typeof executeInfo.executionTarget === 'undefined') {\n\t\t\t// Dispatch shared commands to all servers but only return from first one\n\n\t\t\tconst requestStates: RequestState.State[] = this.servers.map(() => RequestState.Unresolved);\n\n\t\t\t// Also make sure we never cancel requests to just one server\n\t\t\tlet token: vscode.CancellationToken | undefined = undefined;\n\t\t\tif (executeInfo.token) {\n\t\t\t\tconst source = new vscode.CancellationTokenSource();\n\t\t\t\texecuteInfo.token.onCancellationRequested(() => {\n\t\t\t\t\tif (requestStates.some(state => state === RequestState.Resolved)) {\n\t\t\t\t\t\t// Don't cancel.\n\t\t\t\t\t\t// One of the servers completed this request so we don't want to leave the other\n\t\t\t\t\t\t// in a different state.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsource.cancel();\n\t\t\t\t});\n\t\t\t\ttoken = source.token;\n\t\t\t}\n\n\t\t\tlet firstRequest: Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\n\t\t\tfor (let serverIndex = 0; serverIndex < this.servers.length; ++serverIndex) {\n\t\t\t\tconst server = this.servers[serverIndex].server;\n\n\t\t\t\tconst request = server.executeImpl(command, args, { ...executeInfo, token }) as Promise<ServerResponse.Response<Proto.Response>> | undefined;\n\t\t\t\tif (serverIndex === 0) {\n\t\t\t\t\tfirstRequest = request;\n\t\t\t\t}\n\t\t\t\tif (request) {\n\t\t\t\t\trequest\n\t\t\t\t\t\t.then(result => {\n\t\t\t\t\t\t\trequestStates[serverIndex] = RequestState.Resolved;\n\t\t\t\t\t\t\tconst erroredRequest = requestStates.find(state => state.type === RequestState.Type.Errored) as RequestState.Errored | undefined;\n\t\t\t\t\t\t\tif (erroredRequest) {\n\t\t\t\t\t\t\t\t// We've gone out of sync\n\t\t\t\t\t\t\t\tthis.delegate.onFatalError(command, erroredRequest.err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, err => {\n\t\t\t\t\t\t\trequestStates[serverIndex] = new RequestState.Errored(err);\n\t\t\t\t\t\t\tif (requestStates.some(state => state === RequestState.Resolved)) {\n\t\t\t\t\t\t\t\t// We've gone out of sync\n\t\t\t\t\t\t\t\tthis.delegate.onFatalError(command, err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn firstRequest;\n\t\t}\n\n\t\tfor (const { canRun, server } of this.servers) {\n\t\t\tif (!canRun || canRun(command, executeInfo)) {\n\t\t\t\treturn server.executeImpl(command, args, executeInfo);\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error(`Could not find server for command: '${command}'`);\n\t}\n}\n\nexport class GetErrRoutingTsServer extends Disposable implements ITypeScriptServer {\n\n\tprivate static readonly diagnosticEvents = new Set<string>([\n\t\tEventName.configFileDiag,\n\t\tEventName.syntaxDiag,\n\t\tEventName.semanticDiag,\n\t\tEventName.suggestionDiag\n\t]);\n\n\tprivate readonly getErrServer: ITypeScriptServer;\n\tprivate readonly mainServer: ITypeScriptServer;\n\tprivate readonly router: RequestRouter;\n\n\tpublic constructor(\n\t\tservers: { getErr: ITypeScriptServer, primary: ITypeScriptServer },\n\t\tdelegate: TsServerDelegate,\n\t) {\n\t\tsuper();\n\n\t\tthis.getErrServer = servers.getErr;\n\t\tthis.mainServer = servers.primary;\n\n\t\tthis.router = new RequestRouter(\n\t\t\t[\n\t\t\t\t{ server: this.getErrServer, canRun: (command) => ['geterr', 'geterrForProject'].includes(command) },\n\t\t\t\t{ server: this.mainServer, canRun: undefined /* gets all other commands */ }\n\t\t\t],\n\t\t\tdelegate);\n\n\t\tthis._register(this.getErrServer.onEvent(e => {\n\t\t\tif (GetErrRoutingTsServer.diagnosticEvents.has(e.event)) {\n\t\t\t\tthis._onEvent.fire(e);\n\t\t\t}\n\t\t\t// Ignore all other events\n\t\t}));\n\t\tthis._register(this.mainServer.onEvent(e => {\n\t\t\tif (!GetErrRoutingTsServer.diagnosticEvents.has(e.event)) {\n\t\t\t\tthis._onEvent.fire(e);\n\t\t\t}\n\t\t\t// Ignore all other events\n\t\t}));\n\n\t\tthis._register(this.getErrServer.onError(e => this._onError.fire(e)));\n\t\tthis._register(this.mainServer.onError(e => this._onError.fire(e)));\n\n\t\tthis._register(this.mainServer.onExit(e => {\n\t\t\tthis._onExit.fire(e);\n\t\t\tthis.getErrServer.kill();\n\t\t}));\n\t}\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLogFile() { return this.mainServer.tsServerLogFile; }\n\n\tpublic kill(): void {\n\t\tthis.getErrServer.kill();\n\t\tthis.mainServer.kill();\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExecutionTarget }): undefined;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\treturn this.router.execute(command, args, executeInfo);\n\t}\n}\n\n\nexport class SyntaxRoutingTsServer extends Disposable implements ITypeScriptServer {\n\n\t/**\n\t * Commands that should always be run on the syntax server.\n\t */\n\tprivate static readonly syntaxAlwaysCommands = new Set<keyof TypeScriptRequests>([\n\t\t'navtree',\n\t\t'getOutliningSpans',\n\t\t'jsxClosingTag',\n\t\t'selectionRange',\n\t\t'format',\n\t\t'formatonkey',\n\t\t'docCommentTemplate',\n\t]);\n\n\t/**\n\t * Commands that should always be run on the semantic server.\n\t */\n\tprivate static readonly semanticCommands = new Set<keyof TypeScriptRequests>([\n\t\t'geterr',\n\t\t'geterrForProject',\n\t\t'projectInfo',\n\t\t'configurePlugin',\n\t]);\n\n\t/**\n\t * Commands that can be run on the syntax server but would benefit from being upgraded to the semantic server.\n\t */\n\tprivate static readonly syntaxAllowedCommands = new Set<keyof TypeScriptRequests>([\n\t\t'completions',\n\t\t'completionEntryDetails',\n\t\t'completionInfo',\n\t\t'definition',\n\t\t'definitionAndBoundSpan',\n\t\t'documentHighlights',\n\t\t'implementation',\n\t\t'navto',\n\t\t'quickinfo',\n\t\t'references',\n\t\t'rename',\n\t\t'signatureHelp',\n\t]);\n\n\tprivate readonly syntaxServer: ITypeScriptServer;\n\tprivate readonly semanticServer: ITypeScriptServer;\n\tprivate readonly router: RequestRouter;\n\n\tprivate _projectLoading = true;\n\n\tpublic constructor(\n\t\tservers: { syntax: ITypeScriptServer, semantic: ITypeScriptServer },\n\t\tdelegate: TsServerDelegate,\n\t\tenableDynamicRouting: boolean,\n\t) {\n\t\tsuper();\n\n\t\tthis.syntaxServer = servers.syntax;\n\t\tthis.semanticServer = servers.semantic;\n\n\t\tthis.router = new RequestRouter(\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tserver: this.syntaxServer,\n\t\t\t\t\tcanRun: (command, execInfo) => {\n\t\t\t\t\t\tswitch (execInfo.executionTarget) {\n\t\t\t\t\t\t\tcase ExecutionTarget.Semantic: return false;\n\t\t\t\t\t\t\tcase ExecutionTarget.Syntax: return true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (SyntaxRoutingTsServer.syntaxAlwaysCommands.has(command)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (SyntaxRoutingTsServer.semanticCommands.has(command)) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (enableDynamicRouting && this.projectLoading && SyntaxRoutingTsServer.syntaxAllowedCommands.has(command)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tserver: this.semanticServer,\n\t\t\t\t\tcanRun: undefined /* gets all other commands */\n\t\t\t\t}\n\t\t\t],\n\t\t\tdelegate);\n\n\t\tthis._register(this.syntaxServer.onEvent(e => {\n\t\t\treturn this._onEvent.fire(e);\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onEvent(e => {\n\t\t\tswitch (e.event) {\n\t\t\t\tcase EventName.projectLoadingStart:\n\t\t\t\t\tthis._projectLoading = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase EventName.projectLoadingFinish:\n\t\t\t\tcase EventName.semanticDiag:\n\t\t\t\tcase EventName.syntaxDiag:\n\t\t\t\tcase EventName.suggestionDiag:\n\t\t\t\tcase EventName.configFileDiag:\n\t\t\t\t\tthis._projectLoading = false;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn this._onEvent.fire(e);\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onExit(e => {\n\t\t\tthis._onExit.fire(e);\n\t\t\tthis.syntaxServer.kill();\n\t\t}));\n\n\t\tthis._register(this.semanticServer.onError(e => this._onError.fire(e)));\n\t}\n\n\tprivate get projectLoading() { return this._projectLoading; }\n\n\tprivate readonly _onEvent = this._register(new vscode.EventEmitter<Proto.Event>());\n\tpublic readonly onEvent = this._onEvent.event;\n\n\tprivate readonly _onExit = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onExit = this._onExit.event;\n\n\tprivate readonly _onError = this._register(new vscode.EventEmitter<any>());\n\tpublic readonly onError = this._onError.event;\n\n\tpublic get tsServerLogFile() { return this.semanticServer.tsServerLogFile; }\n\n\tpublic kill(): void {\n\t\tthis.syntaxServer.kill();\n\t\tthis.semanticServer.kill();\n\t}\n\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: false, lowPriority?: boolean, executionTarget?: ExecutionTarget }): undefined;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>>;\n\tpublic executeImpl(command: keyof TypeScriptRequests, args: any, executeInfo: { isAsync: boolean, token?: vscode.CancellationToken, expectsResult: boolean, lowPriority?: boolean, executionTarget?: ExecutionTarget }): Promise<ServerResponse.Response<Proto.Response>> | undefined {\n\t\treturn this.router.execute(command, args, executeInfo);\n\t}\n}\n\nnamespace RequestState {\n\texport const enum Type { Unresolved, Resolved, Errored }\n\n\texport const Unresolved = { type: Type.Unresolved } as const;\n\n\texport const Resolved = { type: Type.Resolved } as const;\n\n\texport class Errored {\n\t\treadonly type = Type.Errored;\n\n\t\tconstructor(\n\t\t\tpublic readonly err: Error\n\t\t) { }\n\t}\n\n\texport type State = typeof Unresolved | typeof Resolved | Errored;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from '../protocol';\nimport { TypeScriptVersion } from './versionProvider';\n\n\nexport class TypeScriptServerError extends Error {\n\tpublic static create(\n\t\tserverId: string,\n\t\tversion: TypeScriptVersion,\n\t\tresponse: Proto.Response\n\t): TypeScriptServerError {\n\t\tconst parsedResult = TypeScriptServerError.parseErrorText(response);\n\t\treturn new TypeScriptServerError(serverId, version, response, parsedResult?.message, parsedResult?.stack, parsedResult?.sanitizedStack);\n\t}\n\n\tprivate constructor(\n\t\tpublic readonly serverId: string,\n\t\tpublic readonly version: TypeScriptVersion,\n\t\tprivate readonly response: Proto.Response,\n\t\tpublic readonly serverMessage: string | undefined,\n\t\tpublic readonly serverStack: string | undefined,\n\t\tprivate readonly sanitizedStack: string | undefined\n\t) {\n\t\tsuper(`<${serverId}> TypeScript Server Error (${version.displayName})\\n${serverMessage}\\n${serverStack}`);\n\t}\n\n\tpublic get serverErrorText() { return this.response.message; }\n\n\tpublic get serverCommand() { return this.response.command; }\n\n\tpublic get telemetry() {\n\t\t// The \"sanitizedstack\" has been purged of error messages, paths, and file names (other than tsserver)\n\t\t// and, thus, can be classified as SystemMetaData, rather than CallstackOrException.\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"TypeScriptRequestErrorProperties\" : {\n\t\t\t\t\"command\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"serverid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\"sanitizedstack\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" },\n\t\t\t\t\"badclient\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" }\n\t\t\t}\n\t\t*/\n\t\treturn {\n\t\t\tcommand: this.serverCommand,\n\t\t\tserverid: this.serverId,\n\t\t\tsanitizedstack: this.sanitizedStack || '',\n\t\t\tbadclient: /\\bBADCLIENT\\b/.test(this.stack || ''),\n\t\t} as const;\n\t}\n\n\t/**\n\t * Given a `errorText` from a tsserver request indicating failure in handling a request,\n\t * prepares a payload for telemetry-logging.\n\t */\n\tprivate static parseErrorText(response: Proto.Response) {\n\t\tconst errorText = response.message;\n\t\tif (errorText) {\n\t\t\tconst errorPrefix = 'Error processing request. ';\n\t\t\tif (errorText.startsWith(errorPrefix)) {\n\t\t\t\tconst prefixFreeErrorText = errorText.substr(errorPrefix.length);\n\t\t\t\tconst newlineIndex = prefixFreeErrorText.indexOf('\\n');\n\t\t\t\tif (newlineIndex >= 0) {\n\t\t\t\t\t// Newline expected between message and stack.\n\t\t\t\t\tconst stack = prefixFreeErrorText.substring(newlineIndex + 1);\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmessage: prefixFreeErrorText.substring(0, newlineIndex),\n\t\t\t\t\t\tstack,\n\t\t\t\t\t\tsanitizedStack: TypeScriptServerError.sanitizeStack(stack)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Drop everything but \".js\" and line/column numbers (though retain \"tsserver\" if that's the filename).\n\t */\n\tprivate static sanitizeStack(message: string | undefined) {\n\t\tif (!message) {\n\t\t\treturn '';\n\t\t}\n\t\tconst regex = /(\\btsserver)?(\\.(?:ts|tsx|js|jsx)(?::\\d+(?::\\d+)?)?)\\)?$/igm;\n\t\tlet serverStack = '';\n\t\twhile (true) {\n\t\t\tconst match = regex.exec(message);\n\t\t\tif (!match) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t// [1] is 'tsserver' or undefined\n\t\t\t// [2] is '.js:{line_number}:{column_number}'\n\t\t\tserverStack += `${match[1] || 'suppressed'}${match[2]}\\n`;\n\t\t}\n\t\treturn serverStack;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport * as typeConverters from './typeConverters';\n\nexport function getEditForCodeAction(\n\tclient: ITypeScriptServiceClient,\n\taction: Proto.CodeAction\n): vscode.WorkspaceEdit | undefined {\n\treturn action.changes && action.changes.length\n\t\t? typeConverters.WorkspaceEdit.fromFileCodeEdits(client, action.changes)\n\t\t: undefined;\n}\n\nexport async function applyCodeAction(\n\tclient: ITypeScriptServiceClient,\n\taction: Proto.CodeAction,\n\ttoken: vscode.CancellationToken\n): Promise<boolean> {\n\tconst workspaceEdit = getEditForCodeAction(client, action);\n\tif (workspaceEdit) {\n\t\tif (!(await vscode.workspace.applyEdit(workspaceEdit))) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn applyCodeActionCommands(client, action.commands, token);\n}\n\nexport async function applyCodeActionCommands(\n\tclient: ITypeScriptServiceClient,\n\tcommands: ReadonlyArray<{}> | undefined,\n\ttoken: vscode.CancellationToken,\n): Promise<boolean> {\n\tif (commands && commands.length) {\n\t\tfor (const command of commands) {\n\t\t\tawait client.execute('applyCodeActionCommand', { command }, token);\n\t\t}\n\t}\n\treturn true;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const variableDeclaredButNeverUsed = new Set([6196, 6133]);\nexport const propertyDeclaretedButNeverUsed = new Set([6138]);\nexport const allImportsAreUnused = new Set([6192]);\nexport const unreachableCode = new Set([7027]);\nexport const unusedLabel = new Set([7028]);\nexport const fallThroughCaseInSwitch = new Set([7029]);\nexport const notAllCodePathsReturnAValue = new Set([7030]);\nexport const incorrectlyImplementsInterface = new Set([2420]);\nexport const cannotFindName = new Set([2552, 2304]);\nexport const extendsShouldBeImplements = new Set([2689]);\nexport const asyncOnlyAllowedInAsyncFunctions = new Set([1308]);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const annotateWithTypeFromJSDoc = 'annotateWithTypeFromJSDoc';\nexport const constructorForDerivedNeedSuperCall = 'constructorForDerivedNeedSuperCall';\nexport const extendsInterfaceBecomesImplements = 'extendsInterfaceBecomesImplements';\nexport const awaitInSyncFunction = 'fixAwaitInSyncFunction';\nexport const classIncorrectlyImplementsInterface = 'fixClassIncorrectlyImplementsInterface';\nexport const classDoesntImplementInheritedAbstractMember = 'fixClassDoesntImplementInheritedAbstractMember';\nexport const unreachableCode = 'fixUnreachableCode';\nexport const unusedIdentifier = 'unusedIdentifier';\nexport const forgottenThisPropertyAccess = 'forgottenThisPropertyAccess';\nexport const spelling = 'spelling';\nexport const fixImport = 'import';\nexport const addMissingAwait = 'addMissingAwait';\nexport const addMissingOverride = 'fixOverrideModifier';\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface ITask<T> {\n\t(): T;\n}\n\nexport class Delayer<T> {\n\n\tpublic defaultDelay: number;\n\tprivate timeout: any; // Timer\n\tprivate completionPromise: Promise<T | null> | null;\n\tprivate onSuccess: ((value: T | PromiseLike<T> | undefined) => void) | null;\n\tprivate task: ITask<T> | null;\n\n\tconstructor(defaultDelay: number) {\n\t\tthis.defaultDelay = defaultDelay;\n\t\tthis.timeout = null;\n\t\tthis.completionPromise = null;\n\t\tthis.onSuccess = null;\n\t\tthis.task = null;\n\t}\n\n\tpublic trigger(task: ITask<T>, delay: number = this.defaultDelay): Promise<T | null> {\n\t\tthis.task = task;\n\t\tif (delay >= 0) {\n\t\t\tthis.cancelTimeout();\n\t\t}\n\n\t\tif (!this.completionPromise) {\n\t\t\tthis.completionPromise = new Promise<T | undefined>((resolve) => {\n\t\t\t\tthis.onSuccess = resolve;\n\t\t\t}).then(() => {\n\t\t\t\tthis.completionPromise = null;\n\t\t\t\tthis.onSuccess = null;\n\t\t\t\tconst result = this.task && this.task();\n\t\t\t\tthis.task = null;\n\t\t\t\treturn result;\n\t\t\t});\n\t\t}\n\n\t\tif (delay >= 0 || this.timeout === null) {\n\t\t\tthis.timeout = setTimeout(() => {\n\t\t\t\tthis.timeout = null;\n\t\t\t\tif (this.onSuccess) {\n\t\t\t\t\tthis.onSuccess(undefined);\n\t\t\t\t}\n\t\t\t}, delay >= 0 ? delay : this.defaultDelay);\n\t\t}\n\n\t\treturn this.completionPromise;\n\t}\n\n\tprivate cancelTimeout(): void {\n\t\tif (this.timeout !== null) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as os from 'os';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport * as objects from '../utils/objects';\n\nexport enum TsServerLogLevel {\n\tOff,\n\tNormal,\n\tTerse,\n\tVerbose,\n}\n\nexport namespace TsServerLogLevel {\n\texport function fromString(value: string): TsServerLogLevel {\n\t\tswitch (value && value.toLowerCase()) {\n\t\t\tcase 'normal':\n\t\t\t\treturn TsServerLogLevel.Normal;\n\t\t\tcase 'terse':\n\t\t\t\treturn TsServerLogLevel.Terse;\n\t\t\tcase 'verbose':\n\t\t\t\treturn TsServerLogLevel.Verbose;\n\t\t\tcase 'off':\n\t\t\tdefault:\n\t\t\t\treturn TsServerLogLevel.Off;\n\t\t}\n\t}\n\n\texport function toString(value: TsServerLogLevel): string {\n\t\tswitch (value) {\n\t\t\tcase TsServerLogLevel.Normal:\n\t\t\t\treturn 'normal';\n\t\t\tcase TsServerLogLevel.Terse:\n\t\t\t\treturn 'terse';\n\t\t\tcase TsServerLogLevel.Verbose:\n\t\t\t\treturn 'verbose';\n\t\t\tcase TsServerLogLevel.Off:\n\t\t\tdefault:\n\t\t\t\treturn 'off';\n\t\t}\n\t}\n}\n\nexport const enum SeparateSyntaxServerConfiguration {\n\tDisabled,\n\tEnabled,\n}\n\nexport class ImplicitProjectConfiguration {\n\n\tpublic readonly checkJs: boolean;\n\tpublic readonly experimentalDecorators: boolean;\n\tpublic readonly strictNullChecks: boolean;\n\tpublic readonly strictFunctionTypes: boolean;\n\n\tconstructor(configuration: vscode.WorkspaceConfiguration) {\n\t\tthis.checkJs = ImplicitProjectConfiguration.readCheckJs(configuration);\n\t\tthis.experimentalDecorators = ImplicitProjectConfiguration.readExperimentalDecorators(configuration);\n\t\tthis.strictNullChecks = ImplicitProjectConfiguration.readImplicitStrictNullChecks(configuration);\n\t\tthis.strictFunctionTypes = ImplicitProjectConfiguration.readImplicitStrictFunctionTypes(configuration);\n\t}\n\n\tpublic isEqualTo(other: ImplicitProjectConfiguration): boolean {\n\t\treturn objects.equals(this, other);\n\t}\n\n\tprivate static readCheckJs(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.checkJs')\n\t\t\t?? configuration.get<boolean>('javascript.implicitProjectConfig.checkJs', false);\n\t}\n\n\tprivate static readExperimentalDecorators(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.experimentalDecorators')\n\t\t\t?? configuration.get<boolean>('javascript.implicitProjectConfig.experimentalDecorators', false);\n\t}\n\n\tprivate static readImplicitStrictNullChecks(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.strictNullChecks', false);\n\t}\n\n\tprivate static readImplicitStrictFunctionTypes(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('js/ts.implicitProjectConfig.strictFunctionTypes', true);\n\t}\n}\n\nexport class TypeScriptServiceConfiguration {\n\tpublic readonly locale: string | null;\n\tpublic readonly globalTsdk: string | null;\n\tpublic readonly localTsdk: string | null;\n\tpublic readonly npmLocation: string | null;\n\tpublic readonly tsServerLogLevel: TsServerLogLevel = TsServerLogLevel.Off;\n\tpublic readonly tsServerPluginPaths: readonly string[];\n\tpublic readonly implictProjectConfiguration: ImplicitProjectConfiguration;\n\tpublic readonly disableAutomaticTypeAcquisition: boolean;\n\tpublic readonly separateSyntaxServer: SeparateSyntaxServerConfiguration;\n\tpublic readonly enableProjectDiagnostics: boolean;\n\tpublic readonly maxTsServerMemory: number;\n\tpublic readonly enablePromptUseWorkspaceTsdk: boolean;\n\tpublic readonly watchOptions: protocol.WatchOptions | undefined;\n\tpublic readonly includePackageJsonAutoImports: 'auto' | 'on' | 'off' | undefined;\n\tpublic readonly enableTsServerTracing: boolean;\n\n\tpublic static loadFromWorkspace(): TypeScriptServiceConfiguration {\n\t\treturn new TypeScriptServiceConfiguration();\n\t}\n\n\tprivate constructor() {\n\t\tconst configuration = vscode.workspace.getConfiguration();\n\n\t\tthis.locale = TypeScriptServiceConfiguration.extractLocale(configuration);\n\t\tthis.globalTsdk = TypeScriptServiceConfiguration.extractGlobalTsdk(configuration);\n\t\tthis.localTsdk = TypeScriptServiceConfiguration.extractLocalTsdk(configuration);\n\t\tthis.npmLocation = TypeScriptServiceConfiguration.readNpmLocation(configuration);\n\t\tthis.tsServerLogLevel = TypeScriptServiceConfiguration.readTsServerLogLevel(configuration);\n\t\tthis.tsServerPluginPaths = TypeScriptServiceConfiguration.readTsServerPluginPaths(configuration);\n\t\tthis.implictProjectConfiguration = new ImplicitProjectConfiguration(configuration);\n\t\tthis.disableAutomaticTypeAcquisition = TypeScriptServiceConfiguration.readDisableAutomaticTypeAcquisition(configuration);\n\t\tthis.separateSyntaxServer = TypeScriptServiceConfiguration.readUseSeparateSyntaxServer(configuration);\n\t\tthis.enableProjectDiagnostics = TypeScriptServiceConfiguration.readEnableProjectDiagnostics(configuration);\n\t\tthis.maxTsServerMemory = TypeScriptServiceConfiguration.readMaxTsServerMemory(configuration);\n\t\tthis.enablePromptUseWorkspaceTsdk = TypeScriptServiceConfiguration.readEnablePromptUseWorkspaceTsdk(configuration);\n\t\tthis.watchOptions = TypeScriptServiceConfiguration.readWatchOptions(configuration);\n\t\tthis.includePackageJsonAutoImports = TypeScriptServiceConfiguration.readIncludePackageJsonAutoImports(configuration);\n\t\tthis.enableTsServerTracing = TypeScriptServiceConfiguration.readEnableTsServerTracing(configuration);\n\t}\n\n\tpublic isEqualTo(other: TypeScriptServiceConfiguration): boolean {\n\t\treturn objects.equals(this, other);\n\t}\n\n\tprivate static fixPathPrefixes(inspectValue: string): string {\n\t\tconst pathPrefixes = ['~' + path.sep];\n\t\tfor (const pathPrefix of pathPrefixes) {\n\t\t\tif (inspectValue.startsWith(pathPrefix)) {\n\t\t\t\treturn path.join(os.homedir(), inspectValue.slice(pathPrefix.length));\n\t\t\t}\n\t\t}\n\t\treturn inspectValue;\n\t}\n\n\tprivate static extractGlobalTsdk(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\tconst inspect = configuration.inspect('typescript.tsdk');\n\t\tif (inspect && typeof inspect.globalValue === 'string') {\n\t\t\treturn this.fixPathPrefixes(inspect.globalValue);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate static extractLocalTsdk(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\tconst inspect = configuration.inspect('typescript.tsdk');\n\t\tif (inspect && typeof inspect.workspaceValue === 'string') {\n\t\t\treturn this.fixPathPrefixes(inspect.workspaceValue);\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate static readTsServerLogLevel(configuration: vscode.WorkspaceConfiguration): TsServerLogLevel {\n\t\tconst setting = configuration.get<string>('typescript.tsserver.log', 'off');\n\t\treturn TsServerLogLevel.fromString(setting);\n\t}\n\n\tprivate static readTsServerPluginPaths(configuration: vscode.WorkspaceConfiguration): string[] {\n\t\treturn configuration.get<string[]>('typescript.tsserver.pluginPaths', []);\n\t}\n\n\tprivate static readNpmLocation(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn configuration.get<string | null>('typescript.npm', null);\n\t}\n\n\tprivate static readDisableAutomaticTypeAcquisition(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.disableAutomaticTypeAcquisition', false);\n\t}\n\n\tprivate static extractLocale(configuration: vscode.WorkspaceConfiguration): string | null {\n\t\treturn configuration.get<string | null>('typescript.locale', null);\n\t}\n\n\tprivate static readUseSeparateSyntaxServer(configuration: vscode.WorkspaceConfiguration): SeparateSyntaxServerConfiguration {\n\t\tconst value = configuration.get('typescript.tsserver.useSeparateSyntaxServer', true);\n\t\tif (value === true) {\n\t\t\treturn SeparateSyntaxServerConfiguration.Enabled;\n\t\t}\n\t\treturn SeparateSyntaxServerConfiguration.Disabled;\n\t}\n\n\tprivate static readEnableProjectDiagnostics(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.experimental.enableProjectDiagnostics', false);\n\t}\n\n\tprivate static readWatchOptions(configuration: vscode.WorkspaceConfiguration): protocol.WatchOptions | undefined {\n\t\treturn configuration.get<protocol.WatchOptions>('typescript.tsserver.watchOptions');\n\t}\n\n\tprivate static readIncludePackageJsonAutoImports(configuration: vscode.WorkspaceConfiguration): 'auto' | 'on' | 'off' | undefined {\n\t\treturn configuration.get<'auto' | 'on' | 'off'>('typescript.preferences.includePackageJsonAutoImports');\n\t}\n\n\tprivate static readMaxTsServerMemory(configuration: vscode.WorkspaceConfiguration): number {\n\t\tconst defaultMaxMemory = 3072;\n\t\tconst minimumMaxMemory = 128;\n\t\tconst memoryInMB = configuration.get<number>('typescript.tsserver.maxTsServerMemory', defaultMaxMemory);\n\t\tif (!Number.isSafeInteger(memoryInMB)) {\n\t\t\treturn defaultMaxMemory;\n\t\t}\n\t\treturn Math.max(memoryInMB, minimumMaxMemory);\n\t}\n\n\tprivate static readEnablePromptUseWorkspaceTsdk(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.enablePromptUseWorkspaceTsdk', false);\n\t}\n\n\tprivate static readEnableTsServerTracing(configuration: vscode.WorkspaceConfiguration): boolean {\n\t\treturn configuration.get<boolean>('typescript.tsserver.enableTracing', false);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport function isWeb(): boolean {\n\t// @ts-expect-error\n\treturn typeof navigator !== 'undefined' && vscode.env.uiKind === vscode.UIKind.Web;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as path from 'path';\nimport * as vscode from 'vscode';\n\nexport class RelativeWorkspacePathResolver {\n\tpublic static asAbsoluteWorkspacePath(relativePath: string): string | undefined {\n\t\tfor (const root of vscode.workspace.workspaceFolders || []) {\n\t\t\tconst rootPrefixes = [`./${root.name}/`, `${root.name}/`, `.\\\\${root.name}\\\\`, `${root.name}\\\\`];\n\t\t\tfor (const rootPrefix of rootPrefixes) {\n\t\t\t\tif (relativePath.startsWith(rootPrefix)) {\n\t\t\t\t\treturn path.join(root.uri.fsPath, relativePath.replace(rootPrefix, ''));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","module.exports = require(\"module\");","module.exports = require(\"timers\");","// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._stackChain) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._stackChain.version === require('./package.json').version) {\n    module.exports = global._stackChain;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of stack-chain found');\n  }\n}\n// Yay, no other stack-chain copy exists, yet :/\nelse {\n  module.exports = global._stackChain = require('./stack-chain');\n}\n","module.exports = require(\"zlib\");","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AvailabilityData = require(\"./AvailabilityData\");\nexports.Base = require(\"./Base\");\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\nexports.Data = require(\"./Data\");\nexports.DataPoint = require(\"./DataPoint\");\nexports.DataPointType = require(\"./DataPointType\");\nexports.Domain = require(\"./Domain\");\nexports.Envelope = require(\"./Envelope\");\nexports.EventData = require(\"./EventData\");\nexports.ExceptionData = require(\"./ExceptionData\");\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\nexports.MessageData = require(\"./MessageData\");\nexports.MetricData = require(\"./MetricData\");\nexports.PageViewData = require(\"./PageViewData\");\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\nexports.RequestData = require(\"./RequestData\");\nexports.SeverityLevel = require(\"./SeverityLevel\");\nexports.StackFrame = require(\"./StackFrame\");\n//# sourceMappingURL=index.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Data struct to contain only C section with custom fields.\n */\nvar Base = (function () {\n    function Base() {\n    }\n    return Base;\n}());\nmodule.exports = Base;\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Type of the metric data measurement.\n */\nvar DataPointType;\n(function (DataPointType) {\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\n})(DataPointType || (DataPointType = {}));\nmodule.exports = DataPointType;\n//# sourceMappingURL=DataPointType.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\n */\nvar EventData = (function (_super) {\n    __extends(EventData, _super);\n    function EventData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return EventData;\n}(Domain));\nmodule.exports = EventData;\n//# sourceMappingURL=EventData.js.map","\"use strict\";\n/**\n * Base class for helpers that read data from HTTP requst/response objects and convert them\n * into the telemetry contract objects.\n */\nvar RequestParser = (function () {\n    function RequestParser() {\n    }\n    /**\n     * Gets a url parsed out from request options\n     */\n    RequestParser.prototype.getUrl = function () {\n        return this.url;\n    };\n    RequestParser.prototype.RequestParser = function () {\n        this.startTime = +new Date();\n    };\n    RequestParser.prototype._setStatus = function (status, error) {\n        var endTime = +new Date();\n        this.duration = endTime - this.startTime;\n        this.statusCode = status;\n        var properties = this.properties || {};\n        if (error) {\n            if (typeof error === \"string\") {\n                properties[\"error\"] = error;\n            }\n            else if (error instanceof Error) {\n                properties[\"error\"] = error.message;\n            }\n            else if (typeof error === \"object\") {\n                for (var key in error) {\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\n                }\n            }\n        }\n        this.properties = properties;\n    };\n    RequestParser.prototype._isSuccess = function () {\n        return (0 < this.statusCode) && (this.statusCode < 400);\n    };\n    return RequestParser;\n}());\nmodule.exports = RequestParser;\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\nvar Util = require(\"./Util\");\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\n/**\n * Helper class to manage parsing and validation of traceparent header. Also handles hierarchical\n * back-compatibility headers generated from traceparent. W3C traceparent spec is documented at\n * https://www.w3.org/TR/trace-context/#traceparent-field\n */\nvar Traceparent = (function () {\n    function Traceparent(traceparent, parentId) {\n        this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n        this.version = Traceparent.DEFAULT_VERSION;\n        if (traceparent && typeof traceparent === \"string\") {\n            // If incoming request contains traceparent: parse it, set operation, parent and telemetry id accordingly. traceparent should be injected into outgoing requests. request-id should be injected in back-compat format |traceId.spanId. so that older SDKs could understand it.\n            if (traceparent.split(\",\").length > 1) {\n                this.traceId = Util.w3cTraceId();\n                this.spanId = Util.w3cTraceId().substr(0, 16);\n            }\n            else {\n                var traceparentArr = traceparent.trim().split(\"-\");\n                var len = traceparentArr.length;\n                if (len >= 4) {\n                    this.version = traceparentArr[0];\n                    this.traceId = traceparentArr[1];\n                    this.spanId = traceparentArr[2];\n                    this.traceFlag = traceparentArr[3];\n                }\n                else {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                // Version validation\n                if (!this.version.match(/^[0-9a-f]{2}$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                }\n                if (this.version === \"00\" && len !== 4) {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (this.version === \"ff\") {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (!this.version.match(/^0[0-9a-f]$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                }\n                // TraceFlag validation\n                if (!this.traceFlag.match(/^[0-9a-f]{2}$/g)) {\n                    this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate TraceId, regenerate new traceid if invalid\n                if (!Traceparent.isValidTraceId(this.traceId)) {\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate Span Id, discard entire traceparent if invalid\n                if (!Traceparent.isValidSpanId(this.spanId)) {\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Save backCompat parentId\n                this.parentId = this.getBackCompatRequestId();\n            }\n        }\n        else if (parentId) {\n            // If incoming request contains only request-id, new traceid and spanid should be started, request-id value should be used as a parent. Root part of request-id should be stored in custom dimension on the request telemetry if root part is different from traceid. On the outgoing request side, request-id should be emitted in the |traceId.spanId. format.\n            this.parentId = parentId.slice(); // copy\n            var operationId = CorrelationIdManager.getRootId(parentId);\n            if (!Traceparent.isValidTraceId(operationId)) {\n                this.legacyRootId = operationId;\n                operationId = Util.w3cTraceId();\n            }\n            if (parentId.indexOf(\"|\") !== -1) {\n                parentId = parentId.substring(1 + parentId.substring(0, parentId.length - 1).lastIndexOf(\".\"), parentId.length - 1);\n            }\n            this.traceId = operationId;\n            this.spanId = parentId;\n        }\n        else {\n            // Fallback default constructor\n            // if request does not contain any correlation headers, see case p2\n            this.traceId = Util.w3cTraceId();\n            this.spanId = Util.w3cTraceId().substr(0, 16);\n        }\n    }\n    Traceparent.isValidTraceId = function (id) {\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\n    };\n    Traceparent.isValidSpanId = function (id) {\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\n    };\n    Traceparent.prototype.getBackCompatRequestId = function () {\n        return \"|\" + this.traceId + \".\" + this.spanId + \".\";\n    };\n    Traceparent.prototype.toString = function () {\n        return this.version + \"-\" + this.traceId + \"-\" + this.spanId + \"-\" + this.traceFlag;\n    };\n    Traceparent.prototype.updateSpanId = function () {\n        this.spanId = Util.w3cTraceId().substr(0, 16);\n    };\n    Traceparent.DEFAULT_TRACE_FLAG = \"01\";\n    Traceparent.DEFAULT_VERSION = \"00\";\n    return Traceparent;\n}());\nmodule.exports = Traceparent;\n//# sourceMappingURL=Traceparent.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpRequestParser = require(\"./HttpRequestParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar AutoCollectPerformance = require(\"./Performance\");\nvar AutoCollectHttpRequests = (function () {\n    function AutoCollectHttpRequests(client) {\n        if (!!AutoCollectHttpRequests.INSTANCE) {\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpRequests.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        // Autocorrelation requires automatic monitoring of incoming server requests\n        // Disabling autocollection but enabling autocorrelation will still enable\n        // request monitoring but will not produce request events\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\n            this.useAutoCorrelation(this._isAutoCorrelating);\n            this._initialize();\n        }\n    };\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled, forceClsHooked) {\n        if (isEnabled && !this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked);\n        }\n        else if (!isEnabled && this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.disable();\n        }\n        this._isAutoCorrelating = isEnabled;\n    };\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\n        return this._isAutoCorrelating;\n    };\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\n        if (!this._isAutoCorrelating) {\n            return;\n        }\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader(), requestParser.getTraceparent(), requestParser.getTracestate());\n    };\n    AutoCollectHttpRequests.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var wrapOnRequestHandler = function (onRequest) {\n            if (!onRequest) {\n                return undefined;\n            }\n            if (typeof onRequest !== 'function') {\n                throw new Error('onRequest handler must be a function');\n            }\n            return function (request, response) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\n                if (request && shouldCollect) {\n                    // Set up correlation context\n                    var requestParser_1 = new HttpRequestParser(request);\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\n                    // Note: Check for if correlation is enabled happens within this method.\n                    // If not enabled, function will directly call the callback.\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\n                        if (_this._isEnabled) {\n                            // Mark as auto collected\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\n                            // Auto collect request\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\n                        }\n                        if (typeof onRequest === \"function\") {\n                            onRequest(request, response);\n                        }\n                    });\n                }\n                else {\n                    if (typeof onRequest === \"function\") {\n                        onRequest(request, response);\n                    }\n                }\n            };\n        };\n        // The `http.createServer` function will instantiate a new http.Server object.\n        // Inside the Server's constructor, it is using addListener to register the\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\n        //    the http.createServer call. Or\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\n        //    fresh server instance. This seems more stable for possible future changes as\n        //    it also covers the case where the Server might not use addListener to manage\n        //    the callback internally.\n        //    And also as long as the constructor uses addListener to add the handle, it is\n        //    ok to patch the addListener after construction only. Because if we would patch\n        //    the prototype one and the createServer method, we would wrap the handler twice\n        //    in case of the constructor call.\n        var wrapServerEventHandler = function (server) {\n            var originalAddListener = server.addListener.bind(server);\n            server.addListener = function (eventType, eventHandler) {\n                switch (eventType) {\n                    case 'request':\n                    case 'checkContinue':\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\n                    default:\n                        return originalAddListener(eventType, eventHandler);\n                }\n            };\n            // on is an alias to addListener only\n            server.on = server.addListener;\n        };\n        var originalHttpServer = http.createServer;\n        http.createServer = function (onRequest) {\n            // todo: get a pointer to the server so the IP address can be read from server.address\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n        var originalHttpsServer = https.createServer;\n        https.createServer = function (options, onRequest) {\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n    };\n    /**\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\n     */\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\n        // Overwrite correlation context with request parser results\n        if (correlationContext) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\n    };\n    /**\n     * Tracks a request by listening to the response 'finish' event\n     */\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        }\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\n        if (correlationContext && !_requestParser) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        // response listeners\n        if (telemetry.response.once) {\n            telemetry.response.once(\"finish\", function () {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\n            });\n        }\n        // track a failed request if an error is emitted\n        if (telemetry.request.on) {\n            telemetry.request.on(\"error\", function (error) {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\n            });\n        }\n    };\n    /**\n     * Add the target correlationId to the response headers, if not already provided.\n     */\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\n        if (client.config && client.config.correlationId &&\n            response.getHeader && response.setHeader && !response.headersSent) {\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\n            Util.safeIncludeCorrelationHeader(client, response, correlationHeader);\n        }\n    };\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\n        if (error) {\n            requestParser.onError(error, ellapsedMilliseconds);\n        }\n        else {\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\n        }\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\n        if (telemetry.tagOverrides) {\n            for (var key in telemetry.tagOverrides) {\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\n            }\n        }\n        var legacyRootId = requestParser.getLegacyRootId();\n        if (legacyRootId) {\n            requestTelemetry.properties[\"ai_legacyRootId\"] = legacyRootId;\n        }\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\n        client.trackRequest(requestTelemetry);\n    };\n    AutoCollectHttpRequests.prototype.dispose = function () {\n        AutoCollectHttpRequests.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n        CorrelationContextManager_1.CorrelationContextManager.disable();\n        this._isAutoCorrelating = false;\n    };\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpRequests;\n}());\nmodule.exports = AutoCollectHttpRequests;\n//# sourceMappingURL=HttpRequests.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text, ignoreTrivia) {\n    if (ignoreTrivia === void 0) { ignoreTrivia = false; }\n    var len = text.length;\n    var pos = 0, value = '', tokenOffset = 0, token = 16 /* Unknown */, lineNumber = 0, lineStartOffset = 0, tokenLineStartOffset = 0, prevTokenLineStartOffset = 0, scanError = 0 /* None */;\n    function scanHexDigits(count, exact) {\n        var digits = 0;\n        var value = 0;\n        while (digits < count || !exact) {\n            var ch = text.charCodeAt(pos);\n            if (ch >= 48 /* _0 */ && ch <= 57 /* _9 */) {\n                value = value * 16 + ch - 48 /* _0 */;\n            }\n            else if (ch >= 65 /* A */ && ch <= 70 /* F */) {\n                value = value * 16 + ch - 65 /* A */ + 10;\n            }\n            else if (ch >= 97 /* a */ && ch <= 102 /* f */) {\n                value = value * 16 + ch - 97 /* a */ + 10;\n            }\n            else {\n                break;\n            }\n            pos++;\n            digits++;\n        }\n        if (digits < count) {\n            value = -1;\n        }\n        return value;\n    }\n    function setPosition(newPosition) {\n        pos = newPosition;\n        value = '';\n        tokenOffset = 0;\n        token = 16 /* Unknown */;\n        scanError = 0 /* None */;\n    }\n    function scanNumber() {\n        var start = pos;\n        if (text.charCodeAt(pos) === 48 /* _0 */) {\n            pos++;\n        }\n        else {\n            pos++;\n            while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n            }\n        }\n        if (pos < text.length && text.charCodeAt(pos) === 46 /* dot */) {\n            pos++;\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n                return text.substring(start, pos);\n            }\n        }\n        var end = pos;\n        if (pos < text.length && (text.charCodeAt(pos) === 69 /* E */ || text.charCodeAt(pos) === 101 /* e */)) {\n            pos++;\n            if (pos < text.length && text.charCodeAt(pos) === 43 /* plus */ || text.charCodeAt(pos) === 45 /* minus */) {\n                pos++;\n            }\n            if (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                pos++;\n                while (pos < text.length && isDigit(text.charCodeAt(pos))) {\n                    pos++;\n                }\n                end = pos;\n            }\n            else {\n                scanError = 3 /* UnexpectedEndOfNumber */;\n            }\n        }\n        return text.substring(start, end);\n    }\n    function scanString() {\n        var result = '', start = pos;\n        while (true) {\n            if (pos >= len) {\n                result += text.substring(start, pos);\n                scanError = 2 /* UnexpectedEndOfString */;\n                break;\n            }\n            var ch = text.charCodeAt(pos);\n            if (ch === 34 /* doubleQuote */) {\n                result += text.substring(start, pos);\n                pos++;\n                break;\n            }\n            if (ch === 92 /* backslash */) {\n                result += text.substring(start, pos);\n                pos++;\n                if (pos >= len) {\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                var ch2 = text.charCodeAt(pos++);\n                switch (ch2) {\n                    case 34 /* doubleQuote */:\n                        result += '\\\"';\n                        break;\n                    case 92 /* backslash */:\n                        result += '\\\\';\n                        break;\n                    case 47 /* slash */:\n                        result += '/';\n                        break;\n                    case 98 /* b */:\n                        result += '\\b';\n                        break;\n                    case 102 /* f */:\n                        result += '\\f';\n                        break;\n                    case 110 /* n */:\n                        result += '\\n';\n                        break;\n                    case 114 /* r */:\n                        result += '\\r';\n                        break;\n                    case 116 /* t */:\n                        result += '\\t';\n                        break;\n                    case 117 /* u */:\n                        var ch3 = scanHexDigits(4, true);\n                        if (ch3 >= 0) {\n                            result += String.fromCharCode(ch3);\n                        }\n                        else {\n                            scanError = 4 /* InvalidUnicode */;\n                        }\n                        break;\n                    default:\n                        scanError = 5 /* InvalidEscapeCharacter */;\n                }\n                start = pos;\n                continue;\n            }\n            if (ch >= 0 && ch <= 0x1f) {\n                if (isLineBreak(ch)) {\n                    result += text.substring(start, pos);\n                    scanError = 2 /* UnexpectedEndOfString */;\n                    break;\n                }\n                else {\n                    scanError = 6 /* InvalidCharacter */;\n                    // mark as error but continue with string\n                }\n            }\n            pos++;\n        }\n        return result;\n    }\n    function scanNext() {\n        value = '';\n        scanError = 0 /* None */;\n        tokenOffset = pos;\n        lineStartOffset = lineNumber;\n        prevTokenLineStartOffset = tokenLineStartOffset;\n        if (pos >= len) {\n            // at the end\n            tokenOffset = len;\n            return token = 17 /* EOF */;\n        }\n        var code = text.charCodeAt(pos);\n        // trivia: whitespace\n        if (isWhiteSpace(code)) {\n            do {\n                pos++;\n                value += String.fromCharCode(code);\n                code = text.charCodeAt(pos);\n            } while (isWhiteSpace(code));\n            return token = 15 /* Trivia */;\n        }\n        // trivia: newlines\n        if (isLineBreak(code)) {\n            pos++;\n            value += String.fromCharCode(code);\n            if (code === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                pos++;\n                value += '\\n';\n            }\n            lineNumber++;\n            tokenLineStartOffset = pos;\n            return token = 14 /* LineBreakTrivia */;\n        }\n        switch (code) {\n            // tokens: []{}:,\n            case 123 /* openBrace */:\n                pos++;\n                return token = 1 /* OpenBraceToken */;\n            case 125 /* closeBrace */:\n                pos++;\n                return token = 2 /* CloseBraceToken */;\n            case 91 /* openBracket */:\n                pos++;\n                return token = 3 /* OpenBracketToken */;\n            case 93 /* closeBracket */:\n                pos++;\n                return token = 4 /* CloseBracketToken */;\n            case 58 /* colon */:\n                pos++;\n                return token = 6 /* ColonToken */;\n            case 44 /* comma */:\n                pos++;\n                return token = 5 /* CommaToken */;\n            // strings\n            case 34 /* doubleQuote */:\n                pos++;\n                value = scanString();\n                return token = 10 /* StringLiteral */;\n            // comments\n            case 47 /* slash */:\n                var start = pos - 1;\n                // Single-line comment\n                if (text.charCodeAt(pos + 1) === 47 /* slash */) {\n                    pos += 2;\n                    while (pos < len) {\n                        if (isLineBreak(text.charCodeAt(pos))) {\n                            break;\n                        }\n                        pos++;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 12 /* LineCommentTrivia */;\n                }\n                // Multi-line comment\n                if (text.charCodeAt(pos + 1) === 42 /* asterisk */) {\n                    pos += 2;\n                    var safeLength = len - 1; // For lookahead.\n                    var commentClosed = false;\n                    while (pos < safeLength) {\n                        var ch = text.charCodeAt(pos);\n                        if (ch === 42 /* asterisk */ && text.charCodeAt(pos + 1) === 47 /* slash */) {\n                            pos += 2;\n                            commentClosed = true;\n                            break;\n                        }\n                        pos++;\n                        if (isLineBreak(ch)) {\n                            if (ch === 13 /* carriageReturn */ && text.charCodeAt(pos) === 10 /* lineFeed */) {\n                                pos++;\n                            }\n                            lineNumber++;\n                            tokenLineStartOffset = pos;\n                        }\n                    }\n                    if (!commentClosed) {\n                        pos++;\n                        scanError = 1 /* UnexpectedEndOfComment */;\n                    }\n                    value = text.substring(start, pos);\n                    return token = 13 /* BlockCommentTrivia */;\n                }\n                // just a single slash\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n            // numbers\n            case 45 /* minus */:\n                value += String.fromCharCode(code);\n                pos++;\n                if (pos === len || !isDigit(text.charCodeAt(pos))) {\n                    return token = 16 /* Unknown */;\n                }\n            // found a minus, followed by a number so\n            // we fall through to proceed with scanning\n            // numbers\n            case 48 /* _0 */:\n            case 49 /* _1 */:\n            case 50 /* _2 */:\n            case 51 /* _3 */:\n            case 52 /* _4 */:\n            case 53 /* _5 */:\n            case 54 /* _6 */:\n            case 55 /* _7 */:\n            case 56 /* _8 */:\n            case 57 /* _9 */:\n                value += scanNumber();\n                return token = 11 /* NumericLiteral */;\n            // literals and unknown symbols\n            default:\n                // is a literal? Read the full word.\n                while (pos < len && isUnknownContentCharacter(code)) {\n                    pos++;\n                    code = text.charCodeAt(pos);\n                }\n                if (tokenOffset !== pos) {\n                    value = text.substring(tokenOffset, pos);\n                    // keywords: true, false, null\n                    switch (value) {\n                        case 'true': return token = 8 /* TrueKeyword */;\n                        case 'false': return token = 9 /* FalseKeyword */;\n                        case 'null': return token = 7 /* NullKeyword */;\n                    }\n                    return token = 16 /* Unknown */;\n                }\n                // some\n                value += String.fromCharCode(code);\n                pos++;\n                return token = 16 /* Unknown */;\n        }\n    }\n    function isUnknownContentCharacter(code) {\n        if (isWhiteSpace(code) || isLineBreak(code)) {\n            return false;\n        }\n        switch (code) {\n            case 125 /* closeBrace */:\n            case 93 /* closeBracket */:\n            case 123 /* openBrace */:\n            case 91 /* openBracket */:\n            case 34 /* doubleQuote */:\n            case 58 /* colon */:\n            case 44 /* comma */:\n            case 47 /* slash */:\n                return false;\n        }\n        return true;\n    }\n    function scanNextNonTrivia() {\n        var result;\n        do {\n            result = scanNext();\n        } while (result >= 12 /* LineCommentTrivia */ && result <= 15 /* Trivia */);\n        return result;\n    }\n    return {\n        setPosition: setPosition,\n        getPosition: function () { return pos; },\n        scan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n        getToken: function () { return token; },\n        getTokenValue: function () { return value; },\n        getTokenOffset: function () { return tokenOffset; },\n        getTokenLength: function () { return pos - tokenOffset; },\n        getTokenStartLine: function () { return lineStartOffset; },\n        getTokenStartCharacter: function () { return tokenOffset - prevTokenLineStartOffset; },\n        getTokenError: function () { return scanError; },\n    };\n}\nfunction isWhiteSpace(ch) {\n    return ch === 32 /* space */ || ch === 9 /* tab */ || ch === 11 /* verticalTab */ || ch === 12 /* formFeed */ ||\n        ch === 160 /* nonBreakingSpace */ || ch === 5760 /* ogham */ || ch >= 8192 /* enQuad */ && ch <= 8203 /* zeroWidthSpace */ ||\n        ch === 8239 /* narrowNoBreakSpace */ || ch === 8287 /* mathematicalSpace */ || ch === 12288 /* ideographicSpace */ || ch === 65279 /* byteOrderMark */;\n}\nfunction isLineBreak(ch) {\n    return ch === 10 /* lineFeed */ || ch === 13 /* carriageReturn */ || ch === 8232 /* lineSeparator */ || ch === 8233 /* paragraphSeparator */;\n}\nfunction isDigit(ch) {\n    return ch >= 48 /* _0 */ && ch <= 57 /* _9 */;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nexport function format(documentText, range, options) {\n    var initialIndentLevel;\n    var formatText;\n    var formatTextStart;\n    var rangeStart;\n    var rangeEnd;\n    if (range) {\n        rangeStart = range.offset;\n        rangeEnd = rangeStart + range.length;\n        formatTextStart = rangeStart;\n        while (formatTextStart > 0 && !isEOL(documentText, formatTextStart - 1)) {\n            formatTextStart--;\n        }\n        var endOffset = rangeEnd;\n        while (endOffset < documentText.length && !isEOL(documentText, endOffset)) {\n            endOffset++;\n        }\n        formatText = documentText.substring(formatTextStart, endOffset);\n        initialIndentLevel = computeIndentLevel(formatText, options);\n    }\n    else {\n        formatText = documentText;\n        initialIndentLevel = 0;\n        formatTextStart = 0;\n        rangeStart = 0;\n        rangeEnd = documentText.length;\n    }\n    var eol = getEOL(options, documentText);\n    var lineBreak = false;\n    var indentLevel = 0;\n    var indentValue;\n    if (options.insertSpaces) {\n        indentValue = repeat(' ', options.tabSize || 4);\n    }\n    else {\n        indentValue = '\\t';\n    }\n    var scanner = createScanner(formatText, false);\n    var hasError = false;\n    function newLineAndIndent() {\n        return eol + repeat(indentValue, initialIndentLevel + indentLevel);\n    }\n    function scanNext() {\n        var token = scanner.scan();\n        lineBreak = false;\n        while (token === 15 /* Trivia */ || token === 14 /* LineBreakTrivia */) {\n            lineBreak = lineBreak || (token === 14 /* LineBreakTrivia */);\n            token = scanner.scan();\n        }\n        hasError = token === 16 /* Unknown */ || scanner.getTokenError() !== 0 /* None */;\n        return token;\n    }\n    var editOperations = [];\n    function addEdit(text, startOffset, endOffset) {\n        if (!hasError && startOffset < rangeEnd && endOffset > rangeStart && documentText.substring(startOffset, endOffset) !== text) {\n            editOperations.push({ offset: startOffset, length: endOffset - startOffset, content: text });\n        }\n    }\n    var firstToken = scanNext();\n    if (firstToken !== 17 /* EOF */) {\n        var firstTokenStart = scanner.getTokenOffset() + formatTextStart;\n        var initialIndent = repeat(indentValue, initialIndentLevel);\n        addEdit(initialIndent, formatTextStart, firstTokenStart);\n    }\n    while (firstToken !== 17 /* EOF */) {\n        var firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n        var secondToken = scanNext();\n        var replaceContent = '';\n        while (!lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n            // comments on the same line: keep them on the same line, but ignore them otherwise\n            var commentTokenStart = scanner.getTokenOffset() + formatTextStart;\n            addEdit(' ', firstTokenEnd, commentTokenStart);\n            firstTokenEnd = scanner.getTokenOffset() + scanner.getTokenLength() + formatTextStart;\n            replaceContent = secondToken === 12 /* LineCommentTrivia */ ? newLineAndIndent() : '';\n            secondToken = scanNext();\n        }\n        if (secondToken === 2 /* CloseBraceToken */) {\n            if (firstToken !== 1 /* OpenBraceToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else if (secondToken === 4 /* CloseBracketToken */) {\n            if (firstToken !== 3 /* OpenBracketToken */) {\n                indentLevel--;\n                replaceContent = newLineAndIndent();\n            }\n        }\n        else {\n            switch (firstToken) {\n                case 3 /* OpenBracketToken */:\n                case 1 /* OpenBraceToken */:\n                    indentLevel++;\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 5 /* CommaToken */:\n                case 12 /* LineCommentTrivia */:\n                    replaceContent = newLineAndIndent();\n                    break;\n                case 13 /* BlockCommentTrivia */:\n                    if (lineBreak) {\n                        replaceContent = newLineAndIndent();\n                    }\n                    else {\n                        // symbol following comment on the same line: keep on same line, separate with ' '\n                        replaceContent = ' ';\n                    }\n                    break;\n                case 6 /* ColonToken */:\n                    replaceContent = ' ';\n                    break;\n                case 10 /* StringLiteral */:\n                    if (secondToken === 6 /* ColonToken */) {\n                        replaceContent = '';\n                        break;\n                    }\n                // fall through\n                case 7 /* NullKeyword */:\n                case 8 /* TrueKeyword */:\n                case 9 /* FalseKeyword */:\n                case 11 /* NumericLiteral */:\n                case 2 /* CloseBraceToken */:\n                case 4 /* CloseBracketToken */:\n                    if (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */) {\n                        replaceContent = ' ';\n                    }\n                    else if (secondToken !== 5 /* CommaToken */ && secondToken !== 17 /* EOF */) {\n                        hasError = true;\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    hasError = true;\n                    break;\n            }\n            if (lineBreak && (secondToken === 12 /* LineCommentTrivia */ || secondToken === 13 /* BlockCommentTrivia */)) {\n                replaceContent = newLineAndIndent();\n            }\n        }\n        var secondTokenStart = scanner.getTokenOffset() + formatTextStart;\n        addEdit(replaceContent, firstTokenEnd, secondTokenStart);\n        firstToken = secondToken;\n    }\n    return editOperations;\n}\nfunction repeat(s, count) {\n    var result = '';\n    for (var i = 0; i < count; i++) {\n        result += s;\n    }\n    return result;\n}\nfunction computeIndentLevel(content, options) {\n    var i = 0;\n    var nChars = 0;\n    var tabSize = options.tabSize || 4;\n    while (i < content.length) {\n        var ch = content.charAt(i);\n        if (ch === ' ') {\n            nChars++;\n        }\n        else if (ch === '\\t') {\n            nChars += tabSize;\n        }\n        else {\n            break;\n        }\n        i++;\n    }\n    return Math.floor(nChars / tabSize);\n}\nfunction getEOL(options, text) {\n    for (var i = 0; i < text.length; i++) {\n        var ch = text.charAt(i);\n        if (ch === '\\r') {\n            if (i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                return '\\r\\n';\n            }\n            return '\\r';\n        }\n        else if (ch === '\\n') {\n            return '\\n';\n        }\n    }\n    return (options && options.eol) || '\\n';\n}\nexport function isEOL(text, offset) {\n    return '\\r\\n'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { createScanner } from './scanner';\nvar ParseOptions;\n(function (ParseOptions) {\n    ParseOptions.DEFAULT = {\n        allowTrailingComma: false\n    };\n})(ParseOptions || (ParseOptions = {}));\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text, position) {\n    var segments = []; // strings or numbers\n    var earlyReturnException = new Object();\n    var previousNode = undefined;\n    var previousNodeInst = {\n        value: {},\n        offset: 0,\n        length: 0,\n        type: 'object',\n        parent: undefined\n    };\n    var isAtPropertyKey = false;\n    function setPreviousNode(value, offset, length, type) {\n        previousNodeInst.value = value;\n        previousNodeInst.offset = offset;\n        previousNodeInst.length = length;\n        previousNodeInst.type = type;\n        previousNodeInst.colonOffset = undefined;\n        previousNode = previousNodeInst;\n    }\n    try {\n        visit(text, {\n            onObjectBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                isAtPropertyKey = position > offset;\n                segments.push(''); // push a placeholder (will be replaced)\n            },\n            onObjectProperty: function (name, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(name, offset, length, 'property');\n                segments[segments.length - 1] = name;\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onObjectEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onArrayBegin: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.push(0);\n            },\n            onArrayEnd: function (offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                previousNode = undefined;\n                segments.pop();\n            },\n            onLiteralValue: function (value, offset, length) {\n                if (position < offset) {\n                    throw earlyReturnException;\n                }\n                setPreviousNode(value, offset, length, getNodeType(value));\n                if (position <= offset + length) {\n                    throw earlyReturnException;\n                }\n            },\n            onSeparator: function (sep, offset, length) {\n                if (position <= offset) {\n                    throw earlyReturnException;\n                }\n                if (sep === ':' && previousNode && previousNode.type === 'property') {\n                    previousNode.colonOffset = offset;\n                    isAtPropertyKey = false;\n                    previousNode = undefined;\n                }\n                else if (sep === ',') {\n                    var last = segments[segments.length - 1];\n                    if (typeof last === 'number') {\n                        segments[segments.length - 1] = last + 1;\n                    }\n                    else {\n                        isAtPropertyKey = true;\n                        segments[segments.length - 1] = '';\n                    }\n                    previousNode = undefined;\n                }\n            }\n        });\n    }\n    catch (e) {\n        if (e !== earlyReturnException) {\n            throw e;\n        }\n    }\n    return {\n        path: segments,\n        previousNode: previousNode,\n        isAtPropertyKey: isAtPropertyKey,\n        matches: function (pattern) {\n            var k = 0;\n            for (var i = 0; k < pattern.length && i < segments.length; i++) {\n                if (pattern[k] === segments[i] || pattern[k] === '*') {\n                    k++;\n                }\n                else if (pattern[k] !== '**') {\n                    return false;\n                }\n            }\n            return k === pattern.length;\n        }\n    };\n}\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentProperty = null;\n    var currentParent = [];\n    var previousParents = [];\n    function onValue(value) {\n        if (Array.isArray(currentParent)) {\n            currentParent.push(value);\n        }\n        else if (currentProperty !== null) {\n            currentParent[currentProperty] = value;\n        }\n    }\n    var visitor = {\n        onObjectBegin: function () {\n            var object = {};\n            onValue(object);\n            previousParents.push(currentParent);\n            currentParent = object;\n            currentProperty = null;\n        },\n        onObjectProperty: function (name) {\n            currentProperty = name;\n        },\n        onObjectEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onArrayBegin: function () {\n            var array = [];\n            onValue(array);\n            previousParents.push(currentParent);\n            currentParent = array;\n            currentProperty = null;\n        },\n        onArrayEnd: function () {\n            currentParent = previousParents.pop();\n        },\n        onLiteralValue: onValue,\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    return currentParent[0];\n}\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text, errors, options) {\n    if (errors === void 0) { errors = []; }\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var currentParent = { type: 'array', offset: -1, length: -1, children: [], parent: undefined }; // artificial root\n    function ensurePropertyComplete(endOffset) {\n        if (currentParent.type === 'property') {\n            currentParent.length = endOffset - currentParent.offset;\n            currentParent = currentParent.parent;\n        }\n    }\n    function onValue(valueNode) {\n        currentParent.children.push(valueNode);\n        return valueNode;\n    }\n    var visitor = {\n        onObjectBegin: function (offset) {\n            currentParent = onValue({ type: 'object', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onObjectProperty: function (name, offset, length) {\n            currentParent = onValue({ type: 'property', offset: offset, length: -1, parent: currentParent, children: [] });\n            currentParent.children.push({ type: 'string', value: name, offset: offset, length: length, parent: currentParent });\n        },\n        onObjectEnd: function (offset, length) {\n            ensurePropertyComplete(offset + length); // in case of a missing value for a property: make sure property is complete\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onArrayBegin: function (offset, length) {\n            currentParent = onValue({ type: 'array', offset: offset, length: -1, parent: currentParent, children: [] });\n        },\n        onArrayEnd: function (offset, length) {\n            currentParent.length = offset + length - currentParent.offset;\n            currentParent = currentParent.parent;\n            ensurePropertyComplete(offset + length);\n        },\n        onLiteralValue: function (value, offset, length) {\n            onValue({ type: getNodeType(value), offset: offset, length: length, parent: currentParent, value: value });\n            ensurePropertyComplete(offset + length);\n        },\n        onSeparator: function (sep, offset, length) {\n            if (currentParent.type === 'property') {\n                if (sep === ':') {\n                    currentParent.colonOffset = offset;\n                }\n                else if (sep === ',') {\n                    ensurePropertyComplete(offset);\n                }\n            }\n        },\n        onError: function (error, offset, length) {\n            errors.push({ error: error, offset: offset, length: length });\n        }\n    };\n    visit(text, visitor, options);\n    var result = currentParent.children[0];\n    if (result) {\n        delete result.parent;\n    }\n    return result;\n}\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root, path) {\n    if (!root) {\n        return undefined;\n    }\n    var node = root;\n    for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        if (typeof segment === 'string') {\n            if (node.type !== 'object' || !Array.isArray(node.children)) {\n                return undefined;\n            }\n            var found = false;\n            for (var _a = 0, _b = node.children; _a < _b.length; _a++) {\n                var propertyNode = _b[_a];\n                if (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment) {\n                    node = propertyNode.children[1];\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                return undefined;\n            }\n        }\n        else {\n            var index = segment;\n            if (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n                return undefined;\n            }\n            node = node.children[index];\n        }\n    }\n    return node;\n}\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node) {\n    if (!node.parent || !node.parent.children) {\n        return [];\n    }\n    var path = getNodePath(node.parent);\n    if (node.parent.type === 'property') {\n        var key = node.parent.children[0].value;\n        path.push(key);\n    }\n    else if (node.parent.type === 'array') {\n        var index = node.parent.children.indexOf(node);\n        if (index !== -1) {\n            path.push(index);\n        }\n    }\n    return path;\n}\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node) {\n    switch (node.type) {\n        case 'array':\n            return node.children.map(getNodeValue);\n        case 'object':\n            var obj = Object.create(null);\n            for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                var prop = _a[_i];\n                var valueNode = prop.children[1];\n                if (valueNode) {\n                    obj[prop.children[0].value] = getNodeValue(valueNode);\n                }\n            }\n            return obj;\n        case 'null':\n        case 'string':\n        case 'number':\n        case 'boolean':\n            return node.value;\n        default:\n            return undefined;\n    }\n}\nexport function contains(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    return (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node, offset, includeRightBound) {\n    if (includeRightBound === void 0) { includeRightBound = false; }\n    if (contains(node, offset, includeRightBound)) {\n        var children = node.children;\n        if (Array.isArray(children)) {\n            for (var i = 0; i < children.length && children[i].offset <= offset; i++) {\n                var item = findNodeAtOffset(children[i], offset, includeRightBound);\n                if (item) {\n                    return item;\n                }\n            }\n        }\n        return node;\n    }\n    return undefined;\n}\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text, visitor, options) {\n    if (options === void 0) { options = ParseOptions.DEFAULT; }\n    var _scanner = createScanner(text, false);\n    function toNoArgVisit(visitFunction) {\n        return visitFunction ? function () { return visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    function toOneArgVisit(visitFunction) {\n        return visitFunction ? function (arg) { return visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength(), _scanner.getTokenStartLine(), _scanner.getTokenStartCharacter()); } : function () { return true; };\n    }\n    var onObjectBegin = toNoArgVisit(visitor.onObjectBegin), onObjectProperty = toOneArgVisit(visitor.onObjectProperty), onObjectEnd = toNoArgVisit(visitor.onObjectEnd), onArrayBegin = toNoArgVisit(visitor.onArrayBegin), onArrayEnd = toNoArgVisit(visitor.onArrayEnd), onLiteralValue = toOneArgVisit(visitor.onLiteralValue), onSeparator = toOneArgVisit(visitor.onSeparator), onComment = toNoArgVisit(visitor.onComment), onError = toOneArgVisit(visitor.onError);\n    var disallowComments = options && options.disallowComments;\n    var allowTrailingComma = options && options.allowTrailingComma;\n    function scanNext() {\n        while (true) {\n            var token = _scanner.scan();\n            switch (_scanner.getTokenError()) {\n                case 4 /* InvalidUnicode */:\n                    handleError(14 /* InvalidUnicode */);\n                    break;\n                case 5 /* InvalidEscapeCharacter */:\n                    handleError(15 /* InvalidEscapeCharacter */);\n                    break;\n                case 3 /* UnexpectedEndOfNumber */:\n                    handleError(13 /* UnexpectedEndOfNumber */);\n                    break;\n                case 1 /* UnexpectedEndOfComment */:\n                    if (!disallowComments) {\n                        handleError(11 /* UnexpectedEndOfComment */);\n                    }\n                    break;\n                case 2 /* UnexpectedEndOfString */:\n                    handleError(12 /* UnexpectedEndOfString */);\n                    break;\n                case 6 /* InvalidCharacter */:\n                    handleError(16 /* InvalidCharacter */);\n                    break;\n            }\n            switch (token) {\n                case 12 /* LineCommentTrivia */:\n                case 13 /* BlockCommentTrivia */:\n                    if (disallowComments) {\n                        handleError(10 /* InvalidCommentToken */);\n                    }\n                    else {\n                        onComment();\n                    }\n                    break;\n                case 16 /* Unknown */:\n                    handleError(1 /* InvalidSymbol */);\n                    break;\n                case 15 /* Trivia */:\n                case 14 /* LineBreakTrivia */:\n                    break;\n                default:\n                    return token;\n            }\n        }\n    }\n    function handleError(error, skipUntilAfter, skipUntil) {\n        if (skipUntilAfter === void 0) { skipUntilAfter = []; }\n        if (skipUntil === void 0) { skipUntil = []; }\n        onError(error);\n        if (skipUntilAfter.length + skipUntil.length > 0) {\n            var token = _scanner.getToken();\n            while (token !== 17 /* EOF */) {\n                if (skipUntilAfter.indexOf(token) !== -1) {\n                    scanNext();\n                    break;\n                }\n                else if (skipUntil.indexOf(token) !== -1) {\n                    break;\n                }\n                token = scanNext();\n            }\n        }\n    }\n    function parseString(isValue) {\n        var value = _scanner.getTokenValue();\n        if (isValue) {\n            onLiteralValue(value);\n        }\n        else {\n            onObjectProperty(value);\n        }\n        scanNext();\n        return true;\n    }\n    function parseLiteral() {\n        switch (_scanner.getToken()) {\n            case 11 /* NumericLiteral */:\n                var tokenValue = _scanner.getTokenValue();\n                var value = Number(tokenValue);\n                if (isNaN(value)) {\n                    handleError(2 /* InvalidNumberFormat */);\n                    value = 0;\n                }\n                onLiteralValue(value);\n                break;\n            case 7 /* NullKeyword */:\n                onLiteralValue(null);\n                break;\n            case 8 /* TrueKeyword */:\n                onLiteralValue(true);\n                break;\n            case 9 /* FalseKeyword */:\n                onLiteralValue(false);\n                break;\n            default:\n                return false;\n        }\n        scanNext();\n        return true;\n    }\n    function parseProperty() {\n        if (_scanner.getToken() !== 10 /* StringLiteral */) {\n            handleError(3 /* PropertyNameExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            return false;\n        }\n        parseString(false);\n        if (_scanner.getToken() === 6 /* ColonToken */) {\n            onSeparator(':');\n            scanNext(); // consume colon\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n        }\n        else {\n            handleError(5 /* ColonExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n        }\n        return true;\n    }\n    function parseObject() {\n        onObjectBegin();\n        scanNext(); // consume open brace\n        var needsComma = false;\n        while (_scanner.getToken() !== 2 /* CloseBraceToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 2 /* CloseBraceToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseProperty()) {\n                handleError(4 /* ValueExpected */, [], [2 /* CloseBraceToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onObjectEnd();\n        if (_scanner.getToken() !== 2 /* CloseBraceToken */) {\n            handleError(7 /* CloseBraceExpected */, [2 /* CloseBraceToken */], []);\n        }\n        else {\n            scanNext(); // consume close brace\n        }\n        return true;\n    }\n    function parseArray() {\n        onArrayBegin();\n        scanNext(); // consume open bracket\n        var needsComma = false;\n        while (_scanner.getToken() !== 4 /* CloseBracketToken */ && _scanner.getToken() !== 17 /* EOF */) {\n            if (_scanner.getToken() === 5 /* CommaToken */) {\n                if (!needsComma) {\n                    handleError(4 /* ValueExpected */, [], []);\n                }\n                onSeparator(',');\n                scanNext(); // consume comma\n                if (_scanner.getToken() === 4 /* CloseBracketToken */ && allowTrailingComma) {\n                    break;\n                }\n            }\n            else if (needsComma) {\n                handleError(6 /* CommaExpected */, [], []);\n            }\n            if (!parseValue()) {\n                handleError(4 /* ValueExpected */, [], [4 /* CloseBracketToken */, 5 /* CommaToken */]);\n            }\n            needsComma = true;\n        }\n        onArrayEnd();\n        if (_scanner.getToken() !== 4 /* CloseBracketToken */) {\n            handleError(8 /* CloseBracketExpected */, [4 /* CloseBracketToken */], []);\n        }\n        else {\n            scanNext(); // consume close bracket\n        }\n        return true;\n    }\n    function parseValue() {\n        switch (_scanner.getToken()) {\n            case 3 /* OpenBracketToken */:\n                return parseArray();\n            case 1 /* OpenBraceToken */:\n                return parseObject();\n            case 10 /* StringLiteral */:\n                return parseString(true);\n            default:\n                return parseLiteral();\n        }\n    }\n    scanNext();\n    if (_scanner.getToken() === 17 /* EOF */) {\n        if (options.allowEmptyContent) {\n            return true;\n        }\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (!parseValue()) {\n        handleError(4 /* ValueExpected */, [], []);\n        return false;\n    }\n    if (_scanner.getToken() !== 17 /* EOF */) {\n        handleError(9 /* EndOfFileExpected */, [], []);\n    }\n    return true;\n}\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text, replaceCh) {\n    var _scanner = createScanner(text), parts = [], kind, offset = 0, pos;\n    do {\n        pos = _scanner.getPosition();\n        kind = _scanner.scan();\n        switch (kind) {\n            case 12 /* LineCommentTrivia */:\n            case 13 /* BlockCommentTrivia */:\n            case 17 /* EOF */:\n                if (offset !== pos) {\n                    parts.push(text.substring(offset, pos));\n                }\n                if (replaceCh !== undefined) {\n                    parts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n                }\n                offset = _scanner.getPosition();\n                break;\n        }\n    } while (kind !== 17 /* EOF */);\n    return parts.join('');\n}\nexport function getNodeType(value) {\n    switch (typeof value) {\n        case 'boolean': return 'boolean';\n        case 'number': return 'number';\n        case 'string': return 'string';\n        case 'object': {\n            if (!value) {\n                return 'null';\n            }\n            else if (Array.isArray(value)) {\n                return 'array';\n            }\n            return 'object';\n        }\n        default: return 'null';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { format, isEOL } from './format';\nimport { parseTree, findNodeAtLocation } from './parser';\nexport function removeProperty(text, path, options) {\n    return setProperty(text, path, void 0, options);\n}\nexport function setProperty(text, originalPath, value, options) {\n    var _a;\n    var path = originalPath.slice();\n    var errors = [];\n    var root = parseTree(text, errors);\n    var parent = void 0;\n    var lastSegment = void 0;\n    while (path.length > 0) {\n        lastSegment = path.pop();\n        parent = findNodeAtLocation(root, path);\n        if (parent === void 0 && value !== void 0) {\n            if (typeof lastSegment === 'string') {\n                value = (_a = {}, _a[lastSegment] = value, _a);\n            }\n            else {\n                value = [value];\n            }\n        }\n        else {\n            break;\n        }\n    }\n    if (!parent) {\n        // empty document\n        if (value === void 0) { // delete\n            throw new Error('Can not delete in empty document');\n        }\n        return withFormatting(text, { offset: root ? root.offset : 0, length: root ? root.length : 0, content: JSON.stringify(value) }, options);\n    }\n    else if (parent.type === 'object' && typeof lastSegment === 'string' && Array.isArray(parent.children)) {\n        var existing = findNodeAtLocation(parent, [lastSegment]);\n        if (existing !== void 0) {\n            if (value === void 0) { // delete\n                if (!existing.parent) {\n                    throw new Error('Malformed AST');\n                }\n                var propertyIndex = parent.children.indexOf(existing.parent);\n                var removeBegin = void 0;\n                var removeEnd = existing.parent.offset + existing.parent.length;\n                if (propertyIndex > 0) {\n                    // remove the comma of the previous node\n                    var previous = parent.children[propertyIndex - 1];\n                    removeBegin = previous.offset + previous.length;\n                }\n                else {\n                    removeBegin = parent.offset + 1;\n                    if (parent.children.length > 1) {\n                        // remove the comma of the next node\n                        var next = parent.children[1];\n                        removeEnd = next.offset;\n                    }\n                }\n                return withFormatting(text, { offset: removeBegin, length: removeEnd - removeBegin, content: '' }, options);\n            }\n            else {\n                // set value of existing property\n                return withFormatting(text, { offset: existing.offset, length: existing.length, content: JSON.stringify(value) }, options);\n            }\n        }\n        else {\n            if (value === void 0) { // delete\n                return []; // property does not exist, nothing to do\n            }\n            var newProperty = JSON.stringify(lastSegment) + \": \" + JSON.stringify(value);\n            var index = options.getInsertionIndex ? options.getInsertionIndex(parent.children.map(function (p) { return p.children[0].value; })) : parent.children.length;\n            var edit = void 0;\n            if (index > 0) {\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            else if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty + ',' };\n            }\n            return withFormatting(text, edit, options);\n        }\n    }\n    else if (parent.type === 'array' && typeof lastSegment === 'number' && Array.isArray(parent.children)) {\n        var insertIndex = lastSegment;\n        if (insertIndex === -1) {\n            // Insert\n            var newProperty = \"\" + JSON.stringify(value);\n            var edit = void 0;\n            if (parent.children.length === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: newProperty };\n            }\n            else {\n                var previous = parent.children[parent.children.length - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value === void 0 && parent.children.length >= 0) {\n            // Removal\n            var removalIndex = lastSegment;\n            var toRemove = parent.children[removalIndex];\n            var edit = void 0;\n            if (parent.children.length === 1) {\n                // only item\n                edit = { offset: parent.offset + 1, length: parent.length - 2, content: '' };\n            }\n            else if (parent.children.length - 1 === removalIndex) {\n                // last item\n                var previous = parent.children[removalIndex - 1];\n                var offset = previous.offset + previous.length;\n                var parentEndOffset = parent.offset + parent.length;\n                edit = { offset: offset, length: parentEndOffset - 2 - offset, content: '' };\n            }\n            else {\n                edit = { offset: toRemove.offset, length: parent.children[removalIndex + 1].offset - toRemove.offset, content: '' };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else if (value !== void 0) {\n            var edit = void 0;\n            var newProperty = \"\" + JSON.stringify(value);\n            if (!options.isArrayInsertion && parent.children.length > lastSegment) {\n                var toModify = parent.children[lastSegment];\n                edit = { offset: toModify.offset, length: toModify.length, content: newProperty };\n            }\n            else if (parent.children.length === 0 || lastSegment === 0) {\n                edit = { offset: parent.offset + 1, length: 0, content: parent.children.length === 0 ? newProperty : newProperty + ',' };\n            }\n            else {\n                var index = lastSegment > parent.children.length ? parent.children.length : lastSegment;\n                var previous = parent.children[index - 1];\n                edit = { offset: previous.offset + previous.length, length: 0, content: ',' + newProperty };\n            }\n            return withFormatting(text, edit, options);\n        }\n        else {\n            throw new Error(\"Can not \" + (value === void 0 ? 'remove' : (options.isArrayInsertion ? 'insert' : 'modify')) + \" Array index \" + insertIndex + \" as length is not sufficient\");\n        }\n    }\n    else {\n        throw new Error(\"Can not add \" + (typeof lastSegment !== 'number' ? 'index' : 'property') + \" to parent of type \" + parent.type);\n    }\n}\nfunction withFormatting(text, edit, options) {\n    if (!options.formattingOptions) {\n        return [edit];\n    }\n    // apply the edit\n    var newText = applyEdit(text, edit);\n    // format the new text\n    var begin = edit.offset;\n    var end = edit.offset + edit.content.length;\n    if (edit.length === 0 || edit.content.length === 0) { // insert or remove\n        while (begin > 0 && !isEOL(newText, begin - 1)) {\n            begin--;\n        }\n        while (end < newText.length && !isEOL(newText, end)) {\n            end++;\n        }\n    }\n    var edits = format(newText, { offset: begin, length: end - begin }, options.formattingOptions);\n    // apply the formatting edits and track the begin and end offsets of the changes\n    for (var i = edits.length - 1; i >= 0; i--) {\n        var edit_1 = edits[i];\n        newText = applyEdit(newText, edit_1);\n        begin = Math.min(begin, edit_1.offset);\n        end = Math.max(end, edit_1.offset + edit_1.length);\n        end += edit_1.content.length - edit_1.length;\n    }\n    // create a single edit with all changes\n    var editLength = text.length - (newText.length - end) - begin;\n    return [{ offset: begin, length: editLength, content: newText.substring(begin, end) }];\n}\nexport function applyEdit(text, edit) {\n    return text.substring(0, edit.offset) + edit.content + text.substring(edit.offset + edit.length);\n}\nexport function isWS(text, offset) {\n    return '\\r\\n \\t'.indexOf(text.charAt(offset)) !== -1;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as formatter from './impl/format';\nimport * as edit from './impl/edit';\nimport * as scanner from './impl/scanner';\nimport * as parser from './impl/parser';\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport var createScanner = scanner.createScanner;\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport var getLocation = parser.getLocation;\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore, always check the errors list to find out if the input was valid.\n */\nexport var parse = parser.parse;\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport var parseTree = parser.parseTree;\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport var findNodeAtLocation = parser.findNodeAtLocation;\n/**\n * Finds the innermost node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport var findNodeAtOffset = parser.findNodeAtOffset;\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport var getNodePath = parser.getNodePath;\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport var getNodeValue = parser.getNodeValue;\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport var visit = parser.visit;\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport var stripComments = parser.stripComments;\nexport function printParseErrorCode(code) {\n    switch (code) {\n        case 1 /* InvalidSymbol */: return 'InvalidSymbol';\n        case 2 /* InvalidNumberFormat */: return 'InvalidNumberFormat';\n        case 3 /* PropertyNameExpected */: return 'PropertyNameExpected';\n        case 4 /* ValueExpected */: return 'ValueExpected';\n        case 5 /* ColonExpected */: return 'ColonExpected';\n        case 6 /* CommaExpected */: return 'CommaExpected';\n        case 7 /* CloseBraceExpected */: return 'CloseBraceExpected';\n        case 8 /* CloseBracketExpected */: return 'CloseBracketExpected';\n        case 9 /* EndOfFileExpected */: return 'EndOfFileExpected';\n        case 10 /* InvalidCommentToken */: return 'InvalidCommentToken';\n        case 11 /* UnexpectedEndOfComment */: return 'UnexpectedEndOfComment';\n        case 12 /* UnexpectedEndOfString */: return 'UnexpectedEndOfString';\n        case 13 /* UnexpectedEndOfNumber */: return 'UnexpectedEndOfNumber';\n        case 14 /* InvalidUnicode */: return 'InvalidUnicode';\n        case 15 /* InvalidEscapeCharacter */: return 'InvalidEscapeCharacter';\n        case 16 /* InvalidCharacter */: return 'InvalidCharacter';\n    }\n    return '<unknown ParseErrorCode>';\n}\n/**\n * Computes the edits needed to format a JSON document.\n *\n * @param documentText The input text\n * @param range The range to format or `undefined` to format the full content\n * @param options The formatting options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function format(documentText, range, options) {\n    return formatter.format(documentText, range, options);\n}\n/**\n * Computes the edits needed to modify a value in the JSON document.\n *\n * @param documentText The input text\n * @param path The path of the value to change. The path represents either to the document root, a property or an array item.\n * If the path points to an non-existing property or item, it will be created.\n * @param value The new value for the specified property or item. If the value is undefined,\n * the property or item will be removed.\n * @param options Options\n * @returns A list of edit operations describing the formatting changes to the original document. Edits can be either inserts, replacements or\n * removals of text segments. All offsets refer to the original state of the document. No two edits must change or remove the same range of\n * text in the original document. However, multiple edits can have\n * the same offset, for example multiple inserts, or an insert followed by a remove or replace. The order in the array defines which edit is applied first.\n * To apply edits to an input, you can use `applyEdits`.\n */\nexport function modify(text, path, value, options) {\n    return edit.setProperty(text, path, value, options);\n}\n/**\n * Applies edits to a input string.\n */\nexport function applyEdits(text, edits) {\n    for (var i = edits.length - 1; i >= 0; i--) {\n        text = edit.applyEdit(text, edits[i]);\n    }\n    return text;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as vscode from 'vscode';\nimport { Api, getExtensionApi } from './api';\nimport { CommandManager } from './commands/commandManager';\nimport { registerBaseCommands } from './commands/index';\nimport { LanguageConfigurationManager } from './languageFeatures/languageConfiguration';\nimport { createLazyClientHost, lazilyActivateClient } from './lazyClientHost';\nimport { nodeRequestCancellerFactory } from './tsServer/cancellation.electron';\nimport { NodeLogDirectoryProvider } from './tsServer/logDirectoryProvider.electron';\nimport { ChildServerProcess } from './tsServer/serverProcess.electron';\nimport { DiskTypeScriptVersionProvider } from './tsServer/versionProvider.electron';\nimport { ActiveJsTsEditorTracker } from './utils/activeJsTsEditorTracker';\nimport { onCaseInsenitiveFileSystem } from './utils/fileSystem.electron';\nimport { PluginManager } from './utils/plugins';\nimport * as temp from './utils/temp.electron';\n\nexport function activate(\n\tcontext: vscode.ExtensionContext\n): Api {\n\tconst pluginManager = new PluginManager();\n\tcontext.subscriptions.push(pluginManager);\n\n\tconst commandManager = new CommandManager();\n\tcontext.subscriptions.push(commandManager);\n\n\tconst onCompletionAccepted = new vscode.EventEmitter<vscode.CompletionItem>();\n\tcontext.subscriptions.push(onCompletionAccepted);\n\n\tconst logDirectoryProvider = new NodeLogDirectoryProvider(context);\n\tconst versionProvider = new DiskTypeScriptVersionProvider();\n\n\tcontext.subscriptions.push(new LanguageConfigurationManager());\n\n\tconst activeJsTsEditorTracker = new ActiveJsTsEditorTracker();\n\tcontext.subscriptions.push(activeJsTsEditorTracker);\n\n\tconst lazyClientHost = createLazyClientHost(context, onCaseInsenitiveFileSystem(), {\n\t\tpluginManager,\n\t\tcommandManager,\n\t\tlogDirectoryProvider,\n\t\tcancellerFactory: nodeRequestCancellerFactory,\n\t\tversionProvider,\n\t\tprocessFactory: ChildServerProcess,\n\t\tactiveJsTsEditorTracker,\n\t}, item => {\n\t\tonCompletionAccepted.fire(item);\n\t});\n\n\tregisterBaseCommands(commandManager, lazyClientHost, pluginManager, activeJsTsEditorTracker);\n\n\timport('./task/taskProvider').then(module => {\n\t\tcontext.subscriptions.push(module.register(lazyClientHost.map(x => x.serviceClient)));\n\t});\n\n\timport('./languageFeatures/tsconfig').then(module => {\n\t\tcontext.subscriptions.push(module.register());\n\t});\n\n\tcontext.subscriptions.push(lazilyActivateClient(lazyClientHost, pluginManager, activeJsTsEditorTracker));\n\n\treturn getExtensionApi(onCompletionAccepted.event, pluginManager);\n}\n\nexport function deactivate() {\n\tfs.rmdirSync(temp.getInstanceTempDir(), { recursive: true });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { PluginManager } from './utils/plugins';\n\nclass ApiV0 {\n\tpublic constructor(\n\t\tpublic readonly onCompletionAccepted: vscode.Event<vscode.CompletionItem & { metadata?: any }>,\n\t\tprivate readonly _pluginManager: PluginManager,\n\t) { }\n\n\tconfigurePlugin(pluginId: string, configuration: {}): void {\n\t\tthis._pluginManager.setConfiguration(pluginId, configuration);\n\t}\n}\n\nexport interface Api {\n\tgetAPI(version: 0): ApiV0 | undefined;\n}\n\nexport function getExtensionApi(\n\tonCompletionAccepted: vscode.Event<vscode.CompletionItem>,\n\tpluginManager: PluginManager,\n): Api {\n\treturn {\n\t\tgetAPI(version) {\n\t\t\tif (version === 0) {\n\t\t\t\treturn new ApiV0(onCompletionAccepted, pluginManager);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}\n\t};\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport interface Command {\n\treadonly id: string | string[];\n\n\texecute(...args: any[]): void;\n}\n\nexport class CommandManager {\n\tprivate readonly commands = new Map<string, vscode.Disposable>();\n\n\tpublic dispose() {\n\t\tfor (const registration of this.commands.values()) {\n\t\t\tregistration.dispose();\n\t\t}\n\t\tthis.commands.clear();\n\t}\n\n\tpublic register<T extends Command>(command: T): T {\n\t\tfor (const id of Array.isArray(command.id) ? command.id : [command.id]) {\n\t\t\tthis.registerCommand(id, command.execute, command);\n\t\t}\n\t\treturn command;\n\t}\n\n\tprivate registerCommand(id: string, impl: (...args: any[]) => void, thisArg?: any) {\n\t\tif (this.commands.has(id)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.commands.set(id, vscode.commands.registerCommand(id, impl, thisArg));\n\t}\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { ActiveJsTsEditorTracker } from '../utils/activeJsTsEditorTracker';\nimport { Lazy } from '../utils/lazy';\nimport { PluginManager } from '../utils/plugins';\nimport { CommandManager } from './commandManager';\nimport { ConfigurePluginCommand } from './configurePlugin';\nimport { JavaScriptGoToProjectConfigCommand, TypeScriptGoToProjectConfigCommand } from './goToProjectConfiguration';\nimport { LearnMoreAboutRefactoringsCommand } from './learnMoreAboutRefactorings';\nimport { OpenTsServerLogCommand } from './openTsServerLog';\nimport { ReloadJavaScriptProjectsCommand, ReloadTypeScriptProjectsCommand } from './reloadProject';\nimport { RestartTsServerCommand } from './restartTsServer';\nimport { SelectTypeScriptVersionCommand } from './selectTypeScriptVersion';\n\nexport function registerBaseCommands(\n\tcommandManager: CommandManager,\n\tlazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\tpluginManager: PluginManager,\n\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker,\n): void {\n\tcommandManager.register(new ReloadTypeScriptProjectsCommand(lazyClientHost));\n\tcommandManager.register(new ReloadJavaScriptProjectsCommand(lazyClientHost));\n\tcommandManager.register(new SelectTypeScriptVersionCommand(lazyClientHost));\n\tcommandManager.register(new OpenTsServerLogCommand(lazyClientHost));\n\tcommandManager.register(new RestartTsServerCommand(lazyClientHost));\n\tcommandManager.register(new TypeScriptGoToProjectConfigCommand(activeJsTsEditorTracker, lazyClientHost));\n\tcommandManager.register(new JavaScriptGoToProjectConfigCommand(activeJsTsEditorTracker, lazyClientHost));\n\tcommandManager.register(new ConfigurePluginCommand(pluginManager));\n\tcommandManager.register(new LearnMoreAboutRefactoringsCommand());\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PluginManager } from '../utils/plugins';\nimport { Command } from './commandManager';\n\nexport class ConfigurePluginCommand implements Command {\n\tpublic readonly id = '_typescript.configurePlugin';\n\n\tpublic constructor(\n\t\tprivate readonly pluginManager: PluginManager,\n\t) { }\n\n\tpublic execute(pluginId: string, configuration: any) {\n\t\tthis.pluginManager.setConfiguration(pluginId, configuration);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { ActiveJsTsEditorTracker } from '../utils/activeJsTsEditorTracker';\nimport { Lazy } from '../utils/lazy';\nimport { openProjectConfigForFile, ProjectType } from '../utils/tsconfig';\nimport { Command } from './commandManager';\n\nexport class TypeScriptGoToProjectConfigCommand implements Command {\n\tpublic readonly id = 'typescript.goToProjectConfig';\n\n\tpublic constructor(\n\t\tprivate readonly activeJsTsEditorTracker: ActiveJsTsEditorTracker,\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\t) { }\n\n\tpublic execute() {\n\t\tconst editor = this.activeJsTsEditorTracker.activeJsTsEditor;\n\t\tif (editor) {\n\t\t\topenProjectConfigForFile(ProjectType.TypeScript, this.lazyClientHost.value.serviceClient, editor.document.uri);\n\t\t}\n\t}\n}\n\nexport class JavaScriptGoToProjectConfigCommand implements Command {\n\tpublic readonly id = 'javascript.goToProjectConfig';\n\n\tpublic constructor(\n\t\tprivate readonly activeJsTsEditorTracker: ActiveJsTsEditorTracker,\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\t) { }\n\n\tpublic execute() {\n\t\tconst editor = this.activeJsTsEditorTracker.activeJsTsEditor;\n\t\tif (editor) {\n\t\t\topenProjectConfigForFile(ProjectType.JavaScript, this.lazyClientHost.value.serviceClient, editor.document.uri);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class OpenTsServerLogCommand implements Command {\n\tpublic readonly id = 'typescript.openTsServerLog';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.openTsServerLogFile();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class ReloadTypeScriptProjectsCommand implements Command {\n\tpublic readonly id = 'typescript.reloadProjects';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.reloadProjects();\n\t}\n}\n\nexport class ReloadJavaScriptProjectsCommand implements Command {\n\tpublic readonly id = 'javascript.reloadProjects';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.reloadProjects();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class RestartTsServerCommand implements Command {\n\tpublic readonly id = 'typescript.restartTsServer';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.restartTsServer();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport TypeScriptServiceClientHost from '../typeScriptServiceClientHost';\nimport { Lazy } from '../utils/lazy';\nimport { Command } from './commandManager';\n\nexport class SelectTypeScriptVersionCommand implements Command {\n\tpublic readonly id = 'typescript.selectTypeScriptVersion';\n\n\tpublic constructor(\n\t\tprivate readonly lazyClientHost: Lazy<TypeScriptServiceClientHost>\n\t) { }\n\n\tpublic execute() {\n\t\tthis.lazyClientHost.value.serviceClient.showVersionPicker();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* --------------------------------------------------------------------------------------------\n * Includes code from typescript-sublime-plugin project, obtained from\n * https://github.com/microsoft/TypeScript-Sublime-Plugin/blob/master/TypeScript%20Indent.tmPreferences\n * ------------------------------------------------------------------------------------------ */\n\nimport * as vscode from 'vscode';\nimport { Disposable } from '../utils/dispose';\nimport * as languageModeIds from '../utils/languageModeIds';\n\nconst jsTsLanguageConfiguration: vscode.LanguageConfiguration = {\n\tindentationRules: {\n\t\tdecreaseIndentPattern: /^((?!.*?\\/\\*).*\\*\\/)?\\s*[\\}\\]].*$/,\n\t\tincreaseIndentPattern: /^((?!\\/\\/).)*(\\{([^}\"'`]*|(\\t|[ ])*\\/\\/.*)|\\([^)\"'`]*|\\[[^\\]\"'`]*)$/,\n\t\t// e.g.  * ...| or */| or *-----*/|\n\t\tunIndentedLinePattern: /^(\\t|[ ])*[ ]\\*[^/]*\\*\\/\\s*$|^(\\t|[ ])*[ ]\\*\\/\\s*$|^(\\t|[ ])*[ ]\\*([ ]([^\\*]|\\*(?!\\/))*)?$/\n\t},\n\twordPattern: /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g,\n\tonEnterRules: [\n\t\t{\n\t\t\t// e.g. /** | */\n\t\t\tbeforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\n\t\t\tafterText: /^\\s*\\*\\/$/,\n\t\t\taction: { indentAction: vscode.IndentAction.IndentOutdent, appendText: ' * ' },\n\t\t}, {\n\t\t\t// e.g. /** ...|\n\t\t\tbeforeText: /^\\s*\\/\\*\\*(?!\\/)([^\\*]|\\*(?!\\/))*$/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, appendText: ' * ' },\n\t\t}, {\n\t\t\t// e.g.  * ...|\n\t\t\tbeforeText: /^(\\t|[ ])*[ ]\\*([ ]([^\\*]|\\*(?!\\/))*)?$/,\n\t\t\tpreviousLineText: /(?=^(\\s*(\\/\\*\\*|\\*)).*)(?=(?!(\\s*\\*\\/)))/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, appendText: '* ' },\n\t\t}, {\n\t\t\t// e.g.  */|\n\t\t\tbeforeText: /^(\\t|[ ])*[ ]\\*\\/\\s*$/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, removeText: 1 },\n\t\t},\n\t\t{\n\t\t\t// e.g.  *-----*/|\n\t\t\tbeforeText: /^(\\t|[ ])*[ ]\\*[^/]*\\*\\/\\s*$/,\n\t\t\taction: { indentAction: vscode.IndentAction.None, removeText: 1 },\n\t\t},\n\t\t{\n\t\t\tbeforeText: /^\\s*(\\bcase\\s.+:|\\bdefault:)$/,\n\t\t\tafterText: /^(?!\\s*(\\bcase\\b|\\bdefault\\b))/,\n\t\t\taction: { indentAction: vscode.IndentAction.Indent },\n\t\t}\n\t]\n};\n\nconst EMPTY_ELEMENTS: string[] = ['area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'keygen', 'link', 'menuitem', 'meta', 'param', 'source', 'track', 'wbr'];\n\nconst jsxTagsLanguageConfiguration: vscode.LanguageConfiguration = {\n\twordPattern: /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\$\\^\\&\\*\\(\\)\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\s]+)/g,\n\tonEnterRules: [\n\t\t{\n\t\t\tbeforeText: new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join('|')}))([_:\\\\w][_:\\\\w\\\\-.\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n\t\t\tafterText: /^<\\/([_:\\w][_:\\w-.\\d]*)\\s*>$/i,\n\t\t\taction: { indentAction: vscode.IndentAction.IndentOutdent }\n\t\t},\n\t\t{\n\t\t\tbeforeText: new RegExp(`<(?!(?:${EMPTY_ELEMENTS.join('|')}))([_:\\\\w][_:\\\\w\\\\-.\\\\d]*)([^/>]*(?!/)>)[^<]*$`, 'i'),\n\t\t\taction: { indentAction: vscode.IndentAction.Indent }\n\t\t},\n\t\t{\n\t\t\t// `beforeText` only applies to tokens of a given language. Since we are dealing with jsx-tags,\n\t\t\t// make sure we apply to the closing `>` of a tag so that mixed language spans\n\t\t\t// such as `<div onclick={1}>` are handled properly.\n\t\t\tbeforeText: /^>$/,\n\t\t\tafterText: /^<\\/([_:\\w][_:\\w-.\\d]*)\\s*>$/i,\n\t\t\taction: { indentAction: vscode.IndentAction.IndentOutdent }\n\t\t},\n\t\t{\n\t\t\tbeforeText: /^>$/,\n\t\t\taction: { indentAction: vscode.IndentAction.Indent }\n\t\t},\n\t],\n};\n\nexport class LanguageConfigurationManager extends Disposable {\n\n\tconstructor() {\n\t\tsuper();\n\t\tconst standardLanguages = [\n\t\t\tlanguageModeIds.javascript,\n\t\t\tlanguageModeIds.javascriptreact,\n\t\t\tlanguageModeIds.typescript,\n\t\t\tlanguageModeIds.typescriptreact,\n\t\t];\n\t\tfor (const language of standardLanguages) {\n\t\t\tthis.registerConfiguration(language, jsTsLanguageConfiguration);\n\t\t}\n\n\t\tthis.registerConfiguration(languageModeIds.jsxTags, jsxTagsLanguageConfiguration);\n\t}\n\n\tprivate registerConfiguration(language: string, config: vscode.LanguageConfiguration) {\n\t\tthis._register(vscode.languages.setLanguageConfiguration(language, config));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { CommandManager } from './commands/commandManager';\nimport { OngoingRequestCancellerFactory } from './tsServer/cancellation';\nimport { ILogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { TsServerProcessFactory } from './tsServer/server';\nimport { ITypeScriptVersionProvider } from './tsServer/versionProvider';\nimport TypeScriptServiceClientHost from './typeScriptServiceClientHost';\nimport { ActiveJsTsEditorTracker } from './utils/activeJsTsEditorTracker';\nimport { flatten } from './utils/arrays';\nimport * as fileSchemes from './utils/fileSchemes';\nimport { standardLanguageDescriptions } from './utils/languageDescription';\nimport { lazy, Lazy } from './utils/lazy';\nimport ManagedFileContextManager from './utils/managedFileContext';\nimport { PluginManager } from './utils/plugins';\n\nexport function createLazyClientHost(\n\tcontext: vscode.ExtensionContext,\n\tonCaseInsensitiveFileSystem: boolean,\n\tservices: {\n\t\tpluginManager: PluginManager,\n\t\tcommandManager: CommandManager,\n\t\tlogDirectoryProvider: ILogDirectoryProvider,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t\tversionProvider: ITypeScriptVersionProvider,\n\t\tprocessFactory: TsServerProcessFactory,\n\t\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker,\n\t},\n\tonCompletionAccepted: (item: vscode.CompletionItem) => void,\n): Lazy<TypeScriptServiceClientHost> {\n\treturn lazy(() => {\n\t\tconst clientHost = new TypeScriptServiceClientHost(\n\t\t\tstandardLanguageDescriptions,\n\t\t\tcontext,\n\t\t\tonCaseInsensitiveFileSystem,\n\t\t\tservices,\n\t\t\tonCompletionAccepted);\n\n\t\tcontext.subscriptions.push(clientHost);\n\n\t\treturn clientHost;\n\t});\n}\n\nexport function lazilyActivateClient(\n\tlazyClientHost: Lazy<TypeScriptServiceClientHost>,\n\tpluginManager: PluginManager,\n\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker,\n): vscode.Disposable {\n\tconst disposables: vscode.Disposable[] = [];\n\n\tconst supportedLanguage = flatten([\n\t\t...standardLanguageDescriptions.map(x => x.modeIds),\n\t\t...pluginManager.plugins.map(x => x.languages)\n\t]);\n\n\tlet hasActivated = false;\n\tconst maybeActivate = (textDocument: vscode.TextDocument): boolean => {\n\t\tif (!hasActivated && isSupportedDocument(supportedLanguage, textDocument)) {\n\t\t\thasActivated = true;\n\t\t\t// Force activation\n\t\t\tvoid lazyClientHost.value;\n\n\t\t\tdisposables.push(new ManagedFileContextManager(activeJsTsEditorTracker, resource => {\n\t\t\t\treturn lazyClientHost.value.serviceClient.toPath(resource);\n\t\t\t}));\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\tconst didActivate = vscode.workspace.textDocuments.some(maybeActivate);\n\tif (!didActivate) {\n\t\tconst openListener = vscode.workspace.onDidOpenTextDocument(doc => {\n\t\t\tif (maybeActivate(doc)) {\n\t\t\t\topenListener.dispose();\n\t\t\t}\n\t\t}, undefined, disposables);\n\t}\n\n\treturn vscode.Disposable.from(...disposables);\n}\n\nfunction isSupportedDocument(\n\tsupportedLanguage: readonly string[],\n\tdocument: vscode.TextDocument\n): boolean {\n\treturn supportedLanguage.indexOf(document.languageId) >= 0\n\t\t&& !fileSchemes.disabledSchemes.has(document.uri.scheme);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* --------------------------------------------------------------------------------------------\n * Includes code from typescript-sublime-plugin project, obtained from\n * https://github.com/microsoft/TypeScript-Sublime-Plugin/blob/master/TypeScript%20Indent.tmPreferences\n * ------------------------------------------------------------------------------------------ */\n\nimport * as vscode from 'vscode';\nimport { DiagnosticKind } from './languageFeatures/diagnostics';\nimport FileConfigurationManager from './languageFeatures/fileConfigurationManager';\nimport LanguageProvider from './languageProvider';\nimport * as Proto from './protocol';\nimport * as PConst from './protocol.const';\nimport { OngoingRequestCancellerFactory } from './tsServer/cancellation';\nimport { ILogDirectoryProvider } from './tsServer/logDirectoryProvider';\nimport { TsServerProcessFactory } from './tsServer/server';\nimport { ITypeScriptVersionProvider } from './tsServer/versionProvider';\nimport VersionStatus from './tsServer/versionStatus';\nimport TypeScriptServiceClient from './typescriptServiceClient';\nimport { coalesce, flatten } from './utils/arrays';\nimport { CommandManager } from './commands/commandManager';\nimport { Disposable } from './utils/dispose';\nimport * as errorCodes from './utils/errorCodes';\nimport { DiagnosticLanguage, LanguageDescription } from './utils/languageDescription';\nimport { PluginManager } from './utils/plugins';\nimport * as typeConverters from './utils/typeConverters';\nimport TypingsStatus, { AtaProgressReporter } from './utils/typingsStatus';\nimport * as ProjectStatus from './utils/largeProjectStatus';\nimport { ActiveJsTsEditorTracker } from './utils/activeJsTsEditorTracker';\n\n// Style check diagnostics that can be reported as warnings\nconst styleCheckDiagnostics = new Set([\n\t...errorCodes.variableDeclaredButNeverUsed,\n\t...errorCodes.propertyDeclaretedButNeverUsed,\n\t...errorCodes.allImportsAreUnused,\n\t...errorCodes.unreachableCode,\n\t...errorCodes.unusedLabel,\n\t...errorCodes.fallThroughCaseInSwitch,\n\t...errorCodes.notAllCodePathsReturnAValue,\n]);\n\nexport default class TypeScriptServiceClientHost extends Disposable {\n\n\tprivate readonly client: TypeScriptServiceClient;\n\tprivate readonly languages: LanguageProvider[] = [];\n\tprivate readonly languagePerId = new Map<string, LanguageProvider>();\n\n\tprivate readonly typingsStatus: TypingsStatus;\n\n\tprivate readonly fileConfigurationManager: FileConfigurationManager;\n\n\tprivate reportStyleCheckAsWarnings: boolean = true;\n\n\tprivate readonly commandManager: CommandManager;\n\n\tconstructor(\n\t\tdescriptions: LanguageDescription[],\n\t\tcontext: vscode.ExtensionContext,\n\t\tonCaseInsenitiveFileSystem: boolean,\n\t\tservices: {\n\t\t\tpluginManager: PluginManager,\n\t\t\tcommandManager: CommandManager,\n\t\t\tlogDirectoryProvider: ILogDirectoryProvider,\n\t\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t\t\tversionProvider: ITypeScriptVersionProvider,\n\t\t\tprocessFactory: TsServerProcessFactory,\n\t\t\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker,\n\t\t},\n\t\tonCompletionAccepted: (item: vscode.CompletionItem) => void,\n\t) {\n\t\tsuper();\n\n\t\tthis.commandManager = services.commandManager;\n\n\t\tconst allModeIds = this.getAllModeIds(descriptions, services.pluginManager);\n\t\tthis.client = this._register(new TypeScriptServiceClient(\n\t\t\tcontext,\n\t\t\tonCaseInsenitiveFileSystem,\n\t\t\tservices,\n\t\t\tallModeIds));\n\n\t\tthis.client.onDiagnosticsReceived(({ kind, resource, diagnostics }) => {\n\t\t\tthis.diagnosticsReceived(kind, resource, diagnostics);\n\t\t}, null, this._disposables);\n\n\t\tthis.client.onConfigDiagnosticsReceived(diag => this.configFileDiagnosticsReceived(diag), null, this._disposables);\n\t\tthis.client.onResendModelsRequested(() => this.populateService(), null, this._disposables);\n\n\t\tthis._register(new VersionStatus(this.client, services.commandManager, services.activeJsTsEditorTracker));\n\t\tthis._register(new AtaProgressReporter(this.client));\n\t\tthis.typingsStatus = this._register(new TypingsStatus(this.client));\n\t\tthis._register(ProjectStatus.create(this.client));\n\n\t\tthis.fileConfigurationManager = this._register(new FileConfigurationManager(this.client, onCaseInsenitiveFileSystem));\n\n\t\tfor (const description of descriptions) {\n\t\t\tconst manager = new LanguageProvider(this.client, description, this.commandManager, this.client.telemetryReporter, this.typingsStatus, this.fileConfigurationManager, onCompletionAccepted);\n\t\t\tthis.languages.push(manager);\n\t\t\tthis._register(manager);\n\t\t\tthis.languagePerId.set(description.id, manager);\n\t\t}\n\n\t\timport('./languageFeatures/updatePathsOnRename').then(module =>\n\t\t\tthis._register(module.register(this.client, this.fileConfigurationManager, uri => this.handles(uri))));\n\n\t\timport('./languageFeatures/workspaceSymbols').then(module =>\n\t\t\tthis._register(module.register(this.client, allModeIds)));\n\n\t\tthis.client.ensureServiceStarted();\n\t\tthis.client.onReady(() => {\n\t\t\tconst languages = new Set<string>();\n\t\t\tfor (const plugin of services.pluginManager.plugins) {\n\t\t\t\tif (plugin.configNamespace && plugin.languages.length) {\n\t\t\t\t\tthis.registerExtensionLanguageProvider({\n\t\t\t\t\t\tid: plugin.configNamespace,\n\t\t\t\t\t\tmodeIds: Array.from(plugin.languages),\n\t\t\t\t\t\tdiagnosticSource: 'ts-plugin',\n\t\t\t\t\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\t\t\t\t\tdiagnosticOwner: 'typescript',\n\t\t\t\t\t\tisExternal: true\n\t\t\t\t\t}, onCompletionAccepted);\n\t\t\t\t} else {\n\t\t\t\t\tfor (const language of plugin.languages) {\n\t\t\t\t\t\tlanguages.add(language);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (languages.size) {\n\t\t\t\tthis.registerExtensionLanguageProvider({\n\t\t\t\t\tid: 'typescript-plugins',\n\t\t\t\t\tmodeIds: Array.from(languages.values()),\n\t\t\t\t\tdiagnosticSource: 'ts-plugin',\n\t\t\t\t\tdiagnosticLanguage: DiagnosticLanguage.TypeScript,\n\t\t\t\t\tdiagnosticOwner: 'typescript',\n\t\t\t\t\tisExternal: true\n\t\t\t\t}, onCompletionAccepted);\n\t\t\t}\n\t\t});\n\n\t\tthis.client.onTsServerStarted(() => {\n\t\t\tthis.triggerAllDiagnostics();\n\t\t});\n\n\t\tvscode.workspace.onDidChangeConfiguration(this.configurationChanged, this, this._disposables);\n\t\tthis.configurationChanged();\n\t}\n\n\tprivate registerExtensionLanguageProvider(description: LanguageDescription, onCompletionAccepted: (item: vscode.CompletionItem) => void) {\n\t\tconst manager = new LanguageProvider(this.client, description, this.commandManager, this.client.telemetryReporter, this.typingsStatus, this.fileConfigurationManager, onCompletionAccepted);\n\t\tthis.languages.push(manager);\n\t\tthis._register(manager);\n\t\tthis.languagePerId.set(description.id, manager);\n\t}\n\n\tprivate getAllModeIds(descriptions: LanguageDescription[], pluginManager: PluginManager) {\n\t\tconst allModeIds = flatten([\n\t\t\t...descriptions.map(x => x.modeIds),\n\t\t\t...pluginManager.plugins.map(x => x.languages)\n\t\t]);\n\t\treturn allModeIds;\n\t}\n\n\tpublic get serviceClient(): TypeScriptServiceClient {\n\t\treturn this.client;\n\t}\n\n\tpublic reloadProjects(): void {\n\t\tthis.client.executeWithoutWaitingForResponse('reloadProjects', null);\n\t\tthis.triggerAllDiagnostics();\n\t}\n\n\tpublic async handles(resource: vscode.Uri): Promise<boolean> {\n\t\tconst provider = await this.findLanguage(resource);\n\t\tif (provider) {\n\t\t\treturn true;\n\t\t}\n\t\treturn this.client.bufferSyncSupport.handles(resource);\n\t}\n\n\tprivate configurationChanged(): void {\n\t\tconst typescriptConfig = vscode.workspace.getConfiguration('typescript');\n\n\t\tthis.reportStyleCheckAsWarnings = typescriptConfig.get('reportStyleChecksAsWarnings', true);\n\t}\n\n\tprivate async findLanguage(resource: vscode.Uri): Promise<LanguageProvider | undefined> {\n\t\ttry {\n\t\t\tconst doc = await vscode.workspace.openTextDocument(resource);\n\t\t\treturn this.languages.find(language => language.handles(resource, doc));\n\t\t} catch {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprivate triggerAllDiagnostics() {\n\t\tfor (const language of this.languagePerId.values()) {\n\t\t\tlanguage.triggerAllDiagnostics();\n\t\t}\n\t}\n\n\tprivate populateService(): void {\n\t\tthis.fileConfigurationManager.reset();\n\n\t\tfor (const language of this.languagePerId.values()) {\n\t\t\tlanguage.reInitialize();\n\t\t}\n\t}\n\n\tprivate async diagnosticsReceived(\n\t\tkind: DiagnosticKind,\n\t\tresource: vscode.Uri,\n\t\tdiagnostics: Proto.Diagnostic[]\n\t): Promise<void> {\n\t\tconst language = await this.findLanguage(resource);\n\t\tif (language) {\n\t\t\tlanguage.diagnosticsReceived(\n\t\t\t\tkind,\n\t\t\t\tresource,\n\t\t\t\tthis.createMarkerDatas(diagnostics, language.diagnosticSource));\n\t\t}\n\t}\n\n\tprivate configFileDiagnosticsReceived(event: Proto.ConfigFileDiagnosticEvent): void {\n\t\t// See https://github.com/microsoft/TypeScript/issues/10384\n\t\tconst body = event.body;\n\t\tif (!body || !body.diagnostics || !body.configFile) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.findLanguage(this.client.toResource(body.configFile)).then(language => {\n\t\t\tif (!language) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlanguage.configFileDiagnosticsReceived(this.client.toResource(body.configFile), body.diagnostics.map(tsDiag => {\n\t\t\t\tconst range = tsDiag.start && tsDiag.end ? typeConverters.Range.fromTextSpan(tsDiag) : new vscode.Range(0, 0, 0, 1);\n\t\t\t\tconst diagnostic = new vscode.Diagnostic(range, body.diagnostics[0].text, this.getDiagnosticSeverity(tsDiag));\n\t\t\t\tdiagnostic.source = language.diagnosticSource;\n\t\t\t\treturn diagnostic;\n\t\t\t}));\n\t\t});\n\t}\n\n\tprivate createMarkerDatas(\n\t\tdiagnostics: Proto.Diagnostic[],\n\t\tsource: string\n\t): (vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any })[] {\n\t\treturn diagnostics.map(tsDiag => this.tsDiagnosticToVsDiagnostic(tsDiag, source));\n\t}\n\n\tprivate tsDiagnosticToVsDiagnostic(diagnostic: Proto.Diagnostic, source: string): vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any } {\n\t\tconst { start, end, text } = diagnostic;\n\t\tconst range = new vscode.Range(typeConverters.Position.fromLocation(start), typeConverters.Position.fromLocation(end));\n\t\tconst converted = new vscode.Diagnostic(range, text, this.getDiagnosticSeverity(diagnostic));\n\t\tconverted.source = diagnostic.source || source;\n\t\tif (diagnostic.code) {\n\t\t\tconverted.code = diagnostic.code;\n\t\t}\n\t\tconst relatedInformation = diagnostic.relatedInformation;\n\t\tif (relatedInformation) {\n\t\t\tconverted.relatedInformation = coalesce(relatedInformation.map((info: any) => {\n\t\t\t\tconst span = info.span;\n\t\t\t\tif (!span) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn new vscode.DiagnosticRelatedInformation(typeConverters.Location.fromTextSpan(this.client.toResource(span.file), span), info.message);\n\t\t\t}));\n\t\t}\n\t\tconst tags: vscode.DiagnosticTag[] = [];\n\t\tif (diagnostic.reportsUnnecessary) {\n\t\t\ttags.push(vscode.DiagnosticTag.Unnecessary);\n\t\t}\n\t\tif (diagnostic.reportsDeprecated) {\n\t\t\ttags.push(vscode.DiagnosticTag.Deprecated);\n\t\t}\n\t\tconverted.tags = tags.length ? tags : undefined;\n\n\t\tconst resultConverted = converted as vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any };\n\t\tresultConverted.reportUnnecessary = diagnostic.reportsUnnecessary;\n\t\tresultConverted.reportDeprecated = diagnostic.reportsDeprecated;\n\t\treturn resultConverted;\n\t}\n\n\tprivate getDiagnosticSeverity(diagnostic: Proto.Diagnostic): vscode.DiagnosticSeverity {\n\t\tif (this.reportStyleCheckAsWarnings\n\t\t\t&& this.isStyleCheckDiagnostic(diagnostic.code)\n\t\t\t&& diagnostic.category === PConst.DiagnosticCategory.error\n\t\t) {\n\t\t\treturn vscode.DiagnosticSeverity.Warning;\n\t\t}\n\n\t\tswitch (diagnostic.category) {\n\t\t\tcase PConst.DiagnosticCategory.error:\n\t\t\t\treturn vscode.DiagnosticSeverity.Error;\n\n\t\t\tcase PConst.DiagnosticCategory.warning:\n\t\t\t\treturn vscode.DiagnosticSeverity.Warning;\n\n\t\t\tcase PConst.DiagnosticCategory.suggestion:\n\t\t\t\treturn vscode.DiagnosticSeverity.Hint;\n\n\t\t\tdefault:\n\t\t\t\treturn vscode.DiagnosticSeverity.Error;\n\t\t}\n\t}\n\n\tprivate isStyleCheckDiagnostic(code: number | undefined): boolean {\n\t\treturn typeof code === 'number' && styleCheckDiagnostics.has(code);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { Disposable } from '../utils/dispose';\nimport * as fileSchemes from '../utils/fileSchemes';\nimport { isTypeScriptDocument } from '../utils/languageModeIds';\nimport { equals } from '../utils/objects';\nimport { ResourceMap } from '../utils/resourceMap';\n\ninterface FileConfiguration {\n\treadonly formatOptions: Proto.FormatCodeSettings;\n\treadonly preferences: Proto.UserPreferences;\n}\n\nfunction areFileConfigurationsEqual(a: FileConfiguration, b: FileConfiguration): boolean {\n\treturn equals(a, b);\n}\n\nexport default class FileConfigurationManager extends Disposable {\n\tprivate readonly formatOptions: ResourceMap<Promise<FileConfiguration | undefined>>;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis.formatOptions = new ResourceMap(undefined, { onCaseInsenitiveFileSystem });\n\t\tvscode.workspace.onDidCloseTextDocument(textDocument => {\n\t\t\t// When a document gets closed delete the cached formatting options.\n\t\t\t// This is necessary since the tsserver now closed a project when its\n\t\t\t// last file in it closes which drops the stored formatting options\n\t\t\t// as well.\n\t\t\tthis.formatOptions.delete(textDocument.uri);\n\t\t}, undefined, this._disposables);\n\t}\n\n\tpublic async ensureConfigurationForDocument(\n\t\tdocument: vscode.TextDocument,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<void> {\n\t\tconst formattingOptions = this.getFormattingOptions(document);\n\t\tif (formattingOptions) {\n\t\t\treturn this.ensureConfigurationOptions(document, formattingOptions, token);\n\t\t}\n\t}\n\n\tprivate getFormattingOptions(\n\t\tdocument: vscode.TextDocument\n\t): vscode.FormattingOptions | undefined {\n\t\tconst editor = vscode.window.visibleTextEditors.find(editor => editor.document.fileName === document.fileName);\n\t\treturn editor\n\t\t\t? {\n\t\t\t\ttabSize: editor.options.tabSize,\n\t\t\t\tinsertSpaces: editor.options.insertSpaces\n\t\t\t} as vscode.FormattingOptions\n\t\t\t: undefined;\n\t}\n\n\tpublic async ensureConfigurationOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<void> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentOptions = this.getFileOptions(document, options);\n\t\tconst cachedOptions = this.formatOptions.get(document.uri);\n\t\tif (cachedOptions) {\n\t\t\tconst cachedOptionsValue = await cachedOptions;\n\t\t\tif (cachedOptionsValue && areFileConfigurationsEqual(cachedOptionsValue, currentOptions)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tlet resolve: (x: FileConfiguration | undefined) => void;\n\t\tthis.formatOptions.set(document.uri, new Promise<FileConfiguration | undefined>(r => resolve = r));\n\n\t\tconst args: Proto.ConfigureRequestArguments = {\n\t\t\tfile,\n\t\t\t...currentOptions,\n\t\t};\n\t\ttry {\n\t\t\tconst response = await this.client.execute('configure', args, token);\n\t\t\tresolve!(response.type === 'response' ? currentOptions : undefined);\n\t\t} finally {\n\t\t\tresolve!(undefined);\n\t\t}\n\t}\n\n\tpublic async setGlobalConfigurationFromDocument(\n\t\tdocument: vscode.TextDocument,\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<void> {\n\t\tconst formattingOptions = this.getFormattingOptions(document);\n\t\tif (!formattingOptions) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst args: Proto.ConfigureRequestArguments = {\n\t\t\tfile: undefined /*global*/,\n\t\t\t...this.getFileOptions(document, formattingOptions),\n\t\t};\n\t\tawait this.client.execute('configure', args, token);\n\t}\n\n\tpublic reset() {\n\t\tthis.formatOptions.clear();\n\t}\n\n\tprivate getFileOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: vscode.FormattingOptions\n\t): FileConfiguration {\n\t\treturn {\n\t\t\tformatOptions: this.getFormatOptions(document, options),\n\t\t\tpreferences: this.getPreferences(document)\n\t\t};\n\t}\n\n\tprivate getFormatOptions(\n\t\tdocument: vscode.TextDocument,\n\t\toptions: vscode.FormattingOptions\n\t): Proto.FormatCodeSettings {\n\t\tconst config = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript.format' : 'javascript.format',\n\t\t\tdocument.uri);\n\n\t\treturn {\n\t\t\ttabSize: options.tabSize,\n\t\t\tindentSize: options.tabSize,\n\t\t\tconvertTabsToSpaces: options.insertSpaces,\n\t\t\t// We can use \\n here since the editor normalizes later on to its line endings.\n\t\t\tnewLineCharacter: '\\n',\n\t\t\tinsertSpaceAfterCommaDelimiter: config.get<boolean>('insertSpaceAfterCommaDelimiter'),\n\t\t\tinsertSpaceAfterConstructor: config.get<boolean>('insertSpaceAfterConstructor'),\n\t\t\tinsertSpaceAfterSemicolonInForStatements: config.get<boolean>('insertSpaceAfterSemicolonInForStatements'),\n\t\t\tinsertSpaceBeforeAndAfterBinaryOperators: config.get<boolean>('insertSpaceBeforeAndAfterBinaryOperators'),\n\t\t\tinsertSpaceAfterKeywordsInControlFlowStatements: config.get<boolean>('insertSpaceAfterKeywordsInControlFlowStatements'),\n\t\t\tinsertSpaceAfterFunctionKeywordForAnonymousFunctions: config.get<boolean>('insertSpaceAfterFunctionKeywordForAnonymousFunctions'),\n\t\t\tinsertSpaceBeforeFunctionParenthesis: config.get<boolean>('insertSpaceBeforeFunctionParenthesis'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingNonemptyBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingEmptyBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingEmptyBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces'),\n\t\t\tinsertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces: config.get<boolean>('insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces'),\n\t\t\tinsertSpaceAfterTypeAssertion: config.get<boolean>('insertSpaceAfterTypeAssertion'),\n\t\t\tplaceOpenBraceOnNewLineForFunctions: config.get<boolean>('placeOpenBraceOnNewLineForFunctions'),\n\t\t\tplaceOpenBraceOnNewLineForControlBlocks: config.get<boolean>('placeOpenBraceOnNewLineForControlBlocks'),\n\t\t\tsemicolons: config.get<Proto.SemicolonPreference>('semicolons'),\n\t\t};\n\t}\n\n\tprivate getPreferences(document: vscode.TextDocument): Proto.UserPreferences {\n\t\tif (this.client.apiVersion.lt(API.v290)) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst config = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript' : 'javascript',\n\t\t\tdocument.uri);\n\n\t\tconst preferencesConfig = vscode.workspace.getConfiguration(\n\t\t\tisTypeScriptDocument(document) ? 'typescript.preferences' : 'javascript.preferences',\n\t\t\tdocument.uri);\n\n\t\tconst preferences: Proto.UserPreferences & { displayPartsForJSDoc: true } = {\n\t\t\tquotePreference: this.getQuoteStylePreference(preferencesConfig),\n\t\t\timportModuleSpecifierPreference: getImportModuleSpecifierPreference(preferencesConfig),\n\t\t\timportModuleSpecifierEnding: getImportModuleSpecifierEndingPreference(preferencesConfig),\n\t\t\tallowTextChangesInNewFiles: document.uri.scheme === fileSchemes.file,\n\t\t\tprovidePrefixAndSuffixTextForRename: preferencesConfig.get<boolean>('renameShorthandProperties', true) === false ? false : preferencesConfig.get<boolean>('useAliasesForRenames', true),\n\t\t\tallowRenameOfImportPath: true,\n\t\t\tincludeAutomaticOptionalChainCompletions: config.get<boolean>('suggest.includeAutomaticOptionalChainCompletions', true),\n\t\t\tprovideRefactorNotApplicableReason: true,\n\t\t\tgenerateReturnInDocTemplate: config.get<boolean>('suggest.jsdoc.generateReturns', true),\n\t\t\t// @ts-expect-error until 4.3 protocol update\n\t\t\tincludeCompletionsForImportStatements: config.get<boolean>('suggest.includeCompletionsForImportStatements', true),\n\t\t\tincludeCompletionsWithSnippetText: config.get<boolean>('suggest.includeCompletionsWithSnippetText', true),\n\t\t\tdisplayPartsForJSDoc: true,\n\t\t};\n\n\t\treturn preferences;\n\t}\n\n\tprivate getQuoteStylePreference(config: vscode.WorkspaceConfiguration) {\n\t\tswitch (config.get<string>('quoteStyle')) {\n\t\t\tcase 'single': return 'single';\n\t\t\tcase 'double': return 'double';\n\t\t\tdefault: return this.client.apiVersion.gte(API.v333) ? 'auto' : undefined;\n\t\t}\n\t}\n}\n\nfunction getImportModuleSpecifierPreference(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('importModuleSpecifier')) {\n\t\tcase 'project-relative': return 'project-relative';\n\t\tcase 'relative': return 'relative';\n\t\tcase 'non-relative': return 'non-relative';\n\t\tdefault: return undefined;\n\t}\n}\n\nfunction getImportModuleSpecifierEndingPreference(config: vscode.WorkspaceConfiguration) {\n\tswitch (config.get<string>('importModuleSpecifierEnding')) {\n\t\tcase 'minimal': return 'minimal';\n\t\tcase 'index': return 'index';\n\t\tcase 'js': return 'js';\n\t\tdefault: return 'auto';\n\t}\n}\n","exports = module.exports = SemVer;\n\n// The debug function is excluded entirely from the minified version.\n/* nomin */ var debug;\n/* nomin */ if (typeof process === 'object' &&\n    /* nomin */ process.env &&\n    /* nomin */ process.env.NODE_DEBUG &&\n    /* nomin */ /\\bsemver\\b/i.test(process.env.NODE_DEBUG))\n  /* nomin */ debug = function() {\n    /* nomin */ var args = Array.prototype.slice.call(arguments, 0);\n    /* nomin */ args.unshift('SEMVER');\n    /* nomin */ console.log.apply(console, args);\n    /* nomin */ };\n/* nomin */ else\n  /* nomin */ debug = function() {};\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0';\n\nvar MAX_LENGTH = 256;\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16;\n\n// The actual regexps go on exports.re\nvar re = exports.re = [];\nvar src = exports.src = [];\nvar R = 0;\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++;\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*';\nvar NUMERICIDENTIFIERLOOSE = R++;\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+';\n\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++;\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*';\n\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++;\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')';\n\nvar MAINVERSIONLOOSE = R++;\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')';\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++;\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')';\n\nvar PRERELEASEIDENTIFIERLOOSE = R++;\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')';\n\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++;\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))';\n\nvar PRERELEASELOOSE = R++;\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))';\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++;\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+';\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++;\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))';\n\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++;\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?';\n\nsrc[FULL] = '^' + FULLPLAIN + '$';\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?';\n\nvar LOOSE = R++;\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$';\n\nvar GTLT = R++;\nsrc[GTLT] = '((?:<|>)?=?)';\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++;\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*';\nvar XRANGEIDENTIFIER = R++;\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*';\n\nvar XRANGEPLAIN = R++;\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?';\n\nvar XRANGEPLAINLOOSE = R++;\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?';\n\nvar XRANGE = R++;\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$';\nvar XRANGELOOSE = R++;\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$';\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++;\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])';\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++;\nsrc[LONETILDE] = '(?:~>?)';\n\nvar TILDETRIM = R++;\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+';\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g');\nvar tildeTrimReplace = '$1~';\n\nvar TILDE = R++;\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$';\nvar TILDELOOSE = R++;\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$';\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++;\nsrc[LONECARET] = '(?:\\\\^)';\n\nvar CARETTRIM = R++;\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+';\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g');\nvar caretTrimReplace = '$1^';\n\nvar CARET = R++;\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$';\nvar CARETLOOSE = R++;\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$';\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++;\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$';\nvar COMPARATOR = R++;\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$';\n\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++;\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')';\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g');\nvar comparatorTrimReplace = '$1$2$3';\n\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++;\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$';\n\nvar HYPHENRANGELOOSE = R++;\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$';\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++;\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*';\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i]);\n  if (!re[i])\n    re[i] = new RegExp(src[i]);\n}\n\nexports.parse = parse;\nfunction parse(version, loose) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  if (version.length > MAX_LENGTH)\n    return null;\n\n  var r = loose ? re[LOOSE] : re[FULL];\n  if (!r.test(version))\n    return null;\n\n  try {\n    return new SemVer(version, loose);\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.valid = valid;\nfunction valid(version, loose) {\n  var v = parse(version, loose);\n  return v ? v.version : null;\n}\n\n\nexports.clean = clean;\nfunction clean(version, loose) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), loose);\n  return s ? s.version : null;\n}\n\nexports.SemVer = SemVer;\n\nfunction SemVer(version, loose) {\n  if (version instanceof SemVer) {\n    if (version.loose === loose)\n      return version;\n    else\n      version = version.version;\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version);\n  }\n\n  if (version.length > MAX_LENGTH)\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n\n  if (!(this instanceof SemVer))\n    return new SemVer(version, loose);\n\n  debug('SemVer', version, loose);\n  this.loose = loose;\n  var m = version.trim().match(loose ? re[LOOSE] : re[FULL]);\n\n  if (!m)\n    throw new TypeError('Invalid Version: ' + version);\n\n  this.raw = version;\n\n  // these are actually numbers\n  this.major = +m[1];\n  this.minor = +m[2];\n  this.patch = +m[3];\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0)\n    throw new TypeError('Invalid major version')\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0)\n    throw new TypeError('Invalid minor version')\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0)\n    throw new TypeError('Invalid patch version')\n\n  // numberify any prerelease numeric ids\n  if (!m[4])\n    this.prerelease = [];\n  else\n    this.prerelease = m[4].split('.').map(function(id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id;\n        if (num >= 0 && num < MAX_SAFE_INTEGER)\n          return num;\n      }\n      return id;\n    });\n\n  this.build = m[5] ? m[5].split('.') : [];\n  this.format();\n}\n\nSemVer.prototype.format = function() {\n  this.version = this.major + '.' + this.minor + '.' + this.patch;\n  if (this.prerelease.length)\n    this.version += '-' + this.prerelease.join('.');\n  return this.version;\n};\n\nSemVer.prototype.toString = function() {\n  return this.version;\n};\n\nSemVer.prototype.compare = function(other) {\n  debug('SemVer.compare', this.version, this.loose, other);\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return this.compareMain(other) || this.comparePre(other);\n};\n\nSemVer.prototype.compareMain = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch);\n};\n\nSemVer.prototype.comparePre = function(other) {\n  if (!(other instanceof SemVer))\n    other = new SemVer(other, this.loose);\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length)\n    return -1;\n  else if (!this.prerelease.length && other.prerelease.length)\n    return 1;\n  else if (!this.prerelease.length && !other.prerelease.length)\n    return 0;\n\n  var i = 0;\n  do {\n    var a = this.prerelease[i];\n    var b = other.prerelease[i];\n    debug('prerelease compare', i, a, b);\n    if (a === undefined && b === undefined)\n      return 0;\n    else if (b === undefined)\n      return 1;\n    else if (a === undefined)\n      return -1;\n    else if (a === b)\n      continue;\n    else\n      return compareIdentifiers(a, b);\n  } while (++i);\n};\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function(release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor = 0;\n      this.major++;\n      this.inc('pre', identifier);\n      break;\n    case 'preminor':\n      this.prerelease.length = 0;\n      this.patch = 0;\n      this.minor++;\n      this.inc('pre', identifier);\n      break;\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0;\n      this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0)\n        this.inc('patch', identifier);\n      this.inc('pre', identifier);\n      break;\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 || this.patch !== 0 || this.prerelease.length === 0)\n        this.major++;\n      this.minor = 0;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0)\n        this.minor++;\n      this.patch = 0;\n      this.prerelease = [];\n      break;\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0)\n        this.patch++;\n      this.prerelease = [];\n      break;\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0)\n        this.prerelease = [0];\n      else {\n        var i = this.prerelease.length;\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++;\n            i = -2;\n          }\n        }\n        if (i === -1) // didn't increment anything\n          this.prerelease.push(0);\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1]))\n            this.prerelease = [identifier, 0];\n        } else\n          this.prerelease = [identifier, 0];\n      }\n      break;\n\n    default:\n      throw new Error('invalid increment argument: ' + release);\n  }\n  this.format();\n  this.raw = this.version;\n  return this;\n};\n\nexports.inc = inc;\nfunction inc(version, release, loose, identifier) {\n  if (typeof(loose) === 'string') {\n    identifier = loose;\n    loose = undefined;\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version;\n  } catch (er) {\n    return null;\n  }\n}\n\nexports.diff = diff;\nfunction diff(version1, version2) {\n  if (eq(version1, version2)) {\n    return null;\n  } else {\n    var v1 = parse(version1);\n    var v2 = parse(version2);\n    if (v1.prerelease.length || v2.prerelease.length) {\n      for (var key in v1) {\n        if (key === 'major' || key === 'minor' || key === 'patch') {\n          if (v1[key] !== v2[key]) {\n            return 'pre'+key;\n          }\n        }\n      }\n      return 'prerelease';\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return key;\n        }\n      }\n    }\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers;\n\nvar numeric = /^[0-9]+$/;\nfunction compareIdentifiers(a, b) {\n  var anum = numeric.test(a);\n  var bnum = numeric.test(b);\n\n  if (anum && bnum) {\n    a = +a;\n    b = +b;\n  }\n\n  return (anum && !bnum) ? -1 :\n         (bnum && !anum) ? 1 :\n         a < b ? -1 :\n         a > b ? 1 :\n         0;\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers;\nfunction rcompareIdentifiers(a, b) {\n  return compareIdentifiers(b, a);\n}\n\nexports.major = major;\nfunction major(a, loose) {\n  return new SemVer(a, loose).major;\n}\n\nexports.minor = minor;\nfunction minor(a, loose) {\n  return new SemVer(a, loose).minor;\n}\n\nexports.patch = patch;\nfunction patch(a, loose) {\n  return new SemVer(a, loose).patch;\n}\n\nexports.compare = compare;\nfunction compare(a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose));\n}\n\nexports.compareLoose = compareLoose;\nfunction compareLoose(a, b) {\n  return compare(a, b, true);\n}\n\nexports.rcompare = rcompare;\nfunction rcompare(a, b, loose) {\n  return compare(b, a, loose);\n}\n\nexports.sort = sort;\nfunction sort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.compare(a, b, loose);\n  });\n}\n\nexports.rsort = rsort;\nfunction rsort(list, loose) {\n  return list.sort(function(a, b) {\n    return exports.rcompare(a, b, loose);\n  });\n}\n\nexports.gt = gt;\nfunction gt(a, b, loose) {\n  return compare(a, b, loose) > 0;\n}\n\nexports.lt = lt;\nfunction lt(a, b, loose) {\n  return compare(a, b, loose) < 0;\n}\n\nexports.eq = eq;\nfunction eq(a, b, loose) {\n  return compare(a, b, loose) === 0;\n}\n\nexports.neq = neq;\nfunction neq(a, b, loose) {\n  return compare(a, b, loose) !== 0;\n}\n\nexports.gte = gte;\nfunction gte(a, b, loose) {\n  return compare(a, b, loose) >= 0;\n}\n\nexports.lte = lte;\nfunction lte(a, b, loose) {\n  return compare(a, b, loose) <= 0;\n}\n\nexports.cmp = cmp;\nfunction cmp(a, op, b, loose) {\n  var ret;\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a === b;\n      break;\n    case '!==':\n      if (typeof a === 'object') a = a.version;\n      if (typeof b === 'object') b = b.version;\n      ret = a !== b;\n      break;\n    case '': case '=': case '==': ret = eq(a, b, loose); break;\n    case '!=': ret = neq(a, b, loose); break;\n    case '>': ret = gt(a, b, loose); break;\n    case '>=': ret = gte(a, b, loose); break;\n    case '<': ret = lt(a, b, loose); break;\n    case '<=': ret = lte(a, b, loose); break;\n    default: throw new TypeError('Invalid operator: ' + op);\n  }\n  return ret;\n}\n\nexports.Comparator = Comparator;\nfunction Comparator(comp, loose) {\n  if (comp instanceof Comparator) {\n    if (comp.loose === loose)\n      return comp;\n    else\n      comp = comp.value;\n  }\n\n  if (!(this instanceof Comparator))\n    return new Comparator(comp, loose);\n\n  debug('comparator', comp, loose);\n  this.loose = loose;\n  this.parse(comp);\n\n  if (this.semver === ANY)\n    this.value = '';\n  else\n    this.value = this.operator + this.semver.version;\n\n  debug('comp', this);\n}\n\nvar ANY = {};\nComparator.prototype.parse = function(comp) {\n  var r = this.loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var m = comp.match(r);\n\n  if (!m)\n    throw new TypeError('Invalid comparator: ' + comp);\n\n  this.operator = m[1];\n  if (this.operator === '=')\n    this.operator = '';\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2])\n    this.semver = ANY;\n  else\n    this.semver = new SemVer(m[2], this.loose);\n};\n\nComparator.prototype.toString = function() {\n  return this.value;\n};\n\nComparator.prototype.test = function(version) {\n  debug('Comparator.test', version, this.loose);\n\n  if (this.semver === ANY)\n    return true;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  return cmp(version, this.operator, this.semver, this.loose);\n};\n\nComparator.prototype.intersects = function(comp, loose) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required');\n  }\n\n  var rangeTmp;\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, loose);\n    return satisfies(this.value, rangeTmp, loose);\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, loose);\n    return satisfies(comp.semver, rangeTmp, loose);\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>');\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<');\n  var sameSemVer = this.semver.version === comp.semver.version;\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=');\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, loose) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'));\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, loose) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'));\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan;\n};\n\n\nexports.Range = Range;\nfunction Range(range, loose) {\n  if (range instanceof Range) {\n    if (range.loose === loose) {\n      return range;\n    } else {\n      return new Range(range.raw, loose);\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, loose);\n  }\n\n  if (!(this instanceof Range))\n    return new Range(range, loose);\n\n  this.loose = loose;\n\n  // First, split based on boolean or ||\n  this.raw = range;\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function(range) {\n    return this.parseRange(range.trim());\n  }, this).filter(function(c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length;\n  });\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range);\n  }\n\n  this.format();\n}\n\nRange.prototype.format = function() {\n  this.range = this.set.map(function(comps) {\n    return comps.join(' ').trim();\n  }).join('||').trim();\n  return this.range;\n};\n\nRange.prototype.toString = function() {\n  return this.range;\n};\n\nRange.prototype.parseRange = function(range) {\n  var loose = this.loose;\n  range = range.trim();\n  debug('range', range, loose);\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE];\n  range = range.replace(hr, hyphenReplace);\n  debug('hyphen replace', range);\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace);\n  debug('comparator trim', range, re[COMPARATORTRIM]);\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace);\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace);\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ');\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR];\n  var set = range.split(' ').map(function(comp) {\n    return parseComparator(comp, loose);\n  }).join(' ').split(/\\s+/);\n  if (this.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function(comp) {\n      return !!comp.match(compRe);\n    });\n  }\n  set = set.map(function(comp) {\n    return new Comparator(comp, loose);\n  });\n\n  return set;\n};\n\nRange.prototype.intersects = function(range, loose) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required');\n  }\n\n  return this.set.some(function(thisComparators) {\n    return thisComparators.every(function(thisComparator) {\n      return range.set.some(function(rangeComparators) {\n        return rangeComparators.every(function(rangeComparator) {\n          return thisComparator.intersects(rangeComparator, loose);\n        });\n      });\n    });\n  });\n};\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators;\nfunction toComparators(range, loose) {\n  return new Range(range, loose).set.map(function(comp) {\n    return comp.map(function(c) {\n      return c.value;\n    }).join(' ').trim().split(' ');\n  });\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator(comp, loose) {\n  debug('comp', comp);\n  comp = replaceCarets(comp, loose);\n  debug('caret', comp);\n  comp = replaceTildes(comp, loose);\n  debug('tildes', comp);\n  comp = replaceXRanges(comp, loose);\n  debug('xrange', comp);\n  comp = replaceStars(comp, loose);\n  debug('stars', comp);\n  return comp;\n}\n\nfunction isX(id) {\n  return !id || id.toLowerCase() === 'x' || id === '*';\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceTilde(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceTilde(comp, loose) {\n  var r = loose ? re[TILDELOOSE] : re[TILDE];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p))\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    else if (pr) {\n      debug('replaceTilde pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      ret = '>=' + M + '.' + m + '.' + p + pr +\n            ' <' + M + '.' + (+m + 1) + '.0';\n    } else\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0';\n\n    debug('tilde return', ret);\n    return ret;\n  });\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets(comp, loose) {\n  return comp.trim().split(/\\s+/).map(function(comp) {\n    return replaceCaret(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceCaret(comp, loose) {\n  debug('caret', comp, loose);\n  var r = loose ? re[CARETLOOSE] : re[CARET];\n  return comp.replace(r, function(_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr);\n    var ret;\n\n    if (isX(M))\n      ret = '';\n    else if (isX(m))\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    else if (isX(p)) {\n      if (M === '0')\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n      else\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0';\n    } else if (pr) {\n      debug('replaceCaret pr', pr);\n      if (pr.charAt(0) !== '-')\n        pr = '-' + pr;\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p + pr +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p + pr +\n              ' <' + (+M + 1) + '.0.0';\n    } else {\n      debug('no pr');\n      if (M === '0') {\n        if (m === '0')\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1);\n        else\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0';\n      } else\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0';\n    }\n\n    debug('caret return', ret);\n    return ret;\n  });\n}\n\nfunction replaceXRanges(comp, loose) {\n  debug('replaceXRanges', comp, loose);\n  return comp.split(/\\s+/).map(function(comp) {\n    return replaceXRange(comp, loose);\n  }).join(' ');\n}\n\nfunction replaceXRange(comp, loose) {\n  comp = comp.trim();\n  var r = loose ? re[XRANGELOOSE] : re[XRANGE];\n  return comp.replace(r, function(ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr);\n    var xM = isX(M);\n    var xm = xM || isX(m);\n    var xp = xm || isX(p);\n    var anyX = xp;\n\n    if (gtlt === '=' && anyX)\n      gtlt = '';\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0';\n      } else {\n        // nothing is forbidden\n        ret = '*';\n      }\n    } else if (gtlt && anyX) {\n      // replace X with 0\n      if (xm)\n        m = 0;\n      if (xp)\n        p = 0;\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>=';\n        if (xm) {\n          M = +M + 1;\n          m = 0;\n          p = 0;\n        } else if (xp) {\n          m = +m + 1;\n          p = 0;\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<';\n        if (xm)\n          M = +M + 1;\n        else\n          m = +m + 1;\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p;\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0';\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0';\n    }\n\n    debug('xRange return', ret);\n\n    return ret;\n  });\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars(comp, loose) {\n  debug('replaceStars', comp, loose);\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '');\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace($0,\n                       from, fM, fm, fp, fpr, fb,\n                       to, tM, tm, tp, tpr, tb) {\n\n  if (isX(fM))\n    from = '';\n  else if (isX(fm))\n    from = '>=' + fM + '.0.0';\n  else if (isX(fp))\n    from = '>=' + fM + '.' + fm + '.0';\n  else\n    from = '>=' + from;\n\n  if (isX(tM))\n    to = '';\n  else if (isX(tm))\n    to = '<' + (+tM + 1) + '.0.0';\n  else if (isX(tp))\n    to = '<' + tM + '.' + (+tm + 1) + '.0';\n  else if (tpr)\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr;\n  else\n    to = '<=' + to;\n\n  return (from + ' ' + to).trim();\n}\n\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function(version) {\n  if (!version)\n    return false;\n\n  if (typeof version === 'string')\n    version = new SemVer(version, this.loose);\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version))\n      return true;\n  }\n  return false;\n};\n\nfunction testSet(set, version) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version))\n      return false;\n  }\n\n  if (version.prerelease.length) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (var i = 0; i < set.length; i++) {\n      debug(set[i].semver);\n      if (set[i].semver === ANY)\n        continue;\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver;\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch)\n          return true;\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false;\n  }\n\n  return true;\n}\n\nexports.satisfies = satisfies;\nfunction satisfies(version, range, loose) {\n  try {\n    range = new Range(range, loose);\n  } catch (er) {\n    return false;\n  }\n  return range.test(version);\n}\n\nexports.maxSatisfying = maxSatisfying;\nfunction maxSatisfying(versions, range, loose) {\n  var max = null;\n  var maxSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!max || maxSV.compare(v) === -1) { // compare(max, v, true)\n        max = v;\n        maxSV = new SemVer(max, loose);\n      }\n    }\n  })\n  return max;\n}\n\nexports.minSatisfying = minSatisfying;\nfunction minSatisfying(versions, range, loose) {\n  var min = null;\n  var minSV = null;\n  try {\n    var rangeObj = new Range(range, loose);\n  } catch (er) {\n    return null;\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) { // satisfies(v, range, loose)\n      if (!min || minSV.compare(v) === 1) { // compare(min, v, true)\n        min = v;\n        minSV = new SemVer(min, loose);\n      }\n    }\n  })\n  return min;\n}\n\nexports.validRange = validRange;\nfunction validRange(range, loose) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, loose).range || '*';\n  } catch (er) {\n    return null;\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr;\nfunction ltr(version, range, loose) {\n  return outside(version, range, '<', loose);\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr;\nfunction gtr(version, range, loose) {\n  return outside(version, range, '>', loose);\n}\n\nexports.outside = outside;\nfunction outside(version, range, hilo, loose) {\n  version = new SemVer(version, loose);\n  range = new Range(range, loose);\n\n  var gtfn, ltefn, ltfn, comp, ecomp;\n  switch (hilo) {\n    case '>':\n      gtfn = gt;\n      ltefn = lte;\n      ltfn = lt;\n      comp = '>';\n      ecomp = '>=';\n      break;\n    case '<':\n      gtfn = lt;\n      ltefn = gte;\n      ltfn = gt;\n      comp = '<';\n      ecomp = '<=';\n      break;\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"');\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, loose)) {\n    return false;\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i];\n\n    var high = null;\n    var low = null;\n\n    comparators.forEach(function(comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator;\n      low = low || comparator;\n      if (gtfn(comparator.semver, high.semver, loose)) {\n        high = comparator;\n      } else if (ltfn(comparator.semver, low.semver, loose)) {\n        low = comparator;\n      }\n    });\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false;\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false;\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexports.prerelease = prerelease;\nfunction prerelease(version, loose) {\n  var parsed = parse(version, loose);\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null;\n}\n\nexports.intersects = intersects;\nfunction intersects(r1, r2, loose) {\n  r1 = new Range(r1, loose)\n  r2 = new Range(r2, loose)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce;\nfunction coerce(version) {\n  if (version instanceof SemVer)\n    return version;\n\n  if (typeof version !== 'string')\n    return null;\n\n  var match = version.match(re[COERCE]);\n\n  if (match == null)\n    return null;\n\n  return parse((match[1] || '0') + '.' + (match[2] || '0') + '.' + (match[3] || '0')); \n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { basename } from 'path';\nimport * as vscode from 'vscode';\nimport { DiagnosticKind } from './languageFeatures/diagnostics';\nimport FileConfigurationManager from './languageFeatures/fileConfigurationManager';\nimport { CachedResponse } from './tsServer/cachedResponse';\nimport TypeScriptServiceClient from './typescriptServiceClient';\nimport { CommandManager } from './commands/commandManager';\nimport { Disposable } from './utils/dispose';\nimport { DocumentSelector } from './utils/documentSelector';\nimport * as fileSchemes from './utils/fileSchemes';\nimport { LanguageDescription } from './utils/languageDescription';\nimport { TelemetryReporter } from './utils/telemetry';\nimport TypingsStatus from './utils/typingsStatus';\n\n\nconst validateSetting = 'validate.enable';\nconst suggestionSetting = 'suggestionActions.enabled';\n\nexport default class LanguageProvider extends Disposable {\n\n\tconstructor(\n\t\tprivate readonly client: TypeScriptServiceClient,\n\t\tprivate readonly description: LanguageDescription,\n\t\tprivate readonly commandManager: CommandManager,\n\t\tprivate readonly telemetryReporter: TelemetryReporter,\n\t\tprivate readonly typingsStatus: TypingsStatus,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t\tprivate readonly onCompletionAccepted: (item: vscode.CompletionItem) => void,\n\t) {\n\t\tsuper();\n\t\tvscode.workspace.onDidChangeConfiguration(this.configurationChanged, this, this._disposables);\n\t\tthis.configurationChanged();\n\n\t\tclient.onReady(() => this.registerProviders());\n\t}\n\n\tprivate get documentSelector(): DocumentSelector {\n\t\tconst semantic: vscode.DocumentFilter[] = [];\n\t\tconst syntax: vscode.DocumentFilter[] = [];\n\t\tfor (const language of this.description.modeIds) {\n\t\t\tsyntax.push({ language });\n\t\t\tfor (const scheme of fileSchemes.semanticSupportedSchemes) {\n\t\t\t\tsemantic.push({ language, scheme });\n\t\t\t}\n\t\t}\n\n\t\treturn { semantic, syntax };\n\t}\n\n\tprivate async registerProviders(): Promise<void> {\n\t\tconst selector = this.documentSelector;\n\n\t\tconst cachedResponse = new CachedResponse();\n\n\t\tawait Promise.all([\n\t\t\timport('./languageFeatures/callHierarchy').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/codeLens/implementationsCodeLens').then(provider => this._register(provider.register(selector, this.description.id, this.client, cachedResponse))),\n\t\t\timport('./languageFeatures/codeLens/referencesCodeLens').then(provider => this._register(provider.register(selector, this.description.id, this.client, cachedResponse))),\n\t\t\timport('./languageFeatures/completions').then(provider => this._register(provider.register(selector, this.description.id, this.client, this.typingsStatus, this.fileConfigurationManager, this.commandManager, this.telemetryReporter, this.onCompletionAccepted))),\n\t\t\timport('./languageFeatures/definitions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/directiveCommentCompletions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/documentHighlight').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/documentSymbol').then(provider => this._register(provider.register(selector, this.client, cachedResponse))),\n\t\t\timport('./languageFeatures/fileReferences').then(provider => this._register(provider.register(this.client, this.commandManager))),\n\t\t\timport('./languageFeatures/fixAll').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.client.diagnosticsManager))),\n\t\t\timport('./languageFeatures/folding').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/formatting').then(provider => this._register(provider.register(selector, this.description.id, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/hover').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/implementations').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/jsDocCompletions').then(provider => this._register(provider.register(selector, this.description.id, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/organizeImports').then(provider => this._register(provider.register(selector, this.client, this.commandManager, this.fileConfigurationManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/quickFix').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.commandManager, this.client.diagnosticsManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/refactor').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager, this.commandManager, this.telemetryReporter))),\n\t\t\timport('./languageFeatures/references').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/rename').then(provider => this._register(provider.register(selector, this.client, this.fileConfigurationManager))),\n\t\t\timport('./languageFeatures/semanticTokens').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/signatureHelp').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/smartSelect').then(provider => this._register(provider.register(selector, this.client))),\n\t\t\timport('./languageFeatures/tagClosing').then(provider => this._register(provider.register(selector, this.description.id, this.client))),\n\t\t\timport('./languageFeatures/typeDefinitions').then(provider => this._register(provider.register(selector, this.client))),\n\t\t]);\n\t}\n\n\tprivate configurationChanged(): void {\n\t\tconst config = vscode.workspace.getConfiguration(this.id, null);\n\t\tthis.updateValidate(config.get(validateSetting, true));\n\t\tthis.updateSuggestionDiagnostics(config.get(suggestionSetting, true));\n\t}\n\n\tpublic handles(resource: vscode.Uri, doc: vscode.TextDocument): boolean {\n\t\tif (doc && this.description.modeIds.indexOf(doc.languageId) >= 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst base = basename(resource.fsPath);\n\t\treturn !!base && (!!this.description.configFilePattern && this.description.configFilePattern.test(base));\n\t}\n\n\tprivate get id(): string {\n\t\treturn this.description.id;\n\t}\n\n\tpublic get diagnosticSource(): string {\n\t\treturn this.description.diagnosticSource;\n\t}\n\n\tprivate updateValidate(value: boolean) {\n\t\tthis.client.diagnosticsManager.setValidate(this._diagnosticLanguage, value);\n\t}\n\n\tprivate updateSuggestionDiagnostics(value: boolean) {\n\t\tthis.client.diagnosticsManager.setEnableSuggestions(this._diagnosticLanguage, value);\n\t}\n\n\tpublic reInitialize(): void {\n\t\tthis.client.diagnosticsManager.reInitialize();\n\t}\n\n\tpublic triggerAllDiagnostics(): void {\n\t\tthis.client.bufferSyncSupport.requestAllDiagnostics();\n\t}\n\n\tpublic diagnosticsReceived(diagnosticsKind: DiagnosticKind, file: vscode.Uri, diagnostics: (vscode.Diagnostic & { reportUnnecessary: any, reportDeprecated: any })[]): void {\n\t\tconst config = vscode.workspace.getConfiguration(this.id, file);\n\t\tconst reportUnnecessary = config.get<boolean>('showUnused', true);\n\t\tconst reportDeprecated = config.get<boolean>('showDeprecated', true);\n\t\tthis.client.diagnosticsManager.updateDiagnostics(file, this._diagnosticLanguage, diagnosticsKind, diagnostics.filter(diag => {\n\t\t\t// Don't both reporting diagnostics we know will not be rendered\n\t\t\tif (!reportUnnecessary) {\n\t\t\t\tif (diag.reportUnnecessary && diag.severity === vscode.DiagnosticSeverity.Hint) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!reportDeprecated) {\n\t\t\t\tif (diag.reportDeprecated && diag.severity === vscode.DiagnosticSeverity.Hint) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}));\n\t}\n\n\tpublic configFileDiagnosticsReceived(file: vscode.Uri, diagnostics: vscode.Diagnostic[]): void {\n\t\tthis.client.diagnosticsManager.configFileDiagnosticsReceived(file, diagnostics);\n\t}\n\n\tprivate get _diagnosticLanguage() {\n\t\treturn this.description.diagnosticLanguage;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ServerResponse } from '../typescriptService';\n\ntype Resolve<T extends Proto.Response> = () => Promise<ServerResponse.Response<T>>;\n\n/**\n * Caches a class of TS Server request based on document.\n */\nexport class CachedResponse<T extends Proto.Response> {\n\tprivate response?: Promise<ServerResponse.Response<T>>;\n\tprivate version: number = -1;\n\tprivate document: string = '';\n\n\t/**\n\t * Execute a request. May return cached value or resolve the new value\n\t *\n\t * Caller must ensure that all input `resolve` functions return equivilent results (keyed only off of document).\n\t */\n\tpublic execute(\n\t\tdocument: vscode.TextDocument,\n\t\tresolve: Resolve<T>\n\t): Promise<ServerResponse.Response<T>> {\n\t\tif (this.response && this.matches(document)) {\n\t\t\t// Chain so that on cancellation we fall back to the next resolve\n\t\t\treturn this.response = this.response.then(result => result.type === 'cancelled' ? resolve() : result);\n\t\t}\n\t\treturn this.reset(document, resolve);\n\t}\n\n\tprivate matches(document: vscode.TextDocument): boolean {\n\t\treturn this.version === document.version && this.document === document.uri.toString();\n\t}\n\n\tprivate async reset(\n\t\tdocument: vscode.TextDocument,\n\t\tresolve: Resolve<T>\n\t): Promise<ServerResponse.Response<T>> {\n\t\tthis.version = document.version;\n\t\tthis.document = document.uri.toString();\n\t\treturn this.response = resolve();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireSomeCapability, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport { parseKindModifier } from '../utils/modifiers';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptCallHierarchySupport implements vscode.CallHierarchyProvider {\n\tpublic static readonly minVersion = API.v380;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async prepareCallHierarchy(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.CallHierarchyItem | vscode.CallHierarchyItem[] | undefined> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('prepareCallHierarchy', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn Array.isArray(response.body)\n\t\t\t? response.body.map(fromProtocolCallHierarchyItem)\n\t\t\t: fromProtocolCallHierarchyItem(response.body);\n\t}\n\n\tpublic async provideCallHierarchyIncomingCalls(item: vscode.CallHierarchyItem, token: vscode.CancellationToken): Promise<vscode.CallHierarchyIncomingCall[] | undefined> {\n\t\tconst filepath = this.client.toPath(item.uri);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, item.selectionRange.start);\n\t\tconst response = await this.client.execute('provideCallHierarchyIncomingCalls', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(fromProtocolCallHierarchyIncomingCall);\n\t}\n\n\tpublic async provideCallHierarchyOutgoingCalls(item: vscode.CallHierarchyItem, token: vscode.CancellationToken): Promise<vscode.CallHierarchyOutgoingCall[] | undefined> {\n\t\tconst filepath = this.client.toPath(item.uri);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, item.selectionRange.start);\n\t\tconst response = await this.client.execute('provideCallHierarchyOutgoingCalls', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(fromProtocolCallHierarchyOutgoingCall);\n\t}\n}\n\nfunction isSourceFileItem(item: Proto.CallHierarchyItem) {\n\treturn item.kind === PConst.Kind.script || item.kind === PConst.Kind.module && item.selectionSpan.start.line === 1 && item.selectionSpan.start.offset === 1;\n}\n\nfunction fromProtocolCallHierarchyItem(item: Proto.CallHierarchyItem): vscode.CallHierarchyItem {\n\tconst useFileName = isSourceFileItem(item);\n\tconst name = useFileName ? path.basename(item.file) : item.name;\n\tconst detail = useFileName ? vscode.workspace.asRelativePath(path.dirname(item.file)) : item.containerName ?? '';\n\tconst result = new vscode.CallHierarchyItem(\n\t\ttypeConverters.SymbolKind.fromProtocolScriptElementKind(item.kind),\n\t\tname,\n\t\tdetail,\n\t\tvscode.Uri.file(item.file),\n\t\ttypeConverters.Range.fromTextSpan(item.span),\n\t\ttypeConverters.Range.fromTextSpan(item.selectionSpan)\n\t);\n\n\tconst kindModifiers = item.kindModifiers ? parseKindModifier(item.kindModifiers) : undefined;\n\tif (kindModifiers?.has(PConst.KindModifiers.depreacted)) {\n\t\tresult.tags = [vscode.SymbolTag.Deprecated];\n\t}\n\treturn result;\n}\n\nfunction fromProtocolCallHierarchyIncomingCall(item: Proto.CallHierarchyIncomingCall): vscode.CallHierarchyIncomingCall {\n\treturn new vscode.CallHierarchyIncomingCall(\n\t\tfromProtocolCallHierarchyItem(item.from),\n\t\titem.fromSpans.map(typeConverters.Range.fromTextSpan)\n\t);\n}\n\nfunction fromProtocolCallHierarchyOutgoingCall(item: Proto.CallHierarchyOutgoingCall): vscode.CallHierarchyOutgoingCall {\n\treturn new vscode.CallHierarchyOutgoingCall(\n\t\tfromProtocolCallHierarchyItem(item.to),\n\t\titem.fromSpans.map(typeConverters.Range.fromTextSpan)\n\t);\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TypeScriptCallHierarchySupport.minVersion),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerCallHierarchyProvider(selector.semantic,\n\t\t\tnew TypeScriptCallHierarchySupport(client));\n\t});\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function escapeRegExp(text: string) {\n\treturn text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from '../protocol';\nimport { ServerResponse } from '../typescriptService';\n\nexport interface CallbackItem<R> {\n\treadonly onSuccess: (value: R) => void;\n\treadonly onError: (err: Error) => void;\n\treadonly queuingStartTime: number;\n\treadonly isAsync: boolean;\n}\n\nexport class CallbackMap<R extends Proto.Response> {\n\tprivate readonly _callbacks = new Map<number, CallbackItem<ServerResponse.Response<R> | undefined>>();\n\tprivate readonly _asyncCallbacks = new Map<number, CallbackItem<ServerResponse.Response<R> | undefined>>();\n\n\tpublic destroy(cause: string): void {\n\t\tconst cancellation = new ServerResponse.Cancelled(cause);\n\t\tfor (const callback of this._callbacks.values()) {\n\t\t\tcallback.onSuccess(cancellation);\n\t\t}\n\t\tthis._callbacks.clear();\n\t\tfor (const callback of this._asyncCallbacks.values()) {\n\t\t\tcallback.onSuccess(cancellation);\n\t\t}\n\t\tthis._asyncCallbacks.clear();\n\t}\n\n\tpublic add(seq: number, callback: CallbackItem<ServerResponse.Response<R> | undefined>, isAsync: boolean) {\n\t\tif (isAsync) {\n\t\t\tthis._asyncCallbacks.set(seq, callback);\n\t\t} else {\n\t\t\tthis._callbacks.set(seq, callback);\n\t\t}\n\t}\n\n\tpublic fetch(seq: number): CallbackItem<ServerResponse.Response<R> | undefined> | undefined {\n\t\tconst callback = this._callbacks.get(seq) || this._asyncCallbacks.get(seq);\n\t\tthis.delete(seq);\n\t\treturn callback;\n\t}\n\n\tprivate delete(seq: number) {\n\t\tif (!this._callbacks.delete(seq)) {\n\t\t\tthis._asyncCallbacks.delete(seq);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as Proto from '../protocol';\n\nexport enum RequestQueueingType {\n\t/**\n\t * Normal request that is executed in order.\n\t */\n\tNormal = 1,\n\n\t/**\n\t * Request that normal requests jump in front of in the queue.\n\t */\n\tLowPriority = 2,\n\n\t/**\n\t * A fence that blocks request reordering.\n\t *\n\t * Fences are not reordered. Unlike a normal request, a fence will never jump in front of a low priority request\n\t * in the request queue.\n\t */\n\tFence = 3,\n}\n\nexport interface RequestItem {\n\treadonly request: Proto.Request;\n\treadonly expectsResponse: boolean;\n\treadonly isAsync: boolean;\n\treadonly queueingType: RequestQueueingType;\n}\n\nexport class RequestQueue {\n\tprivate readonly queue: RequestItem[] = [];\n\tprivate sequenceNumber: number = 0;\n\n\tpublic get length(): number {\n\t\treturn this.queue.length;\n\t}\n\n\tpublic enqueue(item: RequestItem): void {\n\t\tif (item.queueingType === RequestQueueingType.Normal) {\n\t\t\tlet index = this.queue.length - 1;\n\t\t\twhile (index >= 0) {\n\t\t\t\tif (this.queue[index].queueingType !== RequestQueueingType.LowPriority) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t--index;\n\t\t\t}\n\t\t\tthis.queue.splice(index + 1, 0, item);\n\t\t} else {\n\t\t\t// Only normal priority requests can be reordered. All other requests just go to the end.\n\t\t\tthis.queue.push(item);\n\t\t}\n\t}\n\n\tpublic dequeue(): RequestItem | undefined {\n\t\treturn this.queue.shift();\n\t}\n\n\tpublic tryDeletePendingRequest(seq: number): boolean {\n\t\tfor (let i = 0; i < this.queue.length; i++) {\n\t\t\tif (this.queue[i].request.seq === seq) {\n\t\t\t\tthis.queue.splice(i, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic createRequest(command: string, args: any): Proto.Request {\n\t\treturn {\n\t\t\tseq: this.sequenceNumber++,\n\t\t\ttype: 'request',\n\t\t\tcommand: command,\n\t\t\targuments: args\n\t\t};\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\n\nexport function snippetForFunctionCall(\n\titem: { insertText?: string | vscode.SnippetString; label: string; },\n\tdisplayParts: ReadonlyArray<Proto.SymbolDisplayPart>\n): { snippet: vscode.SnippetString, parameterCount: number } {\n\tif (item.insertText && typeof item.insertText !== 'string') {\n\t\treturn { snippet: item.insertText, parameterCount: 0 };\n\t}\n\n\tconst parameterListParts = getParameterListParts(displayParts);\n\tconst snippet = new vscode.SnippetString();\n\tsnippet.appendText(`${item.insertText || item.label}(`);\n\tappendJoinedPlaceholders(snippet, parameterListParts.parts, ', ');\n\tif (parameterListParts.hasOptionalParameters) {\n\t\tsnippet.appendTabstop();\n\t}\n\tsnippet.appendText(')');\n\tsnippet.appendTabstop(0);\n\treturn { snippet, parameterCount: parameterListParts.parts.length + (parameterListParts.hasOptionalParameters ? 1 : 0) };\n}\n\nfunction appendJoinedPlaceholders(\n\tsnippet: vscode.SnippetString,\n\tparts: ReadonlyArray<Proto.SymbolDisplayPart>,\n\tjoiner: string\n) {\n\tfor (let i = 0; i < parts.length; ++i) {\n\t\tconst paramterPart = parts[i];\n\t\tsnippet.appendPlaceholder(paramterPart.text);\n\t\tif (i !== parts.length - 1) {\n\t\t\tsnippet.appendText(joiner);\n\t\t}\n\t}\n}\n\ninterface ParamterListParts {\n\treadonly parts: ReadonlyArray<Proto.SymbolDisplayPart>;\n\treadonly hasOptionalParameters: boolean;\n}\n\nfunction getParameterListParts(\n\tdisplayParts: ReadonlyArray<Proto.SymbolDisplayPart>\n): ParamterListParts {\n\tconst parts: Proto.SymbolDisplayPart[] = [];\n\tlet isInMethod = false;\n\tlet hasOptionalParameters = false;\n\tlet parenCount = 0;\n\tlet braceCount = 0;\n\n\touter: for (let i = 0; i < displayParts.length; ++i) {\n\t\tconst part = displayParts[i];\n\t\tswitch (part.kind) {\n\t\t\tcase PConst.DisplayPartKind.methodName:\n\t\t\tcase PConst.DisplayPartKind.functionName:\n\t\t\tcase PConst.DisplayPartKind.text:\n\t\t\tcase PConst.DisplayPartKind.propertyName:\n\t\t\t\tif (parenCount === 0 && braceCount === 0) {\n\t\t\t\t\tisInMethod = true;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase PConst.DisplayPartKind.parameterName:\n\t\t\t\tif (parenCount === 1 && braceCount === 0 && isInMethod) {\n\t\t\t\t\t// Only take top level paren names\n\t\t\t\t\tconst next = displayParts[i + 1];\n\t\t\t\t\t// Skip optional parameters\n\t\t\t\t\tconst nameIsFollowedByOptionalIndicator = next && next.text === '?';\n\t\t\t\t\t// Skip this parameter\n\t\t\t\t\tconst nameIsThis = part.text === 'this';\n\t\t\t\t\tif (!nameIsFollowedByOptionalIndicator && !nameIsThis) {\n\t\t\t\t\t\tparts.push(part);\n\t\t\t\t\t}\n\t\t\t\t\thasOptionalParameters = hasOptionalParameters || nameIsFollowedByOptionalIndicator;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase PConst.DisplayPartKind.punctuation:\n\t\t\t\tif (part.text === '(') {\n\t\t\t\t\t++parenCount;\n\t\t\t\t} else if (part.text === ')') {\n\t\t\t\t\t--parenCount;\n\t\t\t\t\tif (parenCount <= 0 && isInMethod) {\n\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t}\n\t\t\t\t} else if (part.text === '...' && parenCount === 1) {\n\t\t\t\t\t// Found rest parmeter. Do not fill in any further arguments\n\t\t\t\t\thasOptionalParameters = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t} else if (part.text === '{') {\n\t\t\t\t\t++braceCount;\n\t\t\t\t} else if (part.text === '}') {\n\t\t\t\t\t--braceCount;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn { hasOptionalParameters, parts };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\nimport DefinitionProviderBase from './definitionProviderBase';\n\nexport default class TypeScriptDefinitionProvider extends DefinitionProviderBase implements vscode.DefinitionProvider {\n\tconstructor(\n\t\tclient: ITypeScriptServiceClient\n\t) {\n\t\tsuper(client);\n\t}\n\n\tpublic async provideDefinition(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.DefinitionLink[] | vscode.Definition | undefined> {\n\t\tif (this.client.apiVersion.gte(API.v270)) {\n\t\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\t\tif (!filepath) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\t\tconst response = await this.client.execute('definitionAndBoundSpan', args, token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst span = response.body.textSpan ? typeConverters.Range.fromTextSpan(response.body.textSpan) : undefined;\n\t\t\treturn response.body.definitions\n\t\t\t\t.map((location): vscode.DefinitionLink => {\n\t\t\t\t\tconst target = typeConverters.Location.fromTextSpan(this.client.toResource(location.file), location);\n\t\t\t\t\tif (location.contextStart && location.contextEnd) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\toriginSelectionRange: span,\n\t\t\t\t\t\t\ttargetRange: typeConverters.Range.fromLocations(location.contextStart, location.contextEnd),\n\t\t\t\t\t\t\ttargetUri: target.uri,\n\t\t\t\t\t\t\ttargetSelectionRange: target.range,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\toriginSelectionRange: span,\n\t\t\t\t\t\ttargetRange: target.range,\n\t\t\t\t\t\ttargetUri: target.uri\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t}\n\n\t\treturn this.getSymbolLocations('definition', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerDefinitionProvider(selector.syntax,\n\t\t\tnew TypeScriptDefinitionProvider(client));\n\t});\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { flatten } from '../utils/arrays';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptDocumentHighlightProvider implements vscode.DocumentHighlightProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideDocumentHighlights(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.DocumentHighlight[]> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst args = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tfilesToSearch: [file]\n\t\t};\n\t\tconst response = await this.client.execute('documentHighlights', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn flatten(\n\t\t\tresponse.body\n\t\t\t\t.filter(highlight => highlight.file === file)\n\t\t\t\t.map(convertDocumentHighlight));\n\t}\n}\n\nfunction convertDocumentHighlight(highlight: Proto.DocumentHighlightsItem): ReadonlyArray<vscode.DocumentHighlight> {\n\treturn highlight.highlightSpans.map(span =>\n\t\tnew vscode.DocumentHighlight(\n\t\t\ttypeConverters.Range.fromTextSpan(span),\n\t\t\tspan.kind === 'writtenReference' ? vscode.DocumentHighlightKind.Write : vscode.DocumentHighlightKind.Read));\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn vscode.languages.registerDocumentHighlightProvider(selector.syntax,\n\t\tnew TypeScriptDocumentHighlightProvider(client));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { CachedResponse } from '../tsServer/cachedResponse';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport { parseKindModifier } from '../utils/modifiers';\nimport * as typeConverters from '../utils/typeConverters';\n\nconst getSymbolKind = (kind: string): vscode.SymbolKind => {\n\tswitch (kind) {\n\t\tcase PConst.Kind.module: return vscode.SymbolKind.Module;\n\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Property;\n\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.const: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.localVariable: return vscode.SymbolKind.Variable;\n\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.localFunction: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.constructSignature: return vscode.SymbolKind.Constructor;\n\t\tcase PConst.Kind.constructorImplementation: return vscode.SymbolKind.Constructor;\n\t}\n\treturn vscode.SymbolKind.Variable;\n};\n\nclass TypeScriptDocumentSymbolProvider implements vscode.DocumentSymbolProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate cachedResponse: CachedResponse<Proto.NavTreeResponse>,\n\t) { }\n\n\tpublic async provideDocumentSymbols(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<vscode.DocumentSymbol[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.FileRequestArgs = { file };\n\t\tconst response = await this.cachedResponse.execute(document, () => this.client.execute('navtree', args, token));\n\t\tif (response.type !== 'response' || !response.body?.childItems) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// The root represents the file. Ignore this when showing in the UI\n\t\tconst result: vscode.DocumentSymbol[] = [];\n\t\tfor (const item of response.body.childItems) {\n\t\t\tTypeScriptDocumentSymbolProvider.convertNavTree(document.uri, result, item);\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate static convertNavTree(\n\t\tresource: vscode.Uri,\n\t\toutput: vscode.DocumentSymbol[],\n\t\titem: Proto.NavigationTree,\n\t): boolean {\n\t\tlet shouldInclude = TypeScriptDocumentSymbolProvider.shouldInclueEntry(item);\n\t\tif (!shouldInclude && !item.childItems?.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst children = new Set(item.childItems || []);\n\t\tfor (const span of item.spans) {\n\t\t\tconst range = typeConverters.Range.fromTextSpan(span);\n\t\t\tconst symbolInfo = TypeScriptDocumentSymbolProvider.convertSymbol(item, range);\n\n\t\t\tfor (const child of children) {\n\t\t\t\tif (child.spans.some(span => !!range.intersection(typeConverters.Range.fromTextSpan(span)))) {\n\t\t\t\t\tconst includedChild = TypeScriptDocumentSymbolProvider.convertNavTree(resource, symbolInfo.children, child);\n\t\t\t\t\tshouldInclude = shouldInclude || includedChild;\n\t\t\t\t\tchildren.delete(child);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (shouldInclude) {\n\t\t\t\toutput.push(symbolInfo);\n\t\t\t}\n\t\t}\n\n\t\treturn shouldInclude;\n\t}\n\n\tprivate static convertSymbol(item: Proto.NavigationTree, range: vscode.Range): vscode.DocumentSymbol {\n\t\tconst selectionRange = item.nameSpan ? typeConverters.Range.fromTextSpan(item.nameSpan) : range;\n\t\tlet label = item.text;\n\n\t\tswitch (item.kind) {\n\t\t\tcase PConst.Kind.memberGetAccessor: label = `(get) ${label}`; break;\n\t\t\tcase PConst.Kind.memberSetAccessor: label = `(set) ${label}`; break;\n\t\t}\n\n\t\tconst symbolInfo = new vscode.DocumentSymbol(\n\t\t\tlabel,\n\t\t\t'',\n\t\t\tgetSymbolKind(item.kind),\n\t\t\trange,\n\t\t\trange.contains(selectionRange) ? selectionRange : range);\n\n\n\t\tconst kindModifiers = parseKindModifier(item.kindModifiers);\n\t\tif (kindModifiers.has(PConst.KindModifiers.depreacted)) {\n\t\t\tsymbolInfo.tags = [vscode.SymbolTag.Deprecated];\n\t\t}\n\n\t\treturn symbolInfo;\n\t}\n\n\tprivate static shouldInclueEntry(item: Proto.NavigationTree | Proto.NavigationBarItem): boolean {\n\t\tif (item.kind === PConst.Kind.alias) {\n\t\t\treturn false;\n\t\t}\n\t\treturn !!(item.text && item.text !== '<function>' && item.text !== '<class>');\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tcachedResponse: CachedResponse<Proto.NavTreeResponse>,\n) {\n\treturn vscode.languages.registerDocumentSymbolProvider(selector.syntax,\n\t\tnew TypeScriptDocumentSymbolProvider(client, cachedResponse), { label: 'TypeScript' });\n}\n",null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { coalesce } from '../utils/arrays';\nimport { conditionalRegistration, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptFoldingProvider implements vscode.FoldingRangeProvider {\n\tpublic static readonly minVersion = API.v280;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tasync provideFoldingRanges(\n\t\tdocument: vscode.TextDocument,\n\t\t_context: vscode.FoldingContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.FoldingRange[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst args: Proto.FileRequestArgs = { file };\n\t\tconst response = await this.client.execute('getOutliningSpans', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn coalesce(response.body.map(span => this.convertOutliningSpan(span, document)));\n\t}\n\n\tprivate convertOutliningSpan(\n\t\tspan: Proto.OutliningSpan,\n\t\tdocument: vscode.TextDocument\n\t): vscode.FoldingRange | undefined {\n\t\tconst range = typeConverters.Range.fromTextSpan(span.textSpan);\n\t\tconst kind = TypeScriptFoldingProvider.getFoldingRangeKind(span);\n\n\t\t// Workaround for #49904\n\t\tif (span.kind === 'comment') {\n\t\t\tconst line = document.lineAt(range.start.line).text;\n\t\t\tif (line.match(/\\/\\/\\s*#endregion/gi)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst start = range.start.line;\n\t\tconst end = this.adjustFoldingEnd(range, document);\n\t\treturn new vscode.FoldingRange(start, end, kind);\n\t}\n\n\tprivate static readonly foldEndPairCharacters = ['}', ']', ')', '`'];\n\n\tprivate adjustFoldingEnd(range: vscode.Range, document: vscode.TextDocument) {\n\t\t// workaround for #47240\n\t\tif (range.end.character > 0) {\n\t\t\tconst foldEndCharacter = document.getText(new vscode.Range(range.end.translate(0, -1), range.end));\n\t\t\tif (TypeScriptFoldingProvider.foldEndPairCharacters.includes(foldEndCharacter)) {\n\t\t\t\treturn Math.max(range.end.line - 1, range.start.line);\n\t\t\t}\n\t\t}\n\n\t\treturn range.end.line;\n\t}\n\n\tprivate static getFoldingRangeKind(span: Proto.OutliningSpan): vscode.FoldingRangeKind | undefined {\n\t\tswitch (span.kind) {\n\t\t\tcase 'comment': return vscode.FoldingRangeKind.Comment;\n\t\t\tcase 'region': return vscode.FoldingRangeKind.Region;\n\t\t\tcase 'imports': return vscode.FoldingRangeKind.Imports;\n\t\t\tcase 'code':\n\t\t\tdefault: return undefined;\n\t\t}\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n): vscode.Disposable {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TypeScriptFoldingProvider.minVersion),\n\t], () => {\n\t\treturn vscode.languages.registerFoldingRangeProvider(selector.syntax,\n\t\t\tnew TypeScriptFoldingProvider(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireConfiguration } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\nimport FileConfigurationManager from './fileConfigurationManager';\n\nclass TypeScriptFormattingProvider implements vscode.DocumentRangeFormattingEditProvider, vscode.OnTypeFormattingEditProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly formattingOptionsManager: FileConfigurationManager\n\t) { }\n\n\tpublic async provideDocumentRangeFormattingEdits(\n\t\tdocument: vscode.TextDocument,\n\t\trange: vscode.Range,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.TextEdit[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tawait this.formattingOptionsManager.ensureConfigurationOptions(document, options, token);\n\n\t\tconst args = typeConverters.Range.toFormattingRequestArgs(file, range);\n\t\tconst response = await this.client.execute('format', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn response.body.map(typeConverters.TextEdit.fromCodeEdit);\n\t}\n\n\tpublic async provideOnTypeFormattingEdits(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\tch: string,\n\t\toptions: vscode.FormattingOptions,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.TextEdit[]> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn [];\n\t\t}\n\n\t\tawait this.formattingOptionsManager.ensureConfigurationOptions(document, options, token);\n\n\t\tconst args: Proto.FormatOnKeyRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(file, position),\n\t\t\tkey: ch\n\t\t};\n\t\tconst response = await this.client.execute('formatonkey', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result: vscode.TextEdit[] = [];\n\t\tfor (const edit of response.body) {\n\t\t\tconst textEdit = typeConverters.TextEdit.fromCodeEdit(edit);\n\t\t\tconst range = textEdit.range;\n\t\t\t// Work around for https://github.com/microsoft/TypeScript/issues/6700.\n\t\t\t// Check if we have an edit at the beginning of the line which only removes white spaces and leaves\n\t\t\t// an empty line. Drop those edits\n\t\t\tif (range.start.character === 0 && range.start.line === range.end.line && textEdit.newText === '') {\n\t\t\t\tconst lText = document.lineAt(range.start.line).text;\n\t\t\t\t// If the edit leaves something on the line keep the edit (note that the end character is exclusive).\n\t\t\t\t// Keep it also if it removes something else than whitespace\n\t\t\t\tif (lText.trim().length > 0 || lText.length > range.end.character) {\n\t\t\t\t\tresult.push(textEdit);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresult.push(textEdit);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tmodeId: string,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager\n) {\n\treturn conditionalRegistration([\n\t\trequireConfiguration(modeId, 'format.enable'),\n\t], () => {\n\t\tconst formattingProvider = new TypeScriptFormattingProvider(client, fileConfigurationManager);\n\t\treturn vscode.Disposable.from(\n\t\t\tvscode.languages.registerOnTypeFormattingEditProvider(selector.syntax, formattingProvider, ';', '}', '\\n'),\n\t\t\tvscode.languages.registerDocumentRangeFormattingEditProvider(selector.syntax, formattingProvider),\n\t\t);\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { localize } from '../tsServer/versionProvider';\nimport { ClientCapability, ITypeScriptServiceClient, ServerType } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport { markdownDocumentation } from '../utils/previewer';\nimport * as typeConverters from '../utils/typeConverters';\nimport FileConfigurationManager from './fileConfigurationManager';\n\n\nclass TypeScriptHoverProvider implements vscode.HoverProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly fileConfigurationManager: FileConfigurationManager,\n\t) { }\n\n\tpublic async provideHover(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Hover | undefined> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst response = await this.client.interruptGetErr(async () => {\n\t\t\tawait this.fileConfigurationManager.ensureConfigurationForDocument(document, token);\n\n\t\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\t\treturn this.client.execute('quickinfo', args, token);\n\t\t});\n\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn new vscode.Hover(\n\t\t\tthis.getContents(document.uri, response.body, response._serverType),\n\t\t\ttypeConverters.Range.fromTextSpan(response.body));\n\t}\n\n\tprivate getContents(\n\t\tresource: vscode.Uri,\n\t\tdata: Proto.QuickInfoResponseBody,\n\t\tsource: ServerType | undefined,\n\t) {\n\t\tconst parts: vscode.MarkedString[] = [];\n\n\t\tif (data.displayString) {\n\t\t\tconst displayParts: string[] = [];\n\n\t\t\tif (source === ServerType.Syntax && this.client.hasCapabilityForResource(resource, ClientCapability.Semantic)) {\n\t\t\t\tdisplayParts.push(\n\t\t\t\t\tlocalize({\n\t\t\t\t\t\tkey: 'loadingPrefix',\n\t\t\t\t\t\tcomment: ['Prefix displayed for hover entries while the server is still loading']\n\t\t\t\t\t}, \"(loading...)\"));\n\t\t\t}\n\n\t\t\tdisplayParts.push(data.displayString);\n\n\t\t\tparts.push({ language: 'typescript', value: displayParts.join(' ') });\n\t\t}\n\t\tparts.push(markdownDocumentation(data.documentation, data.tags, this.client));\n\t\treturn parts;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n\tfileConfigurationManager: FileConfigurationManager,\n): vscode.Disposable {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerHoverProvider(selector.syntax,\n\t\t\tnew TypeScriptHoverProvider(client, fileConfigurationManager));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport DefinitionProviderBase from './definitionProviderBase';\n\nclass TypeScriptImplementationProvider extends DefinitionProviderBase implements vscode.ImplementationProvider {\n\tpublic provideImplementation(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): Promise<vscode.Definition | undefined> {\n\t\treturn this.getSymbolLocations('implementation', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerImplementationProvider(selector.semantic,\n\t\t\tnew TypeScriptImplementationProvider(client));\n\t});\n}\n",null,null,null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptReferenceSupport implements vscode.ReferenceProvider {\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient) { }\n\n\tpublic async provideReferences(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\toptions: vscode.ReferenceContext,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.Location[]> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst args = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\tconst response = await this.client.execute('references', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst result: vscode.Location[] = [];\n\t\tfor (const ref of response.body.refs) {\n\t\t\tif (!options.includeDeclaration && ref.isDefinition) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst url = this.client.toResource(ref.file);\n\t\t\tconst location = typeConverters.Location.fromTextSpan(url, ref);\n\t\t\tresult.push(location);\n\t\t}\n\t\treturn result;\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerReferenceProvider(selector.syntax,\n\t\t\tnew TypeScriptReferenceSupport(client));\n\t});\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// all constants are const\nimport * as vscode from 'vscode';\nimport * as Proto from '../protocol';\nimport { ClientCapability, ExecConfig, ITypeScriptServiceClient, ServerResponse } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireSomeCapability, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\n\n\nconst minTypeScriptVersion = API.fromVersionString(`${VersionRequirement.major}.${VersionRequirement.minor}`);\n\n// as we don't do deltas, for performance reasons, don't compute semantic tokens for documents above that limit\nconst CONTENT_LENGTH_LIMIT = 100000;\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, minTypeScriptVersion),\n\t\trequireSomeCapability(client, ClientCapability.Semantic),\n\t], () => {\n\t\tconst provider = new DocumentSemanticTokensProvider(client);\n\t\treturn vscode.Disposable.from(\n\t\t\t// register only as a range provider\n\t\t\tvscode.languages.registerDocumentRangeSemanticTokensProvider(selector.semantic, provider, provider.getLegend()),\n\t\t);\n\t});\n}\n\n/**\n * Prototype of a DocumentSemanticTokensProvider, relying on the experimental `encodedSemanticClassifications-full` request from the TypeScript server.\n * As the results retured by the TypeScript server are limited, we also add a Typescript plugin (typescript-vscode-sh-plugin) to enrich the returned token.\n * See https://github.com/aeschli/typescript-vscode-sh-plugin.\n */\nclass DocumentSemanticTokensProvider implements vscode.DocumentSemanticTokensProvider, vscode.DocumentRangeSemanticTokensProvider {\n\n\tconstructor(private readonly client: ITypeScriptServiceClient) {\n\t}\n\n\tgetLegend(): vscode.SemanticTokensLegend {\n\t\treturn new vscode.SemanticTokensLegend(tokenTypes, tokenModifiers);\n\t}\n\n\tasync provideDocumentSemanticTokens(document: vscode.TextDocument, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file || document.getText().length > CONTENT_LENGTH_LIMIT) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._provideSemanticTokens(document, { file, start: 0, length: document.getText().length }, token);\n\t}\n\n\tasync provideDocumentRangeSemanticTokens(document: vscode.TextDocument, range: vscode.Range, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file || (document.offsetAt(range.end) - document.offsetAt(range.start) > CONTENT_LENGTH_LIMIT)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst start = document.offsetAt(range.start);\n\t\tconst length = document.offsetAt(range.end) - start;\n\t\treturn this._provideSemanticTokens(document, { file, start, length }, token);\n\t}\n\n\tasync _provideSemanticTokens(document: vscode.TextDocument, requestArg: Proto.EncodedSemanticClassificationsRequestArgs, token: vscode.CancellationToken): Promise<vscode.SemanticTokens | null> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst versionBeforeRequest = document.version;\n\n\t\trequestArg.format = '2020';\n\n\t\tconst response = await (this.client as ExperimentalProtocol.IExtendedTypeScriptServiceClient).execute('encodedSemanticClassifications-full', requestArg, token, {\n\t\t\tcancelOnResourceChange: document.uri\n\t\t});\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst versionAfterRequest = document.version;\n\n\t\tif (versionBeforeRequest !== versionAfterRequest) {\n\t\t\t// cannot convert result's offsets to (line;col) values correctly\n\t\t\t// a new request will come in soon...\n\t\t\t//\n\t\t\t// here we cannot return null, because returning null would remove all semantic tokens.\n\t\t\t// we must throw to indicate that the semantic tokens should not be removed.\n\t\t\t// using the string busy here because it is not logged to error telemetry if the error text contains busy.\n\n\t\t\t// as the new request will come in right after our response, we first wait for the document activity to stop\n\t\t\tawait waitForDocumentChangesToEnd(document);\n\n\t\t\tthrow new vscode.CancellationError();\n\t\t}\n\n\t\tconst tokenSpan = response.body.spans;\n\n\t\tconst builder = new vscode.SemanticTokensBuilder();\n\t\tlet i = 0;\n\t\twhile (i < tokenSpan.length) {\n\t\t\tconst offset = tokenSpan[i++];\n\t\t\tconst length = tokenSpan[i++];\n\t\t\tconst tsClassification = tokenSpan[i++];\n\n\t\t\tlet tokenModifiers = 0;\n\t\t\tlet tokenType = getTokenTypeFromClassification(tsClassification);\n\t\t\tif (tokenType !== undefined) {\n\t\t\t\t// it's a classification as returned by the typescript-vscode-sh-plugin\n\t\t\t\ttokenModifiers = getTokenModifierFromClassification(tsClassification);\n\t\t\t} else {\n\t\t\t\t// typescript-vscode-sh-plugin is not present\n\t\t\t\ttokenType = tokenTypeMap[tsClassification];\n\t\t\t\tif (tokenType === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// we can use the document's range conversion methods because the result is at the same version as the document\n\t\t\tconst startPos = document.positionAt(offset);\n\t\t\tconst endPos = document.positionAt(offset + length);\n\n\t\t\tfor (let line = startPos.line; line <= endPos.line; line++) {\n\t\t\t\tconst startCharacter = (line === startPos.line ? startPos.character : 0);\n\t\t\t\tconst endCharacter = (line === endPos.line ? endPos.character : document.lineAt(line).text.length);\n\t\t\t\tbuilder.push(line, startCharacter, endCharacter - startCharacter, tokenType, tokenModifiers);\n\t\t\t}\n\t\t}\n\t\treturn builder.build();\n\t}\n}\n\nfunction waitForDocumentChangesToEnd(document: vscode.TextDocument) {\n\tlet version = document.version;\n\treturn new Promise<void>((s) => {\n\t\tconst iv = setInterval(_ => {\n\t\t\tif (document.version === version) {\n\t\t\t\tclearInterval(iv);\n\t\t\t\ts();\n\t\t\t}\n\t\t\tversion = document.version;\n\t\t}, 400);\n\t});\n}\n\n\n// typescript encodes type and modifiers in the classification:\n// TSClassification = (TokenType + 1) << 8 + TokenModifier\n\ndeclare const enum TokenType {\n\tclass = 0,\n\tenum = 1,\n\tinterface = 2,\n\tnamespace = 3,\n\ttypeParameter = 4,\n\ttype = 5,\n\tparameter = 6,\n\tvariable = 7,\n\tenumMember = 8,\n\tproperty = 9,\n\tfunction = 10,\n\tmethod = 11,\n\t_ = 12\n}\ndeclare const enum TokenModifier {\n\tdeclaration = 0,\n\tstatic = 1,\n\tasync = 2,\n\treadonly = 3,\n\tdefaultLibrary = 4,\n\tlocal = 5,\n\t_ = 6\n}\ndeclare const enum TokenEncodingConsts {\n\ttypeOffset = 8,\n\tmodifierMask = 255\n}\ndeclare const enum VersionRequirement {\n\tmajor = 3,\n\tminor = 7\n}\n\nfunction getTokenTypeFromClassification(tsClassification: number): number | undefined {\n\tif (tsClassification > TokenEncodingConsts.modifierMask) {\n\t\treturn (tsClassification >> TokenEncodingConsts.typeOffset) - 1;\n\t}\n\treturn undefined;\n}\n\nfunction getTokenModifierFromClassification(tsClassification: number) {\n\treturn tsClassification & TokenEncodingConsts.modifierMask;\n}\n\nconst tokenTypes: string[] = [];\ntokenTypes[TokenType.class] = 'class';\ntokenTypes[TokenType.enum] = 'enum';\ntokenTypes[TokenType.interface] = 'interface';\ntokenTypes[TokenType.namespace] = 'namespace';\ntokenTypes[TokenType.typeParameter] = 'typeParameter';\ntokenTypes[TokenType.type] = 'type';\ntokenTypes[TokenType.parameter] = 'parameter';\ntokenTypes[TokenType.variable] = 'variable';\ntokenTypes[TokenType.enumMember] = 'enumMember';\ntokenTypes[TokenType.property] = 'property';\ntokenTypes[TokenType.function] = 'function';\ntokenTypes[TokenType.method] = 'method';\n\nconst tokenModifiers: string[] = [];\ntokenModifiers[TokenModifier.async] = 'async';\ntokenModifiers[TokenModifier.declaration] = 'declaration';\ntokenModifiers[TokenModifier.readonly] = 'readonly';\ntokenModifiers[TokenModifier.static] = 'static';\ntokenModifiers[TokenModifier.local] = 'local';\ntokenModifiers[TokenModifier.defaultLibrary] = 'defaultLibrary';\n\n// mapping for the original ExperimentalProtocol.ClassificationType from TypeScript (only used when plugin is not available)\nconst tokenTypeMap: number[] = [];\ntokenTypeMap[ExperimentalProtocol.ClassificationType.className] = TokenType.class;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.enumName] = TokenType.enum;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.interfaceName] = TokenType.interface;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.moduleName] = TokenType.namespace;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.typeParameterName] = TokenType.typeParameter;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.typeAliasName] = TokenType.type;\ntokenTypeMap[ExperimentalProtocol.ClassificationType.parameterName] = TokenType.parameter;\n\nnamespace ExperimentalProtocol {\n\n\texport interface IExtendedTypeScriptServiceClient {\n\t\texecute<K extends keyof ExperimentalProtocol.ExtendedTsServerRequests>(\n\t\t\tcommand: K,\n\t\t\targs: ExperimentalProtocol.ExtendedTsServerRequests[K][0],\n\t\t\ttoken: vscode.CancellationToken,\n\t\t\tconfig?: ExecConfig\n\t\t): Promise<ServerResponse.Response<ExperimentalProtocol.ExtendedTsServerRequests[K][1]>>;\n\t}\n\n\t/**\n\t * A request to get encoded semantic classifications for a span in the file\n\t */\n\texport interface EncodedSemanticClassificationsRequest extends Proto.FileRequest {\n\t\targuments: EncodedSemanticClassificationsRequestArgs;\n\t}\n\n\t/**\n\t * Arguments for EncodedSemanticClassificationsRequest request.\n\t */\n\texport interface EncodedSemanticClassificationsRequestArgs extends Proto.FileRequestArgs {\n\t\t/**\n\t\t * Start position of the span.\n\t\t */\n\t\tstart: number;\n\t\t/**\n\t\t * Length of the span.\n\t\t */\n\t\tlength: number;\n\t}\n\n\texport const enum EndOfLineState {\n\t\tNone,\n\t\tInMultiLineCommentTrivia,\n\t\tInSingleQuoteStringLiteral,\n\t\tInDoubleQuoteStringLiteral,\n\t\tInTemplateHeadOrNoSubstitutionTemplate,\n\t\tInTemplateMiddleOrTail,\n\t\tInTemplateSubstitutionPosition,\n\t}\n\n\texport const enum ClassificationType {\n\t\tcomment = 1,\n\t\tidentifier = 2,\n\t\tkeyword = 3,\n\t\tnumericLiteral = 4,\n\t\toperator = 5,\n\t\tstringLiteral = 6,\n\t\tregularExpressionLiteral = 7,\n\t\twhiteSpace = 8,\n\t\ttext = 9,\n\t\tpunctuation = 10,\n\t\tclassName = 11,\n\t\tenumName = 12,\n\t\tinterfaceName = 13,\n\t\tmoduleName = 14,\n\t\ttypeParameterName = 15,\n\t\ttypeAliasName = 16,\n\t\tparameterName = 17,\n\t\tdocCommentTagName = 18,\n\t\tjsxOpenTagName = 19,\n\t\tjsxCloseTagName = 20,\n\t\tjsxSelfClosingTagName = 21,\n\t\tjsxAttribute = 22,\n\t\tjsxText = 23,\n\t\tjsxAttributeStringLiteralValue = 24,\n\t\tbigintLiteral = 25,\n\t}\n\n\texport interface EncodedSemanticClassificationsResponse extends Proto.Response {\n\t\tbody?: {\n\t\t\tendOfLineState: EndOfLineState;\n\t\t\tspans: number[];\n\t\t};\n\t}\n\n\texport interface ExtendedTsServerRequests {\n\t\t'encodedSemanticClassifications-full': [ExperimentalProtocol.EncodedSemanticClassificationsRequestArgs, ExperimentalProtocol.EncodedSemanticClassificationsResponse];\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as Previewer from '../utils/previewer';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TypeScriptSignatureHelpProvider implements vscode.SignatureHelpProvider {\n\n\tpublic static readonly triggerCharacters = ['(', ',', '<'];\n\tpublic static readonly retriggerCharacters = [')'];\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideSignatureHelp(\n\t\tdocument: vscode.TextDocument,\n\t\tposition: vscode.Position,\n\t\ttoken: vscode.CancellationToken,\n\t\tcontext: vscode.SignatureHelpContext,\n\t): Promise<vscode.SignatureHelp | undefined> {\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.SignatureHelpRequestArgs = {\n\t\t\t...typeConverters.Position.toFileLocationRequestArgs(filepath, position),\n\t\t\ttriggerReason: toTsTriggerReason(context)\n\t\t};\n\t\tconst response = await this.client.interruptGetErr(() => this.client.execute('signatureHelp', args, token));\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst info = response.body;\n\t\tconst result = new vscode.SignatureHelp();\n\t\tresult.signatures = info.items.map(signature => this.convertSignature(signature));\n\t\tresult.activeSignature = this.getActiveSignature(context, info, result.signatures);\n\t\tresult.activeParameter = this.getActiveParameter(info);\n\n\t\treturn result;\n\t}\n\n\tprivate getActiveSignature(context: vscode.SignatureHelpContext, info: Proto.SignatureHelpItems, signatures: readonly vscode.SignatureInformation[]): number {\n\t\t// Try matching the previous active signature's label to keep it selected\n\t\tconst previouslyActiveSignature = context.activeSignatureHelp?.signatures[context.activeSignatureHelp.activeSignature];\n\t\tif (previouslyActiveSignature && context.isRetrigger) {\n\t\t\tconst existingIndex = signatures.findIndex(other => other.label === previouslyActiveSignature?.label);\n\t\t\tif (existingIndex >= 0) {\n\t\t\t\treturn existingIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn info.selectedItemIndex;\n\t}\n\n\tprivate getActiveParameter(info: Proto.SignatureHelpItems): number {\n\t\tconst activeSignature = info.items[info.selectedItemIndex];\n\t\tif (activeSignature && activeSignature.isVariadic) {\n\t\t\treturn Math.min(info.argumentIndex, activeSignature.parameters.length - 1);\n\t\t}\n\t\treturn info.argumentIndex;\n\t}\n\n\tprivate convertSignature(item: Proto.SignatureHelpItem) {\n\t\tconst signature = new vscode.SignatureInformation(\n\t\t\tPreviewer.plainWithLinks(item.prefixDisplayParts, this.client),\n\t\t\tPreviewer.markdownDocumentation(item.documentation, item.tags.filter(x => x.name !== 'param'), this.client));\n\n\t\tlet textIndex = signature.label.length;\n\t\tconst separatorLabel = Previewer.plainWithLinks(item.separatorDisplayParts, this.client);\n\t\tfor (let i = 0; i < item.parameters.length; ++i) {\n\t\t\tconst parameter = item.parameters[i];\n\t\t\tconst label = Previewer.plainWithLinks(parameter.displayParts, this.client);\n\n\t\t\tsignature.parameters.push(\n\t\t\t\tnew vscode.ParameterInformation(\n\t\t\t\t\t[textIndex, textIndex + label.length],\n\t\t\t\t\tPreviewer.markdownDocumentation(parameter.documentation, [], this.client)));\n\n\t\t\ttextIndex += label.length;\n\t\t\tsignature.label += label;\n\n\t\t\tif (i !== item.parameters.length - 1) {\n\t\t\t\tsignature.label += separatorLabel;\n\t\t\t\ttextIndex += separatorLabel.length;\n\t\t\t}\n\t\t}\n\n\t\tsignature.label += Previewer.plainWithLinks(item.suffixDisplayParts, this.client);\n\t\treturn signature;\n\t}\n}\n\nfunction toTsTriggerReason(context: vscode.SignatureHelpContext): Proto.SignatureHelpTriggerReason {\n\tswitch (context.triggerKind) {\n\t\tcase vscode.SignatureHelpTriggerKind.TriggerCharacter:\n\t\t\tif (context.triggerCharacter) {\n\t\t\t\tif (context.isRetrigger) {\n\t\t\t\t\treturn { kind: 'retrigger', triggerCharacter: context.triggerCharacter as any };\n\t\t\t\t} else {\n\t\t\t\t\treturn { kind: 'characterTyped', triggerCharacter: context.triggerCharacter as any };\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn { kind: 'invoked' };\n\t\t\t}\n\n\t\tcase vscode.SignatureHelpTriggerKind.ContentChange:\n\t\t\treturn context.isRetrigger ? { kind: 'retrigger' } : { kind: 'invoked' };\n\n\t\tcase vscode.SignatureHelpTriggerKind.Invoke:\n\t\tdefault:\n\t\t\treturn { kind: 'invoked' };\n\t}\n}\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerSignatureHelpProvider(selector.syntax,\n\t\t\tnew TypeScriptSignatureHelpProvider(client), {\n\t\t\ttriggerCharacters: TypeScriptSignatureHelpProvider.triggerCharacters,\n\t\t\tretriggerCharacters: TypeScriptSignatureHelpProvider.retriggerCharacters\n\t\t});\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireMinVersion } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass SmartSelection implements vscode.SelectionRangeProvider {\n\tpublic static readonly minVersion = API.v350;\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) { }\n\n\tpublic async provideSelectionRanges(\n\t\tdocument: vscode.TextDocument,\n\t\tpositions: vscode.Position[],\n\t\ttoken: vscode.CancellationToken,\n\t): Promise<vscode.SelectionRange[] | undefined> {\n\t\tconst file = this.client.toOpenedFilePath(document);\n\t\tif (!file) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst args: Proto.SelectionRangeRequestArgs = {\n\t\t\tfile,\n\t\t\tlocations: positions.map(typeConverters.Position.toLocation)\n\t\t};\n\t\tconst response = await this.client.execute('selectionRange', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn response.body.map(SmartSelection.convertSelectionRange);\n\t}\n\n\tprivate static convertSelectionRange(\n\t\tselectionRange: Proto.SelectionRange\n\t): vscode.SelectionRange {\n\t\treturn new vscode.SelectionRange(\n\t\t\ttypeConverters.Range.fromTextSpan(selectionRange.textSpan),\n\t\t\tselectionRange.parent ? SmartSelection.convertSelectionRange(selectionRange.parent) : undefined,\n\t\t);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, SmartSelection.minVersion),\n\t], () => {\n\t\treturn vscode.languages.registerSelectionRangeProvider(selector.syntax, new SmartSelection(client));\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport { conditionalRegistration, requireMinVersion, requireConfiguration, Condition } from '../utils/dependentRegistration';\nimport { Disposable } from '../utils/dispose';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport * as typeConverters from '../utils/typeConverters';\n\nclass TagClosing extends Disposable {\n\tpublic static readonly minVersion = API.v300;\n\n\tprivate _disposed = false;\n\tprivate _timeout: NodeJS.Timer | undefined = undefined;\n\tprivate _cancel: vscode.CancellationTokenSource | undefined = undefined;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient\n\t) {\n\t\tsuper();\n\t\tvscode.workspace.onDidChangeTextDocument(\n\t\t\tevent => this.onDidChangeTextDocument(event.document, event.contentChanges),\n\t\t\tnull,\n\t\t\tthis._disposables);\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\t\tthis._disposed = true;\n\n\t\tif (this._timeout) {\n\t\t\tclearTimeout(this._timeout);\n\t\t\tthis._timeout = undefined;\n\t\t}\n\n\t\tif (this._cancel) {\n\t\t\tthis._cancel.cancel();\n\t\t\tthis._cancel.dispose();\n\t\t\tthis._cancel = undefined;\n\t\t}\n\t}\n\n\tprivate onDidChangeTextDocument(\n\t\tdocument: vscode.TextDocument,\n\t\tchanges: readonly vscode.TextDocumentContentChangeEvent[]\n\t) {\n\t\tconst activeDocument = vscode.window.activeTextEditor && vscode.window.activeTextEditor.document;\n\t\tif (document !== activeDocument || changes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst filepath = this.client.toOpenedFilePath(document);\n\t\tif (!filepath) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof this._timeout !== 'undefined') {\n\t\t\tclearTimeout(this._timeout);\n\t\t}\n\n\t\tif (this._cancel) {\n\t\t\tthis._cancel.cancel();\n\t\t\tthis._cancel.dispose();\n\t\t\tthis._cancel = undefined;\n\t\t}\n\n\t\tconst lastChange = changes[changes.length - 1];\n\t\tconst lastCharacter = lastChange.text[lastChange.text.length - 1];\n\t\tif (lastChange.rangeLength > 0 || lastCharacter !== '>' && lastCharacter !== '/') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst priorCharacter = lastChange.range.start.character > 0\n\t\t\t? document.getText(new vscode.Range(lastChange.range.start.translate({ characterDelta: -1 }), lastChange.range.start))\n\t\t\t: '';\n\t\tif (priorCharacter === '>') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst version = document.version;\n\t\tthis._timeout = setTimeout(async () => {\n\t\t\tthis._timeout = undefined;\n\n\t\t\tif (this._disposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst addedLines = lastChange.text.split(/\\r\\n|\\n/g);\n\t\t\tconst position = addedLines.length <= 1\n\t\t\t\t? lastChange.range.start.translate({ characterDelta: lastChange.text.length })\n\t\t\t\t: new vscode.Position(lastChange.range.start.line + addedLines.length - 1, addedLines[addedLines.length - 1].length);\n\n\t\t\tconst args: Proto.JsxClosingTagRequestArgs = typeConverters.Position.toFileLocationRequestArgs(filepath, position);\n\t\t\tthis._cancel = new vscode.CancellationTokenSource();\n\t\t\tconst response = await this.client.execute('jsxClosingTag', args, this._cancel.token);\n\t\t\tif (response.type !== 'response' || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._disposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst activeEditor = vscode.window.activeTextEditor;\n\t\t\tif (!activeEditor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst insertion = response.body;\n\t\t\tconst activeDocument = activeEditor.document;\n\t\t\tif (document === activeDocument && activeDocument.version === version) {\n\t\t\t\tactiveEditor.insertSnippet(\n\t\t\t\t\tthis.getTagSnippet(insertion),\n\t\t\t\t\tthis.getInsertionPositions(activeEditor, position));\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\tprivate getTagSnippet(closingTag: Proto.TextInsertion): vscode.SnippetString {\n\t\tconst snippet = new vscode.SnippetString();\n\t\tsnippet.appendPlaceholder('', 0);\n\t\tsnippet.appendText(closingTag.newText);\n\t\treturn snippet;\n\t}\n\n\tprivate getInsertionPositions(editor: vscode.TextEditor, position: vscode.Position) {\n\t\tconst activeSelectionPositions = editor.selections.map(s => s.active);\n\t\treturn activeSelectionPositions.some(p => p.isEqual(position))\n\t\t\t? activeSelectionPositions\n\t\t\t: position;\n\t}\n}\n\nfunction requireActiveDocument(\n\tselector: vscode.DocumentSelector\n) {\n\treturn new Condition(\n\t\t() => {\n\t\t\tconst editor = vscode.window.activeTextEditor;\n\t\t\treturn !!(editor && vscode.languages.match(selector, editor.document));\n\t\t},\n\t\thandler => {\n\t\t\treturn vscode.Disposable.from(\n\t\t\t\tvscode.window.onDidChangeActiveTextEditor(handler),\n\t\t\t\tvscode.workspace.onDidOpenTextDocument(handler));\n\t\t});\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tmodeId: string,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireMinVersion(client, TagClosing.minVersion),\n\t\trequireConfiguration(modeId, 'autoClosingTags'),\n\t\trequireActiveDocument(selector.syntax)\n\t], () => new TagClosing(client));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ClientCapability, ITypeScriptServiceClient } from '../typescriptService';\nimport { conditionalRegistration, requireSomeCapability } from '../utils/dependentRegistration';\nimport { DocumentSelector } from '../utils/documentSelector';\nimport DefinitionProviderBase from './definitionProviderBase';\n\nexport default class TypeScriptTypeDefinitionProvider extends DefinitionProviderBase implements vscode.TypeDefinitionProvider {\n\tpublic provideTypeDefinition(document: vscode.TextDocument, position: vscode.Position, token: vscode.CancellationToken): Promise<vscode.Definition | undefined> {\n\t\treturn this.getSymbolLocations('typeDefinition', document, position, token);\n\t}\n}\n\nexport function register(\n\tselector: DocumentSelector,\n\tclient: ITypeScriptServiceClient,\n) {\n\treturn conditionalRegistration([\n\t\trequireSomeCapability(client, ClientCapability.EnhancedSyntax, ClientCapability.Semantic),\n\t], () => {\n\t\treturn vscode.languages.registerTypeDefinitionProvider(selector.syntax,\n\t\t\tnew TypeScriptTypeDefinitionProvider(client));\n\t});\n}\n",null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ResourceMap } from '../utils/resourceMap';\nimport { DiagnosticLanguage } from '../utils/languageDescription';\nimport * as arrays from '../utils/arrays';\nimport { Disposable } from '../utils/dispose';\n\nfunction diagnosticsEquals(a: vscode.Diagnostic, b: vscode.Diagnostic): boolean {\n\tif (a === b) {\n\t\treturn true;\n\t}\n\n\treturn a.code === b.code\n\t\t&& a.message === b.message\n\t\t&& a.severity === b.severity\n\t\t&& a.source === b.source\n\t\t&& a.range.isEqual(b.range)\n\t\t&& arrays.equals(a.relatedInformation || arrays.empty, b.relatedInformation || arrays.empty, (a, b) => {\n\t\t\treturn a.message === b.message\n\t\t\t\t&& a.location.range.isEqual(b.location.range)\n\t\t\t\t&& a.location.uri.fsPath === b.location.uri.fsPath;\n\t\t})\n\t\t&& arrays.equals(a.tags || arrays.empty, b.tags || arrays.empty);\n}\n\nexport const enum DiagnosticKind {\n\tSyntax,\n\tSemantic,\n\tSuggestion,\n}\n\nclass FileDiagnostics {\n\tprivate readonly _diagnostics = new Map<DiagnosticKind, ReadonlyArray<vscode.Diagnostic>>();\n\n\tconstructor(\n\t\tpublic readonly file: vscode.Uri,\n\t\tpublic language: DiagnosticLanguage\n\t) { }\n\n\tpublic updateDiagnostics(\n\t\tlanguage: DiagnosticLanguage,\n\t\tkind: DiagnosticKind,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>\n\t): boolean {\n\t\tif (language !== this.language) {\n\t\t\tthis._diagnostics.clear();\n\t\t\tthis.language = language;\n\t\t}\n\n\t\tconst existing = this._diagnostics.get(kind);\n\t\tif (arrays.equals(existing || arrays.empty, diagnostics, diagnosticsEquals)) {\n\t\t\t// No need to update\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._diagnostics.set(kind, diagnostics);\n\t\treturn true;\n\t}\n\n\tpublic getDiagnostics(settings: DiagnosticSettings): vscode.Diagnostic[] {\n\t\tif (!settings.getValidate(this.language)) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn [\n\t\t\t...this.get(DiagnosticKind.Syntax),\n\t\t\t...this.get(DiagnosticKind.Semantic),\n\t\t\t...this.getSuggestionDiagnostics(settings),\n\t\t];\n\t}\n\n\tprivate getSuggestionDiagnostics(settings: DiagnosticSettings) {\n\t\tconst enableSuggestions = settings.getEnableSuggestions(this.language);\n\t\treturn this.get(DiagnosticKind.Suggestion).filter(x => {\n\t\t\tif (!enableSuggestions) {\n\t\t\t\t// Still show unused\n\t\t\t\treturn x.tags && (x.tags.includes(vscode.DiagnosticTag.Unnecessary) || x.tags.includes(vscode.DiagnosticTag.Deprecated));\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tprivate get(kind: DiagnosticKind): ReadonlyArray<vscode.Diagnostic> {\n\t\treturn this._diagnostics.get(kind) || [];\n\t}\n}\n\ninterface LanguageDiagnosticSettings {\n\treadonly validate: boolean;\n\treadonly enableSuggestions: boolean;\n}\n\nfunction areLanguageDiagnosticSettingsEqual(currentSettings: LanguageDiagnosticSettings, newSettings: LanguageDiagnosticSettings): boolean {\n\treturn currentSettings.validate === newSettings.validate\n\t\t&& currentSettings.enableSuggestions && currentSettings.enableSuggestions;\n}\n\nclass DiagnosticSettings {\n\tprivate static readonly defaultSettings: LanguageDiagnosticSettings = {\n\t\tvalidate: true,\n\t\tenableSuggestions: true\n\t};\n\n\tprivate readonly _languageSettings = new Map<DiagnosticLanguage, LanguageDiagnosticSettings>();\n\n\tpublic getValidate(language: DiagnosticLanguage): boolean {\n\t\treturn this.get(language).validate;\n\t}\n\n\tpublic setValidate(language: DiagnosticLanguage, value: boolean): boolean {\n\t\treturn this.update(language, settings => ({\n\t\t\tvalidate: value,\n\t\t\tenableSuggestions: settings.enableSuggestions,\n\t\t}));\n\t}\n\n\tpublic getEnableSuggestions(language: DiagnosticLanguage): boolean {\n\t\treturn this.get(language).enableSuggestions;\n\t}\n\n\tpublic setEnableSuggestions(language: DiagnosticLanguage, value: boolean): boolean {\n\t\treturn this.update(language, settings => ({\n\t\t\tvalidate: settings.validate,\n\t\t\tenableSuggestions: value\n\t\t}));\n\t}\n\n\tprivate get(language: DiagnosticLanguage): LanguageDiagnosticSettings {\n\t\treturn this._languageSettings.get(language) || DiagnosticSettings.defaultSettings;\n\t}\n\n\tprivate update(language: DiagnosticLanguage, f: (x: LanguageDiagnosticSettings) => LanguageDiagnosticSettings): boolean {\n\t\tconst currentSettings = this.get(language);\n\t\tconst newSettings = f(currentSettings);\n\t\tthis._languageSettings.set(language, newSettings);\n\t\treturn areLanguageDiagnosticSettingsEqual(currentSettings, newSettings);\n\t}\n}\n\nexport class DiagnosticsManager extends Disposable {\n\tprivate readonly _diagnostics: ResourceMap<FileDiagnostics>;\n\tprivate readonly _settings = new DiagnosticSettings();\n\tprivate readonly _currentDiagnostics: vscode.DiagnosticCollection;\n\tprivate readonly _pendingUpdates: ResourceMap<any>;\n\n\tprivate readonly _updateDelay = 50;\n\n\tconstructor(\n\t\towner: string,\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis._diagnostics = new ResourceMap<FileDiagnostics>(undefined, { onCaseInsenitiveFileSystem });\n\t\tthis._pendingUpdates = new ResourceMap<any>(undefined, { onCaseInsenitiveFileSystem });\n\n\t\tthis._currentDiagnostics = this._register(vscode.languages.createDiagnosticCollection(owner));\n\t}\n\n\tpublic override dispose() {\n\t\tsuper.dispose();\n\n\t\tfor (const value of this._pendingUpdates.values) {\n\t\t\tclearTimeout(value);\n\t\t}\n\t\tthis._pendingUpdates.clear();\n\t}\n\n\tpublic reInitialize(): void {\n\t\tthis._currentDiagnostics.clear();\n\t\tthis._diagnostics.clear();\n\t}\n\n\tpublic setValidate(language: DiagnosticLanguage, value: boolean) {\n\t\tconst didUpdate = this._settings.setValidate(language, value);\n\t\tif (didUpdate) {\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\tpublic setEnableSuggestions(language: DiagnosticLanguage, value: boolean) {\n\t\tconst didUpdate = this._settings.setEnableSuggestions(language, value);\n\t\tif (didUpdate) {\n\t\t\tthis.rebuild();\n\t\t}\n\t}\n\n\tpublic updateDiagnostics(\n\t\tfile: vscode.Uri,\n\t\tlanguage: DiagnosticLanguage,\n\t\tkind: DiagnosticKind,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>\n\t): void {\n\t\tlet didUpdate = false;\n\t\tconst entry = this._diagnostics.get(file);\n\t\tif (entry) {\n\t\t\tdidUpdate = entry.updateDiagnostics(language, kind, diagnostics);\n\t\t} else if (diagnostics.length) {\n\t\t\tconst fileDiagnostics = new FileDiagnostics(file, language);\n\t\t\tfileDiagnostics.updateDiagnostics(language, kind, diagnostics);\n\t\t\tthis._diagnostics.set(file, fileDiagnostics);\n\t\t\tdidUpdate = true;\n\t\t}\n\n\t\tif (didUpdate) {\n\t\t\tthis.scheduleDiagnosticsUpdate(file);\n\t\t}\n\t}\n\n\tpublic configFileDiagnosticsReceived(\n\t\tfile: vscode.Uri,\n\t\tdiagnostics: ReadonlyArray<vscode.Diagnostic>\n\t): void {\n\t\tthis._currentDiagnostics.set(file, diagnostics);\n\t}\n\n\tpublic delete(resource: vscode.Uri): void {\n\t\tthis._currentDiagnostics.delete(resource);\n\t\tthis._diagnostics.delete(resource);\n\t}\n\n\tpublic getDiagnostics(file: vscode.Uri): ReadonlyArray<vscode.Diagnostic> {\n\t\treturn this._currentDiagnostics.get(file) || [];\n\t}\n\n\tprivate scheduleDiagnosticsUpdate(file: vscode.Uri) {\n\t\tif (!this._pendingUpdates.has(file)) {\n\t\t\tthis._pendingUpdates.set(file, setTimeout(() => this.updateCurrentDiagnostics(file), this._updateDelay));\n\t\t}\n\t}\n\n\tprivate updateCurrentDiagnostics(file: vscode.Uri): void {\n\t\tif (this._pendingUpdates.has(file)) {\n\t\t\tclearTimeout(this._pendingUpdates.get(file));\n\t\t\tthis._pendingUpdates.delete(file);\n\t\t}\n\n\t\tconst fileDiagnostics = this._diagnostics.get(file);\n\t\tthis._currentDiagnostics.set(file, fileDiagnostics ? fileDiagnostics.getDiagnostics(this._settings) : []);\n\t}\n\n\tprivate rebuild(): void {\n\t\tthis._currentDiagnostics.clear();\n\t\tfor (const fileDiagnostic of this._diagnostics.values) {\n\t\t\tthis._currentDiagnostics.set(fileDiagnostic.file, fileDiagnostic.getDiagnostics(this._settings));\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { ITypeScriptServiceClient, ClientCapability } from '../typescriptService';\nimport API from '../utils/api';\nimport { coalesce } from '../utils/arrays';\nimport { Delayer } from '../utils/async';\nimport { nulToken } from '../utils/cancellation';\nimport { Disposable } from '../utils/dispose';\nimport * as languageModeIds from '../utils/languageModeIds';\nimport { ResourceMap } from '../utils/resourceMap';\nimport * as typeConverters from '../utils/typeConverters';\n\nconst enum BufferKind {\n\tTypeScript = 1,\n\tJavaScript = 2,\n}\n\nconst enum BufferState {\n\tInitial = 1,\n\tOpen = 2,\n\tClosed = 2,\n}\n\nfunction mode2ScriptKind(mode: string): 'TS' | 'TSX' | 'JS' | 'JSX' | undefined {\n\tswitch (mode) {\n\t\tcase languageModeIds.typescript: return 'TS';\n\t\tcase languageModeIds.typescriptreact: return 'TSX';\n\t\tcase languageModeIds.javascript: return 'JS';\n\t\tcase languageModeIds.javascriptreact: return 'JSX';\n\t}\n\treturn undefined;\n}\n\nconst enum BufferOperationType { Close, Open, Change }\n\nclass CloseOperation {\n\treadonly type = BufferOperationType.Close;\n\tconstructor(\n\t\tpublic readonly args: string\n\t) { }\n}\n\nclass OpenOperation {\n\treadonly type = BufferOperationType.Open;\n\tconstructor(\n\t\tpublic readonly args: Proto.OpenRequestArgs\n\t) { }\n}\n\nclass ChangeOperation {\n\treadonly type = BufferOperationType.Change;\n\tconstructor(\n\t\tpublic readonly args: Proto.FileCodeEdits\n\t) { }\n}\n\ntype BufferOperation = CloseOperation | OpenOperation | ChangeOperation;\n\n/**\n * Manages synchronization of buffers with the TS server.\n *\n * If supported, batches together file changes. This allows the TS server to more efficiently process changes.\n */\nclass BufferSynchronizer {\n\n\tprivate readonly _pending: ResourceMap<BufferOperation>;\n\n\tconstructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tpathNormalizer: (path: vscode.Uri) => string | undefined,\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tthis._pending = new ResourceMap<BufferOperation>(pathNormalizer, {\n\t\t\tonCaseInsenitiveFileSystem\n\t\t});\n\t}\n\n\tpublic open(resource: vscode.Uri, args: Proto.OpenRequestArgs) {\n\t\tif (this.supportsBatching) {\n\t\t\tthis.updatePending(resource, new OpenOperation(args));\n\t\t} else {\n\t\t\tthis.client.executeWithoutWaitingForResponse('open', args);\n\t\t}\n\t}\n\n\t/**\n\t * @return Was the buffer open?\n\t */\n\tpublic close(resource: vscode.Uri, filepath: string): boolean {\n\t\tif (this.supportsBatching) {\n\t\t\treturn this.updatePending(resource, new CloseOperation(filepath));\n\t\t} else {\n\t\t\tconst args: Proto.FileRequestArgs = { file: filepath };\n\t\t\tthis.client.executeWithoutWaitingForResponse('close', args);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic change(resource: vscode.Uri, filepath: string, events: readonly vscode.TextDocumentContentChangeEvent[]) {\n\t\tif (!events.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.supportsBatching) {\n\t\t\tthis.updatePending(resource, new ChangeOperation({\n\t\t\t\tfileName: filepath,\n\t\t\t\ttextChanges: events.map((change): Proto.CodeEdit => ({\n\t\t\t\t\tnewText: change.text,\n\t\t\t\t\tstart: typeConverters.Position.toLocation(change.range.start),\n\t\t\t\t\tend: typeConverters.Position.toLocation(change.range.end),\n\t\t\t\t})).reverse(), // Send the edits end-of-document to start-of-document order\n\t\t\t}));\n\t\t} else {\n\t\t\tfor (const { range, text } of events) {\n\t\t\t\tconst args: Proto.ChangeRequestArgs = {\n\t\t\t\t\tinsertString: text,\n\t\t\t\t\t...typeConverters.Range.toFormattingRequestArgs(filepath, range)\n\t\t\t\t};\n\t\t\t\tthis.client.executeWithoutWaitingForResponse('change', args);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic reset(): void {\n\t\tthis._pending.clear();\n\t}\n\n\tpublic beforeCommand(command: string): void {\n\t\tif (command === 'updateOpen') {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.flush();\n\t}\n\n\tprivate flush() {\n\t\tif (!this.supportsBatching) {\n\t\t\t// We've already eagerly synchronized\n\t\t\tthis._pending.clear();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._pending.size > 0) {\n\t\t\tconst closedFiles: string[] = [];\n\t\t\tconst openFiles: Proto.OpenRequestArgs[] = [];\n\t\t\tconst changedFiles: Proto.FileCodeEdits[] = [];\n\t\t\tfor (const change of this._pending.values) {\n\t\t\t\tswitch (change.type) {\n\t\t\t\t\tcase BufferOperationType.Change: changedFiles.push(change.args); break;\n\t\t\t\t\tcase BufferOperationType.Open: openFiles.push(change.args); break;\n\t\t\t\t\tcase BufferOperationType.Close: closedFiles.push(change.args); break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.client.execute('updateOpen', { changedFiles, closedFiles, openFiles }, nulToken, { nonRecoverable: true });\n\t\t\tthis._pending.clear();\n\t\t}\n\t}\n\n\tprivate get supportsBatching(): boolean {\n\t\treturn this.client.apiVersion.gte(API.v340);\n\t}\n\n\tprivate updatePending(resource: vscode.Uri, op: BufferOperation): boolean {\n\t\tswitch (op.type) {\n\t\t\tcase BufferOperationType.Close:\n\t\t\t\tconst existing = this._pending.get(resource);\n\t\t\t\tswitch (existing?.type) {\n\t\t\t\t\tcase BufferOperationType.Open:\n\t\t\t\t\t\tthis._pending.delete(resource);\n\t\t\t\t\t\treturn false; // Open then close. No need to do anything\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (this._pending.has(resource)) {\n\t\t\t// we saw this file before, make sure we flush before working with it again\n\t\t\tthis.flush();\n\t\t}\n\t\tthis._pending.set(resource, op);\n\t\treturn true;\n\t}\n}\n\nclass SyncedBuffer {\n\n\tprivate state = BufferState.Initial;\n\n\tconstructor(\n\t\tprivate readonly document: vscode.TextDocument,\n\t\tpublic readonly filepath: string,\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly synchronizer: BufferSynchronizer,\n\t) { }\n\n\tpublic open(): void {\n\t\tconst args: Proto.OpenRequestArgs = {\n\t\t\tfile: this.filepath,\n\t\t\tfileContent: this.document.getText(),\n\t\t\tprojectRootPath: this.client.getWorkspaceRootForResource(this.document.uri),\n\t\t};\n\n\t\tconst scriptKind = mode2ScriptKind(this.document.languageId);\n\t\tif (scriptKind) {\n\t\t\targs.scriptKindName = scriptKind;\n\t\t}\n\n\t\tif (this.client.apiVersion.gte(API.v240)) {\n\t\t\tconst tsPluginsForDocument = this.client.pluginManager.plugins\n\t\t\t\t.filter(x => x.languages.indexOf(this.document.languageId) >= 0);\n\n\t\t\tif (tsPluginsForDocument.length) {\n\t\t\t\t(args as any).plugins = tsPluginsForDocument.map(plugin => plugin.name);\n\t\t\t}\n\t\t}\n\n\t\tthis.synchronizer.open(this.resource, args);\n\t\tthis.state = BufferState.Open;\n\t}\n\n\tpublic get resource(): vscode.Uri {\n\t\treturn this.document.uri;\n\t}\n\n\tpublic get lineCount(): number {\n\t\treturn this.document.lineCount;\n\t}\n\n\tpublic get kind(): BufferKind {\n\t\tswitch (this.document.languageId) {\n\t\t\tcase languageModeIds.javascript:\n\t\t\tcase languageModeIds.javascriptreact:\n\t\t\t\treturn BufferKind.JavaScript;\n\n\t\t\tcase languageModeIds.typescript:\n\t\t\tcase languageModeIds.typescriptreact:\n\t\t\tdefault:\n\t\t\t\treturn BufferKind.TypeScript;\n\t\t}\n\t}\n\n\t/**\n\t * @return Was the buffer open?\n\t */\n\tpublic close(): boolean {\n\t\tif (this.state !== BufferState.Open) {\n\t\t\tthis.state = BufferState.Closed;\n\t\t\treturn false;\n\t\t}\n\t\tthis.state = BufferState.Closed;\n\t\treturn this.synchronizer.close(this.resource, this.filepath);\n\t}\n\n\tpublic onContentChanged(events: readonly vscode.TextDocumentContentChangeEvent[]): void {\n\t\tif (this.state !== BufferState.Open) {\n\t\t\tconsole.error(`Unexpected buffer state: ${this.state}`);\n\t\t}\n\n\t\tthis.synchronizer.change(this.resource, this.filepath, events);\n\t}\n}\n\nclass SyncedBufferMap extends ResourceMap<SyncedBuffer> {\n\n\tpublic getForPath(filePath: string): SyncedBuffer | undefined {\n\t\treturn this.get(vscode.Uri.file(filePath));\n\t}\n\n\tpublic get allBuffers(): Iterable<SyncedBuffer> {\n\t\treturn this.values;\n\t}\n}\n\nclass PendingDiagnostics extends ResourceMap<number> {\n\tpublic getOrderedFileSet(): ResourceMap<void> {\n\t\tconst orderedResources = Array.from(this.entries)\n\t\t\t.sort((a, b) => a.value - b.value)\n\t\t\t.map(entry => entry.resource);\n\n\t\tconst map = new ResourceMap<void>(this._normalizePath, this.config);\n\t\tfor (const resource of orderedResources) {\n\t\t\tmap.set(resource, undefined);\n\t\t}\n\t\treturn map;\n\t}\n}\n\nclass GetErrRequest {\n\n\tpublic static executeGetErrRequest(\n\t\tclient: ITypeScriptServiceClient,\n\t\tfiles: ResourceMap<void>,\n\t\tonDone: () => void\n\t) {\n\t\treturn new GetErrRequest(client, files, onDone);\n\t}\n\n\tprivate _done: boolean = false;\n\tprivate readonly _token: vscode.CancellationTokenSource = new vscode.CancellationTokenSource();\n\n\tprivate constructor(\n\t\tclient: ITypeScriptServiceClient,\n\t\tpublic readonly files: ResourceMap<void>,\n\t\tonDone: () => void\n\t) {\n\t\tconst allFiles = coalesce(Array.from(files.entries)\n\t\t\t.filter(entry => client.hasCapabilityForResource(entry.resource, ClientCapability.Semantic))\n\t\t\t.map(entry => client.normalizedPath(entry.resource)));\n\n\t\tif (!allFiles.length || !client.capabilities.has(ClientCapability.Semantic)) {\n\t\t\tthis._done = true;\n\t\t\tsetImmediate(onDone);\n\t\t} else {\n\t\t\tconst request = client.configuration.enableProjectDiagnostics\n\t\t\t\t// Note that geterrForProject is almost certainly not the api we want here as it ends up computing far\n\t\t\t\t// too many diagnostics\n\t\t\t\t? client.executeAsync('geterrForProject', { delay: 0, file: allFiles[0] }, this._token.token)\n\t\t\t\t: client.executeAsync('geterr', { delay: 0, files: allFiles }, this._token.token);\n\n\t\t\trequest.finally(() => {\n\t\t\t\tif (this._done) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._done = true;\n\t\t\t\tonDone();\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic cancel(): any {\n\t\tif (!this._done) {\n\t\t\tthis._token.cancel();\n\t\t}\n\n\t\tthis._token.dispose();\n\t}\n}\n\nexport default class BufferSyncSupport extends Disposable {\n\n\tprivate readonly client: ITypeScriptServiceClient;\n\n\tprivate _validateJavaScript: boolean = true;\n\tprivate _validateTypeScript: boolean = true;\n\tprivate readonly modeIds: Set<string>;\n\tprivate readonly syncedBuffers: SyncedBufferMap;\n\tprivate readonly pendingDiagnostics: PendingDiagnostics;\n\tprivate readonly diagnosticDelayer: Delayer<any>;\n\tprivate pendingGetErr: GetErrRequest | undefined;\n\tprivate listening: boolean = false;\n\tprivate readonly synchronizer: BufferSynchronizer;\n\n\tconstructor(\n\t\tclient: ITypeScriptServiceClient,\n\t\tmodeIds: readonly string[],\n\t\tonCaseInsenitiveFileSystem: boolean\n\t) {\n\t\tsuper();\n\t\tthis.client = client;\n\t\tthis.modeIds = new Set<string>(modeIds);\n\n\t\tthis.diagnosticDelayer = new Delayer<any>(300);\n\n\t\tconst pathNormalizer = (path: vscode.Uri) => this.client.normalizedPath(path);\n\t\tthis.syncedBuffers = new SyncedBufferMap(pathNormalizer, { onCaseInsenitiveFileSystem });\n\t\tthis.pendingDiagnostics = new PendingDiagnostics(pathNormalizer, { onCaseInsenitiveFileSystem });\n\t\tthis.synchronizer = new BufferSynchronizer(client, pathNormalizer, onCaseInsenitiveFileSystem);\n\n\t\tthis.updateConfiguration();\n\t\tvscode.workspace.onDidChangeConfiguration(this.updateConfiguration, this, this._disposables);\n\t}\n\n\tprivate readonly _onDelete = this._register(new vscode.EventEmitter<vscode.Uri>());\n\tpublic readonly onDelete = this._onDelete.event;\n\n\tprivate readonly _onWillChange = this._register(new vscode.EventEmitter<vscode.Uri>());\n\tpublic readonly onWillChange = this._onWillChange.event;\n\n\tpublic listen(): void {\n\t\tif (this.listening) {\n\t\t\treturn;\n\t\t}\n\t\tthis.listening = true;\n\t\tvscode.workspace.onDidOpenTextDocument(this.openTextDocument, this, this._disposables);\n\t\tvscode.workspace.onDidCloseTextDocument(this.onDidCloseTextDocument, this, this._disposables);\n\t\tvscode.workspace.onDidChangeTextDocument(this.onDidChangeTextDocument, this, this._disposables);\n\t\tvscode.window.onDidChangeVisibleTextEditors(e => {\n\t\t\tfor (const { document } of e) {\n\t\t\t\tconst syncedBuffer = this.syncedBuffers.get(document.uri);\n\t\t\t\tif (syncedBuffer) {\n\t\t\t\t\tthis.requestDiagnostic(syncedBuffer);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this, this._disposables);\n\t\tvscode.workspace.textDocuments.forEach(this.openTextDocument, this);\n\t}\n\n\tpublic handles(resource: vscode.Uri): boolean {\n\t\treturn this.syncedBuffers.has(resource);\n\t}\n\n\tpublic ensureHasBuffer(resource: vscode.Uri): boolean {\n\t\tif (this.syncedBuffers.has(resource)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst existingDocument = vscode.workspace.textDocuments.find(doc => doc.uri.toString() === resource.toString());\n\t\tif (existingDocument) {\n\t\t\treturn this.openTextDocument(existingDocument);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tpublic toVsCodeResource(resource: vscode.Uri): vscode.Uri {\n\t\tconst filepath = this.client.normalizedPath(resource);\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tif (buffer.filepath === filepath) {\n\t\t\t\treturn buffer.resource;\n\t\t\t}\n\t\t}\n\t\treturn resource;\n\t}\n\n\tpublic toResource(filePath: string): vscode.Uri {\n\t\tconst buffer = this.syncedBuffers.getForPath(filePath);\n\t\tif (buffer) {\n\t\t\treturn buffer.resource;\n\t\t}\n\t\treturn vscode.Uri.file(filePath);\n\t}\n\n\tpublic reset(): void {\n\t\tthis.pendingGetErr?.cancel();\n\t\tthis.pendingDiagnostics.clear();\n\t\tthis.synchronizer.reset();\n\t}\n\n\tpublic reinitialize(): void {\n\t\tthis.reset();\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tbuffer.open();\n\t\t}\n\t}\n\n\tpublic openTextDocument(document: vscode.TextDocument): boolean {\n\t\tif (!this.modeIds.has(document.languageId)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resource = document.uri;\n\t\tconst filepath = this.client.normalizedPath(resource);\n\t\tif (!filepath) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.syncedBuffers.has(resource)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst syncedBuffer = new SyncedBuffer(document, filepath, this.client, this.synchronizer);\n\t\tthis.syncedBuffers.set(resource, syncedBuffer);\n\t\tsyncedBuffer.open();\n\t\tthis.requestDiagnostic(syncedBuffer);\n\t\treturn true;\n\t}\n\n\tpublic closeResource(resource: vscode.Uri): void {\n\t\tconst syncedBuffer = this.syncedBuffers.get(resource);\n\t\tif (!syncedBuffer) {\n\t\t\treturn;\n\t\t}\n\t\tthis.pendingDiagnostics.delete(resource);\n\t\tthis.pendingGetErr?.files.delete(resource);\n\t\tthis.syncedBuffers.delete(resource);\n\t\tconst wasBufferOpen = syncedBuffer.close();\n\t\tthis._onDelete.fire(resource);\n\t\tif (wasBufferOpen) {\n\t\t\tthis.requestAllDiagnostics();\n\t\t}\n\t}\n\n\tpublic interruptGetErr<R>(f: () => R): R {\n\t\tif (!this.pendingGetErr\n\t\t\t|| this.client.configuration.enableProjectDiagnostics // `geterr` happens on seperate server so no need to cancel it.\n\t\t) {\n\t\t\treturn f();\n\t\t}\n\n\t\tthis.pendingGetErr.cancel();\n\t\tthis.pendingGetErr = undefined;\n\t\tconst result = f();\n\t\tthis.triggerDiagnostics();\n\t\treturn result;\n\t}\n\n\tpublic beforeCommand(command: string): void {\n\t\tthis.synchronizer.beforeCommand(command);\n\t}\n\n\tprivate onDidCloseTextDocument(document: vscode.TextDocument): void {\n\t\tthis.closeResource(document.uri);\n\t}\n\n\tprivate onDidChangeTextDocument(e: vscode.TextDocumentChangeEvent): void {\n\t\tconst syncedBuffer = this.syncedBuffers.get(e.document.uri);\n\t\tif (!syncedBuffer) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onWillChange.fire(syncedBuffer.resource);\n\n\t\tsyncedBuffer.onContentChanged(e.contentChanges);\n\t\tconst didTrigger = this.requestDiagnostic(syncedBuffer);\n\n\t\tif (!didTrigger && this.pendingGetErr) {\n\t\t\t// In this case we always want to re-trigger all diagnostics\n\t\t\tthis.pendingGetErr.cancel();\n\t\t\tthis.pendingGetErr = undefined;\n\t\t\tthis.triggerDiagnostics();\n\t\t}\n\t}\n\n\tpublic requestAllDiagnostics() {\n\t\tfor (const buffer of this.syncedBuffers.allBuffers) {\n\t\t\tif (this.shouldValidate(buffer)) {\n\t\t\t\tthis.pendingDiagnostics.set(buffer.resource, Date.now());\n\t\t\t}\n\t\t}\n\t\tthis.triggerDiagnostics();\n\t}\n\n\tpublic getErr(resources: readonly vscode.Uri[]): any {\n\t\tconst handledResources = resources.filter(resource => this.handles(resource));\n\t\tif (!handledResources.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const resource of handledResources) {\n\t\t\tthis.pendingDiagnostics.set(resource, Date.now());\n\t\t}\n\n\t\tthis.triggerDiagnostics();\n\t}\n\n\tprivate triggerDiagnostics(delay: number = 200) {\n\t\tthis.diagnosticDelayer.trigger(() => {\n\t\t\tthis.sendPendingDiagnostics();\n\t\t}, delay);\n\t}\n\n\tprivate requestDiagnostic(buffer: SyncedBuffer): boolean {\n\t\tif (!this.shouldValidate(buffer)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.pendingDiagnostics.set(buffer.resource, Date.now());\n\n\t\tconst delay = Math.min(Math.max(Math.ceil(buffer.lineCount / 20), 300), 800);\n\t\tthis.triggerDiagnostics(delay);\n\t\treturn true;\n\t}\n\n\tpublic hasPendingDiagnostics(resource: vscode.Uri): boolean {\n\t\treturn this.pendingDiagnostics.has(resource);\n\t}\n\n\tprivate sendPendingDiagnostics(): void {\n\t\tconst orderedFileSet = this.pendingDiagnostics.getOrderedFileSet();\n\n\t\tif (this.pendingGetErr) {\n\t\t\tthis.pendingGetErr.cancel();\n\n\t\t\tfor (const { resource } of this.pendingGetErr.files.entries) {\n\t\t\t\tif (this.syncedBuffers.get(resource)) {\n\t\t\t\t\torderedFileSet.set(resource, undefined);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.pendingGetErr = undefined;\n\t\t}\n\n\t\t// Add all open TS buffers to the geterr request. They might be visible\n\t\tfor (const buffer of this.syncedBuffers.values) {\n\t\t\torderedFileSet.set(buffer.resource, undefined);\n\t\t}\n\n\t\tif (orderedFileSet.size) {\n\t\t\tconst getErr = this.pendingGetErr = GetErrRequest.executeGetErrRequest(this.client, orderedFileSet, () => {\n\t\t\t\tif (this.pendingGetErr === getErr) {\n\t\t\t\t\tthis.pendingGetErr = undefined;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.pendingDiagnostics.clear();\n\t}\n\n\tprivate updateConfiguration() {\n\t\tconst jsConfig = vscode.workspace.getConfiguration('javascript', null);\n\t\tconst tsConfig = vscode.workspace.getConfiguration('typescript', null);\n\n\t\tthis._validateJavaScript = jsConfig.get<boolean>('validate.enable', true);\n\t\tthis._validateTypeScript = tsConfig.get<boolean>('validate.enable', true);\n\t}\n\n\tprivate shouldValidate(buffer: SyncedBuffer) {\n\t\tswitch (buffer.kind) {\n\t\t\tcase BufferKind.JavaScript:\n\t\t\t\treturn this._validateJavaScript;\n\n\t\t\tcase BufferKind.TypeScript:\n\t\t\tdefault:\n\t\t\t\treturn this._validateTypeScript;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { OngoingRequestCancellerFactory } from '../tsServer/cancellation';\nimport { ClientCapabilities, ClientCapability, ServerType } from '../typescriptService';\nimport API from '../utils/api';\nimport { SeparateSyntaxServerConfiguration, TsServerLogLevel, TypeScriptServiceConfiguration } from '../utils/configuration';\nimport { Logger } from '../utils/logger';\nimport { isWeb } from '../utils/platform';\nimport { TypeScriptPluginPathsProvider } from '../utils/pluginPathsProvider';\nimport { PluginManager } from '../utils/plugins';\nimport { TelemetryReporter } from '../utils/telemetry';\nimport Tracer from '../utils/tracer';\nimport { ILogDirectoryProvider } from './logDirectoryProvider';\nimport { GetErrRoutingTsServer, ITypeScriptServer, ProcessBasedTsServer, SyntaxRoutingTsServer, TsServerDelegate, TsServerProcessFactory, TsServerProcessKind } from './server';\nimport { TypeScriptVersionManager } from './versionManager';\nimport { ITypeScriptVersionProvider, TypeScriptVersion } from './versionProvider';\n\nconst enum CompositeServerType {\n\t/** Run a single server that handles all commands  */\n\tSingle,\n\n\t/** Run a separate server for syntax commands */\n\tSeparateSyntax,\n\n\t/** Use a separate syntax server while the project is loading */\n\tDynamicSeparateSyntax,\n\n\t/** Only enable the syntax server */\n\tSyntaxOnly\n}\n\nexport class TypeScriptServerSpawner {\n\tpublic constructor(\n\t\tprivate readonly _versionProvider: ITypeScriptVersionProvider,\n\t\tprivate readonly _versionManager: TypeScriptVersionManager,\n\t\tprivate readonly _logDirectoryProvider: ILogDirectoryProvider,\n\t\tprivate readonly _pluginPathsProvider: TypeScriptPluginPathsProvider,\n\t\tprivate readonly _logger: Logger,\n\t\tprivate readonly _telemetryReporter: TelemetryReporter,\n\t\tprivate readonly _tracer: Tracer,\n\t\tprivate readonly _factory: TsServerProcessFactory,\n\t) { }\n\n\tpublic spawn(\n\t\tversion: TypeScriptVersion,\n\t\tcapabilities: ClientCapabilities,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tpluginManager: PluginManager,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t\tdelegate: TsServerDelegate,\n\t): ITypeScriptServer {\n\t\tlet primaryServer: ITypeScriptServer;\n\t\tconst serverType = this.getCompositeServerType(version, capabilities, configuration);\n\t\tswitch (serverType) {\n\t\t\tcase CompositeServerType.SeparateSyntax:\n\t\t\tcase CompositeServerType.DynamicSeparateSyntax:\n\t\t\t\t{\n\t\t\t\t\tconst enableDynamicRouting = serverType === CompositeServerType.DynamicSeparateSyntax;\n\t\t\t\t\tprimaryServer = new SyntaxRoutingTsServer({\n\t\t\t\t\t\tsyntax: this.spawnTsServer(TsServerProcessKind.Syntax, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\t\t\tsemantic: this.spawnTsServer(TsServerProcessKind.Semantic, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\t\t}, delegate, enableDynamicRouting);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase CompositeServerType.Single:\n\t\t\t\t{\n\t\t\t\t\tprimaryServer = this.spawnTsServer(TsServerProcessKind.Main, version, configuration, pluginManager, cancellerFactory);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\tcase CompositeServerType.SyntaxOnly:\n\t\t\t\t{\n\t\t\t\t\tprimaryServer = this.spawnTsServer(TsServerProcessKind.Syntax, version, configuration, pluginManager, cancellerFactory);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t}\n\n\t\tif (this.shouldUseSeparateDiagnosticsServer(configuration)) {\n\t\t\treturn new GetErrRoutingTsServer({\n\t\t\t\tgetErr: this.spawnTsServer(TsServerProcessKind.Diagnostics, version, configuration, pluginManager, cancellerFactory),\n\t\t\t\tprimary: primaryServer,\n\t\t\t}, delegate);\n\t\t}\n\n\t\treturn primaryServer;\n\t}\n\n\tprivate getCompositeServerType(\n\t\tversion: TypeScriptVersion,\n\t\tcapabilities: ClientCapabilities,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t): CompositeServerType {\n\t\tif (!capabilities.has(ClientCapability.Semantic)) {\n\t\t\treturn CompositeServerType.SyntaxOnly;\n\t\t}\n\n\t\tswitch (configuration.separateSyntaxServer) {\n\t\t\tcase SeparateSyntaxServerConfiguration.Disabled:\n\t\t\t\treturn CompositeServerType.Single;\n\n\t\t\tcase SeparateSyntaxServerConfiguration.Enabled:\n\t\t\t\tif (version.apiVersion?.gte(API.v340)) {\n\t\t\t\t\treturn version.apiVersion?.gte(API.v400)\n\t\t\t\t\t\t? CompositeServerType.DynamicSeparateSyntax\n\t\t\t\t\t\t: CompositeServerType.SeparateSyntax;\n\t\t\t\t}\n\t\t\t\treturn CompositeServerType.Single;\n\t\t}\n\t}\n\n\tprivate shouldUseSeparateDiagnosticsServer(\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t): boolean {\n\t\treturn configuration.enableProjectDiagnostics;\n\t}\n\n\tprivate spawnTsServer(\n\t\tkind: TsServerProcessKind,\n\t\tversion: TypeScriptVersion,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tpluginManager: PluginManager,\n\t\tcancellerFactory: OngoingRequestCancellerFactory,\n\t): ITypeScriptServer {\n\t\tconst apiVersion = version.apiVersion || API.defaultVersion;\n\n\t\tconst canceller = cancellerFactory.create(kind, this._tracer);\n\t\tconst { args, tsServerLogFile, tsServerTraceDirectory } = this.getTsServerArgs(kind, configuration, version, apiVersion, pluginManager, canceller.cancellationPipeName);\n\n\t\tif (TypeScriptServerSpawner.isLoggingEnabled(configuration)) {\n\t\t\tif (tsServerLogFile) {\n\t\t\t\tthis._logger.info(`<${kind}> Log file: ${tsServerLogFile}`);\n\t\t\t} else {\n\t\t\t\tthis._logger.error(`<${kind}> Could not create log directory`);\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.enableTsServerTracing) {\n\t\t\tif (tsServerTraceDirectory) {\n\t\t\t\tthis._logger.info(`<${kind}> Trace directory: ${tsServerTraceDirectory}`);\n\t\t\t} else {\n\t\t\t\tthis._logger.error(`<${kind}> Could not create trace directory`);\n\t\t\t}\n\t\t}\n\n\t\tthis._logger.info(`<${kind}> Forking...`);\n\t\tconst process = this._factory.fork(version.tsServerPath, args, kind, configuration, this._versionManager);\n\t\tthis._logger.info(`<${kind}> Starting...`);\n\n\t\treturn new ProcessBasedTsServer(\n\t\t\tkind,\n\t\t\tthis.kindToServerType(kind),\n\t\t\tprocess!,\n\t\t\ttsServerLogFile,\n\t\t\tcanceller,\n\t\t\tversion,\n\t\t\tthis._telemetryReporter,\n\t\t\tthis._tracer);\n\t}\n\n\tprivate kindToServerType(kind: TsServerProcessKind): ServerType {\n\t\tswitch (kind) {\n\t\t\tcase TsServerProcessKind.Syntax:\n\t\t\t\treturn ServerType.Syntax;\n\n\t\t\tcase TsServerProcessKind.Main:\n\t\t\tcase TsServerProcessKind.Semantic:\n\t\t\tcase TsServerProcessKind.Diagnostics:\n\t\t\tdefault:\n\t\t\t\treturn ServerType.Semantic;\n\t\t}\n\t}\n\n\tprivate getTsServerArgs(\n\t\tkind: TsServerProcessKind,\n\t\tconfiguration: TypeScriptServiceConfiguration,\n\t\tcurrentVersion: TypeScriptVersion,\n\t\tapiVersion: API,\n\t\tpluginManager: PluginManager,\n\t\tcancellationPipeName: string | undefined,\n\t): { args: string[], tsServerLogFile: string | undefined, tsServerTraceDirectory: string | undefined } {\n\t\tconst args: string[] = [];\n\t\tlet tsServerLogFile: string | undefined;\n\t\tlet tsServerTraceDirectory: string | undefined;\n\n\t\tif (kind === TsServerProcessKind.Syntax) {\n\t\t\tif (apiVersion.gte(API.v401)) {\n\t\t\t\targs.push('--serverMode', 'partialSemantic');\n\t\t\t} else {\n\t\t\t\targs.push('--syntaxOnly');\n\t\t\t}\n\t\t}\n\n\t\tif (apiVersion.gte(API.v250)) {\n\t\t\targs.push('--useInferredProjectPerProjectRoot');\n\t\t} else {\n\t\t\targs.push('--useSingleInferredProject');\n\t\t}\n\n\t\tif (configuration.disableAutomaticTypeAcquisition || kind === TsServerProcessKind.Syntax || kind === TsServerProcessKind.Diagnostics) {\n\t\t\targs.push('--disableAutomaticTypingAcquisition');\n\t\t}\n\n\t\tif (kind === TsServerProcessKind.Semantic || kind === TsServerProcessKind.Main) {\n\t\t\targs.push('--enableTelemetry');\n\t\t}\n\n\t\tif (cancellationPipeName) {\n\t\t\targs.push('--cancellationPipeName', cancellationPipeName + '*');\n\t\t}\n\n\t\tif (TypeScriptServerSpawner.isLoggingEnabled(configuration)) {\n\t\t\tif (isWeb()) {\n\t\t\t\targs.push('--logVerbosity', TsServerLogLevel.toString(configuration.tsServerLogLevel));\n\t\t\t} else {\n\t\t\t\tconst logDir = this._logDirectoryProvider.getNewLogDirectory();\n\t\t\t\tif (logDir) {\n\t\t\t\t\ttsServerLogFile = path.join(logDir, `tsserver.log`);\n\t\t\t\t\targs.push('--logVerbosity', TsServerLogLevel.toString(configuration.tsServerLogLevel));\n\t\t\t\t\targs.push('--logFile', tsServerLogFile);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.enableTsServerTracing && !isWeb()) {\n\t\t\ttsServerTraceDirectory = this._logDirectoryProvider.getNewLogDirectory();\n\t\t\tif (tsServerTraceDirectory) {\n\t\t\t\targs.push('--traceDirectory', tsServerTraceDirectory);\n\t\t\t}\n\t\t}\n\n\t\tif (!isWeb()) {\n\t\t\tconst pluginPaths = this._pluginPathsProvider.getPluginPaths();\n\n\t\t\tif (pluginManager.plugins.length) {\n\t\t\t\targs.push('--globalPlugins', pluginManager.plugins.map(x => x.name).join(','));\n\n\t\t\t\tconst isUsingBundledTypeScriptVersion = currentVersion.path === this._versionProvider.defaultVersion.path;\n\t\t\t\tfor (const plugin of pluginManager.plugins) {\n\t\t\t\t\tif (isUsingBundledTypeScriptVersion || plugin.enableForWorkspaceTypeScriptVersions) {\n\t\t\t\t\t\tpluginPaths.push(plugin.path);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (pluginPaths.length !== 0) {\n\t\t\t\targs.push('--pluginProbeLocations', pluginPaths.join(','));\n\t\t\t}\n\t\t}\n\n\t\tif (configuration.npmLocation) {\n\t\t\targs.push('--npmLocation', `\"${configuration.npmLocation}\"`);\n\t\t}\n\n\t\tif (apiVersion.gte(API.v260)) {\n\t\t\targs.push('--locale', TypeScriptServerSpawner.getTsLocale(configuration));\n\t\t}\n\n\t\tif (apiVersion.gte(API.v291)) {\n\t\t\targs.push('--noGetErrOnBackgroundUpdate');\n\t\t}\n\n\t\tif (apiVersion.gte(API.v345)) {\n\t\t\targs.push('--validateDefaultNpmLocation');\n\t\t}\n\n\t\treturn { args, tsServerLogFile, tsServerTraceDirectory };\n\t}\n\n\tprivate static isLoggingEnabled(configuration: TypeScriptServiceConfiguration) {\n\t\treturn configuration.tsServerLogLevel !== TsServerLogLevel.Off;\n\t}\n\n\tprivate static getTsLocale(configuration: TypeScriptServiceConfiguration): string {\n\t\treturn configuration.locale\n\t\t\t? configuration.locale\n\t\t\t: vscode.env.language;\n\t}\n}\n\n",null,null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { TypeScriptServiceConfiguration } from './configuration';\nimport { RelativeWorkspacePathResolver } from './relativePathResolver';\n\n\nexport class TypeScriptPluginPathsProvider {\n\n\tpublic constructor(\n\t\tprivate configuration: TypeScriptServiceConfiguration\n\t) { }\n\n\tpublic updateConfiguration(configuration: TypeScriptServiceConfiguration): void {\n\t\tthis.configuration = configuration;\n\t}\n\n\tpublic getPluginPaths(): string[] {\n\t\tconst pluginPaths = [];\n\t\tfor (const pluginPath of this.configuration.tsServerPluginPaths) {\n\t\t\tpluginPaths.push(...this.resolvePluginPath(pluginPath));\n\t\t}\n\t\treturn pluginPaths;\n\t}\n\n\tprivate resolvePluginPath(pluginPath: string): string[] {\n\t\tif (path.isAbsolute(pluginPath)) {\n\t\t\treturn [pluginPath];\n\t\t}\n\n\t\tconst workspacePath = RelativeWorkspacePathResolver.asAbsoluteWorkspacePath(pluginPath);\n\t\tif (workspacePath !== undefined) {\n\t\t\treturn [workspacePath];\n\t\t}\n\n\t\treturn (vscode.workspace.workspaceFolders || [])\n\t\t\t.map(workspaceFolder => path.join(workspaceFolder.uri.fsPath, pluginPath));\n\t}\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport VsCodeTelemetryReporter from 'vscode-extension-telemetry';\nimport { memoize } from './memoize';\n\ninterface PackageInfo {\n\treadonly name: string;\n\treadonly version: string;\n\treadonly aiKey: string;\n}\n\nexport interface TelemetryProperties {\n\treadonly [prop: string]: string | number | boolean | undefined;\n}\n\nexport interface TelemetryReporter {\n\tlogTelemetry(eventName: string, properties?: TelemetryProperties): void;\n\n\tdispose(): void;\n}\n\nexport class VSCodeTelemetryReporter implements TelemetryReporter {\n\tprivate _reporter: VsCodeTelemetryReporter | null = null;\n\n\tconstructor(\n\t\tprivate readonly clientVersionDelegate: () => string\n\t) { }\n\n\tpublic logTelemetry(eventName: string, properties: { [prop: string]: string } = {}) {\n\t\tconst reporter = this.reporter;\n\t\tif (!reporter) {\n\t\t\treturn;\n\t\t}\n\n\t\t/* __GDPR__FRAGMENT__\n\t\t\t\"TypeScriptCommonProperties\" : {\n\t\t\t\t\"version\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t\t}\n\t\t*/\n\t\tproperties['version'] = this.clientVersionDelegate();\n\n\t\treporter.sendTelemetryEvent(eventName, properties);\n\t}\n\n\tpublic dispose() {\n\t\tif (this._reporter) {\n\t\t\tthis._reporter.dispose();\n\t\t\tthis._reporter = null;\n\t\t}\n\t}\n\n\t@memoize\n\tprivate get reporter(): VsCodeTelemetryReporter | null {\n\t\tif (this.packageInfo && this.packageInfo.aiKey) {\n\t\t\tthis._reporter = new VsCodeTelemetryReporter(\n\t\t\t\tthis.packageInfo.name,\n\t\t\t\tthis.packageInfo.version,\n\t\t\t\tthis.packageInfo.aiKey);\n\t\t\treturn this._reporter;\n\t\t}\n\t\treturn null;\n\t}\n\n\t@memoize\n\tprivate get packageInfo(): PackageInfo | null {\n\t\tconst { packageJSON } = vscode.extensions.getExtension('vscode.typescript-language-features')!;\n\t\tif (packageJSON) {\n\t\t\treturn {\n\t\t\t\tname: packageJSON.name,\n\t\t\t\tversion: packageJSON.version,\n\t\t\t\taiKey: packageJSON.aiKey\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t}\n}\n","/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar vscode = require(\"vscode\");\r\nvar appInsights = require(\"applicationinsights\");\r\nvar TelemetryReporter = /** @class */ (function () {\r\n    // tslint:disable-next-line\r\n    function TelemetryReporter(extensionId, extensionVersion, key, firstParty) {\r\n        var _this = this;\r\n        this.extensionId = extensionId;\r\n        this.extensionVersion = extensionVersion;\r\n        this.firstParty = false;\r\n        this.userOptIn = false;\r\n        this.firstParty = !!firstParty;\r\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\r\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\r\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\r\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\r\n        }\r\n        this.updateUserOptIn(key);\r\n        if (vscode.env.onDidChangeTelemetryEnabled !== undefined) {\r\n            this.optOutListener = vscode.env.onDidChangeTelemetryEnabled(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n        else {\r\n            this.optOutListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n    }\r\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\r\n        // Newer versions of vscode api have telemetry enablement exposed, but fallback to setting for older versions\r\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\r\n        var newOptInValue = vscode.env.isTelemetryEnabled === undefined ?\r\n            config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true) :\r\n            vscode.env.isTelemetryEnabled;\r\n        if (this.userOptIn !== newOptInValue) {\r\n            this.userOptIn = newOptInValue;\r\n            if (this.userOptIn) {\r\n                this.createAppInsightsClient(key);\r\n            }\r\n            else {\r\n                this.dispose();\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\r\n        //check if another instance is already initialized\r\n        if (appInsights.defaultClient) {\r\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\r\n            // no other way to enable offline mode\r\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\r\n        }\r\n        else {\r\n            appInsights.setup(key)\r\n                .setAutoCollectRequests(false)\r\n                .setAutoCollectPerformance(false)\r\n                .setAutoCollectExceptions(false)\r\n                .setAutoCollectDependencies(false)\r\n                .setAutoDependencyCorrelation(false)\r\n                .setAutoCollectConsole(false)\r\n                .setUseDiskRetryCaching(true)\r\n                .start();\r\n            this.appInsightsClient = appInsights.defaultClient;\r\n        }\r\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\r\n        if (vscode && vscode.env) {\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\r\n        }\r\n        //check if it's an Asimov key to change the endpoint\r\n        if (key && key.indexOf('AIF-') === 0) {\r\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\r\n            this.firstParty = true;\r\n        }\r\n    };\r\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    TelemetryReporter.prototype.getCommonProperties = function () {\r\n        var commonProperties = Object.create(null);\r\n        commonProperties['common.os'] = os.platform();\r\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\r\n        commonProperties['common.extname'] = this.extensionId;\r\n        commonProperties['common.extversion'] = this.extensionVersion;\r\n        if (vscode && vscode.env) {\r\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\r\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\r\n            commonProperties['common.vscodeversion'] = vscode.version;\r\n            commonProperties['common.isnewappinstall'] = vscode.env.isNewAppInstall;\r\n            switch (vscode.env.uiKind) {\r\n                case vscode.UIKind.Web:\r\n                    commonProperties['common.uikind'] = 'web';\r\n                    break;\r\n                case vscode.UIKind.Desktop:\r\n                    commonProperties['common.uikind'] = 'desktop';\r\n                    break;\r\n                default:\r\n                    commonProperties['common.uikind'] = 'unknown';\r\n            }\r\n            commonProperties['common.remotename'] = this.cleanRemoteName(vscode.env.remoteName);\r\n        }\r\n        return commonProperties;\r\n    };\r\n    TelemetryReporter.prototype.cleanRemoteName = function (remoteName) {\r\n        if (!remoteName) {\r\n            return 'none';\r\n        }\r\n        var ret = 'other';\r\n        // Allowed remote authorities\r\n        ['ssh-remote', 'dev-container', 'attached-container', 'wsl'].forEach(function (res) {\r\n            if (remoteName.indexOf(res + \"+\") === 0) {\r\n                ret = res;\r\n            }\r\n        });\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.shouldSendErrorTelemetry = function () {\r\n        if (this.firstParty) {\r\n            if (this.cleanRemoteName(vscode.env.remoteName) !== 'other') {\r\n                return true;\r\n            }\r\n            if (this.extension === undefined || this.extension.extensionKind === vscode.ExtensionKind.Workspace) {\r\n                return false;\r\n            }\r\n            if (vscode.env.uiKind === vscode.UIKind.Web) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(TelemetryReporter.prototype, \"extension\", {\r\n        get: function () {\r\n            if (this._extension === undefined) {\r\n                this._extension = vscode.extensions.getExtension(this.extensionId);\r\n            }\r\n            return this._extension;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TelemetryReporter.prototype.cloneAndChange = function (obj, change) {\r\n        if (obj === null || typeof obj !== 'object')\r\n            return obj;\r\n        if (typeof change !== 'function')\r\n            return obj;\r\n        var ret = {};\r\n        for (var key in obj) {\r\n            ret[key] = change(key, obj[key]);\r\n        }\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.anonymizeFilePaths = function (stack, anonymizeFilePaths) {\r\n        if (stack === undefined || stack === null) {\r\n            return '';\r\n        }\r\n        var cleanupPatterns = [new RegExp(vscode.env.appRoot.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi')];\r\n        if (this.extension) {\r\n            cleanupPatterns.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi'));\r\n        }\r\n        var updatedStack = stack;\r\n        if (anonymizeFilePaths) {\r\n            var cleanUpIndexes = [];\r\n            for (var _i = 0, cleanupPatterns_1 = cleanupPatterns; _i < cleanupPatterns_1.length; _i++) {\r\n                var regexp = cleanupPatterns_1[_i];\r\n                while (true) {\r\n                    var result = regexp.exec(stack);\r\n                    if (!result) {\r\n                        break;\r\n                    }\r\n                    cleanUpIndexes.push([result.index, regexp.lastIndex]);\r\n                }\r\n            }\r\n            var nodeModulesRegex = /^[\\\\\\/]?(node_modules|node_modules\\.asar)[\\\\\\/]/;\r\n            var fileRegex = /(file:\\/\\/)?([a-zA-Z]:(\\\\\\\\|\\\\|\\/)|(\\\\\\\\|\\\\|\\/))?([\\w-\\._]+(\\\\\\\\|\\\\|\\/))+[\\w-\\._]*/g;\r\n            var lastIndex = 0;\r\n            updatedStack = '';\r\n            var _loop_1 = function () {\r\n                var result = fileRegex.exec(stack);\r\n                if (!result) {\r\n                    return \"break\";\r\n                }\r\n                // Anoynimize user file paths that do not need to be retained or cleaned up.\r\n                if (!nodeModulesRegex.test(result[0]) && cleanUpIndexes.every(function (_a) {\r\n                    var x = _a[0], y = _a[1];\r\n                    return result.index < x || result.index >= y;\r\n                })) {\r\n                    updatedStack += stack.substring(lastIndex, result.index) + '<REDACTED: user-file-path>';\r\n                    lastIndex = fileRegex.lastIndex;\r\n                }\r\n            };\r\n            while (true) {\r\n                var state_1 = _loop_1();\r\n                if (state_1 === \"break\")\r\n                    break;\r\n            }\r\n            if (lastIndex < stack.length) {\r\n                updatedStack += stack.substr(lastIndex);\r\n            }\r\n        }\r\n        // sanitize with configured cleanup patterns\r\n        for (var _a = 0, cleanupPatterns_2 = cleanupPatterns; _a < cleanupPatterns_2.length; _a++) {\r\n            var regexp = cleanupPatterns_2[_a];\r\n            updatedStack = updatedStack.replace(regexp, '');\r\n        }\r\n        return updatedStack;\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryErrorEvent = function (eventName, properties, measurements, errorProps) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            // always clean the properties if first party\r\n            // do not send any error properties if we shouldn't send error telemetry\r\n            // if we have no errorProps, assume all are error props\r\n            var cleanProperties = this.cloneAndChange(properties, function (key, prop) {\r\n                if (_this.shouldSendErrorTelemetry()) {\r\n                    return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n                }\r\n                if (errorProps === undefined || errorProps.indexOf(key) !== -1) {\r\n                    return 'REDACTED';\r\n                }\r\n                return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n            });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryException = function (error, properties, measurements) {\r\n        var _this = this;\r\n        if (this.shouldSendErrorTelemetry() && this.userOptIn && error && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackException({\r\n                exception: error,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + error.name + \" \" + error.message + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.dispose = function () {\r\n        var _this = this;\r\n        this.optOutListener.dispose();\r\n        var flushEventsToLogger = new Promise(function (resolve) {\r\n            if (!_this.logStream) {\r\n                return resolve(void 0);\r\n            }\r\n            _this.logStream.on('finish', resolve);\r\n            _this.logStream.end();\r\n        });\r\n        var flushEventsToAI = new Promise(function (resolve) {\r\n            if (_this.appInsightsClient) {\r\n                _this.appInsightsClient.flush({\r\n                    callback: function () {\r\n                        // all data flushed\r\n                        _this.appInsightsClient = undefined;\r\n                        resolve(void 0);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                resolve(void 0);\r\n            }\r\n        });\r\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\r\n    };\r\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\r\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\r\n    return TelemetryReporter;\r\n}());\r\nexports.default = TelemetryReporter;\r\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\nvar CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\nvar Logging = require(\"./Library/Logging\");\nvar QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\nvar NativePerformance_1 = require(\"./AutoCollection/NativePerformance\");\n// We export these imports so that SDK users may use these classes directly.\n// They're exposed using \"export import\" so that types are passed along as expected\nexports.TelemetryClient = require(\"./Library/NodeClient\");\nexports.Contracts = require(\"./Declarations/Contracts\");\nvar DistributedTracingModes;\n(function (DistributedTracingModes) {\n    /**\n     * (Default) Send Application Insights correlation headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI\"] = 0] = \"AI\";\n    /**\n     * Send both W3C Trace Context headers and back-compatibility Application Insights headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI_AND_W3C\"] = 1] = \"AI_AND_W3C\";\n})(DistributedTracingModes = exports.DistributedTracingModes || (exports.DistributedTracingModes = {}));\n// Default autocollection configuration\nvar _isConsole = true;\nvar _isConsoleLog = false;\nvar _isExceptions = true;\nvar _isPerformance = true;\nvar _isRequests = true;\nvar _isDependencies = true;\nvar _isDiskRetry = true;\nvar _isCorrelating = true;\nvar _forceClsHooked;\nvar _isSendingLiveMetrics = false; // Off by default\nvar _isNativePerformance = true;\nvar _disabledExtendedMetrics;\nvar _diskRetryInterval = undefined;\nvar _diskRetryMaxBytes = undefined;\nvar _console;\nvar _exceptions;\nvar _performance;\nvar _nativePerformance;\nvar _serverRequests;\nvar _clientRequests;\nvar _isStarted = false;\nvar _performanceLiveMetrics;\n/**\n * Initializes the default client. Should be called after setting\n * configuration options.\n *\n * @param setupString the Connection String or Instrumentation Key to use. Optional, if\n * this is not specified, the value will be read from the environment\n * variable APPLICATIONINSIGHTS_CONNECTION_STRING or APPINSIGHTS_INSTRUMENTATIONKEY.\n * @returns {Configuration} the configuration class to initialize\n * and start the SDK.\n */\nfunction setup(setupString) {\n    if (!exports.defaultClient) {\n        exports.defaultClient = new exports.TelemetryClient(setupString);\n        _console = new AutoCollectConsole(exports.defaultClient);\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\n        _performance = new AutoCollectPerformance(exports.defaultClient);\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\n        if (!_nativePerformance) {\n            _nativePerformance = new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient);\n        }\n    }\n    else {\n        Logging.info(\"The default client is already setup\");\n    }\n    if (exports.defaultClient && exports.defaultClient.channel) {\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\n    }\n    return Configuration;\n}\nexports.setup = setup;\n/**\n * Starts automatic collection of telemetry. Prior to calling start no\n * telemetry will be *automatically* collected, though manual collection\n * is enabled.\n * @returns {ApplicationInsights} this class\n */\nfunction start() {\n    if (!!exports.defaultClient) {\n        _isStarted = true;\n        _console.enable(_isConsole, _isConsoleLog);\n        _exceptions.enable(_isExceptions);\n        _performance.enable(_isPerformance);\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\n        _serverRequests.enable(_isRequests);\n        _clientRequests.enable(_isDependencies);\n        if (exports.liveMetricsClient && _isSendingLiveMetrics) {\n            exports.liveMetricsClient.enable(_isSendingLiveMetrics);\n        }\n    }\n    else {\n        Logging.warn(\"Start cannot be called before setup\");\n    }\n    return Configuration;\n}\nexports.start = start;\n/**\n * Returns an object that is shared across all code handling a given request.\n * This can be used similarly to thread-local storage in other languages.\n * Properties set on this object will be available to telemetry processors.\n *\n * Do not store sensitive information here.\n * Custom properties set on this object can be exposed in a future SDK\n * release via outgoing HTTP headers.\n * This is to allow for correlating data cross-component.\n *\n * This method will return null if automatic dependency correlation is disabled.\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\n */\nfunction getCorrelationContext() {\n    if (_isCorrelating) {\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\n    }\n    return null;\n}\nexports.getCorrelationContext = getCorrelationContext;\n/**\n * Returns a function that will get the same correlation context within its\n * function body as the code executing this function.\n * Use this method if automatic dependency correlation is not propagating\n * correctly to an asynchronous callback.\n */\nfunction wrapWithCorrelationContext(fn) {\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\n}\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\n/**\n * The active configuration for global SDK behaviors, such as autocollection.\n */\nvar Configuration = (function () {\n    function Configuration() {\n    }\n    /**\n     * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\n     * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\n     * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\n     * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\n     * services. Default=AI\n    */\n    Configuration.setDistributedTracingMode = function (value) {\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\n        return Configuration;\n    };\n    /**\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\n     * @param value if true logger activity will be sent to Application Insights\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\n        _isConsole = value;\n        _isConsoleLog = collectConsoleLog;\n        if (_isStarted) {\n            _console.enable(value, collectConsoleLog);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of exception tracking (enabled by default)\n     * @param value if true uncaught exceptions will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectExceptions = function (value) {\n        _isExceptions = value;\n        if (_isStarted) {\n            _exceptions.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of performance tracking (enabled by default)\n     * @param value if true performance counters will be collected every second and sent to Application Insights\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectPerformance = function (value, collectExtendedMetrics) {\n        if (collectExtendedMetrics === void 0) { collectExtendedMetrics = true; }\n        _isPerformance = value;\n        var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics);\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\n        if (_isStarted) {\n            _performance.enable(value);\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of request tracking (enabled by default)\n     * @param value if true requests will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectRequests = function (value) {\n        _isRequests = value;\n        if (_isStarted) {\n            _serverRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of dependency tracking (enabled by default)\n     * @param value if true dependencies will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectDependencies = function (value) {\n        _isDependencies = value;\n        if (_isStarted) {\n            _clientRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of automatic dependency correlation (enabled by default)\n     * @param value if true dependencies will be correlated with requests\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoDependencyCorrelation = function (value, useAsyncHooks) {\n        _isCorrelating = value;\n        _forceClsHooked = useAsyncHooks;\n        if (_isStarted) {\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\n        }\n        return Configuration;\n    };\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        _isDiskRetry = value;\n        _diskRetryInterval = resendInterval;\n        _diskRetryMaxBytes = maxBytesOnDisk;\n        if (exports.defaultClient && exports.defaultClient.channel) {\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\n        }\n        return Configuration;\n    };\n    /**\n     * Enables debug and warning logging for AppInsights itself.\n     * @param enableDebugLogging if true, enables debug logging\n     * @param enableWarningLogging if true, enables warning logging\n     * @returns {Configuration} this class\n     */\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\n        Logging.enableDebug = enableDebugLogging;\n        Logging.disableWarnings = !enableWarningLogging;\n        return Configuration;\n    };\n    /**\n     * Enables communication with Application Insights Live Metrics.\n     * @param enable if true, enables communication with the live metrics service\n     */\n    Configuration.setSendLiveMetrics = function (enable) {\n        if (enable === void 0) { enable = false; }\n        if (!exports.defaultClient) {\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\n            return Configuration;\n        }\n        if (!exports.liveMetricsClient && enable) {\n            // No qps client exists. Create one and prepare it to be enabled at .start()\n            exports.liveMetricsClient = new QuickPulseClient(exports.defaultClient.config.instrumentationKey);\n            _performanceLiveMetrics = new AutoCollectPerformance(exports.liveMetricsClient, 1000, true);\n            exports.liveMetricsClient.addCollector(_performanceLiveMetrics);\n            exports.defaultClient.quickPulseClient = exports.liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via PerformanceMetricsTelemetryProcessor\n        }\n        else if (exports.liveMetricsClient) {\n            // qps client already exists; enable/disable it\n            exports.liveMetricsClient.enable(enable);\n        }\n        _isSendingLiveMetrics = enable;\n        return Configuration;\n    };\n    // Convenience shortcut to ApplicationInsights.start\n    Configuration.start = start;\n    return Configuration;\n}());\nexports.Configuration = Configuration;\n/**\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\n*/\nfunction dispose() {\n    exports.defaultClient = null;\n    _isStarted = false;\n    if (_console) {\n        _console.dispose();\n    }\n    if (_exceptions) {\n        _exceptions.dispose();\n    }\n    if (_performance) {\n        _performance.dispose();\n    }\n    if (_nativePerformance) {\n        _nativePerformance.dispose();\n    }\n    if (_serverRequests) {\n        _serverRequests.dispose();\n    }\n    if (_clientRequests) {\n        _clientRequests.dispose();\n    }\n    if (exports.liveMetricsClient) {\n        exports.liveMetricsClient.enable(false);\n        _isSendingLiveMetrics = false;\n        exports.liveMetricsClient = undefined;\n    }\n}\nexports.dispose = dispose;\n//# sourceMappingURL=applicationinsights.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar azuresdk = require(\"./azure-coretracing.pub\");\nexports.azuresdk = azuresdk;\nvar bunyan = require(\"./bunyan.pub\");\nexports.bunyan = bunyan;\nvar consolePub = require(\"./console.pub\");\nexports.console = consolePub;\nvar mongodbCore = require(\"./mongodb-core.pub\");\nexports.mongodbCore = mongodbCore;\nvar mongodb = require(\"./mongodb.pub\");\nexports.mongodb = mongodb;\nvar mysql = require(\"./mysql.pub\");\nexports.mysql = mysql;\nvar pgPool = require(\"./pg-pool.pub\");\nexports.pgPool = pgPool;\nvar pg = require(\"./pg.pub\");\nexports.pg = pg;\nvar redis = require(\"./redis.pub\");\nexports.redis = redis;\nvar tedious = require(\"./tedious.pub\");\nexports.tedious = tedious;\nvar winston = require(\"./winston.pub\");\nexports.winston = winston;\nfunction enable() {\n    bunyan.enable();\n    consolePub.enable();\n    mongodbCore.enable();\n    mongodb.enable();\n    mysql.enable();\n    pg.enable();\n    pgPool.enable();\n    redis.enable();\n    winston.enable();\n    azuresdk.enable();\n    tedious.enable();\n}\nexports.enable = enable;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nexports.AzureMonitorSymbol = \"Azure_Monitor_Tracer\";\n/**\n * By default, @azure/core-tracing default tracer is a NoopTracer.\n * This patching changes the default tracer to a patched BasicTracer\n * which emits ended spans as diag-channel events.\n *\n * The @opentelemetry/tracing package must be installed to use these patches\n * https://www.npmjs.com/package/@opentelemetry/tracing\n * @param coreTracing\n */\nvar azureCoreTracingPatchFunction = function (coreTracing) {\n    try {\n        var BasicTracer = require(\"@opentelemetry/tracing\").BasicTracer;\n        var tracerConfig = diagnostic_channel_1.channel.spanContextPropagator\n            ? { scopeManager: diagnostic_channel_1.channel.spanContextPropagator }\n            : undefined;\n        var tracer_1 = new BasicTracer(tracerConfig);\n        // Patch startSpan instead of using spanProcessor.onStart because parentSpan must be\n        // set while the span is constructed\n        var startSpanOriginal_1 = tracer_1.startSpan;\n        tracer_1.startSpan = function (name, options) {\n            // if no parent span was provided, apply the current context\n            if (!options || !options.parent) {\n                var parentOperation = tracer_1.getCurrentSpan();\n                if (parentOperation && parentOperation.operation && parentOperation.operation.traceparent) {\n                    options = __assign({}, options, { parent: {\n                            traceId: parentOperation.operation.traceparent.traceId,\n                            spanId: parentOperation.operation.traceparent.spanId,\n                        } });\n                }\n            }\n            var span = startSpanOriginal_1.call(this, name, options);\n            span.addEvent(\"Application Insights Integration enabled\");\n            return span;\n        };\n        tracer_1.addSpanProcessor(new AzureMonitorSpanProcessor());\n        tracer_1[exports.AzureMonitorSymbol] = true;\n        coreTracing.setTracer(tracer_1); // recordSpanData is not present on BasicTracer - cast to any\n    }\n    catch (e) { /* squash errors */ }\n    return coreTracing;\n};\nvar AzureMonitorSpanProcessor = /** @class */ (function () {\n    function AzureMonitorSpanProcessor() {\n    }\n    AzureMonitorSpanProcessor.prototype.onStart = function (span) {\n        // noop since startSpan is already patched\n    };\n    AzureMonitorSpanProcessor.prototype.onEnd = function (span) {\n        diagnostic_channel_1.channel.publish(\"azure-coretracing\", span);\n    };\n    AzureMonitorSpanProcessor.prototype.shutdown = function () {\n        // noop\n    };\n    return AzureMonitorSpanProcessor;\n}());\nexports.azureCoreTracing = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: azureCoreTracingPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"@azure/core-tracing\", exports.azureCoreTracing);\n}\nexports.enable = enable;\n//# sourceMappingURL=azure-coretracing.pub.js.map","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","module.exports = require(\"@opentelemetry/tracing\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar bunyanPatchFunction = function (originalBunyan) {\n    var originalEmit = originalBunyan.prototype._emit;\n    originalBunyan.prototype._emit = function (rec, noemit) {\n        var ret = originalEmit.apply(this, arguments);\n        if (!noemit) {\n            var str = ret;\n            if (!str) {\n                str = originalEmit.call(this, rec, true);\n            }\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\n        }\n        return ret;\n    };\n    return originalBunyan;\n};\nexports.bunyan = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: bunyanPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\n}\nexports.enable = enable;\n//# sourceMappingURL=bunyan.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar stream_1 = require(\"stream\");\nvar consolePatchFunction = function (originalConsole) {\n    var aiLoggingOutStream = new stream_1.Writable();\n    var aiLoggingErrStream = new stream_1.Writable();\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\n    // We create a version which publishes to the channel and also to stdout/stderr\n    aiLoggingOutStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\n        return true;\n    };\n    aiLoggingErrStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\n        return true;\n    };\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\n    var _loop_1 = function (method) {\n        var originalMethod = originalConsole[method];\n        if (originalMethod) {\n            originalConsole[method] = function () {\n                if (aiLoggingConsole[method]) {\n                    try {\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\n                    }\n                    catch (e) {\n                        // Ignore errors; allow the original method to throw if necessary\n                    }\n                }\n                return originalMethod.apply(originalConsole, arguments);\n            };\n        }\n    };\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\n        var method = consoleMethods_1[_i];\n        _loop_1(method);\n    }\n    return originalConsole;\n};\nexports.console = {\n    versionSpecifier: \">= 4.0.0\",\n    patch: consolePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\n    // Force patching of console\n    /* tslint:disable-next-line:no-var-requires */\n    require(\"console\");\n}\nexports.enable = enable;\n//# sourceMappingURL=console.pub.js.map","module.exports = require(\"stream\");","module.exports = require(\"console\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbcorePatchFunction = function (originalMongoCore) {\n    var originalConnect = originalMongoCore.Server.prototype.connect;\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.pool.write;\n        this.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.pool.logout;\n        this.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongoCore;\n};\nexports.mongoCore = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: mongodbcorePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbPatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument({\n        operationIdGenerator: {\n            next: function () {\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n            },\n        },\n    });\n    var eventMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true });\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false });\n        }\n    });\n    return originalMongo;\n};\nvar mongodb3PatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\n// In mongodb 3.3.0, mongodb-core was merged into mongodb, so the same patching\n// can be used here. this.s.pool was changed to this.s.coreTopology.s.pool\nvar mongodbcorePatchFunction = function (originalMongo) {\n    var originalConnect = originalMongo.Server.prototype.connect;\n    originalMongo.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.coreTopology.s.pool.write;\n        this.s.coreTopology.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.coreTopology.s.pool.logout;\n        this.s.coreTopology.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongo;\n};\nvar mongodb330PatchFunction = function (originalMongo) {\n    mongodbcorePatchFunction(originalMongo); // apply mongodb-core patches\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = event;\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\nexports.mongo2 = {\n    versionSpecifier: \">= 2.0.0 <= 3.0.5\",\n    patch: mongodbPatchFunction,\n};\nexports.mongo3 = {\n    versionSpecifier: \"> 3.0.5 < 3.3.0\",\n    patch: mongodb3PatchFunction,\n};\nexports.mongo330 = {\n    versionSpecifier: \">= 3.3.0 < 4.0.0\",\n    patch: mongodb330PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo3);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo330);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar path = require(\"path\");\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\n    // The `name` passed in here is for debugging purposes,\n    // to help distinguish which object is being patched.\n    var patchObjectFunction = function (obj, name) {\n        return function (func, cbWrapper) {\n            var originalFunc = obj[func];\n            if (originalFunc) {\n                obj[func] = function mysqlContextPreserver() {\n                    // Find the callback, if there is one\n                    var cbidx = arguments.length - 1;\n                    for (var i = arguments.length - 1; i >= 0; --i) {\n                        if (typeof arguments[i] === \"function\") {\n                            cbidx = i;\n                            break;\n                        }\n                        else if (typeof arguments[i] !== \"undefined\") {\n                            break;\n                        }\n                    }\n                    var cb = arguments[cbidx];\n                    var resultContainer = { result: null, startTime: null, startDate: null };\n                    if (typeof cb === \"function\") {\n                        // Preserve context on the callback.\n                        // If this is one of the functions that we want to track,\n                        // then wrap the callback with the tracking wrapper\n                        if (cbWrapper) {\n                            resultContainer.startTime = process.hrtime();\n                            resultContainer.startDate = new Date();\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\n                        }\n                        else {\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\n                        }\n                    }\n                    var result = originalFunc.apply(this, arguments);\n                    resultContainer.result = result;\n                    return result;\n                };\n            }\n        };\n    };\n    var patchClassMemberFunction = function (classObject, name) {\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\n    };\n    var connectionCallbackFunctions = [\n        \"connect\", \"changeUser\",\n        \"ping\", \"statistics\", \"end\",\n    ];\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\n    // Connection.createQuery is a static method\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\n        return function (err) {\n            var hrDuration = process.hrtime(resultContainer.startTime);\n            /* tslint:disable-next-line:no-bitwise */\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration, time: resultContainer.startDate });\n            cb.apply(this, arguments);\n        };\n    });\n    var poolCallbackFunctions = [\n        \"_enqueueCallback\",\n    ];\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\n    return originalMysql;\n};\nexports.mysql = {\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\n    patch: mysqlPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 142;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 143;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nfunction postgresPool1PatchFunction(originalPgPool) {\n    var originalConnect = originalPgPool.prototype.connect;\n    originalPgPool.prototype.connect = function connect(callback) {\n        if (callback) {\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\n        }\n        return originalConnect.apply(this, arguments);\n    };\n    return originalPgPool;\n}\nexports.postgresPool1 = {\n    versionSpecifier: \">= 1.0.0 < 3.0.0\",\n    patch: postgresPool1PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar events_1 = require(\"events\");\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                // emulate weird internal behavior in pg@6\n                // on success, the callback is called *before* query events are emitted\n                // on failure, the callback is called *instead of* the query emitting events\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\n                // since we are always inserting ourselves as a callback, we have to restore the original\n                // behavior if the user didn't provide one themselves\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // this function takes too many variations of arguments.\n        // this patches any provided callback or creates a new callback if one wasn't provided.\n        // since the callback is always called (if provided) in addition to always having a Promisified\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callback = patchCallback(callback);\n                }\n                else {\n                    data.query.text = config;\n                    // pg v6 will, for some reason, accept both\n                    // client.query(\"...\", undefined, () => {...})\n                    // **and**\n                    // client.query(\"...\", () => {...});\n                    // Internally, precedence is given to the callback argument\n                    if (callback) {\n                        callback = patchCallback(callback);\n                    }\n                    else {\n                        values = patchCallback(values);\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    values = patchCallback(values);\n                }\n                else {\n                    config.callback = patchCallback(config.callback);\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        return queryResult;\n    };\n    return originalPg;\n}\nfunction postgres7PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var _this = this;\n        var callbackProvided = !!callback; // Starting in pg@7.x+, Promise is returned only if !callbackProvided\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // Only try to wrap the callback if it is a function. We want to keep the same\n        // behavior of returning a promise only if no callback is provided. Wrapping\n        // a nonfunction makes it a function and pg will interpret it as a callback\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callbackProvided = typeof callback === \"function\";\n                    callback = callbackProvided ? patchCallback(callback) : callback;\n                }\n                else {\n                    data.query.text = config;\n                    if (callback) {\n                        callbackProvided = typeof callback === \"function\";\n                        callback = callbackProvided ? patchCallback(callback) : callback;\n                    }\n                    else {\n                        callbackProvided = typeof values === \"function\";\n                        values = callbackProvided ? patchCallback(values) : values;\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callbackProvided = typeof callback === \"function\";\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    callbackProvided = typeof values === \"function\";\n                    values = callbackProvided ? patchCallback(values) : values;\n                }\n                else {\n                    callbackProvided = typeof config.callback === \"function\";\n                    config.callback = callbackProvided ? patchCallback(config.callback) : config.callback;\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        if (!callbackProvided) {\n            // no callback, so create a pass along promise\n            return queryResult\n                // pass resolved promise after publishing the event\n                .then(function (result) {\n                patchCallback()(undefined, result);\n                return new _this._Promise(function (resolve, reject) {\n                    resolve(result);\n                });\n            })\n                // pass along rejected promise after publishing the error\n                .catch(function (error) {\n                patchCallback()(error, undefined);\n                return new _this._Promise(function (resolve, reject) {\n                    reject(error);\n                });\n            });\n        }\n        return queryResult;\n    };\n    return originalPg;\n}\nexports.postgres6 = {\n    versionSpecifier: \"6.*\",\n    patch: postgres6PatchFunction,\n};\nexports.postgres7 = {\n    versionSpecifier: \">=7.* <=8.*\",\n    patch: postgres7PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres7);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg.pub.js.map","module.exports = require(\"events\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar redisPatchFunction = function (originalRedis) {\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\n    // Note: This is mixing together both context tracking and dependency tracking\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\n        if (commandObj) {\n            var cb_1 = commandObj.callback;\n            if (!cb_1 || !cb_1.pubsubBound) {\n                var address_1 = this.address;\n                var startTime_1 = process.hrtime();\n                var startDate_1 = new Date();\n                // Note: augmenting the callback on internal_send_command is correct for context\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\n                // which higher levels expect in some cases\n                // However, the only other option is to intercept every individual command.\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\n                    var hrDuration = process.hrtime(startTime_1);\n                    /* tslint:disable-next-line:no-bitwise */\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result, time: startDate_1 });\n                    if (typeof cb_1 === \"function\") {\n                        cb_1.apply(this, arguments);\n                    }\n                });\n                commandObj.callback.pubsubBound = true;\n            }\n        }\n        return originalSend.call(this, commandObj);\n    };\n    return originalRedis;\n};\nexports.redis = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: redisPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar tediousPatchFunction = function (originalTedious) {\n    var originalMakeRequest = originalTedious.Connection.prototype.makeRequest;\n    originalTedious.Connection.prototype.makeRequest = function makeRequest() {\n        function getPatchedCallback(origCallback) {\n            var start = process.hrtime();\n            var data = {\n                query: {},\n                database: {\n                    host: null,\n                    port: null,\n                },\n                result: null,\n                error: null,\n                duration: 0,\n            };\n            return diagnostic_channel_1.channel.bindToContext(function (err, rowCount, rows) {\n                var end = process.hrtime(start);\n                data = __assign({}, data, { database: {\n                        host: this.connection.config.server,\n                        port: this.connection.config.options.port,\n                    }, result: !err && { rowCount: rowCount, rows: rows }, query: {\n                        text: this.parametersByName.statement.value,\n                    }, error: err, duration: Math.ceil((end[0] * 1e3) + (end[1] / 1e6)) });\n                diagnostic_channel_1.channel.publish(\"tedious\", data);\n                origCallback.call(this, err, rowCount, rows);\n            });\n        }\n        var request = arguments[0];\n        arguments[0].callback = getPatchedCallback(request.callback);\n        originalMakeRequest.apply(this, arguments);\n    };\n    return originalTedious;\n};\nexports.tedious = {\n    versionSpecifier: \">= 6.0.0 < 9.0.0\",\n    patch: tediousPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"tedious\", exports.tedious);\n}\nexports.enable = enable;\n//# sourceMappingURL=tedious.pub.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\n// register a \"filter\" with each logger that publishes the data about to be logged\nvar winston2PatchFunction = function (originalWinston) {\n    var originalLog = originalWinston.Logger.prototype.log;\n    var curLevels;\n    var loggingFilter = function (level, message, meta) {\n        var levelKind;\n        if (curLevels === originalWinston.config.npm.levels) {\n            levelKind = \"npm\";\n        }\n        else if (curLevels === originalWinston.config.syslog.levels) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\n        return message;\n    };\n    // whenever someone logs, ensure our filter comes last\n    originalWinston.Logger.prototype.log = function log() {\n        curLevels = this.levels;\n        if (!this.filters || this.filters.length === 0) {\n            this.filters = [loggingFilter];\n        }\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\n            this.filters.push(loggingFilter);\n        }\n        return originalLog.apply(this, arguments);\n    };\n    return originalWinston;\n};\nvar winston3PatchFunction = function (originalWinston) {\n    var mapLevelToKind = function (winston, level) {\n        var levelKind;\n        if (winston.config.npm.levels[level] != null) {\n            levelKind = \"npm\";\n        }\n        else if (winston.config.syslog.levels[level] != null) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        return levelKind;\n    };\n    var AppInsightsTransport = /** @class */ (function (_super) {\n        __extends(AppInsightsTransport, _super);\n        function AppInsightsTransport(winston, opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.winston = winston;\n            return _this;\n        }\n        AppInsightsTransport.prototype.log = function (info, callback) {\n            // tslint:disable-next-line:prefer-const - try to obtain level from Symbol(level) afterwards\n            var message = info.message, level = info.level, meta = info.meta, splat = __rest(info, [\"message\", \"level\", \"meta\"]);\n            level = typeof Symbol[\"for\"] === \"function\" ? info[Symbol[\"for\"](\"level\")] : level; // Symbol(level) is uncolorized, so prefer getting it from here\n            message = info instanceof Error ? info : message; // Winston places Errors at info, strings at info.message\n            var levelKind = mapLevelToKind(this.winston, level);\n            meta = meta || {}; // Winston _somtimes_ puts metadata inside meta, so start from here\n            for (var key in splat) {\n                if (splat.hasOwnProperty(key)) {\n                    meta[key] = splat[key];\n                }\n            }\n            diagnostic_channel_1.channel.publish(\"winston\", { message: message, level: level, levelKind: levelKind, meta: meta });\n            callback();\n        };\n        return AppInsightsTransport;\n    }(originalWinston.Transport));\n    // Patch this function\n    function patchedConfigure() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        this.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n    }\n    var origCreate = originalWinston.createLogger;\n    originalWinston.createLogger = function patchedCreate() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        // Add custom app insights transport to the end\n        // Remark: Configure is not available until after createLogger()\n        // and the Logger prototype is not exported in winston 3.x, so\n        // patch both createLogger and configure. Could also call configure\n        // again after createLogger, but that would cause configure to be called\n        // twice per create.\n        var result = origCreate.apply(this, arguments);\n        result.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n        var origConfigure = result.configure;\n        result.configure = function () {\n            origConfigure.apply(this, arguments);\n            patchedConfigure.apply(this, arguments);\n        };\n        return result;\n    };\n    var origRootConfigure = originalWinston.createLogger;\n    originalWinston.configure = function () {\n        origRootConfigure.apply(this, arguments);\n        patchedConfigure.apply(this, arguments);\n    };\n    originalWinston.add(new AppInsightsTransport(originalWinston));\n    return originalWinston;\n};\nexports.winston3 = {\n    versionSpecifier: \"3.x\",\n    patch: winston3PatchFunction,\n};\nexports.winston2 = {\n    versionSpecifier: \"2.x\",\n    patch: winston2PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston3);\n}\nexports.enable = enable;\n//# sourceMappingURL=winston.pub.js.map","'use strict';\n\nconst semver = require('semver');\n\n/**\n * In order to increase node version support, this loads the version of context\n * that is appropriate for the version of on nodejs that is running.\n * Node < v8 - uses AsyncWrap and async-hooks-jl\n * Node >= v8 - uses native async-hooks\n */\nif(process && semver.gte(process.versions.node, '8.0.0')){\n  module.exports = require('./context');\n}else{\n  module.exports = require('./context-legacy');\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n","module.exports = require(\"async_hooks\");","'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst asyncHook = require('async-hook-jl');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\n//const trace = [];\n\nconst invertedProviders = [];\nfor (let key in asyncHook.providers) {\n  invertedProviders[asyncHook.providers[key]] = key;\n}\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  //trace: trace,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    SETTING KEY:' + key + '=' + value + ' in ns:' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('    GETTING KEY:' + key + '=undefined' + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n        util.inspect(this.active, true));\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    GETTING KEY:' + key + '=' + this.active[key] + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATING Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' active:' +\n      util.inspect(this.active, true, 2, true));\n  }\n\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATED Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' context:' +\n      util.inspect(context, true, 2, true));\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' BEFORE RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' AFTER RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(' BEFORE runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n      util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  ENTER ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  EXIT ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' +\n      util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CREATING NAMESPACE ' + name);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  asyncHook.addHooks({\n    init(uid, handle, provider, parentUid, parentHandle) {\n      //parentUid = parentUid || currentUid;  // Suggested usage but appears to work better for tracing modules.\n      currentUid = uid;\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      if (parentUid) {\n        namespace._contexts.set(uid, namespace._contexts.get(parentUid));\n        if (DEBUG_CLS_HOOKED) {\n          debug2('PARENTID: ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + provider);\n        }\n      } else {\n        namespace._contexts.set(currentUid, namespace.active);\n      }\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('INIT ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + invertedProviders[provider]\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n    },\n    pre(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.enter(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    post(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.exit(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    destroy(uid) {\n      currentUid = uid;\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('DESTROY ' + name + ' uid:' + uid + ' context:' + util.inspect(namespace._contexts.get(currentUid))\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n      namespace._contexts.delete(uid);\n    }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\nif (asyncHook._state && !asyncHook._state.enabled) {\n  asyncHook.enable();\n}\n\nfunction debug2(msg) {\n  if (process.env.DEBUG) {\n    process._rawDebug(msg);\n  }\n}\n\n\n/*function debug(from, ns) {\n process._rawDebug('DEBUG: ' + util.inspect({\n from: from,\n currentUid: currentUid,\n context: ns ? ns._contexts.get(currentUid) : 'no ns'\n }, true, 2, true));\n }*/\n\n\nfunction getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}\n\n\n// Add back to callstack\nif (DEBUG_CLS_HOOKED) {\n  var stackChain = require('stack-chain');\n  for (var modifier in stackChain.filter._modifiers) {\n    stackChain.filter.deattach(modifier);\n  }\n}\n","'use strict';\n\nconst AsyncHook = require('./async-hook.js');\n\n// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._asyncHook) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._asyncHook.version === require('./package.json').version) {\n    module.exports = global._asyncHook;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of async-hook-jl found');\n  }\n} else {\n  const stackChain = require('stack-chain');\n\n  // Remove callSites from this module. AsyncWrap doesn't have any callSites\n  // and the hooks are expected to be completely transparent.\n  stackChain.filter.attach(function (error, frames) {\n    return frames.filter(function (callSite) {\n      const filename = callSite.getFileName();\n      // filename is not always a string, for example in case of eval it is\n      // undefined. So check if the filename is defined.\n      return !(filename && filename.slice(0, __dirname.length) === __dirname);\n    });\n  });\n\n  module.exports = global._asyncHook = new AsyncHook();\n}","'use strict';\n\nconst asyncWrap = process.binding('async_wrap');\nconst TIMERWRAP = asyncWrap.Providers.TIMERWRAP;\n\nconst patchs = {\n  'nextTick': require('./patches/next-tick.js'),\n  'promise': require('./patches/promise.js'),\n  'timers': require('./patches/timers.js')\n};\n\nconst ignoreUIDs = new Set();\n\nfunction State() {\n  this.enabled = false;\n  this.counter = 0;\n}\n\nfunction Hooks() {\n  const initFns = this.initFns = [];\n  const preFns = this.preFns = [];\n  const postFns = this.postFns = [];\n  const destroyFns = this.destroyFns = [];\n\n  this.init = function (uid, provider, parentUid, parentHandle) {\n    // Ignore TIMERWRAP, since setTimeout etc. is monkey patched\n    if (provider === TIMERWRAP) {\n      ignoreUIDs.add(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of initFns) {\n      hook(uid, this, provider, parentUid, parentHandle);\n    }\n  };\n\n  this.pre = function (uid) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of preFns) {\n      hook(uid, this);\n    }\n  };\n\n  this.post = function (uid, didThrow) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of postFns) {\n      hook(uid, this, didThrow);\n    }\n  };\n\n  this.destroy = function (uid) {\n    // Cleanup the ignore list if this uid should be ignored\n    if (ignoreUIDs.has(uid)) {\n      ignoreUIDs.delete(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of destroyFns) {\n      hook(uid);\n    }\n  };\n}\n\nHooks.prototype.add = function (hooks) {\n  if (hooks.init) this.initFns.push(hooks.init);\n  if (hooks.pre) this.preFns.push(hooks.pre);\n  if (hooks.post) this.postFns.push(hooks.post);\n  if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n};\n\nfunction removeElement(array, item) {\n  const index = array.indexOf(item);\n  if (index === -1) return;\n  array.splice(index, 1);\n}\n\nHooks.prototype.remove = function (hooks) {\n  if (hooks.init) removeElement(this.initFns, hooks.init);\n  if (hooks.pre) removeElement(this.preFns, hooks.pre);\n  if (hooks.post) removeElement(this.postFns, hooks.post);\n  if (hooks.destroy) removeElement(this.destroyFns, hooks.destroy);\n};\n\nfunction AsyncHook() {\n  this._state = new State();\n  this._hooks = new Hooks();\n\n  // expose version for conflict detection\n  this.version = require('./package.json').version;\n\n  // expose the Providers map\n  this.providers = asyncWrap.Providers;\n\n  // apply patches\n  for (const key of Object.keys(patchs)) {\n    patchs[key].call(this);\n  }\n\n  // setup async wrap\n  if (process.env.hasOwnProperty('NODE_ASYNC_HOOK_WARNING')) {\n    console.warn('warning: you are using async-hook-jl which is unstable.');\n  }\n  asyncWrap.setupHooks({\n    init: this._hooks.init,\n    pre: this._hooks.pre,\n    post: this._hooks.post,\n    destroy: this._hooks.destroy\n  });\n}\nmodule.exports = AsyncHook;\n\nAsyncHook.prototype.addHooks = function (hooks) {\n  this._hooks.add(hooks);\n};\n\nAsyncHook.prototype.removeHooks = function (hooks) {\n  this._hooks.remove(hooks);\n};\n\nAsyncHook.prototype.enable = function () {\n  this._state.enabled = true;\n  asyncWrap.enable();\n};\n\nAsyncHook.prototype.disable = function () {\n  this._state.enabled = false;\n  asyncWrap.disable();\n};","'use strict';\n\nfunction NextTickWrap() {}\n\nmodule.exports = function patch() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const oldNextTick = process.nextTick;\n  process.nextTick = function () {\n    if (!state.enabled) return oldNextTick.apply(process, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback is not a function');\n    }\n\n    const handle = new NextTickWrap();\n    const uid = --state.counter;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if(didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            hooks.post.call(handle, uid, true);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      hooks.destroy.call(null, uid);\n    };\n\n    return oldNextTick.apply(process, args);\n  };\n}\n","'use strict';\n\nfunction PromiseWrap() {}\n\nmodule.exports = function patchPromise() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const Promise = global.Promise;\n\n  /* As per ECMAScript 2015, .catch must be implemented by calling .then, as\n   * such we need needn't patch .catch as well. see:\n   * http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\n   */\n  const oldThen = Promise.prototype.then;\n  Promise.prototype.then = wrappedThen;\n\n  function makeWrappedHandler(fn, handle, uid, isOnFulfilled) {\n    if ('function' !== typeof fn) {\n      return isOnFulfilled\n        ? makeUnhandledResolutionHandler(uid)\n        : makeUnhandledRejectionHandler(uid);\n    }\n\n    return function wrappedHandler() {\n      hooks.pre.call(handle, uid);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        hooks.post.call(handle, uid, false);\n        hooks.destroy.call(null, uid);\n      }\n    };\n  }\n\n  function makeUnhandledResolutionHandler(uid) {\n    return function unhandledResolutionHandler(val) {\n      hooks.destroy.call(null, uid);\n      return val;\n    };\n  }\n\n  function makeUnhandledRejectionHandler(uid) {\n    return function unhandledRejectedHandler(val) {\n      hooks.destroy.call(null, uid);\n      throw val;\n    };\n  }\n\n  function wrappedThen(onFulfilled, onRejected) {\n    if (!state.enabled) return oldThen.call(this, onFulfilled, onRejected);\n\n    const handle = new PromiseWrap();\n    const uid = --state.counter;\n\n    hooks.init.call(handle, uid, 0, null, null);\n\n    return oldThen.call(\n      this,\n      makeWrappedHandler(onFulfilled, handle, uid, true),\n      makeWrappedHandler(onRejected, handle, uid, false)\n    );\n  }\n};\n","'use strict';\n\nconst timers = require('timers');\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\nfunction ImmediateWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\nconst ImmediateMap = new Map();\n\nlet activeCallback = null;\nlet clearedInCallback = false;\n\nmodule.exports = function patch() {\n  patchTimer(this._hooks, this._state, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this._hooks, this._state, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n  patchTimer(this._hooks, this._state, 'setImmediate', 'clearImmediate', ImmediateWrap, ImmediateMap, true);\n\n  global.setTimeout = timers.setTimeout;\n  global.setInterval = timers.setInterval;\n  global.setImmediate = timers.setImmediate;\n\n  global.clearTimeout = timers.clearTimeout;\n  global.clearInterval = timers.clearInterval;\n  global.clearImmediate = timers.clearImmediate;\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('\"callback\" argument must be a function');\n    }\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId = undefined;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      activeCallback = timerId;\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if (didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            // call the post hook\n            hooks.post.call(handle, uid, true);\n            // setInterval won't continue\n            timerMap.delete(timerId);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      activeCallback = null;\n\n      // call the destroy hook if the callback will only be called once\n      if (singleCall || clearedInCallback) {\n        clearedInCallback = false;\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // If clear* was called within the timer callback, then delay the destroy\n    // event to after the post event has been called.\n    if (activeCallback === timerId && timerId !== null) {\n      clearedInCallback = true;\n    }\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    else if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n  this.version = require('./package.json').version;\n}\n\n\nvar SHORTCIRCUIT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCIRCUIT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCIRCUIT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n};\n\nStackFormater.prototype._backup = function () {\n  this._previous = this._formater;\n};\n\nStackFormater.prototype._roolback = function () {\n  if (this._previous === defaultFormater) {\n    this.replace(undefined);\n  } else {\n    this.replace(this._previous);\n  }\n\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nvar SHORTCIRCUIT_FORMATER = false;\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCIRCUIT_CALLSITE) return originalFrames;\n  if (SHORTCIRCUIT_FORMATER) return defaultFormater(error, originalFrames);\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  SHORTCIRCUIT_FORMATER = true;\n  var format = chain.format._formater(error, frames);\n  SHORTCIRCUIT_FORMATER = false;\n\n  return format;\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nfunction FormatErrorString(error) {\n  try {\n    return Error.prototype.toString.call(error);\n  } catch (e) {\n    try {\n      return \"<error: \" + e + \">\";\n    } catch (ee) {\n      return \"<error>\";\n    }\n  }\n}\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(FormatErrorString(error));\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n","'use strict';\n\nvar assert      = require('assert');\nvar wrapEmitter = require('emitter-listener');\n\n/*\n *\n * CONSTANTS\n *\n */\nvar CONTEXTS_SYMBOL = 'cls@contexts';\nvar ERROR_SYMBOL = 'error@context';\n\n// load polyfill if native support is unavailable\nif (!process.addAsyncListener) require('async-listener');\n\nfunction Namespace(name) {\n  this.name   = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set   = [];\n  this.id     = null;\n}\n\nNamespace.prototype.set = function (key, value) {\n  if (!this.active) {\n    throw new Error(\"No context available. ns.run() or ns.bind() must be called first.\");\n  }\n\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function (key) {\n  if (!this.active) return undefined;\n\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function () {\n  return Object.create(this.active);\n};\n\nNamespace.prototype.run = function (fn) {\n  var context = this.createContext();\n  this.enter(context);\n  try {\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function (fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\nNamespace.prototype.bind = function (fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  var self = this;\n  return function () {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function (context) {\n  assert.ok(context, \"context must be provided for entering\");\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function (context) {\n  assert.ok(context, \"context must be provided for exiting\");\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, \"can't remove top context\");\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  var index = this._set.lastIndexOf(context);\n\n  assert.ok(index >= 0, \"context not currently entered; can't exit\");\n  assert.ok(index,      \"can't remove top context\");\n\n  this._set.splice(index, 1);\n};\n\nNamespace.prototype.bindEmitter = function (emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, \"can only bind real EEs\");\n\n  var namespace  = this;\n  var thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) return;\n    if (!listener[CONTEXTS_SYMBOL]) listener[CONTEXTS_SYMBOL] = Object.create(null);\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace : namespace,\n      context   : namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) return unwrapped;\n\n    var wrapped  = unwrapped;\n    var contexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(contexts).forEach(function (name) {\n      var thunk = contexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function (exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction get(name) {\n  return process.namespaces[name];\n}\n\nfunction create(name) {\n  assert.ok(name, \"namespace must be given a name!\");\n\n  var namespace = new Namespace(name);\n  namespace.id = process.addAsyncListener({\n    create : function () { return namespace.active; },\n    before : function (context, storage) { if (storage) namespace.enter(storage); },\n    after  : function (context, storage) { if (storage) namespace.exit(storage); },\n    error  : function (storage) { if (storage) namespace.exit(storage); }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroy(name) {\n  var namespace = get(name);\n\n  assert.ok(namespace,    \"can't delete nonexistent namespace!\");\n  assert.ok(namespace.id, \"don't assign to process.namespaces directly!\");\n\n  process.removeAsyncListener(namespace.id);\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroy(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\nif (!process.namespaces) reset(); // call immediately to set up\n\nmodule.exports = {\n  getNamespace     : get,\n  createNamespace  : create,\n  destroyNamespace : destroy,\n  reset            : reset\n};\n","'use strict';\n\nif (process.addAsyncListener) throw new Error(\"Don't require polyfill unless needed\");\n\nvar shimmer      = require('shimmer')\n  , semver       = require('semver')\n  , wrap         = shimmer.wrap\n  , massWrap     = shimmer.massWrap\n  , wrapCallback = require('./glue.js')\n  , util         = require('util')\n  ;\n\nvar v6plus = semver.gte(process.version, '6.0.0');\nvar v7plus = semver.gte(process.version, '7.0.0');\nvar v8plus = semver.gte(process.version, '8.0.0');\nvar v11plus = semver.gte(process.version, '11.0.0');\n\nvar net = require('net');\n\n// From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\nif (v7plus && !net._normalizeArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2017/03/09\n  net._normalizeArgs = function (args) {\n    if (args.length === 0) {\n      return [{}, null];\n    }\n\n    var arg0 = args[0];\n    var options = {};\n    if (typeof arg0 === 'object' && arg0 !== null) {\n      // (options[...][, cb])\n      options = arg0;\n    } else if (isPipeName(arg0)) {\n      // (path[...][, cb])\n      options.path = arg0;\n    } else {\n      // ([port][, host][...][, cb])\n      options.port = arg0;\n      if (args.length > 1 && typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    if (typeof cb !== 'function')\n      return [options, null];\n    else\n      return [options, cb];\n  }\n} else if (!v7plus && !net._normalizeConnectArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2013/10/30\n  net._normalizeConnectArgs = function (args) {\n    var options = {};\n\n    function toNumber(x) { return (x = Number(x)) >= 0 ? x : false; }\n\n    if (typeof args[0] === 'object' && args[0] !== null) {\n      // connect(options, [cb])\n      options = args[0];\n    }\n    else if (typeof args[0] === 'string' && toNumber(args[0]) === false) {\n      // connect(path, [cb]);\n      options.path = args[0];\n    }\n    else {\n      // connect(port, [host], [cb])\n      options.port = args[0];\n      if (typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    return typeof cb === 'function' ? [options, cb] : [options];\n  };\n}\n\n// In https://github.com/nodejs/node/pull/11796 `_listen2` was renamed\n// `_setUpListenHandle`. It's still aliased as `_listen2`, and currently the\n// Node internals still call the alias - but who knows for how long. So better\n// make sure we use the new name instead if available.\nif ('_setUpListenHandle' in net.Server.prototype) {\n  wrap(net.Server.prototype, '_setUpListenHandle', wrapSetUpListenHandle);\n} else {\n  wrap(net.Server.prototype, '_listen2', wrapSetUpListenHandle);\n}\n\nfunction wrapSetUpListenHandle(original) {\n  return function () {\n    this.on('connection', function (socket) {\n      if (socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n      }\n    });\n\n    try {\n      return original.apply(this, arguments);\n    }\n    finally {\n      // the handle will only not be set in cases where there has been an error\n      if (this._handle && this._handle.onconnection) {\n        this._handle.onconnection = wrapCallback(this._handle.onconnection);\n      }\n    }\n  };\n}\n\nfunction patchOnRead(ctx) {\n  if (ctx && ctx._handle) {\n    var handle = ctx._handle;\n    if (!handle._originalOnread) {\n      handle._originalOnread = handle.onread;\n    }\n    handle.onread = wrapCallback(handle._originalOnread);\n  }\n}\n\nwrap(net.Socket.prototype, 'connect', function (original) {\n  return function () {\n    var args;\n    // Node core uses an internal Symbol here to guard against the edge-case\n    // where the user accidentally passes in an array. As we don't have access\n    // to this Symbol we resort to this hack where we just detect if there is a\n    // symbol or not. Checking for the number of Symbols is by no means a fool\n    // proof solution, but it catches the most basic cases.\n    if (v8plus &&\n        Array.isArray(arguments[0]) &&\n        Object.getOwnPropertySymbols(arguments[0]).length > 0) {\n      // already normalized\n      args = arguments[0];\n    } else {\n      // From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\n      args = v7plus\n        ? net._normalizeArgs(arguments)\n        : net._normalizeConnectArgs(arguments);\n    }\n    if (args[1]) args[1] = wrapCallback(args[1]);\n    var result = original.apply(this, args);\n    patchOnRead(this);\n    return result;\n  };\n});\n\nvar http = require('http');\n\n// NOTE: A rewrite occurred in 0.11 that changed the addRequest signature\n// from (req, host, port, localAddress) to (req, options)\n// Here, I use the longer signature to maintain 0.10 support, even though\n// the rest of the arguments aren't actually used\nwrap(http.Agent.prototype, 'addRequest', function (original) {\n  return function (req) {\n    var onSocket = req.onSocket;\n    req.onSocket = wrapCallback(function (socket) {\n      patchOnRead(socket);\n      return onSocket.apply(this, arguments);\n    });\n    return original.apply(this, arguments);\n  };\n});\n\nvar childProcess = require('child_process');\n\nfunction wrapChildProcess(child) {\n  if (Array.isArray(child.stdio)) {\n    child.stdio.forEach(function (socket) {\n      if (socket && socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n        wrap(socket._handle, 'close', activatorFirst);\n      }\n    });\n  }\n\n  if (child._handle) {\n    child._handle.onexit = wrapCallback(child._handle.onexit);\n  }\n}\n\n// iojs v2.0.0+\nif (childProcess.ChildProcess) {\n  wrap(childProcess.ChildProcess.prototype, 'spawn', function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(this);\n      return result;\n    };\n  });\n} else {\n  massWrap(childProcess, [\n    'execFile', // exec is implemented in terms of execFile\n    'fork',\n    'spawn'\n  ], function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(result);\n      return result;\n    };\n  });\n}\n\n// need unwrapped nextTick for use within < 0.9 async error handling\nif (!process._fatalException) {\n  process._originalNextTick = process.nextTick;\n}\n\nvar processors = [];\nif (process._nextDomainTick) processors.push('_nextDomainTick');\nif (process._tickDomainCallback) processors.push('_tickDomainCallback');\n\nmassWrap(\n  process,\n  processors,\n  activator\n);\nwrap(process, 'nextTick', activatorFirst);\n\nvar asynchronizers = [\n  'setTimeout',\n  'setInterval'\n];\nif (global.setImmediate) asynchronizers.push('setImmediate');\n\nvar timers = require('timers');\nvar patchGlobalTimers = global.setTimeout === timers.setTimeout;\n\nmassWrap(\n  timers,\n  asynchronizers,\n  activatorFirst\n);\n\nif (patchGlobalTimers) {\n  massWrap(\n    global,\n    asynchronizers,\n    activatorFirst\n  );\n}\n\nvar dns = require('dns');\nmassWrap(\n  dns,\n  [\n    'lookup',\n    'resolve',\n    'resolve4',\n    'resolve6',\n    'resolveCname',\n    'resolveMx',\n    'resolveNs',\n    'resolveTxt',\n    'resolveSrv',\n    'reverse'\n  ],\n  activator\n);\n\nif (dns.resolveNaptr) wrap(dns, 'resolveNaptr', activator);\n\nvar fs = require('fs');\nmassWrap(\n  fs,\n  [\n    'watch',\n    'rename',\n    'truncate',\n    'chown',\n    'fchown',\n    'chmod',\n    'fchmod',\n    'stat',\n    'lstat',\n    'fstat',\n    'link',\n    'symlink',\n    'readlink',\n    'realpath',\n    'unlink',\n    'rmdir',\n    'mkdir',\n    'readdir',\n    'close',\n    'open',\n    'utimes',\n    'futimes',\n    'fsync',\n    'write',\n    'read',\n    'readFile',\n    'writeFile',\n    'appendFile',\n    'watchFile',\n    'unwatchFile',\n    \"exists\",\n  ],\n  activator\n);\n\n// only wrap lchown and lchmod on systems that have them.\nif (fs.lchown) wrap(fs, 'lchown', activator);\nif (fs.lchmod) wrap(fs, 'lchmod', activator);\n\n// only wrap ftruncate in versions of node that have it\nif (fs.ftruncate) wrap(fs, 'ftruncate', activator);\n\n// Wrap zlib streams\nvar zlib;\ntry { zlib = require('zlib'); } catch (err) { }\nif (zlib && zlib.Deflate && zlib.Deflate.prototype) {\n  var proto = Object.getPrototypeOf(zlib.Deflate.prototype);\n  if (proto._transform) {\n    // streams2\n    wrap(proto, \"_transform\", activator);\n  }\n  else if (proto.write && proto.flush && proto.end) {\n    // plain ol' streams\n    massWrap(\n      proto,\n      [\n        'write',\n        'flush',\n        'end'\n      ],\n      activator\n    );\n  }\n}\n\n// Wrap Crypto\nvar crypto;\ntry { crypto = require('crypto'); } catch (err) { }\nif (crypto) {\n\n  var toWrap = [\n      'pbkdf2',\n      'randomBytes',\n  ];\n  if (!v11plus) {\n    toWrap.push('pseudoRandomBytes');\n  }\n\n  massWrap(crypto, toWrap, activator);\n}\n\n// It is unlikely that any userspace promise implementations have a native\n// implementation of both Promise and Promise.toString.\nvar instrumentPromise = !!global.Promise &&\n    Promise.toString() === 'function Promise() { [native code] }' &&\n    Promise.toString.toString() === 'function toString() { [native code] }';\n\n// Check that global Promise is native\nif (instrumentPromise) {\n  // shoult not use any methods that have already been wrapped\n  var promiseListener = process.addAsyncListener({\n    create: function create() {\n      instrumentPromise = false;\n    }\n  });\n\n  // should not resolve synchronously\n  global.Promise.resolve(true).then(function notSync() {\n    instrumentPromise = false;\n  });\n\n  process.removeAsyncListener(promiseListener);\n}\n\n/*\n * Native promises use the microtask queue to make all callbacks run\n * asynchronously to avoid Zalgo issues. Since the microtask queue is not\n * exposed externally, promises need to be modified in a fairly invasive and\n * complex way.\n *\n * The async boundary in promises that must be patched is between the\n * fulfillment of the promise and the execution of any callback that is waiting\n * for that fulfillment to happen. This means that we need to trigger a create\n * when resolve or reject is called and trigger before, after and error handlers\n * around the callback execution. There may be multiple callbacks for each\n * fulfilled promise, so handlers will behave similar to setInterval where\n * there may be multiple before after and error calls for each create call.\n *\n * async-listener monkeypatching has one basic entry point: `wrapCallback`.\n * `wrapCallback` should be called when create should be triggered and be\n * passed a function to wrap, which will execute the body of the async work.\n * The resolve and reject calls can be modified fairly easily to call\n * `wrapCallback`, but at the time of resolve and reject all the work to be done\n * on fulfillment may not be defined, since a call to then, chain or fetch can\n * be made even after the promise has been fulfilled. To get around this, we\n * create a placeholder function which will call a function passed into it,\n * since the call to the main work is being made from within the wrapped\n * function, async-listener will work correctly.\n *\n * There is another complication with monkeypatching Promises. Calls to then,\n * chain and catch each create new Promises that are fulfilled internally in\n * different ways depending on the return value of the callback. When the\n * callback return a Promise, the new Promise is resolved asynchronously after\n * the returned Promise has been also been resolved. When something other than\n * a promise is resolved the resolve call for the new Promise is put in the\n * microtask queue and asynchronously resolved.\n *\n * Then must be wrapped so that its returned promise has a wrapper that can be\n * used to invoke further continuations. This wrapper cannot be created until\n * after the callback has run, since the callback may return either a promise\n * or another value. Fortunately we already have a wrapper function around the\n * callback we can use (the wrapper created by resolve or reject).\n *\n * By adding an additional argument to this wrapper, we can pass in the\n * returned promise so it can have its own wrapper appended. the wrapper\n * function can the call the callback, and take action based on the return\n * value. If a promise is returned, the new Promise can proxy the returned\n * Promise's wrapper (this wrapper may not exist yet, but will by the time the\n * wrapper needs to be invoked). Otherwise, a new wrapper can be create the\n * same way as in resolve and reject. Since this wrapper is created\n * synchronously within another wrapper, it will properly appear as a\n * continuation from within the callback.\n */\n\nif (instrumentPromise) {\n  wrapPromise();\n}\n\nfunction wrapPromise() {\n  var Promise = global.Promise;\n\n  // Updates to this class should also be applied to the the ES6 version\n  // in es6-wrapped-promise.js.\n  function wrappedPromise(executor) {\n    if (!(this instanceof wrappedPromise)) {\n      return Promise(executor);\n    }\n\n    if (typeof executor !== 'function') {\n      return new Promise(executor);\n    }\n\n    var context, args;\n    var promise = new Promise(wrappedExecutor);\n    promise.__proto__ = wrappedPromise.prototype;\n\n    try {\n      executor.apply(context, args);\n    } catch (err) {\n      args[1](err);\n    }\n\n    return promise;\n\n    function wrappedExecutor(resolve, reject) {\n      context = this;\n      args = [wrappedResolve, wrappedReject];\n\n      // These wrappers create a function that can be passed a function and an argument to\n      // call as a continuation from the resolve or reject.\n      function wrappedResolve(val) {\n        ensureAslWrapper(promise, false);\n        return resolve(val);\n      }\n\n      function wrappedReject(val) {\n        ensureAslWrapper(promise, false);\n        return reject(val);\n      }\n    }\n  }\n\n  util.inherits(wrappedPromise, Promise);\n\n  wrap(Promise.prototype, 'then', wrapThen);\n  // Node.js <v7 only, alias for .then\n  if (Promise.prototype.chain) {\n    wrap(Promise.prototype, 'chain', wrapThen);\n  }\n\n  if (v6plus) {\n    global.Promise = require('./es6-wrapped-promise.js')(Promise, ensureAslWrapper);\n  } else {\n    var PromiseFunctions = [\n      'all',\n      'race',\n      'reject',\n      'resolve',\n      'accept',  // Node.js <v7 only\n      'defer'    // Node.js <v7 only\n    ];\n\n    PromiseFunctions.forEach(function(key) {\n      // don't break `in` by creating a key for undefined entries\n      if (typeof Promise[key] === 'function') {\n        wrappedPromise[key] = Promise[key];\n      }\n    });\n    global.Promise = wrappedPromise\n  }\n\n  function ensureAslWrapper(promise, overwrite) {\n    if (!promise.__asl_wrapper || overwrite) {\n      promise.__asl_wrapper = wrapCallback(propagateAslWrapper);\n    }\n  }\n\n  function propagateAslWrapper(ctx, fn, result, next) {\n    var nextResult;\n    try {\n      nextResult = fn.call(ctx, result);\n      return {returnVal: nextResult, error: false}\n    } catch (err) {\n      return {errorVal: err, error: true}\n    } finally {\n      // Wrap any resulting futures as continuations.\n      if (nextResult instanceof Promise) {\n        next.__asl_wrapper = function proxyWrapper() {\n          var aslWrapper = nextResult.__asl_wrapper || propagateAslWrapper;\n          return aslWrapper.apply(this, arguments);\n        }\n      } else {\n        ensureAslWrapper(next, true);\n      }\n    }\n  }\n\n  function wrapThen(original) {\n    return function wrappedThen() {\n      var promise = this;\n      var next = original.apply(promise, Array.prototype.map.call(arguments, bind));\n\n      next.__asl_wrapper = function proxyWrapper(ctx, fn, val, last) {\n        if (promise.__asl_wrapper) {\n          promise.__asl_wrapper(ctx, function () {}, null, next);\n          return next.__asl_wrapper(ctx, fn, val, last);\n        }\n        return propagateAslWrapper(ctx, fn, val, last);\n      }\n\n      return next;\n\n      // wrap callbacks (success, error) so that the callbacks will be called as a\n      // continuations of the resolve or reject call using the __asl_wrapper created above.\n      function bind(fn) {\n        if (typeof fn !== 'function') return fn;\n        return wrapCallback(function (val) {\n          var result = (promise.__asl_wrapper || propagateAslWrapper)(this, fn, val, next);\n          if (result.error) {\n            throw result.errorVal\n          } else {\n            return result.returnVal\n          }\n        });\n      }\n    }\n  }\n}\n\n// Shim activator for functions that have callback last\nfunction activator(fn) {\n  var fallback = function () {\n    var args;\n    var cbIdx = arguments.length - 1;\n    if (typeof arguments[cbIdx] === \"function\") {\n      args = Array(arguments.length)\n      for (var i = 0; i < arguments.length - 1; i++) {\n        args[i] = arguments[i];\n      }\n      args[cbIdx] = wrapCallback(arguments[cbIdx]);\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (a, cb) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, cb);\n      };\n    case 3:\n      return function (a, b, cb) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, cb);\n      };\n    case 4:\n      return function (a, b, c, cb) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, cb);\n      };\n    case 5:\n      return function (a, b, c, d, cb) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, cb);\n      };\n    case 6:\n      return function (a, b, c, d, e, cb) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, e, cb);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// Shim activator for functions that have callback first\nfunction activatorFirst(fn) {\n  var fallback = function () {\n    var args;\n    if (typeof arguments[0] === \"function\") {\n      args = Array(arguments.length)\n      args[0] = wrapCallback(arguments[0]);\n      for (var i = 1; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (cb, a) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a);\n      };\n    case 3:\n      return function (cb, a, b) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b);\n      };\n    case 4:\n      return function (cb, a, b, c) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c);\n      };\n    case 5:\n      return function (cb, a, b, c, d) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d);\n      };\n    case 6:\n      return function (cb, a, b, c, d, e) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d, e);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// taken from node master on 2017/03/09\nfunction toNumber(x) {\n  return (x = Number(x)) >= 0 ? x : false;\n}\n\n// taken from node master on 2017/03/09\nfunction isPipeName(s) {\n  return typeof s === 'string' && toNumber(s) === false;\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","var wrap = require('shimmer').wrap;\n\n/*\n *\n * CONSTANTS\n *\n */\nvar HAS_CREATE_AL = 1 << 0;\nvar HAS_BEFORE_AL = 1 << 1;\nvar HAS_AFTER_AL = 1 << 2;\nvar HAS_ERROR_AL = 1 << 3;\n\n/**\n * There is one list of currently active listeners that is mutated in place by\n * addAsyncListener and removeAsyncListener. This complicates error-handling,\n * for reasons that are discussed below.\n */\nvar listeners = [];\n\n/**\n * There can be multiple listeners with the same properties, so disambiguate\n * them by assigning them an ID at creation time.\n */\nvar uid = 0;\n\n/**\n * Ensure that errors coming from within listeners are handed off to domains,\n * process._fatalException, or uncaughtException without being treated like\n * user errors.\n */\nvar inAsyncTick = false;\n\n/**\n * Because asynchronous contexts can be nested, and errors can come from anywhere\n * in the stack, a little extra work is required to keep track of where in the\n * nesting we are. Because JS arrays are frequently mutated in place\n */\nvar listenerStack = [];\n\n/**\n * The error handler on a listener can capture errors thrown during synchronous\n * execution immediately after the listener is added. To capture both\n * synchronous and asynchronous errors, the error handler just uses the\n * \"global\" list of active listeners, and the rest of the code ensures that the\n * listener list is correct by using a stack of listener lists during\n * asynchronous execution.\n */\nvar asyncCatcher;\n\n/**\n * The guts of the system -- called each time an asynchronous event happens\n * while one or more listeners are active.\n */\nvar asyncWrap;\n\n/**\n * Simple helper function that's probably faster than using Array\n * filter methods and can be inlined.\n */\nfunction union(dest, added) {\n  var destLength = dest.length;\n  var addedLength = added.length;\n  var returned = [];\n\n  if (destLength === 0 && addedLength === 0) return returned;\n\n  for (var j  = 0; j < destLength; j++) returned[j] = dest[j];\n\n  if (addedLength === 0) return returned;\n\n  for (var i = 0; i < addedLength; i++) {\n    var missing = true;\n    for (j = 0; j < destLength; j++) {\n      if (dest[j].uid === added[i].uid) {\n        missing = false;\n        break;\n      }\n    }\n    if (missing) returned.push(added[i]);\n  }\n\n  return returned;\n}\n\n/*\n * For performance, split error-handlers and asyncCatcher up into two separate\n * code paths.\n */\n\n// 0.9+\nif (process._fatalException) {\n  /**\n   * Error handlers on listeners can throw, the catcher needs to be able to\n   * discriminate between exceptions thrown by user code, and exceptions coming\n   * from within the catcher itself. Use a global to keep track of which state\n   * the catcher is currently in.\n   */\n  var inErrorTick = false;\n\n  /**\n   * Throwing always happens synchronously. If the current array of values for\n   * the current list of asyncListeners is put in a module-scoped variable right\n   * before a call that can throw, it will always be correct when the error\n   * handlers are run.\n   */\n  var errorValues;\n\n  asyncCatcher = function asyncCatcher(er) {\n    var length = listeners.length;\n    if (inErrorTick || length === 0) return false;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    inErrorTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n\n      var value = errorValues && errorValues[listener.uid];\n      handled = listener.error(value, er) || handled;\n    }\n    inErrorTick = false;\n\n    /* Test whether there are any listener arrays on the stack. In the case of\n     * synchronous throws when the listener is active, there may have been\n     * none pushed yet.\n     */\n    if (listenerStack.length > 0) listeners = listenerStack.pop();\n    errorValues = undefined;\n\n    return handled && !inAsyncTick;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      // put the current values where the catcher can see them\n      errorValues = values;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned = original.apply(this, arguments);\n\n      /*\n       * after handlers (not run if original throws)\n       */\n      inAsyncTick = true;\n      for (i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_AFTER_AL) > 0) {\n          list[i].after(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // back to the previous listener list on the stack\n      listeners = listenerStack.pop();\n      errorValues = undefined;\n\n      return returned;\n    };\n  };\n\n  wrap(process, '_fatalException', function (_fatalException) {\n    return function _asyncFatalException(er) {\n      return asyncCatcher(er) || _fatalException(er);\n    };\n  });\n}\n// 0.8 and below\nelse {\n  /**\n   * If an error handler in asyncWrap throws, the process must die. Under 0.8\n   * and earlier the only way to put a bullet through the head of the process\n   * is to rethrow from inside the exception handler, so rethrow and set\n   * errorThrew to tell the uncaughtHandler what to do.\n   */\n  var errorThrew = false;\n\n  /**\n   * Under Node 0.8, this handler *only* handles synchronously thrown errors.\n   * This simplifies it, which almost but not quite makes up for the hit taken\n   * by putting everything in a try-catch.\n   */\n  asyncCatcher = function uncaughtCatcher(er) {\n    // going down hard\n    if (errorThrew) throw er;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    var length = listeners.length;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n      handled = listener.error(null, er) || handled;\n    }\n\n    /* Rethrow if one of the before / after handlers fire, which will bring the\n     * process down immediately.\n     */\n    if (!handled && inAsyncTick) throw er;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      /*jshint maxdepth:4*/\n\n      // after() handlers don't run if threw\n      var threw = false;\n\n      // ...unless the error is handled\n      var handled = false;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned;\n      try {\n        returned = original.apply(this, arguments);\n      }\n      catch (er) {\n        threw = true;\n        for (var i = 0; i < length; ++i) {\n          if ((listeners[i].flags & HAS_ERROR_AL) == 0) continue;\n          try {\n            handled = listeners[i].error(values[list[i].uid], er) || handled;\n          }\n          catch (x) {\n            errorThrew = true;\n            throw x;\n          }\n        }\n\n        if (!handled) {\n          // having an uncaughtException handler here alters crash semantics\n          process.removeListener('uncaughtException', asyncCatcher);\n          process._originalNextTick(function () {\n            process.addListener('uncaughtException', asyncCatcher);\n          });\n\n          throw er;\n        }\n      }\n      finally {\n        /*\n         * after handlers (not run if original throws)\n         */\n        if (!threw || handled) {\n          inAsyncTick = true;\n          for (i = 0; i < length; ++i) {\n            if ((list[i].flags & HAS_AFTER_AL) > 0) {\n              list[i].after(this, values[list[i].uid]);\n            }\n          }\n          inAsyncTick = false;\n        }\n\n        // back to the previous listener list on the stack\n        listeners = listenerStack.pop();\n      }\n\n\n      return returned;\n    };\n  };\n\n  // will be the first to fire if async-listener is the first module loaded\n  process.addListener('uncaughtException', asyncCatcher);\n}\n\n// for performance in the case where there are no handlers, just the listener\nfunction simpleWrap(original, list, length) {\n  inAsyncTick = true;\n  for (var i = 0; i < length; ++i) {\n    var listener = list[i];\n    if (listener.create) listener.create(listener.data);\n  }\n  inAsyncTick = false;\n\n  // still need to make sure nested async calls are made in the context\n  // of the listeners active at their creation\n  return function () {\n    listenerStack.push(listeners);\n    listeners = union(list, listeners);\n\n    var returned = original.apply(this, arguments);\n\n    listeners = listenerStack.pop();\n\n    return returned;\n  };\n}\n\n/**\n * Called each time an asynchronous function that's been monkeypatched in\n * index.js is called. If there are no listeners, return the function\n * unwrapped.  If there are any asyncListeners and any of them have callbacks,\n * pass them off to asyncWrap for later use, otherwise just call the listener.\n */\nfunction wrapCallback(original) {\n  var length = listeners.length;\n\n  // no context to capture, so avoid closure creation\n  if (length === 0) return original;\n\n  // capture the active listeners as of when the wrapped function was called\n  var list = listeners.slice();\n\n  for (var i = 0; i < length; ++i) {\n    if (list[i].flags > 0) return asyncWrap(original, list, length);\n  }\n\n  return simpleWrap(original, list, length);\n}\n\nfunction AsyncListener(callbacks, data) {\n  if (typeof callbacks.create === 'function') {\n    this.create = callbacks.create;\n    this.flags |= HAS_CREATE_AL;\n  }\n\n  if (typeof callbacks.before === 'function') {\n    this.before = callbacks.before;\n    this.flags |= HAS_BEFORE_AL;\n  }\n\n  if (typeof callbacks.after === 'function') {\n    this.after = callbacks.after;\n    this.flags |= HAS_AFTER_AL;\n  }\n\n  if (typeof callbacks.error === 'function') {\n    this.error = callbacks.error;\n    this.flags |= HAS_ERROR_AL;\n  }\n\n  this.uid = ++uid;\n  this.data = data === undefined ? null : data;\n}\nAsyncListener.prototype.create = undefined;\nAsyncListener.prototype.before = undefined;\nAsyncListener.prototype.after  = undefined;\nAsyncListener.prototype.error  = undefined;\nAsyncListener.prototype.data   = undefined;\nAsyncListener.prototype.uid    = 0;\nAsyncListener.prototype.flags  = 0;\n\nfunction createAsyncListener(callbacks, data) {\n  if (typeof callbacks !== 'object' || !callbacks) {\n    throw new TypeError('callbacks argument must be an object');\n  }\n\n  if (callbacks instanceof AsyncListener) {\n    return callbacks;\n  }\n  else {\n    return new AsyncListener(callbacks, data);\n  }\n}\n\nfunction addAsyncListener(callbacks, data) {\n  var listener;\n  if (!(callbacks instanceof AsyncListener)) {\n    listener = createAsyncListener(callbacks, data);\n  }\n  else {\n    listener = callbacks;\n  }\n\n  // Make sure the listener isn't already in the list.\n  var registered = false;\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      registered = true;\n      break;\n    }\n  }\n\n  if (!registered) listeners.push(listener);\n\n  return listener;\n}\n\nfunction removeAsyncListener(listener) {\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      listeners.splice(i, 1);\n      break;\n    }\n  }\n}\n\nprocess.createAsyncListener = createAsyncListener;\nprocess.addAsyncListener    = addAsyncListener;\nprocess.removeAsyncListener = removeAsyncListener;\n\nmodule.exports = wrapCallback;\n","module.exports = require(\"net\");","module.exports = require(\"dns\");","module.exports = require(\"crypto\");","'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n","\"use strict\";\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectConsole = (function () {\n    function AutoCollectConsole(client) {\n        if (!!AutoCollectConsole.INSTANCE) {\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\n        }\n        this._client = client;\n        AutoCollectConsole.INSTANCE = this;\n    }\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectConsole.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectConsole.prototype.dispose = function () {\n        AutoCollectConsole.INSTANCE = null;\n        this.enable(false, false);\n    };\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\n    return AutoCollectConsole;\n}());\nmodule.exports = AutoCollectConsole;\n//# sourceMappingURL=Console.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({ exception: message });\n        }\n        else {\n            // Message can have a trailing newline\n            if (message.lastIndexOf(\"\\n\") == message.length - 1) {\n                message = message.substring(0, message.length - 1);\n            }\n            client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Generated_1 = require(\"./Generated\");\nvar RemoteDependencyDataConstants = (function () {\n    function RemoteDependencyDataConstants() {\n    }\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\n    return RemoteDependencyDataConstants;\n}());\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\nfunction domainSupportsProperties(domain) {\n    return \"properties\" in domain ||\n        domain instanceof Generated_1.EventData ||\n        domain instanceof Generated_1.ExceptionData ||\n        domain instanceof Generated_1.MessageData ||\n        domain instanceof Generated_1.MetricData ||\n        domain instanceof Generated_1.PageViewData ||\n        domain instanceof Generated_1.RemoteDependencyData ||\n        domain instanceof Generated_1.RequestData;\n}\nexports.domainSupportsProperties = domainSupportsProperties;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of AvailabilityData represent the result of executing an availability test.\n */\nvar AvailabilityData = (function (_super) {\n    __extends(AvailabilityData, _super);\n    function AvailabilityData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return AvailabilityData;\n}(Domain));\nmodule.exports = AvailabilityData;\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nvar ContextTagKeys = (function () {\n    function ContextTagKeys() {\n        this.applicationVersion = \"ai.application.ver\";\n        this.deviceId = \"ai.device.id\";\n        this.deviceLocale = \"ai.device.locale\";\n        this.deviceModel = \"ai.device.model\";\n        this.deviceOEMName = \"ai.device.oemName\";\n        this.deviceOSVersion = \"ai.device.osVersion\";\n        this.deviceType = \"ai.device.type\";\n        this.locationIp = \"ai.location.ip\";\n        this.operationId = \"ai.operation.id\";\n        this.operationName = \"ai.operation.name\";\n        this.operationParentId = \"ai.operation.parentId\";\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\n        this.sessionId = \"ai.session.id\";\n        this.sessionIsFirst = \"ai.session.isFirst\";\n        this.userAccountId = \"ai.user.accountId\";\n        this.userId = \"ai.user.id\";\n        this.userAuthUserId = \"ai.user.authUserId\";\n        this.cloudRole = \"ai.cloud.role\";\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\n        this.internalNodeName = \"ai.internal.nodeName\";\n    }\n    return ContextTagKeys;\n}());\nmodule.exports = ContextTagKeys;\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Base = require(\"./Base\");\n\"use strict\";\n/**\n * Data struct to contain both B and C sections.\n */\nvar Data = (function (_super) {\n    __extends(Data, _super);\n    function Data() {\n        return _super.call(this) || this;\n    }\n    return Data;\n}(Base));\nmodule.exports = Data;\n//# sourceMappingURL=Data.js.map","\"use strict\";\n// THIS FILE WAS AUTOGENERATED\nvar DataPointType = require(\"./DataPointType\");\n\"use strict\";\n/**\n * Metric data single measurement.\n */\nvar DataPoint = (function () {\n    function DataPoint() {\n        this.kind = DataPointType.Measurement;\n    }\n    return DataPoint;\n}());\nmodule.exports = DataPoint;\n//# sourceMappingURL=DataPoint.js.map","\"use strict\";\n/**\n * System variables for a telemetry item.\n */\nvar Envelope = (function () {\n    function Envelope() {\n        this.ver = 1;\n        this.sampleRate = 100.0;\n        this.tags = {};\n    }\n    return Envelope;\n}());\nmodule.exports = Envelope;\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\n */\nvar ExceptionData = (function (_super) {\n    __extends(ExceptionData, _super);\n    function ExceptionData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.exceptions = [];\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return ExceptionData;\n}(Domain));\nmodule.exports = ExceptionData;\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\n/**\n * Exception details of the exception in a chain.\n */\nvar ExceptionDetails = (function () {\n    function ExceptionDetails() {\n        this.hasFullStack = true;\n        this.parsedStack = [];\n    }\n    return ExceptionDetails;\n}());\nmodule.exports = ExceptionDetails;\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\n */\nvar MessageData = (function (_super) {\n    __extends(MessageData, _super);\n    function MessageData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        return _this;\n    }\n    return MessageData;\n}(Domain));\nmodule.exports = MessageData;\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\n */\nvar MetricData = (function (_super) {\n    __extends(MetricData, _super);\n    function MetricData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.metrics = [];\n        _this.properties = {};\n        return _this;\n    }\n    return MetricData;\n}(Domain));\nmodule.exports = MetricData;\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar EventData = require(\"./EventData\");\n\"use strict\";\n/**\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\n */\nvar PageViewData = (function (_super) {\n    __extends(PageViewData, _super);\n    function PageViewData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return PageViewData;\n}(EventData));\nmodule.exports = PageViewData;\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\n */\nvar RemoteDependencyData = (function (_super) {\n    __extends(RemoteDependencyData, _super);\n    function RemoteDependencyData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.success = true;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RemoteDependencyData;\n}(Domain));\nmodule.exports = RemoteDependencyData;\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\n */\nvar RequestData = (function (_super) {\n    __extends(RequestData, _super);\n    function RequestData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RequestData;\n}(Domain));\nmodule.exports = RequestData;\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Defines the level of severity for the event.\n */\nvar SeverityLevel;\n(function (SeverityLevel) {\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\n})(SeverityLevel || (SeverityLevel = {}));\nmodule.exports = SeverityLevel;\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Stack frame information.\n */\nvar StackFrame = (function () {\n    function StackFrame() {\n    }\n    return StackFrame;\n}());\nmodule.exports = StackFrame;\n//# sourceMappingURL=StackFrame.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./TelemetryType\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\n * @param type Type to convert to BaseData string\n */\nfunction telemetryTypeToBaseType(type) {\n    switch (type) {\n        case TelemetryType.Event:\n            return \"EventData\";\n        case TelemetryType.Exception:\n            return \"ExceptionData\";\n        case TelemetryType.Trace:\n            return \"MessageData\";\n        case TelemetryType.Metric:\n            return \"MetricData\";\n        case TelemetryType.Request:\n            return \"RequestData\";\n        case TelemetryType.Dependency:\n            return \"RemoteDependencyData\";\n        case TelemetryType.Availability:\n            return \"AvailabilityData\";\n    }\n    return undefined;\n}\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\n/**\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\n * @param baseType BaseData string to convert to TelemetryType\n */\nfunction baseTypeToTelemetryType(baseType) {\n    switch (baseType) {\n        case \"EventData\":\n            return TelemetryType.Event;\n        case \"ExceptionData\":\n            return TelemetryType.Exception;\n        case \"MessageData\":\n            return TelemetryType.Trace;\n        case \"MetricData\":\n            return TelemetryType.Metric;\n        case \"RequestData\":\n            return TelemetryType.Request;\n        case \"RemoteDependencyData\":\n            return TelemetryType.Dependency;\n        case \"AvailabilityData\":\n            return TelemetryType.Availability;\n    }\n    return undefined;\n}\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\nexports.TelemetryTypeString = {\n    Event: \"EventData\",\n    Exception: \"ExceptionData\",\n    Trace: \"MessageData\",\n    Metric: \"MetricData\",\n    Request: \"RequestData\",\n    Dependency: \"RemoteDependencyData\",\n    Availability: \"AvailabilityData\"\n};\n/**\n * Telemetry types supported by this SDK\n */\nvar TelemetryType;\n(function (TelemetryType) {\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\n    TelemetryType[TelemetryType[\"Availability\"] = 6] = \"Availability\";\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\nvar bunyanToAILevelMap = {\n    10: Contracts_1.SeverityLevel.Verbose,\n    20: Contracts_1.SeverityLevel.Verbose,\n    30: Contracts_1.SeverityLevel.Information,\n    40: Contracts_1.SeverityLevel.Warning,\n    50: Contracts_1.SeverityLevel.Error,\n    60: Contracts_1.SeverityLevel.Critical,\n};\nvar subscriber = function (event) {\n    var message = event.data.result;\n    clients.forEach(function (client) {\n        var AIlevel = bunyanToAILevelMap[event.data.level];\n        if (message instanceof Error) {\n            client.trackException({ exception: (message) });\n        }\n        else {\n            client.trackTrace({ message: message, severity: AIlevel });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar winstonToAILevelMap = {\n    syslog: function (og) {\n        var map = {\n            emerg: Contracts_1.SeverityLevel.Critical,\n            alert: Contracts_1.SeverityLevel.Critical,\n            crit: Contracts_1.SeverityLevel.Critical,\n            error: Contracts_1.SeverityLevel.Error,\n            warning: Contracts_1.SeverityLevel.Warning,\n            notice: Contracts_1.SeverityLevel.Information,\n            info: Contracts_1.SeverityLevel.Information,\n            debug: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    npm: function (og) {\n        var map = {\n            error: Contracts_1.SeverityLevel.Error,\n            warn: Contracts_1.SeverityLevel.Warning,\n            info: Contracts_1.SeverityLevel.Information,\n            verbose: Contracts_1.SeverityLevel.Verbose,\n            debug: Contracts_1.SeverityLevel.Verbose,\n            silly: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    unknown: function (og) {\n        return Contracts_1.SeverityLevel.Information;\n    }\n};\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({\n                exception: message,\n                properties: event.data.meta\n            });\n        }\n        else {\n            var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\n            client.trackTrace({\n                message: message,\n                severity: AIlevel,\n                properties: event.data.meta\n            });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\nvar AutoCollectExceptions = (function () {\n    function AutoCollectExceptions(client) {\n        if (!!AutoCollectExceptions.INSTANCE) {\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectExceptions.INSTANCE = this;\n        this._client = client;\n        // Only use for 13.7.0+\n        var nodeVer = process.versions.node.split(\".\");\n        AutoCollectExceptions._canUseUncaughtExceptionMonitor = parseInt(nodeVer[0]) > 13 || (parseInt(nodeVer[0]) === 13 && parseInt(nodeVer[1]) >= 7);\n    }\n    AutoCollectExceptions.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\n        var _this = this;\n        if (isEnabled) {\n            this._isInitialized = true;\n            var self = this;\n            if (!this._exceptionListenerHandle) {\n                // For scenarios like Promise.reject(), an error won't be passed to the handle. Create a placeholder\n                // error for these scenarios.\n                var handle = function (reThrow, name, error) {\n                    if (error === void 0) { error = new Error(AutoCollectExceptions._FALLBACK_ERROR_MESSAGE); }\n                    _this._client.trackException({ exception: error });\n                    _this._client.flush({ isAppCrashing: true });\n                    // only rethrow when we are the only listener\n                    if (reThrow && name && process.listeners(name).length === 1) {\n                        console.error(error);\n                        process.exit(1);\n                    }\n                };\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    // Node.js >= 13.7.0, use uncaughtExceptionMonitor. It handles both promises and exceptions\n                    this._exceptionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    this._exceptionListenerHandle = handle.bind(this, true, AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME);\n                    this._rejectionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n            }\n        }\n        else {\n            if (this._exceptionListenerHandle) {\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n                this._exceptionListenerHandle = undefined;\n                this._rejectionListenerHandle = undefined;\n                delete this._exceptionListenerHandle;\n                delete this._rejectionListenerHandle;\n            }\n        }\n    };\n    AutoCollectExceptions.prototype.dispose = function () {\n        AutoCollectExceptions.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectExceptions.INSTANCE = null;\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME = \"uncaughtExceptionMonitor\";\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME = \"uncaughtException\";\n    AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME = \"unhandledRejection\";\n    AutoCollectExceptions._RETHROW_EXIT_MESSAGE = \"Application Insights Rethrow Exception Handler\";\n    AutoCollectExceptions._FALLBACK_ERROR_MESSAGE = \"A promise was rejected without providing an error. Application Insights generated this error stack for you.\";\n    AutoCollectExceptions._canUseUncaughtExceptionMonitor = false;\n    return AutoCollectExceptions;\n}());\nmodule.exports = AutoCollectExceptions;\n//# sourceMappingURL=Exceptions.js.map","module.exports = require(\"constants\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpDependencyParser = (function (_super) {\n    __extends(HttpDependencyParser, _super);\n    function HttpDependencyParser(requestOptions, request) {\n        var _this = _super.call(this) || this;\n        if (request && request.method && requestOptions) {\n            // The ClientRequest.method property isn't documented, but is always there.\n            _this.method = request.method;\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\n            _this.startTime = +new Date();\n        }\n        return _this;\n    }\n    /**\n     * Called when the ClientRequest emits an error event.\n     */\n    HttpDependencyParser.prototype.onError = function (error) {\n        this._setStatus(undefined, error);\n    };\n    /**\n     * Called when the ClientRequest emits a response event.\n     */\n    HttpDependencyParser.prototype.onResponse = function (response) {\n        this._setStatus(response.statusCode, undefined);\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\n    };\n    /**\n     * Gets a dependency data contract object for a completed ClientRequest.\n     */\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\n        var urlObject = url.parse(this.url);\n        urlObject.search = undefined;\n        urlObject.hash = undefined;\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        var remoteDependencyTarget = urlObject.hostname;\n        if (this.correlationId) {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\n            }\n        }\n        else {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        }\n        if (urlObject.port) {\n            remoteDependencyTarget += \":\" + urlObject.port;\n        }\n        var dependencyTelemetry = {\n            id: dependencyId,\n            name: dependencyName,\n            data: this.url,\n            duration: this.duration,\n            success: this._isSuccess(),\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            properties: this.properties || {},\n            dependencyTypeName: remoteDependencyType,\n            target: remoteDependencyTarget\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!dependencyTelemetry[key]) {\n                    dependencyTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return dependencyTelemetry;\n    };\n    /**\n     * Builds a URL from request options, using the same logic as http.request(). This is\n     * necessary because a ClientRequest object does not expose a url property.\n     */\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\n        if (typeof options === 'string') {\n            options = url.parse(options);\n        }\n        else {\n            // Avoid modifying the original options object.\n            var originalOptions_1 = options;\n            options = {};\n            if (originalOptions_1) {\n                Object.keys(originalOptions_1).forEach(function (key) {\n                    options[key] = originalOptions_1[key];\n                });\n            }\n        }\n        // Oddly, url.format ignores path and only uses pathname and search,\n        // so create them from the path, if path was specified\n        if (options.path) {\n            var parsedQuery = url.parse(options.path);\n            options.pathname = parsedQuery.pathname;\n            options.search = parsedQuery.search;\n        }\n        // Simiarly, url.format ignores hostname and port if host is specified,\n        // even if host doesn't have the port, but http.request does not work\n        // this way. It will use the port if one is not specified in host,\n        // effectively treating host as hostname, but will use the port specified\n        // in host if it exists.\n        if (options.host && options.port) {\n            // Force a protocol so it will parse the host as the host, not path.\n            // It is discarded and not used, so it doesn't matter if it doesn't match\n            var parsedHost = url.parse(\"http://\" + options.host);\n            if (!parsedHost.port && options.port) {\n                options.hostname = options.host;\n                delete options.host;\n            }\n        }\n        // Mix in default values used by http.request and others\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\n        options.hostname = options.hostname || 'localhost';\n        return url.format(options);\n    };\n    return HttpDependencyParser;\n}(RequestParser));\nmodule.exports = HttpDependencyParser;\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    if (event.data.event.commandName === \"ismaster\") {\n        // suppress noisy ismaster commands\n    }\n    clients.forEach(function (client) {\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\n        client.trackDependency({\n            target: dbName,\n            data: event.data.event.commandName,\n            name: event.data.event.commandName,\n            duration: event.data.event.duration,\n            success: event.data.succeeded,\n            /* TODO: transmit result code from mongo */\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\n            dependencyTypeName: 'mongodb'\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var queryObj = event.data.query || {};\n        var sqlString = queryObj.sql || \"Unknown query\";\n        var success = !event.data.err;\n        var connection = queryObj._connection || {};\n        var connectionConfig = connection.config || {};\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\n        client.trackDependency({\n            target: dbName,\n            data: sqlString,\n            name: sqlString,\n            duration: event.data.duration,\n            success: success,\n            /* TODO: transmit result code from mysql */\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"mysql\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        if (event.data.commandObj.command === \"info\") {\n            // We don't want to report 'info', it's irrelevant\n            return;\n        }\n        client.trackDependency({\n            target: event.data.address,\n            name: event.data.commandObj.command,\n            data: event.data.commandObj.command,\n            duration: event.data.duration,\n            success: !event.data.err,\n            /* TODO: transmit result code from redis */\n            resultCode: event.data.err ? \"1\" : \"0\",\n            dependencyTypeName: \"redis\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var q = event.data.query;\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\n        var success = !event.data.error;\n        var conn = event.data.database.host + \":\" + event.data.database.port;\n        client.trackDependency({\n            target: conn,\n            data: sql,\n            name: sql,\n            duration: event.data.duration,\n            success: success,\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"postgres\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Tracestate = require(\"../Library/Tracestate\");\nvar Traceparent = require(\"../Library/Traceparent\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpRequestParser = (function (_super) {\n    __extends(HttpRequestParser, _super);\n    function HttpRequestParser(request, requestId) {\n        var _this = _super.call(this) || this;\n        if (request) {\n            _this.method = request.method;\n            _this.url = _this._getAbsoluteUrl(request);\n            _this.startTime = +new Date();\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\n            _this.parseHeaders(request, requestId);\n            if (request.connection) {\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\n            }\n        }\n        return _this;\n    }\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\n        this._setStatus(undefined, error);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\n        this._setStatus(response.statusCode, undefined);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\n        var requestTelemetry = {\n            id: this.requestId,\n            name: this.method + \" \" + url.parse(this.url).pathname,\n            url: this.url,\n            /*\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\n            for reference\n            */\n            source: this.sourceCorrelationId,\n            duration: this.duration,\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            success: this._isSuccess(),\n            properties: this.properties\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!requestTelemetry[key]) {\n                    requestTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return requestTelemetry;\n    };\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\n        // create a copy of the context for requests since client info will be used here\n        var newTags = {};\n        for (var key in tags) {\n            newTags[key] = tags[key];\n        }\n        // don't override tags if they are already set\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\n        return newTags;\n    };\n    HttpRequestParser.prototype.getOperationId = function (tags) {\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\n    };\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\n    };\n    HttpRequestParser.prototype.getOperationName = function (tags) {\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\n    };\n    HttpRequestParser.prototype.getRequestId = function () {\n        return this.requestId;\n    };\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\n        return this.correlationContextHeader;\n    };\n    HttpRequestParser.prototype.getTraceparent = function () {\n        return this.traceparent;\n    };\n    HttpRequestParser.prototype.getTracestate = function () {\n        return this.tracestate;\n    };\n    HttpRequestParser.prototype.getLegacyRootId = function () {\n        return this.legacyRootId;\n    };\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\n        if (!request.headers) {\n            return request.url;\n        }\n        var encrypted = request.connection ? request.connection.encrypted : null;\n        var requestUrl = url.parse(request.url);\n        var pathName = requestUrl.pathname;\n        var search = requestUrl.search;\n        var absoluteUrl = url.format({\n            protocol: encrypted ? \"https\" : \"http\",\n            host: request.headers.host,\n            pathname: pathName,\n            search: search\n        });\n        return absoluteUrl;\n    };\n    HttpRequestParser.prototype._getIp = function () {\n        // regex to match ipv4 without port\n        // Note: including the port would cause the payload to be rejected by the data collector\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\n        var check = function (str) {\n            var results = ipMatch.exec(str);\n            if (results) {\n                return results[0];\n            }\n        };\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\n            || check(this.rawHeaders[\"x-client-ip\"])\n            || check(this.rawHeaders[\"x-real-ip\"])\n            || check(this.connectionRemoteAddress)\n            || check(this.socketRemoteAddress)\n            || check(this.legacySocketRemoteAddress);\n        // node v12 returns this if the address is \"localhost\"\n        if (!ip\n            && this.connectionRemoteAddress\n            && this.connectionRemoteAddress.substr\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\n            ip = \"127.0.0.1\";\n        }\n        return ip;\n    };\n    HttpRequestParser.prototype._getId = function (name) {\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\n        return value;\n    };\n    /**\n     * Sets this operation's operationId, parentId, requestId (and legacyRootId, if necessary) based on this operation's traceparent\n     */\n    HttpRequestParser.prototype.setBackCompatFromThisTraceContext = function () {\n        // Set operationId\n        this.operationId = this.traceparent.traceId;\n        if (this.traceparent.legacyRootId) {\n            this.legacyRootId = this.traceparent.legacyRootId;\n        }\n        // Set parentId with existing spanId\n        this.parentId = this.traceparent.parentId;\n        // Update the spanId and set the current requestId\n        this.traceparent.updateSpanId();\n        this.requestId = this.traceparent.getBackCompatRequestId();\n    };\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\n        this.rawHeaders = request.headers || request.rawHeaders;\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\n        if (request.headers) {\n            var tracestateHeader = request.headers[RequestResponseHeaders.traceStateHeader]; // w3c header\n            var traceparentHeader = request.headers[RequestResponseHeaders.traceparentHeader]; // w3c header\n            var requestIdHeader = request.headers[RequestResponseHeaders.requestIdHeader]; // default AI header\n            var legacy_parentId = request.headers[RequestResponseHeaders.parentIdHeader]; // legacy AI header\n            var legacy_rootId = request.headers[RequestResponseHeaders.rootIdHeader]; // legacy AI header\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\n            if (CorrelationIdManager.w3cEnabled && (traceparentHeader || tracestateHeader)) {\n                // Parse W3C Trace Context headers\n                this.traceparent = new Traceparent(traceparentHeader); // new traceparent is always created from this\n                this.tracestate = traceparentHeader && tracestateHeader && new Tracestate(tracestateHeader); // discard tracestate if no traceparent is present\n                this.setBackCompatFromThisTraceContext();\n            }\n            else if (requestIdHeader) {\n                // Parse AI headers\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent(null, requestIdHeader);\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = requestIdHeader;\n                    this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            else {\n                // Legacy fallback\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent();\n                    this.traceparent.parentId = legacy_parentId;\n                    this.traceparent.legacyRootId = legacy_rootId || legacy_parentId;\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = legacy_parentId;\n                    this.requestId = CorrelationIdManager.generateRequestId(legacy_rootId || this.parentId);\n                    this.correlationContextHeader = null;\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            if (requestId) {\n                // For the scenarios that don't guarantee an AI-created context,\n                // override the requestId with the provided one.\n                this.requestId = requestId;\n                this.operationId = CorrelationIdManager.getRootId(this.requestId);\n            }\n        }\n    };\n    HttpRequestParser.parseId = function (cookieValue) {\n        var cookieParts = cookieValue.split(\"|\");\n        if (cookieParts.length > 0) {\n            return cookieParts[0];\n        }\n        return \"\"; // old behavior was to return \"\" for incorrect parsing\n    };\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\n    return HttpRequestParser;\n}(RequestParser));\nmodule.exports = HttpRequestParser;\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\n/**\n * Helper class to manage parsing and strict-validation of tracestate header. W3C tracestate spec\n * is documented at https://www.w3.org/TR/trace-context/#header-value\n * @class Tracestate\n */\nvar Tracestate = (function () {\n    // if true, performs strict tracestate header checking, else just passes it along\n    function Tracestate(id) {\n        this.fieldmap = [];\n        if (!id) {\n            return;\n        }\n        this.fieldmap = this.parseHeader(id);\n    }\n    Tracestate.prototype.toString = function () {\n        var fieldarr = this.fieldmap;\n        if (!fieldarr || fieldarr.length == 0) {\n            return null;\n        }\n        return fieldarr.join(\", \");\n    };\n    Tracestate.validateKeyChars = function (key) {\n        var keyParts = key.split(\"@\");\n        if (keyParts.length == 2) {\n            // Parse for tenant@vendor format\n            var tenant = keyParts[0].trim();\n            var vendor = keyParts[1].trim();\n            var tenantValid = Boolean(tenant.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,241}$/));\n            var vendorValid = Boolean(vendor.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,14}$/));\n            return tenantValid && vendorValid;\n        }\n        else if (keyParts.length == 1) {\n            // Parse for standard key format\n            return Boolean(key.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,256}$/));\n        }\n        return false;\n    };\n    Tracestate.prototype.parseHeader = function (id) {\n        var res = [];\n        var keydeduper = {};\n        var parts = id.split(\",\");\n        if (parts.length > 32)\n            return null;\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n            var rawPart = parts_1[_i];\n            var part = rawPart.trim(); // trim out whitespace\n            if (part.length === 0) {\n                continue; // Discard empty pairs, but keep the rest of this tracestate\n            }\n            var pair = part.split(\"=\");\n            // pair should contain exactly one \"=\"\n            if (pair.length !== 2) {\n                return null; // invalid pair: discard entire tracestate\n            }\n            // Validate length and charset of this key\n            if (!Tracestate.validateKeyChars(pair[0])) {\n                return null;\n            }\n            // Assert uniqueness of this key\n            if (keydeduper[pair[0]]) {\n                return null; // duplicate key: discard entire tracestate\n            }\n            else {\n                keydeduper[pair[0]] = true;\n            }\n            // All checks passed -- add this part\n            res.push(part);\n        }\n        return res;\n    };\n    Tracestate.strict = true;\n    return Tracestate;\n}());\nmodule.exports = Tracestate;\n//# sourceMappingURL=Tracestate.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Config = require(\"./Config\");\nvar QuickPulseEnvelopeFactory = require(\"./QuickPulseEnvelopeFactory\");\nvar QuickPulseSender = require(\"./QuickPulseSender\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Context = require(\"./Context\");\n/** State Container for sending to the QuickPulse Service */\nvar QuickPulseStateManager = (function () {\n    function QuickPulseStateManager(iKey, context) {\n        this._isCollectingData = false;\n        this._lastSuccessTime = Date.now();\n        this._lastSendSucceeded = true;\n        this._metrics = {};\n        this._documents = [];\n        this._collectors = [];\n        this.config = new Config(iKey);\n        this.context = context || new Context();\n        this._sender = new QuickPulseSender(this.config);\n        this._isEnabled = false;\n    }\n    /**\n     *\n     * @param collector\n     */\n    QuickPulseStateManager.prototype.addCollector = function (collector) {\n        this._collectors.push(collector);\n    };\n    /**\n     * Override of TelemetryClient.trackMetric\n     */\n    QuickPulseStateManager.prototype.trackMetric = function (telemetry) {\n        this._addMetric(telemetry);\n    };\n    /**\n     * Add a document to the current buffer\n     * @param envelope\n     */\n    QuickPulseStateManager.prototype.addDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);\n        if (document) {\n            this._documents.push(document);\n        }\n    };\n    /**\n     * Enable or disable communication with QuickPulseService\n     * @param isEnabled\n     */\n    QuickPulseStateManager.prototype.enable = function (isEnabled) {\n        if (isEnabled && !this._isEnabled) {\n            this._isEnabled = true;\n            this._goQuickPulse();\n        }\n        else if (!isEnabled && this._isEnabled) {\n            this._isEnabled = false;\n            clearTimeout(this._handle);\n            this._handle = undefined;\n        }\n    };\n    /**\n     * Enable or disable all collectors in this instance\n     * @param enable\n     */\n    QuickPulseStateManager.prototype.enableCollectors = function (enable) {\n        this._collectors.forEach(function (collector) {\n            collector.enable(enable);\n        });\n    };\n    /**\n     * Add the metric to this buffer. If same metric already exists in this buffer, add weight to it\n     * @param telemetry\n     */\n    QuickPulseStateManager.prototype._addMetric = function (telemetry) {\n        var value = telemetry.value;\n        var count = telemetry.count || 1;\n        var name = Constants.PerformanceToQuickPulseCounter[telemetry.name];\n        if (name) {\n            if (this._metrics[name]) {\n                this._metrics[name].Value = (this._metrics[name].Value * this._metrics[name].Weight + value * count) / (this._metrics[name].Weight + count);\n                this._metrics[name].Weight += count;\n            }\n            else {\n                this._metrics[name] = QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry);\n                this._metrics[name].Name = name;\n                this._metrics[name].Weight = 1;\n            }\n        }\n    };\n    QuickPulseStateManager.prototype._resetQuickPulseBuffer = function () {\n        delete this._metrics;\n        this._metrics = {};\n        this._documents.length = 0;\n    };\n    QuickPulseStateManager.prototype._goQuickPulse = function () {\n        var _this = this;\n        // Create envelope from Documents and Metrics\n        var metrics = Object.keys(this._metrics).map(function (k) { return _this._metrics[k]; });\n        var envelope = QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics, this._documents.slice(), this.config, this.context);\n        // Clear this document, metric buffer\n        this._resetQuickPulseBuffer();\n        // Send it to QuickPulseService, if collecting\n        if (this._isCollectingData) {\n            this._post(envelope);\n        }\n        else {\n            this._ping(envelope);\n        }\n        var currentTimeout = this._isCollectingData ? QuickPulseStateManager.POST_INTERVAL : QuickPulseStateManager.PING_INTERVAL;\n        if (this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_POST_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't posted successfully in 20 seconds, so wait 60 seconds and ping\n            this._isCollectingData = false;\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        else if (!this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_PING_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't pinged successfully in 60 seconds, so wait another 60 seconds\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        this._lastSendSucceeded = null;\n        this._handle = setTimeout(this._goQuickPulse.bind(this), currentTimeout);\n        this._handle.unref(); // Don't block apps from terminating\n    };\n    QuickPulseStateManager.prototype._ping = function (envelope) {\n        this._sender.ping(envelope, this._quickPulseDone.bind(this));\n    };\n    QuickPulseStateManager.prototype._post = function (envelope) {\n        this._sender.post(envelope, this._quickPulseDone.bind(this));\n    };\n    /**\n     * Change the current QPS send state. (shouldPOST == undefined) --> error, but do not change the state yet.\n     */\n    QuickPulseStateManager.prototype._quickPulseDone = function (shouldPOST, res) {\n        if (shouldPOST != undefined) {\n            if (this._isCollectingData !== shouldPOST) {\n                Logging.info(\"Live Metrics sending data\", shouldPOST);\n                this.enableCollectors(shouldPOST);\n            }\n            this._isCollectingData = shouldPOST;\n            if (res && res.statusCode < 300 && res.statusCode >= 200) {\n                this._lastSuccessTime = Date.now();\n                this._lastSendSucceeded = true;\n            }\n            else {\n                this._lastSendSucceeded = false;\n            }\n        }\n        else {\n            // Received an error, keep the state as is\n            this._lastSendSucceeded = false;\n        }\n    };\n    QuickPulseStateManager.MAX_POST_WAIT_TIME = 20000;\n    QuickPulseStateManager.MAX_PING_WAIT_TIME = 60000;\n    QuickPulseStateManager.FALLBACK_INTERVAL = 60000;\n    QuickPulseStateManager.PING_INTERVAL = 5000;\n    QuickPulseStateManager.POST_INTERVAL = 1000;\n    return QuickPulseStateManager;\n}());\nmodule.exports = QuickPulseStateManager;\n//# sourceMappingURL=QuickPulseStateManager.js.map","\"use strict\";\nvar Constants = require(\"../Declarations/Constants\");\nvar ConnectionStringParser = (function () {\n    function ConnectionStringParser() {\n    }\n    ConnectionStringParser.parse = function (connectionString) {\n        if (!connectionString) {\n            return {};\n        }\n        var kvPairs = connectionString.split(ConnectionStringParser._FIELDS_SEPARATOR);\n        var result = kvPairs.reduce(function (fields, kv) {\n            var kvParts = kv.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);\n            if (kvParts.length === 2) {\n                var key = kvParts[0].toLowerCase();\n                var value = kvParts[1];\n                fields[key] = value;\n            }\n            return fields;\n        }, {});\n        if (Object.keys(result).length > 0) {\n            // this is a valid connection string, so parse the results\n            if (result.endpointsuffix) {\n                // use endpoint suffix where overrides are not provided\n                var locationPrefix = result.location ? result.location + \".\" : \"\";\n                result.ingestionendpoint = result.ingestionendpoint || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\n                result.liveendpoint = result.liveendpoint || (\"https://\" + locationPrefix + \"live.\" + result.endpointsuffix);\n            }\n            // apply the default endpoints\n            result.ingestionendpoint = result.ingestionendpoint || Constants.DEFAULT_BREEZE_ENDPOINT;\n            result.liveendpoint = result.liveendpoint || Constants.DEFAULT_LIVEMETRICS_ENDPOINT;\n        }\n        return result;\n    };\n    ConnectionStringParser._FIELDS_SEPARATOR = \";\";\n    ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR = \"=\";\n    return ConnectionStringParser;\n}());\nmodule.exports = ConnectionStringParser;\n//# sourceMappingURL=ConnectionStringParser.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar os = require(\"os\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar StreamId = Util.w3cTraceId(); // Create a guid\nvar QuickPulseEnvelopeFactory = (function () {\n    function QuickPulseEnvelopeFactory() {\n    }\n    QuickPulseEnvelopeFactory.createQuickPulseEnvelope = function (metrics, documents, config, context) {\n        var machineName = (os && typeof os.hostname === \"function\"\n            && os.hostname()) || \"Unknown\"; // Note: os.hostname() was added in node v0.3.3\n        var instance = (context.tags\n            && context.keys\n            && context.keys.cloudRoleInstance\n            && context.tags[context.keys.cloudRoleInstance]) || machineName;\n        var envelope = {\n            Documents: documents.length > 0 ? documents : null,\n            InstrumentationKey: config.instrumentationKey || \"\",\n            Metrics: metrics.length > 0 ? metrics : null,\n            InvariantVersion: 1,\n            Timestamp: \"/Date(\" + Date.now() + \")/\",\n            Version: context.tags[context.keys.internalSdkVersion],\n            StreamId: StreamId,\n            MachineName: machineName,\n            Instance: instance\n        };\n        return envelope;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseMetric = function (telemetry) {\n        var data;\n        data = {\n            Name: telemetry.name,\n            Value: telemetry.value,\n            Weight: telemetry.count || 1\n        };\n        return data;\n    };\n    QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument = function (envelope) {\n        switch (envelope.data.baseType) {\n            case Contracts.TelemetryTypeString.Event:\n                return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);\n            case Contracts.TelemetryTypeString.Exception:\n                return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);\n            case Contracts.TelemetryTypeString.Trace:\n                return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);\n            case Contracts.TelemetryTypeString.Dependency:\n                return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);\n            case Contracts.TelemetryTypeString.Request:\n                return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope);\n        }\n        return null;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseEventDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var name = envelope.data.baseData.name;\n        var eventDocument = __assign({}, document, { Name: name });\n        return eventDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseTraceDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var severityLevel = envelope.data.baseData.severityLevel || 0;\n        var traceDocument = __assign({}, document, { Message: envelope.data.baseData.message, SeverityLevel: Contracts.SeverityLevel[severityLevel] });\n        return traceDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var exceptionDetails = envelope.data.baseData.exceptions;\n        var exception = '';\n        var exceptionMessage = '';\n        var exceptionType = '';\n        // Try to fill exception information from first error only\n        if (exceptionDetails && exceptionDetails.length > 0) {\n            // Try to grab the stack from parsedStack or stack\n            if (exceptionDetails[0].parsedStack && exceptionDetails[0].parsedStack.length > 0) {\n                exceptionDetails[0].parsedStack.forEach(function (err) {\n                    exception += err.assembly + \"\\n\";\n                });\n            }\n            else if (exceptionDetails[0].stack && exceptionDetails[0].stack.length > 0) {\n                exception = exceptionDetails[0].stack;\n            }\n            exceptionMessage = exceptionDetails[0].message;\n            exceptionType = exceptionDetails[0].typeName;\n        }\n        var exceptionDocument = __assign({}, document, { Exception: exception, ExceptionMessage: exceptionMessage, ExceptionType: exceptionType });\n        return exceptionDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseRequestDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var requestDocument = __assign({}, document, { Name: baseData.name, Success: baseData.success, Duration: baseData.duration, ResponseCode: baseData.responseCode, OperationName: baseData.name // TODO: is this correct?\n         });\n        return requestDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var dependencyDocument = __assign({}, document, { Name: baseData.name, Target: baseData.target, Success: baseData.success, Duration: baseData.duration, ResultCode: baseData.resultCode, CommandName: baseData.data, OperationName: document.OperationId, DependencyTypeName: baseData.type });\n        return dependencyDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDocument = function (envelope) {\n        var documentType;\n        var __type;\n        var operationId, properties;\n        if (envelope.data.baseType) {\n            __type = Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType];\n            documentType = Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType];\n        }\n        else {\n            // Remark: This should never be hit because createQuickPulseDocument is only called within\n            // valid baseType values\n            Logging.warn(\"Document type invalid; not sending live metric document\", envelope.data.baseType);\n        }\n        operationId = envelope.tags[QuickPulseEnvelopeFactory.keys.operationId];\n        properties = QuickPulseEnvelopeFactory.aggregateProperties(envelope);\n        var document = {\n            DocumentType: documentType,\n            __type: __type,\n            OperationId: operationId,\n            Version: \"1.0\",\n            Properties: properties\n        };\n        return document;\n    };\n    QuickPulseEnvelopeFactory.aggregateProperties = function (envelope) {\n        var properties = [];\n        // Collect measurements\n        var meas = (envelope.data.baseData).measurements || {};\n        for (var key in meas) {\n            if (meas.hasOwnProperty(key)) {\n                var value = meas[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        // Collect properties\n        var props = (envelope.data.baseData).properties || {};\n        for (var key in props) {\n            if (props.hasOwnProperty(key)) {\n                var value = props[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        return properties;\n    };\n    QuickPulseEnvelopeFactory.keys = new Contracts.ContextTagKeys();\n    return QuickPulseEnvelopeFactory;\n}());\nmodule.exports = QuickPulseEnvelopeFactory;\n//# sourceMappingURL=QuickPulseEnvelopeFactory.js.map","\"use strict\";\nvar https = require(\"https\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\nvar QuickPulseConfig = {\n    method: \"POST\",\n    time: \"x-ms-qps-transmission-time\",\n    subscribed: \"x-ms-qps-subscribed\"\n};\nvar QuickPulseSender = (function () {\n    function QuickPulseSender(config) {\n        this._config = config;\n        this._consecutiveErrors = 0;\n    }\n    QuickPulseSender.prototype.ping = function (envelope, done) {\n        this._submitData(envelope, done, \"ping\");\n    };\n    QuickPulseSender.prototype.post = function (envelope, done) {\n        // Important: When POSTing data, envelope must be an array\n        this._submitData([envelope], done, \"post\");\n    };\n    QuickPulseSender.prototype._submitData = function (envelope, done, postOrPing) {\n        var _this = this;\n        var payload = JSON.stringify(envelope);\n        var options = (_a = {},\n            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\n            _a.host = this._config.quickPulseHost,\n            _a.method = QuickPulseConfig.method,\n            _a.path = \"/QuickPulseService.svc/\" + postOrPing + \"?ikey=\" + this._config.instrumentationKey,\n            _a.headers = (_b = {\n                    'Expect': '100-continue'\n                },\n                _b[QuickPulseConfig.time] = 10000 * Date.now(),\n                _b['Content-Type'] = 'application\\/json',\n                _b['Content-Length'] = Buffer.byteLength(payload),\n                _b),\n            _a);\n        var req = https.request(options, function (res) {\n            var shouldPOSTData = res.headers[QuickPulseConfig.subscribed] === \"true\";\n            _this._consecutiveErrors = 0;\n            done(shouldPOSTData, res);\n        });\n        req.on(\"error\", function (error) {\n            // Unable to contact qps endpoint.\n            // Do nothing for now.\n            _this._consecutiveErrors++;\n            // LOG every error, but WARN instead when X number of consecutive errors occur\n            var notice = \"Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:\";\n            if (_this._consecutiveErrors % QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN === 0) {\n                notice = \"Live Metrics endpoint could not be reached \" + _this._consecutiveErrors + \" consecutive times. Most recent error:\";\n                Logging.warn(QuickPulseSender.TAG, notice, error);\n            }\n            else {\n                // Potentially transient error, do not change the ping/post state yet.\n                Logging.info(QuickPulseSender.TAG, notice, error);\n            }\n            done();\n        });\n        req.write(payload);\n        req.end();\n        var _a, _b;\n    };\n    QuickPulseSender.TAG = \"QuickPulseSender\";\n    QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN = 25;\n    return QuickPulseSender;\n}());\nmodule.exports = QuickPulseSender;\n//# sourceMappingURL=QuickPulseSender.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Config = require(\"../Library/Config\");\nvar Context = require(\"../Library/Context\");\nvar Logging = require(\"../Library/Logging\");\nvar AutoCollectNativePerformance = (function () {\n    function AutoCollectNativePerformance(client) {\n        this._disabledMetrics = {};\n        // Note: Only 1 instance of this can exist. So when we reconstruct this object,\n        // just disable old native instance and reset JS member variables\n        if (AutoCollectNativePerformance.INSTANCE) {\n            AutoCollectNativePerformance.INSTANCE.dispose();\n        }\n        AutoCollectNativePerformance.INSTANCE = this;\n        this._client = client;\n    }\n    /**\n     *  Reports if NativePerformance is able to run in this environment\n     */\n    AutoCollectNativePerformance.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) >= 6;\n    };\n    /**\n     * Start instance of native metrics agent.\n     *\n     * @param {boolean} isEnabled\n     * @param {number} [collectionInterval=60000]\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.enable = function (isEnabled, disabledMetrics, collectionInterval) {\n        var _this = this;\n        if (disabledMetrics === void 0) { disabledMetrics = {}; }\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (!AutoCollectNativePerformance.isNodeVersionCompatible()) {\n            return;\n        }\n        if (AutoCollectNativePerformance._metricsAvailable == undefined && isEnabled && !this._isInitialized) {\n            // Try to require in the native-metrics library. If it's found initialize it, else do nothing and never try again.\n            try {\n                var NativeMetricsEmitters = require(\"applicationinsights-native-metrics\");\n                AutoCollectNativePerformance._emitter = new NativeMetricsEmitters();\n                AutoCollectNativePerformance._metricsAvailable = true;\n                Logging.info(\"Native metrics module successfully loaded!\");\n            }\n            catch (err) {\n                // Package not available. Never try again\n                AutoCollectNativePerformance._metricsAvailable = false;\n                return;\n            }\n        }\n        this._isEnabled = isEnabled;\n        this._disabledMetrics = disabledMetrics;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        // Enable the emitter if we were able to construct one\n        if (this._isEnabled && AutoCollectNativePerformance._emitter) {\n            // enable self\n            AutoCollectNativePerformance._emitter.enable(true, collectionInterval);\n            this._handle = setInterval(function () { return _this._trackNativeMetrics(); }, collectionInterval);\n            this._handle.unref();\n        }\n        else if (AutoCollectNativePerformance._emitter) {\n            // disable self\n            AutoCollectNativePerformance._emitter.enable(false);\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    /**\n     * Cleanup this instance of AutoCollectNativePerformance\n     *\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.dispose = function () {\n        this.enable(false);\n    };\n    /**\n     * Parse environment variable and overwrite isEnabled based on respective fields being set\n     *\n     * @private\n     * @static\n     * @param {(boolean | IDisabledExtendedMetrics)} collectExtendedMetrics\n     * @returns {(boolean | IDisabledExtendedMetrics)}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.parseEnabled = function (collectExtendedMetrics) {\n        var disableAll = process.env[Config.ENV_nativeMetricsDisableAll];\n        var individualOptOuts = process.env[Config.ENV_nativeMetricsDisablers];\n        // case 1: disable all env var set, RETURN with isEnabled=false\n        if (disableAll) {\n            return { isEnabled: false, disabledMetrics: {} };\n        }\n        // case 2: individual env vars set, RETURN with isEnabled=true, disabledMetrics={...}\n        if (individualOptOuts) {\n            var optOutsArr = individualOptOuts.split(\",\");\n            var disabledMetrics = {};\n            if (optOutsArr.length > 0) {\n                for (var _i = 0, optOutsArr_1 = optOutsArr; _i < optOutsArr_1.length; _i++) {\n                    var opt = optOutsArr_1[_i];\n                    disabledMetrics[opt] = true;\n                }\n            }\n            // case 2a: collectExtendedMetrics is an object, overwrite existing ones if they exist\n            if (typeof collectExtendedMetrics === \"object\") {\n                return { isEnabled: true, disabledMetrics: __assign({}, collectExtendedMetrics, disabledMetrics) };\n            }\n            // case 2b: collectExtendedMetrics is a boolean, set disabledMetrics as is\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: disabledMetrics };\n        }\n        // case 4: no env vars set, input arg is a boolean, RETURN with isEnabled=collectExtendedMetrics, disabledMetrics={}\n        if (typeof collectExtendedMetrics === \"boolean\") {\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: {} };\n        }\n        else {\n            // case 5: no env vars set, input arg is object, RETURN with isEnabled=true, disabledMetrics=collectExtendedMetrics\n            return { isEnabled: true, disabledMetrics: collectExtendedMetrics };\n        }\n    };\n    /**\n     * Trigger an iteration of native metrics collection\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackNativeMetrics = function () {\n        var shouldSendAll = true;\n        if (typeof this._isEnabled !== \"object\") {\n            shouldSendAll = this._isEnabled;\n        }\n        if (shouldSendAll) {\n            this._trackGarbageCollection();\n            this._trackEventLoop();\n            this._trackHeapUsage();\n        }\n    };\n    /**\n     * Tracks garbage collection stats for this interval. One custom metric is sent per type of garbage\n     * collection that occurred during this collection interval.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackGarbageCollection = function () {\n        if (this._disabledMetrics.gc) {\n            return;\n        }\n        var gcData = AutoCollectNativePerformance._emitter.getGCData();\n        for (var gc in gcData) {\n            var metrics = gcData[gc].metrics;\n            var name_1 = gc + \" Garbage Collection Duration\";\n            var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n            this._client.trackMetric({\n                name: name_1,\n                value: metrics.total,\n                count: metrics.count,\n                max: metrics.max,\n                min: metrics.min,\n                stdDev: stdDev,\n                tagOverrides: (_a = {},\n                    _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                    _a)\n            });\n        }\n        var _a;\n    };\n    /**\n     * Tracks event loop ticks per interval as a custom metric. Also included in the metric is min/max/avg\n     * time spent in event loop for this interval.\n     *\n     * @private\n     * @returns {void}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackEventLoop = function () {\n        if (this._disabledMetrics.loop) {\n            return;\n        }\n        var loopData = AutoCollectNativePerformance._emitter.getLoopData();\n        var metrics = loopData.loopUsage;\n        if (metrics.count == 0) {\n            return;\n        }\n        var name = \"Event Loop CPU Time\";\n        var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n        this._client.trackMetric({\n            name: name,\n            value: metrics.total,\n            count: metrics.count,\n            min: metrics.min,\n            max: metrics.max,\n            stdDev: stdDev,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        var _a;\n    };\n    /**\n     * Track heap memory usage metrics as a custom metric.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackHeapUsage = function () {\n        if (this._disabledMetrics.heap) {\n            return;\n        }\n        var memoryUsage = process.memoryUsage();\n        var heapUsed = memoryUsage.heapUsed, heapTotal = memoryUsage.heapTotal, rss = memoryUsage.rss;\n        this._client.trackMetric({\n            name: \"Memory Usage (Heap)\",\n            value: heapUsed,\n            count: 1,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        this._client.trackMetric({\n            name: \"Memory Total (Heap)\",\n            value: heapTotal,\n            count: 1,\n            tagOverrides: (_b = {},\n                _b[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _b)\n        });\n        this._client.trackMetric({\n            name: \"Memory Usage (Non-Heap)\",\n            value: rss - heapTotal,\n            count: 1,\n            tagOverrides: (_c = {},\n                _c[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _c)\n        });\n        var _a, _b, _c;\n    };\n    return AutoCollectNativePerformance;\n}());\nexports.AutoCollectNativePerformance = AutoCollectNativePerformance;\n//# sourceMappingURL=NativePerformance.js.map","module.exports = require(\"applicationinsights-native-metrics\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TelemetryClient = require(\"./TelemetryClient\");\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\n/**\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\n * in addition to Node-specific helper functions.\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\n * In most cases, `appInsights.defaultClient` should be used instead.\n */\nvar NodeClient = (function (_super) {\n    __extends(NodeClient, _super);\n    function NodeClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\n     * @param telemetry Object encapsulating incoming request, response and duration information\n     */\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\n            ServerRequestTracking.trackRequestSync(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\n        }\n    };\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\n     * @param telemetry Object encapsulating incoming request and response information\n     */\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\n        if (telemetry.duration || telemetry.error) {\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\n        }\n        if (telemetry && telemetry.request && telemetry.response) {\n            ServerRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\n        }\n    };\n    /**\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\n     * the specified headers and will log the telemetry when outgoing request is complete\n     * @param telemetry Object encapsulating outgoing request information\n     */\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\n        if (telemetry && telemetry.request) {\n            ClientRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\n        }\n    };\n    return NodeClient;\n}(TelemetryClient));\nmodule.exports = NodeClient;\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\nvar url = require(\"url\");\nvar Config = require(\"./Config\");\nvar Context = require(\"./Context\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Channel = require(\"./Channel\");\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\nvar Sender = require(\"./Sender\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\n/**\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\n * and manually trigger immediate sending (flushing)\n */\nvar TelemetryClient = (function () {\n    /**\n     * Constructs a new client of the client\n     * @param setupString the Connection String or Instrumentation Key to use (read from environment variable if not specified)\n     */\n    function TelemetryClient(setupString) {\n        this._telemetryProcessors = [];\n        var config = new Config(setupString);\n        this.config = config;\n        this.context = new Context();\n        this.commonProperties = {};\n        var sender = new Sender(this.config);\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\n    }\n    /**\n     * Log information about availability of an application\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackAvailability = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Availability);\n    };\n    /**\n     * Log a trace message\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Trace);\n    };\n    /**\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Metric);\n    };\n    /**\n     * Log an exception\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackException = function (telemetry) {\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\n            telemetry.exception = new Error(telemetry.exception.toString());\n        }\n        this.track(telemetry, Contracts.TelemetryType.Exception);\n    };\n    /**\n     * Log a user action or other occurrence.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Event);\n    };\n    /**\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\n     * that aren't automatically captured or if you've disabled automatic request collection.\n     *\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Request);\n    };\n    /**\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\n     *\n     * @param telemetry      Object encapsulating tracking option\n     * */\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\n        if (telemetry && !telemetry.target && telemetry.data) {\n            // url.parse().host returns null for non-urls,\n            // making this essentially a no-op in those cases\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\n            telemetry.target = url.parse(telemetry.data).host;\n        }\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\n    };\n    /**\n     * Immediately send all queued telemetry.\n     * @param options Flush options, including indicator whether app is crashing and callback\n     */\n    TelemetryClient.prototype.flush = function (options) {\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\n    };\n    /**\n     * Generic track method for all telemetry types\n     * @param data the telemetry to send\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\n     */\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\n            // Set time on the envelope if it was set on the telemetry item\n            if (telemetry.time) {\n                envelope.time = telemetry.time.toISOString();\n            }\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\n            TelemetryProcessors.performanceMetricsTelemetryProcessor(envelope, this.quickPulseClient);\n            if (accepted) {\n                this.channel.send(envelope);\n            }\n        }\n        else {\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\n        }\n    };\n    /**\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\n     * before telemetry item is pushed for sending and in the order they were added.\n     *\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\n     */\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\n        this._telemetryProcessors.push(telemetryProcessor);\n    };\n    /*\n     * Removes all telemetry processors\n     */\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\n        this._telemetryProcessors = [];\n    };\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\n        var accepted = true;\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\n        if (telemetryProcessorsCount === 0) {\n            return accepted;\n        }\n        contextObjects = contextObjects || {};\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\n            try {\n                var processor = this._telemetryProcessors[i];\n                if (processor) {\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\n                        accepted = false;\n                        break;\n                    }\n                }\n            }\n            catch (error) {\n                accepted = true;\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\n            }\n        }\n        return accepted;\n    };\n    return TelemetryClient;\n}());\nmodule.exports = TelemetryClient;\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Channel = (function () {\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\n        this._buffer = [];\n        this._lastSend = 0;\n        this._isDisabled = isDisabled;\n        this._getBatchSize = getBatchSize;\n        this._getBatchIntervalMs = getBatchIntervalMs;\n        this._sender = sender;\n    }\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\n    };\n    /**\n     * Add a telemetry item to the send buffer\n     */\n    Channel.prototype.send = function (envelope) {\n        var _this = this;\n        // if master off switch is set, don't send any data\n        if (this._isDisabled()) {\n            // Do not send/save data\n            return;\n        }\n        // validate input\n        if (!envelope) {\n            Logging.warn(\"Cannot send null/undefined telemetry\");\n            return;\n        }\n        // check if the incoming payload is too large, truncate if necessary\n        var payload = this._stringify(envelope);\n        if (typeof payload !== \"string\") {\n            return;\n        }\n        // enqueue the payload\n        this._buffer.push(payload);\n        // flush if we would exceed the max-size limit by adding this item\n        if (this._buffer.length >= this._getBatchSize()) {\n            this.triggerSend(false);\n            return;\n        }\n        // ensure an invocation timeout is set if anything is in the buffer\n        if (!this._timeoutHandle && this._buffer.length > 0) {\n            this._timeoutHandle = setTimeout(function () {\n                _this._timeoutHandle = null;\n                _this.triggerSend(false);\n            }, this._getBatchIntervalMs());\n        }\n    };\n    /**\n     * Immediately send buffered data\n     */\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\n        var bufferIsEmpty = this._buffer.length < 1;\n        if (!bufferIsEmpty) {\n            // compose an array of payloads\n            var batch = this._buffer.join(\"\\n\");\n            // invoke send\n            if (isNodeCrashing) {\n                this._sender.saveOnCrash(batch);\n                if (typeof callback === \"function\") {\n                    callback(\"data saved on crash\");\n                }\n            }\n            else {\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\n            }\n        }\n        // update lastSend time to enable throttling\n        this._lastSend = +new Date;\n        // clear buffer\n        this._buffer.length = 0;\n        clearTimeout(this._timeoutHandle);\n        this._timeoutHandle = null;\n        if (bufferIsEmpty && typeof callback === \"function\") {\n            callback(\"no data to send\");\n        }\n    };\n    Channel.prototype._stringify = function (envelope) {\n        try {\n            return JSON.stringify(envelope);\n        }\n        catch (error) {\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\n        }\n    };\n    return Channel;\n}());\nmodule.exports = Channel;\n//# sourceMappingURL=Channel.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./SamplingTelemetryProcessor\"));\n__export(require(\"./PerformanceMetricsTelemetryProcessor\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts = require(\"../Declarations/Contracts\");\n/**\n *  A telemetry processor that handles sampling.\n */\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\n    var isSampledIn = false;\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\n        return true;\n    }\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\n        // Exclude MetricData telemetry from sampling\n        return true;\n    }\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\n    }\n    else {\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\n    }\n    return isSampledIn;\n}\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\n/** Ported from AI .NET SDK */\nfunction getSamplingHashCode(input) {\n    var csharpMin = -2147483648;\n    var csharpMax = 2147483647;\n    var hash = 5381;\n    if (!input) {\n        return 0;\n    }\n    while (input.length < 8) {\n        input = input + input;\n    }\n    for (var i = 0; i < input.length; i++) {\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\n    }\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\n    return (hash / csharpMax) * 100;\n}\nexports.getSamplingHashCode = getSamplingHashCode;\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AutoCollectPerformance = require(\"../AutoCollection/Performance\");\nvar TelemetryType = require(\"../Declarations/Contracts\");\nfunction performanceMetricsTelemetryProcessor(envelope, client) {\n    // If live metrics is enabled, forward all telemetry there\n    if (client) {\n        client.addDocument(envelope);\n    }\n    // Increment rate counters (for standard metrics and live metrics)\n    switch (envelope.data.baseType) {\n        case TelemetryType.TelemetryTypeString.Exception:\n            AutoCollectPerformance.countException();\n            break;\n        case TelemetryType.TelemetryTypeString.Request:\n            var requestData = envelope.data.baseData;\n            AutoCollectPerformance.countRequest(requestData.duration, requestData.success);\n            break;\n        case TelemetryType.TelemetryTypeString.Dependency:\n            var remoteDependencyData = envelope.data.baseData;\n            AutoCollectPerformance.countDependency(remoteDependencyData.duration, remoteDependencyData.success);\n            break;\n    }\n    return true;\n}\nexports.performanceMetricsTelemetryProcessor = performanceMetricsTelemetryProcessor;\n//# sourceMappingURL=PerformanceMetricsTelemetryProcessor.js.map","\"use strict\";\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar zlib = require(\"zlib\");\nvar child_process = require(\"child_process\");\nvar Logging = require(\"./Logging\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Util = require(\"./Util\");\nvar Sender = (function () {\n    function Sender(config, onSuccess, onError) {\n        this._config = config;\n        this._onSuccess = onSuccess;\n        this._onError = onError;\n        this._enableDiskRetryMode = false;\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\n        this._numConsecutiveFailures = 0;\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n            // Node's chmod levels do not appropriately restrict file access on Windows\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\n            // access to the temporary directory used for disk retry mode.\n            if (Sender.USE_ICACLS) {\n                // This should be async - but it's currently safer to have this synchronous\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\n                try {\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\n                }\n                catch (e) { }\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\n                }\n            }\n            else {\n                // chmod works everywhere else\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\n            }\n        }\n    }\n    /**\n    * Enable or disable offline mode\n    */\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\n            this._resendInterval = Math.floor(resendInterval);\n        }\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\n        }\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\n            this._enableDiskRetryMode = false;\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\n        }\n    };\n    Sender.prototype.send = function (payload, callback) {\n        var _this = this;\n        var endpointUrl = this._config.endpointUrl;\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\n        var options = {\n            method: \"POST\",\n            withCredentials: false,\n            headers: {\n                \"Content-Type\": \"application/x-json-stream\"\n            }\n        };\n        zlib.gzip(payload, function (err, buffer) {\n            var dataToSend = buffer;\n            if (err) {\n                Logging.warn(err);\n                dataToSend = payload; // something went wrong so send without gzip\n                options.headers[\"Content-Length\"] = payload.length.toString();\n            }\n            else {\n                options.headers[\"Content-Encoding\"] = \"gzip\";\n                options.headers[\"Content-Length\"] = buffer.length;\n            }\n            Logging.info(Sender.TAG, options);\n            // Ensure this request is not captured by auto-collection.\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\n            var requestCallback = function (res) {\n                res.setEncoding(\"utf-8\");\n                //returns empty if the data is accepted\n                var responseString = \"\";\n                res.on(\"data\", function (data) {\n                    responseString += data;\n                });\n                res.on(\"end\", function () {\n                    _this._numConsecutiveFailures = 0;\n                    Logging.info(Sender.TAG, responseString);\n                    if (typeof _this._onSuccess === \"function\") {\n                        _this._onSuccess(responseString);\n                    }\n                    if (typeof callback === \"function\") {\n                        callback(responseString);\n                    }\n                    if (_this._enableDiskRetryMode) {\n                        // try to send any cached events if the user is back online\n                        if (res.statusCode === 200) {\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval).unref();\n                            // store to disk in case of burst throttling\n                        }\n                        else if (res.statusCode === 408 ||\n                            res.statusCode === 429 ||\n                            res.statusCode === 439 ||\n                            res.statusCode === 500 ||\n                            res.statusCode === 503) {\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\n                            _this._storeToDisk(payload);\n                        }\n                    }\n                });\n            };\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\n            req.on(\"error\", function (error) {\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\n                _this._numConsecutiveFailures++;\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\n                // Continue informing on each failure if verbose logging is being used\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\n                    if (_this._enableDiskRetryMode) {\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\n                    }\n                    Logging.warn(Sender.TAG, notice, error);\n                }\n                else {\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\n                    Logging.info(Sender.TAG, notice, error);\n                }\n                _this._onErrorHelper(error);\n                if (typeof callback === \"function\") {\n                    var errorMessage = \"error sending telemetry\";\n                    if (error && (typeof error.toString === \"function\")) {\n                        errorMessage = error.toString();\n                    }\n                    callback(errorMessage);\n                }\n                if (_this._enableDiskRetryMode) {\n                    _this._storeToDisk(payload);\n                }\n            });\n            req.write(dataToSend);\n            req.end();\n        });\n    };\n    Sender.prototype.saveOnCrash = function (payload) {\n        if (this._enableDiskRetryMode) {\n            this._storeToDiskSync(payload);\n        }\n    };\n    Sender.prototype._runICACLS = function (args, callback) {\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\n        aclProc.on(\"error\", function (e) { return callback(e); });\n        aclProc.on(\"close\", function (code, signal) {\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\n        });\n    };\n    Sender.prototype._runICACLSSync = function (args) {\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\n            if (aclProc.error) {\n                throw aclProc.error;\n            }\n            else if (aclProc.status !== 0) {\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\n            }\n        }\n        else {\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLIdentity = function (callback) {\n        if (Sender.ACL_IDENTITY) {\n            return callback(null, Sender.ACL_IDENTITY);\n        }\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n            windowsHide: true,\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n        });\n        var data = \"\";\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\n        psProc.on(\"error\", function (e) { return callback(e, null); });\n        psProc.on(\"close\", function (code, signal) {\n            Sender.ACL_IDENTITY = data && data.trim();\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\n        });\n    };\n    Sender.prototype._getACLIdentitySync = function () {\n        if (Sender.ACL_IDENTITY) {\n            return Sender.ACL_IDENTITY;\n        }\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n                windowsHide: true,\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n            });\n            if (psProc.error) {\n                throw psProc.error;\n            }\n            else if (psProc.status !== 0) {\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\n            }\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\n            return Sender.ACL_IDENTITY;\n        }\n        else {\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLArguments = function (directory, identity) {\n        return [directory,\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\n            \"/grant\", identity + \":(OI)(CI)F\",\n            \"/inheritance:r\"]; // Remove all inherited permissions\n    };\n    Sender.prototype._applyACLRules = function (directory, callback) {\n        var _this = this;\n        if (!Sender.USE_ICACLS) {\n            return callback(null);\n        }\n        // For performance, only run ACL rules if we haven't already during this session\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\n            // This is better than the alternative of potentially infinitely spawned processes\n            Sender.ACLED_DIRECTORIES[directory] = false;\n            // Restrict this directory to only current user and administrator access\n            this._getACLIdentity(function (err, identity) {\n                if (err) {\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\n                    return callback(err);\n                }\n                else {\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\n                        return callback(err);\n                    });\n                }\n            });\n        }\n        else {\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\n        }\n    };\n    Sender.prototype._applyACLRulesSync = function (directory) {\n        if (Sender.USE_ICACLS) {\n            // For performance, only run ACL rules if we haven't already during this session\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\n                return;\n            }\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\n            }\n        }\n    };\n    Sender.prototype._confirmDirExists = function (directory, callback) {\n        var _this = this;\n        fs.lstat(directory, function (err, stats) {\n            if (err && err.code === 'ENOENT') {\n                fs.mkdir(directory, function (err) {\n                    if (err && err.code !== 'EEXIST') {\n                        callback(err);\n                    }\n                    else {\n                        _this._applyACLRules(directory, callback);\n                    }\n                });\n            }\n            else if (!err && stats.isDirectory()) {\n                _this._applyACLRules(directory, callback);\n            }\n            else {\n                callback(err || new Error(\"Path existed but was not a directory\"));\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\n     */\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\n        // Get the directory listing\n        fs.readdir(directory, function (err, files) {\n            if (err) {\n                return callback(err, -1);\n            }\n            var error = null;\n            var totalSize = 0;\n            var count = 0;\n            if (files.length === 0) {\n                callback(null, 0);\n                return;\n            }\n            // Query all file sizes\n            for (var i = 0; i < files.length; i++) {\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\n                    count++;\n                    if (err) {\n                        error = err;\n                    }\n                    else {\n                        if (fileStats.isFile()) {\n                            totalSize += fileStats.size;\n                        }\n                    }\n                    if (count === files.length) {\n                        // Did we get an error?\n                        if (error) {\n                            callback(error, -1);\n                        }\n                        else {\n                            callback(error, totalSize);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\n     */\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\n        var files = fs.readdirSync(directory);\n        var totalSize = 0;\n        for (var i = 0; i < files.length; i++) {\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\n        }\n        return totalSize;\n    };\n    /**\n     * Stores the payload as a json file on disk in the temp directory\n     */\n    Sender.prototype._storeToDisk = function (payload) {\n        var _this = this;\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        // This will create the dir if it does not exist\n        // Default permissions on *nix are directory listing from other users but no file creations\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n        this._confirmDirExists(directory, function (error) {\n            if (error) {\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\n                _this._onErrorHelper(error);\n                return;\n            }\n            _this._getShallowDirectorySize(directory, function (err, size) {\n                if (err || size < 0) {\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\n                    _this._onErrorHelper(err);\n                    return;\n                }\n                else if (size > _this._maxBytesOnDisk) {\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\n                    return;\n                }\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\n                //would require an external dependency\n                var fileName = new Date().getTime() + \".ai.json\";\n                var fileFullPath = path.join(directory, fileName);\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\n            });\n        });\n    };\n    /**\n     * Stores the payload as a json file on disk using sync file operations\n     * this is used when storing data before crashes\n     */\n    Sender.prototype._storeToDiskSync = function (payload) {\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        try {\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n            if (!fs.existsSync(directory)) {\n                fs.mkdirSync(directory);\n            }\n            // Make sure permissions are valid\n            this._applyACLRulesSync(directory);\n            var dirSize = this._getShallowDirectorySizeSync(directory);\n            if (dirSize > this._maxBytesOnDisk) {\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\n                return;\n            }\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\n            //would require an external dependency\n            var fileName = new Date().getTime() + \".ai.json\";\n            var fileFullPath = path.join(directory, fileName);\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\n        }\n        catch (error) {\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\n            this._onErrorHelper(error);\n        }\n    };\n    /**\n     * Check for temp telemetry files\n     * reads the first file if exist, deletes it and tries to send its load\n     */\n    Sender.prototype._sendFirstFileOnDisk = function () {\n        var _this = this;\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        fs.exists(tempDir, function (exists) {\n            if (exists) {\n                fs.readdir(tempDir, function (error, files) {\n                    if (!error) {\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\n                        if (files.length > 0) {\n                            var firstFile = files[0];\n                            var filePath = path.join(tempDir, firstFile);\n                            fs.readFile(filePath, function (error, payload) {\n                                if (!error) {\n                                    // delete the file first to prevent double sending\n                                    fs.unlink(filePath, function (error) {\n                                        if (!error) {\n                                            _this.send(payload);\n                                        }\n                                        else {\n                                            _this._onErrorHelper(error);\n                                        }\n                                    });\n                                }\n                                else {\n                                    _this._onErrorHelper(error);\n                                }\n                            });\n                        }\n                    }\n                    else {\n                        _this._onErrorHelper(error);\n                    }\n                });\n            }\n        });\n    };\n    Sender.prototype._onErrorHelper = function (error) {\n        if (typeof this._onError === \"function\") {\n            this._onError(error);\n        }\n    };\n    Sender.TAG = \"Sender\";\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\n    Sender.ACLED_DIRECTORIES = {};\n    Sender.ACL_IDENTITY = null;\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\n    return Sender;\n}());\nmodule.exports = Sender;\n//# sourceMappingURL=Sender.js.map","\"use strict\";\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"./Util\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\n/**\n * Manages the logic of creating envelopes from Telemetry objects\n */\nvar EnvelopeFactory = (function () {\n    function EnvelopeFactory() {\n    }\n    /**\n     * Creates envelope ready to be sent by Channel\n     * @param telemetry Telemetry data\n     * @param telemetryType Type of telemetry\n     * @param commonProperties Bag of custom common properties to be added to the envelope\n     * @param context Client context\n     * @param config Client configuration\n     */\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\n        var data = null;\n        switch (telemetryType) {\n            case Contracts.TelemetryType.Trace:\n                data = EnvelopeFactory.createTraceData(telemetry);\n                break;\n            case Contracts.TelemetryType.Dependency:\n                data = EnvelopeFactory.createDependencyData(telemetry);\n                break;\n            case Contracts.TelemetryType.Event:\n                data = EnvelopeFactory.createEventData(telemetry);\n                break;\n            case Contracts.TelemetryType.Exception:\n                data = EnvelopeFactory.createExceptionData(telemetry);\n                break;\n            case Contracts.TelemetryType.Request:\n                data = EnvelopeFactory.createRequestData(telemetry);\n                break;\n            case Contracts.TelemetryType.Metric:\n                data = EnvelopeFactory.createMetricData(telemetry);\n                break;\n            case Contracts.TelemetryType.Availability:\n                data = EnvelopeFactory.createAvailabilityData(telemetry);\n                break;\n        }\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\n            if (data && data.baseData) {\n                // if no properties are specified just add the common ones\n                if (!data.baseData.properties) {\n                    data.baseData.properties = commonProperties;\n                }\n                else {\n                    // otherwise, check each of the common ones\n                    for (var name in commonProperties) {\n                        // only override if the property `name` has not been set on this item\n                        if (!data.baseData.properties[name]) {\n                            data.baseData.properties[name] = commonProperties[name];\n                        }\n                    }\n                }\n            }\n            // sanitize properties\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\n        }\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\n        var envelope = new Contracts.Envelope();\n        envelope.data = data;\n        envelope.iKey = iKey;\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\n        envelope.name =\n            \"Microsoft.ApplicationInsights.\" +\n                iKey.replace(/-/g, \"\") +\n                \".\" +\n                data.baseType.substr(0, data.baseType.length - 4);\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\n        envelope.time = (new Date()).toISOString();\n        envelope.ver = 1;\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\n        // Exclude metrics from sampling by default\n        if (telemetryType === Contracts.TelemetryType.Metric) {\n            envelope.sampleRate = 100;\n        }\n        return envelope;\n    };\n    EnvelopeFactory.createTraceData = function (telemetry) {\n        var trace = new Contracts.MessageData();\n        trace.message = telemetry.message;\n        trace.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            trace.severityLevel = telemetry.severity;\n        }\n        else {\n            trace.severityLevel = Contracts.SeverityLevel.Information;\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\n        data.baseData = trace;\n        return data;\n    };\n    EnvelopeFactory.createDependencyData = function (telemetry) {\n        var remoteDependency = new Contracts.RemoteDependencyData();\n        if (typeof telemetry.name === \"string\") {\n            remoteDependency.name = telemetry.name.length > 1024 ? telemetry.name.slice(0, 1021) + '...' : telemetry.name;\n        }\n        remoteDependency.data = telemetry.data;\n        remoteDependency.target = telemetry.target;\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\n        remoteDependency.success = telemetry.success;\n        remoteDependency.type = telemetry.dependencyTypeName;\n        remoteDependency.properties = telemetry.properties;\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        if (telemetry.id) {\n            remoteDependency.id = telemetry.id;\n        }\n        else {\n            remoteDependency.id = Util.w3cTraceId();\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\n        data.baseData = remoteDependency;\n        return data;\n    };\n    EnvelopeFactory.createEventData = function (telemetry) {\n        var event = new Contracts.EventData();\n        event.name = telemetry.name;\n        event.properties = telemetry.properties;\n        event.measurements = telemetry.measurements;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\n        data.baseData = event;\n        return data;\n    };\n    EnvelopeFactory.createExceptionData = function (telemetry) {\n        var exception = new Contracts.ExceptionData();\n        exception.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            exception.severityLevel = telemetry.severity;\n        }\n        else {\n            exception.severityLevel = Contracts.SeverityLevel.Error;\n        }\n        exception.measurements = telemetry.measurements;\n        exception.exceptions = [];\n        var stack = telemetry.exception[\"stack\"];\n        var exceptionDetails = new Contracts.ExceptionDetails();\n        exceptionDetails.message = telemetry.exception.message;\n        exceptionDetails.typeName = telemetry.exception.name;\n        exceptionDetails.parsedStack = this.parseStack(stack);\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\n        exception.exceptions.push(exceptionDetails);\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\n        data.baseData = exception;\n        return data;\n    };\n    EnvelopeFactory.createRequestData = function (telemetry) {\n        var requestData = new Contracts.RequestData();\n        if (telemetry.id) {\n            requestData.id = telemetry.id;\n        }\n        else {\n            requestData.id = Util.w3cTraceId();\n        }\n        requestData.name = telemetry.name;\n        requestData.url = telemetry.url;\n        requestData.source = telemetry.source;\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        requestData.success = telemetry.success;\n        requestData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\n        data.baseData = requestData;\n        return data;\n    };\n    EnvelopeFactory.createMetricData = function (telemetry) {\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\n        metrics.metrics = [];\n        var metric = new Contracts.DataPoint();\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\n        metric.kind = Contracts.DataPointType.Aggregation;\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\n        metric.name = telemetry.name;\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\n        metric.value = telemetry.value;\n        metrics.metrics.push(metric);\n        metrics.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\n        data.baseData = metrics;\n        return data;\n    };\n    EnvelopeFactory.createAvailabilityData = function (telemetry) {\n        var availabilityData = new Contracts.AvailabilityData();\n        if (telemetry.id) {\n            availabilityData.id = telemetry.id;\n        }\n        else {\n            availabilityData.id = Util.w3cTraceId();\n        }\n        availabilityData.name = telemetry.name;\n        availabilityData.duration = Util.msToTimeSpan(telemetry.duration);\n        availabilityData.success = telemetry.success;\n        availabilityData.runLocation = telemetry.runLocation;\n        availabilityData.message = telemetry.message;\n        availabilityData.measurements = telemetry.measurements;\n        availabilityData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Availability);\n        data.baseData = availabilityData;\n        return data;\n    };\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        // Make a copy of context tags so we don't alter the actual object\n        // Also perform tag overriding\n        var newTags = {};\n        if (context && context.tags) {\n            for (var key in context.tags) {\n                newTags[key] = context.tags[key];\n            }\n        }\n        if (tagOverrides) {\n            for (var key in tagOverrides) {\n                newTags[key] = tagOverrides[key];\n            }\n        }\n        // Fill in internally-populated values if not already set\n        if (correlationContext) {\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\n        }\n        return newTags;\n    };\n    EnvelopeFactory.parseStack = function (stack) {\n        var parsedStack = undefined;\n        if (typeof stack === \"string\") {\n            var frames = stack.split(\"\\n\");\n            parsedStack = [];\n            var level = 0;\n            var totalSizeInBytes = 0;\n            for (var i = 0; i <= frames.length; i++) {\n                var frame = frames[i];\n                if (_StackFrame.regex.test(frame)) {\n                    var parsedFrame = new _StackFrame(frames[i], level++);\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\n                    parsedStack.push(parsedFrame);\n                }\n            }\n            // DP Constraint - exception parsed stack must be < 32KB\n            // remove frames from the middle to meet the threshold\n            var exceptionParsedStackThreshold = 32 * 1024;\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\n                var left = 0;\n                var right = parsedStack.length - 1;\n                var size = 0;\n                var acceptedLeft = left;\n                var acceptedRight = right;\n                while (left < right) {\n                    // check size\n                    var lSize = parsedStack[left].sizeInBytes;\n                    var rSize = parsedStack[right].sizeInBytes;\n                    size += lSize + rSize;\n                    if (size > exceptionParsedStackThreshold) {\n                        // remove extra frames from the middle\n                        var howMany = acceptedRight - acceptedLeft + 1;\n                        parsedStack.splice(acceptedLeft, howMany);\n                        break;\n                    }\n                    // update pointers\n                    acceptedLeft = left;\n                    acceptedRight = right;\n                    left++;\n                    right--;\n                }\n            }\n        }\n        return parsedStack;\n    };\n    return EnvelopeFactory;\n}());\nvar _StackFrame = (function () {\n    function _StackFrame(frame, level) {\n        this.sizeInBytes = 0;\n        this.level = level;\n        this.method = \"<no_method>\";\n        this.assembly = Util.trim(frame);\n        var matches = frame.match(_StackFrame.regex);\n        if (matches && matches.length >= 5) {\n            this.method = Util.trim(matches[2]) || this.method;\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\n            this.line = parseInt(matches[5]) || 0;\n        }\n        this.sizeInBytes += this.method.length;\n        this.sizeInBytes += this.fileName.length;\n        this.sizeInBytes += this.assembly.length;\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\n        this.sizeInBytes += _StackFrame.baseSize;\n        this.sizeInBytes += this.level.toString().length;\n        this.sizeInBytes += this.line.toString().length;\n    }\n    // regex to match stack frames from ie/chrome/ff\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\n    return _StackFrame;\n}());\nmodule.exports = EnvelopeFactory;\n//# sourceMappingURL=EnvelopeFactory.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport { Logger } from './logger';\n\nenum Trace {\n\tOff,\n\tMessages,\n\tVerbose,\n}\n\nnamespace Trace {\n\texport function fromString(value: string): Trace {\n\t\tvalue = value.toLowerCase();\n\t\tswitch (value) {\n\t\t\tcase 'off':\n\t\t\t\treturn Trace.Off;\n\t\t\tcase 'messages':\n\t\t\t\treturn Trace.Messages;\n\t\t\tcase 'verbose':\n\t\t\t\treturn Trace.Verbose;\n\t\t\tdefault:\n\t\t\t\treturn Trace.Off;\n\t\t}\n\t}\n}\n\ninterface RequestExecutionMetadata {\n\treadonly queuingStartTime: number\n}\n\nexport default class Tracer {\n\tprivate trace?: Trace;\n\n\tconstructor(\n\t\tprivate readonly logger: Logger\n\t) {\n\t\tthis.updateConfiguration();\n\t}\n\n\tpublic updateConfiguration() {\n\t\tthis.trace = Tracer.readTrace();\n\t}\n\n\tprivate static readTrace(): Trace {\n\t\tlet result: Trace = Trace.fromString(vscode.workspace.getConfiguration().get<string>('typescript.tsserver.trace', 'off'));\n\t\tif (result === Trace.Off && !!process.env.TSS_TRACE) {\n\t\t\tresult = Trace.Messages;\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic traceRequest(serverId: string, request: Proto.Request, responseExpected: boolean, queueLength: number): void {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tlet data: string | undefined = undefined;\n\t\tif (this.trace === Trace.Verbose && request.arguments) {\n\t\t\tdata = `Arguments: ${JSON.stringify(request.arguments, null, 4)}`;\n\t\t}\n\t\tthis.logTrace(serverId, `Sending request: ${request.command} (${request.seq}). Response expected: ${responseExpected ? 'yes' : 'no'}. Current queue length: ${queueLength}`, data);\n\t}\n\n\tpublic traceResponse(serverId: string, response: Proto.Response, meta: RequestExecutionMetadata): void {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tlet data: string | undefined = undefined;\n\t\tif (this.trace === Trace.Verbose && response.body) {\n\t\t\tdata = `Result: ${JSON.stringify(response.body, null, 4)}`;\n\t\t}\n\t\tthis.logTrace(serverId, `Response received: ${response.command} (${response.request_seq}). Request took ${Date.now() - meta.queuingStartTime} ms. Success: ${response.success} ${!response.success ? '. Message: ' + response.message : ''}`, data);\n\t}\n\n\tpublic traceRequestCompleted(serverId: string, command: string, request_seq: number, meta: RequestExecutionMetadata): any {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tthis.logTrace(serverId, `Async response received: ${command} (${request_seq}). Request took ${Date.now() - meta.queuingStartTime} ms.`);\n\t}\n\n\tpublic traceEvent(serverId: string, event: Proto.Event): void {\n\t\tif (this.trace === Trace.Off) {\n\t\t\treturn;\n\t\t}\n\t\tlet data: string | undefined = undefined;\n\t\tif (this.trace === Trace.Verbose && event.body) {\n\t\t\tdata = `Data: ${JSON.stringify(event.body, null, 4)}`;\n\t\t}\n\t\tthis.logTrace(serverId, `Event received: ${event.event} (${event.seq}).`, data);\n\t}\n\n\tpublic logTrace(serverId: string, message: string, data?: any): void {\n\t\tif (this.trace !== Trace.Off) {\n\t\t\tthis.logger.logLevel('Trace', `<${serverId}> ${message}`, data);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { loadMessageBundle } from 'vscode-nls';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { Disposable } from './dispose';\n\nconst localize = loadMessageBundle();\n\nconst typingsInstallTimeout = 30 * 1000;\n\nexport default class TypingsStatus extends Disposable {\n\tprivate readonly _acquiringTypings = new Map<number, NodeJS.Timer>();\n\tprivate readonly _client: ITypeScriptServiceClient;\n\n\tconstructor(client: ITypeScriptServiceClient) {\n\t\tsuper();\n\t\tthis._client = client;\n\n\t\tthis._register(\n\t\t\tthis._client.onDidBeginInstallTypings(event => this.onBeginInstallTypings(event.eventId)));\n\n\t\tthis._register(\n\t\t\tthis._client.onDidEndInstallTypings(event => this.onEndInstallTypings(event.eventId)));\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\n\t\tfor (const timeout of this._acquiringTypings.values()) {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t}\n\n\tpublic get isAcquiringTypings(): boolean {\n\t\treturn Object.keys(this._acquiringTypings).length > 0;\n\t}\n\n\tprivate onBeginInstallTypings(eventId: number): void {\n\t\tif (this._acquiringTypings.has(eventId)) {\n\t\t\treturn;\n\t\t}\n\t\tthis._acquiringTypings.set(eventId, setTimeout(() => {\n\t\t\tthis.onEndInstallTypings(eventId);\n\t\t}, typingsInstallTimeout));\n\t}\n\n\tprivate onEndInstallTypings(eventId: number): void {\n\t\tconst timer = this._acquiringTypings.get(eventId);\n\t\tif (timer) {\n\t\t\tclearTimeout(timer);\n\t\t}\n\t\tthis._acquiringTypings.delete(eventId);\n\t}\n}\n\nexport class AtaProgressReporter extends Disposable {\n\n\tprivate readonly _promises = new Map<number, Function>();\n\n\tconstructor(client: ITypeScriptServiceClient) {\n\t\tsuper();\n\t\tthis._register(client.onDidBeginInstallTypings(e => this._onBegin(e.eventId)));\n\t\tthis._register(client.onDidEndInstallTypings(e => this._onEndOrTimeout(e.eventId)));\n\t\tthis._register(client.onTypesInstallerInitializationFailed(_ => this.onTypesInstallerInitializationFailed()));\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis._promises.forEach(value => value());\n\t}\n\n\tprivate _onBegin(eventId: number): void {\n\t\tconst handle = setTimeout(() => this._onEndOrTimeout(eventId), typingsInstallTimeout);\n\t\tconst promise = new Promise<void>(resolve => {\n\t\t\tthis._promises.set(eventId, () => {\n\t\t\t\tclearTimeout(handle);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\n\t\tvscode.window.withProgress({\n\t\t\tlocation: vscode.ProgressLocation.Window,\n\t\t\ttitle: localize('installingPackages', \"Fetching data for better TypeScript IntelliSense\")\n\t\t}, () => promise);\n\t}\n\n\tprivate _onEndOrTimeout(eventId: number): void {\n\t\tconst resolve = this._promises.get(eventId);\n\t\tif (resolve) {\n\t\t\tthis._promises.delete(eventId);\n\t\t\tresolve();\n\t\t}\n\t}\n\n\tprivate async onTypesInstallerInitializationFailed() {\n\t\tconst config = vscode.workspace.getConfiguration('typescript');\n\n\t\tif (config.get<boolean>('check.npmIsInstalled', true)) {\n\t\t\tconst dontShowAgain: vscode.MessageItem = {\n\t\t\t\ttitle: localize('typesInstallerInitializationFailed.doNotCheckAgain', \"Don't Show Again\"),\n\t\t\t};\n\t\t\tconst selected = await vscode.window.showWarningMessage(\n\t\t\t\tlocalize(\n\t\t\t\t\t'typesInstallerInitializationFailed.title',\n\t\t\t\t\t\"Could not install typings files for JavaScript language features. Please ensure that NPM is installed or configure 'typescript.npm' in your user settings. Click [here]({0}) to learn more.\",\n\t\t\t\t\t'https://go.microsoft.com/fwlink/?linkid=847635'\n\t\t\t\t),\n\t\t\t\tdontShowAgain);\n\n\t\t\tif (selected === dontShowAgain) {\n\t\t\t\tconfig.update('check.npmIsInstalled', false, true);\n\t\t\t}\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { loadMessageBundle } from 'vscode-nls';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport { TelemetryReporter } from './telemetry';\nimport { isImplicitProjectConfigFile, openOrCreateConfig, ProjectType } from './tsconfig';\n\nconst localize = loadMessageBundle();\n\ninterface Hint {\n\tmessage: string;\n}\n\nclass ExcludeHintItem {\n\tpublic configFileName?: string;\n\tprivate _item: vscode.StatusBarItem;\n\tprivate _currentHint?: Hint;\n\n\tconstructor(\n\t\tprivate readonly telemetryReporter: TelemetryReporter\n\t) {\n\t\tthis._item = vscode.window.createStatusBarItem({\n\t\t\tid: 'status.typescript.exclude',\n\t\t\tname: localize('statusExclude', \"TypeScript: Configure Excludes\"),\n\t\t\talignment: vscode.StatusBarAlignment.Right,\n\t\t\tpriority: 98 /* to the right of typescript version status (99) */\n\t\t});\n\t\tthis._item.command = 'js.projectStatus.command';\n\t}\n\n\tpublic getCurrentHint(): Hint {\n\t\treturn this._currentHint!;\n\t}\n\n\tpublic hide() {\n\t\tthis._item.hide();\n\t}\n\n\tpublic show(largeRoots?: string) {\n\t\tthis._currentHint = {\n\t\t\tmessage: largeRoots\n\t\t\t\t? localize('hintExclude', \"To enable project-wide JavaScript/TypeScript language features, exclude folders with many files, like: {0}\", largeRoots)\n\t\t\t\t: localize('hintExclude.generic', \"To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on.\")\n\t\t};\n\t\tthis._item.tooltip = this._currentHint.message;\n\t\tthis._item.text = localize('large.label', \"Configure Excludes\");\n\t\tthis._item.tooltip = localize('hintExclude.tooltip', \"To enable project-wide JavaScript/TypeScript language features, exclude large folders with source files that you do not work on.\");\n\t\tthis._item.color = '#A5DF3B';\n\t\tthis._item.show();\n\t\t/* __GDPR__\n\t\t\t\"js.hintProjectExcludes\" : {\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${TypeScriptCommonProperties}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryReporter.logTelemetry('js.hintProjectExcludes');\n\t}\n}\n\n\nfunction createLargeProjectMonitorFromTypeScript(item: ExcludeHintItem, client: ITypeScriptServiceClient): vscode.Disposable {\n\n\tinterface LargeProjectMessageItem extends vscode.MessageItem {\n\t\tindex: number;\n\t}\n\n\treturn client.onProjectLanguageServiceStateChanged(body => {\n\t\tif (body.languageServiceEnabled) {\n\t\t\titem.hide();\n\t\t} else {\n\t\t\titem.show();\n\t\t\tconst configFileName = body.projectName;\n\t\t\tif (configFileName) {\n\t\t\t\titem.configFileName = configFileName;\n\t\t\t\tvscode.window.showWarningMessage<LargeProjectMessageItem>(item.getCurrentHint().message,\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: localize('large.label', \"Configure Excludes\"),\n\t\t\t\t\t\tindex: 0\n\t\t\t\t\t}).then(selected => {\n\t\t\t\t\t\tif (selected && selected.index === 0) {\n\t\t\t\t\t\t\tonConfigureExcludesSelected(client, configFileName);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction onConfigureExcludesSelected(\n\tclient: ITypeScriptServiceClient,\n\tconfigFileName: string\n) {\n\tif (!isImplicitProjectConfigFile(configFileName)) {\n\t\tvscode.workspace.openTextDocument(configFileName)\n\t\t\t.then(vscode.window.showTextDocument);\n\t} else {\n\t\tconst root = client.getWorkspaceRootForResource(vscode.Uri.file(configFileName));\n\t\tif (root) {\n\t\t\topenOrCreateConfig(\n\t\t\t\t/tsconfig\\.?.*\\.json/.test(configFileName) ? ProjectType.TypeScript : ProjectType.JavaScript,\n\t\t\t\troot,\n\t\t\t\tclient.configuration);\n\t\t}\n\t}\n}\n\nexport function create(\n\tclient: ITypeScriptServiceClient,\n): vscode.Disposable {\n\tconst toDispose: vscode.Disposable[] = [];\n\n\tconst item = new ExcludeHintItem(client.telemetryReporter);\n\ttoDispose.push(vscode.commands.registerCommand('js.projectStatus.command', () => {\n\t\tif (item.configFileName) {\n\t\t\tonConfigureExcludesSelected(client, item.configFileName);\n\t\t}\n\t\tconst { message } = item.getCurrentHint();\n\t\treturn vscode.window.showInformationMessage(message);\n\t}));\n\n\ttoDispose.push(createLargeProjectMonitorFromTypeScript(item, client));\n\n\treturn vscode.Disposable.from(...toDispose);\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport type * as Proto from '../protocol';\nimport * as PConst from '../protocol.const';\nimport { ITypeScriptServiceClient } from '../typescriptService';\nimport API from '../utils/api';\nimport * as fileSchemes from '../utils/fileSchemes';\nimport { doesResourceLookLikeAJavaScriptFile, doesResourceLookLikeATypeScriptFile } from '../utils/languageDescription';\nimport * as typeConverters from '../utils/typeConverters';\nimport { parseKindModifier } from '../utils/modifiers';\n\nfunction getSymbolKind(item: Proto.NavtoItem): vscode.SymbolKind {\n\tswitch (item.kind) {\n\t\tcase PConst.Kind.method: return vscode.SymbolKind.Method;\n\t\tcase PConst.Kind.enum: return vscode.SymbolKind.Enum;\n\t\tcase PConst.Kind.enumMember: return vscode.SymbolKind.EnumMember;\n\t\tcase PConst.Kind.function: return vscode.SymbolKind.Function;\n\t\tcase PConst.Kind.class: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.interface: return vscode.SymbolKind.Interface;\n\t\tcase PConst.Kind.type: return vscode.SymbolKind.Class;\n\t\tcase PConst.Kind.memberVariable: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.memberGetAccessor: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.memberSetAccessor: return vscode.SymbolKind.Field;\n\t\tcase PConst.Kind.variable: return vscode.SymbolKind.Variable;\n\t\tdefault: return vscode.SymbolKind.Variable;\n\t}\n}\n\nclass TypeScriptWorkspaceSymbolProvider implements vscode.WorkspaceSymbolProvider {\n\n\tpublic constructor(\n\t\tprivate readonly client: ITypeScriptServiceClient,\n\t\tprivate readonly modeIds: readonly string[],\n\t) { }\n\n\tpublic async provideWorkspaceSymbols(\n\t\tsearch: string,\n\t\ttoken: vscode.CancellationToken\n\t): Promise<vscode.SymbolInformation[]> {\n\t\tlet file: string | undefined;\n\t\tif (this.searchAllOpenProjects) {\n\t\t\tfile = undefined;\n\t\t} else {\n\t\t\tconst document = this.getDocument();\n\t\t\tfile = document ? await this.toOpenedFiledPath(document) : undefined;\n\n\t\t\tif (!file && this.client.apiVersion.lt(API.v390)) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\tconst args: Proto.NavtoRequestArgs = {\n\t\t\tfile,\n\t\t\tsearchValue: search,\n\t\t\tmaxResultCount: 256,\n\t\t};\n\n\t\tconst response = await this.client.execute('navto', args, token);\n\t\tif (response.type !== 'response' || !response.body) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn response.body\n\t\t\t.filter(item => item.containerName || item.kind !== 'alias')\n\t\t\t.map(item => this.toSymbolInformation(item));\n\t}\n\n\tprivate get searchAllOpenProjects() {\n\t\treturn this.client.apiVersion.gte(API.v390)\n\t\t\t&& vscode.workspace.getConfiguration('typescript').get('workspaceSymbols.scope', 'allOpenProjects') === 'allOpenProjects';\n\t}\n\n\tprivate async toOpenedFiledPath(document: vscode.TextDocument) {\n\t\tif (document.uri.scheme === fileSchemes.git) {\n\t\t\ttry {\n\t\t\t\tconst path = vscode.Uri.file(JSON.parse(document.uri.query)?.path);\n\t\t\t\tif (doesResourceLookLikeATypeScriptFile(path) || doesResourceLookLikeAJavaScriptFile(path)) {\n\t\t\t\t\tconst document = await vscode.workspace.openTextDocument(path);\n\t\t\t\t\treturn this.client.toOpenedFilePath(document);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// noop\n\t\t\t}\n\t\t}\n\t\treturn this.client.toOpenedFilePath(document);\n\t}\n\n\tprivate toSymbolInformation(item: Proto.NavtoItem) {\n\t\tconst label = TypeScriptWorkspaceSymbolProvider.getLabel(item);\n\t\tconst info = new vscode.SymbolInformation(\n\t\t\tlabel,\n\t\t\tgetSymbolKind(item),\n\t\t\titem.containerName || '',\n\t\t\ttypeConverters.Location.fromTextSpan(this.client.toResource(item.file), item));\n\t\tconst kindModifiers = item.kindModifiers ? parseKindModifier(item.kindModifiers) : undefined;\n\t\tif (kindModifiers?.has(PConst.KindModifiers.depreacted)) {\n\t\t\tinfo.tags = [vscode.SymbolTag.Deprecated];\n\t\t}\n\t\treturn info;\n\t}\n\n\tprivate static getLabel(item: Proto.NavtoItem) {\n\t\tconst label = item.name;\n\t\tif (item.kind === 'method' || item.kind === 'function') {\n\t\t\treturn label + '()';\n\t\t}\n\t\treturn label;\n\t}\n\n\tprivate getDocument(): vscode.TextDocument | undefined {\n\t\t// typescript wants to have a resource even when asking\n\t\t// general questions so we check the active editor. If this\n\t\t// doesn't match we take the first TS document.\n\n\t\tconst activeDocument = vscode.window.activeTextEditor?.document;\n\t\tif (activeDocument) {\n\t\t\tif (this.modeIds.includes(activeDocument.languageId)) {\n\t\t\t\treturn activeDocument;\n\t\t\t}\n\t\t}\n\n\t\tconst documents = vscode.workspace.textDocuments;\n\t\tfor (const document of documents) {\n\t\t\tif (this.modeIds.includes(document.languageId)) {\n\t\t\t\treturn document;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nexport function register(\n\tclient: ITypeScriptServiceClient,\n\tmodeIds: readonly string[],\n) {\n\treturn vscode.languages.registerWorkspaceSymbolProvider(\n\t\tnew TypeScriptWorkspaceSymbolProvider(client, modeIds));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface Lazy<T> {\n\tvalue: T;\n\thasValue: boolean;\n\tmap<R>(f: (x: T) => R): Lazy<R>;\n}\n\nclass LazyValue<T> implements Lazy<T> {\n\tprivate _hasValue: boolean = false;\n\tprivate _value?: T;\n\n\tconstructor(\n\t\tprivate readonly _getValue: () => T\n\t) { }\n\n\tget value(): T {\n\t\tif (!this._hasValue) {\n\t\t\tthis._hasValue = true;\n\t\t\tthis._value = this._getValue();\n\t\t}\n\t\treturn this._value!;\n\t}\n\n\tget hasValue(): boolean {\n\t\treturn this._hasValue;\n\t}\n\n\tpublic map<R>(f: (x: T) => R): Lazy<R> {\n\t\treturn new LazyValue(() => f(this.value));\n\t}\n}\n\nexport function lazy<T>(getValue: () => T): Lazy<T> {\n\treturn new LazyValue<T>(getValue);\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { ActiveJsTsEditorTracker } from './activeJsTsEditorTracker';\nimport { Disposable } from './dispose';\nimport { isJsConfigOrTsConfigFileName } from './languageDescription';\nimport { isSupportedLanguageMode } from './languageModeIds';\n\n/**E\n * When clause context set when the current file is managed by vscode's built-in typescript extension.\n */\nexport default class ManagedFileContextManager extends Disposable {\n\tprivate static readonly contextName = 'typescript.isManagedFile';\n\n\tprivate isInManagedFileContext: boolean = false;\n\n\tpublic constructor(\n\t\tactiveJsTsEditorTracker: ActiveJsTsEditorTracker,\n\t\tprivate readonly normalizePath: (resource: vscode.Uri) => string | undefined,\n\t) {\n\t\tsuper();\n\t\tactiveJsTsEditorTracker.onDidChangeActiveJsTsEditor(this.onDidChangeActiveTextEditor, this, this._disposables);\n\n\t\tthis.onDidChangeActiveTextEditor(activeJsTsEditorTracker.activeJsTsEditor);\n\t}\n\n\tprivate onDidChangeActiveTextEditor(editor?: vscode.TextEditor): void {\n\t\tif (editor) {\n\t\t\tthis.updateContext(this.isManagedFile(editor));\n\t\t} else {\n\t\t\tthis.updateContext(false);\n\t\t}\n\t}\n\n\tprivate updateContext(newValue: boolean) {\n\t\tif (newValue === this.isInManagedFileContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tvscode.commands.executeCommand('setContext', ManagedFileContextManager.contextName, newValue);\n\t\tthis.isInManagedFileContext = newValue;\n\t}\n\n\tprivate isManagedFile(editor: vscode.TextEditor): boolean {\n\t\treturn this.isManagedScriptFile(editor) || this.isManagedConfigFile(editor);\n\t}\n\n\tprivate isManagedScriptFile(editor: vscode.TextEditor): boolean {\n\t\treturn isSupportedLanguageMode(editor.document) && this.normalizePath(editor.document.uri) !== null;\n\t}\n\n\tprivate isManagedConfigFile(editor: vscode.TextEditor): boolean {\n\t\treturn isJsConfigOrTsConfigFileName(editor.document.fileName);\n\t}\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { getTempFile } from '../utils/temp.electron';\nimport Tracer from '../utils/tracer';\nimport { OngoingRequestCanceller, OngoingRequestCancellerFactory } from './cancellation';\n\nexport class NodeRequestCanceller implements OngoingRequestCanceller {\n\tpublic readonly cancellationPipeName: string;\n\n\tpublic constructor(\n\t\tprivate readonly _serverId: string,\n\t\tprivate readonly _tracer: Tracer,\n\t) {\n\t\tthis.cancellationPipeName = getTempFile('tscancellation');\n\t}\n\n\tpublic tryCancelOngoingRequest(seq: number): boolean {\n\t\tif (!this.cancellationPipeName) {\n\t\t\treturn false;\n\t\t}\n\t\tthis._tracer.logTrace(this._serverId, `TypeScript Server: trying to cancel ongoing request with sequence number ${seq}`);\n\t\ttry {\n\t\t\tfs.writeFileSync(this.cancellationPipeName + seq, '');\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\t\treturn true;\n\t}\n}\n\n\nexport const nodeRequestCancellerFactory = new class implements OngoingRequestCancellerFactory {\n\tcreate(serverId: string, tracer: Tracer): OngoingRequestCanceller {\n\t\treturn new NodeRequestCanceller(serverId, tracer);\n\t}\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport { ILogDirectoryProvider } from './logDirectoryProvider';\nimport { memoize } from '../utils/memoize';\n\nexport class NodeLogDirectoryProvider implements ILogDirectoryProvider {\n\tpublic constructor(\n\t\tprivate readonly context: vscode.ExtensionContext\n\t) { }\n\n\tpublic getNewLogDirectory(): string | undefined {\n\t\tconst root = this.logDirectory();\n\t\tif (root) {\n\t\t\ttry {\n\t\t\t\treturn fs.mkdtempSync(path.join(root, `tsserver-log-`));\n\t\t\t} catch (e) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t@memoize\n\tprivate logDirectory(): string | undefined {\n\t\ttry {\n\t\t\tconst path = this.context.logPath;\n\t\t\tif (!fs.existsSync(path)) {\n\t\t\t\tfs.mkdirSync(path);\n\t\t\t}\n\t\t\treturn this.context.logPath;\n\t\t} catch {\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport * as vscode from 'vscode';\nimport API from '../utils/api';\nimport { TypeScriptServiceConfiguration } from '../utils/configuration';\nimport { RelativeWorkspacePathResolver } from '../utils/relativePathResolver';\nimport { ITypeScriptVersionProvider, localize, TypeScriptVersion, TypeScriptVersionSource } from './versionProvider';\n\nexport class DiskTypeScriptVersionProvider implements ITypeScriptVersionProvider {\n\n\tpublic constructor(\n\t\tprivate configuration?: TypeScriptServiceConfiguration\n\t) { }\n\n\tpublic updateConfiguration(configuration: TypeScriptServiceConfiguration): void {\n\t\tthis.configuration = configuration;\n\t}\n\n\tpublic get defaultVersion(): TypeScriptVersion {\n\t\treturn this.globalVersion || this.bundledVersion;\n\t}\n\n\tpublic get globalVersion(): TypeScriptVersion | undefined {\n\t\tif (this.configuration?.globalTsdk) {\n\t\t\tconst globals = this.loadVersionsFromSetting(TypeScriptVersionSource.UserSetting, this.configuration.globalTsdk);\n\t\t\tif (globals && globals.length) {\n\t\t\t\treturn globals[0];\n\t\t\t}\n\t\t}\n\t\treturn this.contributedTsNextVersion;\n\t}\n\n\tpublic get localVersion(): TypeScriptVersion | undefined {\n\t\tconst tsdkVersions = this.localTsdkVersions;\n\t\tif (tsdkVersions && tsdkVersions.length) {\n\t\t\treturn tsdkVersions[0];\n\t\t}\n\n\t\tconst nodeVersions = this.localNodeModulesVersions;\n\t\tif (nodeVersions && nodeVersions.length === 1) {\n\t\t\treturn nodeVersions[0];\n\t\t}\n\t\treturn undefined;\n\t}\n\n\n\tpublic get localVersions(): TypeScriptVersion[] {\n\t\tconst allVersions = this.localTsdkVersions.concat(this.localNodeModulesVersions);\n\t\tconst paths = new Set<string>();\n\t\treturn allVersions.filter(x => {\n\t\t\tif (paths.has(x.path)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tpaths.add(x.path);\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tpublic get bundledVersion(): TypeScriptVersion {\n\t\tconst version = this.getContributedVersion(TypeScriptVersionSource.Bundled, 'vscode.typescript-language-features', ['..', 'node_modules']);\n\t\tif (version) {\n\t\t\treturn version;\n\t\t}\n\n\t\tvscode.window.showErrorMessage(localize(\n\t\t\t'noBundledServerFound',\n\t\t\t'VS Code\\'s tsserver was deleted by another application such as a misbehaving virus detection tool. Please reinstall VS Code.'));\n\t\tthrow new Error('Could not find bundled tsserver.js');\n\t}\n\n\tprivate get contributedTsNextVersion(): TypeScriptVersion | undefined {\n\t\treturn this.getContributedVersion(TypeScriptVersionSource.TsNightlyExtension, 'ms-vscode.vscode-typescript-next', ['node_modules']);\n\t}\n\n\tprivate getContributedVersion(source: TypeScriptVersionSource, extensionId: string, pathToTs: readonly string[]): TypeScriptVersion | undefined {\n\t\ttry {\n\t\t\tconst extension = vscode.extensions.getExtension(extensionId);\n\t\t\tif (extension) {\n\t\t\t\tconst serverPath = path.join(extension.extensionPath, ...pathToTs, 'typescript', 'lib', 'tsserver.js');\n\t\t\t\tconst bundledVersion = new TypeScriptVersion(source, serverPath, DiskTypeScriptVersionProvider.getApiVersion(serverPath), '');\n\t\t\t\tif (bundledVersion.isValid) {\n\t\t\t\t\treturn bundledVersion;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate get localTsdkVersions(): TypeScriptVersion[] {\n\t\tconst localTsdk = this.configuration?.localTsdk;\n\t\treturn localTsdk ? this.loadVersionsFromSetting(TypeScriptVersionSource.WorkspaceSetting, localTsdk) : [];\n\t}\n\n\tprivate loadVersionsFromSetting(source: TypeScriptVersionSource, tsdkPathSetting: string): TypeScriptVersion[] {\n\t\tif (path.isAbsolute(tsdkPathSetting)) {\n\t\t\tconst serverPath = path.join(tsdkPathSetting, 'tsserver.js');\n\t\t\treturn [\n\t\t\t\tnew TypeScriptVersion(source,\n\t\t\t\t\tserverPath,\n\t\t\t\t\tDiskTypeScriptVersionProvider.getApiVersion(serverPath),\n\t\t\t\t\ttsdkPathSetting)\n\t\t\t];\n\t\t}\n\n\t\tconst workspacePath = RelativeWorkspacePathResolver.asAbsoluteWorkspacePath(tsdkPathSetting);\n\t\tif (workspacePath !== undefined) {\n\t\t\tconst serverPath = path.join(workspacePath, 'tsserver.js');\n\t\t\treturn [\n\t\t\t\tnew TypeScriptVersion(source,\n\t\t\t\t\tserverPath,\n\t\t\t\t\tDiskTypeScriptVersionProvider.getApiVersion(serverPath),\n\t\t\t\t\ttsdkPathSetting)\n\t\t\t];\n\t\t}\n\n\t\treturn this.loadTypeScriptVersionsFromPath(source, tsdkPathSetting);\n\t}\n\n\tprivate get localNodeModulesVersions(): TypeScriptVersion[] {\n\t\treturn this.loadTypeScriptVersionsFromPath(TypeScriptVersionSource.NodeModules, path.join('node_modules', 'typescript', 'lib'))\n\t\t\t.filter(x => x.isValid);\n\t}\n\n\tprivate loadTypeScriptVersionsFromPath(source: TypeScriptVersionSource, relativePath: string): TypeScriptVersion[] {\n\t\tif (!vscode.workspace.workspaceFolders) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst versions: TypeScriptVersion[] = [];\n\t\tfor (const root of vscode.workspace.workspaceFolders) {\n\t\t\tlet label: string = relativePath;\n\t\t\tif (vscode.workspace.workspaceFolders.length > 1) {\n\t\t\t\tlabel = path.join(root.name, relativePath);\n\t\t\t}\n\n\t\t\tconst serverPath = path.join(root.uri.fsPath, relativePath, 'tsserver.js');\n\t\t\tversions.push(new TypeScriptVersion(source, serverPath, DiskTypeScriptVersionProvider.getApiVersion(serverPath), label));\n\t\t}\n\t\treturn versions;\n\t}\n\n\tprivate static getApiVersion(serverPath: string): API | undefined {\n\t\tconst version = DiskTypeScriptVersionProvider.getTypeScriptVersion(serverPath);\n\t\tif (version) {\n\t\t\treturn version;\n\t\t}\n\n\t\t// Allow TS developers to provide custom version\n\t\tconst tsdkVersion = vscode.workspace.getConfiguration().get<string | undefined>('typescript.tsdk_version', undefined);\n\t\tif (tsdkVersion) {\n\t\t\treturn API.fromVersionString(tsdkVersion);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate static getTypeScriptVersion(serverPath: string): API | undefined {\n\t\tif (!fs.existsSync(serverPath)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst p = serverPath.split(path.sep);\n\t\tif (p.length <= 2) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst p2 = p.slice(0, -2);\n\t\tconst modulePath = p2.join(path.sep);\n\t\tlet fileName = path.join(modulePath, 'package.json');\n\t\tif (!fs.existsSync(fileName)) {\n\t\t\t// Special case for ts dev versions\n\t\t\tif (path.basename(modulePath) === 'built') {\n\t\t\t\tfileName = path.join(modulePath, '..', 'package.json');\n\t\t\t}\n\t\t}\n\t\tif (!fs.existsSync(fileName)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst contents = fs.readFileSync(fileName).toString();\n\t\tlet desc: any = null;\n\t\ttry {\n\t\t\tdesc = JSON.parse(contents);\n\t\t} catch (err) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!desc || !desc.version) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn desc.version ? API.fromVersionString(desc.version) : undefined;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { Disposable } from './dispose';\nimport { isJsConfigOrTsConfigFileName } from './languageDescription';\nimport { isSupportedLanguageMode } from './languageModeIds';\n\n/**\n * Tracks the active JS/TS editor.\n *\n * This tries to handle the case where the user focuses in the output view / debug console.\n * When this happens, we want to treat the last real focused editor as the active editor,\n * instead of using `vscode.window.activeTextEditor`\n */\nexport class ActiveJsTsEditorTracker extends Disposable {\n\n\tprivate _activeJsTsEditor: vscode.TextEditor | undefined;\n\n\tprivate readonly _onDidChangeActiveJsTsEditor = this._register(new vscode.EventEmitter<vscode.TextEditor | undefined>());\n\tpublic readonly onDidChangeActiveJsTsEditor = this._onDidChangeActiveJsTsEditor.event;\n\n\tpublic constructor() {\n\t\tsuper();\n\t\tvscode.window.onDidChangeActiveTextEditor(this.onDidChangeActiveTextEditor, this, this._disposables);\n\t\tvscode.window.onDidChangeVisibleTextEditors(() => {\n\t\t\t// Make sure the active editor is still in the visible set.\n\t\t\t// This can happen if the output view is focused and the last active TS file is closed\n\t\t\tif (this._activeJsTsEditor) {\n\t\t\t\tif (!vscode.window.visibleTextEditors.some(visibleEditor => visibleEditor === this._activeJsTsEditor)) {\n\t\t\t\t\tthis.onDidChangeActiveTextEditor(undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t}, this, this._disposables);\n\n\t\tthis.onDidChangeActiveTextEditor(vscode.window.activeTextEditor);\n\t}\n\n\tpublic get activeJsTsEditor(): vscode.TextEditor | undefined {\n\t\treturn this._activeJsTsEditor;\n\t}\n\n\tprivate onDidChangeActiveTextEditor(editor: vscode.TextEditor | undefined): any {\n\t\tif (editor === this._activeJsTsEditor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor && !editor.viewColumn) {\n\t\t\t// viewColumn is undefined for the debug/output panel, but we still want\n\t\t\t// to show the version info for the previous editor\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor && this.isManagedFile(editor)) {\n\t\t\tthis._activeJsTsEditor = editor;\n\t\t} else {\n\t\t\tthis._activeJsTsEditor = undefined;\n\t\t}\n\t\tthis._onDidChangeActiveJsTsEditor.fire(this._activeJsTsEditor);\n\t}\n\n\tprivate isManagedFile(editor: vscode.TextEditor): boolean {\n\t\treturn this.isManagedScriptFile(editor) || this.isManagedConfigFile(editor);\n\t}\n\n\tprivate isManagedScriptFile(editor: vscode.TextEditor): boolean {\n\t\treturn isSupportedLanguageMode(editor.document);\n\t}\n\n\tprivate isManagedConfigFile(editor: vscode.TextEditor): boolean {\n\t\treturn isJsConfigOrTsConfigFileName(editor.document.fileName);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { getTempFile } from './temp.electron';\n\nexport const onCaseInsenitiveFileSystem = (() => {\n\tlet value: boolean | undefined;\n\treturn (): boolean => {\n\t\tif (typeof value === 'undefined') {\n\t\t\tif (process.platform === 'win32') {\n\t\t\t\tvalue = true;\n\t\t\t} else if (process.platform !== 'darwin') {\n\t\t\t\tvalue = false;\n\t\t\t} else {\n\t\t\t\tconst temp = getTempFile('typescript-case-check');\n\t\t\t\tfs.writeFileSync(temp, '');\n\t\t\t\tvalue = fs.existsSync(temp.toUpperCase());\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t};\n})();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport * as arrays from './arrays';\nimport { Disposable } from './dispose';\n\nexport interface TypeScriptServerPlugin {\n\treadonly path: string;\n\treadonly name: string;\n\treadonly enableForWorkspaceTypeScriptVersions: boolean;\n\treadonly languages: ReadonlyArray<string>;\n\treadonly configNamespace?: string\n}\n\nnamespace TypeScriptServerPlugin {\n\texport function equals(a: TypeScriptServerPlugin, b: TypeScriptServerPlugin): boolean {\n\t\treturn a.path === b.path\n\t\t\t&& a.name === b.name\n\t\t\t&& a.enableForWorkspaceTypeScriptVersions === b.enableForWorkspaceTypeScriptVersions\n\t\t\t&& arrays.equals(a.languages, b.languages);\n\t}\n}\n\nexport class PluginManager extends Disposable {\n\tprivate readonly _pluginConfigurations = new Map<string, {}>();\n\n\tprivate _plugins: Map<string, ReadonlyArray<TypeScriptServerPlugin>> | undefined;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tvscode.extensions.onDidChange(() => {\n\t\t\tif (!this._plugins) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst newPlugins = this.readPlugins();\n\t\t\tif (!arrays.equals(arrays.flatten(Array.from(this._plugins.values())), arrays.flatten(Array.from(newPlugins.values())), TypeScriptServerPlugin.equals)) {\n\t\t\t\tthis._plugins = newPlugins;\n\t\t\t\tthis._onDidUpdatePlugins.fire(this);\n\t\t\t}\n\t\t}, undefined, this._disposables);\n\t}\n\n\tpublic get plugins(): ReadonlyArray<TypeScriptServerPlugin> {\n\t\tif (!this._plugins) {\n\t\t\tthis._plugins = this.readPlugins();\n\t\t}\n\t\treturn arrays.flatten(Array.from(this._plugins.values()));\n\t}\n\n\tprivate readonly _onDidUpdatePlugins = this._register(new vscode.EventEmitter<this>());\n\tpublic readonly onDidChangePlugins = this._onDidUpdatePlugins.event;\n\n\tprivate readonly _onDidUpdateConfig = this._register(new vscode.EventEmitter<{ pluginId: string, config: {} }>());\n\tpublic readonly onDidUpdateConfig = this._onDidUpdateConfig.event;\n\n\tpublic setConfiguration(pluginId: string, config: {}) {\n\t\tthis._pluginConfigurations.set(pluginId, config);\n\t\tthis._onDidUpdateConfig.fire({ pluginId, config });\n\t}\n\n\tpublic configurations(): IterableIterator<[string, {}]> {\n\t\treturn this._pluginConfigurations.entries();\n\t}\n\n\tprivate readPlugins() {\n\t\tconst pluginMap = new Map<string, ReadonlyArray<TypeScriptServerPlugin>>();\n\t\tfor (const extension of vscode.extensions.all) {\n\t\t\tconst pack = extension.packageJSON;\n\t\t\tif (pack.contributes && Array.isArray(pack.contributes.typescriptServerPlugins)) {\n\t\t\t\tconst plugins: TypeScriptServerPlugin[] = [];\n\t\t\t\tfor (const plugin of pack.contributes.typescriptServerPlugins) {\n\t\t\t\t\tplugins.push({\n\t\t\t\t\t\tname: plugin.name,\n\t\t\t\t\t\tenableForWorkspaceTypeScriptVersions: !!plugin.enableForWorkspaceTypeScriptVersions,\n\t\t\t\t\t\tpath: extension.extensionPath,\n\t\t\t\t\t\tlanguages: Array.isArray(plugin.languages) ? plugin.languages : [],\n\t\t\t\t\t\tconfigNamespace: plugin.configNamespace,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (plugins.length) {\n\t\t\t\t\tpluginMap.set(extension.id, plugins);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn pluginMap;\n\t}\n}\n",null,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as assert from 'assert';\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport { join } from 'path';\nimport * as vscode from 'vscode';\n\nfunction rndName() {\n\treturn Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 10);\n}\n\nexport function createRandomFile(contents = '', fileExtension = 'txt'): Thenable<vscode.Uri> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst tmpFile = join(os.tmpdir(), rndName() + '.' + fileExtension);\n\t\tfs.writeFile(tmpFile, contents, (error) => {\n\t\t\tif (error) {\n\t\t\t\treturn reject(error);\n\t\t\t}\n\n\t\t\tresolve(vscode.Uri.file(tmpFile));\n\t\t});\n\t});\n}\n\n\nexport function deleteFile(file: vscode.Uri): Thenable<boolean> {\n\treturn new Promise((resolve, reject) => {\n\t\tfs.unlink(file.fsPath, (err) => {\n\t\t\tif (err) {\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport const CURSOR = '$$CURSOR$$';\n\nexport function withRandomFileEditor(\n\tcontents: string,\n\tfileExtension: string,\n\trun: (editor: vscode.TextEditor, doc: vscode.TextDocument) => Thenable<void>\n): Thenable<boolean> {\n\tconst cursorIndex = contents.indexOf(CURSOR);\n\treturn createRandomFile(contents.replace(CURSOR, ''), fileExtension).then(file => {\n\t\treturn vscode.workspace.openTextDocument(file).then(doc => {\n\t\t\treturn vscode.window.showTextDocument(doc).then((editor) => {\n\t\t\t\tif (cursorIndex >= 0) {\n\t\t\t\t\tconst pos = doc.positionAt(cursorIndex);\n\t\t\t\t\teditor.selection = new vscode.Selection(pos, pos);\n\t\t\t\t}\n\t\t\t\treturn run(editor, doc).then(_ => {\n\t\t\t\t\tif (doc.isDirty) {\n\t\t\t\t\t\treturn doc.save().then(() => {\n\t\t\t\t\t\t\treturn deleteFile(file);\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn deleteFile(file);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t});\n}\n\nexport const wait = (ms: number) => new Promise<void>(resolve => setTimeout(() => resolve(), ms));\n\nexport const joinLines = (...args: string[]) => args.join(os.platform() === 'win32' ? '\\r\\n' : '\\n');\n\nexport async function createTestEditor(uri: vscode.Uri, ...lines: string[]) {\n\tconst document = await vscode.workspace.openTextDocument(uri);\n\tconst editor = await vscode.window.showTextDocument(document);\n\tawait editor.insertSnippet(new vscode.SnippetString(joinLines(...lines)), new vscode.Range(0, 0, 1000, 0));\n\treturn editor;\n}\n\nexport function assertEditorContents(editor: vscode.TextEditor, expectedDocContent: string, message?: string): void {\n\tconst cursorIndex = expectedDocContent.indexOf(CURSOR);\n\n\tassert.strictEqual(\n\t\teditor.document.getText(),\n\t\texpectedDocContent.replace(CURSOR, ''),\n\t\tmessage);\n\n\tif (cursorIndex >= 0) {\n\t\tconst expectedCursorPos = editor.document.positionAt(cursorIndex);\n\t\tassert.deepEqual(\n\t\t\t{ line: editor.selection.active.line, character: editor.selection.active.line },\n\t\t\t{ line: expectedCursorPos.line, character: expectedCursorPos.line },\n\t\t\t'Cursor position'\n\t\t);\n\t}\n}\n\nexport type VsCodeConfiguration = { [key: string]: any };\n\nexport async function updateConfig(documentUri: vscode.Uri, newConfig: VsCodeConfiguration): Promise<VsCodeConfiguration> {\n\tconst oldConfig: VsCodeConfiguration = {};\n\tconst config = vscode.workspace.getConfiguration(undefined, documentUri);\n\n\tfor (const configKey of Object.keys(newConfig)) {\n\t\toldConfig[configKey] = config.get(configKey);\n\t\tawait new Promise<void>((resolve, reject) =>\n\t\t\tconfig.update(configKey, newConfig[configKey], vscode.ConfigurationTarget.Global)\n\t\t\t\t.then(() => resolve(), reject));\n\t}\n\treturn oldConfig;\n}\n\nexport const Config = Object.freeze({\n\tautoClosingBrackets: 'editor.autoClosingBrackets',\n\ttypescriptCompleteFunctionCalls: 'typescript.suggest.completeFunctionCalls',\n\tinsertMode: 'editor.suggest.insertMode',\n\tsnippetSuggestions: 'editor.snippetSuggestions',\n\tsuggestSelection: 'editor.suggestSelection',\n\tjavascriptQuoteStyle: 'javascript.preferences.quoteStyle',\n\ttypescriptQuoteStyle: 'typescript.preferences.quoteStyle',\n} as const);\n\nexport const insertModesValues = Object.freeze(['insert', 'replace']);\n\nexport async function enumerateConfig(\n\tdocumentUri: vscode.Uri,\n\tconfigKey: string,\n\tvalues: readonly string[],\n\tf: (message: string) => Promise<void>\n): Promise<void> {\n\tfor (const value of values) {\n\t\tconst newConfig = { [configKey]: value };\n\t\tawait updateConfig(documentUri, newConfig);\n\t\tawait f(JSON.stringify(newConfig));\n\t}\n}\n\n\nexport function onChangedDocument(documentUri: vscode.Uri, disposables: vscode.Disposable[]) {\n\treturn new Promise<vscode.TextDocument>(resolve => vscode.workspace.onDidChangeTextDocument(e => {\n\t\tif (e.document.uri.toString() === documentUri.toString()) {\n\t\t\tresolve(e.document);\n\t\t}\n\t}, undefined, disposables));\n}\n\nexport async function retryUntilDocumentChanges(\n\tdocumentUri: vscode.Uri,\n\toptions: { retries: number, timeout: number },\n\tdisposables: vscode.Disposable[],\n\texec: () => Thenable<unknown>,\n) {\n\tconst didChangeDocument = onChangedDocument(documentUri, disposables);\n\n\tlet done = false;\n\n\tconst result = await Promise.race([\n\t\tdidChangeDocument,\n\t\t(async () => {\n\t\t\tfor (let i = 0; i < options.retries; ++i) {\n\t\t\t\tawait wait(options.timeout);\n\t\t\t\tif (done) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tawait exec();\n\t\t\t}\n\t\t})(),\n\t]);\n\tdone = true;\n\treturn result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport const exists = async (resource: vscode.Uri): Promise<boolean> => {\n\ttry {\n\t\tconst stat = await vscode.workspace.fs.stat(resource);\n\t\t// stat.type is an enum flag\n\t\treturn !!(stat.type & vscode.FileType.File);\n\t} catch {\n\t\treturn false;\n\t}\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\nexport interface TSConfig {\n\treadonly uri: vscode.Uri;\n\treadonly fsPath: string;\n\treadonly posixPath: string;\n\treadonly workspaceFolder?: vscode.WorkspaceFolder;\n}\n\nexport class TsConfigProvider {\n\tpublic async getConfigsForWorkspace(token: vscode.CancellationToken): Promise<Iterable<TSConfig>> {\n\t\tif (!vscode.workspace.workspaceFolders) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst configs = new Map<string, TSConfig>();\n\t\tfor (const config of await this.findConfigFiles(token)) {\n\t\t\tconst root = vscode.workspace.getWorkspaceFolder(config);\n\t\t\tif (root) {\n\t\t\t\tconfigs.set(config.fsPath, {\n\t\t\t\t\turi: config,\n\t\t\t\t\tfsPath: config.fsPath,\n\t\t\t\t\tposixPath: config.path,\n\t\t\t\t\tworkspaceFolder: root\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn configs.values();\n\t}\n\n\tprivate async findConfigFiles(token: vscode.CancellationToken): Promise<vscode.Uri[]> {\n\t\treturn await vscode.workspace.findFiles('**/tsconfig*.json', '**/{node_modules,.*}/**', undefined, token);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as jsonc from 'jsonc-parser';\nimport { basename, dirname, join } from 'path';\nimport * as vscode from 'vscode';\nimport { coalesce, flatten } from '../utils/arrays';\n\nfunction mapChildren<R>(node: jsonc.Node | undefined, f: (x: jsonc.Node) => R): R[] {\n\treturn node && node.type === 'array' && node.children\n\t\t? node.children.map(f)\n\t\t: [];\n}\n\nclass TsconfigLinkProvider implements vscode.DocumentLinkProvider {\n\n\tpublic provideDocumentLinks(\n\t\tdocument: vscode.TextDocument,\n\t\t_token: vscode.CancellationToken\n\t): vscode.ProviderResult<vscode.DocumentLink[]> {\n\t\tconst root = jsonc.parseTree(document.getText());\n\t\tif (!root) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn coalesce([\n\t\t\tthis.getExtendsLink(document, root),\n\t\t\t...this.getFilesLinks(document, root),\n\t\t\t...this.getReferencesLinks(document, root)\n\t\t]);\n\t}\n\n\tprivate getExtendsLink(document: vscode.TextDocument, root: jsonc.Node): vscode.DocumentLink | undefined {\n\t\tconst extendsNode = jsonc.findNodeAtLocation(root, ['extends']);\n\t\tif (!this.isPathValue(extendsNode)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (extendsNode.value.startsWith('.')) {\n\t\t\treturn new vscode.DocumentLink(\n\t\t\t\tthis.getRange(document, extendsNode),\n\t\t\t\tvscode.Uri.file(join(dirname(document.uri.fsPath), extendsNode.value + (extendsNode.value.endsWith('.json') ? '' : '.json')))\n\t\t\t);\n\t\t}\n\n\t\tconst workspaceFolderPath = vscode.workspace.getWorkspaceFolder(document.uri)!.uri.fsPath;\n\t\treturn new vscode.DocumentLink(\n\t\t\tthis.getRange(document, extendsNode),\n\t\t\tvscode.Uri.file(join(workspaceFolderPath, 'node_modules', extendsNode.value + (extendsNode.value.endsWith('.json') ? '' : '.json')))\n\t\t);\n\t}\n\n\tprivate getFilesLinks(document: vscode.TextDocument, root: jsonc.Node) {\n\t\treturn mapChildren(\n\t\t\tjsonc.findNodeAtLocation(root, ['files']),\n\t\t\tchild => this.pathNodeToLink(document, child));\n\t}\n\n\tprivate getReferencesLinks(document: vscode.TextDocument, root: jsonc.Node) {\n\t\treturn mapChildren(\n\t\t\tjsonc.findNodeAtLocation(root, ['references']),\n\t\t\tchild => {\n\t\t\t\tconst pathNode = jsonc.findNodeAtLocation(child, ['path']);\n\t\t\t\tif (!this.isPathValue(pathNode)) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\treturn new vscode.DocumentLink(this.getRange(document, pathNode),\n\t\t\t\t\tbasename(pathNode.value).endsWith('.json')\n\t\t\t\t\t\t? this.getFileTarget(document, pathNode)\n\t\t\t\t\t\t: this.getFolderTarget(document, pathNode));\n\t\t\t});\n\t}\n\n\tprivate pathNodeToLink(\n\t\tdocument: vscode.TextDocument,\n\t\tnode: jsonc.Node | undefined\n\t): vscode.DocumentLink | undefined {\n\t\treturn this.isPathValue(node)\n\t\t\t? new vscode.DocumentLink(this.getRange(document, node), this.getFileTarget(document, node))\n\t\t\t: undefined;\n\t}\n\n\tprivate isPathValue(extendsNode: jsonc.Node | undefined): extendsNode is jsonc.Node {\n\t\treturn extendsNode\n\t\t\t&& extendsNode.type === 'string'\n\t\t\t&& extendsNode.value\n\t\t\t&& !(extendsNode.value as string).includes('*'); // don't treat globs as links.\n\t}\n\n\tprivate getFileTarget(document: vscode.TextDocument, node: jsonc.Node): vscode.Uri {\n\t\treturn vscode.Uri.file(join(dirname(document.uri.fsPath), node!.value));\n\t}\n\n\tprivate getFolderTarget(document: vscode.TextDocument, node: jsonc.Node): vscode.Uri {\n\t\treturn vscode.Uri.file(join(dirname(document.uri.fsPath), node!.value, 'tsconfig.json'));\n\t}\n\n\tprivate getRange(document: vscode.TextDocument, node: jsonc.Node) {\n\t\tconst offset = node!.offset;\n\t\tconst start = document.positionAt(offset + 1);\n\t\tconst end = document.positionAt(offset + (node!.length - 1));\n\t\treturn new vscode.Range(start, end);\n\t}\n}\n\nexport function register() {\n\tconst patterns: vscode.GlobPattern[] = [\n\t\t'**/[jt]sconfig.json',\n\t\t'**/[jt]sconfig.*.json',\n\t];\n\n\tconst languages = ['json', 'jsonc'];\n\n\tconst selector: vscode.DocumentSelector = flatten(\n\t\tlanguages.map(language =>\n\t\t\tpatterns.map((pattern): vscode.DocumentFilter => ({ language, pattern }))));\n\n\treturn vscode.languages.registerDocumentLinkProvider(selector, new TsconfigLinkProvider());\n}\n"],"sourceRoot":""}