!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=void 0;const a=n(0),o=n(3),r=n(4),i=n(5).loadMessageBundle(n(1).join(__dirname,"extension.ts")),s={disabled:i(0,null),always:i(1,null),smart:i(2,null),onlyWithFlag:i(3,null)},l={disabled:i(4,null),always:i(5,null),smart:i(6,null),onlyWithFlag:i(7,null)},u={disabled:i(8,null),always:i(9,null),smart:i(10,null),onlyWithFlag:i(11,null)},c=i(12,null),d=i(13,null),f=i(14,null),g=i(15,null),p=i(16,null),b="autoAttachFilter",m=new Set(["autoAttachSmartPattern",b].map(e=>"debug.javascript."+e));let v,h,y,w=!1;async function S(e,t){const n=r.workspace.getConfiguration("debug.javascript");var a;const o=(t=t||((a=n.inspect(b))?a.workspaceFolderValue?r.ConfigurationTarget.WorkspaceFolder:a.workspaceValue?r.ConfigurationTarget.Workspace:(a.globalValue,r.ConfigurationTarget.Global):r.ConfigurationTarget.Global))===r.ConfigurationTarget.Global,i=r.window.createQuickPick(),s=j(),p=["always","smart","onlyWithFlag","disabled"].map(e=>({state:e,label:l[e],description:u[e],alwaysShow:!0}));"disabled"!==s&&p.unshift({setTempDisabled:!w,label:w?g:f,alwaysShow:!0}),i.items=p,i.activeItems=w?[p[0]]:i.items.filter(e=>"state"in e&&e.state===s),i.title=o?d:c,i.buttons=[{iconPath:new r.ThemeIcon(o?"folder":"globe"),tooltip:o?c:d}],i.show();let m=await new Promise(e=>{i.onDidAccept(()=>e(i.selectedItems[0])),i.onDidHide(()=>e(void 0)),i.onDidTriggerButton(()=>{e({scope:o?r.ConfigurationTarget.Workspace:r.ConfigurationTarget.Global})})});if(i.dispose(),m){if("scope"in m)return await S(e,m.scope);"state"in m&&(m.state!==s?n.update(b,m.state,t):w&&(m={setTempDisabled:!1})),"setTempDisabled"in m&&(P(e,s,!0),w=m.setTempDisabled,m.setTempDisabled?await C():await x(e),P(e,s,!1))}}function j(){var e;return null!==(e=r.workspace.getConfiguration("debug.javascript").get(b))&&void 0!==e?e:"disabled"}async function x(e){const t=await async function(e){var t,n;const a=e.workspaceState.get("jsDebugIpcState"),o=(null===(t=r.extensions.getExtension("ms-vscode.js-debug-nightly"))||void 0===t?void 0:t.extensionPath)||(null===(n=r.extensions.getExtension("ms-vscode.js-debug"))||void 0===n?void 0:n.extensionPath),i=function(){let e={};const t=r.workspace.getConfiguration("debug.javascript");for(const n of m)e[n]=t.get(n);return JSON.stringify(e)}();if((null==a?void 0:a.jsDebugPath)===o&&(null==a?void 0:a.settingsValue)===i)return a.ipcAddress;const s=await r.commands.executeCommand("extension.js-debug.setAutoAttachVariables",null==a?void 0:a.ipcAddress);if(!s)return;const l=s.ipcAddress;return await e.workspaceState.update("jsDebugIpcState",{ipcAddress:l,jsDebugPath:o,settingsValue:i}),l}(e);if(t)return y=k(t).catch(e=>{console.error(e)}),await y}t.activate=function(e){v=Promise.resolve({context:e,state:null}),e.subscriptions.push(r.commands.registerCommand("extension.node-debug.toggleAutoAttach",S.bind(null,e))),e.subscriptions.push(r.workspace.onDidChangeConfiguration(e=>{(e.affectsConfiguration("debug.javascript."+b)||[...m].some(t=>e.affectsConfiguration(t)))&&(_("disabled"),_(j()))})),_(j())},t.deactivate=async function(){await C()};const k=async e=>{try{return await F(e)}catch(t){return await a.promises.unlink(e).catch(()=>{}),await F(e)}},F=e=>new Promise((t,n)=>{const a=(0,o.createServer)(e=>{let t=[];e.on("data",async n=>{if(0===n[n.length-1]){t.push(n.slice(0,-1));try{await r.commands.executeCommand("extension.js-debug.autoAttachToProcess",JSON.parse(Buffer.concat(t).toString())),e.write(Buffer.from([0]))}catch(t){e.write(Buffer.from([1])),console.error(t)}}else t.push(n)})}).on("error",n).listen(e,()=>t(a))});async function C(){const e=await y;e&&await new Promise(t=>e.close(t))}const O={async disabled(e){await async function(e){await e.workspaceState.update("jsDebugIpcState",void 0),await r.commands.executeCommand("extension.js-debug.clearAutoAttachVariables"),await C()}(e)},async onlyWithFlag(e){await x(e)},async smart(e){await x(e)},async always(e){await x(e)}};function P(e,t,n=!1){if("disabled"===t&&!n)return void(null==h||h.hide());h||(h=r.window.createStatusBarItem(r.StatusBarAlignment.Left),h.command="extension.node-debug.toggleAutoAttach",h.tooltip=i(17,null),e.subscriptions.push(h));let a=n?"$(loading) ":"";a+=w?p:s[t],h.text=a,h.show()}function _(e){v=v.then(async({context:t,state:n})=>e===n?{context:t,state:n}:(null!==n&&P(t,n,!0),await O[e](t),w=!1,P(t,e,!1),{context:t,state:e}))}},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("vscode")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o,r,i,s,l=n(1),u=n(0),c=Object.prototype.toString;function d(e){return void 0!==e}function f(e){return"[object Number]"===c.call(e)}function g(e){return"[object String]"===c.call(e)}function p(e){return JSON.parse(u.readFileSync(e,"utf8"))}function b(e,t){return s&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,n){var a=n[0],o=t[a],r=e;return"string"==typeof o?r=o:"number"!=typeof o&&"boolean"!=typeof o&&null!=o||(r=String(o)),r}))}function m(e){return function(t,n){for(var a=[],o=2;o<arguments.length;o++)a[o-2]=arguments[o];return f(t)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):b(e[t],a):g(n)?(console.warn("Message "+n+" didn't get externalized correctly."),b(n,a)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function v(e,t){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return b(t,n)}function h(e,t){return r[e]=t,t}function y(e,t){var n,a,o,r=l.join(i.cacheRoot,e.id+"-"+e.hash+".json"),s=!1,c=!1;try{return n=JSON.parse(u.readFileSync(r,{encoding:"utf8",flag:"r"})),a=r,o=new Date,u.utimes(a,o,o,(function(){})),n}catch(e){if("ENOENT"===e.code)c=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),u.unlink(r,(function(e){e&&console.error("Deleting corrupted bundle "+r+" failed.")})),s=!0}}if(!(n=function(e,t){var n=i.translationsConfig[e.id];if(n){var a=p(n).contents,o=p(l.join(t,"nls.metadata.json")),r=Object.create(null);for(var s in o){var u=o[s],c=a[e.outDir+"/"+s];if(c){for(var d=[],f=0;f<u.keys.length;f++){var b=u.keys[f],m=c[g(b)?b:b.key];void 0===m&&(m=u.messages[f]),d.push(m)}r[s]=d}else r[s]=u.messages}return r}}(e,t))||s)return n;if(c)try{u.writeFileSync(r,JSON.stringify(n),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return n;throw e}return n}function w(e){try{return function(e){var t=p(l.join(e,"nls.metadata.json")),n=Object.create(null);for(var a in t){var o=t[a];n[a]=o.messages}return n}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function S(e,t){var n;if(!0===i.languagePackSupport&&void 0!==i.cacheRoot&&void 0!==i.languagePackId&&void 0!==i.translationsConfigFile&&void 0!==i.translationsConfig)try{n=y(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!n){if(i.languagePackSupport)return w(t);var a=function(e){for(var t=i.locale;t;){var n=l.join(e,"nls.bundle."+t+".json");if(u.existsSync(n))return n;var a=t.lastIndexOf("-");t=a>0?t.substring(0,a):void 0}if(void 0===t){n=l.join(e,"nls.bundle.json");if(u.existsSync(n))return n}}(t);if(a)try{return p(a)}catch(e){console.log("Loading in the box message bundle failed.",e)}n=w(t)}return n}function j(e){if(!e)return v;var t=l.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),i.messageFormat===a.both||i.messageFormat===a.bundle){var n=function(e){for(var t,n=l.dirname(e);t=l.join(n,"nls.metadata.header.json"),!u.existsSync(t);){var a=l.dirname(n);if(a===n){t=void 0;break}n=a}return t}(e);if(n){var o=l.dirname(n),c=r[o];if(void 0===c)try{var f=JSON.parse(u.readFileSync(n,"utf8"));try{var g=S(f,o);c=h(o,g?{header:f,nlsBundle:g}:null)}catch(e){console.error("Failed to load nls bundle",e),c=h(o,null)}}catch(e){console.error("Failed to read header file",e),c=h(o,null)}if(c){var b=e.substr(o.length+1).replace(/\\/g,"/"),y=c.nlsBundle[b];return void 0===y?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):m(y)}}}if(i.messageFormat===a.both||i.messageFormat===a.file)try{var w=p(function(e){var t;if(i.cacheLanguageResolution&&t)t=t;else{if(s||!i.locale)t=".nls.json";else for(var n=i.locale;n;){var a=".nls."+n+".json";if(u.existsSync(e+a)){t=a;break}var o=n.lastIndexOf("-");o>0?n=n.substring(0,o):(t=".nls.json",n=null)}i.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(w)?m(w):d(w.messages)&&d(w.keys)?m(w.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(a=t.MessageFormat||(t.MessageFormat={})),function(e){e.is=function(e){var t=e;return t&&d(t.key)&&d(t.comment)}}(o||(o={})),function(){if(i={locale:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:a.bundle},g(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG);if(g(e.locale)&&(i.locale=e.locale.toLowerCase()),(!0===(t=e._languagePackSupport)||!1===t)&&(i.languagePackSupport=e._languagePackSupport),g(e._cacheRoot)&&(i.cacheRoot=e._cacheRoot),g(e._languagePackId)&&(i.languagePackId=e._languagePackId),g(e._translationsConfigFile)){i.translationsConfigFile=e._translationsConfigFile;try{i.translationsConfig=p(i.translationsConfigFile)}catch(t){e._corruptedFile&&u.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}}}catch(e){}var t;s="pseudo"===i.locale,void 0,r=Object.create(null)}(),t.loadMessageBundle=j,t.config=function(e){return e&&(g(e.locale)&&(i.locale=e.locale.toLowerCase(),void 0,r=Object.create(null)),void 0!==e.messageFormat&&(i.messageFormat=e.messageFormat)),s="pseudo"===i.locale,j}}]));
//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/undefined/extensions/debug-auto-launch/dist/extension.js.map