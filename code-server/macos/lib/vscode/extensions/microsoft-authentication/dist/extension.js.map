{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/diagnostic-channel/dist/src/channel.js","webpack:///./node_modules/applicationinsights/out/Library/Logging.js","webpack:///external \"stream\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/index.js","webpack:///./node_modules/applicationinsights/out/Library/Util.js","webpack:///external \"url\"","webpack:///external \"zlib\"","webpack:///external \"path\"","webpack:///external \"crypto\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Domain.js","webpack:///external \"http\"","webpack:///external \"fs\"","webpack:///./node_modules/applicationinsights/out/Library/CorrelationIdManager.js","webpack:///external \"https\"","webpack:///external \"vscode\"","webpack:///external \"os\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/CorrelationContextManager.js","webpack:///./node_modules/applicationinsights/out/Declarations/Constants.js","webpack:///./node_modules/applicationinsights/out/Library/RequestResponseHeaders.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencies.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/initialization.js","webpack:///./node_modules/semver/semver.js","webpack:///external \"util\"","webpack:///external \"assert\"","webpack:///./node_modules/emitter-listener/listener.js","webpack:///./node_modules/shimmer/index.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Performance.js","webpack:///./node_modules/applicationinsights/out/Library/Config.js","webpack:///./node_modules/applicationinsights/out/Library/Context.js","webpack:///./src/logger.ts","webpack:///./node_modules/vscode-nls/lib/main.js","webpack:///./node_modules/diagnostic-channel/dist/src/patchRequire.js","webpack:///external \"module\"","webpack:///external \"timers\"","webpack:///./node_modules/stack-chain/index.js","webpack:///external \"child_process\"","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Base.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPointType.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/EventData.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/RequestParser.js","webpack:///./node_modules/applicationinsights/out/Library/Traceparent.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequests.js","webpack:///./src/extension.ts","webpack:///./src/AADHelper.ts","webpack:///./node_modules/randombytes/index.js","webpack:///external \"querystring\"","webpack:///external \"buffer\"","webpack:///./src/authServer.ts","webpack:///./src/keychain.ts","webpack:///external \"keytar\"","webpack:///./src/utils.ts","webpack:///./node_modules/node-fetch/lib/index.mjs","webpack:///./src/env/node/sha256.ts","webpack:///./node_modules/vscode-extension-telemetry/lib/telemetryReporter.js","webpack:///./node_modules/applicationinsights/out/applicationinsights.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/index.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/azure-coretracing.pub.js","webpack:///external \"@opentelemetry/tracing\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/bunyan.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/console.pub.js","webpack:///external \"console\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb-core.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mongodb.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/mysql.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Connection$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src sync ^.*\\/lib\\/Pool$","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg-pool.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/pg.pub.js","webpack:///external \"events\"","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/redis.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/tedious.pub.js","webpack:///./node_modules/diagnostic-channel-publishers/dist/src/winston.pub.js","webpack:///./node_modules/cls-hooked/index.js","webpack:///./node_modules/cls-hooked/context.js","webpack:///external \"async_hooks\"","webpack:///./node_modules/cls-hooked/context-legacy.js","webpack:///./node_modules/async-hook-jl/index.js","webpack:///./node_modules/async-hook-jl/async-hook.js","webpack:///./node_modules/async-hook-jl/patches/next-tick.js","webpack:///./node_modules/async-hook-jl/patches/promise.js","webpack:///./node_modules/async-hook-jl/patches/timers.js","webpack:///./node_modules/stack-chain/stack-chain.js","webpack:///./node_modules/stack-chain/format.js","webpack:///./node_modules/continuation-local-storage/context.js","webpack:///./node_modules/async-listener/index.js","webpack:///./node_modules/async-listener/glue.js","webpack:///external \"net\"","webpack:///external \"dns\"","webpack:///./node_modules/async-listener/es6-wrapped-promise.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Console.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/console.sub.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Constants.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/AvailabilityData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ContextTagKeys.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Data.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/DataPoint.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/Envelope.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/ExceptionDetails.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MessageData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/MetricData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/PageViewData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RemoteDependencyData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/RequestData.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/SeverityLevel.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/Generated/StackFrame.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/index.js","webpack:///./node_modules/applicationinsights/out/Declarations/Contracts/TelemetryTypes/TelemetryType.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/bunyan.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/winston.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/Exceptions.js","webpack:///external \"constants\"","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpDependencyParser.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mongodb.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/mysql.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/redis.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/diagnostic-channel/postgres.sub.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/HttpRequestParser.js","webpack:///./node_modules/applicationinsights/out/Library/Tracestate.js","webpack:///./node_modules/applicationinsights/out/Library/QuickPulseStateManager.js","webpack:///./node_modules/applicationinsights/out/Library/ConnectionStringParser.js","webpack:///./node_modules/applicationinsights/out/Library/QuickPulseEnvelopeFactory.js","webpack:///./node_modules/applicationinsights/out/Library/QuickPulseSender.js","webpack:///./node_modules/applicationinsights/out/AutoCollection/NativePerformance.js","webpack:///external \"applicationinsights-native-metrics\"","webpack:///./node_modules/applicationinsights/out/Library/NodeClient.js","webpack:///./node_modules/applicationinsights/out/Library/TelemetryClient.js","webpack:///./node_modules/applicationinsights/out/Library/Channel.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/index.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/SamplingTelemetryProcessor.js","webpack:///./node_modules/applicationinsights/out/TelemetryProcessors/PerformanceMetricsTelemetryProcessor.js","webpack:///./node_modules/applicationinsights/out/Library/Sender.js","webpack:///./node_modules/applicationinsights/out/Library/EnvelopeFactory.js","webpack:///./node_modules/uuid/dist/esm-node/rng.js","webpack:///./node_modules/uuid/dist/esm-node/bytesToUuid.js","webpack:///./node_modules/uuid/dist/esm-node/v1.js","webpack:///./node_modules/uuid/dist/esm-node/v35.js","webpack:///./node_modules/uuid/dist/esm-node/v3.js","webpack:///./node_modules/uuid/dist/esm-node/md5.js","webpack:///./node_modules/uuid/dist/esm-node/v4.js","webpack:///./node_modules/uuid/dist/esm-node/v5.js","webpack:///./node_modules/uuid/dist/esm-node/sha1.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","patchRequire_1","patchRequire_2","makePatchingRequire","trueFilter","publishing","ContextPreservingEventEmitter","this","version","subscribers","contextPreservationFunction","cb","knownPatches","currentlyPublishing","shouldPublish","listeners","some","_a","filter","publish","event","standardEvent_1","timestamp","Date","now","data","forEach","listener","e","subscribe","push","unsubscribe","index","length","splice","reset","_this","getOwnPropertyNames","prop","bindToContext","addContextPreservation","preserver","previousPreservationStack","registerMonkeyPatch","packageName","patcher","getPatchesObject","global","diagnosticsSource","require","channel","Logging","info","message","optionalParams","_i","arguments","enableDebug","console","TAG","warn","disableWarnings","disableErrors","__export","__assign","assign","http","https","url","constants","RequestResponseHeaders","Util","getCookie","cookie","cookieName","cookies","split","trim","indexOf","substring","str","replace","int32ArrayToBase64","array","toChar","v","String","fromCharCode","x","map","join","Buffer","from","toString","substr","random32","Math","random","randomu32","w3cTraceId","tmp","hexValues","oct","a","clockSequenceHi","isValidW3CId","id","isArray","obj","isError","Error","isPrimitive","input","propType","isDate","msToTimeSpan","totalms","isNaN","sec","toFixed","min","floor","hour","days","extractError","err","looseError","code","extractObject","origProperty","toJSON","validateStringMap","field","stringTarget","JSON","stringify","constructor","MAX_PROPERTY_LENGTH","canIncludeCorrelationHeader","client","requestUrl","excludedDomains","config","correlationHeaderExcludedDomains","RegExp","test","parse","hostname","getCorrelationContextTarget","response","contextHeaders","headers","requestContextHeader","keyValues","keyValue","makeRequest","requestOptions","requestCallback","requestUrlParsed","options","host","port","path","pathname","proxyUrl","undefined","protocol","proxyHttpsUrl","proxyHttpUrl","proxyUrlParsed","Host","isHttps","httpsAgent","agent","httpAgent","tlsRestrictedAgent","request","safeIncludeCorrelationHeader","correlationHeader","header","Array","addCorrelationIdHeaderFromString","setHeader","requestContextSourceKey","correlationId","components","Agent","secureOptions","SSL_OP_NO_SSLv2","SSL_OP_NO_SSLv3","SSL_OP_NO_TLSv1","SSL_OP_NO_TLSv1_1","Domain","CorrelationIdManager","queryCorrelationId","callback","appIdUrlString","profileQueryEndpoint","instrumentationKey","completedLookups","pendingLookups","fetchAppId","method","disableAppInsightsAutoCollection","req","res","statusCode","appId_1","setEncoding","on","result","correlationIdPrefix","setTimeout","correlationIdRetryIntervalMs","error","end","cancelCorrelationIdQuery","generateRequestId","parentId","suffix","currentRootId","appendSuffix","generateRootId","getRootId","endIndex","startIndex","delimiter","requestIdMaxLength","trimPosition","w3cEnabled","DiagChannel","CorrelationContextManager","getCurrentContext","enabled","context","session","CONTEXT_NAME","generateContextObject","operationId","operationName","correlationContextHeader","traceparent","tracestate","operation","customProperties","CustomPropertiesImpl","runWithContext","fn","wrapEmitter","emitter","bindEmitter","wrapCallback","enable","forceClsHooked","isNodeVersionCompatible","hasEverEnabled","cls","shouldUseClsHooked","createNamespace","registerContextPreservation","disable","nodeVer","process","versions","node","parseInt","canUseClsHooked","greater800","less820","greater470","props","addHeaderData","keyvals","keyval","parts","concat","serializeToHeader","getProperty","setProperty","val","bannedCharacters","QuickPulseCounter","PerformanceCounter","DEFAULT_BREEZE_ENDPOINT","DEFAULT_LIVEMETRICS_ENDPOINT","DEFAULT_LIVEMETRICS_HOST","PerformanceToQuickPulseCounter","PROCESSOR_TIME","REQUEST_RATE","REQUEST_DURATION","COMMITTED_BYTES","REQUEST_FAILURE_RATE","DEPENDENCY_RATE","DEPENDENCY_FAILURE_RATE","DEPENDENCY_DURATION","EXCEPTION_RATE","QuickPulseDocumentType","Event","Exception","Trace","Metric","Request","Dependency","Availability","QuickPulseType","TelemetryTypeStringToQuickPulseType","EventData","ExceptionData","MessageData","MetricData","RequestData","RemoteDependencyData","AvailabilityData","TelemetryTypeStringToQuickPulseDocumentType","requestContextTargetKey","requestIdHeader","parentIdHeader","rootIdHeader","traceparentHeader","traceStateHeader","HttpDependencyParser","CorrelationContextManager_1","Traceparent","AutoCollectHttpDependencies","INSTANCE","_client","isEnabled","_isEnabled","_isInitialized","_initialize","IsInitialized","isInitialized","originalRequest","originalHttpsRequest","clientRequestPatch","shouldCollect","disableCollectionRequestOption","alreadyAutoCollectedFlag","trackRequest","requestArgs","apply","telemetry","uniqueRequestId","uniqueTraceparent","requestParser","currentContext","isValidTraceId","traceId","updateSpanId","getBackCompatRequestId","requestNumber","getUrl","getHeader","onResponse","dependencyTelemetry","getDependencyTelemetry","contextObjects","trackDependency","onError","dispose","env","publishers","unpatchedModules","bunyan","mongodb","mongodbCore","mysql","redis","pg","pgPool","winston","mod","debug","SemVer","NODE_DEBUG","args","slice","unshift","log","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","Number","re","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","er","TypeError","match","raw","major","minor","patch","prerelease","num","build","format","valid","clean","compare","other","compareMain","comparePre","compareIdentifiers","b","inc","release","identifier","diff","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","sort","list","rsort","Range","range","set","parseRange","isX","toLowerCase","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","satisfies","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","_","M","pr","ret","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","every","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","max","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","coerce","shimmer","wrap","unwrap","SYMBOL","propertyIsEnumerable","configurable","writable","_listeners","self","_events","_findAndProcess","before","unprocessed","_process","_wrap","unwrapped","visit","wrapped","onAddListener","onEmit","addListener","removeListener","emit","adding","existing","returned","__wrapped","remover","isFunction","funktion","logger","nodule","wrapper","stack","original","__unwrap","massWrap","nodules","names","massUnwrap","os","Constants","AutoCollectPerformance","collectionInterval","enableLiveMetricsCounters","_lastIntervalRequestExecutionTime","_lastIntervalDependencyExecutionTime","_collectionInterval","_enableLiveMetricsCounters","_handle","_lastCpus","cpus","_lastRequests","totalRequestCount","_totalRequestCount","totalFailedRequestCount","_totalFailedRequestCount","time","_lastDependencies","totalDependencyCount","_totalDependencyCount","totalFailedDependencyCount","_totalFailedDependencyCount","_lastExceptions","totalExceptionCount","_totalExceptionCount","cpuUsage","_lastAppCpuUsage","_lastHrtime","hrtime","setInterval","trackPerformance","unref","clearInterval","countRequest","duration","success","durationMs","_intervalRequestExecutionTime","countException","countDependency","_intervalDependencyExecutionTime","_trackCpu","_trackMemory","_trackNetwork","_trackDependencyRate","_trackExceptionRate","totalUser","totalSys","totalNice","totalIdle","totalIrq","cpu","lastCpu","times","model","speed","lastTimes","user","sys","nice","idle","irq","appCpuPercent","appCpuUsage","totalApp","system","combinedTotal","trackMetric","PROCESS_TIME","freeMem","freemem","usedMem","memoryUsage","rss","committedMemory","totalmem","PRIVATE_BYTES","AVAILABLE_BYTES","lastRequests","requests","intervalRequests","intervalFailedRequests","elapsedMs","elapsedSeconds","averageRequestExecutionTime","requestsPerSec","failedRequestsPerSec","lastDependencies","dependencies","intervalDependencies","intervalFailedDependencies","averageDependencyExecutionTime","dependenciesPerSec","failedDependenciesPerSec","lastExceptions","exceptions","intervalExceptions","exceptionsPerSec","_lastRequestExecutionTime","_lastDependencyExecutionTime","ConnectionStringParser","Config","setupString","endpointBase","connectionStringEnv","ENV_connectionString","csCode","csEnv","iKeyCode","instrumentationkey","keys","_getInstrumentationKey","endpointUrl","ingestionendpoint","maxBatchSize","maxBatchIntervalMs","disableAppInsights","samplingPercentage","setCorrelationId","ENV_http_proxy","ENV_https_proxy","ENV_profileQueryEndpoint","_quickPulseHost","liveendpoint","ENV_quickPulseHost","_profileQueryEndpoint","endpoint","iKey","ENV_iKey","ENV_azurePrefix","legacy_ENV_iKey","ENV_nativeMetricsDisablers","ENV_nativeMetricsDisableAll","fs","Contracts","Context","packageJsonPath","ContextTagKeys","tags","_loadApplicationContext","_loadDeviceContext","_loadInternalContext","resolve","__dirname","appVersion","packageJson","readFileSync","exception","applicationVersion","deviceId","cloudRoleInstance","deviceOSVersion","type","cloudRole","DefaultRoleName","arch","platform","sdkVersion","internalSdkVersion","padLeft","pad","repeat","Logger","output","vscode","window","createOutputChannel","logLevel","level","appendLine","data2String","getUTCHours","getMinutes","getUTCSeconds","getMilliseconds","MessageFormat","BundleFormat","LocalizeInfo","resolvedBundles","isPseudo","isDefined","isNumber","isString","readJsonFileSync","filename","rest","arg","replacement","createScopedLocalizeFunction","messages","localize","cacheBundle","bundle","loadNlsBundleOrCreateFromI18n","bundlePath","file","cacheRoot","hash","useMemoryOnly","writeBundle","encoding","flag","utimes","SyntaxError","unlink","metaDataPath","languagePackLocation","translationsConfig","languagePack","contents","metaData","module_2","entry","translations","outDir","resultMessages","messageKey","translatedMessage","createNLSBundle","writeFileSync","loadDefaultNlsBundle","folder","module_1","createDefaultNlsBundle","loadNlsBundle","languagePackSupport","languagePackId","translationsConfigFile","candidate","root","language","existsSync","lastIndexOf","findInTheBoxBundle","loadMessageBundle","ext","extname","messageFormat","both","headerFile","dirname","parent","tryFindMetaDataHeaderFile","nlsBundle","module_3","json","resolvedLanguage","cacheLanguageResolution","locale","resolveLanguage","is","comment","VSCODE_NLS_CONFIG","vscodeOptions","availableLanguages","isBoolean","_languagePackSupport","_cacheRoot","_languagePackId","_translationsConfigFile","_corruptedFile","writeFile","initializeSettings","opts","bundleFormat","standalone","moduleModule","nativeModules","binding","originalRequire","patchedModules","originalModule","modulePath","_resolveFilename","moduleVersion","prereleaseTagIndex","modifiedModule","modulePatcher","versionSpecifier","_stackChain","Base","Data","DataPoint","DataPointType","Envelope","ExceptionDetails","PageViewData","SeverityLevel","StackFrame","extendStatics","__extends","setPrototypeOf","__proto__","__","_super","ver","properties","measurements","RequestParser","startTime","_setStatus","status","endTime","_isSuccess","traceFlag","DEFAULT_TRACE_FLAG","DEFAULT_VERSION","spanId","traceparentArr","len","isValidSpanId","legacyRootId","HttpRequestParser","AutoCollectHttpRequests","_isAutoCorrelating","useAutoCorrelation","isAutoCorrelating","_generateCorrelationContext","getOperationId","getRequestId","getOperationName","getCorrelationContextHeader","getTraceparent","getTracestate","wrapOnRequestHandler","onRequest","requestParser_1","correlationContext","wrapServerEventHandler","server","originalAddListener","eventType","eventHandler","originalHttpServer","createServer","originalHttpsServer","trackRequestSync","addResponseCorrelationIdHeader","endRequest","_requestParser","getOperationParentId","once","headersSent","ellapsedMilliseconds","requestTelemetry","getRequestTelemetry","tagOverrides","getRequestTags","getLegacyRootId","DEFAULT_SCOPES","async","aiKey","telemetryReporter","loginService","AzureActiveDirectoryService","subscriptions","initialize","authentication","registerAuthenticationProvider","onDidChangeSessions","getSessions","scopes","createSession","sendTelemetryEvent","fire","added","removed","changed","removeSession","supportsMultipleAccounts","randomBytes","sendFile","filepath","contentType","readFile","body","writeHead","portTimer","cancelPortTimer","clearTimeout","Promise","reject","address","assertIsDefined","listen","then","nonce","deferredRedirect","redirectPromise","deferredCode","codePromise","codeTimer","cancelCodeTimer","reqUrl","query","error_description","state","base64string","Readable","BUFFER","TYPE","Blob","blobParts","buffers","size","element","buffer","ArrayBuffer","isView","byteOffset","byteLength","buf","ab","readable","_read","start","relativeStart","relativeEnd","span","slicedBuffer","blob","FetchError","systemError","errno","captureStackTrace","convert","defineProperties","INTERNALS","PassThrough","Body","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBlob","isBuffer","disturbed","consumeBody","_this4","alloc","stream","accum","accumBytes","abort","resTimeout","chunk","append","delete","getAll","has","arrayBuffer","clone","instance","p1","p2","bodyUsed","getBoundary","pipe","extractContentType","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","ct","_this2","_this3","charset","exec","pop","convertBody","text","mixIn","proto","desc","getOwnPropertyDescriptor","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","MAP","Headers","init","rawHeaders","headerNames","headerName","iterator","pairs","pair","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","k","entries","values","INTERNAL","target","HeadersIteratorPrototype","getPrototypeOf","_INTERNAL","done","exportNodeCompatibleHeaders","hostHeaderKey","INTERNALS$1","STATUS_CODES","Response","statusText","counter","ok","redirected","INTERNALS$2","parse_url","format_url","streamDestructionSupported","isRequest","parsedURL","href","toUpperCase","inputBody","signal","isAbortSignal","redirect","follow","compress","AbortError","PassThrough$1","resolve_url","fetch","contentLengthValue","totalBytes","getNodeRequestOptions","send","destroy","aborted","abortAndFinalize","finalize","reqTimeout","removeEventListener","addEventListener","socket","createHeadersLenient","isRedirect","location","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createBrotliDecompress","createInflate","createInflateRaw","dest","write","writeToStream","createHash","update","digest","appInsights","TelemetryReporter","extensionId","extensionVersion","firstParty","userOptIn","logFilePath","logStream","createWriteStream","flags","autoClose","updateUserOptIn","onDidChangeTelemetryEnabled","optOutListener","workspace","onDidChangeConfiguration","getConfiguration","TELEMETRY_CONFIG_ID","newOptInValue","isTelemetryEnabled","TELEMETRY_CONFIG_ENABLED_ID","createAppInsightsClient","defaultClient","appInsightsClient","TelemetryClient","setUseDiskRetryCaching","setup","setAutoCollectRequests","setAutoCollectPerformance","setAutoCollectExceptions","setAutoCollectDependencies","setAutoDependencyCorrelation","setAutoCollectConsole","commonProperties","getCommonProperties","userId","machineId","sessionId","isNewAppInstall","uiKind","UIKind","Web","Desktop","cleanRemoteName","remoteName","shouldSendErrorTelemetry","extension","extensionKind","ExtensionKind","Workspace","_extension","extensions","getExtension","cloneAndChange","change","anonymizeFilePaths","cleanupPatterns","appRoot","extensionPath","updatedStack","cleanUpIndexes","cleanupPatterns_1","regexp","lastIndex","nodeModulesRegex","fileRegex","_loop_1","y","cleanupPatterns_2","eventName","cleanProperties","_key","trackEvent","sendTelemetryErrorEvent","errorProps","sendTelemetryException","trackException","flushEventsToLogger","flushEventsToAI","all","default","DistributedTracingModes","AutoCollectConsole","AutoCollectExceptions","QuickPulseClient","NativePerformance_1","_forceClsHooked","_disabledExtendedMetrics","_console","_exceptions","_performance","_nativePerformance","_serverRequests","_clientRequests","_performanceLiveMetrics","_isConsole","_isConsoleLog","_isExceptions","_isPerformance","_isRequests","_isDependencies","_isDiskRetry","_isCorrelating","_isSendingLiveMetrics","_isNativePerformance","_diskRetryInterval","_diskRetryMaxBytes","_isStarted","liveMetricsClient","Configuration","AutoCollectNativePerformance","getCorrelationContext","wrapWithCorrelationContext","setDistributedTracingMode","AI_AND_W3C","collectConsoleLog","collectExtendedMetrics","extendedMetricsConfig","parseEnabled","disabledMetrics","useAsyncHooks","resendInterval","maxBytesOnDisk","setInternalLogging","enableDebugLogging","enableWarningLogging","setSendLiveMetrics","addCollector","quickPulseClient","azuresdk","consolePub","tedious","diagnostic_channel_1","AzureMonitorSymbol","AzureMonitorSpanProcessor","onStart","onEnd","shutdown","azureCoreTracing","coreTracing","tracer_1","BasicTracer","spanContextPropagator","scopeManager","startSpanOriginal_1","startSpan","parentOperation","getCurrentSpan","addEvent","addSpanProcessor","setTracer","originalBunyan","originalEmit","_emit","rec","noemit","stream_1","originalConsole","aiLoggingOutStream","Writable","aiLoggingErrStream","stderr","aiLoggingConsole","Console","originalMethod","consoleMethods_1","mongoCore","originalMongoCore","originalConnect","Server","connect","originalWrite","pool","cbidx","originalLogout","logout","mongo2","originalMongo","instrument","operationIdGenerator","next","eventMap","requestId","startedData","succeeded","mongo3","contextMap","mongo330","coreTopology","mongodbcorePatchFunction","originalMysql","originalMysqlPath","patchObjectFunction","func","cbWrapper","originalFunc","resultContainer","startDate","patchClassMemberFunction","classObject","connectionClass","hrDuration","callbackArgs","poolClass","webpackEmptyContext","postgresPool1","originalPgPool","events_1","postgres6","originalPg","originalPgPath","originalClientQuery","Client","queryResult","database","connectionParameters","patchCallback","trackingCallback","rowCount","command","ceil","EventEmitter","preparable","plan","postgres7","callbackProvided","_Promise","catch","originalRedis","originalSend","RedisClient","internal_send_command","commandObj","cb_1","pubsubBound","address_1","startTime_1","startDate_1","originalTedious","originalMakeRequest","Connection","getPatchedCallback","origCallback","rows","connection","parametersByName","statement","__rest","getOwnPropertySymbols","winston3","originalWinston","AppInsightsTransport","meta","splat","levelKind","npm","levels","syslog","mapLevelToKind","Transport","patchedConfigure","lastLevel","add","origCreate","createLogger","origConfigure","configure","origRootConfigure","winston2","curLevels","originalLog","loggingFilter","filters","f","util","assert","async_hooks","DEBUG_CLS_HOOKED","currentUid","Namespace","active","_set","_contexts","Map","_indent","getNamespace","namespaces","destroyNamespace","namespace","inspect","debug2","_rawDebug","createHook","asyncId","triggerId","resource","executionAsyncId","indentStr","showHidden","depth","colors","triggerAsyncId","triggerIdContext","enter","exit","ERROR_SYMBOL","asyncHooksCurrentId","currentId","createContext","_ns_name","run","runAndReturn","runPromise","promise","thisSymbol","unwrappedContexts","thunk","fromException","asyncHook","invertedProviders","providers","msg","DEBUG","getFunctionName","addHooks","uid","handle","provider","parentUid","parentHandle","_state","stackChain","modifier","_modifiers","deattach","AsyncHook","_asyncHook","attach","frames","callSite","getFileName","asyncWrap","TIMERWRAP","Providers","patchs","ignoreUIDs","Set","State","Hooks","initFns","preFns","postFns","destroyFns","hook","pre","post","didThrow","removeElement","item","_hooks","setupHooks","hooks","remove","removeHooks","NextTickWrap","oldNextTick","nextTick","listenerCount","PromiseWrap","oldThen","makeWrappedHandler","isOnFulfilled","makeUnhandledResolutionHandler","makeUnhandledRejectionHandler","onFulfilled","onRejected","timers","TimeoutWrap","IntervalWrap","ImmediateWrap","timeoutMap","intervalMap","ImmediateMap","activeCallback","clearedInCallback","patchTimer","setFn","clearFn","Handle","timerMap","singleCall","oldSetFn","oldClearFn","timerId","setImmediate","clearImmediate","defaultFormater","extend","TraceModifier","StackFormater","SHORTCIRCUIT_CALLSITE","collectCallSites","callSites","_modify","chain","_formater","_previous","formater","restore","_backup","_roolback","prepareStackTrace","SHORTCIRCUIT_FORMATER","originalFrames","stackTraceLimit","isExtensible","mutated","lines","ee","FormatErrorString","line","frame","removeAsyncListener","addAsyncListener","contexts","storage","after","v6plus","v7plus","v8plus","v11plus","net","wrapSetUpListenHandle","onread","onconnection","patchOnRead","ctx","_originalOnread","_normalizeArgs","arg0","_normalizeConnectArgs","Socket","onSocket","childProcess","wrapChildProcess","child","stdio","activatorFirst","onexit","ChildProcess","_fatalException","_originalNextTick","processors","_nextDomainTick","_tickDomainCallback","activator","asynchronizers","patchGlobalTimers","dns","resolveNaptr","zlib","crypto","lchown","lchmod","ftruncate","Deflate","_transform","toWrap","instrumentPromise","promiseListener","fallback","cbIdx","wrappedPromise","executor","ensureAslWrapper","inherits","wrapThen","overwrite","__asl_wrapper","propagateAslWrapper","nextResult","returnVal","errorVal","aslWrapper","last","wrapPromise","asyncCatcher","inAsyncTick","listenerStack","union","destLength","addedLength","j","missing","errorValues","inErrorTick","handled","errorThrew","threw","AsyncListener","callbacks","createAsyncListener","registered","simpleWrap","super","_methodNames","Contracts_1","clients","subscriber","trackTrace","severity","Warning","Information","Generated_1","RemoteDependencyDataConstants","TYPE_HTTP","TYPE_AI","domainSupportsProperties","domain","deviceLocale","deviceModel","deviceOEMName","deviceType","locationIp","operationParentId","operationSyntheticSource","operationCorrelationVector","sessionIsFirst","userAccountId","userAuthUserId","internalAgentVersion","internalNodeName","Measurement","sampleRate","hasFullStack","parsedStack","metrics","TelemetryType","telemetryTypeToBaseType","baseTypeToTelemetryType","baseType","TelemetryTypeString","bunyanToAILevelMap","10","Verbose","20","30","40","50","60","Critical","AIlevel","winstonToAILevelMap","og","emerg","alert","crit","warning","notice","verbose","silly","unknown","_canUseUncaughtExceptionMonitor","_exceptionListenerHandle","reThrow","_FALLBACK_ERROR_MESSAGE","isAppCrashing","UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME","UNCAUGHT_EXCEPTION_HANDLER_NAME","_rejectionListenerHandle","UNHANDLED_REJECTION_HANDLER_NAME","_RETHROW_EXIT_MESSAGE","_getUrlFromRequestOptions","baseTelemetry","dependencyId","urlObject","search","dependencyName","remoteDependencyType","remoteDependencyTarget","resultCode","dependencyTypeName","originalOptions_1","parsedQuery","commandName","dbName","databaseName","queryObj","sqlString","sql","connectionConfig","_connection","socketPath","q","conn","Tracestate","_getAbsoluteUrl","socketRemoteAddress","remoteAddress","parseHeaders","connectionRemoteAddress","legacySocketRemoteAddress","source","sourceCorrelationId","newTags","_getIp","_getId","encrypted","pathName","ipMatch","check","results","ip","parseId","setBackCompatFromThisTraceContext","userAgent","tracestateHeader","legacy_parentId","legacy_rootId","cookieValue","cookieParts","fieldmap","parseHeader","fieldarr","validateKeyChars","keyParts","tenant","vendor","tenantValid","Boolean","vendorValid","keydeduper","parts_1","part","strict","QuickPulseEnvelopeFactory","QuickPulseSender","QuickPulseStateManager","_isCollectingData","_lastSuccessTime","_lastSendSucceeded","_metrics","_documents","_collectors","_sender","collector","_addMetric","addDocument","envelope","document","telemetryEnvelopeToQuickPulseDocument","_goQuickPulse","enableCollectors","count","Value","Weight","createQuickPulseMetric","Name","_resetQuickPulseBuffer","createQuickPulseEnvelope","_post","_ping","currentTimeout","POST_INTERVAL","PING_INTERVAL","MAX_POST_WAIT_TIME","FALLBACK_INTERVAL","MAX_PING_WAIT_TIME","ping","_quickPulseDone","shouldPOST","connectionString","_FIELDS_SEPARATOR","reduce","fields","kv","kvParts","_FIELD_KEY_VALUE_SEPARATOR","endpointsuffix","locationPrefix","StreamId","documents","machineName","Documents","InstrumentationKey","Metrics","InvariantVersion","Timestamp","Version","MachineName","Instance","createQuickPulseEventDocument","createQuickPulseExceptionDocument","createQuickPulseTraceDocument","createQuickPulseDependencyDocument","createQuickPulseRequestDocument","createQuickPulseDocument","baseData","severityLevel","Message","exceptionDetails","exceptionMessage","exceptionType","assembly","typeName","ExceptionMessage","ExceptionType","Success","Duration","ResponseCode","responseCode","OperationName","Target","ResultCode","CommandName","OperationId","DependencyTypeName","documentType","__type","DocumentType","Properties","aggregateProperties","meas","QuickPulseConfig","_config","_consecutiveErrors","_submitData","postOrPing","_b","payload","quickPulseHost","shouldPOSTData","MAX_QPS_FAILURES_BEFORE_WARN","_disabledMetrics","_metricsAvailable","NativeMetricsEmitters","_emitter","_trackNativeMetrics","disableAll","individualOptOuts","optOutsArr","optOutsArr_1","shouldSendAll","_trackGarbageCollection","_trackEventLoop","_trackHeapUsage","gc","gcData","getGCData","name_1","stdDev","sqrt","sumSquares","pow","total","loop","getLoopData","loopUsage","heap","_c","heapUsed","heapTotal","ServerRequestTracking","ClientRequestTracking","NodeClient","trackNodeHttpRequestSync","trackNodeHttpRequest","trackNodeHttpDependency","Channel","TelemetryProcessors","Sender","EnvelopeFactory","_telemetryProcessors","sender","trackAvailability","track","triggerSend","telemetryType","createEnvelope","toISOString","accepted","runTelemetryProcessors","samplingTelemetryProcessor","performanceMetricsTelemetryProcessor","addTelemetryProcessor","telemetryProcessor","clearTelemetryProcessors","telemetryProcessorsCount","processor","isDisabled","getBatchSize","getBatchIntervalMs","_buffer","_lastSend","_isDisabled","_getBatchSize","_getBatchIntervalMs","setDiskRetryMode","_stringify","_timeoutHandle","isNodeCrashing","bufferIsEmpty","batch","saveOnCrash","getSamplingHashCode","charCodeAt","abs","requestData","remoteDependencyData","child_process","onSuccess","_onSuccess","_onError","_enableDiskRetryMode","_resendInterval","WAIT_BETWEEN_RESEND","_maxBytesOnDisk","MAX_BYTES_ON_DISK","_numConsecutiveFailures","OS_PROVIDES_FILE_PROTECTION","USE_ICACLS","ICACLS_PATH","withCredentials","gzip","dataToSend","responseString","_sendFirstFileOnDisk","_storeToDisk","MAX_CONNECTION_FAILURES_BEFORE_WARN","_onErrorHelper","errorMessage","_storeToDiskSync","_runICACLS","aclProc","spawn","windowsHide","_runICACLSSync","spawnSync","_getACLIdentity","ACL_IDENTITY","psProc","POWERSHELL_PATH","stdout","_getACLIdentitySync","_getACLArguments","directory","identity","_applyACLRules","ACLED_DIRECTORIES","_applyACLRulesSync","_confirmDirExists","lstat","stats","mkdir","isDirectory","_getShallowDirectorySize","readdir","files","totalSize","stat","fileStats","isFile","_getShallowDirectorySizeSync","readdirSync","statSync","tmpdir","TEMPDIR_PREFIX","fileName","getTime","fileFullPath","mkdirSync","dirSize","tempDir","exists","basename","firstFile","filePath","systemdrive","createTraceData","createDependencyData","createEventData","createExceptionData","createRequestData","createMetricData","createAvailabilityData","getTags","trace","remoteDependency","parseStack","metric","Aggregation","availabilityData","runLocation","totalSizeInBytes","_StackFrame","regex","parsedFrame","sizeInBytes","left","right","acceptedLeft","acceptedRight","howMany","matches","baseSize","rnds8","Uint8Array","rng","randomFillSync","byteToHex","offset_","offset","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","generateUUID","unescape","encodeURIComponent","bytes","stringToBytes","uuid","hex","uuidToBytes","hashfunc","DNS","URL","v35","rnds"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 45);\n","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar patchRequire_1 = require(\"./patchRequire\");\r\nvar patchRequire_2 = require(\"./patchRequire\");\r\nexports.makePatchingRequire = patchRequire_2.makePatchingRequire;\r\nvar trueFilter = function (publishing) { return true; };\r\nvar ContextPreservingEventEmitter = (function () {\r\n    function ContextPreservingEventEmitter() {\r\n        this.version = require(\"./../../package.json\").version; // Allow for future versions to replace things?\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        this.knownPatches = {};\r\n        this.currentlyPublishing = false;\r\n    }\r\n    ContextPreservingEventEmitter.prototype.shouldPublish = function (name) {\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            return listeners.some(function (_a) {\r\n                var filter = _a.filter;\r\n                return !filter || filter(false);\r\n            });\r\n        }\r\n        return false;\r\n    };\r\n    ContextPreservingEventEmitter.prototype.publish = function (name, event) {\r\n        if (this.currentlyPublishing) {\r\n            return; // Avoid reentrancy\r\n        }\r\n        var listeners = this.subscribers[name];\r\n        // Note: Listeners called synchronously to preserve context\r\n        if (listeners) {\r\n            var standardEvent_1 = {\r\n                timestamp: Date.now(),\r\n                data: event,\r\n            };\r\n            this.currentlyPublishing = true;\r\n            listeners.forEach(function (_a) {\r\n                var listener = _a.listener, filter = _a.filter;\r\n                try {\r\n                    if (filter && filter(true)) {\r\n                        listener(standardEvent_1);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // Subscriber threw an error\r\n                }\r\n            });\r\n            this.currentlyPublishing = false;\r\n        }\r\n    };\r\n    ContextPreservingEventEmitter.prototype.subscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        if (!this.subscribers[name]) {\r\n            this.subscribers[name] = [];\r\n        }\r\n        this.subscribers[name].push({ listener: listener, filter: filter });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.unsubscribe = function (name, listener, filter) {\r\n        if (filter === void 0) { filter = trueFilter; }\r\n        var listeners = this.subscribers[name];\r\n        if (listeners) {\r\n            for (var index = 0; index < listeners.length; ++index) {\r\n                if (listeners[index].listener === listener && listeners[index].filter === filter) {\r\n                    listeners.splice(index, 1);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    // Used for tests\r\n    ContextPreservingEventEmitter.prototype.reset = function () {\r\n        var _this = this;\r\n        this.subscribers = {};\r\n        this.contextPreservationFunction = function (cb) { return cb; };\r\n        // Modify the knownPatches object rather than replace, since a reference will be used in the require patcher\r\n        Object.getOwnPropertyNames(this.knownPatches).forEach(function (prop) { return delete _this.knownPatches[prop]; });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.bindToContext = function (cb) {\r\n        return this.contextPreservationFunction(cb);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.addContextPreservation = function (preserver) {\r\n        var previousPreservationStack = this.contextPreservationFunction;\r\n        this.contextPreservationFunction = (function (cb) { return preserver(previousPreservationStack(cb)); });\r\n    };\r\n    ContextPreservingEventEmitter.prototype.registerMonkeyPatch = function (packageName, patcher) {\r\n        if (!this.knownPatches[packageName]) {\r\n            this.knownPatches[packageName] = [];\r\n        }\r\n        this.knownPatches[packageName].push(patcher);\r\n    };\r\n    ContextPreservingEventEmitter.prototype.getPatchesObject = function () {\r\n        return this.knownPatches;\r\n    };\r\n    return ContextPreservingEventEmitter;\r\n}());\r\nif (!global.diagnosticsSource) {\r\n    global.diagnosticsSource = new ContextPreservingEventEmitter();\r\n    // TODO: should this only patch require after at least one monkey patch is registered?\r\n    /* tslint:disable-next-line:no-var-requires */\r\n    var moduleModule = require(\"module\");\r\n    // Note: We pass in the object now before any patches are registered, but the object is passed by reference\r\n    // so any updates made to the object will be visible in the patcher.\r\n    moduleModule.prototype.require = patchRequire_1.makePatchingRequire(global.diagnosticsSource.getPatchesObject());\r\n}\r\nexports.channel = global.diagnosticsSource;\r\n//# sourceMappingURL=channel.js.map","\"use strict\";\nvar Logging = (function () {\n    function Logging() {\n    }\n    Logging.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (Logging.enableDebug) {\n            console.info(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (!Logging.disableWarnings) {\n            console.warn(Logging.TAG + message, optionalParams);\n        }\n    };\n    Logging.enableDebug = false;\n    Logging.disableWarnings = false;\n    Logging.disableErrors = false;\n    Logging.TAG = \"ApplicationInsights:\";\n    return Logging;\n}());\nmodule.exports = Logging;\n//# sourceMappingURL=Logging.js.map","module.exports = require(\"stream\");","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./Constants\"));\n__export(require(\"./Generated\"));\n__export(require(\"./TelemetryTypes\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar url = require(\"url\");\nvar constants = require(\"constants\");\nvar Logging = require(\"./Logging\");\nvar RequestResponseHeaders = require(\"./RequestResponseHeaders\");\nvar Util = (function () {\n    function Util() {\n    }\n    /**\n     * helper method to access userId and sessionId cookie\n     */\n    Util.getCookie = function (name, cookie) {\n        var value = \"\";\n        if (name && name.length && typeof cookie === \"string\") {\n            var cookieName = name + \"=\";\n            var cookies = cookie.split(\";\");\n            for (var i = 0; i < cookies.length; i++) {\n                var cookie = cookies[i];\n                cookie = Util.trim(cookie);\n                if (cookie && cookie.indexOf(cookieName) === 0) {\n                    value = cookie.substring(cookieName.length, cookies[i].length);\n                    break;\n                }\n            }\n        }\n        return value;\n    };\n    /**\n     * helper method to trim strings (IE8 does not implement String.prototype.trim)\n     */\n    Util.trim = function (str) {\n        if (typeof str === \"string\") {\n            return str.replace(/^\\s+|\\s+$/g, \"\");\n        }\n        else {\n            return \"\";\n        }\n    };\n    /**\n     * Convert an array of int32 to Base64 (no '==' at the end).\n     * MSB first.\n     */\n    Util.int32ArrayToBase64 = function (array) {\n        var toChar = function (v, i) {\n            return String.fromCharCode((v >> i) & 0xFF);\n        };\n        var int32AsString = function (v) {\n            return toChar(v, 24) + toChar(v, 16) + toChar(v, 8) + toChar(v, 0);\n        };\n        var x = array.map(int32AsString).join(\"\");\n        var b = Buffer.from ? Buffer.from(x, \"binary\") : new Buffer(x, \"binary\");\n        var s = b.toString(\"base64\");\n        return s.substr(0, s.indexOf(\"=\"));\n    };\n    /**\n     * generate a random 32bit number (-0x80000000..0x7FFFFFFF).\n     */\n    Util.random32 = function () {\n        return (0x100000000 * Math.random()) | 0;\n    };\n    /**\n     * generate a random 32bit number (0x00000000..0xFFFFFFFF).\n     */\n    Util.randomu32 = function () {\n        return Util.random32() + 0x80000000;\n    };\n    /**\n     * generate W3C-compatible trace id\n     * https://github.com/w3c/distributed-tracing/blob/master/trace_context/HTTP_HEADER_FORMAT.md#trace-id\n     */\n    Util.w3cTraceId = function () {\n        var hexValues = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"a\", \"b\", \"c\", \"d\", \"e\", \"f\"];\n        // rfc4122 version 4 UUID without dashes and with lowercase letters\n        var oct = \"\", tmp;\n        for (var a = 0; a < 4; a++) {\n            tmp = Util.random32();\n            oct +=\n                hexValues[tmp & 0xF] +\n                    hexValues[tmp >> 4 & 0xF] +\n                    hexValues[tmp >> 8 & 0xF] +\n                    hexValues[tmp >> 12 & 0xF] +\n                    hexValues[tmp >> 16 & 0xF] +\n                    hexValues[tmp >> 20 & 0xF] +\n                    hexValues[tmp >> 24 & 0xF] +\n                    hexValues[tmp >> 28 & 0xF];\n        }\n        // \"Set the two most significant bits (bits 6 and 7) of the clock_seq_hi_and_reserved to zero and one, respectively\"\n        var clockSequenceHi = hexValues[8 + (Math.random() * 4) | 0];\n        return oct.substr(0, 8) + oct.substr(9, 4) + \"4\" + oct.substr(13, 3) + clockSequenceHi + oct.substr(16, 3) + oct.substr(19, 12);\n    };\n    Util.isValidW3CId = function (id) {\n        return id.length === 32 && id !== \"00000000000000000000000000000000\";\n    };\n    /**\n     * Check if an object is of type Array\n     */\n    Util.isArray = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Array]\";\n    };\n    /**\n     * Check if an object is of type Error\n     */\n    Util.isError = function (obj) {\n        return obj instanceof Error;\n    };\n    Util.isPrimitive = function (input) {\n        var propType = typeof input;\n        return propType === \"string\" || propType === \"number\" || propType === \"boolean\";\n    };\n    /**\n     * Check if an object is of type Date\n     */\n    Util.isDate = function (obj) {\n        return Object.prototype.toString.call(obj) === \"[object Date]\";\n    };\n    /**\n     * Convert ms to c# time span format\n     */\n    Util.msToTimeSpan = function (totalms) {\n        if (isNaN(totalms) || totalms < 0) {\n            totalms = 0;\n        }\n        var sec = ((totalms / 1000) % 60).toFixed(7).replace(/0{0,4}$/, \"\");\n        var min = \"\" + Math.floor(totalms / (1000 * 60)) % 60;\n        var hour = \"\" + Math.floor(totalms / (1000 * 60 * 60)) % 24;\n        var days = Math.floor(totalms / (1000 * 60 * 60 * 24));\n        sec = sec.indexOf(\".\") < 2 ? \"0\" + sec : sec;\n        min = min.length < 2 ? \"0\" + min : min;\n        hour = hour.length < 2 ? \"0\" + hour : hour;\n        var daysText = days > 0 ? days + \".\" : \"\";\n        return daysText + hour + \":\" + min + \":\" + sec;\n    };\n    /**\n     * Using JSON.stringify, by default Errors do not serialize to something useful:\n     * Simplify a generic Node Error into a simpler map for customDimensions\n     * Custom errors can still implement toJSON to override this functionality\n     */\n    Util.extractError = function (err) {\n        // Error is often subclassed so may have code OR id properties:\n        // https://nodejs.org/api/errors.html#errors_error_code\n        var looseError = err;\n        return {\n            message: err.message,\n            code: looseError.code || looseError.id || \"\",\n        };\n    };\n    /**\n     * Manually call toJSON if available to pre-convert the value.\n     * If a primitive is returned, then the consumer of this function can skip JSON.stringify.\n     * This avoids double escaping of quotes for Date objects, for example.\n     */\n    Util.extractObject = function (origProperty) {\n        if (origProperty instanceof Error) {\n            return Util.extractError(origProperty);\n        }\n        if (typeof origProperty.toJSON === \"function\") {\n            return origProperty.toJSON();\n        }\n        return origProperty;\n    };\n    /**\n     * Validate that an object is of type { [key: string]: string }\n     */\n    Util.validateStringMap = function (obj) {\n        if (typeof obj !== \"object\") {\n            Logging.info(\"Invalid properties dropped from payload\");\n            return;\n        }\n        var map = {};\n        for (var field in obj) {\n            var property = '';\n            var origProperty = obj[field];\n            var propType = typeof origProperty;\n            if (Util.isPrimitive(origProperty)) {\n                property = origProperty.toString();\n            }\n            else if (origProperty === null || propType === \"undefined\") {\n                property = \"\";\n            }\n            else if (propType === \"function\") {\n                Logging.info(\"key: \" + field + \" was function; will not serialize\");\n                continue;\n            }\n            else {\n                var stringTarget = Util.isArray(origProperty) ? origProperty : Util.extractObject(origProperty);\n                try {\n                    if (Util.isPrimitive(stringTarget)) {\n                        property = stringTarget;\n                    }\n                    else {\n                        property = JSON.stringify(stringTarget);\n                    }\n                }\n                catch (e) {\n                    property = origProperty.constructor.name.toString() + \" (Error: \" + e.message + \")\";\n                    Logging.info(\"key: \" + field + \", could not be serialized\");\n                }\n            }\n            map[field] = property.substring(0, Util.MAX_PROPERTY_LENGTH);\n        }\n        return map;\n    };\n    /**\n     * Checks if a request url is not on a excluded domain list\n     * and if it is safe to add correlation headers\n     */\n    Util.canIncludeCorrelationHeader = function (client, requestUrl) {\n        var excludedDomains = client && client.config && client.config.correlationHeaderExcludedDomains;\n        if (!excludedDomains || excludedDomains.length == 0 || !requestUrl) {\n            return true;\n        }\n        for (var i = 0; i < excludedDomains.length; i++) {\n            var regex = new RegExp(excludedDomains[i].replace(/\\./g, \"\\.\").replace(/\\*/g, \".*\"));\n            if (regex.test(url.parse(requestUrl).hostname)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    Util.getCorrelationContextTarget = function (response, key) {\n        var contextHeaders = response.headers && response.headers[RequestResponseHeaders.requestContextHeader];\n        if (contextHeaders) {\n            var keyValues = contextHeaders.split(\",\");\n            for (var i = 0; i < keyValues.length; ++i) {\n                var keyValue = keyValues[i].split(\"=\");\n                if (keyValue.length == 2 && keyValue[0] == key) {\n                    return keyValue[1];\n                }\n            }\n        }\n    };\n    /**\n     * Generate request\n     *\n     * Proxify the request creation to handle proxy http\n     *\n     * @param {string} requestUrl url endpoint\n     * @param {Object} requestOptions Request option\n     * @param {Function} requestCallback callback on request\n     * @returns {http.ClientRequest} request object\n     */\n    Util.makeRequest = function (config, requestUrl, requestOptions, requestCallback) {\n        if (requestUrl && requestUrl.indexOf('//') === 0) {\n            requestUrl = 'https:' + requestUrl;\n        }\n        var requestUrlParsed = url.parse(requestUrl);\n        var options = __assign({}, requestOptions, { host: requestUrlParsed.hostname, port: requestUrlParsed.port, path: requestUrlParsed.pathname });\n        var proxyUrl = undefined;\n        if (requestUrlParsed.protocol === 'https:') {\n            proxyUrl = config.proxyHttpsUrl || undefined;\n        }\n        if (requestUrlParsed.protocol === 'http:') {\n            proxyUrl = config.proxyHttpUrl || undefined;\n        }\n        if (proxyUrl) {\n            if (proxyUrl.indexOf('//') === 0) {\n                proxyUrl = 'http:' + proxyUrl;\n            }\n            var proxyUrlParsed = url.parse(proxyUrl);\n            // https is not supported at the moment\n            if (proxyUrlParsed.protocol === 'https:') {\n                Logging.info(\"Proxies that use HTTPS are not supported\");\n                proxyUrl = undefined;\n            }\n            else {\n                options = __assign({}, options, { host: proxyUrlParsed.hostname, port: proxyUrlParsed.port || \"80\", path: requestUrl, headers: __assign({}, options.headers, { Host: requestUrlParsed.hostname }) });\n            }\n        }\n        var isHttps = requestUrlParsed.protocol === 'https:' && !proxyUrl;\n        if (isHttps && config.httpsAgent !== undefined) {\n            options.agent = config.httpsAgent;\n        }\n        else if (!isHttps && config.httpAgent !== undefined) {\n            options.agent = config.httpAgent;\n        }\n        else if (isHttps) {\n            // HTTPS without a passed in agent. Use one that enforces our TLS rules\n            options.agent = Util.tlsRestrictedAgent;\n        }\n        if (isHttps) {\n            return https.request(options, requestCallback);\n        }\n        else {\n            return http.request(options, requestCallback);\n        }\n    };\n    ;\n    /**\n     * Parse standard <string | string[] | number> request-context header\n     */\n    Util.safeIncludeCorrelationHeader = function (client, request, correlationHeader) {\n        var header; // attempt to cast correlationHeader to string\n        if (typeof correlationHeader === \"string\") {\n            header = correlationHeader;\n        }\n        else if (correlationHeader instanceof Array) {\n            header = correlationHeader.join(\",\");\n        }\n        else if (correlationHeader && typeof correlationHeader.toString === \"function\") {\n            // best effort attempt: requires well-defined toString\n            try {\n                header = correlationHeader.toString();\n            }\n            catch (err) {\n                Logging.warn(\"Outgoing request-context header could not be read. Correlation of requests may be lost.\", err, correlationHeader);\n            }\n        }\n        if (header) {\n            Util.addCorrelationIdHeaderFromString(client, request, header);\n        }\n        else {\n            request.setHeader(RequestResponseHeaders.requestContextHeader, RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.addCorrelationIdHeaderFromString = function (client, response, correlationHeader) {\n        var components = correlationHeader.split(\",\");\n        var key = RequestResponseHeaders.requestContextSourceKey + \"=\";\n        var found = components.some(function (value) { return value.substring(0, key.length) === key; });\n        if (!found) {\n            response.setHeader(RequestResponseHeaders.requestContextHeader, correlationHeader + \",\" + RequestResponseHeaders.requestContextSourceKey + \"=\" + client.config.correlationId);\n        }\n    };\n    Util.MAX_PROPERTY_LENGTH = 8192;\n    Util.tlsRestrictedAgent = new https.Agent({\n        secureOptions: constants.SSL_OP_NO_SSLv2 | constants.SSL_OP_NO_SSLv3 |\n            constants.SSL_OP_NO_TLSv1 | constants.SSL_OP_NO_TLSv1_1\n    });\n    return Util;\n}());\nmodule.exports = Util;\n//# sourceMappingURL=Util.js.map","module.exports = require(\"url\");","module.exports = require(\"zlib\");","module.exports = require(\"path\");","module.exports = require(\"crypto\");","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * The abstract common base of all domains.\n */\nvar Domain = (function () {\n    function Domain() {\n    }\n    return Domain;\n}());\nmodule.exports = Domain;\n//# sourceMappingURL=Domain.js.map","module.exports = require(\"http\");","module.exports = require(\"fs\");","\"use strict\";\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar CorrelationIdManager = (function () {\n    function CorrelationIdManager() {\n    }\n    CorrelationIdManager.queryCorrelationId = function (config, callback) {\n        // GET request to `${this.endpointBase}/api/profiles/${this.instrumentationKey}/appId`\n        // If it 404s, the iKey is bad and we should give up\n        // If it fails otherwise, try again later\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        if (CorrelationIdManager.completedLookups.hasOwnProperty(appIdUrlString)) {\n            callback(CorrelationIdManager.completedLookups[appIdUrlString]);\n            return;\n        }\n        else if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n            CorrelationIdManager.pendingLookups[appIdUrlString].push(callback);\n            return;\n        }\n        CorrelationIdManager.pendingLookups[appIdUrlString] = [callback];\n        var fetchAppId = function () {\n            if (!CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                // This query has been cancelled.\n                return;\n            }\n            var requestOptions = {\n                method: 'GET',\n                // Ensure this request is not captured by auto-collection.\n                // Note: we don't refer to the property in HttpDependencyParser because that would cause a cyclical dependency\n                disableAppInsightsAutoCollection: true\n            };\n            Logging.info(CorrelationIdManager.TAG, requestOptions);\n            var req = Util.makeRequest(config, appIdUrlString, requestOptions, function (res) {\n                if (res.statusCode === 200) {\n                    // Success; extract the appId from the body\n                    var appId_1 = \"\";\n                    res.setEncoding(\"utf-8\");\n                    res.on('data', function (data) {\n                        appId_1 += data;\n                    });\n                    res.on('end', function () {\n                        Logging.info(CorrelationIdManager.TAG, appId_1);\n                        var result = CorrelationIdManager.correlationIdPrefix + appId_1;\n                        CorrelationIdManager.completedLookups[appIdUrlString] = result;\n                        if (CorrelationIdManager.pendingLookups[appIdUrlString]) {\n                            CorrelationIdManager.pendingLookups[appIdUrlString].forEach(function (cb) { return cb(result); });\n                        }\n                        delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                    });\n                }\n                else if (res.statusCode >= 400 && res.statusCode < 500) {\n                    // Not found, probably a bad key. Do not try again.\n                    CorrelationIdManager.completedLookups[appIdUrlString] = undefined;\n                    delete CorrelationIdManager.pendingLookups[appIdUrlString];\n                }\n                else {\n                    // Retry after timeout.\n                    setTimeout(fetchAppId, config.correlationIdRetryIntervalMs);\n                }\n            });\n            if (req) {\n                req.on('error', function (error) {\n                    // Unable to contact endpoint.\n                    // Do nothing for now.\n                    Logging.warn(CorrelationIdManager.TAG, error);\n                });\n                req.end();\n            }\n        };\n        setTimeout(fetchAppId, 0);\n    };\n    CorrelationIdManager.cancelCorrelationIdQuery = function (config, callback) {\n        var appIdUrlString = config.profileQueryEndpoint + \"/api/profiles/\" + config.instrumentationKey + \"/appId\";\n        var pendingLookups = CorrelationIdManager.pendingLookups[appIdUrlString];\n        if (pendingLookups) {\n            CorrelationIdManager.pendingLookups[appIdUrlString] = pendingLookups.filter(function (cb) { return cb != callback; });\n            if (CorrelationIdManager.pendingLookups[appIdUrlString].length == 0) {\n                delete CorrelationIdManager.pendingLookups[appIdUrlString];\n            }\n        }\n    };\n    /**\n     * Generate a request Id according to https://github.com/lmolkova/correlation/blob/master/hierarchical_request_id.md\n     * @param parentId\n     */\n    CorrelationIdManager.generateRequestId = function (parentId) {\n        if (parentId) {\n            parentId = parentId[0] == '|' ? parentId : '|' + parentId;\n            if (parentId[parentId.length - 1] !== '.') {\n                parentId += '.';\n            }\n            var suffix = (CorrelationIdManager.currentRootId++).toString(16);\n            return CorrelationIdManager.appendSuffix(parentId, suffix, '_');\n        }\n        else {\n            return CorrelationIdManager.generateRootId();\n        }\n    };\n    /**\n     * Given a hierarchical identifier of the form |X.*\n     * return the root identifier X\n     * @param id\n     */\n    CorrelationIdManager.getRootId = function (id) {\n        var endIndex = id.indexOf('.');\n        if (endIndex < 0) {\n            endIndex = id.length;\n        }\n        var startIndex = id[0] === '|' ? 1 : 0;\n        return id.substring(startIndex, endIndex);\n    };\n    CorrelationIdManager.generateRootId = function () {\n        return '|' + Util.w3cTraceId() + '.';\n    };\n    CorrelationIdManager.appendSuffix = function (parentId, suffix, delimiter) {\n        if (parentId.length + suffix.length < CorrelationIdManager.requestIdMaxLength) {\n            return parentId + suffix + delimiter;\n        }\n        // Combined identifier would be too long, so we must truncate it.\n        // We need 9 characters of space: 8 for the overflow ID, 1 for the\n        // overflow delimiter '#'\n        var trimPosition = CorrelationIdManager.requestIdMaxLength - 9;\n        if (parentId.length > trimPosition) {\n            for (; trimPosition > 1; --trimPosition) {\n                var c = parentId[trimPosition - 1];\n                if (c === '.' || c === '_') {\n                    break;\n                }\n            }\n        }\n        if (trimPosition <= 1) {\n            // parentId is not a valid ID\n            return CorrelationIdManager.generateRootId();\n        }\n        suffix = Util.randomu32().toString(16);\n        while (suffix.length < 8) {\n            suffix = '0' + suffix;\n        }\n        return parentId.substring(0, trimPosition) + suffix + '#';\n    };\n    CorrelationIdManager.TAG = \"CorrelationIdManager\";\n    CorrelationIdManager.correlationIdPrefix = \"cid-v1:\";\n    CorrelationIdManager.w3cEnabled = false;\n    // To avoid extraneous HTTP requests, we maintain a queue of callbacks waiting on a particular appId lookup,\n    // as well as a cache of completed lookups so future requests can be resolved immediately.\n    CorrelationIdManager.pendingLookups = {};\n    CorrelationIdManager.completedLookups = {};\n    CorrelationIdManager.requestIdMaxLength = 1024;\n    CorrelationIdManager.currentRootId = Util.randomu32();\n    return CorrelationIdManager;\n}());\nmodule.exports = CorrelationIdManager;\n//# sourceMappingURL=CorrelationIdManager.js.map","module.exports = require(\"https\");","module.exports = require(\"vscode\");","module.exports = require(\"os\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../Library/Logging\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar CorrelationContextManager = (function () {\n    function CorrelationContextManager() {\n    }\n    /**\n     *  Provides the current Context.\n     *  The context is the most recent one entered into for the current\n     *  logical chain of execution, including across asynchronous calls.\n     */\n    CorrelationContextManager.getCurrentContext = function () {\n        if (!CorrelationContextManager.enabled) {\n            return null;\n        }\n        var context = CorrelationContextManager.session.get(CorrelationContextManager.CONTEXT_NAME);\n        if (context === undefined) {\n            return null;\n        }\n        return context;\n    };\n    /**\n     *  A helper to generate objects conforming to the CorrelationContext interface\n     */\n    CorrelationContextManager.generateContextObject = function (operationId, parentId, operationName, correlationContextHeader, traceparent, tracestate) {\n        parentId = parentId || operationId;\n        if (this.enabled) {\n            return {\n                operation: {\n                    name: operationName,\n                    id: operationId,\n                    parentId: parentId,\n                    traceparent: traceparent,\n                    tracestate: tracestate\n                },\n                customProperties: new CustomPropertiesImpl(correlationContextHeader)\n            };\n        }\n        return null;\n    };\n    /**\n     *  Runs a function inside a given Context.\n     *  All logical children of the execution path that entered this Context\n     *  will receive this Context object on calls to GetCurrentContext.\n     */\n    CorrelationContextManager.runWithContext = function (context, fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn, (_a = {}, _a[CorrelationContextManager.CONTEXT_NAME] = context, _a))();\n        }\n        else {\n            return fn();\n        }\n        var _a;\n    };\n    /**\n     * Wrapper for cls-hooked bindEmitter method\n     */\n    CorrelationContextManager.wrapEmitter = function (emitter) {\n        if (CorrelationContextManager.enabled) {\n            CorrelationContextManager.session.bindEmitter(emitter);\n        }\n    };\n    /**\n     *  Patches a callback to restore the correct Context when getCurrentContext\n     *  is run within it. This is necessary if automatic correlation fails to work\n     *  with user-included libraries.\n     *\n     *  The supplied callback will be given the same context that was present for\n     *  the call to wrapCallback.  */\n    CorrelationContextManager.wrapCallback = function (fn) {\n        if (CorrelationContextManager.enabled) {\n            return CorrelationContextManager.session.bind(fn);\n        }\n        return fn;\n    };\n    /**\n     *  Enables the CorrelationContextManager.\n     */\n    CorrelationContextManager.enable = function (forceClsHooked) {\n        if (this.enabled) {\n            return;\n        }\n        if (!this.isNodeVersionCompatible()) {\n            this.enabled = false;\n            return;\n        }\n        if (!CorrelationContextManager.hasEverEnabled) {\n            this.forceClsHooked = forceClsHooked;\n            this.hasEverEnabled = true;\n            if (typeof this.cls === \"undefined\") {\n                if ((CorrelationContextManager.forceClsHooked === true) || (CorrelationContextManager.forceClsHooked === undefined && CorrelationContextManager.shouldUseClsHooked())) {\n                    this.cls = require('cls-hooked');\n                }\n                else {\n                    this.cls = require('continuation-local-storage');\n                }\n            }\n            CorrelationContextManager.session = this.cls.createNamespace(\"AI-CLS-Session\");\n            DiagChannel.registerContextPreservation(function (cb) {\n                return CorrelationContextManager.session.bind(cb);\n            });\n        }\n        this.enabled = true;\n    };\n    /**\n     *  Disables the CorrelationContextManager.\n     */\n    CorrelationContextManager.disable = function () {\n        this.enabled = false;\n    };\n    /**\n     * Reset the namespace\n     */\n    CorrelationContextManager.reset = function () {\n        if (CorrelationContextManager.hasEverEnabled) {\n            CorrelationContextManager.session = null;\n            CorrelationContextManager.session = this.cls.createNamespace('AI-CLS-Session');\n        }\n    };\n    /**\n     *  Reports if CorrelationContextManager is able to run in this environment\n     */\n    CorrelationContextManager.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) > 3 || (parseInt(nodeVer[0]) > 2 && parseInt(nodeVer[1]) > 2);\n    };\n    /**\n     * We only want to use cls-hooked when it uses async_hooks api (8.2+), else\n     * use async-listener (plain -cls)\n     */\n    CorrelationContextManager.shouldUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 2);\n    };\n    /**\n     * A TypeError is triggered by cls-hooked for node [8.0, 8.2)\n     * @internal Used in tests only\n     */\n    CorrelationContextManager.canUseClsHooked = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        var greater800 = (parseInt(nodeVer[0]) > 8) || (parseInt(nodeVer[0]) >= 8 && parseInt(nodeVer[1]) >= 0);\n        var less820 = (parseInt(nodeVer[0]) < 8) || (parseInt(nodeVer[0]) <= 8 && parseInt(nodeVer[1]) < 2);\n        var greater470 = parseInt(nodeVer[0]) > 4 || (parseInt(nodeVer[0]) >= 4 && parseInt(nodeVer[1]) >= 7); // cls-hooked requires node 4.7+\n        return !(greater800 && less820) && greater470;\n    };\n    CorrelationContextManager.enabled = false;\n    CorrelationContextManager.hasEverEnabled = false;\n    CorrelationContextManager.forceClsHooked = undefined; // true: use cls-hooked, false: use cls, undefined: choose based on node version\n    CorrelationContextManager.CONTEXT_NAME = \"ApplicationInsights-Context\";\n    return CorrelationContextManager;\n}());\nexports.CorrelationContextManager = CorrelationContextManager;\nvar CustomPropertiesImpl = (function () {\n    function CustomPropertiesImpl(header) {\n        this.props = [];\n        this.addHeaderData(header);\n    }\n    CustomPropertiesImpl.prototype.addHeaderData = function (header) {\n        var keyvals = header ? header.split(\", \") : [];\n        this.props = keyvals.map(function (keyval) {\n            var parts = keyval.split(\"=\");\n            return { key: parts[0], value: parts[1] };\n        }).concat(this.props);\n    };\n    CustomPropertiesImpl.prototype.serializeToHeader = function () {\n        return this.props.map(function (keyval) {\n            return keyval.key + \"=\" + keyval.value;\n        }).join(\", \");\n    };\n    CustomPropertiesImpl.prototype.getProperty = function (prop) {\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                return keyval.value;\n            }\n        }\n        return;\n    };\n    // TODO: Strictly according to the spec, properties which are recieved from\n    // an incoming request should be left untouched, while we may add our own new\n    // properties. The logic here will need to change to track that.\n    CustomPropertiesImpl.prototype.setProperty = function (prop, val) {\n        if (CustomPropertiesImpl.bannedCharacters.test(prop) || CustomPropertiesImpl.bannedCharacters.test(val)) {\n            Logging.warn(\"Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: \" + prop + \" and value: \" + val);\n            return;\n        }\n        for (var i = 0; i < this.props.length; ++i) {\n            var keyval = this.props[i];\n            if (keyval.key === prop) {\n                keyval.value = val;\n                return;\n            }\n        }\n        this.props.push({ key: prop, value: val });\n    };\n    CustomPropertiesImpl.bannedCharacters = /[,=]/;\n    return CustomPropertiesImpl;\n}());\n//# sourceMappingURL=CorrelationContextManager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_BREEZE_ENDPOINT = \"https://dc.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_ENDPOINT = \"https://rt.services.visualstudio.com\";\nexports.DEFAULT_LIVEMETRICS_HOST = \"rt.services.visualstudio.com\";\nvar QuickPulseCounter;\n(function (QuickPulseCounter) {\n    // Memory\n    QuickPulseCounter[\"COMMITTED_BYTES\"] = \"\\\\Memory\\\\Committed Bytes\";\n    // CPU\n    QuickPulseCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    // Request\n    QuickPulseCounter[\"REQUEST_RATE\"] = \"\\\\ApplicationInsights\\\\Requests/Sec\";\n    QuickPulseCounter[\"REQUEST_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Requests Failed/Sec\";\n    QuickPulseCounter[\"REQUEST_DURATION\"] = \"\\\\ApplicationInsights\\\\Request Duration\";\n    // Dependency\n    QuickPulseCounter[\"DEPENDENCY_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_FAILURE_RATE\"] = \"\\\\ApplicationInsights\\\\Dependency Calls Failed/Sec\";\n    QuickPulseCounter[\"DEPENDENCY_DURATION\"] = \"\\\\ApplicationInsights\\\\Dependency Call Duration\";\n    // Exception\n    QuickPulseCounter[\"EXCEPTION_RATE\"] = \"\\\\ApplicationInsights\\\\Exceptions/Sec\";\n})(QuickPulseCounter = exports.QuickPulseCounter || (exports.QuickPulseCounter = {}));\nvar PerformanceCounter;\n(function (PerformanceCounter) {\n    // Memory\n    PerformanceCounter[\"PRIVATE_BYTES\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\Private Bytes\";\n    PerformanceCounter[\"AVAILABLE_BYTES\"] = \"\\\\Memory\\\\Available Bytes\";\n    // CPU\n    PerformanceCounter[\"PROCESSOR_TIME\"] = \"\\\\Processor(_Total)\\\\% Processor Time\";\n    PerformanceCounter[\"PROCESS_TIME\"] = \"\\\\Process(??APP_WIN32_PROC??)\\\\% Processor Time\";\n    // Requests\n    PerformanceCounter[\"REQUEST_RATE\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Requests/Sec\";\n    PerformanceCounter[\"REQUEST_DURATION\"] = \"\\\\ASP.NET Applications(??APP_W3SVC_PROC??)\\\\Request Execution Time\";\n})(PerformanceCounter = exports.PerformanceCounter || (exports.PerformanceCounter = {}));\n;\n/**\n * Map a PerformanceCounter/QuickPulseCounter to a QuickPulseCounter. If no mapping exists, mapping is *undefined*\n */\nexports.PerformanceToQuickPulseCounter = (_a = {},\n    _a[PerformanceCounter.PROCESSOR_TIME] = QuickPulseCounter.PROCESSOR_TIME,\n    _a[PerformanceCounter.REQUEST_RATE] = QuickPulseCounter.REQUEST_RATE,\n    _a[PerformanceCounter.REQUEST_DURATION] = QuickPulseCounter.REQUEST_DURATION,\n    // Remap quick pulse only counters\n    _a[QuickPulseCounter.COMMITTED_BYTES] = QuickPulseCounter.COMMITTED_BYTES,\n    _a[QuickPulseCounter.REQUEST_FAILURE_RATE] = QuickPulseCounter.REQUEST_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_RATE] = QuickPulseCounter.DEPENDENCY_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_FAILURE_RATE] = QuickPulseCounter.DEPENDENCY_FAILURE_RATE,\n    _a[QuickPulseCounter.DEPENDENCY_DURATION] = QuickPulseCounter.DEPENDENCY_DURATION,\n    _a[QuickPulseCounter.EXCEPTION_RATE] = QuickPulseCounter.EXCEPTION_RATE,\n    _a);\nexports.QuickPulseDocumentType = {\n    Event: \"Event\",\n    Exception: \"Exception\",\n    Trace: \"Trace\",\n    Metric: \"Metric\",\n    Request: \"Request\",\n    Dependency: \"RemoteDependency\",\n    Availability: \"Availability\"\n};\nexports.QuickPulseType = {\n    Event: \"EventTelemetryDocument\",\n    Exception: \"ExceptionTelemetryDocument\",\n    Trace: \"TraceTelemetryDocument\",\n    Metric: \"MetricTelemetryDocument\",\n    Request: \"RequestTelemetryDocument\",\n    Dependency: \"DependencyTelemetryDocument\",\n    Availability: \"AvailabilityTelemetryDocument\"\n};\nexports.TelemetryTypeStringToQuickPulseType = {\n    EventData: exports.QuickPulseType.Event,\n    ExceptionData: exports.QuickPulseType.Exception,\n    MessageData: exports.QuickPulseType.Trace,\n    MetricData: exports.QuickPulseType.Metric,\n    RequestData: exports.QuickPulseType.Request,\n    RemoteDependencyData: exports.QuickPulseType.Dependency,\n    AvailabilityData: exports.QuickPulseType.Availability\n};\nexports.TelemetryTypeStringToQuickPulseDocumentType = {\n    EventData: exports.QuickPulseDocumentType.Event,\n    ExceptionData: exports.QuickPulseDocumentType.Exception,\n    MessageData: exports.QuickPulseDocumentType.Trace,\n    MetricData: exports.QuickPulseDocumentType.Metric,\n    RequestData: exports.QuickPulseDocumentType.Request,\n    RemoteDependencyData: exports.QuickPulseDocumentType.Dependency,\n    AvailabilityData: exports.QuickPulseDocumentType.Availability\n};\nvar _a;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nmodule.exports = {\n    /**\n     * Request-Context header\n     */\n    requestContextHeader: \"request-context\",\n    /**\n     * Source instrumentation header that is added by an application while making http\n     * requests and retrieved by the other application when processing incoming requests.\n     */\n    requestContextSourceKey: \"appId\",\n    /**\n     * Target instrumentation header that is added to the response and retrieved by the\n     * calling application when processing incoming responses.\n     */\n    requestContextTargetKey: \"appId\",\n    /**\n     * Request-Id header\n     */\n    requestIdHeader: \"request-id\",\n    /**\n     * Legacy Header containing the id of the immidiate caller\n     */\n    parentIdHeader: \"x-ms-request-id\",\n    /**\n     * Legacy Header containing the correlation id that kept the same for every telemetry item\n     * accross transactions\n     */\n    rootIdHeader: \"x-ms-request-root-id\",\n    /**\n     * Correlation-Context header\n     *\n     * Not currently actively used, but the contents should be passed from incoming to outgoing requests\n     */\n    correlationContextHeader: \"correlation-context\",\n    /**\n     * W3C distributed tracing protocol header\n     */\n    traceparentHeader: \"traceparent\",\n    /**\n     * W3C distributed tracing protocol state header\n     */\n    traceStateHeader: \"tracestate\"\n};\n//# sourceMappingURL=RequestResponseHeaders.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpDependencyParser = require(\"./HttpDependencyParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Traceparent = require(\"../Library/Traceparent\");\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectHttpDependencies = (function () {\n    function AutoCollectHttpDependencies(client) {\n        if (!!AutoCollectHttpDependencies.INSTANCE) {\n            throw new Error(\"Client request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpDependencies.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpDependencies.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._initialize();\n        }\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/mongodb.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/mysql.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/redis.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/postgres.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectHttpDependencies.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpDependencies.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var originalGet = http.get;\n        var originalRequest = http.request;\n        var originalHttpsRequest = https.request;\n        var clientRequestPatch = function (request, options) {\n            var shouldCollect = !options[AutoCollectHttpDependencies.disableCollectionRequestOption] &&\n                !request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag];\n            request[AutoCollectHttpDependencies.alreadyAutoCollectedFlag] = true;\n            if (request && options && shouldCollect) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                AutoCollectHttpDependencies.trackRequest(_this._client, { options: options, request: request });\n            }\n        };\n        // On node >= v0.11.12 and < 9.0 (excluding 8.9.0) https.request just calls http.request (with additional options).\n        // On node < 0.11.12, 8.9.0, and 9.0 > https.request is handled separately\n        // Patch both and leave a flag to not double-count on versions that just call through\n        // We add the flag to both http and https to protect against strange double collection in other scenarios\n        http.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalRequest.call.apply(originalRequest, [http, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        https.request = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = originalHttpsRequest.call.apply(originalHttpsRequest, [https, options].concat(requestArgs));\n            clientRequestPatch(request, options);\n            return request;\n        };\n        // Node 8 calls http.request from http.get using a local reference!\n        // We have to patch .get manually in this case and can't just assume request is enough\n        // We have to replace the entire method in this case. We can't call the original.\n        // This is because calling the original will give us no chance to set headers as it internally does .end().\n        http.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = http.request).call.apply(_a, [http, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n        https.get = function (options) {\n            var requestArgs = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                requestArgs[_i - 1] = arguments[_i];\n            }\n            var request = (_a = https.request).call.apply(_a, [https, options].concat(requestArgs));\n            request.end();\n            return request;\n            var _a;\n        };\n    };\n    /**\n     * Tracks an outgoing request. Because it may set headers this method must be called before\n     * writing content to or ending the request.\n     */\n    AutoCollectHttpDependencies.trackRequest = function (client, telemetry) {\n        if (!telemetry.options || !telemetry.request || !client) {\n            Logging.info(\"AutoCollectHttpDependencies.trackRequest was called with invalid parameters: \", !telemetry.options, !telemetry.request, !client);\n            return;\n        }\n        var requestParser = new HttpDependencyParser(telemetry.options, telemetry.request);\n        var currentContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var uniqueRequestId;\n        var uniqueTraceparent;\n        if (currentContext && currentContext.operation && currentContext.operation.traceparent && Traceparent.isValidTraceId(currentContext.operation.traceparent.traceId)) {\n            currentContext.operation.traceparent.updateSpanId();\n            uniqueRequestId = currentContext.operation.traceparent.getBackCompatRequestId();\n        }\n        else if (CorrelationIdManager.w3cEnabled) {\n            // Start an operation now so that we can include the w3c headers in the outgoing request\n            var traceparent = new Traceparent();\n            uniqueTraceparent = traceparent.toString();\n            uniqueRequestId = traceparent.getBackCompatRequestId();\n        }\n        else {\n            uniqueRequestId = currentContext && currentContext.operation && (currentContext.operation.parentId + AutoCollectHttpDependencies.requestNumber++ + '.');\n        }\n        // Add the source correlationId to the request headers, if a value was not already provided.\n        // The getHeader/setHeader methods aren't available on very old Node versions, and\n        // are not included in the v0.10 type declarations currently used. So check if the\n        // methods exist before invoking them.\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl()) && telemetry.request.getHeader && telemetry.request.setHeader) {\n            if (client.config && client.config.correlationId) {\n                // getHeader returns \"any\" type in newer versions of node. In basic scenarios, this will be <string | string[] | number>, but could be modified to anything else via middleware\n                var correlationHeader = telemetry.request.getHeader(RequestResponseHeaders.requestContextHeader);\n                try {\n                    Util.safeIncludeCorrelationHeader(client, telemetry.request, correlationHeader);\n                }\n                catch (err) {\n                    Logging.warn(\"Request-Context header could not be set. Correlation of requests may be lost\", err);\n                }\n                if (currentContext && currentContext.operation) {\n                    try {\n                        telemetry.request.setHeader(RequestResponseHeaders.requestIdHeader, uniqueRequestId);\n                        // Also set legacy headers\n                        telemetry.request.setHeader(RequestResponseHeaders.parentIdHeader, currentContext.operation.id);\n                        telemetry.request.setHeader(RequestResponseHeaders.rootIdHeader, uniqueRequestId);\n                        // Set W3C headers, if available\n                        if (uniqueTraceparent || currentContext.operation.traceparent) {\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, uniqueTraceparent || currentContext.operation.traceparent.toString());\n                        }\n                        else if (CorrelationIdManager.w3cEnabled) {\n                            // should never get here since we set uniqueTraceparent above for the w3cEnabled scenario\n                            var traceparent = new Traceparent().toString();\n                            telemetry.request.setHeader(RequestResponseHeaders.traceparentHeader, traceparent);\n                        }\n                        if (currentContext.operation.tracestate) {\n                            var tracestate = currentContext.operation.tracestate.toString();\n                            if (tracestate) {\n                                telemetry.request.setHeader(RequestResponseHeaders.traceStateHeader, tracestate);\n                            }\n                        }\n                        var correlationContextHeader = currentContext.customProperties.serializeToHeader();\n                        if (correlationContextHeader) {\n                            telemetry.request.setHeader(RequestResponseHeaders.correlationContextHeader, correlationContextHeader);\n                        }\n                    }\n                    catch (err) {\n                        Logging.warn(\"Correlation headers could not be set. Correlation of requests may be lost.\", err);\n                    }\n                }\n            }\n        }\n        // Collect dependency telemetry about the request when it finishes.\n        if (telemetry.request.on) {\n            telemetry.request.on('response', function (response) {\n                requestParser.onResponse(response);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"http.ClientResponse\"] = response;\n                client.trackDependency(dependencyTelemetry);\n            });\n            telemetry.request.on('error', function (e) {\n                requestParser.onError(e);\n                var dependencyTelemetry = requestParser.getDependencyTelemetry(telemetry, uniqueRequestId);\n                dependencyTelemetry.contextObjects = dependencyTelemetry.contextObjects || {};\n                dependencyTelemetry.contextObjects[\"http.RequestOptions\"] = telemetry.options;\n                dependencyTelemetry.contextObjects[\"http.ClientRequest\"] = telemetry.request;\n                dependencyTelemetry.contextObjects[\"Error\"] = e;\n                client.trackDependency(dependencyTelemetry);\n            });\n        }\n    };\n    AutoCollectHttpDependencies.prototype.dispose = function () {\n        AutoCollectHttpDependencies.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectHttpDependencies.disableCollectionRequestOption = 'disableAppInsightsAutoCollection';\n    AutoCollectHttpDependencies.requestNumber = 1;\n    AutoCollectHttpDependencies.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpDependencies;\n}());\nmodule.exports = AutoCollectHttpDependencies;\n//# sourceMappingURL=HttpDependencies.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Logging = require(\"../../Library/Logging\");\nexports.IsInitialized = !process.env[\"APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL\"];\nvar TAG = \"DiagnosticChannel\";\nif (exports.IsInitialized) {\n    var publishers = require(\"diagnostic-channel-publishers\");\n    var individualOptOuts = process.env[\"APPLICATION_INSIGHTS_NO_PATCH_MODULES\"] || \"\";\n    var unpatchedModules = individualOptOuts.split(\",\");\n    var modules = {\n        bunyan: publishers.bunyan,\n        console: publishers.console,\n        mongodb: publishers.mongodb,\n        mongodbCore: publishers.mongodbCore,\n        mysql: publishers.mysql,\n        redis: publishers.redis,\n        pg: publishers.pg,\n        pgPool: publishers.pgPool,\n        winston: publishers.winston\n    };\n    for (var mod in modules) {\n        if (unpatchedModules.indexOf(mod) === -1) {\n            modules[mod].enable();\n            Logging.info(TAG, \"Subscribed to \" + mod + \" events\");\n        }\n    }\n    if (unpatchedModules.length > 0) {\n        Logging.info(TAG, \"Some modules will not be patched\", unpatchedModules);\n    }\n}\nelse {\n    Logging.info(TAG, \"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set\");\n}\nfunction registerContextPreservation(cb) {\n    if (!exports.IsInitialized) {\n        return;\n    }\n    require(\"diagnostic-channel\").channel.addContextPreservation(cb);\n}\nexports.registerContextPreservation = registerContextPreservation;\n//# sourceMappingURL=initialization.js.map","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","module.exports = require(\"util\");","module.exports = require(\"assert\");","'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n","'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n","\"use strict\";\nvar os = require(\"os\");\nvar Constants = require(\"../Declarations/Constants\");\nvar AutoCollectPerformance = (function () {\n    /**\n     * @param enableLiveMetricsCounters - enable sending additional live metrics information (dependency metrics, exception metrics, committed memory)\n     */\n    function AutoCollectPerformance(client, collectionInterval, enableLiveMetricsCounters) {\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (enableLiveMetricsCounters === void 0) { enableLiveMetricsCounters = false; }\n        this._lastIntervalRequestExecutionTime = 0; // the sum of durations which took place during from app start until last interval\n        this._lastIntervalDependencyExecutionTime = 0;\n        if (!AutoCollectPerformance.INSTANCE) {\n            AutoCollectPerformance.INSTANCE = this;\n        }\n        this._isInitialized = false;\n        this._client = client;\n        this._collectionInterval = collectionInterval;\n        this._enableLiveMetricsCounters = enableLiveMetricsCounters;\n    }\n    AutoCollectPerformance.prototype.enable = function (isEnabled, collectionInterval) {\n        var _this = this;\n        this._isEnabled = isEnabled;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        if (isEnabled) {\n            if (!this._handle) {\n                this._lastCpus = os.cpus();\n                this._lastRequests = {\n                    totalRequestCount: AutoCollectPerformance._totalRequestCount,\n                    totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n                    time: +new Date\n                };\n                this._lastDependencies = {\n                    totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                    totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                    time: +new Date\n                };\n                this._lastExceptions = {\n                    totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                    time: +new Date\n                };\n                if (typeof process.cpuUsage === 'function') {\n                    this._lastAppCpuUsage = process.cpuUsage();\n                }\n                this._lastHrtime = process.hrtime();\n                this._collectionInterval = collectionInterval || this._collectionInterval;\n                this._handle = setInterval(function () { return _this.trackPerformance(); }, this._collectionInterval);\n                this._handle.unref(); // Allow the app to terminate even while this loop is going on\n            }\n        }\n        else {\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    AutoCollectPerformance.countRequest = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalRequestExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedRequestCount++;\n        }\n        AutoCollectPerformance._totalRequestCount++;\n    };\n    AutoCollectPerformance.countException = function () {\n        AutoCollectPerformance._totalExceptionCount++;\n    };\n    AutoCollectPerformance.countDependency = function (duration, success) {\n        var durationMs;\n        if (!AutoCollectPerformance.isEnabled()) {\n            return;\n        }\n        if (typeof duration === 'string') {\n            // dependency duration is passed in as \"00:00:00.123\" by autocollectors\n            durationMs = +new Date('1970-01-01T' + duration + 'Z'); // convert to num ms, returns NaN if wrong\n        }\n        else if (typeof duration === 'number') {\n            durationMs = duration;\n        }\n        else {\n            return;\n        }\n        AutoCollectPerformance._intervalDependencyExecutionTime += durationMs;\n        if (success === false) {\n            AutoCollectPerformance._totalFailedDependencyCount++;\n        }\n        AutoCollectPerformance._totalDependencyCount++;\n    };\n    AutoCollectPerformance.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectPerformance.isEnabled = function () {\n        return AutoCollectPerformance.INSTANCE && AutoCollectPerformance.INSTANCE._isEnabled;\n    };\n    AutoCollectPerformance.prototype.trackPerformance = function () {\n        this._trackCpu();\n        this._trackMemory();\n        this._trackNetwork();\n        this._trackDependencyRate();\n        this._trackExceptionRate();\n    };\n    AutoCollectPerformance.prototype._trackCpu = function () {\n        // this reports total ms spent in each category since the OS was booted, to calculate percent it is necessary\n        // to find the delta since the last measurement\n        var cpus = os.cpus();\n        if (cpus && cpus.length && this._lastCpus && cpus.length === this._lastCpus.length) {\n            var totalUser = 0;\n            var totalSys = 0;\n            var totalNice = 0;\n            var totalIdle = 0;\n            var totalIrq = 0;\n            for (var i = 0; !!cpus && i < cpus.length; i++) {\n                var cpu = cpus[i];\n                var lastCpu = this._lastCpus[i];\n                var name = \"% cpu(\" + i + \") \";\n                var model = cpu.model;\n                var speed = cpu.speed;\n                var times = cpu.times;\n                var lastTimes = lastCpu.times;\n                // user cpu time (or) % CPU time spent in user space\n                var user = (times.user - lastTimes.user) || 0;\n                totalUser += user;\n                // system cpu time (or) % CPU time spent in kernel space\n                var sys = (times.sys - lastTimes.sys) || 0;\n                totalSys += sys;\n                // user nice cpu time (or) % CPU time spent on low priority processes\n                var nice = (times.nice - lastTimes.nice) || 0;\n                totalNice += nice;\n                // idle cpu time (or) % CPU time spent idle\n                var idle = (times.idle - lastTimes.idle) || 0;\n                totalIdle += idle;\n                // irq (or) % CPU time spent servicing/handling hardware interrupts\n                var irq = (times.irq - lastTimes.irq) || 0;\n                totalIrq += irq;\n            }\n            // Calculate % of total cpu time (user + system) this App Process used (Only supported by node v6.1.0+)\n            var appCpuPercent = undefined;\n            if (typeof process.cpuUsage === 'function') {\n                var appCpuUsage = process.cpuUsage();\n                var hrtime = process.hrtime();\n                var totalApp = ((appCpuUsage.user - this._lastAppCpuUsage.user) + (appCpuUsage.system - this._lastAppCpuUsage.system)) || 0;\n                if (typeof this._lastHrtime !== 'undefined' && this._lastHrtime.length === 2) {\n                    var elapsedTime = ((hrtime[0] - this._lastHrtime[0]) * 1e6 + (hrtime[1] - this._lastHrtime[1]) / 1e3) || 0; // convert to microseconds\n                    appCpuPercent = 100 * totalApp / (elapsedTime * cpus.length);\n                }\n                // Set previous\n                this._lastAppCpuUsage = appCpuUsage;\n                this._lastHrtime = hrtime;\n            }\n            var combinedTotal = (totalUser + totalSys + totalNice + totalIdle + totalIrq) || 1;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESSOR_TIME, value: ((combinedTotal - totalIdle) / combinedTotal) * 100 });\n            this._client.trackMetric({ name: Constants.PerformanceCounter.PROCESS_TIME, value: appCpuPercent || ((totalUser / combinedTotal) * 100) });\n        }\n        this._lastCpus = cpus;\n    };\n    AutoCollectPerformance.prototype._trackMemory = function () {\n        var freeMem = os.freemem();\n        var usedMem = process.memoryUsage().rss;\n        var committedMemory = os.totalmem() - freeMem;\n        this._client.trackMetric({ name: Constants.PerformanceCounter.PRIVATE_BYTES, value: usedMem });\n        this._client.trackMetric({ name: Constants.PerformanceCounter.AVAILABLE_BYTES, value: freeMem });\n        // Only supported by quickpulse service\n        if (this._enableLiveMetricsCounters) {\n            this._client.trackMetric({ name: Constants.QuickPulseCounter.COMMITTED_BYTES, value: committedMemory });\n        }\n    };\n    AutoCollectPerformance.prototype._trackNetwork = function () {\n        // track total request counters\n        var lastRequests = this._lastRequests;\n        var requests = {\n            totalRequestCount: AutoCollectPerformance._totalRequestCount,\n            totalFailedRequestCount: AutoCollectPerformance._totalFailedRequestCount,\n            time: +new Date\n        };\n        var intervalRequests = (requests.totalRequestCount - lastRequests.totalRequestCount) || 0;\n        var intervalFailedRequests = (requests.totalFailedRequestCount - lastRequests.totalFailedRequestCount) || 0;\n        var elapsedMs = requests.time - lastRequests.time;\n        var elapsedSeconds = elapsedMs / 1000;\n        var averageRequestExecutionTime = ((AutoCollectPerformance._intervalRequestExecutionTime - this._lastIntervalRequestExecutionTime) / intervalRequests) || 0; // default to 0 in case no requests in this interval\n        this._lastIntervalRequestExecutionTime = AutoCollectPerformance._intervalRequestExecutionTime; // reset\n        if (elapsedMs > 0) {\n            var requestsPerSec = intervalRequests / elapsedSeconds;\n            var failedRequestsPerSec = intervalFailedRequests / elapsedSeconds;\n            this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_RATE, value: requestsPerSec });\n            // Only send duration to live metrics if it has been updated!\n            if (!this._enableLiveMetricsCounters || intervalRequests > 0) {\n                this._client.trackMetric({ name: Constants.PerformanceCounter.REQUEST_DURATION, value: averageRequestExecutionTime });\n            }\n            // Only supported by quickpulse service\n            if (this._enableLiveMetricsCounters) {\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.REQUEST_FAILURE_RATE, value: failedRequestsPerSec });\n            }\n        }\n        this._lastRequests = requests;\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackDependencyRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastDependencies = this._lastDependencies;\n            var dependencies = {\n                totalDependencyCount: AutoCollectPerformance._totalDependencyCount,\n                totalFailedDependencyCount: AutoCollectPerformance._totalFailedDependencyCount,\n                time: +new Date\n            };\n            var intervalDependencies = (dependencies.totalDependencyCount - lastDependencies.totalDependencyCount) || 0;\n            var intervalFailedDependencies = (dependencies.totalFailedDependencyCount - lastDependencies.totalFailedDependencyCount) || 0;\n            var elapsedMs = dependencies.time - lastDependencies.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            var averageDependencyExecutionTime = ((AutoCollectPerformance._intervalDependencyExecutionTime - this._lastIntervalDependencyExecutionTime) / intervalDependencies) || 0;\n            this._lastIntervalDependencyExecutionTime = AutoCollectPerformance._intervalDependencyExecutionTime; // reset\n            if (elapsedMs > 0) {\n                var dependenciesPerSec = intervalDependencies / elapsedSeconds;\n                var failedDependenciesPerSec = intervalFailedDependencies / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_RATE, value: dependenciesPerSec });\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_FAILURE_RATE, value: failedDependenciesPerSec });\n                // redundant check for livemetrics, but kept for consistency w/ requests\n                // Only send duration to live metrics if it has been updated!\n                if (!this._enableLiveMetricsCounters || intervalDependencies > 0) {\n                    this._client.trackMetric({ name: Constants.QuickPulseCounter.DEPENDENCY_DURATION, value: averageDependencyExecutionTime });\n                }\n            }\n            this._lastDependencies = dependencies;\n        }\n    };\n    // Static counter is accumulated externally. Report the rate to client here\n    // Note: This is currently only used with QuickPulse client\n    AutoCollectPerformance.prototype._trackExceptionRate = function () {\n        if (this._enableLiveMetricsCounters) {\n            var lastExceptions = this._lastExceptions;\n            var exceptions = {\n                totalExceptionCount: AutoCollectPerformance._totalExceptionCount,\n                time: +new Date\n            };\n            var intervalExceptions = (exceptions.totalExceptionCount - lastExceptions.totalExceptionCount) || 0;\n            var elapsedMs = exceptions.time - lastExceptions.time;\n            var elapsedSeconds = elapsedMs / 1000;\n            if (elapsedMs > 0) {\n                var exceptionsPerSec = intervalExceptions / elapsedSeconds;\n                this._client.trackMetric({ name: Constants.QuickPulseCounter.EXCEPTION_RATE, value: exceptionsPerSec });\n            }\n            this._lastExceptions = exceptions;\n        }\n    };\n    AutoCollectPerformance.prototype.dispose = function () {\n        AutoCollectPerformance.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectPerformance._totalRequestCount = 0;\n    AutoCollectPerformance._totalFailedRequestCount = 0;\n    AutoCollectPerformance._lastRequestExecutionTime = 0;\n    AutoCollectPerformance._totalDependencyCount = 0;\n    AutoCollectPerformance._totalFailedDependencyCount = 0;\n    AutoCollectPerformance._lastDependencyExecutionTime = 0;\n    AutoCollectPerformance._totalExceptionCount = 0;\n    AutoCollectPerformance._intervalDependencyExecutionTime = 0;\n    AutoCollectPerformance._intervalRequestExecutionTime = 0;\n    return AutoCollectPerformance;\n}());\nmodule.exports = AutoCollectPerformance;\n//# sourceMappingURL=Performance.js.map","\"use strict\";\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\nvar ConnectionStringParser = require(\"./ConnectionStringParser\");\nvar Constants = require(\"../Declarations/Constants\");\nvar url = require(\"url\");\nvar Config = (function () {\n    function Config(setupString) {\n        var _this = this;\n        this.endpointBase = Constants.DEFAULT_BREEZE_ENDPOINT;\n        var connectionStringEnv = process.env[Config.ENV_connectionString];\n        var csCode = ConnectionStringParser.parse(setupString);\n        var csEnv = ConnectionStringParser.parse(connectionStringEnv);\n        var iKeyCode = !csCode.instrumentationkey && Object.keys(csCode).length > 0\n            ? null // CS was valid but instrumentation key was not provided, null and grab from env var\n            : setupString; // CS was invalid, so it must be an ikey\n        this.instrumentationKey = csCode.instrumentationkey || iKeyCode /* === instrumentationKey */ || csEnv.instrumentationkey || Config._getInstrumentationKey();\n        this.endpointUrl = (csCode.ingestionendpoint || csEnv.ingestionendpoint || this.endpointBase) + \"/v2/track\";\n        this.maxBatchSize = 250;\n        this.maxBatchIntervalMs = 15000;\n        this.disableAppInsights = false;\n        this.samplingPercentage = 100;\n        this.correlationIdRetryIntervalMs = 30 * 1000;\n        this.correlationHeaderExcludedDomains = [\n            \"*.core.windows.net\",\n            \"*.core.chinacloudapi.cn\",\n            \"*.core.cloudapi.de\",\n            \"*.core.usgovcloudapi.net\",\n            \"*.core.microsoft.scloud\",\n            \"*.core.eaglex.ic.gov\"\n        ];\n        this.setCorrelationId = function (correlationId) { return _this.correlationId = correlationId; };\n        this.proxyHttpUrl = process.env[Config.ENV_http_proxy] || undefined;\n        this.proxyHttpsUrl = process.env[Config.ENV_https_proxy] || undefined;\n        this.httpAgent = undefined;\n        this.httpsAgent = undefined;\n        this.profileQueryEndpoint = csCode.ingestionendpoint || csEnv.ingestionendpoint || process.env[Config.ENV_profileQueryEndpoint] || this.endpointBase;\n        this._quickPulseHost = csCode.liveendpoint || csEnv.liveendpoint || process.env[Config.ENV_quickPulseHost] || Constants.DEFAULT_LIVEMETRICS_HOST;\n        // Parse quickPulseHost if it startswith http(s)://\n        if (this._quickPulseHost.match(/^https?:\\/\\//)) {\n            this._quickPulseHost = url.parse(this._quickPulseHost).host;\n        }\n    }\n    Object.defineProperty(Config.prototype, \"profileQueryEndpoint\", {\n        get: function () {\n            return this._profileQueryEndpoint;\n        },\n        set: function (endpoint) {\n            CorrelationIdManager.cancelCorrelationIdQuery(this, this.setCorrelationId);\n            this._profileQueryEndpoint = endpoint;\n            this.correlationId = CorrelationIdManager.correlationIdPrefix; // Reset the correlationId while we wait for the new query\n            CorrelationIdManager.queryCorrelationId(this, this.setCorrelationId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Config.prototype, \"quickPulseHost\", {\n        get: function () {\n            return this._quickPulseHost;\n        },\n        set: function (host) {\n            this._quickPulseHost = host;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Config._getInstrumentationKey = function () {\n        // check for both the documented env variable and the azure-prefixed variable\n        var iKey = process.env[Config.ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.ENV_iKey]\n            || process.env[Config.legacy_ENV_iKey]\n            || process.env[Config.ENV_azurePrefix + Config.legacy_ENV_iKey];\n        if (!iKey || iKey == \"\") {\n            throw new Error(\"Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server\");\n        }\n        return iKey;\n    };\n    // Azure adds this prefix to all environment variables\n    Config.ENV_azurePrefix = \"APPSETTING_\";\n    // This key is provided in the readme\n    Config.ENV_iKey = \"APPINSIGHTS_INSTRUMENTATIONKEY\";\n    Config.legacy_ENV_iKey = \"APPINSIGHTS_INSTRUMENTATION_KEY\";\n    Config.ENV_profileQueryEndpoint = \"APPINSIGHTS_PROFILE_QUERY_ENDPOINT\";\n    Config.ENV_quickPulseHost = \"APPINSIGHTS_QUICKPULSE_HOST\";\n    // Azure Connection String\n    Config.ENV_connectionString = \"APPLICATIONINSIGHTS_CONNECTION_STRING\";\n    // Native Metrics Opt Outs\n    Config.ENV_nativeMetricsDisablers = \"APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC\";\n    Config.ENV_nativeMetricsDisableAll = \"APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS\";\n    Config.ENV_http_proxy = \"http_proxy\";\n    Config.ENV_https_proxy = \"https_proxy\";\n    return Config;\n}());\nmodule.exports = Config;\n//# sourceMappingURL=Config.js.map","\"use strict\";\nvar os = require(\"os\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Logging = require(\"./Logging\");\nvar Context = (function () {\n    function Context(packageJsonPath) {\n        this.keys = new Contracts.ContextTagKeys();\n        this.tags = {};\n        this._loadApplicationContext();\n        this._loadDeviceContext();\n        this._loadInternalContext();\n    }\n    Context.prototype._loadApplicationContext = function (packageJsonPath) {\n        // note: this should return the host package.json\n        packageJsonPath = packageJsonPath || path.resolve(__dirname, \"../../../../package.json\");\n        if (!Context.appVersion[packageJsonPath]) {\n            Context.appVersion[packageJsonPath] = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.appVersion[packageJsonPath] = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.applicationVersion] = Context.appVersion[packageJsonPath];\n    };\n    Context.prototype._loadDeviceContext = function () {\n        this.tags[this.keys.deviceId] = \"\";\n        this.tags[this.keys.cloudRoleInstance] = os && os.hostname();\n        this.tags[this.keys.deviceOSVersion] = os && (os.type() + \" \" + os.release());\n        this.tags[this.keys.cloudRole] = Context.DefaultRoleName;\n        // not yet supported tags\n        this.tags[\"ai.device.osArchitecture\"] = os && os.arch();\n        this.tags[\"ai.device.osPlatform\"] = os && os.platform();\n    };\n    Context.prototype._loadInternalContext = function () {\n        // note: this should return the sdk package.json\n        var packageJsonPath = path.resolve(__dirname, \"../../package.json\");\n        if (!Context.sdkVersion) {\n            Context.sdkVersion = \"unknown\";\n            try {\n                var packageJson = JSON.parse(fs.readFileSync(packageJsonPath, \"utf8\"));\n                if (packageJson && typeof packageJson.version === \"string\") {\n                    Context.sdkVersion = packageJson.version;\n                }\n            }\n            catch (exception) {\n                Logging.info(\"unable to read app version: \", exception);\n            }\n        }\n        this.tags[this.keys.internalSdkVersion] = \"node:\" + Context.sdkVersion;\n    };\n    Context.DefaultRoleName = \"Web\";\n    Context.appVersion = {};\n    Context.sdkVersion = null;\n    return Context;\n}());\nmodule.exports = Context;\n//# sourceMappingURL=Context.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\n\ntype LogLevel = 'Info' | 'Error';\n\nclass Log {\n\tprivate output: vscode.OutputChannel;\n\n\tconstructor() {\n\t\tthis.output = vscode.window.createOutputChannel('Microsoft Authentication');\n\t}\n\n\tprivate data2String(data: any): string {\n\t\tif (data instanceof Error) {\n\t\t\treturn data.stack || data.message;\n\t\t}\n\t\tif (data.success === false && data.message) {\n\t\t\treturn data.message;\n\t\t}\n\t\treturn data.toString();\n\t}\n\n\tpublic info(message: string, data?: any): void {\n\t\tthis.logLevel('Info', message, data);\n\t}\n\n\tpublic error(message: string, data?: any): void {\n\t\tthis.logLevel('Error', message, data);\n\t}\n\n\tpublic logLevel(level: LogLevel, message: string, data?: any): void {\n\t\tthis.output.appendLine(`[${level}  - ${this.now()}] ${message}`);\n\t\tif (data) {\n\t\t\tthis.output.appendLine(this.data2String(data));\n\t\t}\n\t}\n\n\tprivate now(): string {\n\t\tconst now = new Date();\n\t\treturn padLeft(now.getUTCHours() + '', 2, '0')\n\t\t\t+ ':' + padLeft(now.getMinutes() + '', 2, '0')\n\t\t\t+ ':' + padLeft(now.getUTCSeconds() + '', 2, '0') + '.' + now.getMilliseconds();\n\t}\n}\n\nfunction padLeft(s: string, n: number, pad = ' ') {\n\treturn pad.repeat(Math.max(0, n - s.length)) + s;\n}\n\nconst Logger = new Log();\nexport default Logger;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar fs = require(\"fs\");\r\nvar toString = Object.prototype.toString;\r\nfunction isDefined(value) {\r\n    return typeof value !== 'undefined';\r\n}\r\nfunction isNumber(value) {\r\n    return toString.call(value) === '[object Number]';\r\n}\r\nfunction isString(value) {\r\n    return toString.call(value) === '[object String]';\r\n}\r\nfunction isBoolean(value) {\r\n    return value === true || value === false;\r\n}\r\nfunction readJsonFileSync(filename) {\r\n    return JSON.parse(fs.readFileSync(filename, 'utf8'));\r\n}\r\nvar MessageFormat;\r\n(function (MessageFormat) {\r\n    MessageFormat[\"file\"] = \"file\";\r\n    MessageFormat[\"bundle\"] = \"bundle\";\r\n    MessageFormat[\"both\"] = \"both\";\r\n})(MessageFormat = exports.MessageFormat || (exports.MessageFormat = {}));\r\nvar BundleFormat;\r\n(function (BundleFormat) {\r\n    // the nls.bundle format\r\n    BundleFormat[\"standalone\"] = \"standalone\";\r\n    BundleFormat[\"languagePack\"] = \"languagePack\";\r\n})(BundleFormat = exports.BundleFormat || (exports.BundleFormat = {}));\r\nvar LocalizeInfo;\r\n(function (LocalizeInfo) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && isDefined(candidate.key) && isDefined(candidate.comment);\r\n    }\r\n    LocalizeInfo.is = is;\r\n})(LocalizeInfo || (LocalizeInfo = {}));\r\nvar resolvedLanguage;\r\nvar resolvedBundles;\r\nvar options;\r\nvar isPseudo;\r\nfunction initializeSettings() {\r\n    options = { locale: undefined, language: undefined, languagePackSupport: false, cacheLanguageResolution: true, messageFormat: MessageFormat.bundle };\r\n    if (isString(process.env.VSCODE_NLS_CONFIG)) {\r\n        try {\r\n            var vscodeOptions = JSON.parse(process.env.VSCODE_NLS_CONFIG);\r\n            var language = void 0;\r\n            var locale = void 0;\r\n            if (vscodeOptions.availableLanguages) {\r\n                var value = vscodeOptions.availableLanguages['*'];\r\n                if (isString(value)) {\r\n                    language = value;\r\n                }\r\n            }\r\n            if (isString(vscodeOptions.locale)) {\r\n                options.locale = vscodeOptions.locale.toLowerCase();\r\n            }\r\n            if (language === undefined) {\r\n                options.language = options.locale;\r\n            }\r\n            else if (language !== 'en') {\r\n                options.language = language;\r\n            }\r\n            if (isBoolean(vscodeOptions._languagePackSupport)) {\r\n                options.languagePackSupport = vscodeOptions._languagePackSupport;\r\n            }\r\n            if (isString(vscodeOptions._cacheRoot)) {\r\n                options.cacheRoot = vscodeOptions._cacheRoot;\r\n            }\r\n            if (isString(vscodeOptions._languagePackId)) {\r\n                options.languagePackId = vscodeOptions._languagePackId;\r\n            }\r\n            if (isString(vscodeOptions._translationsConfigFile)) {\r\n                options.translationsConfigFile = vscodeOptions._translationsConfigFile;\r\n                try {\r\n                    options.translationsConfig = readJsonFileSync(options.translationsConfigFile);\r\n                }\r\n                catch (error) {\r\n                    // We can't read the translation config file. Mark the cache as corrupted.\r\n                    if (vscodeOptions._corruptedFile) {\r\n                        fs.writeFile(vscodeOptions._corruptedFile, 'corrupted', 'utf8', function (err) {\r\n                            console.error(err);\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (_a) {\r\n            // Do nothing.\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    resolvedLanguage = undefined;\r\n    resolvedBundles = Object.create(null);\r\n}\r\ninitializeSettings();\r\nfunction supportsLanguagePack() {\r\n    return options.languagePackSupport === true && options.cacheRoot !== undefined && options.languagePackId !== undefined && options.translationsConfigFile !== undefined\r\n        && options.translationsConfig !== undefined;\r\n}\r\nfunction format(message, args) {\r\n    var result;\r\n    if (isPseudo) {\r\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\r\n        message = '\\uFF3B' + message.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\r\n    }\r\n    if (args.length === 0) {\r\n        result = message;\r\n    }\r\n    else {\r\n        result = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\r\n            var index = rest[0];\r\n            var arg = args[index];\r\n            var replacement = match;\r\n            if (typeof arg === 'string') {\r\n                replacement = arg;\r\n            }\r\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\r\n                replacement = String(arg);\r\n            }\r\n            return replacement;\r\n        });\r\n    }\r\n    return result;\r\n}\r\nfunction createScopedLocalizeFunction(messages) {\r\n    return function (key, message) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        if (isNumber(key)) {\r\n            if (key >= messages.length) {\r\n                console.error(\"Broken localize call found. Index out of bounds. Stacktrace is\\n: \" + new Error('').stack);\r\n                return;\r\n            }\r\n            return format(messages[key], args);\r\n        }\r\n        else {\r\n            if (isString(message)) {\r\n                console.warn(\"Message \" + message + \" didn't get externalized correctly.\");\r\n                return format(message, args);\r\n            }\r\n            else {\r\n                console.error(\"Broken localize call found. Stacktrace is\\n: \" + new Error('').stack);\r\n            }\r\n        }\r\n    };\r\n}\r\nfunction localize(key, message) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    return format(message, args);\r\n}\r\nfunction resolveLanguage(file) {\r\n    var resolvedLanguage;\r\n    if (options.cacheLanguageResolution && resolvedLanguage) {\r\n        resolvedLanguage = resolvedLanguage;\r\n    }\r\n    else {\r\n        if (isPseudo || !options.language) {\r\n            resolvedLanguage = '.nls.json';\r\n        }\r\n        else {\r\n            var locale = options.language;\r\n            while (locale) {\r\n                var candidate = '.nls.' + locale + '.json';\r\n                if (fs.existsSync(file + candidate)) {\r\n                    resolvedLanguage = candidate;\r\n                    break;\r\n                }\r\n                else {\r\n                    var index = locale.lastIndexOf('-');\r\n                    if (index > 0) {\r\n                        locale = locale.substring(0, index);\r\n                    }\r\n                    else {\r\n                        resolvedLanguage = '.nls.json';\r\n                        locale = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (options.cacheLanguageResolution) {\r\n            resolvedLanguage = resolvedLanguage;\r\n        }\r\n    }\r\n    return file + resolvedLanguage;\r\n}\r\nfunction findInTheBoxBundle(root) {\r\n    var language = options.language;\r\n    while (language) {\r\n        var candidate = path.join(root, \"nls.bundle.\" + language + \".json\");\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n        else {\r\n            var index = language.lastIndexOf('-');\r\n            if (index > 0) {\r\n                language = language.substring(0, index);\r\n            }\r\n            else {\r\n                language = undefined;\r\n            }\r\n        }\r\n    }\r\n    // Test if we can reslove the default bundle.\r\n    if (language === undefined) {\r\n        var candidate = path.join(root, 'nls.bundle.json');\r\n        if (fs.existsSync(candidate)) {\r\n            return candidate;\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\nfunction mkdir(directory) {\r\n    try {\r\n        fs.mkdirSync(directory);\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'EEXIST') {\r\n            return;\r\n        }\r\n        else if (err.code === 'ENOENT') {\r\n            var parent = path.dirname(directory);\r\n            if (parent !== directory) {\r\n                mkdir(parent);\r\n                fs.mkdirSync(directory);\r\n            }\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nfunction createDefaultNlsBundle(folder) {\r\n    var metaData = readJsonFileSync(path.join(folder, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_1 in metaData) {\r\n        var entry = metaData[module_1];\r\n        result[module_1] = entry.messages;\r\n    }\r\n    return result;\r\n}\r\nfunction createNLSBundle(header, metaDataPath) {\r\n    var languagePackLocation = options.translationsConfig[header.id];\r\n    if (!languagePackLocation) {\r\n        return undefined;\r\n    }\r\n    var languagePack = readJsonFileSync(languagePackLocation).contents;\r\n    var metaData = readJsonFileSync(path.join(metaDataPath, 'nls.metadata.json'));\r\n    var result = Object.create(null);\r\n    for (var module_2 in metaData) {\r\n        var entry = metaData[module_2];\r\n        var translations = languagePack[header.outDir + \"/\" + module_2];\r\n        if (translations) {\r\n            var resultMessages = [];\r\n            for (var i = 0; i < entry.keys.length; i++) {\r\n                var messageKey = entry.keys[i];\r\n                var key = isString(messageKey) ? messageKey : messageKey.key;\r\n                var translatedMessage = translations[key];\r\n                if (translatedMessage === undefined) {\r\n                    translatedMessage = entry.messages[i];\r\n                }\r\n                resultMessages.push(translatedMessage);\r\n            }\r\n            result[module_2] = resultMessages;\r\n        }\r\n        else {\r\n            result[module_2] = entry.messages;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction touch(file) {\r\n    var d = new Date();\r\n    fs.utimes(file, d, d, function () {\r\n        // Do nothing. Ignore\r\n    });\r\n}\r\nfunction cacheBundle(key, bundle) {\r\n    resolvedBundles[key] = bundle;\r\n    return bundle;\r\n}\r\nfunction loadNlsBundleOrCreateFromI18n(header, bundlePath) {\r\n    var result;\r\n    var bundle = path.join(options.cacheRoot, header.id + \"-\" + header.hash + \".json\");\r\n    var useMemoryOnly = false;\r\n    var writeBundle = false;\r\n    try {\r\n        result = JSON.parse(fs.readFileSync(bundle, { encoding: 'utf8', flag: 'r' }));\r\n        touch(bundle);\r\n        return result;\r\n    }\r\n    catch (err) {\r\n        if (err.code === 'ENOENT') {\r\n            writeBundle = true;\r\n        }\r\n        else if (err instanceof SyntaxError) {\r\n            // We have a syntax error. So no valid JSON. Use\r\n            console.log(\"Syntax error parsing message bundle: \" + err.message + \".\");\r\n            fs.unlink(bundle, function (err) {\r\n                if (err) {\r\n                    console.error(\"Deleting corrupted bundle \" + bundle + \" failed.\");\r\n                }\r\n            });\r\n            useMemoryOnly = true;\r\n        }\r\n        else {\r\n            throw err;\r\n        }\r\n    }\r\n    result = createNLSBundle(header, bundlePath);\r\n    if (!result || useMemoryOnly) {\r\n        return result;\r\n    }\r\n    if (writeBundle) {\r\n        try {\r\n            fs.writeFileSync(bundle, JSON.stringify(result), { encoding: 'utf8', flag: 'wx' });\r\n        }\r\n        catch (err) {\r\n            if (err.code === 'EEXIST') {\r\n                return result;\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadDefaultNlsBundle(bundlePath) {\r\n    try {\r\n        return createDefaultNlsBundle(bundlePath);\r\n    }\r\n    catch (err) {\r\n        console.log(\"Generating default bundle from meta data failed.\", err);\r\n        return undefined;\r\n    }\r\n}\r\nfunction loadNlsBundle(header, bundlePath) {\r\n    var result;\r\n    // Core decided to use a language pack. Do the same in the extension\r\n    if (supportsLanguagePack()) {\r\n        try {\r\n            result = loadNlsBundleOrCreateFromI18n(header, bundlePath);\r\n        }\r\n        catch (err) {\r\n            console.log(\"Load or create bundle failed \", err);\r\n        }\r\n    }\r\n    if (!result) {\r\n        // No language pack found, but core is running in language pack mode\r\n        // Don't try to use old in the box bundles since the might be stale\r\n        // Fall right back to the default bundle.\r\n        if (options.languagePackSupport) {\r\n            return loadDefaultNlsBundle(bundlePath);\r\n        }\r\n        var candidate = findInTheBoxBundle(bundlePath);\r\n        if (candidate) {\r\n            try {\r\n                return readJsonFileSync(candidate);\r\n            }\r\n            catch (err) {\r\n                console.log(\"Loading in the box message bundle failed.\", err);\r\n            }\r\n        }\r\n        result = loadDefaultNlsBundle(bundlePath);\r\n    }\r\n    return result;\r\n}\r\nfunction tryFindMetaDataHeaderFile(file) {\r\n    var result;\r\n    var dirname = path.dirname(file);\r\n    while (true) {\r\n        result = path.join(dirname, 'nls.metadata.header.json');\r\n        if (fs.existsSync(result)) {\r\n            break;\r\n        }\r\n        var parent = path.dirname(dirname);\r\n        if (parent === dirname) {\r\n            result = undefined;\r\n            break;\r\n        }\r\n        else {\r\n            dirname = parent;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nfunction loadMessageBundle(file) {\r\n    if (!file) {\r\n        // No file. We are in dev mode. Return the default\r\n        // localize function.\r\n        return localize;\r\n    }\r\n    // Remove extension since we load json files.\r\n    var ext = path.extname(file);\r\n    if (ext) {\r\n        file = file.substr(0, file.length - ext.length);\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.bundle) {\r\n        var headerFile = tryFindMetaDataHeaderFile(file);\r\n        if (headerFile) {\r\n            var bundlePath = path.dirname(headerFile);\r\n            var bundle = resolvedBundles[bundlePath];\r\n            if (bundle === undefined) {\r\n                try {\r\n                    var header = JSON.parse(fs.readFileSync(headerFile, 'utf8'));\r\n                    try {\r\n                        var nlsBundle = loadNlsBundle(header, bundlePath);\r\n                        bundle = cacheBundle(bundlePath, nlsBundle ? { header: header, nlsBundle: nlsBundle } : null);\r\n                    }\r\n                    catch (err) {\r\n                        console.error('Failed to load nls bundle', err);\r\n                        bundle = cacheBundle(bundlePath, null);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.error('Failed to read header file', err);\r\n                    bundle = cacheBundle(bundlePath, null);\r\n                }\r\n            }\r\n            if (bundle) {\r\n                var module_3 = file.substr(bundlePath.length + 1).replace(/\\\\/g, '/');\r\n                var messages = bundle.nlsBundle[module_3];\r\n                if (messages === undefined) {\r\n                    console.error(\"Messages for file \" + file + \" not found. See console for details.\");\r\n                    return function () {\r\n                        return 'Messages not found.';\r\n                    };\r\n                }\r\n                return createScopedLocalizeFunction(messages);\r\n            }\r\n        }\r\n    }\r\n    if (options.messageFormat === MessageFormat.both || options.messageFormat === MessageFormat.file) {\r\n        // Try to load a single file bundle\r\n        try {\r\n            var json = readJsonFileSync(resolveLanguage(file));\r\n            if (Array.isArray(json)) {\r\n                return createScopedLocalizeFunction(json);\r\n            }\r\n            else {\r\n                if (isDefined(json.messages) && isDefined(json.keys)) {\r\n                    return createScopedLocalizeFunction(json.messages);\r\n                }\r\n                else {\r\n                    console.error(\"String bundle '\" + file + \"' uses an unsupported format.\");\r\n                    return function () {\r\n                        return 'File bundle has unsupported format. See console for details';\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        catch (err) {\r\n            if (err.code !== 'ENOENT') {\r\n                console.error('Failed to load single file bundle', err);\r\n            }\r\n        }\r\n    }\r\n    console.error(\"Failed to load message bundle for file \" + file);\r\n    return function () {\r\n        return 'Failed to load message bundle. See console for details.';\r\n    };\r\n}\r\nexports.loadMessageBundle = loadMessageBundle;\r\nfunction config(opts) {\r\n    if (opts) {\r\n        if (isString(opts.locale)) {\r\n            options.locale = opts.locale.toLowerCase();\r\n            options.language = options.locale;\r\n            resolvedLanguage = undefined;\r\n            resolvedBundles = Object.create(null);\r\n        }\r\n        if (opts.messageFormat !== undefined) {\r\n            options.messageFormat = opts.messageFormat;\r\n        }\r\n        if (opts.bundleFormat === BundleFormat.standalone && options.languagePackSupport === true) {\r\n            options.languagePackSupport = false;\r\n        }\r\n    }\r\n    isPseudo = options.locale === 'pseudo';\r\n    return loadMessageBundle;\r\n}\r\nexports.config = config;\r\n//# sourceMappingURL=main.js.map","\"use strict\";\r\n// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license. See LICENSE file in the project root for details.\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar path = require(\"path\");\r\nvar semver = require(\"semver\");\r\n/* tslint:disable-next-line:no-var-requires */\r\nvar moduleModule = require(\"module\");\r\nvar nativeModules = Object.keys(process.binding(\"natives\"));\r\nvar originalRequire = moduleModule.prototype.require;\r\nfunction makePatchingRequire(knownPatches) {\r\n    var patchedModules = {};\r\n    return function patchedRequire(moduleId) {\r\n        var originalModule = originalRequire.apply(this, arguments);\r\n        if (knownPatches[moduleId]) {\r\n            // Fetch the specific path of the module\r\n            var modulePath = moduleModule._resolveFilename(moduleId, this);\r\n            if (patchedModules.hasOwnProperty(modulePath)) {\r\n                // This module has already been patched, no need to reapply\r\n                return patchedModules[modulePath];\r\n            }\r\n            var moduleVersion = void 0;\r\n            if (nativeModules.indexOf(moduleId) < 0) {\r\n                try {\r\n                    moduleVersion = originalRequire.call(this, path.join(moduleId, \"package.json\")).version;\r\n                }\r\n                catch (e) {\r\n                    // This should only happen if moduleId is actually a path rather than a module\r\n                    // This is not a supported scenario\r\n                    return originalModule;\r\n                }\r\n            }\r\n            else {\r\n                // This module is implemented natively so we cannot find a package.json\r\n                // Instead, take the version of node itself\r\n                moduleVersion = process.version.substring(1);\r\n            }\r\n            var prereleaseTagIndex = moduleVersion.indexOf(\"-\");\r\n            if (prereleaseTagIndex >= 0) {\r\n                // We ignore prerelease tags to avoid impossible to fix gaps in support\r\n                // e.g. supporting console in >= 4.0.0 would otherwise not include\r\n                // 8.0.0-pre\r\n                moduleVersion = moduleVersion.substring(0, prereleaseTagIndex);\r\n            }\r\n            var modifiedModule = originalModule;\r\n            for (var _i = 0, _a = knownPatches[moduleId]; _i < _a.length; _i++) {\r\n                var modulePatcher = _a[_i];\r\n                if (semver.satisfies(moduleVersion, modulePatcher.versionSpecifier)) {\r\n                    modifiedModule = modulePatcher.patch(modifiedModule, modulePath);\r\n                }\r\n            }\r\n            return patchedModules[modulePath] = modifiedModule;\r\n        }\r\n        return originalModule;\r\n    };\r\n}\r\nexports.makePatchingRequire = makePatchingRequire;\r\n//# sourceMappingURL=patchRequire.js.map","module.exports = require(\"module\");","module.exports = require(\"timers\");","// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._stackChain) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._stackChain.version === require('./package.json').version) {\n    module.exports = global._stackChain;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of stack-chain found');\n  }\n}\n// Yay, no other stack-chain copy exists, yet :/\nelse {\n  module.exports = global._stackChain = require('./stack-chain');\n}\n","module.exports = require(\"child_process\");","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AvailabilityData = require(\"./AvailabilityData\");\nexports.Base = require(\"./Base\");\nexports.ContextTagKeys = require(\"./ContextTagKeys\");\nexports.Data = require(\"./Data\");\nexports.DataPoint = require(\"./DataPoint\");\nexports.DataPointType = require(\"./DataPointType\");\nexports.Domain = require(\"./Domain\");\nexports.Envelope = require(\"./Envelope\");\nexports.EventData = require(\"./EventData\");\nexports.ExceptionData = require(\"./ExceptionData\");\nexports.ExceptionDetails = require(\"./ExceptionDetails\");\nexports.MessageData = require(\"./MessageData\");\nexports.MetricData = require(\"./MetricData\");\nexports.PageViewData = require(\"./PageViewData\");\nexports.RemoteDependencyData = require(\"./RemoteDependencyData\");\nexports.RequestData = require(\"./RequestData\");\nexports.SeverityLevel = require(\"./SeverityLevel\");\nexports.StackFrame = require(\"./StackFrame\");\n//# sourceMappingURL=index.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Data struct to contain only C section with custom fields.\n */\nvar Base = (function () {\n    function Base() {\n    }\n    return Base;\n}());\nmodule.exports = Base;\n//# sourceMappingURL=Base.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Type of the metric data measurement.\n */\nvar DataPointType;\n(function (DataPointType) {\n    DataPointType[DataPointType[\"Measurement\"] = 0] = \"Measurement\";\n    DataPointType[DataPointType[\"Aggregation\"] = 1] = \"Aggregation\";\n})(DataPointType || (DataPointType = {}));\nmodule.exports = DataPointType;\n//# sourceMappingURL=DataPointType.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Event represent structured event records that can be grouped and searched by their properties. Event data item also creates a metric of event count by name.\n */\nvar EventData = (function (_super) {\n    __extends(EventData, _super);\n    function EventData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return EventData;\n}(Domain));\nmodule.exports = EventData;\n//# sourceMappingURL=EventData.js.map","\"use strict\";\n/**\n * Base class for helpers that read data from HTTP requst/response objects and convert them\n * into the telemetry contract objects.\n */\nvar RequestParser = (function () {\n    function RequestParser() {\n    }\n    /**\n     * Gets a url parsed out from request options\n     */\n    RequestParser.prototype.getUrl = function () {\n        return this.url;\n    };\n    RequestParser.prototype.RequestParser = function () {\n        this.startTime = +new Date();\n    };\n    RequestParser.prototype._setStatus = function (status, error) {\n        var endTime = +new Date();\n        this.duration = endTime - this.startTime;\n        this.statusCode = status;\n        var properties = this.properties || {};\n        if (error) {\n            if (typeof error === \"string\") {\n                properties[\"error\"] = error;\n            }\n            else if (error instanceof Error) {\n                properties[\"error\"] = error.message;\n            }\n            else if (typeof error === \"object\") {\n                for (var key in error) {\n                    properties[key] = error[key] && error[key].toString && error[key].toString();\n                }\n            }\n        }\n        this.properties = properties;\n    };\n    RequestParser.prototype._isSuccess = function () {\n        return (0 < this.statusCode) && (this.statusCode < 400);\n    };\n    return RequestParser;\n}());\nmodule.exports = RequestParser;\n//# sourceMappingURL=RequestParser.js.map","\"use strict\";\nvar Util = require(\"./Util\");\nvar CorrelationIdManager = require(\"./CorrelationIdManager\");\n/**\n * Helper class to manage parsing and validation of traceparent header. Also handles hierarchical\n * back-compatibility headers generated from traceparent. W3C traceparent spec is documented at\n * https://www.w3.org/TR/trace-context/#traceparent-field\n */\nvar Traceparent = (function () {\n    function Traceparent(traceparent, parentId) {\n        this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n        this.version = Traceparent.DEFAULT_VERSION;\n        if (traceparent && typeof traceparent === \"string\") {\n            // If incoming request contains traceparent: parse it, set operation, parent and telemetry id accordingly. traceparent should be injected into outgoing requests. request-id should be injected in back-compat format |traceId.spanId. so that older SDKs could understand it.\n            if (traceparent.split(\",\").length > 1) {\n                this.traceId = Util.w3cTraceId();\n                this.spanId = Util.w3cTraceId().substr(0, 16);\n            }\n            else {\n                var traceparentArr = traceparent.trim().split(\"-\");\n                var len = traceparentArr.length;\n                if (len >= 4) {\n                    this.version = traceparentArr[0];\n                    this.traceId = traceparentArr[1];\n                    this.spanId = traceparentArr[2];\n                    this.traceFlag = traceparentArr[3];\n                }\n                else {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                // Version validation\n                if (!this.version.match(/^[0-9a-f]{2}$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                }\n                if (this.version === \"00\" && len !== 4) {\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (this.version === \"ff\") {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                    this.traceId = Util.w3cTraceId();\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                }\n                if (!this.version.match(/^0[0-9a-f]$/g)) {\n                    this.version = Traceparent.DEFAULT_VERSION;\n                }\n                // TraceFlag validation\n                if (!this.traceFlag.match(/^[0-9a-f]{2}$/g)) {\n                    this.traceFlag = Traceparent.DEFAULT_TRACE_FLAG;\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate TraceId, regenerate new traceid if invalid\n                if (!Traceparent.isValidTraceId(this.traceId)) {\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Validate Span Id, discard entire traceparent if invalid\n                if (!Traceparent.isValidSpanId(this.spanId)) {\n                    this.spanId = Util.w3cTraceId().substr(0, 16);\n                    this.traceId = Util.w3cTraceId();\n                }\n                // Save backCompat parentId\n                this.parentId = this.getBackCompatRequestId();\n            }\n        }\n        else if (parentId) {\n            // If incoming request contains only request-id, new traceid and spanid should be started, request-id value should be used as a parent. Root part of request-id should be stored in custom dimension on the request telemetry if root part is different from traceid. On the outgoing request side, request-id should be emitted in the |traceId.spanId. format.\n            this.parentId = parentId.slice(); // copy\n            var operationId = CorrelationIdManager.getRootId(parentId);\n            if (!Traceparent.isValidTraceId(operationId)) {\n                this.legacyRootId = operationId;\n                operationId = Util.w3cTraceId();\n            }\n            if (parentId.indexOf(\"|\") !== -1) {\n                parentId = parentId.substring(1 + parentId.substring(0, parentId.length - 1).lastIndexOf(\".\"), parentId.length - 1);\n            }\n            this.traceId = operationId;\n            this.spanId = parentId;\n        }\n        else {\n            // Fallback default constructor\n            // if request does not contain any correlation headers, see case p2\n            this.traceId = Util.w3cTraceId();\n            this.spanId = Util.w3cTraceId().substr(0, 16);\n        }\n    }\n    Traceparent.isValidTraceId = function (id) {\n        return id.match(/^[0-9a-f]{32}$/) && id !== \"00000000000000000000000000000000\";\n    };\n    Traceparent.isValidSpanId = function (id) {\n        return id.match(/^[0-9a-f]{16}$/) && id !== \"0000000000000000\";\n    };\n    Traceparent.prototype.getBackCompatRequestId = function () {\n        return \"|\" + this.traceId + \".\" + this.spanId + \".\";\n    };\n    Traceparent.prototype.toString = function () {\n        return this.version + \"-\" + this.traceId + \"-\" + this.spanId + \"-\" + this.traceFlag;\n    };\n    Traceparent.prototype.updateSpanId = function () {\n        this.spanId = Util.w3cTraceId().substr(0, 16);\n    };\n    Traceparent.DEFAULT_TRACE_FLAG = \"01\";\n    Traceparent.DEFAULT_VERSION = \"00\";\n    return Traceparent;\n}());\nmodule.exports = Traceparent;\n//# sourceMappingURL=Traceparent.js.map","\"use strict\";\nvar http = require(\"http\");\nvar https = require(\"https\");\nvar Logging = require(\"../Library/Logging\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar HttpRequestParser = require(\"./HttpRequestParser\");\nvar CorrelationContextManager_1 = require(\"./CorrelationContextManager\");\nvar AutoCollectPerformance = require(\"./Performance\");\nvar AutoCollectHttpRequests = (function () {\n    function AutoCollectHttpRequests(client) {\n        if (!!AutoCollectHttpRequests.INSTANCE) {\n            throw new Error(\"Server request tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectHttpRequests.INSTANCE = this;\n        this._client = client;\n    }\n    AutoCollectHttpRequests.prototype.enable = function (isEnabled) {\n        this._isEnabled = isEnabled;\n        // Autocorrelation requires automatic monitoring of incoming server requests\n        // Disabling autocollection but enabling autocorrelation will still enable\n        // request monitoring but will not produce request events\n        if ((this._isAutoCorrelating || this._isEnabled || AutoCollectPerformance.isEnabled()) && !this._isInitialized) {\n            this.useAutoCorrelation(this._isAutoCorrelating);\n            this._initialize();\n        }\n    };\n    AutoCollectHttpRequests.prototype.useAutoCorrelation = function (isEnabled, forceClsHooked) {\n        if (isEnabled && !this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.enable(forceClsHooked);\n        }\n        else if (!isEnabled && this._isAutoCorrelating) {\n            CorrelationContextManager_1.CorrelationContextManager.disable();\n        }\n        this._isAutoCorrelating = isEnabled;\n    };\n    AutoCollectHttpRequests.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectHttpRequests.prototype.isAutoCorrelating = function () {\n        return this._isAutoCorrelating;\n    };\n    AutoCollectHttpRequests.prototype._generateCorrelationContext = function (requestParser) {\n        if (!this._isAutoCorrelating) {\n            return;\n        }\n        return CorrelationContextManager_1.CorrelationContextManager.generateContextObject(requestParser.getOperationId(this._client.context.tags), requestParser.getRequestId(), requestParser.getOperationName(this._client.context.tags), requestParser.getCorrelationContextHeader(), requestParser.getTraceparent(), requestParser.getTracestate());\n    };\n    AutoCollectHttpRequests.prototype._initialize = function () {\n        var _this = this;\n        this._isInitialized = true;\n        var wrapOnRequestHandler = function (onRequest) {\n            if (!onRequest) {\n                return undefined;\n            }\n            if (typeof onRequest !== 'function') {\n                throw new Error('onRequest handler must be a function');\n            }\n            return function (request, response) {\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(request);\n                CorrelationContextManager_1.CorrelationContextManager.wrapEmitter(response);\n                var shouldCollect = request && !request[AutoCollectHttpRequests.alreadyAutoCollectedFlag];\n                if (request && shouldCollect) {\n                    // Set up correlation context\n                    var requestParser_1 = new HttpRequestParser(request);\n                    var correlationContext = _this._generateCorrelationContext(requestParser_1);\n                    // Note: Check for if correlation is enabled happens within this method.\n                    // If not enabled, function will directly call the callback.\n                    CorrelationContextManager_1.CorrelationContextManager.runWithContext(correlationContext, function () {\n                        if (_this._isEnabled) {\n                            // Mark as auto collected\n                            request[AutoCollectHttpRequests.alreadyAutoCollectedFlag] = true;\n                            // Auto collect request\n                            AutoCollectHttpRequests.trackRequest(_this._client, { request: request, response: response }, requestParser_1);\n                        }\n                        if (typeof onRequest === \"function\") {\n                            onRequest(request, response);\n                        }\n                    });\n                }\n                else {\n                    if (typeof onRequest === \"function\") {\n                        onRequest(request, response);\n                    }\n                }\n            };\n        };\n        // The `http.createServer` function will instantiate a new http.Server object.\n        // Inside the Server's constructor, it is using addListener to register the\n        // onRequest handler. So there are two ways to inject the wrapped onRequest handler:\n        // 1) Overwrite Server.prototype.addListener (and .on()) globally and not patching\n        //    the http.createServer call. Or\n        // 2) Overwrite the http.createServer method and add a patched addListener to the\n        //    fresh server instance. This seems more stable for possible future changes as\n        //    it also covers the case where the Server might not use addListener to manage\n        //    the callback internally.\n        //    And also as long as the constructor uses addListener to add the handle, it is\n        //    ok to patch the addListener after construction only. Because if we would patch\n        //    the prototype one and the createServer method, we would wrap the handler twice\n        //    in case of the constructor call.\n        var wrapServerEventHandler = function (server) {\n            var originalAddListener = server.addListener.bind(server);\n            server.addListener = function (eventType, eventHandler) {\n                switch (eventType) {\n                    case 'request':\n                    case 'checkContinue':\n                        return originalAddListener(eventType, wrapOnRequestHandler(eventHandler));\n                    default:\n                        return originalAddListener(eventType, eventHandler);\n                }\n            };\n            // on is an alias to addListener only\n            server.on = server.addListener;\n        };\n        var originalHttpServer = http.createServer;\n        http.createServer = function (onRequest) {\n            // todo: get a pointer to the server so the IP address can be read from server.address\n            var server = originalHttpServer(wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n        var originalHttpsServer = https.createServer;\n        https.createServer = function (options, onRequest) {\n            var server = originalHttpsServer(options, wrapOnRequestHandler(onRequest));\n            wrapServerEventHandler(server);\n            return server;\n        };\n    };\n    /**\n     * Tracks a request synchronously (doesn't wait for response 'finish' event)\n     */\n    AutoCollectHttpRequests.trackRequestSync = function (client, telemetry) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = new HttpRequestParser(telemetry.request, (correlationContext && correlationContext.operation.parentId));\n        // Overwrite correlation context with request parser results\n        if (correlationContext) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getRequestId() || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, telemetry.duration, telemetry.error);\n    };\n    /**\n     * Tracks a request by listening to the response 'finish' event\n     */\n    AutoCollectHttpRequests.trackRequest = function (client, telemetry, _requestParser) {\n        if (!telemetry.request || !telemetry.response || !client) {\n            Logging.info(\"AutoCollectHttpRequests.trackRequest was called with invalid parameters: \", !telemetry.request, !telemetry.response, !client);\n            return;\n        }\n        // store data about the request\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        var requestParser = _requestParser || new HttpRequestParser(telemetry.request, correlationContext && correlationContext.operation.parentId);\n        if (Util.canIncludeCorrelationHeader(client, requestParser.getUrl())) {\n            AutoCollectHttpRequests.addResponseCorrelationIdHeader(client, telemetry.response);\n        }\n        // Overwrite correlation context with request parser results (if not an automatic track. we've already precalculated the correlation context in that case)\n        if (correlationContext && !_requestParser) {\n            correlationContext.operation.id = requestParser.getOperationId(client.context.tags) || correlationContext.operation.id;\n            correlationContext.operation.name = requestParser.getOperationName(client.context.tags) || correlationContext.operation.name;\n            correlationContext.operation.parentId = requestParser.getOperationParentId(client.context.tags) || correlationContext.operation.parentId;\n            correlationContext.customProperties.addHeaderData(requestParser.getCorrelationContextHeader());\n        }\n        // response listeners\n        if (telemetry.response.once) {\n            telemetry.response.once(\"finish\", function () {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, null);\n            });\n        }\n        // track a failed request if an error is emitted\n        if (telemetry.request.on) {\n            telemetry.request.on(\"error\", function (error) {\n                AutoCollectHttpRequests.endRequest(client, requestParser, telemetry, null, error);\n            });\n        }\n    };\n    /**\n     * Add the target correlationId to the response headers, if not already provided.\n     */\n    AutoCollectHttpRequests.addResponseCorrelationIdHeader = function (client, response) {\n        if (client.config && client.config.correlationId &&\n            response.getHeader && response.setHeader && !response.headersSent) {\n            var correlationHeader = response.getHeader(RequestResponseHeaders.requestContextHeader);\n            Util.safeIncludeCorrelationHeader(client, response, correlationHeader);\n        }\n    };\n    AutoCollectHttpRequests.endRequest = function (client, requestParser, telemetry, ellapsedMilliseconds, error) {\n        if (error) {\n            requestParser.onError(error, ellapsedMilliseconds);\n        }\n        else {\n            requestParser.onResponse(telemetry.response, ellapsedMilliseconds);\n        }\n        var requestTelemetry = requestParser.getRequestTelemetry(telemetry);\n        requestTelemetry.tagOverrides = requestParser.getRequestTags(client.context.tags);\n        if (telemetry.tagOverrides) {\n            for (var key in telemetry.tagOverrides) {\n                requestTelemetry.tagOverrides[key] = telemetry.tagOverrides[key];\n            }\n        }\n        var legacyRootId = requestParser.getLegacyRootId();\n        if (legacyRootId) {\n            requestTelemetry.properties[\"ai_legacyRootId\"] = legacyRootId;\n        }\n        requestTelemetry.contextObjects = requestTelemetry.contextObjects || {};\n        requestTelemetry.contextObjects[\"http.ServerRequest\"] = telemetry.request;\n        requestTelemetry.contextObjects[\"http.ServerResponse\"] = telemetry.response;\n        client.trackRequest(requestTelemetry);\n    };\n    AutoCollectHttpRequests.prototype.dispose = function () {\n        AutoCollectHttpRequests.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n        CorrelationContextManager_1.CorrelationContextManager.disable();\n        this._isAutoCorrelating = false;\n    };\n    AutoCollectHttpRequests.alreadyAutoCollectedFlag = '_appInsightsAutoCollected';\n    return AutoCollectHttpRequests;\n}());\nmodule.exports = AutoCollectHttpRequests;\n//# sourceMappingURL=HttpRequests.js.map","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as vscode from 'vscode';\nimport { AzureActiveDirectoryService, onDidChangeSessions } from './AADHelper';\nimport TelemetryReporter from 'vscode-extension-telemetry';\n\nexport const DEFAULT_SCOPES = 'https://management.core.windows.net/.default offline_access';\n\nexport async function activate(context: vscode.ExtensionContext) {\n\tconst { name, version, aiKey } = require('../package.json') as { name: string, version: string, aiKey: string };\n\tconst telemetryReporter = new TelemetryReporter(name, version, aiKey);\n\n\tconst loginService = new AzureActiveDirectoryService(context);\n\tcontext.subscriptions.push(loginService);\n\n\tawait loginService.initialize();\n\n\tcontext.subscriptions.push(vscode.authentication.registerAuthenticationProvider('microsoft', 'Microsoft', {\n\t\tonDidChangeSessions: onDidChangeSessions.event,\n\t\tgetSessions: (scopes: string[]) => loginService.getSessions(scopes),\n\t\tcreateSession: async (scopes: string[]) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"login\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('login');\n\n\t\t\t\tconst session = await loginService.createSession(scopes.sort().join(' '));\n\t\t\t\tonDidChangeSessions.fire({ added: [session], removed: [], changed: [] });\n\t\t\t\treturn session;\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"loginFailed\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('loginFailed');\n\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t},\n\t\tremoveSession: async (id: string) => {\n\t\t\ttry {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logout\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logout');\n\n\t\t\t\tconst session = await loginService.removeSession(id);\n\t\t\t\tif (session) {\n\t\t\t\t\tonDidChangeSessions.fire({ added: [], removed: [session], changed: [] });\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t/* __GDPR__\n\t\t\t\t\t\"logoutFailed\" : { }\n\t\t\t\t*/\n\t\t\t\ttelemetryReporter.sendTelemetryEvent('logoutFailed');\n\t\t\t}\n\t\t}\n\t}, { supportsMultipleAccounts: true }));\n\n\treturn;\n}\n\n// this method is called when your extension is deactivated\nexport function deactivate() { }\n",null,"module.exports = require('crypto').randomBytes\n","module.exports = require(\"querystring\");","module.exports = require(\"buffer\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as http from 'http';\nimport * as url from 'url';\nimport * as fs from 'fs';\nimport * as path from 'path';\n\ninterface Deferred<T> {\n\tresolve: (result: T | Promise<T>) => void;\n\treject: (reason: any) => void;\n}\n\n/**\n * Asserts that the argument passed in is neither undefined nor null.\n */\nfunction assertIsDefined<T>(arg: T | null | undefined): T {\n\tif (typeof (arg) === 'undefined' || arg === null) {\n\t\tthrow new Error('Assertion Failed: argument is undefined or null');\n\t}\n\n\treturn arg;\n}\n\nexport async function startServer(server: http.Server): Promise<string> {\n\tlet portTimer: NodeJS.Timer;\n\n\tfunction cancelPortTimer() {\n\t\tclearTimeout(portTimer);\n\t}\n\n\tconst port = new Promise<string>((resolve, reject) => {\n\t\tportTimer = setTimeout(() => {\n\t\t\treject(new Error('Timeout waiting for port'));\n\t\t}, 5000);\n\n\t\tserver.on('listening', () => {\n\t\t\tconst address = server.address();\n\t\t\tif (typeof address === 'string') {\n\t\t\t\tresolve(address);\n\t\t\t} else {\n\t\t\t\tresolve(assertIsDefined(address).port.toString());\n\t\t\t}\n\t\t});\n\n\t\tserver.on('error', _ => {\n\t\t\treject(new Error('Error listening to server'));\n\t\t});\n\n\t\tserver.on('close', () => {\n\t\t\treject(new Error('Closed'));\n\t\t});\n\n\t\tserver.listen(0);\n\t});\n\n\tport.then(cancelPortTimer, cancelPortTimer);\n\treturn port;\n}\n\nfunction sendFile(res: http.ServerResponse, filepath: string, contentType: string) {\n\tfs.readFile(filepath, (err, body) => {\n\t\tif (err) {\n\t\t\tconsole.error(err);\n\t\t\tres.writeHead(404);\n\t\t\tres.end();\n\t\t} else {\n\t\t\tres.writeHead(200, {\n\t\t\t\t'Content-Length': body.length,\n\t\t\t\t'Content-Type': contentType\n\t\t\t});\n\t\t\tres.end(body);\n\t\t}\n\t});\n}\n\nasync function callback(nonce: string, reqUrl: url.Url): Promise<string> {\n\tconst query = reqUrl.query;\n\tif (!query || typeof query === 'string') {\n\t\tthrow new Error('No query received.');\n\t}\n\n\tlet error = query.error_description || query.error;\n\n\tif (!error) {\n\t\tconst state = (query.state as string) || '';\n\t\tconst receivedNonce = (state.split(',')[1] || '').replace(/ /g, '+');\n\t\tif (receivedNonce !== nonce) {\n\t\t\terror = 'Nonce does not match.';\n\t\t}\n\t}\n\n\tconst code = query.code as string;\n\tif (!error && code) {\n\t\treturn code;\n\t}\n\n\tthrow new Error((error as string) || 'No code received.');\n}\n\nexport function createServer(nonce: string) {\n\ttype RedirectResult = { req: http.IncomingMessage; res: http.ServerResponse; } | { err: any; res: http.ServerResponse; };\n\tlet deferredRedirect: Deferred<RedirectResult>;\n\tconst redirectPromise = new Promise<RedirectResult>((resolve, reject) => deferredRedirect = { resolve, reject });\n\n\ttype CodeResult = { code: string; res: http.ServerResponse; } | { err: any; res: http.ServerResponse; };\n\tlet deferredCode: Deferred<CodeResult>;\n\tconst codePromise = new Promise<CodeResult>((resolve, reject) => deferredCode = { resolve, reject });\n\n\tconst codeTimer = setTimeout(() => {\n\t\tdeferredCode.reject(new Error('Timeout waiting for code'));\n\t}, 5 * 60 * 1000);\n\n\tfunction cancelCodeTimer() {\n\t\tclearTimeout(codeTimer);\n\t}\n\n\tconst server = http.createServer(function (req, res) {\n\t\tconst reqUrl = url.parse(req.url!, /* parseQueryString */ true);\n\t\tswitch (reqUrl.pathname) {\n\t\t\tcase '/signin':\n\t\t\t\tconst receivedNonce = ((reqUrl.query.nonce as string) || '').replace(/ /g, '+');\n\t\t\t\tif (receivedNonce === nonce) {\n\t\t\t\t\tdeferredRedirect.resolve({ req, res });\n\t\t\t\t} else {\n\t\t\t\t\tconst err = new Error('Nonce does not match.');\n\t\t\t\t\tdeferredRedirect.resolve({ err, res });\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase '/':\n\t\t\t\tsendFile(res, path.join(__dirname, '../media/auth.html'), 'text/html; charset=utf-8');\n\t\t\t\tbreak;\n\t\t\tcase '/auth.css':\n\t\t\t\tsendFile(res, path.join(__dirname, '../media/auth.css'), 'text/css; charset=utf-8');\n\t\t\t\tbreak;\n\t\t\tcase '/callback':\n\t\t\t\tdeferredCode.resolve(callback(nonce, reqUrl)\n\t\t\t\t\t.then(code => ({ code, res }), err => ({ err, res })));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tres.writeHead(404);\n\t\t\t\tres.end();\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tcodePromise.then(cancelCodeTimer, cancelCodeTimer);\n\treturn {\n\t\tserver,\n\t\tredirectPromise,\n\t\tcodePromise\n\t};\n}\n",null,"module.exports = require(\"keytar\");","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function toBase64UrlEncoding(base64string: string) {\n\treturn base64string.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_'); // Need to use base64url encoding\n}\n","import Stream from 'stream';\nimport http from 'http';\nimport Url from 'url';\nimport https from 'https';\nimport zlib from 'zlib';\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\nconst resolve_url = Url.resolve;\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nexport async function sha256(s: string | Uint8Array): Promise<string> {\n\treturn (require('crypto')).createHash('sha256').update(s).digest('base64');\n}\n","/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nprocess.env['APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL'] = true;\r\nvar fs = require(\"fs\");\r\nvar os = require(\"os\");\r\nvar path = require(\"path\");\r\nvar vscode = require(\"vscode\");\r\nvar appInsights = require(\"applicationinsights\");\r\nvar TelemetryReporter = /** @class */ (function () {\r\n    // tslint:disable-next-line\r\n    function TelemetryReporter(extensionId, extensionVersion, key, firstParty) {\r\n        var _this = this;\r\n        this.extensionId = extensionId;\r\n        this.extensionVersion = extensionVersion;\r\n        this.firstParty = false;\r\n        this.userOptIn = false;\r\n        this.firstParty = !!firstParty;\r\n        var logFilePath = process.env['VSCODE_LOGS'] || '';\r\n        if (logFilePath && extensionId && process.env['VSCODE_LOG_LEVEL'] === 'trace') {\r\n            logFilePath = path.join(logFilePath, extensionId + \".txt\");\r\n            this.logStream = fs.createWriteStream(logFilePath, { flags: 'a', encoding: 'utf8', autoClose: true });\r\n        }\r\n        this.updateUserOptIn(key);\r\n        if (vscode.env.onDidChangeTelemetryEnabled !== undefined) {\r\n            this.optOutListener = vscode.env.onDidChangeTelemetryEnabled(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n        else {\r\n            this.optOutListener = vscode.workspace.onDidChangeConfiguration(function () { return _this.updateUserOptIn(key); });\r\n        }\r\n    }\r\n    TelemetryReporter.prototype.updateUserOptIn = function (key) {\r\n        // Newer versions of vscode api have telemetry enablement exposed, but fallback to setting for older versions\r\n        var config = vscode.workspace.getConfiguration(TelemetryReporter.TELEMETRY_CONFIG_ID);\r\n        var newOptInValue = vscode.env.isTelemetryEnabled === undefined ?\r\n            config.get(TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID, true) :\r\n            vscode.env.isTelemetryEnabled;\r\n        if (this.userOptIn !== newOptInValue) {\r\n            this.userOptIn = newOptInValue;\r\n            if (this.userOptIn) {\r\n                this.createAppInsightsClient(key);\r\n            }\r\n            else {\r\n                this.dispose();\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.createAppInsightsClient = function (key) {\r\n        //check if another instance is already initialized\r\n        if (appInsights.defaultClient) {\r\n            this.appInsightsClient = new appInsights.TelemetryClient(key);\r\n            // no other way to enable offline mode\r\n            this.appInsightsClient.channel.setUseDiskRetryCaching(true);\r\n        }\r\n        else {\r\n            appInsights.setup(key)\r\n                .setAutoCollectRequests(false)\r\n                .setAutoCollectPerformance(false)\r\n                .setAutoCollectExceptions(false)\r\n                .setAutoCollectDependencies(false)\r\n                .setAutoDependencyCorrelation(false)\r\n                .setAutoCollectConsole(false)\r\n                .setUseDiskRetryCaching(true)\r\n                .start();\r\n            this.appInsightsClient = appInsights.defaultClient;\r\n        }\r\n        this.appInsightsClient.commonProperties = this.getCommonProperties();\r\n        if (vscode && vscode.env) {\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId] = vscode.env.machineId;\r\n            this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId] = vscode.env.sessionId;\r\n        }\r\n        //check if it's an Asimov key to change the endpoint\r\n        if (key && key.indexOf('AIF-') === 0) {\r\n            this.appInsightsClient.config.endpointUrl = \"https://vortex.data.microsoft.com/collect/v1\";\r\n            this.firstParty = true;\r\n        }\r\n    };\r\n    // __GDPR__COMMON__ \"common.os\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.platformversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extname\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.extversion\" : { \"classification\": \"PublicNonPersonalData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodemachineid\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodesessionid\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.vscodeversion\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.uikind\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.remotename\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    // __GDPR__COMMON__ \"common.isnewappinstall\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\r\n    TelemetryReporter.prototype.getCommonProperties = function () {\r\n        var commonProperties = Object.create(null);\r\n        commonProperties['common.os'] = os.platform();\r\n        commonProperties['common.platformversion'] = (os.release() || '').replace(/^(\\d+)(\\.\\d+)?(\\.\\d+)?(.*)/, '$1$2$3');\r\n        commonProperties['common.extname'] = this.extensionId;\r\n        commonProperties['common.extversion'] = this.extensionVersion;\r\n        if (vscode && vscode.env) {\r\n            commonProperties['common.vscodemachineid'] = vscode.env.machineId;\r\n            commonProperties['common.vscodesessionid'] = vscode.env.sessionId;\r\n            commonProperties['common.vscodeversion'] = vscode.version;\r\n            commonProperties['common.isnewappinstall'] = vscode.env.isNewAppInstall;\r\n            switch (vscode.env.uiKind) {\r\n                case vscode.UIKind.Web:\r\n                    commonProperties['common.uikind'] = 'web';\r\n                    break;\r\n                case vscode.UIKind.Desktop:\r\n                    commonProperties['common.uikind'] = 'desktop';\r\n                    break;\r\n                default:\r\n                    commonProperties['common.uikind'] = 'unknown';\r\n            }\r\n            commonProperties['common.remotename'] = this.cleanRemoteName(vscode.env.remoteName);\r\n        }\r\n        return commonProperties;\r\n    };\r\n    TelemetryReporter.prototype.cleanRemoteName = function (remoteName) {\r\n        if (!remoteName) {\r\n            return 'none';\r\n        }\r\n        var ret = 'other';\r\n        // Allowed remote authorities\r\n        ['ssh-remote', 'dev-container', 'attached-container', 'wsl'].forEach(function (res) {\r\n            if (remoteName.indexOf(res + \"+\") === 0) {\r\n                ret = res;\r\n            }\r\n        });\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.shouldSendErrorTelemetry = function () {\r\n        if (this.firstParty) {\r\n            if (this.cleanRemoteName(vscode.env.remoteName) !== 'other') {\r\n                return true;\r\n            }\r\n            if (this.extension === undefined || this.extension.extensionKind === vscode.ExtensionKind.Workspace) {\r\n                return false;\r\n            }\r\n            if (vscode.env.uiKind === vscode.UIKind.Web) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        return true;\r\n    };\r\n    Object.defineProperty(TelemetryReporter.prototype, \"extension\", {\r\n        get: function () {\r\n            if (this._extension === undefined) {\r\n                this._extension = vscode.extensions.getExtension(this.extensionId);\r\n            }\r\n            return this._extension;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    TelemetryReporter.prototype.cloneAndChange = function (obj, change) {\r\n        if (obj === null || typeof obj !== 'object')\r\n            return obj;\r\n        if (typeof change !== 'function')\r\n            return obj;\r\n        var ret = {};\r\n        for (var key in obj) {\r\n            ret[key] = change(key, obj[key]);\r\n        }\r\n        return ret;\r\n    };\r\n    TelemetryReporter.prototype.anonymizeFilePaths = function (stack, anonymizeFilePaths) {\r\n        if (stack === undefined || stack === null) {\r\n            return '';\r\n        }\r\n        var cleanupPatterns = [new RegExp(vscode.env.appRoot.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi')];\r\n        if (this.extension) {\r\n            cleanupPatterns.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'), 'gi'));\r\n        }\r\n        var updatedStack = stack;\r\n        if (anonymizeFilePaths) {\r\n            var cleanUpIndexes = [];\r\n            for (var _i = 0, cleanupPatterns_1 = cleanupPatterns; _i < cleanupPatterns_1.length; _i++) {\r\n                var regexp = cleanupPatterns_1[_i];\r\n                while (true) {\r\n                    var result = regexp.exec(stack);\r\n                    if (!result) {\r\n                        break;\r\n                    }\r\n                    cleanUpIndexes.push([result.index, regexp.lastIndex]);\r\n                }\r\n            }\r\n            var nodeModulesRegex = /^[\\\\\\/]?(node_modules|node_modules\\.asar)[\\\\\\/]/;\r\n            var fileRegex = /(file:\\/\\/)?([a-zA-Z]:(\\\\\\\\|\\\\|\\/)|(\\\\\\\\|\\\\|\\/))?([\\w-\\._]+(\\\\\\\\|\\\\|\\/))+[\\w-\\._]*/g;\r\n            var lastIndex = 0;\r\n            updatedStack = '';\r\n            var _loop_1 = function () {\r\n                var result = fileRegex.exec(stack);\r\n                if (!result) {\r\n                    return \"break\";\r\n                }\r\n                // Anoynimize user file paths that do not need to be retained or cleaned up.\r\n                if (!nodeModulesRegex.test(result[0]) && cleanUpIndexes.every(function (_a) {\r\n                    var x = _a[0], y = _a[1];\r\n                    return result.index < x || result.index >= y;\r\n                })) {\r\n                    updatedStack += stack.substring(lastIndex, result.index) + '<REDACTED: user-file-path>';\r\n                    lastIndex = fileRegex.lastIndex;\r\n                }\r\n            };\r\n            while (true) {\r\n                var state_1 = _loop_1();\r\n                if (state_1 === \"break\")\r\n                    break;\r\n            }\r\n            if (lastIndex < stack.length) {\r\n                updatedStack += stack.substr(lastIndex);\r\n            }\r\n        }\r\n        // sanitize with configured cleanup patterns\r\n        for (var _a = 0, cleanupPatterns_2 = cleanupPatterns; _a < cleanupPatterns_2.length; _a++) {\r\n            var regexp = cleanupPatterns_2[_a];\r\n            updatedStack = updatedStack.replace(regexp, '');\r\n        }\r\n        return updatedStack;\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryEvent = function (eventName, properties, measurements) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryErrorEvent = function (eventName, properties, measurements, errorProps) {\r\n        var _this = this;\r\n        if (this.userOptIn && eventName && this.appInsightsClient) {\r\n            // always clean the properties if first party\r\n            // do not send any error properties if we shouldn't send error telemetry\r\n            // if we have no errorProps, assume all are error props\r\n            var cleanProperties = this.cloneAndChange(properties, function (key, prop) {\r\n                if (_this.shouldSendErrorTelemetry()) {\r\n                    return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n                }\r\n                if (errorProps === undefined || errorProps.indexOf(key) !== -1) {\r\n                    return 'REDACTED';\r\n                }\r\n                return _this.anonymizeFilePaths(prop, _this.firstParty);\r\n            });\r\n            this.appInsightsClient.trackEvent({\r\n                name: this.extensionId + \"/\" + eventName,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + eventName + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.sendTelemetryException = function (error, properties, measurements) {\r\n        var _this = this;\r\n        if (this.shouldSendErrorTelemetry() && this.userOptIn && error && this.appInsightsClient) {\r\n            var cleanProperties = this.cloneAndChange(properties, function (_key, prop) { return _this.anonymizeFilePaths(prop, _this.firstParty); });\r\n            this.appInsightsClient.trackException({\r\n                exception: error,\r\n                properties: cleanProperties,\r\n                measurements: measurements\r\n            });\r\n            if (this.logStream) {\r\n                this.logStream.write(\"telemetry/\" + error.name + \" \" + error.message + \" \" + JSON.stringify({ properties: properties, measurements: measurements }) + \"\\n\");\r\n            }\r\n        }\r\n    };\r\n    TelemetryReporter.prototype.dispose = function () {\r\n        var _this = this;\r\n        this.optOutListener.dispose();\r\n        var flushEventsToLogger = new Promise(function (resolve) {\r\n            if (!_this.logStream) {\r\n                return resolve(void 0);\r\n            }\r\n            _this.logStream.on('finish', resolve);\r\n            _this.logStream.end();\r\n        });\r\n        var flushEventsToAI = new Promise(function (resolve) {\r\n            if (_this.appInsightsClient) {\r\n                _this.appInsightsClient.flush({\r\n                    callback: function () {\r\n                        // all data flushed\r\n                        _this.appInsightsClient = undefined;\r\n                        resolve(void 0);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                resolve(void 0);\r\n            }\r\n        });\r\n        return Promise.all([flushEventsToAI, flushEventsToLogger]);\r\n    };\r\n    TelemetryReporter.TELEMETRY_CONFIG_ID = 'telemetry';\r\n    TelemetryReporter.TELEMETRY_CONFIG_ENABLED_ID = 'enableTelemetry';\r\n    return TelemetryReporter;\r\n}());\r\nexports.default = TelemetryReporter;\r\n//# sourceMappingURL=telemetryReporter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CorrelationContextManager = require(\"./AutoCollection/CorrelationContextManager\"); // Keep this first\nvar AutoCollectConsole = require(\"./AutoCollection/Console\");\nvar AutoCollectExceptions = require(\"./AutoCollection/Exceptions\");\nvar AutoCollectPerformance = require(\"./AutoCollection/Performance\");\nvar AutoCollectHttpDependencies = require(\"./AutoCollection/HttpDependencies\");\nvar AutoCollectHttpRequests = require(\"./AutoCollection/HttpRequests\");\nvar CorrelationIdManager = require(\"./Library/CorrelationIdManager\");\nvar Logging = require(\"./Library/Logging\");\nvar QuickPulseClient = require(\"./Library/QuickPulseStateManager\");\nvar NativePerformance_1 = require(\"./AutoCollection/NativePerformance\");\n// We export these imports so that SDK users may use these classes directly.\n// They're exposed using \"export import\" so that types are passed along as expected\nexports.TelemetryClient = require(\"./Library/NodeClient\");\nexports.Contracts = require(\"./Declarations/Contracts\");\nvar DistributedTracingModes;\n(function (DistributedTracingModes) {\n    /**\n     * (Default) Send Application Insights correlation headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI\"] = 0] = \"AI\";\n    /**\n     * Send both W3C Trace Context headers and back-compatibility Application Insights headers\n     */\n    DistributedTracingModes[DistributedTracingModes[\"AI_AND_W3C\"] = 1] = \"AI_AND_W3C\";\n})(DistributedTracingModes = exports.DistributedTracingModes || (exports.DistributedTracingModes = {}));\n// Default autocollection configuration\nvar _isConsole = true;\nvar _isConsoleLog = false;\nvar _isExceptions = true;\nvar _isPerformance = true;\nvar _isRequests = true;\nvar _isDependencies = true;\nvar _isDiskRetry = true;\nvar _isCorrelating = true;\nvar _forceClsHooked;\nvar _isSendingLiveMetrics = false; // Off by default\nvar _isNativePerformance = true;\nvar _disabledExtendedMetrics;\nvar _diskRetryInterval = undefined;\nvar _diskRetryMaxBytes = undefined;\nvar _console;\nvar _exceptions;\nvar _performance;\nvar _nativePerformance;\nvar _serverRequests;\nvar _clientRequests;\nvar _isStarted = false;\nvar _performanceLiveMetrics;\n/**\n * Initializes the default client. Should be called after setting\n * configuration options.\n *\n * @param setupString the Connection String or Instrumentation Key to use. Optional, if\n * this is not specified, the value will be read from the environment\n * variable APPLICATIONINSIGHTS_CONNECTION_STRING or APPINSIGHTS_INSTRUMENTATIONKEY.\n * @returns {Configuration} the configuration class to initialize\n * and start the SDK.\n */\nfunction setup(setupString) {\n    if (!exports.defaultClient) {\n        exports.defaultClient = new exports.TelemetryClient(setupString);\n        _console = new AutoCollectConsole(exports.defaultClient);\n        _exceptions = new AutoCollectExceptions(exports.defaultClient);\n        _performance = new AutoCollectPerformance(exports.defaultClient);\n        _serverRequests = new AutoCollectHttpRequests(exports.defaultClient);\n        _clientRequests = new AutoCollectHttpDependencies(exports.defaultClient);\n        if (!_nativePerformance) {\n            _nativePerformance = new NativePerformance_1.AutoCollectNativePerformance(exports.defaultClient);\n        }\n    }\n    else {\n        Logging.info(\"The default client is already setup\");\n    }\n    if (exports.defaultClient && exports.defaultClient.channel) {\n        exports.defaultClient.channel.setUseDiskRetryCaching(_isDiskRetry, _diskRetryInterval, _diskRetryMaxBytes);\n    }\n    return Configuration;\n}\nexports.setup = setup;\n/**\n * Starts automatic collection of telemetry. Prior to calling start no\n * telemetry will be *automatically* collected, though manual collection\n * is enabled.\n * @returns {ApplicationInsights} this class\n */\nfunction start() {\n    if (!!exports.defaultClient) {\n        _isStarted = true;\n        _console.enable(_isConsole, _isConsoleLog);\n        _exceptions.enable(_isExceptions);\n        _performance.enable(_isPerformance);\n        _nativePerformance.enable(_isNativePerformance, _disabledExtendedMetrics);\n        _serverRequests.useAutoCorrelation(_isCorrelating, _forceClsHooked);\n        _serverRequests.enable(_isRequests);\n        _clientRequests.enable(_isDependencies);\n        if (exports.liveMetricsClient && _isSendingLiveMetrics) {\n            exports.liveMetricsClient.enable(_isSendingLiveMetrics);\n        }\n    }\n    else {\n        Logging.warn(\"Start cannot be called before setup\");\n    }\n    return Configuration;\n}\nexports.start = start;\n/**\n * Returns an object that is shared across all code handling a given request.\n * This can be used similarly to thread-local storage in other languages.\n * Properties set on this object will be available to telemetry processors.\n *\n * Do not store sensitive information here.\n * Custom properties set on this object can be exposed in a future SDK\n * release via outgoing HTTP headers.\n * This is to allow for correlating data cross-component.\n *\n * This method will return null if automatic dependency correlation is disabled.\n * @returns A plain object for request storage or null if automatic dependency correlation is disabled.\n */\nfunction getCorrelationContext() {\n    if (_isCorrelating) {\n        return CorrelationContextManager.CorrelationContextManager.getCurrentContext();\n    }\n    return null;\n}\nexports.getCorrelationContext = getCorrelationContext;\n/**\n * Returns a function that will get the same correlation context within its\n * function body as the code executing this function.\n * Use this method if automatic dependency correlation is not propagating\n * correctly to an asynchronous callback.\n */\nfunction wrapWithCorrelationContext(fn) {\n    return CorrelationContextManager.CorrelationContextManager.wrapCallback(fn);\n}\nexports.wrapWithCorrelationContext = wrapWithCorrelationContext;\n/**\n * The active configuration for global SDK behaviors, such as autocollection.\n */\nvar Configuration = (function () {\n    function Configuration() {\n    }\n    /**\n     * Sets the distributed tracing modes. If W3C mode is enabled, W3C trace context\n     * headers (traceparent/tracestate) will be parsed in all incoming requests, and included in outgoing\n     * requests. In W3C mode, existing back-compatibility AI headers will also be parsed and included.\n     * Enabling W3C mode will not break existing correlation with other Application Insights instrumented\n     * services. Default=AI\n    */\n    Configuration.setDistributedTracingMode = function (value) {\n        CorrelationIdManager.w3cEnabled = value === DistributedTracingModes.AI_AND_W3C;\n        return Configuration;\n    };\n    /**\n     * Sets the state of console and logger tracking (enabled by default for third-party loggers only)\n     * @param value if true logger activity will be sent to Application Insights\n     * @param collectConsoleLog if true, logger autocollection will include console.log calls (default false)\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectConsole = function (value, collectConsoleLog) {\n        if (collectConsoleLog === void 0) { collectConsoleLog = false; }\n        _isConsole = value;\n        _isConsoleLog = collectConsoleLog;\n        if (_isStarted) {\n            _console.enable(value, collectConsoleLog);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of exception tracking (enabled by default)\n     * @param value if true uncaught exceptions will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectExceptions = function (value) {\n        _isExceptions = value;\n        if (_isStarted) {\n            _exceptions.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of performance tracking (enabled by default)\n     * @param value if true performance counters will be collected every second and sent to Application Insights\n     * @param collectExtendedMetrics if true, extended metrics counters will be collected every minute and sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectPerformance = function (value, collectExtendedMetrics) {\n        if (collectExtendedMetrics === void 0) { collectExtendedMetrics = true; }\n        _isPerformance = value;\n        var extendedMetricsConfig = NativePerformance_1.AutoCollectNativePerformance.parseEnabled(collectExtendedMetrics);\n        _isNativePerformance = extendedMetricsConfig.isEnabled;\n        _disabledExtendedMetrics = extendedMetricsConfig.disabledMetrics;\n        if (_isStarted) {\n            _performance.enable(value);\n            _nativePerformance.enable(extendedMetricsConfig.isEnabled, extendedMetricsConfig.disabledMetrics);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of request tracking (enabled by default)\n     * @param value if true requests will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectRequests = function (value) {\n        _isRequests = value;\n        if (_isStarted) {\n            _serverRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of dependency tracking (enabled by default)\n     * @param value if true dependencies will be sent to Application Insights\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoCollectDependencies = function (value) {\n        _isDependencies = value;\n        if (_isStarted) {\n            _clientRequests.enable(value);\n        }\n        return Configuration;\n    };\n    /**\n     * Sets the state of automatic dependency correlation (enabled by default)\n     * @param value if true dependencies will be correlated with requests\n     * @param useAsyncHooks if true, forces use of experimental async_hooks module to provide correlation. If false, instead uses only patching-based techniques. If left blank, the best option is chosen for you based on your version of Node.js.\n     * @returns {Configuration} this class\n     */\n    Configuration.setAutoDependencyCorrelation = function (value, useAsyncHooks) {\n        _isCorrelating = value;\n        _forceClsHooked = useAsyncHooks;\n        if (_isStarted) {\n            _serverRequests.useAutoCorrelation(value, useAsyncHooks);\n        }\n        return Configuration;\n    };\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * Note that this method only applies to the default client. Disk-backed retry caching is disabled by default for additional clients.\n     * For enable for additional clients, use client.channel.setUseDiskRetryCaching(true).\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Configuration.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        _isDiskRetry = value;\n        _diskRetryInterval = resendInterval;\n        _diskRetryMaxBytes = maxBytesOnDisk;\n        if (exports.defaultClient && exports.defaultClient.channel) {\n            exports.defaultClient.channel.setUseDiskRetryCaching(value, resendInterval, maxBytesOnDisk);\n        }\n        return Configuration;\n    };\n    /**\n     * Enables debug and warning logging for AppInsights itself.\n     * @param enableDebugLogging if true, enables debug logging\n     * @param enableWarningLogging if true, enables warning logging\n     * @returns {Configuration} this class\n     */\n    Configuration.setInternalLogging = function (enableDebugLogging, enableWarningLogging) {\n        if (enableDebugLogging === void 0) { enableDebugLogging = false; }\n        if (enableWarningLogging === void 0) { enableWarningLogging = true; }\n        Logging.enableDebug = enableDebugLogging;\n        Logging.disableWarnings = !enableWarningLogging;\n        return Configuration;\n    };\n    /**\n     * Enables communication with Application Insights Live Metrics.\n     * @param enable if true, enables communication with the live metrics service\n     */\n    Configuration.setSendLiveMetrics = function (enable) {\n        if (enable === void 0) { enable = false; }\n        if (!exports.defaultClient) {\n            // Need a defaultClient so that we can add the QPS telemetry processor to it\n            Logging.warn(\"Live metrics client cannot be setup without the default client\");\n            return Configuration;\n        }\n        if (!exports.liveMetricsClient && enable) {\n            // No qps client exists. Create one and prepare it to be enabled at .start()\n            exports.liveMetricsClient = new QuickPulseClient(exports.defaultClient.config.instrumentationKey);\n            _performanceLiveMetrics = new AutoCollectPerformance(exports.liveMetricsClient, 1000, true);\n            exports.liveMetricsClient.addCollector(_performanceLiveMetrics);\n            exports.defaultClient.quickPulseClient = exports.liveMetricsClient; // Need this so we can forward all manual tracks to live metrics via PerformanceMetricsTelemetryProcessor\n        }\n        else if (exports.liveMetricsClient) {\n            // qps client already exists; enable/disable it\n            exports.liveMetricsClient.enable(enable);\n        }\n        _isSendingLiveMetrics = enable;\n        return Configuration;\n    };\n    // Convenience shortcut to ApplicationInsights.start\n    Configuration.start = start;\n    return Configuration;\n}());\nexports.Configuration = Configuration;\n/**\n * Disposes the default client and all the auto collectors so they can be reinitialized with different configuration\n*/\nfunction dispose() {\n    exports.defaultClient = null;\n    _isStarted = false;\n    if (_console) {\n        _console.dispose();\n    }\n    if (_exceptions) {\n        _exceptions.dispose();\n    }\n    if (_performance) {\n        _performance.dispose();\n    }\n    if (_nativePerformance) {\n        _nativePerformance.dispose();\n    }\n    if (_serverRequests) {\n        _serverRequests.dispose();\n    }\n    if (_clientRequests) {\n        _clientRequests.dispose();\n    }\n    if (exports.liveMetricsClient) {\n        exports.liveMetricsClient.enable(false);\n        _isSendingLiveMetrics = false;\n        exports.liveMetricsClient = undefined;\n    }\n}\nexports.dispose = dispose;\n//# sourceMappingURL=applicationinsights.js.map","\"use strict\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar azuresdk = require(\"./azure-coretracing.pub\");\nexports.azuresdk = azuresdk;\nvar bunyan = require(\"./bunyan.pub\");\nexports.bunyan = bunyan;\nvar consolePub = require(\"./console.pub\");\nexports.console = consolePub;\nvar mongodbCore = require(\"./mongodb-core.pub\");\nexports.mongodbCore = mongodbCore;\nvar mongodb = require(\"./mongodb.pub\");\nexports.mongodb = mongodb;\nvar mysql = require(\"./mysql.pub\");\nexports.mysql = mysql;\nvar pgPool = require(\"./pg-pool.pub\");\nexports.pgPool = pgPool;\nvar pg = require(\"./pg.pub\");\nexports.pg = pg;\nvar redis = require(\"./redis.pub\");\nexports.redis = redis;\nvar tedious = require(\"./tedious.pub\");\nexports.tedious = tedious;\nvar winston = require(\"./winston.pub\");\nexports.winston = winston;\nfunction enable() {\n    bunyan.enable();\n    consolePub.enable();\n    mongodbCore.enable();\n    mongodb.enable();\n    mysql.enable();\n    pg.enable();\n    pgPool.enable();\n    redis.enable();\n    winston.enable();\n    azuresdk.enable();\n    tedious.enable();\n}\nexports.enable = enable;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nexports.AzureMonitorSymbol = \"Azure_Monitor_Tracer\";\n/**\n * By default, @azure/core-tracing default tracer is a NoopTracer.\n * This patching changes the default tracer to a patched BasicTracer\n * which emits ended spans as diag-channel events.\n *\n * The @opentelemetry/tracing package must be installed to use these patches\n * https://www.npmjs.com/package/@opentelemetry/tracing\n * @param coreTracing\n */\nvar azureCoreTracingPatchFunction = function (coreTracing) {\n    try {\n        var BasicTracer = require(\"@opentelemetry/tracing\").BasicTracer;\n        var tracerConfig = diagnostic_channel_1.channel.spanContextPropagator\n            ? { scopeManager: diagnostic_channel_1.channel.spanContextPropagator }\n            : undefined;\n        var tracer_1 = new BasicTracer(tracerConfig);\n        // Patch startSpan instead of using spanProcessor.onStart because parentSpan must be\n        // set while the span is constructed\n        var startSpanOriginal_1 = tracer_1.startSpan;\n        tracer_1.startSpan = function (name, options) {\n            // if no parent span was provided, apply the current context\n            if (!options || !options.parent) {\n                var parentOperation = tracer_1.getCurrentSpan();\n                if (parentOperation && parentOperation.operation && parentOperation.operation.traceparent) {\n                    options = __assign({}, options, { parent: {\n                            traceId: parentOperation.operation.traceparent.traceId,\n                            spanId: parentOperation.operation.traceparent.spanId,\n                        } });\n                }\n            }\n            var span = startSpanOriginal_1.call(this, name, options);\n            span.addEvent(\"Application Insights Integration enabled\");\n            return span;\n        };\n        tracer_1.addSpanProcessor(new AzureMonitorSpanProcessor());\n        tracer_1[exports.AzureMonitorSymbol] = true;\n        coreTracing.setTracer(tracer_1); // recordSpanData is not present on BasicTracer - cast to any\n    }\n    catch (e) { /* squash errors */ }\n    return coreTracing;\n};\nvar AzureMonitorSpanProcessor = /** @class */ (function () {\n    function AzureMonitorSpanProcessor() {\n    }\n    AzureMonitorSpanProcessor.prototype.onStart = function (span) {\n        // noop since startSpan is already patched\n    };\n    AzureMonitorSpanProcessor.prototype.onEnd = function (span) {\n        diagnostic_channel_1.channel.publish(\"azure-coretracing\", span);\n    };\n    AzureMonitorSpanProcessor.prototype.shutdown = function () {\n        // noop\n    };\n    return AzureMonitorSpanProcessor;\n}());\nexports.azureCoreTracing = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: azureCoreTracingPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"@azure/core-tracing\", exports.azureCoreTracing);\n}\nexports.enable = enable;\n//# sourceMappingURL=azure-coretracing.pub.js.map","module.exports = require(\"@opentelemetry/tracing\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar bunyanPatchFunction = function (originalBunyan) {\n    var originalEmit = originalBunyan.prototype._emit;\n    originalBunyan.prototype._emit = function (rec, noemit) {\n        var ret = originalEmit.apply(this, arguments);\n        if (!noemit) {\n            var str = ret;\n            if (!str) {\n                str = originalEmit.call(this, rec, true);\n            }\n            diagnostic_channel_1.channel.publish(\"bunyan\", { level: rec.level, result: str });\n        }\n        return ret;\n    };\n    return originalBunyan;\n};\nexports.bunyan = {\n    versionSpecifier: \">= 1.0.0 < 2.0.0\",\n    patch: bunyanPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"bunyan\", exports.bunyan);\n}\nexports.enable = enable;\n//# sourceMappingURL=bunyan.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar stream_1 = require(\"stream\");\nvar consolePatchFunction = function (originalConsole) {\n    var aiLoggingOutStream = new stream_1.Writable();\n    var aiLoggingErrStream = new stream_1.Writable();\n    // Default console is roughly equivalent to `new Console(process.stdout, process.stderr)`\n    // We create a version which publishes to the channel and also to stdout/stderr\n    aiLoggingOutStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message });\n        return true;\n    };\n    aiLoggingErrStream.write = function (chunk) {\n        if (!chunk) {\n            return true;\n        }\n        var message = chunk.toString();\n        diagnostic_channel_1.channel.publish(\"console\", { message: message, stderr: true });\n        return true;\n    };\n    var aiLoggingConsole = new originalConsole.Console(aiLoggingOutStream, aiLoggingErrStream);\n    var consoleMethods = [\"log\", \"info\", \"warn\", \"error\", \"dir\", \"time\", \"timeEnd\", \"trace\", \"assert\"];\n    var _loop_1 = function (method) {\n        var originalMethod = originalConsole[method];\n        if (originalMethod) {\n            originalConsole[method] = function () {\n                if (aiLoggingConsole[method]) {\n                    try {\n                        aiLoggingConsole[method].apply(aiLoggingConsole, arguments);\n                    }\n                    catch (e) {\n                        // Ignore errors; allow the original method to throw if necessary\n                    }\n                }\n                return originalMethod.apply(originalConsole, arguments);\n            };\n        }\n    };\n    for (var _i = 0, consoleMethods_1 = consoleMethods; _i < consoleMethods_1.length; _i++) {\n        var method = consoleMethods_1[_i];\n        _loop_1(method);\n    }\n    return originalConsole;\n};\nexports.console = {\n    versionSpecifier: \">= 4.0.0\",\n    patch: consolePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"console\", exports.console);\n    // Force patching of console\n    /* tslint:disable-next-line:no-var-requires */\n    require(\"console\");\n}\nexports.enable = enable;\n//# sourceMappingURL=console.pub.js.map","module.exports = require(\"console\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbcorePatchFunction = function (originalMongoCore) {\n    var originalConnect = originalMongoCore.Server.prototype.connect;\n    originalMongoCore.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.pool.write;\n        this.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.pool.logout;\n        this.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongoCore;\n};\nexports.mongoCore = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: mongodbcorePatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb-core\", exports.mongoCore);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb-core.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar mongodbPatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument({\n        operationIdGenerator: {\n            next: function () {\n                return diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n            },\n        },\n    });\n    var eventMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true });\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event.operationId === \"function\") {\n            event.operationId(function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n        }\n        else {\n            // fallback -- correlation will not work here\n            diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false });\n        }\n    });\n    return originalMongo;\n};\nvar mongodb3PatchFunction = function (originalMongo) {\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = __assign({}, event, { time: new Date() });\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\n// In mongodb 3.3.0, mongodb-core was merged into mongodb, so the same patching\n// can be used here. this.s.pool was changed to this.s.coreTopology.s.pool\nvar mongodbcorePatchFunction = function (originalMongo) {\n    var originalConnect = originalMongo.Server.prototype.connect;\n    originalMongo.Server.prototype.connect = function contextPreservingConnect() {\n        var ret = originalConnect.apply(this, arguments);\n        // Messages sent to mongo progress through a pool\n        // This can result in context getting mixed between different responses\n        // so we wrap the callbacks to restore appropriate state\n        var originalWrite = this.s.coreTopology.s.pool.write;\n        this.s.coreTopology.s.pool.write = function contextPreservingWrite() {\n            var cbidx = typeof arguments[1] === \"function\" ? 1 : 2;\n            if (typeof arguments[cbidx] === \"function\") {\n                arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(arguments[cbidx]);\n            }\n            return originalWrite.apply(this, arguments);\n        };\n        // Logout is a special case, it doesn't call the write function but instead\n        // directly calls into connection.write\n        var originalLogout = this.s.coreTopology.s.pool.logout;\n        this.s.coreTopology.s.pool.logout = function contextPreservingLogout() {\n            if (typeof arguments[1] === \"function\") {\n                arguments[1] = diagnostic_channel_1.channel.bindToContext(arguments[1]);\n            }\n            return originalLogout.apply(this, arguments);\n        };\n        return ret;\n    };\n    return originalMongo;\n};\nvar mongodb330PatchFunction = function (originalMongo) {\n    mongodbcorePatchFunction(originalMongo); // apply mongodb-core patches\n    var listener = originalMongo.instrument();\n    var eventMap = {};\n    var contextMap = {};\n    listener.on(\"started\", function (event) {\n        if (eventMap[event.requestId]) {\n            // Note: Mongo can generate 2 completely separate requests\n            // which share the same requestId, if a certain race condition is triggered.\n            // For now, we accept that this can happen and potentially miss or mislabel some events.\n            return;\n        }\n        contextMap[event.requestId] = diagnostic_channel_1.channel.bindToContext(function (cb) { return cb(); });\n        eventMap[event.requestId] = event;\n    });\n    listener.on(\"succeeded\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: true }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    listener.on(\"failed\", function (event) {\n        var startedData = eventMap[event.requestId];\n        if (startedData) {\n            delete eventMap[event.requestId];\n        }\n        if (typeof event === \"object\" && typeof contextMap[event.requestId] === \"function\") {\n            contextMap[event.requestId](function () { return diagnostic_channel_1.channel.publish(\"mongodb\", { startedData: startedData, event: event, succeeded: false }); });\n            delete contextMap[event.requestId];\n        }\n    });\n    return originalMongo;\n};\nexports.mongo2 = {\n    versionSpecifier: \">= 2.0.0 <= 3.0.5\",\n    patch: mongodbPatchFunction,\n};\nexports.mongo3 = {\n    versionSpecifier: \"> 3.0.5 < 3.3.0\",\n    patch: mongodb3PatchFunction,\n};\nexports.mongo330 = {\n    versionSpecifier: \">= 3.3.0 < 4.0.0\",\n    patch: mongodb330PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo3);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mongodb\", exports.mongo330);\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar path = require(\"path\");\nvar mysqlPatchFunction = function (originalMysql, originalMysqlPath) {\n    // The `name` passed in here is for debugging purposes,\n    // to help distinguish which object is being patched.\n    var patchObjectFunction = function (obj, name) {\n        return function (func, cbWrapper) {\n            var originalFunc = obj[func];\n            if (originalFunc) {\n                obj[func] = function mysqlContextPreserver() {\n                    // Find the callback, if there is one\n                    var cbidx = arguments.length - 1;\n                    for (var i = arguments.length - 1; i >= 0; --i) {\n                        if (typeof arguments[i] === \"function\") {\n                            cbidx = i;\n                            break;\n                        }\n                        else if (typeof arguments[i] !== \"undefined\") {\n                            break;\n                        }\n                    }\n                    var cb = arguments[cbidx];\n                    var resultContainer = { result: null, startTime: null, startDate: null };\n                    if (typeof cb === \"function\") {\n                        // Preserve context on the callback.\n                        // If this is one of the functions that we want to track,\n                        // then wrap the callback with the tracking wrapper\n                        if (cbWrapper) {\n                            resultContainer.startTime = process.hrtime();\n                            resultContainer.startDate = new Date();\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cbWrapper(resultContainer, cb));\n                        }\n                        else {\n                            arguments[cbidx] = diagnostic_channel_1.channel.bindToContext(cb);\n                        }\n                    }\n                    var result = originalFunc.apply(this, arguments);\n                    resultContainer.result = result;\n                    return result;\n                };\n            }\n        };\n    };\n    var patchClassMemberFunction = function (classObject, name) {\n        return patchObjectFunction(classObject.prototype, name + \".prototype\");\n    };\n    var connectionCallbackFunctions = [\n        \"connect\", \"changeUser\",\n        \"ping\", \"statistics\", \"end\",\n    ];\n    var connectionClass = require(path.dirname(originalMysqlPath) + \"/lib/Connection\");\n    connectionCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(connectionClass, \"Connection\")(value); });\n    // Connection.createQuery is a static method\n    patchObjectFunction(connectionClass, \"Connection\")(\"createQuery\", function (resultContainer, cb) {\n        return function (err) {\n            var hrDuration = process.hrtime(resultContainer.startTime);\n            /* tslint:disable-next-line:no-bitwise */\n            var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n            diagnostic_channel_1.channel.publish(\"mysql\", { query: resultContainer.result, callbackArgs: arguments, err: err, duration: duration, time: resultContainer.startDate });\n            cb.apply(this, arguments);\n        };\n    });\n    var poolCallbackFunctions = [\n        \"_enqueueCallback\",\n    ];\n    var poolClass = require(path.dirname(originalMysqlPath) + \"/lib/Pool\");\n    poolCallbackFunctions.forEach(function (value) { return patchClassMemberFunction(poolClass, \"Pool\")(value); });\n    return originalMysql;\n};\nexports.mysql = {\n    versionSpecifier: \">= 2.0.0 < 3.0.0\",\n    patch: mysqlPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"mysql\", exports.mysql);\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.pub.js.map","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 68;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 69;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nfunction postgresPool1PatchFunction(originalPgPool) {\n    var originalConnect = originalPgPool.prototype.connect;\n    originalPgPool.prototype.connect = function connect(callback) {\n        if (callback) {\n            arguments[0] = diagnostic_channel_1.channel.bindToContext(callback);\n        }\n        return originalConnect.apply(this, arguments);\n    };\n    return originalPgPool;\n}\nexports.postgresPool1 = {\n    versionSpecifier: \">= 1.0.0 < 3.0.0\",\n    patch: postgresPool1PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg-pool\", exports.postgresPool1);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg-pool.pub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar events_1 = require(\"events\");\nfunction postgres6PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                // emulate weird internal behavior in pg@6\n                // on success, the callback is called *before* query events are emitted\n                // on failure, the callback is called *instead of* the query emitting events\n                // with no events, that means no promises (since the promise is resolved/rejected in an event handler)\n                // since we are always inserting ourselves as a callback, we have to restore the original\n                // behavior if the user didn't provide one themselves\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // this function takes too many variations of arguments.\n        // this patches any provided callback or creates a new callback if one wasn't provided.\n        // since the callback is always called (if provided) in addition to always having a Promisified\n        // EventEmitter returned (well, sometimes -- see above), its safe to insert a callback if none was given\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callback = patchCallback(callback);\n                }\n                else {\n                    data.query.text = config;\n                    // pg v6 will, for some reason, accept both\n                    // client.query(\"...\", undefined, () => {...})\n                    // **and**\n                    // client.query(\"...\", () => {...});\n                    // Internally, precedence is given to the callback argument\n                    if (callback) {\n                        callback = patchCallback(callback);\n                    }\n                    else {\n                        values = patchCallback(values);\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    values = patchCallback(values);\n                }\n                else {\n                    config.callback = patchCallback(config.callback);\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        return queryResult;\n    };\n    return originalPg;\n}\nfunction postgres7PatchFunction(originalPg, originalPgPath) {\n    var originalClientQuery = originalPg.Client.prototype.query;\n    var diagnosticOriginalFunc = \"__diagnosticOriginalFunc\";\n    // wherever the callback is passed, find it, save it, and remove it from the call\n    // to the the original .query() function\n    originalPg.Client.prototype.query = function query(config, values, callback) {\n        var _this = this;\n        var callbackProvided = !!callback; // Starting in pg@7.x+, Promise is returned only if !callbackProvided\n        var data = {\n            query: {},\n            database: {\n                host: this.connectionParameters.host,\n                port: this.connectionParameters.port,\n            },\n            result: null,\n            error: null,\n            duration: 0,\n            time: new Date(),\n        };\n        var start = process.hrtime();\n        var queryResult;\n        function patchCallback(cb) {\n            if (cb && cb[diagnosticOriginalFunc]) {\n                cb = cb[diagnosticOriginalFunc];\n            }\n            var trackingCallback = diagnostic_channel_1.channel.bindToContext(function (err, res) {\n                var end = process.hrtime(start);\n                data.result = res && { rowCount: res.rowCount, command: res.command };\n                data.error = err;\n                data.duration = Math.ceil((end[0] * 1e3) + (end[1] / 1e6));\n                diagnostic_channel_1.channel.publish(\"postgres\", data);\n                if (err) {\n                    if (cb) {\n                        return cb.apply(this, arguments);\n                    }\n                    else if (queryResult && queryResult instanceof events_1.EventEmitter) {\n                        queryResult.emit(\"error\", err);\n                    }\n                }\n                else if (cb) {\n                    cb.apply(this, arguments);\n                }\n            });\n            try {\n                Object.defineProperty(trackingCallback, diagnosticOriginalFunc, { value: cb });\n                return trackingCallback;\n            }\n            catch (e) {\n                // this should never happen, but bailout in case it does\n                return cb;\n            }\n        }\n        // Only try to wrap the callback if it is a function. We want to keep the same\n        // behavior of returning a promise only if no callback is provided. Wrapping\n        // a nonfunction makes it a function and pg will interpret it as a callback\n        try {\n            if (typeof config === \"string\") {\n                if (values instanceof Array) {\n                    data.query.preparable = {\n                        text: config,\n                        args: values,\n                    };\n                    callbackProvided = typeof callback === \"function\";\n                    callback = callbackProvided ? patchCallback(callback) : callback;\n                }\n                else {\n                    data.query.text = config;\n                    if (callback) {\n                        callbackProvided = typeof callback === \"function\";\n                        callback = callbackProvided ? patchCallback(callback) : callback;\n                    }\n                    else {\n                        callbackProvided = typeof values === \"function\";\n                        values = callbackProvided ? patchCallback(values) : values;\n                    }\n                }\n            }\n            else {\n                if (typeof config.name === \"string\") {\n                    data.query.plan = config.name;\n                }\n                else if (config.values instanceof Array) {\n                    data.query.preparable = {\n                        text: config.text,\n                        args: config.values,\n                    };\n                }\n                else {\n                    data.query.text = config.text;\n                }\n                if (callback) {\n                    callbackProvided = typeof callback === \"function\";\n                    callback = patchCallback(callback);\n                }\n                else if (values) {\n                    callbackProvided = typeof values === \"function\";\n                    values = callbackProvided ? patchCallback(values) : values;\n                }\n                else {\n                    callbackProvided = typeof config.callback === \"function\";\n                    config.callback = callbackProvided ? patchCallback(config.callback) : config.callback;\n                }\n            }\n        }\n        catch (e) {\n            // if our logic here throws, bail out and just let pg do its thing\n            return originalClientQuery.apply(this, arguments);\n        }\n        arguments[0] = config;\n        arguments[1] = values;\n        arguments[2] = callback;\n        arguments.length = (arguments.length > 3) ? arguments.length : 3;\n        queryResult = originalClientQuery.apply(this, arguments);\n        if (!callbackProvided) {\n            // no callback, so create a pass along promise\n            return queryResult\n                // pass resolved promise after publishing the event\n                .then(function (result) {\n                patchCallback()(undefined, result);\n                return new _this._Promise(function (resolve, reject) {\n                    resolve(result);\n                });\n            })\n                // pass along rejected promise after publishing the error\n                .catch(function (error) {\n                patchCallback()(error, undefined);\n                return new _this._Promise(function (resolve, reject) {\n                    reject(error);\n                });\n            });\n        }\n        return queryResult;\n    };\n    return originalPg;\n}\nexports.postgres6 = {\n    versionSpecifier: \"6.*\",\n    patch: postgres6PatchFunction,\n};\nexports.postgres7 = {\n    versionSpecifier: \">=7.* <=8.*\",\n    patch: postgres7PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres6);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"pg\", exports.postgres7);\n}\nexports.enable = enable;\n//# sourceMappingURL=pg.pub.js.map","module.exports = require(\"events\");","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar redisPatchFunction = function (originalRedis) {\n    var originalSend = originalRedis.RedisClient.prototype.internal_send_command;\n    // Note: This is mixing together both context tracking and dependency tracking\n    originalRedis.RedisClient.prototype.internal_send_command = function (commandObj) {\n        if (commandObj) {\n            var cb_1 = commandObj.callback;\n            if (!cb_1 || !cb_1.pubsubBound) {\n                var address_1 = this.address;\n                var startTime_1 = process.hrtime();\n                var startDate_1 = new Date();\n                // Note: augmenting the callback on internal_send_command is correct for context\n                // tracking, but may be too low-level for dependency tracking. There are some 'errors'\n                // which higher levels expect in some cases\n                // However, the only other option is to intercept every individual command.\n                commandObj.callback = diagnostic_channel_1.channel.bindToContext(function (err, result) {\n                    var hrDuration = process.hrtime(startTime_1);\n                    /* tslint:disable-next-line:no-bitwise */\n                    var duration = (hrDuration[0] * 1e3 + hrDuration[1] / 1e6) | 0;\n                    diagnostic_channel_1.channel.publish(\"redis\", { duration: duration, address: address_1, commandObj: commandObj, err: err, result: result, time: startDate_1 });\n                    if (typeof cb_1 === \"function\") {\n                        cb_1.apply(this, arguments);\n                    }\n                });\n                commandObj.callback.pubsubBound = true;\n            }\n        }\n        return originalSend.call(this, commandObj);\n    };\n    return originalRedis;\n};\nexports.redis = {\n    versionSpecifier: \">= 2.0.0 < 4.0.0\",\n    patch: redisPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"redis\", exports.redis);\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.pub.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar tediousPatchFunction = function (originalTedious) {\n    var originalMakeRequest = originalTedious.Connection.prototype.makeRequest;\n    originalTedious.Connection.prototype.makeRequest = function makeRequest() {\n        function getPatchedCallback(origCallback) {\n            var start = process.hrtime();\n            var data = {\n                query: {},\n                database: {\n                    host: null,\n                    port: null,\n                },\n                result: null,\n                error: null,\n                duration: 0,\n            };\n            return diagnostic_channel_1.channel.bindToContext(function (err, rowCount, rows) {\n                var end = process.hrtime(start);\n                data = __assign({}, data, { database: {\n                        host: this.connection.config.server,\n                        port: this.connection.config.options.port,\n                    }, result: !err && { rowCount: rowCount, rows: rows }, query: {\n                        text: this.parametersByName.statement.value,\n                    }, error: err, duration: Math.ceil((end[0] * 1e3) + (end[1] / 1e6)) });\n                diagnostic_channel_1.channel.publish(\"tedious\", data);\n                origCallback.call(this, err, rowCount, rows);\n            });\n        }\n        var request = arguments[0];\n        arguments[0].callback = getPatchedCallback(request.callback);\n        originalMakeRequest.apply(this, arguments);\n    };\n    return originalTedious;\n};\nexports.tedious = {\n    versionSpecifier: \">= 6.0.0 < 9.0.0\",\n    patch: tediousPatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"tedious\", exports.tedious);\n}\nexports.enable = enable;\n//# sourceMappingURL=tedious.pub.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license. See LICENSE file in the project root for details.\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\n// register a \"filter\" with each logger that publishes the data about to be logged\nvar winston2PatchFunction = function (originalWinston) {\n    var originalLog = originalWinston.Logger.prototype.log;\n    var curLevels;\n    var loggingFilter = function (level, message, meta) {\n        var levelKind;\n        if (curLevels === originalWinston.config.npm.levels) {\n            levelKind = \"npm\";\n        }\n        else if (curLevels === originalWinston.config.syslog.levels) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        diagnostic_channel_1.channel.publish(\"winston\", { level: level, message: message, meta: meta, levelKind: levelKind });\n        return message;\n    };\n    // whenever someone logs, ensure our filter comes last\n    originalWinston.Logger.prototype.log = function log() {\n        curLevels = this.levels;\n        if (!this.filters || this.filters.length === 0) {\n            this.filters = [loggingFilter];\n        }\n        else if (this.filters[this.filters.length - 1] !== loggingFilter) {\n            this.filters = this.filters.filter(function (f) { return f !== loggingFilter; });\n            this.filters.push(loggingFilter);\n        }\n        return originalLog.apply(this, arguments);\n    };\n    return originalWinston;\n};\nvar winston3PatchFunction = function (originalWinston) {\n    var mapLevelToKind = function (winston, level) {\n        var levelKind;\n        if (winston.config.npm.levels[level] != null) {\n            levelKind = \"npm\";\n        }\n        else if (winston.config.syslog.levels[level] != null) {\n            levelKind = \"syslog\";\n        }\n        else {\n            levelKind = \"unknown\";\n        }\n        return levelKind;\n    };\n    var AppInsightsTransport = /** @class */ (function (_super) {\n        __extends(AppInsightsTransport, _super);\n        function AppInsightsTransport(winston, opts) {\n            var _this = _super.call(this, opts) || this;\n            _this.winston = winston;\n            return _this;\n        }\n        AppInsightsTransport.prototype.log = function (info, callback) {\n            // tslint:disable-next-line:prefer-const - try to obtain level from Symbol(level) afterwards\n            var message = info.message, level = info.level, meta = info.meta, splat = __rest(info, [\"message\", \"level\", \"meta\"]);\n            level = typeof Symbol[\"for\"] === \"function\" ? info[Symbol[\"for\"](\"level\")] : level; // Symbol(level) is uncolorized, so prefer getting it from here\n            message = info instanceof Error ? info : message; // Winston places Errors at info, strings at info.message\n            var levelKind = mapLevelToKind(this.winston, level);\n            meta = meta || {}; // Winston _somtimes_ puts metadata inside meta, so start from here\n            for (var key in splat) {\n                if (splat.hasOwnProperty(key)) {\n                    meta[key] = splat[key];\n                }\n            }\n            diagnostic_channel_1.channel.publish(\"winston\", { message: message, level: level, levelKind: levelKind, meta: meta });\n            callback();\n        };\n        return AppInsightsTransport;\n    }(originalWinston.Transport));\n    // Patch this function\n    function patchedConfigure() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        this.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n    }\n    var origCreate = originalWinston.createLogger;\n    originalWinston.createLogger = function patchedCreate() {\n        // Grab highest sev logging level in case of custom logging levels\n        var levels = arguments[0].levels || originalWinston.config.npm.levels;\n        var lastLevel;\n        for (var level in levels) {\n            if (levels.hasOwnProperty(level)) {\n                lastLevel = lastLevel === undefined || levels[level] > levels[lastLevel] ? level : lastLevel;\n            }\n        }\n        // Add custom app insights transport to the end\n        // Remark: Configure is not available until after createLogger()\n        // and the Logger prototype is not exported in winston 3.x, so\n        // patch both createLogger and configure. Could also call configure\n        // again after createLogger, but that would cause configure to be called\n        // twice per create.\n        var result = origCreate.apply(this, arguments);\n        result.add(new AppInsightsTransport(originalWinston, { level: lastLevel }));\n        var origConfigure = result.configure;\n        result.configure = function () {\n            origConfigure.apply(this, arguments);\n            patchedConfigure.apply(this, arguments);\n        };\n        return result;\n    };\n    var origRootConfigure = originalWinston.createLogger;\n    originalWinston.configure = function () {\n        origRootConfigure.apply(this, arguments);\n        patchedConfigure.apply(this, arguments);\n    };\n    originalWinston.add(new AppInsightsTransport(originalWinston));\n    return originalWinston;\n};\nexports.winston3 = {\n    versionSpecifier: \"3.x\",\n    patch: winston3PatchFunction,\n};\nexports.winston2 = {\n    versionSpecifier: \"2.x\",\n    patch: winston2PatchFunction,\n};\nfunction enable() {\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston2);\n    diagnostic_channel_1.channel.registerMonkeyPatch(\"winston\", exports.winston3);\n}\nexports.enable = enable;\n//# sourceMappingURL=winston.pub.js.map","'use strict';\n\nconst semver = require('semver');\n\n/**\n * In order to increase node version support, this loads the version of context\n * that is appropriate for the version of on nodejs that is running.\n * Node < v8 - uses AsyncWrap and async-hooks-jl\n * Node >= v8 - uses native async-hooks\n */\nif(process && semver.gte(process.versions.node, '8.0.0')){\n  module.exports = require('./context');\n}else{\n  module.exports = require('./context-legacy');\n}\n","/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n","module.exports = require(\"async_hooks\");","'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst asyncHook = require('async-hook-jl');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\n//const trace = [];\n\nconst invertedProviders = [];\nfor (let key in asyncHook.providers) {\n  invertedProviders[asyncHook.providers[key]] = key;\n}\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  //trace: trace,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    SETTING KEY:' + key + '=' + value + ' in ns:' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('    GETTING KEY:' + key + '=undefined' + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n        util.inspect(this.active, true));\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    debug2('    GETTING KEY:' + key + '=' + this.active[key] + ' ' + this.name + ' uid:' + currentUid + ' active:' +\n      util.inspect(this.active, true));\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATING Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' active:' +\n      util.inspect(this.active, true, 2, true));\n  }\n\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('   CREATED Context: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' + ' context:' +\n      util.inspect(context, true, 2, true));\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' BEFORE RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    if (DEBUG_CLS_HOOKED) {\n      debug2(' AFTER RUN: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n        util.inspect(context));\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(' BEFORE runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n      util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2(' AFTER runPromise: ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' ' +\n          util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  ENTER ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    debug2('  EXIT ' + this.name + ' uid:' + currentUid + ' len:' + this._set.length + ' context: ' +\n      util.inspect(context));\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' +\n      util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CREATING NAMESPACE ' + name);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  asyncHook.addHooks({\n    init(uid, handle, provider, parentUid, parentHandle) {\n      //parentUid = parentUid || currentUid;  // Suggested usage but appears to work better for tracing modules.\n      currentUid = uid;\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      if (parentUid) {\n        namespace._contexts.set(uid, namespace._contexts.get(parentUid));\n        if (DEBUG_CLS_HOOKED) {\n          debug2('PARENTID: ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + provider);\n        }\n      } else {\n        namespace._contexts.set(currentUid, namespace.active);\n      }\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('INIT ' + name + ' uid:' + uid + ' parent:' + parentUid + ' provider:' + invertedProviders[provider]\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n    },\n    pre(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.enter(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' PRE MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    post(uid, handle) {\n      currentUid = uid;\n      let context = namespace._contexts.get(uid);\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle) + ' context:' +\n            util.inspect(context));\n        }\n\n        namespace.exit(context);\n      } else {\n        if (DEBUG_CLS_HOOKED) {\n          debug2(' POST MISSING CONTEXT ' + name + ' uid:' + uid + ' handle:' + getFunctionName(handle));\n        }\n      }\n    },\n    destroy(uid) {\n      currentUid = uid;\n\n      if (DEBUG_CLS_HOOKED) {\n        debug2('DESTROY ' + name + ' uid:' + uid + ' context:' + util.inspect(namespace._contexts.get(currentUid))\n          + ' active:' + util.inspect(namespace.active, true));\n      }\n\n      namespace._contexts.delete(uid);\n    }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\nif (asyncHook._state && !asyncHook._state.enabled) {\n  asyncHook.enable();\n}\n\nfunction debug2(msg) {\n  if (process.env.DEBUG) {\n    process._rawDebug(msg);\n  }\n}\n\n\n/*function debug(from, ns) {\n process._rawDebug('DEBUG: ' + util.inspect({\n from: from,\n currentUid: currentUid,\n context: ns ? ns._contexts.get(currentUid) : 'no ns'\n }, true, 2, true));\n }*/\n\n\nfunction getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}\n\n\n// Add back to callstack\nif (DEBUG_CLS_HOOKED) {\n  var stackChain = require('stack-chain');\n  for (var modifier in stackChain.filter._modifiers) {\n    stackChain.filter.deattach(modifier);\n  }\n}\n","'use strict';\n\nconst AsyncHook = require('./async-hook.js');\n\n// If a another copy (same version or not) of stack-chain exists it will result\n// in wrong stack traces (most likely dublicate callSites).\nif (global._asyncHook) {\n  // In case the version match, we can simply return the first initialized copy\n  if (global._asyncHook.version === require('./package.json').version) {\n    module.exports = global._asyncHook;\n  }\n  // The version don't match, this is really bad. Lets just throw\n  else {\n    throw new Error('Conflicting version of async-hook-jl found');\n  }\n} else {\n  const stackChain = require('stack-chain');\n\n  // Remove callSites from this module. AsyncWrap doesn't have any callSites\n  // and the hooks are expected to be completely transparent.\n  stackChain.filter.attach(function (error, frames) {\n    return frames.filter(function (callSite) {\n      const filename = callSite.getFileName();\n      // filename is not always a string, for example in case of eval it is\n      // undefined. So check if the filename is defined.\n      return !(filename && filename.slice(0, __dirname.length) === __dirname);\n    });\n  });\n\n  module.exports = global._asyncHook = new AsyncHook();\n}","'use strict';\n\nconst asyncWrap = process.binding('async_wrap');\nconst TIMERWRAP = asyncWrap.Providers.TIMERWRAP;\n\nconst patchs = {\n  'nextTick': require('./patches/next-tick.js'),\n  'promise': require('./patches/promise.js'),\n  'timers': require('./patches/timers.js')\n};\n\nconst ignoreUIDs = new Set();\n\nfunction State() {\n  this.enabled = false;\n  this.counter = 0;\n}\n\nfunction Hooks() {\n  const initFns = this.initFns = [];\n  const preFns = this.preFns = [];\n  const postFns = this.postFns = [];\n  const destroyFns = this.destroyFns = [];\n\n  this.init = function (uid, provider, parentUid, parentHandle) {\n    // Ignore TIMERWRAP, since setTimeout etc. is monkey patched\n    if (provider === TIMERWRAP) {\n      ignoreUIDs.add(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of initFns) {\n      hook(uid, this, provider, parentUid, parentHandle);\n    }\n  };\n\n  this.pre = function (uid) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of preFns) {\n      hook(uid, this);\n    }\n  };\n\n  this.post = function (uid, didThrow) {\n    if (ignoreUIDs.has(uid)) return;\n\n    // call hooks\n    for (const hook of postFns) {\n      hook(uid, this, didThrow);\n    }\n  };\n\n  this.destroy = function (uid) {\n    // Cleanup the ignore list if this uid should be ignored\n    if (ignoreUIDs.has(uid)) {\n      ignoreUIDs.delete(uid);\n      return;\n    }\n\n    // call hooks\n    for (const hook of destroyFns) {\n      hook(uid);\n    }\n  };\n}\n\nHooks.prototype.add = function (hooks) {\n  if (hooks.init) this.initFns.push(hooks.init);\n  if (hooks.pre) this.preFns.push(hooks.pre);\n  if (hooks.post) this.postFns.push(hooks.post);\n  if (hooks.destroy) this.destroyFns.push(hooks.destroy);\n};\n\nfunction removeElement(array, item) {\n  const index = array.indexOf(item);\n  if (index === -1) return;\n  array.splice(index, 1);\n}\n\nHooks.prototype.remove = function (hooks) {\n  if (hooks.init) removeElement(this.initFns, hooks.init);\n  if (hooks.pre) removeElement(this.preFns, hooks.pre);\n  if (hooks.post) removeElement(this.postFns, hooks.post);\n  if (hooks.destroy) removeElement(this.destroyFns, hooks.destroy);\n};\n\nfunction AsyncHook() {\n  this._state = new State();\n  this._hooks = new Hooks();\n\n  // expose version for conflict detection\n  this.version = require('./package.json').version;\n\n  // expose the Providers map\n  this.providers = asyncWrap.Providers;\n\n  // apply patches\n  for (const key of Object.keys(patchs)) {\n    patchs[key].call(this);\n  }\n\n  // setup async wrap\n  if (process.env.hasOwnProperty('NODE_ASYNC_HOOK_WARNING')) {\n    console.warn('warning: you are using async-hook-jl which is unstable.');\n  }\n  asyncWrap.setupHooks({\n    init: this._hooks.init,\n    pre: this._hooks.pre,\n    post: this._hooks.post,\n    destroy: this._hooks.destroy\n  });\n}\nmodule.exports = AsyncHook;\n\nAsyncHook.prototype.addHooks = function (hooks) {\n  this._hooks.add(hooks);\n};\n\nAsyncHook.prototype.removeHooks = function (hooks) {\n  this._hooks.remove(hooks);\n};\n\nAsyncHook.prototype.enable = function () {\n  this._state.enabled = true;\n  asyncWrap.enable();\n};\n\nAsyncHook.prototype.disable = function () {\n  this._state.enabled = false;\n  asyncWrap.disable();\n};","'use strict';\n\nfunction NextTickWrap() {}\n\nmodule.exports = function patch() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const oldNextTick = process.nextTick;\n  process.nextTick = function () {\n    if (!state.enabled) return oldNextTick.apply(process, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback is not a function');\n    }\n\n    const handle = new NextTickWrap();\n    const uid = --state.counter;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if(didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            hooks.post.call(handle, uid, true);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      hooks.destroy.call(null, uid);\n    };\n\n    return oldNextTick.apply(process, args);\n  };\n}\n","'use strict';\n\nfunction PromiseWrap() {}\n\nmodule.exports = function patchPromise() {\n  const hooks = this._hooks;\n  const state = this._state;\n\n  const Promise = global.Promise;\n\n  /* As per ECMAScript 2015, .catch must be implemented by calling .then, as\n   * such we need needn't patch .catch as well. see:\n   * http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\n   */\n  const oldThen = Promise.prototype.then;\n  Promise.prototype.then = wrappedThen;\n\n  function makeWrappedHandler(fn, handle, uid, isOnFulfilled) {\n    if ('function' !== typeof fn) {\n      return isOnFulfilled\n        ? makeUnhandledResolutionHandler(uid)\n        : makeUnhandledRejectionHandler(uid);\n    }\n\n    return function wrappedHandler() {\n      hooks.pre.call(handle, uid);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        hooks.post.call(handle, uid, false);\n        hooks.destroy.call(null, uid);\n      }\n    };\n  }\n\n  function makeUnhandledResolutionHandler(uid) {\n    return function unhandledResolutionHandler(val) {\n      hooks.destroy.call(null, uid);\n      return val;\n    };\n  }\n\n  function makeUnhandledRejectionHandler(uid) {\n    return function unhandledRejectedHandler(val) {\n      hooks.destroy.call(null, uid);\n      throw val;\n    };\n  }\n\n  function wrappedThen(onFulfilled, onRejected) {\n    if (!state.enabled) return oldThen.call(this, onFulfilled, onRejected);\n\n    const handle = new PromiseWrap();\n    const uid = --state.counter;\n\n    hooks.init.call(handle, uid, 0, null, null);\n\n    return oldThen.call(\n      this,\n      makeWrappedHandler(onFulfilled, handle, uid, true),\n      makeWrappedHandler(onRejected, handle, uid, false)\n    );\n  }\n};\n","'use strict';\n\nconst timers = require('timers');\n\nfunction TimeoutWrap() {}\nfunction IntervalWrap() {}\nfunction ImmediateWrap() {}\n\nconst timeoutMap = new Map();\nconst intervalMap = new Map();\nconst ImmediateMap = new Map();\n\nlet activeCallback = null;\nlet clearedInCallback = false;\n\nmodule.exports = function patch() {\n  patchTimer(this._hooks, this._state, 'setTimeout', 'clearTimeout', TimeoutWrap, timeoutMap, true);\n  patchTimer(this._hooks, this._state, 'setInterval', 'clearInterval', IntervalWrap, intervalMap, false);\n  patchTimer(this._hooks, this._state, 'setImmediate', 'clearImmediate', ImmediateWrap, ImmediateMap, true);\n\n  global.setTimeout = timers.setTimeout;\n  global.setInterval = timers.setInterval;\n  global.setImmediate = timers.setImmediate;\n\n  global.clearTimeout = timers.clearTimeout;\n  global.clearInterval = timers.clearInterval;\n  global.clearImmediate = timers.clearImmediate;\n};\n\nfunction patchTimer(hooks, state, setFn, clearFn, Handle, timerMap, singleCall) {\n  const oldSetFn = timers[setFn];\n  const oldClearFn = timers[clearFn];\n\n  // overwrite set[Timeout]\n  timers[setFn] = function () {\n    if (!state.enabled) return oldSetFn.apply(timers, arguments);\n\n    const args = new Array(arguments.length);\n    for (let i = 0; i < arguments.length; i++) {\n      args[i] = arguments[i];\n    }\n    const callback = args[0];\n\n    if (typeof callback !== 'function') {\n      throw new TypeError('\"callback\" argument must be a function');\n    }\n\n    const handle = new Handle();\n    const uid = --state.counter;\n    let timerId = undefined;\n\n    // call the init hook\n    hooks.init.call(handle, uid, 0, null, null);\n\n    // overwrite callback\n    args[0] = function () {\n      // call the pre hook\n      activeCallback = timerId;\n      hooks.pre.call(handle, uid);\n\n      let didThrow = true;\n      try {\n        callback.apply(this, arguments);\n        didThrow = false;\n      } finally {\n        // If `callback` threw and there is an uncaughtException handler\n        // then call the `post` and `destroy` hook after the uncaughtException\n        // user handlers have been invoked.\n        if (didThrow && process.listenerCount('uncaughtException') > 0) {\n          process.once('uncaughtException', function () {\n            // call the post hook\n            hooks.post.call(handle, uid, true);\n            // setInterval won't continue\n            timerMap.delete(timerId);\n            hooks.destroy.call(null, uid);\n          });\n        }\n      }\n\n      // callback done successfully\n      hooks.post.call(handle, uid, false);\n      activeCallback = null;\n\n      // call the destroy hook if the callback will only be called once\n      if (singleCall || clearedInCallback) {\n        clearedInCallback = false;\n        timerMap.delete(timerId);\n        hooks.destroy.call(null, uid);\n      }\n    };\n\n    timerId = oldSetFn.apply(timers, args);\n    // Bind the timerId and uid for later use, in case the clear* function is\n    // called.\n    timerMap.set(timerId, uid);\n\n    return timerId;\n  };\n\n  // overwrite clear[Timeout]\n  timers[clearFn] = function (timerId) {\n    // If clear* was called within the timer callback, then delay the destroy\n    // event to after the post event has been called.\n    if (activeCallback === timerId && timerId !== null) {\n      clearedInCallback = true;\n    }\n    // clear should call the destroy hook. Note if timerId doesn't exists\n    // it is because asyncWrap wasn't enabled at the time.\n    else if (timerMap.has(timerId)) {\n      const uid = timerMap.get(timerId);\n      timerMap.delete(timerId);\n      hooks.destroy.call(null, uid);\n    }\n\n    oldClearFn.apply(timers, arguments);\n  };\n}\n","\n// use a already existing formater or fallback to the default v8 formater\nvar defaultFormater = require('./format.js');\n\n// public define API\nfunction stackChain() {\n  this.extend = new TraceModifier();\n  this.filter = new TraceModifier();\n  this.format = new StackFormater();\n  this.version = require('./package.json').version;\n}\n\n\nvar SHORTCIRCUIT_CALLSITE = false;\nstackChain.prototype.callSite = function collectCallSites(options) {\n  if (!options) options = {};\n\n  // Get CallSites\n  SHORTCIRCUIT_CALLSITE = true;\n  var obj = {};\n  Error.captureStackTrace(obj, collectCallSites);\n  var callSites = obj.stack;\n  SHORTCIRCUIT_CALLSITE = false;\n\n  // Slice\n  callSites = callSites.slice(options.slice || 0);\n\n  // Modify CallSites\n  if (options.extend) callSites = this.extend._modify(obj, callSites);\n  if (options.filter) callSites = this.filter._modify(obj, callSites);\n\n  // Done\n  return callSites;\n};\n\nvar chain = new stackChain();\n\nfunction TraceModifier() {\n  this._modifiers = [];\n}\n\nTraceModifier.prototype._modify = function (error, frames) {\n  for (var i = 0, l = this._modifiers.length; i < l; i++) {\n    frames = this._modifiers[i](error, frames);\n  }\n\n  return frames;\n};\n\nTraceModifier.prototype.attach = function (modifier) {\n  this._modifiers.push(modifier);\n};\n\nTraceModifier.prototype.deattach = function (modifier) {\n  var index = this._modifiers.indexOf(modifier);\n\n  if (index === -1) return false;\n\n  this._modifiers.splice(index, 1);\n  return true;\n};\n\nfunction StackFormater() {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n}\n\nStackFormater.prototype.replace = function (formater) {\n  if (formater) {\n    this._formater = formater;\n  } else {\n    this.restore();\n  }\n};\n\nStackFormater.prototype.restore  = function () {\n  this._formater = defaultFormater;\n  this._previous = undefined;\n};\n\nStackFormater.prototype._backup = function () {\n  this._previous = this._formater;\n};\n\nStackFormater.prototype._roolback = function () {\n  if (this._previous === defaultFormater) {\n    this.replace(undefined);\n  } else {\n    this.replace(this._previous);\n  }\n\n  this._previous = undefined;\n};\n\n\n//\n// Set Error.prepareStackTrace thus allowing stack-chain\n// to take control of the Error().stack formating.\n//\n\n// If there already is a custom stack formater, then set\n// that as the stack-chain formater.\nif (Error.prepareStackTrace) {\n    chain.format.replace(Error.prepareStackTrace);\n}\n\nvar SHORTCIRCUIT_FORMATER = false;\nfunction prepareStackTrace(error, originalFrames) {\n  if (SHORTCIRCUIT_CALLSITE) return originalFrames;\n  if (SHORTCIRCUIT_FORMATER) return defaultFormater(error, originalFrames);\n\n  // Make a loss copy of originalFrames\n  var frames = originalFrames.concat();\n\n  // extend frames\n  frames = chain.extend._modify(error, frames);\n\n  // filter frames\n  frames = chain.filter._modify(error, frames);\n\n  // reduce frames to match Error.stackTraceLimit\n  frames = frames.slice(0, Error.stackTraceLimit);\n\n  // Set the callSite property\n  // But only if it hasn't been explicitly set, otherwise\n  // error.stack would have unintended side effects. Check also for\n  // non-extensible/sealed objects, such as those from Google's Closure Library\n  if (Object.isExtensible(error) &&\n      (Object.getOwnPropertyDescriptor(error, \"callSite\") === undefined)) {\n    error.callSite = {\n      original: originalFrames,\n      mutated: frames\n    };\n  }\n\n  // format frames\n  SHORTCIRCUIT_FORMATER = true;\n  var format = chain.format._formater(error, frames);\n  SHORTCIRCUIT_FORMATER = false;\n\n  return format;\n}\n\n// Replace the v8 stack trace creator\nObject.defineProperty(Error, 'prepareStackTrace', {\n  'get': function () {\n    return prepareStackTrace;\n  },\n\n  'set': function (formater) {\n    // If formater is prepareStackTrace it means that someone ran\n    // var old = Error.prepareStackTrace;\n    // Error.prepareStackTrace = custom\n    // new Error().stack\n    // Error.prepareStackTrace = old;\n    // The effect of this, should be that the old behaviour is restored.\n    if (formater === prepareStackTrace) {\n      chain.format._roolback();\n    }\n    // Error.prepareStackTrace was set, this means that someone is\n    // trying to take control of the Error().stack format. Make\n    // them belive they succeeded by setting them up as the stack-chain\n    // formater.\n    else {\n      chain.format._backup();\n      chain.format.replace(formater);\n    }\n  }\n});\n\n//\n// Manage call site storeage\n//\nfunction callSiteGetter() {\n  // calculate call site object\n  this.stack;\n\n  // return call site object\n  return this.callSite;\n}\n\nObject.defineProperty(Error.prototype, 'callSite', {\n  'get': callSiteGetter,\n\n  'set': function (frames) {\n    // In case callSite was set before [[getter]], just set\n    // the value\n    Object.defineProperty(this, 'callSite', {\n        value: frames,\n        writable: true,\n        configurable: true\n    });\n  },\n\n  configurable: true\n});\n\nmodule.exports = chain;\n","// Copyright 2012 the V8 project authors. All rights reserved.\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//     * Redistributions of source code must retain the above copyright\n//       notice, this list of conditions and the following disclaimer.\n//     * Redistributions in binary form must reproduce the above\n//       copyright notice, this list of conditions and the following\n//       disclaimer in the documentation and/or other materials provided\n//       with the distribution.\n//     * Neither the name of Google Inc. nor the names of its\n//       contributors may be used to endorse or promote products derived\n//       from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nfunction FormatErrorString(error) {\n  try {\n    return Error.prototype.toString.call(error);\n  } catch (e) {\n    try {\n      return \"<error: \" + e + \">\";\n    } catch (ee) {\n      return \"<error>\";\n    }\n  }\n}\n\nmodule.exports = function FormatStackTrace(error, frames) {\n  var lines = [];\n  lines.push(FormatErrorString(error));\n  for (var i = 0; i < frames.length; i++) {\n    var frame = frames[i];\n    var line;\n    try {\n      line = frame.toString();\n    } catch (e) {\n      try {\n        line = \"<error: \" + e + \">\";\n      } catch (ee) {\n        // Any code that reaches this point is seriously nasty!\n        line = \"<error>\";\n      }\n    }\n    lines.push(\"    at \" + line);\n  }\n  return lines.join(\"\\n\");\n};\n","'use strict';\n\nvar assert      = require('assert');\nvar wrapEmitter = require('emitter-listener');\n\n/*\n *\n * CONSTANTS\n *\n */\nvar CONTEXTS_SYMBOL = 'cls@contexts';\nvar ERROR_SYMBOL = 'error@context';\n\n// load polyfill if native support is unavailable\nif (!process.addAsyncListener) require('async-listener');\n\nfunction Namespace(name) {\n  this.name   = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set   = [];\n  this.id     = null;\n}\n\nNamespace.prototype.set = function (key, value) {\n  if (!this.active) {\n    throw new Error(\"No context available. ns.run() or ns.bind() must be called first.\");\n  }\n\n  this.active[key] = value;\n  return value;\n};\n\nNamespace.prototype.get = function (key) {\n  if (!this.active) return undefined;\n\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function () {\n  return Object.create(this.active);\n};\n\nNamespace.prototype.run = function (fn) {\n  var context = this.createContext();\n  this.enter(context);\n  try {\n    fn(context);\n    return context;\n  }\n  catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  }\n  finally {\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function (fn) {\n  var value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\nNamespace.prototype.bind = function (fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    }\n    else {\n      context = this.active;\n    }\n  }\n\n  var self = this;\n  return function () {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    }\n    catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    }\n    finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function (context) {\n  assert.ok(context, \"context must be provided for entering\");\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function (context) {\n  assert.ok(context, \"context must be provided for exiting\");\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, \"can't remove top context\");\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  var index = this._set.lastIndexOf(context);\n\n  assert.ok(index >= 0, \"context not currently entered; can't exit\");\n  assert.ok(index,      \"can't remove top context\");\n\n  this._set.splice(index, 1);\n};\n\nNamespace.prototype.bindEmitter = function (emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, \"can only bind real EEs\");\n\n  var namespace  = this;\n  var thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) return;\n    if (!listener[CONTEXTS_SYMBOL]) listener[CONTEXTS_SYMBOL] = Object.create(null);\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace : namespace,\n      context   : namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) return unwrapped;\n\n    var wrapped  = unwrapped;\n    var contexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(contexts).forEach(function (name) {\n      var thunk = contexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function (exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction get(name) {\n  return process.namespaces[name];\n}\n\nfunction create(name) {\n  assert.ok(name, \"namespace must be given a name!\");\n\n  var namespace = new Namespace(name);\n  namespace.id = process.addAsyncListener({\n    create : function () { return namespace.active; },\n    before : function (context, storage) { if (storage) namespace.enter(storage); },\n    after  : function (context, storage) { if (storage) namespace.exit(storage); },\n    error  : function (storage) { if (storage) namespace.exit(storage); }\n  });\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroy(name) {\n  var namespace = get(name);\n\n  assert.ok(namespace,    \"can't delete nonexistent namespace!\");\n  assert.ok(namespace.id, \"don't assign to process.namespaces directly!\");\n\n  process.removeAsyncListener(namespace.id);\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroy(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\nif (!process.namespaces) reset(); // call immediately to set up\n\nmodule.exports = {\n  getNamespace     : get,\n  createNamespace  : create,\n  destroyNamespace : destroy,\n  reset            : reset\n};\n","'use strict';\n\nif (process.addAsyncListener) throw new Error(\"Don't require polyfill unless needed\");\n\nvar shimmer      = require('shimmer')\n  , semver       = require('semver')\n  , wrap         = shimmer.wrap\n  , massWrap     = shimmer.massWrap\n  , wrapCallback = require('./glue.js')\n  , util         = require('util')\n  ;\n\nvar v6plus = semver.gte(process.version, '6.0.0');\nvar v7plus = semver.gte(process.version, '7.0.0');\nvar v8plus = semver.gte(process.version, '8.0.0');\nvar v11plus = semver.gte(process.version, '11.0.0');\n\nvar net = require('net');\n\n// From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\nif (v7plus && !net._normalizeArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2017/03/09\n  net._normalizeArgs = function (args) {\n    if (args.length === 0) {\n      return [{}, null];\n    }\n\n    var arg0 = args[0];\n    var options = {};\n    if (typeof arg0 === 'object' && arg0 !== null) {\n      // (options[...][, cb])\n      options = arg0;\n    } else if (isPipeName(arg0)) {\n      // (path[...][, cb])\n      options.path = arg0;\n    } else {\n      // ([port][, host][...][, cb])\n      options.port = arg0;\n      if (args.length > 1 && typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    if (typeof cb !== 'function')\n      return [options, null];\n    else\n      return [options, cb];\n  }\n} else if (!v7plus && !net._normalizeConnectArgs) {\n  // a polyfill in our polyfill etc so forth -- taken from node master on 2013/10/30\n  net._normalizeConnectArgs = function (args) {\n    var options = {};\n\n    function toNumber(x) { return (x = Number(x)) >= 0 ? x : false; }\n\n    if (typeof args[0] === 'object' && args[0] !== null) {\n      // connect(options, [cb])\n      options = args[0];\n    }\n    else if (typeof args[0] === 'string' && toNumber(args[0]) === false) {\n      // connect(path, [cb]);\n      options.path = args[0];\n    }\n    else {\n      // connect(port, [host], [cb])\n      options.port = args[0];\n      if (typeof args[1] === 'string') {\n        options.host = args[1];\n      }\n    }\n\n    var cb = args[args.length - 1];\n    return typeof cb === 'function' ? [options, cb] : [options];\n  };\n}\n\n// In https://github.com/nodejs/node/pull/11796 `_listen2` was renamed\n// `_setUpListenHandle`. It's still aliased as `_listen2`, and currently the\n// Node internals still call the alias - but who knows for how long. So better\n// make sure we use the new name instead if available.\nif ('_setUpListenHandle' in net.Server.prototype) {\n  wrap(net.Server.prototype, '_setUpListenHandle', wrapSetUpListenHandle);\n} else {\n  wrap(net.Server.prototype, '_listen2', wrapSetUpListenHandle);\n}\n\nfunction wrapSetUpListenHandle(original) {\n  return function () {\n    this.on('connection', function (socket) {\n      if (socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n      }\n    });\n\n    try {\n      return original.apply(this, arguments);\n    }\n    finally {\n      // the handle will only not be set in cases where there has been an error\n      if (this._handle && this._handle.onconnection) {\n        this._handle.onconnection = wrapCallback(this._handle.onconnection);\n      }\n    }\n  };\n}\n\nfunction patchOnRead(ctx) {\n  if (ctx && ctx._handle) {\n    var handle = ctx._handle;\n    if (!handle._originalOnread) {\n      handle._originalOnread = handle.onread;\n    }\n    handle.onread = wrapCallback(handle._originalOnread);\n  }\n}\n\nwrap(net.Socket.prototype, 'connect', function (original) {\n  return function () {\n    var args;\n    // Node core uses an internal Symbol here to guard against the edge-case\n    // where the user accidentally passes in an array. As we don't have access\n    // to this Symbol we resort to this hack where we just detect if there is a\n    // symbol or not. Checking for the number of Symbols is by no means a fool\n    // proof solution, but it catches the most basic cases.\n    if (v8plus &&\n        Array.isArray(arguments[0]) &&\n        Object.getOwnPropertySymbols(arguments[0]).length > 0) {\n      // already normalized\n      args = arguments[0];\n    } else {\n      // From Node.js v7.0.0, net._normalizeConnectArgs have been renamed net._normalizeArgs\n      args = v7plus\n        ? net._normalizeArgs(arguments)\n        : net._normalizeConnectArgs(arguments);\n    }\n    if (args[1]) args[1] = wrapCallback(args[1]);\n    var result = original.apply(this, args);\n    patchOnRead(this);\n    return result;\n  };\n});\n\nvar http = require('http');\n\n// NOTE: A rewrite occurred in 0.11 that changed the addRequest signature\n// from (req, host, port, localAddress) to (req, options)\n// Here, I use the longer signature to maintain 0.10 support, even though\n// the rest of the arguments aren't actually used\nwrap(http.Agent.prototype, 'addRequest', function (original) {\n  return function (req) {\n    var onSocket = req.onSocket;\n    req.onSocket = wrapCallback(function (socket) {\n      patchOnRead(socket);\n      return onSocket.apply(this, arguments);\n    });\n    return original.apply(this, arguments);\n  };\n});\n\nvar childProcess = require('child_process');\n\nfunction wrapChildProcess(child) {\n  if (Array.isArray(child.stdio)) {\n    child.stdio.forEach(function (socket) {\n      if (socket && socket._handle) {\n        socket._handle.onread = wrapCallback(socket._handle.onread);\n        wrap(socket._handle, 'close', activatorFirst);\n      }\n    });\n  }\n\n  if (child._handle) {\n    child._handle.onexit = wrapCallback(child._handle.onexit);\n  }\n}\n\n// iojs v2.0.0+\nif (childProcess.ChildProcess) {\n  wrap(childProcess.ChildProcess.prototype, 'spawn', function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(this);\n      return result;\n    };\n  });\n} else {\n  massWrap(childProcess, [\n    'execFile', // exec is implemented in terms of execFile\n    'fork',\n    'spawn'\n  ], function (original) {\n    return function () {\n      var result = original.apply(this, arguments);\n      wrapChildProcess(result);\n      return result;\n    };\n  });\n}\n\n// need unwrapped nextTick for use within < 0.9 async error handling\nif (!process._fatalException) {\n  process._originalNextTick = process.nextTick;\n}\n\nvar processors = [];\nif (process._nextDomainTick) processors.push('_nextDomainTick');\nif (process._tickDomainCallback) processors.push('_tickDomainCallback');\n\nmassWrap(\n  process,\n  processors,\n  activator\n);\nwrap(process, 'nextTick', activatorFirst);\n\nvar asynchronizers = [\n  'setTimeout',\n  'setInterval'\n];\nif (global.setImmediate) asynchronizers.push('setImmediate');\n\nvar timers = require('timers');\nvar patchGlobalTimers = global.setTimeout === timers.setTimeout;\n\nmassWrap(\n  timers,\n  asynchronizers,\n  activatorFirst\n);\n\nif (patchGlobalTimers) {\n  massWrap(\n    global,\n    asynchronizers,\n    activatorFirst\n  );\n}\n\nvar dns = require('dns');\nmassWrap(\n  dns,\n  [\n    'lookup',\n    'resolve',\n    'resolve4',\n    'resolve6',\n    'resolveCname',\n    'resolveMx',\n    'resolveNs',\n    'resolveTxt',\n    'resolveSrv',\n    'reverse'\n  ],\n  activator\n);\n\nif (dns.resolveNaptr) wrap(dns, 'resolveNaptr', activator);\n\nvar fs = require('fs');\nmassWrap(\n  fs,\n  [\n    'watch',\n    'rename',\n    'truncate',\n    'chown',\n    'fchown',\n    'chmod',\n    'fchmod',\n    'stat',\n    'lstat',\n    'fstat',\n    'link',\n    'symlink',\n    'readlink',\n    'realpath',\n    'unlink',\n    'rmdir',\n    'mkdir',\n    'readdir',\n    'close',\n    'open',\n    'utimes',\n    'futimes',\n    'fsync',\n    'write',\n    'read',\n    'readFile',\n    'writeFile',\n    'appendFile',\n    'watchFile',\n    'unwatchFile',\n    \"exists\",\n  ],\n  activator\n);\n\n// only wrap lchown and lchmod on systems that have them.\nif (fs.lchown) wrap(fs, 'lchown', activator);\nif (fs.lchmod) wrap(fs, 'lchmod', activator);\n\n// only wrap ftruncate in versions of node that have it\nif (fs.ftruncate) wrap(fs, 'ftruncate', activator);\n\n// Wrap zlib streams\nvar zlib;\ntry { zlib = require('zlib'); } catch (err) { }\nif (zlib && zlib.Deflate && zlib.Deflate.prototype) {\n  var proto = Object.getPrototypeOf(zlib.Deflate.prototype);\n  if (proto._transform) {\n    // streams2\n    wrap(proto, \"_transform\", activator);\n  }\n  else if (proto.write && proto.flush && proto.end) {\n    // plain ol' streams\n    massWrap(\n      proto,\n      [\n        'write',\n        'flush',\n        'end'\n      ],\n      activator\n    );\n  }\n}\n\n// Wrap Crypto\nvar crypto;\ntry { crypto = require('crypto'); } catch (err) { }\nif (crypto) {\n\n  var toWrap = [\n      'pbkdf2',\n      'randomBytes',\n  ];\n  if (!v11plus) {\n    toWrap.push('pseudoRandomBytes');\n  }\n\n  massWrap(crypto, toWrap, activator);\n}\n\n// It is unlikely that any userspace promise implementations have a native\n// implementation of both Promise and Promise.toString.\nvar instrumentPromise = !!global.Promise &&\n    Promise.toString() === 'function Promise() { [native code] }' &&\n    Promise.toString.toString() === 'function toString() { [native code] }';\n\n// Check that global Promise is native\nif (instrumentPromise) {\n  // shoult not use any methods that have already been wrapped\n  var promiseListener = process.addAsyncListener({\n    create: function create() {\n      instrumentPromise = false;\n    }\n  });\n\n  // should not resolve synchronously\n  global.Promise.resolve(true).then(function notSync() {\n    instrumentPromise = false;\n  });\n\n  process.removeAsyncListener(promiseListener);\n}\n\n/*\n * Native promises use the microtask queue to make all callbacks run\n * asynchronously to avoid Zalgo issues. Since the microtask queue is not\n * exposed externally, promises need to be modified in a fairly invasive and\n * complex way.\n *\n * The async boundary in promises that must be patched is between the\n * fulfillment of the promise and the execution of any callback that is waiting\n * for that fulfillment to happen. This means that we need to trigger a create\n * when resolve or reject is called and trigger before, after and error handlers\n * around the callback execution. There may be multiple callbacks for each\n * fulfilled promise, so handlers will behave similar to setInterval where\n * there may be multiple before after and error calls for each create call.\n *\n * async-listener monkeypatching has one basic entry point: `wrapCallback`.\n * `wrapCallback` should be called when create should be triggered and be\n * passed a function to wrap, which will execute the body of the async work.\n * The resolve and reject calls can be modified fairly easily to call\n * `wrapCallback`, but at the time of resolve and reject all the work to be done\n * on fulfillment may not be defined, since a call to then, chain or fetch can\n * be made even after the promise has been fulfilled. To get around this, we\n * create a placeholder function which will call a function passed into it,\n * since the call to the main work is being made from within the wrapped\n * function, async-listener will work correctly.\n *\n * There is another complication with monkeypatching Promises. Calls to then,\n * chain and catch each create new Promises that are fulfilled internally in\n * different ways depending on the return value of the callback. When the\n * callback return a Promise, the new Promise is resolved asynchronously after\n * the returned Promise has been also been resolved. When something other than\n * a promise is resolved the resolve call for the new Promise is put in the\n * microtask queue and asynchronously resolved.\n *\n * Then must be wrapped so that its returned promise has a wrapper that can be\n * used to invoke further continuations. This wrapper cannot be created until\n * after the callback has run, since the callback may return either a promise\n * or another value. Fortunately we already have a wrapper function around the\n * callback we can use (the wrapper created by resolve or reject).\n *\n * By adding an additional argument to this wrapper, we can pass in the\n * returned promise so it can have its own wrapper appended. the wrapper\n * function can the call the callback, and take action based on the return\n * value. If a promise is returned, the new Promise can proxy the returned\n * Promise's wrapper (this wrapper may not exist yet, but will by the time the\n * wrapper needs to be invoked). Otherwise, a new wrapper can be create the\n * same way as in resolve and reject. Since this wrapper is created\n * synchronously within another wrapper, it will properly appear as a\n * continuation from within the callback.\n */\n\nif (instrumentPromise) {\n  wrapPromise();\n}\n\nfunction wrapPromise() {\n  var Promise = global.Promise;\n\n  // Updates to this class should also be applied to the the ES6 version\n  // in es6-wrapped-promise.js.\n  function wrappedPromise(executor) {\n    if (!(this instanceof wrappedPromise)) {\n      return Promise(executor);\n    }\n\n    if (typeof executor !== 'function') {\n      return new Promise(executor);\n    }\n\n    var context, args;\n    var promise = new Promise(wrappedExecutor);\n    promise.__proto__ = wrappedPromise.prototype;\n\n    try {\n      executor.apply(context, args);\n    } catch (err) {\n      args[1](err);\n    }\n\n    return promise;\n\n    function wrappedExecutor(resolve, reject) {\n      context = this;\n      args = [wrappedResolve, wrappedReject];\n\n      // These wrappers create a function that can be passed a function and an argument to\n      // call as a continuation from the resolve or reject.\n      function wrappedResolve(val) {\n        ensureAslWrapper(promise, false);\n        return resolve(val);\n      }\n\n      function wrappedReject(val) {\n        ensureAslWrapper(promise, false);\n        return reject(val);\n      }\n    }\n  }\n\n  util.inherits(wrappedPromise, Promise);\n\n  wrap(Promise.prototype, 'then', wrapThen);\n  // Node.js <v7 only, alias for .then\n  if (Promise.prototype.chain) {\n    wrap(Promise.prototype, 'chain', wrapThen);\n  }\n\n  if (v6plus) {\n    global.Promise = require('./es6-wrapped-promise.js')(Promise, ensureAslWrapper);\n  } else {\n    var PromiseFunctions = [\n      'all',\n      'race',\n      'reject',\n      'resolve',\n      'accept',  // Node.js <v7 only\n      'defer'    // Node.js <v7 only\n    ];\n\n    PromiseFunctions.forEach(function(key) {\n      // don't break `in` by creating a key for undefined entries\n      if (typeof Promise[key] === 'function') {\n        wrappedPromise[key] = Promise[key];\n      }\n    });\n    global.Promise = wrappedPromise\n  }\n\n  function ensureAslWrapper(promise, overwrite) {\n    if (!promise.__asl_wrapper || overwrite) {\n      promise.__asl_wrapper = wrapCallback(propagateAslWrapper);\n    }\n  }\n\n  function propagateAslWrapper(ctx, fn, result, next) {\n    var nextResult;\n    try {\n      nextResult = fn.call(ctx, result);\n      return {returnVal: nextResult, error: false}\n    } catch (err) {\n      return {errorVal: err, error: true}\n    } finally {\n      // Wrap any resulting futures as continuations.\n      if (nextResult instanceof Promise) {\n        next.__asl_wrapper = function proxyWrapper() {\n          var aslWrapper = nextResult.__asl_wrapper || propagateAslWrapper;\n          return aslWrapper.apply(this, arguments);\n        }\n      } else {\n        ensureAslWrapper(next, true);\n      }\n    }\n  }\n\n  function wrapThen(original) {\n    return function wrappedThen() {\n      var promise = this;\n      var next = original.apply(promise, Array.prototype.map.call(arguments, bind));\n\n      next.__asl_wrapper = function proxyWrapper(ctx, fn, val, last) {\n        if (promise.__asl_wrapper) {\n          promise.__asl_wrapper(ctx, function () {}, null, next);\n          return next.__asl_wrapper(ctx, fn, val, last);\n        }\n        return propagateAslWrapper(ctx, fn, val, last);\n      }\n\n      return next;\n\n      // wrap callbacks (success, error) so that the callbacks will be called as a\n      // continuations of the resolve or reject call using the __asl_wrapper created above.\n      function bind(fn) {\n        if (typeof fn !== 'function') return fn;\n        return wrapCallback(function (val) {\n          var result = (promise.__asl_wrapper || propagateAslWrapper)(this, fn, val, next);\n          if (result.error) {\n            throw result.errorVal\n          } else {\n            return result.returnVal\n          }\n        });\n      }\n    }\n  }\n}\n\n// Shim activator for functions that have callback last\nfunction activator(fn) {\n  var fallback = function () {\n    var args;\n    var cbIdx = arguments.length - 1;\n    if (typeof arguments[cbIdx] === \"function\") {\n      args = Array(arguments.length)\n      for (var i = 0; i < arguments.length - 1; i++) {\n        args[i] = arguments[i];\n      }\n      args[cbIdx] = wrapCallback(arguments[cbIdx]);\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (a, cb) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, cb);\n      };\n    case 3:\n      return function (a, b, cb) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, cb);\n      };\n    case 4:\n      return function (a, b, c, cb) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, cb);\n      };\n    case 5:\n      return function (a, b, c, d, cb) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, cb);\n      };\n    case 6:\n      return function (a, b, c, d, e, cb) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, a, b, c, d, e, cb);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// Shim activator for functions that have callback first\nfunction activatorFirst(fn) {\n  var fallback = function () {\n    var args;\n    if (typeof arguments[0] === \"function\") {\n      args = Array(arguments.length)\n      args[0] = wrapCallback(arguments[0]);\n      for (var i = 1; i < arguments.length; i++) {\n        args[i] = arguments[i];\n      }\n    }\n    return fn.apply(this, args || arguments);\n  };\n  // Preserve function length for small arg count functions.\n  switch (fn.length) {\n    case 1:\n      return function (cb) {\n        if (arguments.length !== 1) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb);\n      };\n    case 2:\n      return function (cb, a) {\n        if (arguments.length !== 2) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a);\n      };\n    case 3:\n      return function (cb, a, b) {\n        if (arguments.length !== 3) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b);\n      };\n    case 4:\n      return function (cb, a, b, c) {\n        if (arguments.length !== 4) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c);\n      };\n    case 5:\n      return function (cb, a, b, c, d) {\n        if (arguments.length !== 5) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d);\n      };\n    case 6:\n      return function (cb, a, b, c, d, e) {\n        if (arguments.length !== 6) return fallback.apply(this, arguments);\n        if (typeof cb === \"function\") cb = wrapCallback(cb);\n        return fn.call(this, cb, a, b, c, d, e);\n      };\n    default:\n      return fallback;\n  }\n}\n\n// taken from node master on 2017/03/09\nfunction toNumber(x) {\n  return (x = Number(x)) >= 0 ? x : false;\n}\n\n// taken from node master on 2017/03/09\nfunction isPipeName(s) {\n  return typeof s === 'string' && toNumber(s) === false;\n}\n","var wrap = require('shimmer').wrap;\n\n/*\n *\n * CONSTANTS\n *\n */\nvar HAS_CREATE_AL = 1 << 0;\nvar HAS_BEFORE_AL = 1 << 1;\nvar HAS_AFTER_AL = 1 << 2;\nvar HAS_ERROR_AL = 1 << 3;\n\n/**\n * There is one list of currently active listeners that is mutated in place by\n * addAsyncListener and removeAsyncListener. This complicates error-handling,\n * for reasons that are discussed below.\n */\nvar listeners = [];\n\n/**\n * There can be multiple listeners with the same properties, so disambiguate\n * them by assigning them an ID at creation time.\n */\nvar uid = 0;\n\n/**\n * Ensure that errors coming from within listeners are handed off to domains,\n * process._fatalException, or uncaughtException without being treated like\n * user errors.\n */\nvar inAsyncTick = false;\n\n/**\n * Because asynchronous contexts can be nested, and errors can come from anywhere\n * in the stack, a little extra work is required to keep track of where in the\n * nesting we are. Because JS arrays are frequently mutated in place\n */\nvar listenerStack = [];\n\n/**\n * The error handler on a listener can capture errors thrown during synchronous\n * execution immediately after the listener is added. To capture both\n * synchronous and asynchronous errors, the error handler just uses the\n * \"global\" list of active listeners, and the rest of the code ensures that the\n * listener list is correct by using a stack of listener lists during\n * asynchronous execution.\n */\nvar asyncCatcher;\n\n/**\n * The guts of the system -- called each time an asynchronous event happens\n * while one or more listeners are active.\n */\nvar asyncWrap;\n\n/**\n * Simple helper function that's probably faster than using Array\n * filter methods and can be inlined.\n */\nfunction union(dest, added) {\n  var destLength = dest.length;\n  var addedLength = added.length;\n  var returned = [];\n\n  if (destLength === 0 && addedLength === 0) return returned;\n\n  for (var j  = 0; j < destLength; j++) returned[j] = dest[j];\n\n  if (addedLength === 0) return returned;\n\n  for (var i = 0; i < addedLength; i++) {\n    var missing = true;\n    for (j = 0; j < destLength; j++) {\n      if (dest[j].uid === added[i].uid) {\n        missing = false;\n        break;\n      }\n    }\n    if (missing) returned.push(added[i]);\n  }\n\n  return returned;\n}\n\n/*\n * For performance, split error-handlers and asyncCatcher up into two separate\n * code paths.\n */\n\n// 0.9+\nif (process._fatalException) {\n  /**\n   * Error handlers on listeners can throw, the catcher needs to be able to\n   * discriminate between exceptions thrown by user code, and exceptions coming\n   * from within the catcher itself. Use a global to keep track of which state\n   * the catcher is currently in.\n   */\n  var inErrorTick = false;\n\n  /**\n   * Throwing always happens synchronously. If the current array of values for\n   * the current list of asyncListeners is put in a module-scoped variable right\n   * before a call that can throw, it will always be correct when the error\n   * handlers are run.\n   */\n  var errorValues;\n\n  asyncCatcher = function asyncCatcher(er) {\n    var length = listeners.length;\n    if (inErrorTick || length === 0) return false;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    inErrorTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n\n      var value = errorValues && errorValues[listener.uid];\n      handled = listener.error(value, er) || handled;\n    }\n    inErrorTick = false;\n\n    /* Test whether there are any listener arrays on the stack. In the case of\n     * synchronous throws when the listener is active, there may have been\n     * none pushed yet.\n     */\n    if (listenerStack.length > 0) listeners = listenerStack.pop();\n    errorValues = undefined;\n\n    return handled && !inAsyncTick;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      // put the current values where the catcher can see them\n      errorValues = values;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned = original.apply(this, arguments);\n\n      /*\n       * after handlers (not run if original throws)\n       */\n      inAsyncTick = true;\n      for (i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_AFTER_AL) > 0) {\n          list[i].after(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // back to the previous listener list on the stack\n      listeners = listenerStack.pop();\n      errorValues = undefined;\n\n      return returned;\n    };\n  };\n\n  wrap(process, '_fatalException', function (_fatalException) {\n    return function _asyncFatalException(er) {\n      return asyncCatcher(er) || _fatalException(er);\n    };\n  });\n}\n// 0.8 and below\nelse {\n  /**\n   * If an error handler in asyncWrap throws, the process must die. Under 0.8\n   * and earlier the only way to put a bullet through the head of the process\n   * is to rethrow from inside the exception handler, so rethrow and set\n   * errorThrew to tell the uncaughtHandler what to do.\n   */\n  var errorThrew = false;\n\n  /**\n   * Under Node 0.8, this handler *only* handles synchronously thrown errors.\n   * This simplifies it, which almost but not quite makes up for the hit taken\n   * by putting everything in a try-catch.\n   */\n  asyncCatcher = function uncaughtCatcher(er) {\n    // going down hard\n    if (errorThrew) throw er;\n\n    var handled = false;\n\n    /*\n     * error handlers\n     */\n    var length = listeners.length;\n    for (var i = 0; i < length; ++i) {\n      var listener = listeners[i];\n      if ((listener.flags & HAS_ERROR_AL) === 0) continue;\n      handled = listener.error(null, er) || handled;\n    }\n\n    /* Rethrow if one of the before / after handlers fire, which will bring the\n     * process down immediately.\n     */\n    if (!handled && inAsyncTick) throw er;\n  };\n\n  asyncWrap = function asyncWrap(original, list, length) {\n    var values = [];\n\n    /*\n     * listeners\n     */\n    inAsyncTick = true;\n    for (var i = 0; i < length; ++i) {\n      var listener = list[i];\n      values[listener.uid] = listener.data;\n\n      if ((listener.flags & HAS_CREATE_AL) === 0) continue;\n\n      var value = listener.create(listener.data);\n      if (value !== undefined) values[listener.uid] = value;\n    }\n    inAsyncTick = false;\n\n    /* One of the main differences between this polyfill and the core\n     * asyncListener support is that core avoids creating closures by putting a\n     * lot of the state managemnt on the C++ side of Node (and of course also it\n     * bakes support for async listeners into the Node C++ API through the\n     * AsyncWrap class, which means that it doesn't monkeypatch basically every\n     * async method like this does).\n     */\n    return function () {\n      /*jshint maxdepth:4*/\n\n      // after() handlers don't run if threw\n      var threw = false;\n\n      // ...unless the error is handled\n      var handled = false;\n\n      /* More than one listener can end up inside these closures, so save the\n       * current listeners on a stack.\n       */\n      listenerStack.push(listeners);\n\n      /* Activate both the listeners that were active when the closure was\n       * created and the listeners that were previously active.\n       */\n      listeners = union(list, listeners);\n\n      /*\n       * before handlers\n       */\n      inAsyncTick = true;\n      for (var i = 0; i < length; ++i) {\n        if ((list[i].flags & HAS_BEFORE_AL) > 0) {\n          list[i].before(this, values[list[i].uid]);\n        }\n      }\n      inAsyncTick = false;\n\n      // save the return value to pass to the after callbacks\n      var returned;\n      try {\n        returned = original.apply(this, arguments);\n      }\n      catch (er) {\n        threw = true;\n        for (var i = 0; i < length; ++i) {\n          if ((listeners[i].flags & HAS_ERROR_AL) == 0) continue;\n          try {\n            handled = listeners[i].error(values[list[i].uid], er) || handled;\n          }\n          catch (x) {\n            errorThrew = true;\n            throw x;\n          }\n        }\n\n        if (!handled) {\n          // having an uncaughtException handler here alters crash semantics\n          process.removeListener('uncaughtException', asyncCatcher);\n          process._originalNextTick(function () {\n            process.addListener('uncaughtException', asyncCatcher);\n          });\n\n          throw er;\n        }\n      }\n      finally {\n        /*\n         * after handlers (not run if original throws)\n         */\n        if (!threw || handled) {\n          inAsyncTick = true;\n          for (i = 0; i < length; ++i) {\n            if ((list[i].flags & HAS_AFTER_AL) > 0) {\n              list[i].after(this, values[list[i].uid]);\n            }\n          }\n          inAsyncTick = false;\n        }\n\n        // back to the previous listener list on the stack\n        listeners = listenerStack.pop();\n      }\n\n\n      return returned;\n    };\n  };\n\n  // will be the first to fire if async-listener is the first module loaded\n  process.addListener('uncaughtException', asyncCatcher);\n}\n\n// for performance in the case where there are no handlers, just the listener\nfunction simpleWrap(original, list, length) {\n  inAsyncTick = true;\n  for (var i = 0; i < length; ++i) {\n    var listener = list[i];\n    if (listener.create) listener.create(listener.data);\n  }\n  inAsyncTick = false;\n\n  // still need to make sure nested async calls are made in the context\n  // of the listeners active at their creation\n  return function () {\n    listenerStack.push(listeners);\n    listeners = union(list, listeners);\n\n    var returned = original.apply(this, arguments);\n\n    listeners = listenerStack.pop();\n\n    return returned;\n  };\n}\n\n/**\n * Called each time an asynchronous function that's been monkeypatched in\n * index.js is called. If there are no listeners, return the function\n * unwrapped.  If there are any asyncListeners and any of them have callbacks,\n * pass them off to asyncWrap for later use, otherwise just call the listener.\n */\nfunction wrapCallback(original) {\n  var length = listeners.length;\n\n  // no context to capture, so avoid closure creation\n  if (length === 0) return original;\n\n  // capture the active listeners as of when the wrapped function was called\n  var list = listeners.slice();\n\n  for (var i = 0; i < length; ++i) {\n    if (list[i].flags > 0) return asyncWrap(original, list, length);\n  }\n\n  return simpleWrap(original, list, length);\n}\n\nfunction AsyncListener(callbacks, data) {\n  if (typeof callbacks.create === 'function') {\n    this.create = callbacks.create;\n    this.flags |= HAS_CREATE_AL;\n  }\n\n  if (typeof callbacks.before === 'function') {\n    this.before = callbacks.before;\n    this.flags |= HAS_BEFORE_AL;\n  }\n\n  if (typeof callbacks.after === 'function') {\n    this.after = callbacks.after;\n    this.flags |= HAS_AFTER_AL;\n  }\n\n  if (typeof callbacks.error === 'function') {\n    this.error = callbacks.error;\n    this.flags |= HAS_ERROR_AL;\n  }\n\n  this.uid = ++uid;\n  this.data = data === undefined ? null : data;\n}\nAsyncListener.prototype.create = undefined;\nAsyncListener.prototype.before = undefined;\nAsyncListener.prototype.after  = undefined;\nAsyncListener.prototype.error  = undefined;\nAsyncListener.prototype.data   = undefined;\nAsyncListener.prototype.uid    = 0;\nAsyncListener.prototype.flags  = 0;\n\nfunction createAsyncListener(callbacks, data) {\n  if (typeof callbacks !== 'object' || !callbacks) {\n    throw new TypeError('callbacks argument must be an object');\n  }\n\n  if (callbacks instanceof AsyncListener) {\n    return callbacks;\n  }\n  else {\n    return new AsyncListener(callbacks, data);\n  }\n}\n\nfunction addAsyncListener(callbacks, data) {\n  var listener;\n  if (!(callbacks instanceof AsyncListener)) {\n    listener = createAsyncListener(callbacks, data);\n  }\n  else {\n    listener = callbacks;\n  }\n\n  // Make sure the listener isn't already in the list.\n  var registered = false;\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      registered = true;\n      break;\n    }\n  }\n\n  if (!registered) listeners.push(listener);\n\n  return listener;\n}\n\nfunction removeAsyncListener(listener) {\n  for (var i = 0; i < listeners.length; i++) {\n    if (listener === listeners[i]) {\n      listeners.splice(i, 1);\n      break;\n    }\n  }\n}\n\nprocess.createAsyncListener = createAsyncListener;\nprocess.addAsyncListener    = addAsyncListener;\nprocess.removeAsyncListener = removeAsyncListener;\n\nmodule.exports = wrapCallback;\n","module.exports = require(\"net\");","module.exports = require(\"dns\");","'use strict';\n\nmodule.exports = (Promise, ensureAslWrapper) => {\n  // Updates to this class should also be applied to the the ES3 version\n  // in index.js.\n  return class WrappedPromise extends Promise {\n    constructor(executor) {\n      var context, args;\n      super(wrappedExecutor);\n      var promise = this;\n\n      try {\n        executor.apply(context, args);\n      } catch (err) {\n        args[1](err);\n      }\n\n      return promise;\n      function wrappedExecutor(resolve, reject) {\n        context = this;\n        args = [wrappedResolve, wrappedReject];\n\n        // These wrappers create a function that can be passed a function and an argument to\n        // call as a continuation from the resolve or reject.\n        function wrappedResolve(val) {\n          ensureAslWrapper(promise, false);\n          return resolve(val);\n        }\n\n        function wrappedReject(val) {\n          ensureAslWrapper(promise, false);\n          return reject(val);\n        }\n      }\n    }\n  }\n};\n","\"use strict\";\nvar DiagChannel = require(\"./diagnostic-channel/initialization\");\nvar AutoCollectConsole = (function () {\n    function AutoCollectConsole(client) {\n        if (!!AutoCollectConsole.INSTANCE) {\n            throw new Error(\"Console logging adapter tracking should be configured from the applicationInsights object\");\n        }\n        this._client = client;\n        AutoCollectConsole.INSTANCE = this;\n    }\n    AutoCollectConsole.prototype.enable = function (isEnabled, collectConsoleLog) {\n        if (DiagChannel.IsInitialized) {\n            require(\"./diagnostic-channel/console.sub\").enable(isEnabled && collectConsoleLog, this._client);\n            require(\"./diagnostic-channel/bunyan.sub\").enable(isEnabled, this._client);\n            require(\"./diagnostic-channel/winston.sub\").enable(isEnabled, this._client);\n        }\n    };\n    AutoCollectConsole.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectConsole.prototype.dispose = function () {\n        AutoCollectConsole.INSTANCE = null;\n        this.enable(false, false);\n    };\n    AutoCollectConsole._methodNames = [\"debug\", \"info\", \"log\", \"warn\", \"error\"];\n    return AutoCollectConsole;\n}());\nmodule.exports = AutoCollectConsole;\n//# sourceMappingURL=Console.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({ exception: message });\n        }\n        else {\n            // Message can have a trailing newline\n            if (message.lastIndexOf(\"\\n\") == message.length - 1) {\n                message = message.substring(0, message.length - 1);\n            }\n            client.trackTrace({ message: message, severity: (event.data.stderr ? Contracts_1.SeverityLevel.Warning : Contracts_1.SeverityLevel.Information) });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"console\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"console\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=console.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Generated_1 = require(\"./Generated\");\nvar RemoteDependencyDataConstants = (function () {\n    function RemoteDependencyDataConstants() {\n    }\n    RemoteDependencyDataConstants.TYPE_HTTP = \"Http\";\n    RemoteDependencyDataConstants.TYPE_AI = \"Http (tracked component)\";\n    return RemoteDependencyDataConstants;\n}());\nexports.RemoteDependencyDataConstants = RemoteDependencyDataConstants;\nfunction domainSupportsProperties(domain) {\n    return \"properties\" in domain ||\n        domain instanceof Generated_1.EventData ||\n        domain instanceof Generated_1.ExceptionData ||\n        domain instanceof Generated_1.MessageData ||\n        domain instanceof Generated_1.MetricData ||\n        domain instanceof Generated_1.PageViewData ||\n        domain instanceof Generated_1.RemoteDependencyData ||\n        domain instanceof Generated_1.RequestData;\n}\nexports.domainSupportsProperties = domainSupportsProperties;\n//# sourceMappingURL=Constants.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of AvailabilityData represent the result of executing an availability test.\n */\nvar AvailabilityData = (function (_super) {\n    __extends(AvailabilityData, _super);\n    function AvailabilityData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return AvailabilityData;\n}(Domain));\nmodule.exports = AvailabilityData;\n//# sourceMappingURL=AvailabilityData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\nvar ContextTagKeys = (function () {\n    function ContextTagKeys() {\n        this.applicationVersion = \"ai.application.ver\";\n        this.deviceId = \"ai.device.id\";\n        this.deviceLocale = \"ai.device.locale\";\n        this.deviceModel = \"ai.device.model\";\n        this.deviceOEMName = \"ai.device.oemName\";\n        this.deviceOSVersion = \"ai.device.osVersion\";\n        this.deviceType = \"ai.device.type\";\n        this.locationIp = \"ai.location.ip\";\n        this.operationId = \"ai.operation.id\";\n        this.operationName = \"ai.operation.name\";\n        this.operationParentId = \"ai.operation.parentId\";\n        this.operationSyntheticSource = \"ai.operation.syntheticSource\";\n        this.operationCorrelationVector = \"ai.operation.correlationVector\";\n        this.sessionId = \"ai.session.id\";\n        this.sessionIsFirst = \"ai.session.isFirst\";\n        this.userAccountId = \"ai.user.accountId\";\n        this.userId = \"ai.user.id\";\n        this.userAuthUserId = \"ai.user.authUserId\";\n        this.cloudRole = \"ai.cloud.role\";\n        this.cloudRoleInstance = \"ai.cloud.roleInstance\";\n        this.internalSdkVersion = \"ai.internal.sdkVersion\";\n        this.internalAgentVersion = \"ai.internal.agentVersion\";\n        this.internalNodeName = \"ai.internal.nodeName\";\n    }\n    return ContextTagKeys;\n}());\nmodule.exports = ContextTagKeys;\n//# sourceMappingURL=ContextTagKeys.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Base = require(\"./Base\");\n\"use strict\";\n/**\n * Data struct to contain both B and C sections.\n */\nvar Data = (function (_super) {\n    __extends(Data, _super);\n    function Data() {\n        return _super.call(this) || this;\n    }\n    return Data;\n}(Base));\nmodule.exports = Data;\n//# sourceMappingURL=Data.js.map","\"use strict\";\n// THIS FILE WAS AUTOGENERATED\nvar DataPointType = require(\"./DataPointType\");\n\"use strict\";\n/**\n * Metric data single measurement.\n */\nvar DataPoint = (function () {\n    function DataPoint() {\n        this.kind = DataPointType.Measurement;\n    }\n    return DataPoint;\n}());\nmodule.exports = DataPoint;\n//# sourceMappingURL=DataPoint.js.map","\"use strict\";\n/**\n * System variables for a telemetry item.\n */\nvar Envelope = (function () {\n    function Envelope() {\n        this.ver = 1;\n        this.sampleRate = 100.0;\n        this.tags = {};\n    }\n    return Envelope;\n}());\nmodule.exports = Envelope;\n//# sourceMappingURL=Envelope.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Exception represents a handled or unhandled exception that occurred during execution of the monitored application.\n */\nvar ExceptionData = (function (_super) {\n    __extends(ExceptionData, _super);\n    function ExceptionData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.exceptions = [];\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return ExceptionData;\n}(Domain));\nmodule.exports = ExceptionData;\n//# sourceMappingURL=ExceptionData.js.map","\"use strict\";\n/**\n * Exception details of the exception in a chain.\n */\nvar ExceptionDetails = (function () {\n    function ExceptionDetails() {\n        this.hasFullStack = true;\n        this.parsedStack = [];\n    }\n    return ExceptionDetails;\n}());\nmodule.exports = ExceptionDetails;\n//# sourceMappingURL=ExceptionDetails.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * Instances of Message represent printf-like trace statements that are text-searched. Log4Net, NLog and other text-based log file entries are translated into intances of this type. The message does not have measurements.\n */\nvar MessageData = (function (_super) {\n    __extends(MessageData, _super);\n    function MessageData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        return _this;\n    }\n    return MessageData;\n}(Domain));\nmodule.exports = MessageData;\n//# sourceMappingURL=MessageData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of the Metric item is a list of measurements (single data points) and/or aggregations.\n */\nvar MetricData = (function (_super) {\n    __extends(MetricData, _super);\n    function MetricData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.metrics = [];\n        _this.properties = {};\n        return _this;\n    }\n    return MetricData;\n}(Domain));\nmodule.exports = MetricData;\n//# sourceMappingURL=MetricData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar EventData = require(\"./EventData\");\n\"use strict\";\n/**\n * An instance of PageView represents a generic action on a page like a button click. It is also the base type for PageView.\n */\nvar PageViewData = (function (_super) {\n    __extends(PageViewData, _super);\n    function PageViewData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return PageViewData;\n}(EventData));\nmodule.exports = PageViewData;\n//# sourceMappingURL=PageViewData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Remote Dependency represents an interaction of the monitored component with a remote component/service like SQL or an HTTP endpoint.\n */\nvar RemoteDependencyData = (function (_super) {\n    __extends(RemoteDependencyData, _super);\n    function RemoteDependencyData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.success = true;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RemoteDependencyData;\n}(Domain));\nmodule.exports = RemoteDependencyData;\n//# sourceMappingURL=RemoteDependencyData.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// THIS FILE WAS AUTOGENERATED\nvar Domain = require(\"./Domain\");\n\"use strict\";\n/**\n * An instance of Request represents completion of an external request to the application to do work and contains a summary of that request execution and the results.\n */\nvar RequestData = (function (_super) {\n    __extends(RequestData, _super);\n    function RequestData() {\n        var _this = _super.call(this) || this;\n        _this.ver = 2;\n        _this.properties = {};\n        _this.measurements = {};\n        return _this;\n    }\n    return RequestData;\n}(Domain));\nmodule.exports = RequestData;\n//# sourceMappingURL=RequestData.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Defines the level of severity for the event.\n */\nvar SeverityLevel;\n(function (SeverityLevel) {\n    SeverityLevel[SeverityLevel[\"Verbose\"] = 0] = \"Verbose\";\n    SeverityLevel[SeverityLevel[\"Information\"] = 1] = \"Information\";\n    SeverityLevel[SeverityLevel[\"Warning\"] = 2] = \"Warning\";\n    SeverityLevel[SeverityLevel[\"Error\"] = 3] = \"Error\";\n    SeverityLevel[SeverityLevel[\"Critical\"] = 4] = \"Critical\";\n})(SeverityLevel || (SeverityLevel = {}));\nmodule.exports = SeverityLevel;\n//# sourceMappingURL=SeverityLevel.js.map","// THIS FILE WAS AUTOGENERATED\n\"use strict\";\n/**\n * Stack frame information.\n */\nvar StackFrame = (function () {\n    function StackFrame() {\n    }\n    return StackFrame;\n}());\nmodule.exports = StackFrame;\n//# sourceMappingURL=StackFrame.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./TelemetryType\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Converts the user-friendly enumeration TelemetryType to the underlying schema baseType value\n * @param type Type to convert to BaseData string\n */\nfunction telemetryTypeToBaseType(type) {\n    switch (type) {\n        case TelemetryType.Event:\n            return \"EventData\";\n        case TelemetryType.Exception:\n            return \"ExceptionData\";\n        case TelemetryType.Trace:\n            return \"MessageData\";\n        case TelemetryType.Metric:\n            return \"MetricData\";\n        case TelemetryType.Request:\n            return \"RequestData\";\n        case TelemetryType.Dependency:\n            return \"RemoteDependencyData\";\n        case TelemetryType.Availability:\n            return \"AvailabilityData\";\n    }\n    return undefined;\n}\nexports.telemetryTypeToBaseType = telemetryTypeToBaseType;\n/**\n * Converts the schema baseType value to the user-friendly enumeration TelemetryType\n * @param baseType BaseData string to convert to TelemetryType\n */\nfunction baseTypeToTelemetryType(baseType) {\n    switch (baseType) {\n        case \"EventData\":\n            return TelemetryType.Event;\n        case \"ExceptionData\":\n            return TelemetryType.Exception;\n        case \"MessageData\":\n            return TelemetryType.Trace;\n        case \"MetricData\":\n            return TelemetryType.Metric;\n        case \"RequestData\":\n            return TelemetryType.Request;\n        case \"RemoteDependencyData\":\n            return TelemetryType.Dependency;\n        case \"AvailabilityData\":\n            return TelemetryType.Availability;\n    }\n    return undefined;\n}\nexports.baseTypeToTelemetryType = baseTypeToTelemetryType;\nexports.TelemetryTypeString = {\n    Event: \"EventData\",\n    Exception: \"ExceptionData\",\n    Trace: \"MessageData\",\n    Metric: \"MetricData\",\n    Request: \"RequestData\",\n    Dependency: \"RemoteDependencyData\",\n    Availability: \"AvailabilityData\"\n};\n/**\n * Telemetry types supported by this SDK\n */\nvar TelemetryType;\n(function (TelemetryType) {\n    TelemetryType[TelemetryType[\"Event\"] = 0] = \"Event\";\n    TelemetryType[TelemetryType[\"Exception\"] = 1] = \"Exception\";\n    TelemetryType[TelemetryType[\"Trace\"] = 2] = \"Trace\";\n    TelemetryType[TelemetryType[\"Metric\"] = 3] = \"Metric\";\n    TelemetryType[TelemetryType[\"Request\"] = 4] = \"Request\";\n    TelemetryType[TelemetryType[\"Dependency\"] = 5] = \"Dependency\";\n    TelemetryType[TelemetryType[\"Availability\"] = 6] = \"Availability\";\n})(TelemetryType = exports.TelemetryType || (exports.TelemetryType = {}));\n//# sourceMappingURL=TelemetryType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\n// Mapping from bunyan levels defined at https://github.com/trentm/node-bunyan/blob/master/lib/bunyan.js#L256\nvar bunyanToAILevelMap = {\n    10: Contracts_1.SeverityLevel.Verbose,\n    20: Contracts_1.SeverityLevel.Verbose,\n    30: Contracts_1.SeverityLevel.Information,\n    40: Contracts_1.SeverityLevel.Warning,\n    50: Contracts_1.SeverityLevel.Error,\n    60: Contracts_1.SeverityLevel.Critical,\n};\nvar subscriber = function (event) {\n    var message = event.data.result;\n    clients.forEach(function (client) {\n        var AIlevel = bunyanToAILevelMap[event.data.level];\n        if (message instanceof Error) {\n            client.trackException({ exception: (message) });\n        }\n        else {\n            client.trackTrace({ message: message, severity: AIlevel });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"bunyan\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"bunyan\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=bunyan.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts_1 = require(\"../../Declarations/Contracts\");\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nvar winstonToAILevelMap = {\n    syslog: function (og) {\n        var map = {\n            emerg: Contracts_1.SeverityLevel.Critical,\n            alert: Contracts_1.SeverityLevel.Critical,\n            crit: Contracts_1.SeverityLevel.Critical,\n            error: Contracts_1.SeverityLevel.Error,\n            warning: Contracts_1.SeverityLevel.Warning,\n            notice: Contracts_1.SeverityLevel.Information,\n            info: Contracts_1.SeverityLevel.Information,\n            debug: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    npm: function (og) {\n        var map = {\n            error: Contracts_1.SeverityLevel.Error,\n            warn: Contracts_1.SeverityLevel.Warning,\n            info: Contracts_1.SeverityLevel.Information,\n            verbose: Contracts_1.SeverityLevel.Verbose,\n            debug: Contracts_1.SeverityLevel.Verbose,\n            silly: Contracts_1.SeverityLevel.Verbose\n        };\n        return map[og] === undefined ? Contracts_1.SeverityLevel.Information : map[og];\n    },\n    unknown: function (og) {\n        return Contracts_1.SeverityLevel.Information;\n    }\n};\nvar subscriber = function (event) {\n    var message = event.data.message;\n    clients.forEach(function (client) {\n        if (message instanceof Error) {\n            client.trackException({\n                exception: message,\n                properties: event.data.meta\n            });\n        }\n        else {\n            var AIlevel = winstonToAILevelMap[event.data.levelKind](event.data.level);\n            client.trackTrace({\n                message: message,\n                severity: AIlevel,\n                properties: event.data.meta\n            });\n        }\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"winston\", subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n        }\n    }\n}\nexports.enable = enable;\nfunction dispose() {\n    diagnostic_channel_1.channel.unsubscribe(\"winston\", subscriber);\n    clients = [];\n}\nexports.dispose = dispose;\n//# sourceMappingURL=winston.sub.js.map","\"use strict\";\nvar AutoCollectExceptions = (function () {\n    function AutoCollectExceptions(client) {\n        if (!!AutoCollectExceptions.INSTANCE) {\n            throw new Error(\"Exception tracking should be configured from the applicationInsights object\");\n        }\n        AutoCollectExceptions.INSTANCE = this;\n        this._client = client;\n        // Only use for 13.7.0+\n        var nodeVer = process.versions.node.split(\".\");\n        AutoCollectExceptions._canUseUncaughtExceptionMonitor = parseInt(nodeVer[0]) > 13 || (parseInt(nodeVer[0]) === 13 && parseInt(nodeVer[1]) >= 7);\n    }\n    AutoCollectExceptions.prototype.isInitialized = function () {\n        return this._isInitialized;\n    };\n    AutoCollectExceptions.prototype.enable = function (isEnabled) {\n        var _this = this;\n        if (isEnabled) {\n            this._isInitialized = true;\n            var self = this;\n            if (!this._exceptionListenerHandle) {\n                // For scenarios like Promise.reject(), an error won't be passed to the handle. Create a placeholder\n                // error for these scenarios.\n                var handle = function (reThrow, name, error) {\n                    if (error === void 0) { error = new Error(AutoCollectExceptions._FALLBACK_ERROR_MESSAGE); }\n                    _this._client.trackException({ exception: error });\n                    _this._client.flush({ isAppCrashing: true });\n                    // only rethrow when we are the only listener\n                    if (reThrow && name && process.listeners(name).length === 1) {\n                        console.error(error);\n                        process.exit(1);\n                    }\n                };\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    // Node.js >= 13.7.0, use uncaughtExceptionMonitor. It handles both promises and exceptions\n                    this._exceptionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    this._exceptionListenerHandle = handle.bind(this, true, AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME);\n                    this._rejectionListenerHandle = handle.bind(this, false); // never rethrows\n                    process.on(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.on(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n            }\n        }\n        else {\n            if (this._exceptionListenerHandle) {\n                if (AutoCollectExceptions._canUseUncaughtExceptionMonitor) {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME, this._exceptionListenerHandle);\n                }\n                else {\n                    process.removeListener(AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME, this._exceptionListenerHandle);\n                    process.removeListener(AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME, this._rejectionListenerHandle);\n                }\n                this._exceptionListenerHandle = undefined;\n                this._rejectionListenerHandle = undefined;\n                delete this._exceptionListenerHandle;\n                delete this._rejectionListenerHandle;\n            }\n        }\n    };\n    AutoCollectExceptions.prototype.dispose = function () {\n        AutoCollectExceptions.INSTANCE = null;\n        this.enable(false);\n        this._isInitialized = false;\n    };\n    AutoCollectExceptions.INSTANCE = null;\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME = \"uncaughtExceptionMonitor\";\n    AutoCollectExceptions.UNCAUGHT_EXCEPTION_HANDLER_NAME = \"uncaughtException\";\n    AutoCollectExceptions.UNHANDLED_REJECTION_HANDLER_NAME = \"unhandledRejection\";\n    AutoCollectExceptions._RETHROW_EXIT_MESSAGE = \"Application Insights Rethrow Exception Handler\";\n    AutoCollectExceptions._FALLBACK_ERROR_MESSAGE = \"A promise was rejected without providing an error. Application Insights generated this error stack for you.\";\n    AutoCollectExceptions._canUseUncaughtExceptionMonitor = false;\n    return AutoCollectExceptions;\n}());\nmodule.exports = AutoCollectExceptions;\n//# sourceMappingURL=Exceptions.js.map","module.exports = require(\"constants\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpDependencyParser = (function (_super) {\n    __extends(HttpDependencyParser, _super);\n    function HttpDependencyParser(requestOptions, request) {\n        var _this = _super.call(this) || this;\n        if (request && request.method && requestOptions) {\n            // The ClientRequest.method property isn't documented, but is always there.\n            _this.method = request.method;\n            _this.url = HttpDependencyParser._getUrlFromRequestOptions(requestOptions, request);\n            _this.startTime = +new Date();\n        }\n        return _this;\n    }\n    /**\n     * Called when the ClientRequest emits an error event.\n     */\n    HttpDependencyParser.prototype.onError = function (error) {\n        this._setStatus(undefined, error);\n    };\n    /**\n     * Called when the ClientRequest emits a response event.\n     */\n    HttpDependencyParser.prototype.onResponse = function (response) {\n        this._setStatus(response.statusCode, undefined);\n        this.correlationId = Util.getCorrelationContextTarget(response, RequestResponseHeaders.requestContextTargetKey);\n    };\n    /**\n     * Gets a dependency data contract object for a completed ClientRequest.\n     */\n    HttpDependencyParser.prototype.getDependencyTelemetry = function (baseTelemetry, dependencyId) {\n        var urlObject = url.parse(this.url);\n        urlObject.search = undefined;\n        urlObject.hash = undefined;\n        var dependencyName = this.method.toUpperCase() + \" \" + urlObject.pathname;\n        var remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        var remoteDependencyTarget = urlObject.hostname;\n        if (this.correlationId) {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_AI;\n            if (this.correlationId !== CorrelationIdManager.correlationIdPrefix) {\n                remoteDependencyTarget = urlObject.hostname + \" | \" + this.correlationId;\n            }\n        }\n        else {\n            remoteDependencyType = Contracts.RemoteDependencyDataConstants.TYPE_HTTP;\n        }\n        if (urlObject.port) {\n            remoteDependencyTarget += \":\" + urlObject.port;\n        }\n        var dependencyTelemetry = {\n            id: dependencyId,\n            name: dependencyName,\n            data: this.url,\n            duration: this.duration,\n            success: this._isSuccess(),\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            properties: this.properties || {},\n            dependencyTypeName: remoteDependencyType,\n            target: remoteDependencyTarget\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!dependencyTelemetry[key]) {\n                    dependencyTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    dependencyTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return dependencyTelemetry;\n    };\n    /**\n     * Builds a URL from request options, using the same logic as http.request(). This is\n     * necessary because a ClientRequest object does not expose a url property.\n     */\n    HttpDependencyParser._getUrlFromRequestOptions = function (options, request) {\n        if (typeof options === 'string') {\n            options = url.parse(options);\n        }\n        else {\n            // Avoid modifying the original options object.\n            var originalOptions_1 = options;\n            options = {};\n            if (originalOptions_1) {\n                Object.keys(originalOptions_1).forEach(function (key) {\n                    options[key] = originalOptions_1[key];\n                });\n            }\n        }\n        // Oddly, url.format ignores path and only uses pathname and search,\n        // so create them from the path, if path was specified\n        if (options.path) {\n            var parsedQuery = url.parse(options.path);\n            options.pathname = parsedQuery.pathname;\n            options.search = parsedQuery.search;\n        }\n        // Simiarly, url.format ignores hostname and port if host is specified,\n        // even if host doesn't have the port, but http.request does not work\n        // this way. It will use the port if one is not specified in host,\n        // effectively treating host as hostname, but will use the port specified\n        // in host if it exists.\n        if (options.host && options.port) {\n            // Force a protocol so it will parse the host as the host, not path.\n            // It is discarded and not used, so it doesn't matter if it doesn't match\n            var parsedHost = url.parse(\"http://\" + options.host);\n            if (!parsedHost.port && options.port) {\n                options.hostname = options.host;\n                delete options.host;\n            }\n        }\n        // Mix in default values used by http.request and others\n        options.protocol = options.protocol || (request.agent && request.agent.protocol) || undefined;\n        options.hostname = options.hostname || 'localhost';\n        return url.format(options);\n    };\n    return HttpDependencyParser;\n}(RequestParser));\nmodule.exports = HttpDependencyParser;\n//# sourceMappingURL=HttpDependencyParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    if (event.data.event.commandName === \"ismaster\") {\n        // suppress noisy ismaster commands\n    }\n    clients.forEach(function (client) {\n        var dbName = (event.data.startedData && event.data.startedData.databaseName) || \"Unknown database\";\n        client.trackDependency({\n            target: dbName,\n            data: event.data.event.commandName,\n            name: event.data.event.commandName,\n            duration: event.data.event.duration,\n            success: event.data.succeeded,\n            /* TODO: transmit result code from mongo */\n            resultCode: event.data.succeeded ? \"0\" : \"1\",\n            dependencyTypeName: 'mongodb'\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mongodb\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mongodb\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mongodb.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var queryObj = event.data.query || {};\n        var sqlString = queryObj.sql || \"Unknown query\";\n        var success = !event.data.err;\n        var connection = queryObj._connection || {};\n        var connectionConfig = connection.config || {};\n        var dbName = connectionConfig.socketPath ? connectionConfig.socketPath : (connectionConfig.host || \"localhost\") + \":\" + connectionConfig.port;\n        client.trackDependency({\n            target: dbName,\n            data: sqlString,\n            name: sqlString,\n            duration: event.data.duration,\n            success: success,\n            /* TODO: transmit result code from mysql */\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"mysql\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"mysql\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"mysql\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=mysql.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        if (event.data.commandObj.command === \"info\") {\n            // We don't want to report 'info', it's irrelevant\n            return;\n        }\n        client.trackDependency({\n            target: event.data.address,\n            name: event.data.commandObj.command,\n            data: event.data.commandObj.command,\n            duration: event.data.duration,\n            success: !event.data.err,\n            /* TODO: transmit result code from redis */\n            resultCode: event.data.err ? \"1\" : \"0\",\n            dependencyTypeName: \"redis\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"redis\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"redis\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=redis.sub.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar diagnostic_channel_1 = require(\"diagnostic-channel\");\nvar clients = [];\nexports.subscriber = function (event) {\n    clients.forEach(function (client) {\n        var q = event.data.query;\n        var sql = (q.preparable && q.preparable.text) || q.plan || q.text || \"unknown query\";\n        var success = !event.data.error;\n        var conn = event.data.database.host + \":\" + event.data.database.port;\n        client.trackDependency({\n            target: conn,\n            data: sql,\n            name: sql,\n            duration: event.data.duration,\n            success: success,\n            resultCode: success ? \"0\" : \"1\",\n            dependencyTypeName: \"postgres\"\n        });\n    });\n};\nfunction enable(enabled, client) {\n    if (enabled) {\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.subscribe(\"postgres\", exports.subscriber);\n        }\n        ;\n        clients.push(client);\n    }\n    else {\n        clients = clients.filter(function (c) { return c != client; });\n        if (clients.length === 0) {\n            diagnostic_channel_1.channel.unsubscribe(\"postgres\", exports.subscriber);\n        }\n    }\n}\nexports.enable = enable;\n//# sourceMappingURL=postgres.sub.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar url = require(\"url\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"../Library/Util\");\nvar RequestResponseHeaders = require(\"../Library/RequestResponseHeaders\");\nvar RequestParser = require(\"./RequestParser\");\nvar CorrelationIdManager = require(\"../Library/CorrelationIdManager\");\nvar Tracestate = require(\"../Library/Tracestate\");\nvar Traceparent = require(\"../Library/Traceparent\");\n/**\n * Helper class to read data from the requst/response objects and convert them into the telemetry contract\n */\nvar HttpRequestParser = (function (_super) {\n    __extends(HttpRequestParser, _super);\n    function HttpRequestParser(request, requestId) {\n        var _this = _super.call(this) || this;\n        if (request) {\n            _this.method = request.method;\n            _this.url = _this._getAbsoluteUrl(request);\n            _this.startTime = +new Date();\n            _this.socketRemoteAddress = request.socket && request.socket.remoteAddress;\n            _this.parseHeaders(request, requestId);\n            if (request.connection) {\n                _this.connectionRemoteAddress = request.connection.remoteAddress;\n                _this.legacySocketRemoteAddress = request.connection[\"socket\"] && request.connection[\"socket\"].remoteAddress;\n            }\n        }\n        return _this;\n    }\n    HttpRequestParser.prototype.onError = function (error, ellapsedMilliseconds) {\n        this._setStatus(undefined, error);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.onResponse = function (response, ellapsedMilliseconds) {\n        this._setStatus(response.statusCode, undefined);\n        // This parameter is only for overrides. setStatus handles this internally for the autocollected case\n        if (ellapsedMilliseconds) {\n            this.duration = ellapsedMilliseconds;\n        }\n    };\n    HttpRequestParser.prototype.getRequestTelemetry = function (baseTelemetry) {\n        var requestTelemetry = {\n            id: this.requestId,\n            name: this.method + \" \" + url.parse(this.url).pathname,\n            url: this.url,\n            /*\n            See https://github.com/Microsoft/ApplicationInsights-dotnet-server/blob/25d695e6a906fbe977f67be3966d25dbf1c50a79/Src/Web/Web.Shared.Net/RequestTrackingTelemetryModule.cs#L250\n            for reference\n            */\n            source: this.sourceCorrelationId,\n            duration: this.duration,\n            resultCode: this.statusCode ? this.statusCode.toString() : null,\n            success: this._isSuccess(),\n            properties: this.properties\n        };\n        // We should keep any parameters the user passed in\n        // Except the fields defined above in requestTelemetry, which take priority\n        // Except the properties field, where they're merged instead, with baseTelemetry taking priority\n        if (baseTelemetry) {\n            // Copy missing fields\n            for (var key in baseTelemetry) {\n                if (!requestTelemetry[key]) {\n                    requestTelemetry[key] = baseTelemetry[key];\n                }\n            }\n            // Merge properties\n            if (baseTelemetry.properties) {\n                for (var key in baseTelemetry.properties) {\n                    requestTelemetry.properties[key] = baseTelemetry.properties[key];\n                }\n            }\n        }\n        return requestTelemetry;\n    };\n    HttpRequestParser.prototype.getRequestTags = function (tags) {\n        // create a copy of the context for requests since client info will be used here\n        var newTags = {};\n        for (var key in tags) {\n            newTags[key] = tags[key];\n        }\n        // don't override tags if they are already set\n        newTags[HttpRequestParser.keys.locationIp] = tags[HttpRequestParser.keys.locationIp] || this._getIp();\n        newTags[HttpRequestParser.keys.sessionId] = tags[HttpRequestParser.keys.sessionId] || this._getId(\"ai_session\");\n        newTags[HttpRequestParser.keys.userId] = tags[HttpRequestParser.keys.userId] || this._getId(\"ai_user\");\n        newTags[HttpRequestParser.keys.userAuthUserId] = tags[HttpRequestParser.keys.userAuthUserId] || this._getId(\"ai_authUser\");\n        newTags[HttpRequestParser.keys.operationName] = this.getOperationName(tags);\n        newTags[HttpRequestParser.keys.operationParentId] = this.getOperationParentId(tags);\n        newTags[HttpRequestParser.keys.operationId] = this.getOperationId(tags);\n        return newTags;\n    };\n    HttpRequestParser.prototype.getOperationId = function (tags) {\n        return tags[HttpRequestParser.keys.operationId] || this.operationId;\n    };\n    HttpRequestParser.prototype.getOperationParentId = function (tags) {\n        return tags[HttpRequestParser.keys.operationParentId] || this.parentId || this.getOperationId(tags);\n    };\n    HttpRequestParser.prototype.getOperationName = function (tags) {\n        return tags[HttpRequestParser.keys.operationName] || this.method + \" \" + url.parse(this.url).pathname;\n    };\n    HttpRequestParser.prototype.getRequestId = function () {\n        return this.requestId;\n    };\n    HttpRequestParser.prototype.getCorrelationContextHeader = function () {\n        return this.correlationContextHeader;\n    };\n    HttpRequestParser.prototype.getTraceparent = function () {\n        return this.traceparent;\n    };\n    HttpRequestParser.prototype.getTracestate = function () {\n        return this.tracestate;\n    };\n    HttpRequestParser.prototype.getLegacyRootId = function () {\n        return this.legacyRootId;\n    };\n    HttpRequestParser.prototype._getAbsoluteUrl = function (request) {\n        if (!request.headers) {\n            return request.url;\n        }\n        var encrypted = request.connection ? request.connection.encrypted : null;\n        var requestUrl = url.parse(request.url);\n        var pathName = requestUrl.pathname;\n        var search = requestUrl.search;\n        var absoluteUrl = url.format({\n            protocol: encrypted ? \"https\" : \"http\",\n            host: request.headers.host,\n            pathname: pathName,\n            search: search\n        });\n        return absoluteUrl;\n    };\n    HttpRequestParser.prototype._getIp = function () {\n        // regex to match ipv4 without port\n        // Note: including the port would cause the payload to be rejected by the data collector\n        var ipMatch = /[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}/;\n        var check = function (str) {\n            var results = ipMatch.exec(str);\n            if (results) {\n                return results[0];\n            }\n        };\n        var ip = check(this.rawHeaders[\"x-forwarded-for\"])\n            || check(this.rawHeaders[\"x-client-ip\"])\n            || check(this.rawHeaders[\"x-real-ip\"])\n            || check(this.connectionRemoteAddress)\n            || check(this.socketRemoteAddress)\n            || check(this.legacySocketRemoteAddress);\n        // node v12 returns this if the address is \"localhost\"\n        if (!ip\n            && this.connectionRemoteAddress\n            && this.connectionRemoteAddress.substr\n            && this.connectionRemoteAddress.substr(0, 2) === \"::\") {\n            ip = \"127.0.0.1\";\n        }\n        return ip;\n    };\n    HttpRequestParser.prototype._getId = function (name) {\n        var cookie = (this.rawHeaders && this.rawHeaders[\"cookie\"] &&\n            typeof this.rawHeaders[\"cookie\"] === 'string' && this.rawHeaders[\"cookie\"]) || \"\";\n        var value = HttpRequestParser.parseId(Util.getCookie(name, cookie));\n        return value;\n    };\n    /**\n     * Sets this operation's operationId, parentId, requestId (and legacyRootId, if necessary) based on this operation's traceparent\n     */\n    HttpRequestParser.prototype.setBackCompatFromThisTraceContext = function () {\n        // Set operationId\n        this.operationId = this.traceparent.traceId;\n        if (this.traceparent.legacyRootId) {\n            this.legacyRootId = this.traceparent.legacyRootId;\n        }\n        // Set parentId with existing spanId\n        this.parentId = this.traceparent.parentId;\n        // Update the spanId and set the current requestId\n        this.traceparent.updateSpanId();\n        this.requestId = this.traceparent.getBackCompatRequestId();\n    };\n    HttpRequestParser.prototype.parseHeaders = function (request, requestId) {\n        this.rawHeaders = request.headers || request.rawHeaders;\n        this.userAgent = request.headers && request.headers[\"user-agent\"];\n        this.sourceCorrelationId = Util.getCorrelationContextTarget(request, RequestResponseHeaders.requestContextSourceKey);\n        if (request.headers) {\n            var tracestateHeader = request.headers[RequestResponseHeaders.traceStateHeader]; // w3c header\n            var traceparentHeader = request.headers[RequestResponseHeaders.traceparentHeader]; // w3c header\n            var requestIdHeader = request.headers[RequestResponseHeaders.requestIdHeader]; // default AI header\n            var legacy_parentId = request.headers[RequestResponseHeaders.parentIdHeader]; // legacy AI header\n            var legacy_rootId = request.headers[RequestResponseHeaders.rootIdHeader]; // legacy AI header\n            this.correlationContextHeader = request.headers[RequestResponseHeaders.correlationContextHeader];\n            if (CorrelationIdManager.w3cEnabled && (traceparentHeader || tracestateHeader)) {\n                // Parse W3C Trace Context headers\n                this.traceparent = new Traceparent(traceparentHeader); // new traceparent is always created from this\n                this.tracestate = traceparentHeader && tracestateHeader && new Tracestate(tracestateHeader); // discard tracestate if no traceparent is present\n                this.setBackCompatFromThisTraceContext();\n            }\n            else if (requestIdHeader) {\n                // Parse AI headers\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent(null, requestIdHeader);\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = requestIdHeader;\n                    this.requestId = CorrelationIdManager.generateRequestId(this.parentId);\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            else {\n                // Legacy fallback\n                if (CorrelationIdManager.w3cEnabled) {\n                    this.traceparent = new Traceparent();\n                    this.traceparent.parentId = legacy_parentId;\n                    this.traceparent.legacyRootId = legacy_rootId || legacy_parentId;\n                    this.setBackCompatFromThisTraceContext();\n                }\n                else {\n                    this.parentId = legacy_parentId;\n                    this.requestId = CorrelationIdManager.generateRequestId(legacy_rootId || this.parentId);\n                    this.correlationContextHeader = null;\n                    this.operationId = CorrelationIdManager.getRootId(this.requestId);\n                }\n            }\n            if (requestId) {\n                // For the scenarios that don't guarantee an AI-created context,\n                // override the requestId with the provided one.\n                this.requestId = requestId;\n                this.operationId = CorrelationIdManager.getRootId(this.requestId);\n            }\n        }\n    };\n    HttpRequestParser.parseId = function (cookieValue) {\n        var cookieParts = cookieValue.split(\"|\");\n        if (cookieParts.length > 0) {\n            return cookieParts[0];\n        }\n        return \"\"; // old behavior was to return \"\" for incorrect parsing\n    };\n    HttpRequestParser.keys = new Contracts.ContextTagKeys();\n    return HttpRequestParser;\n}(RequestParser));\nmodule.exports = HttpRequestParser;\n//# sourceMappingURL=HttpRequestParser.js.map","\"use strict\";\n/**\n * Helper class to manage parsing and strict-validation of tracestate header. W3C tracestate spec\n * is documented at https://www.w3.org/TR/trace-context/#header-value\n * @class Tracestate\n */\nvar Tracestate = (function () {\n    // if true, performs strict tracestate header checking, else just passes it along\n    function Tracestate(id) {\n        this.fieldmap = [];\n        if (!id) {\n            return;\n        }\n        this.fieldmap = this.parseHeader(id);\n    }\n    Tracestate.prototype.toString = function () {\n        var fieldarr = this.fieldmap;\n        if (!fieldarr || fieldarr.length == 0) {\n            return null;\n        }\n        return fieldarr.join(\", \");\n    };\n    Tracestate.validateKeyChars = function (key) {\n        var keyParts = key.split(\"@\");\n        if (keyParts.length == 2) {\n            // Parse for tenant@vendor format\n            var tenant = keyParts[0].trim();\n            var vendor = keyParts[1].trim();\n            var tenantValid = Boolean(tenant.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,241}$/));\n            var vendorValid = Boolean(vendor.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,14}$/));\n            return tenantValid && vendorValid;\n        }\n        else if (keyParts.length == 1) {\n            // Parse for standard key format\n            return Boolean(key.match(/^[\\ ]?[a-z0-9\\*\\-\\_/]{1,256}$/));\n        }\n        return false;\n    };\n    Tracestate.prototype.parseHeader = function (id) {\n        var res = [];\n        var keydeduper = {};\n        var parts = id.split(\",\");\n        if (parts.length > 32)\n            return null;\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n            var rawPart = parts_1[_i];\n            var part = rawPart.trim(); // trim out whitespace\n            if (part.length === 0) {\n                continue; // Discard empty pairs, but keep the rest of this tracestate\n            }\n            var pair = part.split(\"=\");\n            // pair should contain exactly one \"=\"\n            if (pair.length !== 2) {\n                return null; // invalid pair: discard entire tracestate\n            }\n            // Validate length and charset of this key\n            if (!Tracestate.validateKeyChars(pair[0])) {\n                return null;\n            }\n            // Assert uniqueness of this key\n            if (keydeduper[pair[0]]) {\n                return null; // duplicate key: discard entire tracestate\n            }\n            else {\n                keydeduper[pair[0]] = true;\n            }\n            // All checks passed -- add this part\n            res.push(part);\n        }\n        return res;\n    };\n    Tracestate.strict = true;\n    return Tracestate;\n}());\nmodule.exports = Tracestate;\n//# sourceMappingURL=Tracestate.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Config = require(\"./Config\");\nvar QuickPulseEnvelopeFactory = require(\"./QuickPulseEnvelopeFactory\");\nvar QuickPulseSender = require(\"./QuickPulseSender\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Context = require(\"./Context\");\n/** State Container for sending to the QuickPulse Service */\nvar QuickPulseStateManager = (function () {\n    function QuickPulseStateManager(iKey, context) {\n        this._isCollectingData = false;\n        this._lastSuccessTime = Date.now();\n        this._lastSendSucceeded = true;\n        this._metrics = {};\n        this._documents = [];\n        this._collectors = [];\n        this.config = new Config(iKey);\n        this.context = context || new Context();\n        this._sender = new QuickPulseSender(this.config);\n        this._isEnabled = false;\n    }\n    /**\n     *\n     * @param collector\n     */\n    QuickPulseStateManager.prototype.addCollector = function (collector) {\n        this._collectors.push(collector);\n    };\n    /**\n     * Override of TelemetryClient.trackMetric\n     */\n    QuickPulseStateManager.prototype.trackMetric = function (telemetry) {\n        this._addMetric(telemetry);\n    };\n    /**\n     * Add a document to the current buffer\n     * @param envelope\n     */\n    QuickPulseStateManager.prototype.addDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument(envelope);\n        if (document) {\n            this._documents.push(document);\n        }\n    };\n    /**\n     * Enable or disable communication with QuickPulseService\n     * @param isEnabled\n     */\n    QuickPulseStateManager.prototype.enable = function (isEnabled) {\n        if (isEnabled && !this._isEnabled) {\n            this._isEnabled = true;\n            this._goQuickPulse();\n        }\n        else if (!isEnabled && this._isEnabled) {\n            this._isEnabled = false;\n            clearTimeout(this._handle);\n            this._handle = undefined;\n        }\n    };\n    /**\n     * Enable or disable all collectors in this instance\n     * @param enable\n     */\n    QuickPulseStateManager.prototype.enableCollectors = function (enable) {\n        this._collectors.forEach(function (collector) {\n            collector.enable(enable);\n        });\n    };\n    /**\n     * Add the metric to this buffer. If same metric already exists in this buffer, add weight to it\n     * @param telemetry\n     */\n    QuickPulseStateManager.prototype._addMetric = function (telemetry) {\n        var value = telemetry.value;\n        var count = telemetry.count || 1;\n        var name = Constants.PerformanceToQuickPulseCounter[telemetry.name];\n        if (name) {\n            if (this._metrics[name]) {\n                this._metrics[name].Value = (this._metrics[name].Value * this._metrics[name].Weight + value * count) / (this._metrics[name].Weight + count);\n                this._metrics[name].Weight += count;\n            }\n            else {\n                this._metrics[name] = QuickPulseEnvelopeFactory.createQuickPulseMetric(telemetry);\n                this._metrics[name].Name = name;\n                this._metrics[name].Weight = 1;\n            }\n        }\n    };\n    QuickPulseStateManager.prototype._resetQuickPulseBuffer = function () {\n        delete this._metrics;\n        this._metrics = {};\n        this._documents.length = 0;\n    };\n    QuickPulseStateManager.prototype._goQuickPulse = function () {\n        var _this = this;\n        // Create envelope from Documents and Metrics\n        var metrics = Object.keys(this._metrics).map(function (k) { return _this._metrics[k]; });\n        var envelope = QuickPulseEnvelopeFactory.createQuickPulseEnvelope(metrics, this._documents.slice(), this.config, this.context);\n        // Clear this document, metric buffer\n        this._resetQuickPulseBuffer();\n        // Send it to QuickPulseService, if collecting\n        if (this._isCollectingData) {\n            this._post(envelope);\n        }\n        else {\n            this._ping(envelope);\n        }\n        var currentTimeout = this._isCollectingData ? QuickPulseStateManager.POST_INTERVAL : QuickPulseStateManager.PING_INTERVAL;\n        if (this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_POST_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't posted successfully in 20 seconds, so wait 60 seconds and ping\n            this._isCollectingData = false;\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        else if (!this._isCollectingData && Date.now() - this._lastSuccessTime >= QuickPulseStateManager.MAX_PING_WAIT_TIME && !this._lastSendSucceeded) {\n            // Haven't pinged successfully in 60 seconds, so wait another 60 seconds\n            currentTimeout = QuickPulseStateManager.FALLBACK_INTERVAL;\n        }\n        this._lastSendSucceeded = null;\n        this._handle = setTimeout(this._goQuickPulse.bind(this), currentTimeout);\n        this._handle.unref(); // Don't block apps from terminating\n    };\n    QuickPulseStateManager.prototype._ping = function (envelope) {\n        this._sender.ping(envelope, this._quickPulseDone.bind(this));\n    };\n    QuickPulseStateManager.prototype._post = function (envelope) {\n        this._sender.post(envelope, this._quickPulseDone.bind(this));\n    };\n    /**\n     * Change the current QPS send state. (shouldPOST == undefined) --> error, but do not change the state yet.\n     */\n    QuickPulseStateManager.prototype._quickPulseDone = function (shouldPOST, res) {\n        if (shouldPOST != undefined) {\n            if (this._isCollectingData !== shouldPOST) {\n                Logging.info(\"Live Metrics sending data\", shouldPOST);\n                this.enableCollectors(shouldPOST);\n            }\n            this._isCollectingData = shouldPOST;\n            if (res && res.statusCode < 300 && res.statusCode >= 200) {\n                this._lastSuccessTime = Date.now();\n                this._lastSendSucceeded = true;\n            }\n            else {\n                this._lastSendSucceeded = false;\n            }\n        }\n        else {\n            // Received an error, keep the state as is\n            this._lastSendSucceeded = false;\n        }\n    };\n    QuickPulseStateManager.MAX_POST_WAIT_TIME = 20000;\n    QuickPulseStateManager.MAX_PING_WAIT_TIME = 60000;\n    QuickPulseStateManager.FALLBACK_INTERVAL = 60000;\n    QuickPulseStateManager.PING_INTERVAL = 5000;\n    QuickPulseStateManager.POST_INTERVAL = 1000;\n    return QuickPulseStateManager;\n}());\nmodule.exports = QuickPulseStateManager;\n//# sourceMappingURL=QuickPulseStateManager.js.map","\"use strict\";\nvar Constants = require(\"../Declarations/Constants\");\nvar ConnectionStringParser = (function () {\n    function ConnectionStringParser() {\n    }\n    ConnectionStringParser.parse = function (connectionString) {\n        if (!connectionString) {\n            return {};\n        }\n        var kvPairs = connectionString.split(ConnectionStringParser._FIELDS_SEPARATOR);\n        var result = kvPairs.reduce(function (fields, kv) {\n            var kvParts = kv.split(ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR);\n            if (kvParts.length === 2) {\n                var key = kvParts[0].toLowerCase();\n                var value = kvParts[1];\n                fields[key] = value;\n            }\n            return fields;\n        }, {});\n        if (Object.keys(result).length > 0) {\n            // this is a valid connection string, so parse the results\n            if (result.endpointsuffix) {\n                // use endpoint suffix where overrides are not provided\n                var locationPrefix = result.location ? result.location + \".\" : \"\";\n                result.ingestionendpoint = result.ingestionendpoint || (\"https://\" + locationPrefix + \"dc.\" + result.endpointsuffix);\n                result.liveendpoint = result.liveendpoint || (\"https://\" + locationPrefix + \"live.\" + result.endpointsuffix);\n            }\n            // apply the default endpoints\n            result.ingestionendpoint = result.ingestionendpoint || Constants.DEFAULT_BREEZE_ENDPOINT;\n            result.liveendpoint = result.liveendpoint || Constants.DEFAULT_LIVEMETRICS_ENDPOINT;\n        }\n        return result;\n    };\n    ConnectionStringParser._FIELDS_SEPARATOR = \";\";\n    ConnectionStringParser._FIELD_KEY_VALUE_SEPARATOR = \"=\";\n    return ConnectionStringParser;\n}());\nmodule.exports = ConnectionStringParser;\n//# sourceMappingURL=ConnectionStringParser.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar os = require(\"os\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Constants = require(\"../Declarations/Constants\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar StreamId = Util.w3cTraceId(); // Create a guid\nvar QuickPulseEnvelopeFactory = (function () {\n    function QuickPulseEnvelopeFactory() {\n    }\n    QuickPulseEnvelopeFactory.createQuickPulseEnvelope = function (metrics, documents, config, context) {\n        var machineName = (os && typeof os.hostname === \"function\"\n            && os.hostname()) || \"Unknown\"; // Note: os.hostname() was added in node v0.3.3\n        var instance = (context.tags\n            && context.keys\n            && context.keys.cloudRoleInstance\n            && context.tags[context.keys.cloudRoleInstance]) || machineName;\n        var envelope = {\n            Documents: documents.length > 0 ? documents : null,\n            InstrumentationKey: config.instrumentationKey || \"\",\n            Metrics: metrics.length > 0 ? metrics : null,\n            InvariantVersion: 1,\n            Timestamp: \"/Date(\" + Date.now() + \")/\",\n            Version: context.tags[context.keys.internalSdkVersion],\n            StreamId: StreamId,\n            MachineName: machineName,\n            Instance: instance\n        };\n        return envelope;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseMetric = function (telemetry) {\n        var data;\n        data = {\n            Name: telemetry.name,\n            Value: telemetry.value,\n            Weight: telemetry.count || 1\n        };\n        return data;\n    };\n    QuickPulseEnvelopeFactory.telemetryEnvelopeToQuickPulseDocument = function (envelope) {\n        switch (envelope.data.baseType) {\n            case Contracts.TelemetryTypeString.Event:\n                return QuickPulseEnvelopeFactory.createQuickPulseEventDocument(envelope);\n            case Contracts.TelemetryTypeString.Exception:\n                return QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument(envelope);\n            case Contracts.TelemetryTypeString.Trace:\n                return QuickPulseEnvelopeFactory.createQuickPulseTraceDocument(envelope);\n            case Contracts.TelemetryTypeString.Dependency:\n                return QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument(envelope);\n            case Contracts.TelemetryTypeString.Request:\n                return QuickPulseEnvelopeFactory.createQuickPulseRequestDocument(envelope);\n        }\n        return null;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseEventDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var name = envelope.data.baseData.name;\n        var eventDocument = __assign({}, document, { Name: name });\n        return eventDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseTraceDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var severityLevel = envelope.data.baseData.severityLevel || 0;\n        var traceDocument = __assign({}, document, { Message: envelope.data.baseData.message, SeverityLevel: Contracts.SeverityLevel[severityLevel] });\n        return traceDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseExceptionDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var exceptionDetails = envelope.data.baseData.exceptions;\n        var exception = '';\n        var exceptionMessage = '';\n        var exceptionType = '';\n        // Try to fill exception information from first error only\n        if (exceptionDetails && exceptionDetails.length > 0) {\n            // Try to grab the stack from parsedStack or stack\n            if (exceptionDetails[0].parsedStack && exceptionDetails[0].parsedStack.length > 0) {\n                exceptionDetails[0].parsedStack.forEach(function (err) {\n                    exception += err.assembly + \"\\n\";\n                });\n            }\n            else if (exceptionDetails[0].stack && exceptionDetails[0].stack.length > 0) {\n                exception = exceptionDetails[0].stack;\n            }\n            exceptionMessage = exceptionDetails[0].message;\n            exceptionType = exceptionDetails[0].typeName;\n        }\n        var exceptionDocument = __assign({}, document, { Exception: exception, ExceptionMessage: exceptionMessage, ExceptionType: exceptionType });\n        return exceptionDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseRequestDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var requestDocument = __assign({}, document, { Name: baseData.name, Success: baseData.success, Duration: baseData.duration, ResponseCode: baseData.responseCode, OperationName: baseData.name // TODO: is this correct?\n         });\n        return requestDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDependencyDocument = function (envelope) {\n        var document = QuickPulseEnvelopeFactory.createQuickPulseDocument(envelope);\n        var baseData = envelope.data.baseData;\n        var dependencyDocument = __assign({}, document, { Name: baseData.name, Target: baseData.target, Success: baseData.success, Duration: baseData.duration, ResultCode: baseData.resultCode, CommandName: baseData.data, OperationName: document.OperationId, DependencyTypeName: baseData.type });\n        return dependencyDocument;\n    };\n    QuickPulseEnvelopeFactory.createQuickPulseDocument = function (envelope) {\n        var documentType;\n        var __type;\n        var operationId, properties;\n        if (envelope.data.baseType) {\n            __type = Constants.TelemetryTypeStringToQuickPulseType[envelope.data.baseType];\n            documentType = Constants.TelemetryTypeStringToQuickPulseDocumentType[envelope.data.baseType];\n        }\n        else {\n            // Remark: This should never be hit because createQuickPulseDocument is only called within\n            // valid baseType values\n            Logging.warn(\"Document type invalid; not sending live metric document\", envelope.data.baseType);\n        }\n        operationId = envelope.tags[QuickPulseEnvelopeFactory.keys.operationId];\n        properties = QuickPulseEnvelopeFactory.aggregateProperties(envelope);\n        var document = {\n            DocumentType: documentType,\n            __type: __type,\n            OperationId: operationId,\n            Version: \"1.0\",\n            Properties: properties\n        };\n        return document;\n    };\n    QuickPulseEnvelopeFactory.aggregateProperties = function (envelope) {\n        var properties = [];\n        // Collect measurements\n        var meas = (envelope.data.baseData).measurements || {};\n        for (var key in meas) {\n            if (meas.hasOwnProperty(key)) {\n                var value = meas[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        // Collect properties\n        var props = (envelope.data.baseData).properties || {};\n        for (var key in props) {\n            if (props.hasOwnProperty(key)) {\n                var value = props[key];\n                var property = { key: key, value: value };\n                properties.push(property);\n            }\n        }\n        return properties;\n    };\n    QuickPulseEnvelopeFactory.keys = new Contracts.ContextTagKeys();\n    return QuickPulseEnvelopeFactory;\n}());\nmodule.exports = QuickPulseEnvelopeFactory;\n//# sourceMappingURL=QuickPulseEnvelopeFactory.js.map","\"use strict\";\nvar https = require(\"https\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\nvar QuickPulseConfig = {\n    method: \"POST\",\n    time: \"x-ms-qps-transmission-time\",\n    subscribed: \"x-ms-qps-subscribed\"\n};\nvar QuickPulseSender = (function () {\n    function QuickPulseSender(config) {\n        this._config = config;\n        this._consecutiveErrors = 0;\n    }\n    QuickPulseSender.prototype.ping = function (envelope, done) {\n        this._submitData(envelope, done, \"ping\");\n    };\n    QuickPulseSender.prototype.post = function (envelope, done) {\n        // Important: When POSTing data, envelope must be an array\n        this._submitData([envelope], done, \"post\");\n    };\n    QuickPulseSender.prototype._submitData = function (envelope, done, postOrPing) {\n        var _this = this;\n        var payload = JSON.stringify(envelope);\n        var options = (_a = {},\n            _a[AutoCollectHttpDependencies.disableCollectionRequestOption] = true,\n            _a.host = this._config.quickPulseHost,\n            _a.method = QuickPulseConfig.method,\n            _a.path = \"/QuickPulseService.svc/\" + postOrPing + \"?ikey=\" + this._config.instrumentationKey,\n            _a.headers = (_b = {\n                    'Expect': '100-continue'\n                },\n                _b[QuickPulseConfig.time] = 10000 * Date.now(),\n                _b['Content-Type'] = 'application\\/json',\n                _b['Content-Length'] = Buffer.byteLength(payload),\n                _b),\n            _a);\n        var req = https.request(options, function (res) {\n            var shouldPOSTData = res.headers[QuickPulseConfig.subscribed] === \"true\";\n            _this._consecutiveErrors = 0;\n            done(shouldPOSTData, res);\n        });\n        req.on(\"error\", function (error) {\n            // Unable to contact qps endpoint.\n            // Do nothing for now.\n            _this._consecutiveErrors++;\n            // LOG every error, but WARN instead when X number of consecutive errors occur\n            var notice = \"Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:\";\n            if (_this._consecutiveErrors % QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN === 0) {\n                notice = \"Live Metrics endpoint could not be reached \" + _this._consecutiveErrors + \" consecutive times. Most recent error:\";\n                Logging.warn(QuickPulseSender.TAG, notice, error);\n            }\n            else {\n                // Potentially transient error, do not change the ping/post state yet.\n                Logging.info(QuickPulseSender.TAG, notice, error);\n            }\n            done();\n        });\n        req.write(payload);\n        req.end();\n        var _a, _b;\n    };\n    QuickPulseSender.TAG = \"QuickPulseSender\";\n    QuickPulseSender.MAX_QPS_FAILURES_BEFORE_WARN = 25;\n    return QuickPulseSender;\n}());\nmodule.exports = QuickPulseSender;\n//# sourceMappingURL=QuickPulseSender.js.map","\"use strict\";\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Config = require(\"../Library/Config\");\nvar Context = require(\"../Library/Context\");\nvar Logging = require(\"../Library/Logging\");\nvar AutoCollectNativePerformance = (function () {\n    function AutoCollectNativePerformance(client) {\n        this._disabledMetrics = {};\n        // Note: Only 1 instance of this can exist. So when we reconstruct this object,\n        // just disable old native instance and reset JS member variables\n        if (AutoCollectNativePerformance.INSTANCE) {\n            AutoCollectNativePerformance.INSTANCE.dispose();\n        }\n        AutoCollectNativePerformance.INSTANCE = this;\n        this._client = client;\n    }\n    /**\n     *  Reports if NativePerformance is able to run in this environment\n     */\n    AutoCollectNativePerformance.isNodeVersionCompatible = function () {\n        var nodeVer = process.versions.node.split(\".\");\n        return parseInt(nodeVer[0]) >= 6;\n    };\n    /**\n     * Start instance of native metrics agent.\n     *\n     * @param {boolean} isEnabled\n     * @param {number} [collectionInterval=60000]\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.enable = function (isEnabled, disabledMetrics, collectionInterval) {\n        var _this = this;\n        if (disabledMetrics === void 0) { disabledMetrics = {}; }\n        if (collectionInterval === void 0) { collectionInterval = 60000; }\n        if (!AutoCollectNativePerformance.isNodeVersionCompatible()) {\n            return;\n        }\n        if (AutoCollectNativePerformance._metricsAvailable == undefined && isEnabled && !this._isInitialized) {\n            // Try to require in the native-metrics library. If it's found initialize it, else do nothing and never try again.\n            try {\n                var NativeMetricsEmitters = require(\"applicationinsights-native-metrics\");\n                AutoCollectNativePerformance._emitter = new NativeMetricsEmitters();\n                AutoCollectNativePerformance._metricsAvailable = true;\n                Logging.info(\"Native metrics module successfully loaded!\");\n            }\n            catch (err) {\n                // Package not available. Never try again\n                AutoCollectNativePerformance._metricsAvailable = false;\n                return;\n            }\n        }\n        this._isEnabled = isEnabled;\n        this._disabledMetrics = disabledMetrics;\n        if (this._isEnabled && !this._isInitialized) {\n            this._isInitialized = true;\n        }\n        // Enable the emitter if we were able to construct one\n        if (this._isEnabled && AutoCollectNativePerformance._emitter) {\n            // enable self\n            AutoCollectNativePerformance._emitter.enable(true, collectionInterval);\n            this._handle = setInterval(function () { return _this._trackNativeMetrics(); }, collectionInterval);\n            this._handle.unref();\n        }\n        else if (AutoCollectNativePerformance._emitter) {\n            // disable self\n            AutoCollectNativePerformance._emitter.enable(false);\n            if (this._handle) {\n                clearInterval(this._handle);\n                this._handle = undefined;\n            }\n        }\n    };\n    /**\n     * Cleanup this instance of AutoCollectNativePerformance\n     *\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype.dispose = function () {\n        this.enable(false);\n    };\n    /**\n     * Parse environment variable and overwrite isEnabled based on respective fields being set\n     *\n     * @private\n     * @static\n     * @param {(boolean | IDisabledExtendedMetrics)} collectExtendedMetrics\n     * @returns {(boolean | IDisabledExtendedMetrics)}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.parseEnabled = function (collectExtendedMetrics) {\n        var disableAll = process.env[Config.ENV_nativeMetricsDisableAll];\n        var individualOptOuts = process.env[Config.ENV_nativeMetricsDisablers];\n        // case 1: disable all env var set, RETURN with isEnabled=false\n        if (disableAll) {\n            return { isEnabled: false, disabledMetrics: {} };\n        }\n        // case 2: individual env vars set, RETURN with isEnabled=true, disabledMetrics={...}\n        if (individualOptOuts) {\n            var optOutsArr = individualOptOuts.split(\",\");\n            var disabledMetrics = {};\n            if (optOutsArr.length > 0) {\n                for (var _i = 0, optOutsArr_1 = optOutsArr; _i < optOutsArr_1.length; _i++) {\n                    var opt = optOutsArr_1[_i];\n                    disabledMetrics[opt] = true;\n                }\n            }\n            // case 2a: collectExtendedMetrics is an object, overwrite existing ones if they exist\n            if (typeof collectExtendedMetrics === \"object\") {\n                return { isEnabled: true, disabledMetrics: __assign({}, collectExtendedMetrics, disabledMetrics) };\n            }\n            // case 2b: collectExtendedMetrics is a boolean, set disabledMetrics as is\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: disabledMetrics };\n        }\n        // case 4: no env vars set, input arg is a boolean, RETURN with isEnabled=collectExtendedMetrics, disabledMetrics={}\n        if (typeof collectExtendedMetrics === \"boolean\") {\n            return { isEnabled: collectExtendedMetrics, disabledMetrics: {} };\n        }\n        else {\n            // case 5: no env vars set, input arg is object, RETURN with isEnabled=true, disabledMetrics=collectExtendedMetrics\n            return { isEnabled: true, disabledMetrics: collectExtendedMetrics };\n        }\n    };\n    /**\n     * Trigger an iteration of native metrics collection\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackNativeMetrics = function () {\n        var shouldSendAll = true;\n        if (typeof this._isEnabled !== \"object\") {\n            shouldSendAll = this._isEnabled;\n        }\n        if (shouldSendAll) {\n            this._trackGarbageCollection();\n            this._trackEventLoop();\n            this._trackHeapUsage();\n        }\n    };\n    /**\n     * Tracks garbage collection stats for this interval. One custom metric is sent per type of garbage\n     * collection that occurred during this collection interval.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackGarbageCollection = function () {\n        if (this._disabledMetrics.gc) {\n            return;\n        }\n        var gcData = AutoCollectNativePerformance._emitter.getGCData();\n        for (var gc in gcData) {\n            var metrics = gcData[gc].metrics;\n            var name_1 = gc + \" Garbage Collection Duration\";\n            var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n            this._client.trackMetric({\n                name: name_1,\n                value: metrics.total,\n                count: metrics.count,\n                max: metrics.max,\n                min: metrics.min,\n                stdDev: stdDev,\n                tagOverrides: (_a = {},\n                    _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                    _a)\n            });\n        }\n        var _a;\n    };\n    /**\n     * Tracks event loop ticks per interval as a custom metric. Also included in the metric is min/max/avg\n     * time spent in event loop for this interval.\n     *\n     * @private\n     * @returns {void}\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackEventLoop = function () {\n        if (this._disabledMetrics.loop) {\n            return;\n        }\n        var loopData = AutoCollectNativePerformance._emitter.getLoopData();\n        var metrics = loopData.loopUsage;\n        if (metrics.count == 0) {\n            return;\n        }\n        var name = \"Event Loop CPU Time\";\n        var stdDev = Math.sqrt(metrics.sumSquares / metrics.count - Math.pow(metrics.total / metrics.count, 2)) || 0;\n        this._client.trackMetric({\n            name: name,\n            value: metrics.total,\n            count: metrics.count,\n            min: metrics.min,\n            max: metrics.max,\n            stdDev: stdDev,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        var _a;\n    };\n    /**\n     * Track heap memory usage metrics as a custom metric.\n     *\n     * @private\n     * @memberof AutoCollectNativePerformance\n     */\n    AutoCollectNativePerformance.prototype._trackHeapUsage = function () {\n        if (this._disabledMetrics.heap) {\n            return;\n        }\n        var memoryUsage = process.memoryUsage();\n        var heapUsed = memoryUsage.heapUsed, heapTotal = memoryUsage.heapTotal, rss = memoryUsage.rss;\n        this._client.trackMetric({\n            name: \"Memory Usage (Heap)\",\n            value: heapUsed,\n            count: 1,\n            tagOverrides: (_a = {},\n                _a[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _a)\n        });\n        this._client.trackMetric({\n            name: \"Memory Total (Heap)\",\n            value: heapTotal,\n            count: 1,\n            tagOverrides: (_b = {},\n                _b[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _b)\n        });\n        this._client.trackMetric({\n            name: \"Memory Usage (Non-Heap)\",\n            value: rss - heapTotal,\n            count: 1,\n            tagOverrides: (_c = {},\n                _c[this._client.context.keys.internalSdkVersion] = \"node-nativeperf:\" + Context.sdkVersion,\n                _c)\n        });\n        var _a, _b, _c;\n    };\n    return AutoCollectNativePerformance;\n}());\nexports.AutoCollectNativePerformance = AutoCollectNativePerformance;\n//# sourceMappingURL=NativePerformance.js.map","module.exports = require(\"applicationinsights-native-metrics\");","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TelemetryClient = require(\"./TelemetryClient\");\nvar ServerRequestTracking = require(\"../AutoCollection/HttpRequests\");\nvar ClientRequestTracking = require(\"../AutoCollection/HttpDependencies\");\nvar Logging = require(\"./Logging\");\n/**\n * Application Insights Telemetry Client for Node.JS. Provides the Application Insights TelemetryClient API\n * in addition to Node-specific helper functions.\n * Construct a new TelemetryClient to have an instance with a different configuration than the default client.\n * In most cases, `appInsights.defaultClient` should be used instead.\n */\nvar NodeClient = (function (_super) {\n    __extends(NodeClient, _super);\n    function NodeClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will log immediately without waitng for request completion\n     * and it requires duration parameter to be specified on NodeHttpRequestTelemetry object.\n     * Use trackNodeHttpRequest function to log the telemetry after request completion\n     * @param telemetry Object encapsulating incoming request, response and duration information\n     */\n    NodeClient.prototype.trackNodeHttpRequestSync = function (telemetry) {\n        if (telemetry && telemetry.request && telemetry.response && telemetry.duration) {\n            ServerRequestTracking.trackRequestSync(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.\");\n        }\n    };\n    /**\n     * Log RequestTelemetry from HTTP request and response. This method will `follow` the request to completion.\n     * Use trackNodeHttpRequestSync function to log telemetry immediately without waiting for request completion\n     * @param telemetry Object encapsulating incoming request and response information\n     */\n    NodeClient.prototype.trackNodeHttpRequest = function (telemetry) {\n        if (telemetry.duration || telemetry.error) {\n            Logging.warn(\"trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects.\");\n        }\n        if (telemetry && telemetry.request && telemetry.response) {\n            ServerRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.\");\n        }\n    };\n    /**\n     * Log DependencyTelemetry from outgoing HTTP request. This method will instrument the outgoing request and append\n     * the specified headers and will log the telemetry when outgoing request is complete\n     * @param telemetry Object encapsulating outgoing request information\n     */\n    NodeClient.prototype.trackNodeHttpDependency = function (telemetry) {\n        if (telemetry && telemetry.request) {\n            ClientRequestTracking.trackRequest(this, telemetry);\n        }\n        else {\n            Logging.warn(\"trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.\");\n        }\n    };\n    return NodeClient;\n}(TelemetryClient));\nmodule.exports = NodeClient;\n//# sourceMappingURL=NodeClient.js.map","\"use strict\";\nvar url = require(\"url\");\nvar Config = require(\"./Config\");\nvar Context = require(\"./Context\");\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Channel = require(\"./Channel\");\nvar TelemetryProcessors = require(\"../TelemetryProcessors\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\nvar Sender = require(\"./Sender\");\nvar Util = require(\"./Util\");\nvar Logging = require(\"./Logging\");\nvar EnvelopeFactory = require(\"./EnvelopeFactory\");\n/**\n * Application Insights telemetry client provides interface to track telemetry items, register telemetry initializers and\n * and manually trigger immediate sending (flushing)\n */\nvar TelemetryClient = (function () {\n    /**\n     * Constructs a new client of the client\n     * @param setupString the Connection String or Instrumentation Key to use (read from environment variable if not specified)\n     */\n    function TelemetryClient(setupString) {\n        this._telemetryProcessors = [];\n        var config = new Config(setupString);\n        this.config = config;\n        this.context = new Context();\n        this.commonProperties = {};\n        var sender = new Sender(this.config);\n        this.channel = new Channel(function () { return config.disableAppInsights; }, function () { return config.maxBatchSize; }, function () { return config.maxBatchIntervalMs; }, sender);\n    }\n    /**\n     * Log information about availability of an application\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackAvailability = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Availability);\n    };\n    /**\n     * Log a trace message\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackTrace = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Trace);\n    };\n    /**\n     * Log a numeric value that is not associated with a specific event. Typically used to send regular reports of performance indicators.\n     * To send a single measurement, use just the first two parameters. If you take measurements very frequently, you can reduce the\n     * telemetry bandwidth by aggregating multiple measurements and sending the resulting average at intervals.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackMetric = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Metric);\n    };\n    /**\n     * Log an exception\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackException = function (telemetry) {\n        if (telemetry && telemetry.exception && !Util.isError(telemetry.exception)) {\n            telemetry.exception = new Error(telemetry.exception.toString());\n        }\n        this.track(telemetry, Contracts.TelemetryType.Exception);\n    };\n    /**\n     * Log a user action or other occurrence.\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackEvent = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Event);\n    };\n    /**\n     * Log a request. Note that the default client will attempt to collect HTTP requests automatically so only use this for requests\n     * that aren't automatically captured or if you've disabled automatic request collection.\n     *\n     * @param telemetry      Object encapsulating tracking options\n     */\n    TelemetryClient.prototype.trackRequest = function (telemetry) {\n        this.track(telemetry, Contracts.TelemetryType.Request);\n    };\n    /**\n     * Log a dependency. Note that the default client will attempt to collect dependencies automatically so only use this for dependencies\n     * that aren't automatically captured or if you've disabled automatic dependency collection.\n     *\n     * @param telemetry      Object encapsulating tracking option\n     * */\n    TelemetryClient.prototype.trackDependency = function (telemetry) {\n        if (telemetry && !telemetry.target && telemetry.data) {\n            // url.parse().host returns null for non-urls,\n            // making this essentially a no-op in those cases\n            // If this logic is moved, update jsdoc in DependencyTelemetry.target\n            telemetry.target = url.parse(telemetry.data).host;\n        }\n        this.track(telemetry, Contracts.TelemetryType.Dependency);\n    };\n    /**\n     * Immediately send all queued telemetry.\n     * @param options Flush options, including indicator whether app is crashing and callback\n     */\n    TelemetryClient.prototype.flush = function (options) {\n        this.channel.triggerSend(options ? !!options.isAppCrashing : false, options ? options.callback : undefined);\n    };\n    /**\n     * Generic track method for all telemetry types\n     * @param data the telemetry to send\n     * @param telemetryType specify the type of telemetry you are tracking from the list of Contracts.DataTypes\n     */\n    TelemetryClient.prototype.track = function (telemetry, telemetryType) {\n        if (telemetry && Contracts.telemetryTypeToBaseType(telemetryType)) {\n            var envelope = EnvelopeFactory.createEnvelope(telemetry, telemetryType, this.commonProperties, this.context, this.config);\n            // Set time on the envelope if it was set on the telemetry item\n            if (telemetry.time) {\n                envelope.time = telemetry.time.toISOString();\n            }\n            var accepted = this.runTelemetryProcessors(envelope, telemetry.contextObjects);\n            // Ideally we would have a central place for \"internal\" telemetry processors and users can configure which ones are in use.\n            // This will do for now. Otherwise clearTelemetryProcessors() would be problematic.\n            accepted = accepted && TelemetryProcessors.samplingTelemetryProcessor(envelope, { correlationContext: CorrelationContextManager_1.CorrelationContextManager.getCurrentContext() });\n            TelemetryProcessors.performanceMetricsTelemetryProcessor(envelope, this.quickPulseClient);\n            if (accepted) {\n                this.channel.send(envelope);\n            }\n        }\n        else {\n            Logging.warn(\"track() requires telemetry object and telemetryType to be specified.\");\n        }\n    };\n    /**\n     * Adds telemetry processor to the collection. Telemetry processors will be called one by one\n     * before telemetry item is pushed for sending and in the order they were added.\n     *\n     * @param telemetryProcessor function, takes Envelope, and optional context object and returns boolean\n     */\n    TelemetryClient.prototype.addTelemetryProcessor = function (telemetryProcessor) {\n        this._telemetryProcessors.push(telemetryProcessor);\n    };\n    /*\n     * Removes all telemetry processors\n     */\n    TelemetryClient.prototype.clearTelemetryProcessors = function () {\n        this._telemetryProcessors = [];\n    };\n    TelemetryClient.prototype.runTelemetryProcessors = function (envelope, contextObjects) {\n        var accepted = true;\n        var telemetryProcessorsCount = this._telemetryProcessors.length;\n        if (telemetryProcessorsCount === 0) {\n            return accepted;\n        }\n        contextObjects = contextObjects || {};\n        contextObjects['correlationContext'] = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        for (var i = 0; i < telemetryProcessorsCount; ++i) {\n            try {\n                var processor = this._telemetryProcessors[i];\n                if (processor) {\n                    if (processor.apply(null, [envelope, contextObjects]) === false) {\n                        accepted = false;\n                        break;\n                    }\n                }\n            }\n            catch (error) {\n                accepted = true;\n                Logging.warn(\"One of telemetry processors failed, telemetry item will be sent.\", error, envelope);\n            }\n        }\n        return accepted;\n    };\n    return TelemetryClient;\n}());\nmodule.exports = TelemetryClient;\n//# sourceMappingURL=TelemetryClient.js.map","\"use strict\";\nvar Logging = require(\"./Logging\");\nvar Channel = (function () {\n    function Channel(isDisabled, getBatchSize, getBatchIntervalMs, sender) {\n        this._buffer = [];\n        this._lastSend = 0;\n        this._isDisabled = isDisabled;\n        this._getBatchSize = getBatchSize;\n        this._getBatchIntervalMs = getBatchIntervalMs;\n        this._sender = sender;\n    }\n    /**\n     * Enable or disable disk-backed retry caching to cache events when client is offline (enabled by default)\n     * These cached events are stored in your system or user's temporary directory and access restricted to your user when possible.\n     * @param value if true events that occured while client is offline will be cached on disk\n     * @param resendInterval The wait interval for resending cached events.\n     * @param maxBytesOnDisk The maximum size (in bytes) that the created temporary directory for cache events can grow to, before caching is disabled.\n     * @returns {Configuration} this class\n     */\n    Channel.prototype.setUseDiskRetryCaching = function (value, resendInterval, maxBytesOnDisk) {\n        this._sender.setDiskRetryMode(value, resendInterval, maxBytesOnDisk);\n    };\n    /**\n     * Add a telemetry item to the send buffer\n     */\n    Channel.prototype.send = function (envelope) {\n        var _this = this;\n        // if master off switch is set, don't send any data\n        if (this._isDisabled()) {\n            // Do not send/save data\n            return;\n        }\n        // validate input\n        if (!envelope) {\n            Logging.warn(\"Cannot send null/undefined telemetry\");\n            return;\n        }\n        // check if the incoming payload is too large, truncate if necessary\n        var payload = this._stringify(envelope);\n        if (typeof payload !== \"string\") {\n            return;\n        }\n        // enqueue the payload\n        this._buffer.push(payload);\n        // flush if we would exceed the max-size limit by adding this item\n        if (this._buffer.length >= this._getBatchSize()) {\n            this.triggerSend(false);\n            return;\n        }\n        // ensure an invocation timeout is set if anything is in the buffer\n        if (!this._timeoutHandle && this._buffer.length > 0) {\n            this._timeoutHandle = setTimeout(function () {\n                _this._timeoutHandle = null;\n                _this.triggerSend(false);\n            }, this._getBatchIntervalMs());\n        }\n    };\n    /**\n     * Immediately send buffered data\n     */\n    Channel.prototype.triggerSend = function (isNodeCrashing, callback) {\n        var bufferIsEmpty = this._buffer.length < 1;\n        if (!bufferIsEmpty) {\n            // compose an array of payloads\n            var batch = this._buffer.join(\"\\n\");\n            // invoke send\n            if (isNodeCrashing) {\n                this._sender.saveOnCrash(batch);\n                if (typeof callback === \"function\") {\n                    callback(\"data saved on crash\");\n                }\n            }\n            else {\n                this._sender.send(Buffer.from ? Buffer.from(batch) : new Buffer(batch), callback);\n            }\n        }\n        // update lastSend time to enable throttling\n        this._lastSend = +new Date;\n        // clear buffer\n        this._buffer.length = 0;\n        clearTimeout(this._timeoutHandle);\n        this._timeoutHandle = null;\n        if (bufferIsEmpty && typeof callback === \"function\") {\n            callback(\"no data to send\");\n        }\n    };\n    Channel.prototype._stringify = function (envelope) {\n        try {\n            return JSON.stringify(envelope);\n        }\n        catch (error) {\n            Logging.warn(\"Failed to serialize payload\", error, envelope);\n        }\n    };\n    return Channel;\n}());\nmodule.exports = Channel;\n//# sourceMappingURL=Channel.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./SamplingTelemetryProcessor\"));\n__export(require(\"./PerformanceMetricsTelemetryProcessor\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Contracts = require(\"../Declarations/Contracts\");\n/**\n *  A telemetry processor that handles sampling.\n */\nfunction samplingTelemetryProcessor(envelope, contextObjects) {\n    var samplingPercentage = envelope.sampleRate; // Set for us in Client.getEnvelope\n    var isSampledIn = false;\n    if (samplingPercentage === null || samplingPercentage === undefined || samplingPercentage >= 100) {\n        return true;\n    }\n    else if (envelope.data && Contracts.TelemetryType.Metric === Contracts.baseTypeToTelemetryType(envelope.data.baseType)) {\n        // Exclude MetricData telemetry from sampling\n        return true;\n    }\n    else if (contextObjects.correlationContext && contextObjects.correlationContext.operation) {\n        // If we're using dependency correlation, sampling should retain all telemetry from a given request\n        isSampledIn = getSamplingHashCode(contextObjects.correlationContext.operation.id) < samplingPercentage;\n    }\n    else {\n        // If we're not using dependency correlation, sampling should use a random distribution on each item\n        isSampledIn = (Math.random() * 100) < samplingPercentage;\n    }\n    return isSampledIn;\n}\nexports.samplingTelemetryProcessor = samplingTelemetryProcessor;\n/** Ported from AI .NET SDK */\nfunction getSamplingHashCode(input) {\n    var csharpMin = -2147483648;\n    var csharpMax = 2147483647;\n    var hash = 5381;\n    if (!input) {\n        return 0;\n    }\n    while (input.length < 8) {\n        input = input + input;\n    }\n    for (var i = 0; i < input.length; i++) {\n        // JS doesn't respond to integer overflow by wrapping around. Simulate it with bitwise operators ( | 0)\n        hash = ((((hash << 5) + hash) | 0) + input.charCodeAt(i) | 0);\n    }\n    hash = hash <= csharpMin ? csharpMax : Math.abs(hash);\n    return (hash / csharpMax) * 100;\n}\nexports.getSamplingHashCode = getSamplingHashCode;\n//# sourceMappingURL=SamplingTelemetryProcessor.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar AutoCollectPerformance = require(\"../AutoCollection/Performance\");\nvar TelemetryType = require(\"../Declarations/Contracts\");\nfunction performanceMetricsTelemetryProcessor(envelope, client) {\n    // If live metrics is enabled, forward all telemetry there\n    if (client) {\n        client.addDocument(envelope);\n    }\n    // Increment rate counters (for standard metrics and live metrics)\n    switch (envelope.data.baseType) {\n        case TelemetryType.TelemetryTypeString.Exception:\n            AutoCollectPerformance.countException();\n            break;\n        case TelemetryType.TelemetryTypeString.Request:\n            var requestData = envelope.data.baseData;\n            AutoCollectPerformance.countRequest(requestData.duration, requestData.success);\n            break;\n        case TelemetryType.TelemetryTypeString.Dependency:\n            var remoteDependencyData = envelope.data.baseData;\n            AutoCollectPerformance.countDependency(remoteDependencyData.duration, remoteDependencyData.success);\n            break;\n    }\n    return true;\n}\nexports.performanceMetricsTelemetryProcessor = performanceMetricsTelemetryProcessor;\n//# sourceMappingURL=PerformanceMetricsTelemetryProcessor.js.map","\"use strict\";\nvar fs = require(\"fs\");\nvar os = require(\"os\");\nvar path = require(\"path\");\nvar zlib = require(\"zlib\");\nvar child_process = require(\"child_process\");\nvar Logging = require(\"./Logging\");\nvar AutoCollectHttpDependencies = require(\"../AutoCollection/HttpDependencies\");\nvar Util = require(\"./Util\");\nvar Sender = (function () {\n    function Sender(config, onSuccess, onError) {\n        this._config = config;\n        this._onSuccess = onSuccess;\n        this._onError = onError;\n        this._enableDiskRetryMode = false;\n        this._resendInterval = Sender.WAIT_BETWEEN_RESEND;\n        this._maxBytesOnDisk = Sender.MAX_BYTES_ON_DISK;\n        this._numConsecutiveFailures = 0;\n        if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n            // Node's chmod levels do not appropriately restrict file access on Windows\n            // Use the built-in command line tool ICACLS on Windows to properly restrict\n            // access to the temporary directory used for disk retry mode.\n            if (Sender.USE_ICACLS) {\n                // This should be async - but it's currently safer to have this synchronous\n                // This guarantees we can immediately fail setDiskRetryMode if we need to\n                try {\n                    Sender.OS_PROVIDES_FILE_PROTECTION = fs.existsSync(Sender.ICACLS_PATH);\n                }\n                catch (e) { }\n                if (!Sender.OS_PROVIDES_FILE_PROTECTION) {\n                    Logging.warn(Sender.TAG, \"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.\");\n                }\n            }\n            else {\n                // chmod works everywhere else\n                Sender.OS_PROVIDES_FILE_PROTECTION = true;\n            }\n        }\n    }\n    /**\n    * Enable or disable offline mode\n    */\n    Sender.prototype.setDiskRetryMode = function (value, resendInterval, maxBytesOnDisk) {\n        this._enableDiskRetryMode = Sender.OS_PROVIDES_FILE_PROTECTION && value;\n        if (typeof resendInterval === 'number' && resendInterval >= 0) {\n            this._resendInterval = Math.floor(resendInterval);\n        }\n        if (typeof maxBytesOnDisk === 'number' && maxBytesOnDisk >= 0) {\n            this._maxBytesOnDisk = Math.floor(maxBytesOnDisk);\n        }\n        if (value && !Sender.OS_PROVIDES_FILE_PROTECTION) {\n            this._enableDiskRetryMode = false;\n            Logging.warn(Sender.TAG, \"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.\");\n        }\n    };\n    Sender.prototype.send = function (payload, callback) {\n        var _this = this;\n        var endpointUrl = this._config.endpointUrl;\n        // todo: investigate specifying an agent here: https://nodejs.org/api/http.html#http_class_http_agent\n        var options = {\n            method: \"POST\",\n            withCredentials: false,\n            headers: {\n                \"Content-Type\": \"application/x-json-stream\"\n            }\n        };\n        zlib.gzip(payload, function (err, buffer) {\n            var dataToSend = buffer;\n            if (err) {\n                Logging.warn(err);\n                dataToSend = payload; // something went wrong so send without gzip\n                options.headers[\"Content-Length\"] = payload.length.toString();\n            }\n            else {\n                options.headers[\"Content-Encoding\"] = \"gzip\";\n                options.headers[\"Content-Length\"] = buffer.length;\n            }\n            Logging.info(Sender.TAG, options);\n            // Ensure this request is not captured by auto-collection.\n            options[AutoCollectHttpDependencies.disableCollectionRequestOption] = true;\n            var requestCallback = function (res) {\n                res.setEncoding(\"utf-8\");\n                //returns empty if the data is accepted\n                var responseString = \"\";\n                res.on(\"data\", function (data) {\n                    responseString += data;\n                });\n                res.on(\"end\", function () {\n                    _this._numConsecutiveFailures = 0;\n                    Logging.info(Sender.TAG, responseString);\n                    if (typeof _this._onSuccess === \"function\") {\n                        _this._onSuccess(responseString);\n                    }\n                    if (typeof callback === \"function\") {\n                        callback(responseString);\n                    }\n                    if (_this._enableDiskRetryMode) {\n                        // try to send any cached events if the user is back online\n                        if (res.statusCode === 200) {\n                            setTimeout(function () { return _this._sendFirstFileOnDisk(); }, _this._resendInterval).unref();\n                            // store to disk in case of burst throttling\n                        }\n                        else if (res.statusCode === 408 ||\n                            res.statusCode === 429 ||\n                            res.statusCode === 439 ||\n                            res.statusCode === 500 ||\n                            res.statusCode === 503) {\n                            // TODO: Do not support partial success (206) until _sendFirstFileOnDisk checks payload age\n                            _this._storeToDisk(payload);\n                        }\n                    }\n                });\n            };\n            var req = Util.makeRequest(_this._config, endpointUrl, options, requestCallback);\n            req.on(\"error\", function (error) {\n                // todo: handle error codes better (group to recoverable/non-recoverable and persist)\n                _this._numConsecutiveFailures++;\n                // Only use warn level if retries are disabled or we've had some number of consecutive failures sending data\n                // This is because warn level is printed in the console by default, and we don't want to be noisy for transient and self-recovering errors\n                // Continue informing on each failure if verbose logging is being used\n                if (!_this._enableDiskRetryMode || _this._numConsecutiveFailures > 0 && _this._numConsecutiveFailures % Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN === 0) {\n                    var notice = \"Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:\";\n                    if (_this._enableDiskRetryMode) {\n                        notice = \"Ingestion endpoint could not be reached \" + _this._numConsecutiveFailures + \" consecutive times. There may be resulting telemetry loss. Most recent error:\";\n                    }\n                    Logging.warn(Sender.TAG, notice, error);\n                }\n                else {\n                    var notice = \"Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:\";\n                    Logging.info(Sender.TAG, notice, error);\n                }\n                _this._onErrorHelper(error);\n                if (typeof callback === \"function\") {\n                    var errorMessage = \"error sending telemetry\";\n                    if (error && (typeof error.toString === \"function\")) {\n                        errorMessage = error.toString();\n                    }\n                    callback(errorMessage);\n                }\n                if (_this._enableDiskRetryMode) {\n                    _this._storeToDisk(payload);\n                }\n            });\n            req.write(dataToSend);\n            req.end();\n        });\n    };\n    Sender.prototype.saveOnCrash = function (payload) {\n        if (this._enableDiskRetryMode) {\n            this._storeToDiskSync(payload);\n        }\n    };\n    Sender.prototype._runICACLS = function (args, callback) {\n        var aclProc = child_process.spawn(Sender.ICACLS_PATH, args, { windowsHide: true });\n        aclProc.on(\"error\", function (e) { return callback(e); });\n        aclProc.on(\"close\", function (code, signal) {\n            return callback(code === 0 ? null : new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + code + \")\"));\n        });\n    };\n    Sender.prototype._runICACLSSync = function (args) {\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var aclProc = child_process.spawnSync(Sender.ICACLS_PATH, args, { windowsHide: true });\n            if (aclProc.error) {\n                throw aclProc.error;\n            }\n            else if (aclProc.status !== 0) {\n                throw new Error(\"Setting ACL restrictions did not succeed (ICACLS returned code \" + aclProc.status + \")\");\n            }\n        }\n        else {\n            throw new Error(\"Could not synchronously call ICACLS under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLIdentity = function (callback) {\n        if (Sender.ACL_IDENTITY) {\n            return callback(null, Sender.ACL_IDENTITY);\n        }\n        var psProc = child_process.spawn(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n            windowsHide: true,\n            stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n        });\n        var data = \"\";\n        psProc.stdout.on(\"data\", function (d) { return data += d; });\n        psProc.on(\"error\", function (e) { return callback(e, null); });\n        psProc.on(\"close\", function (code, signal) {\n            Sender.ACL_IDENTITY = data && data.trim();\n            return callback(code === 0 ? null : new Error(\"Getting ACL identity did not succeed (PS returned code \" + code + \")\"), Sender.ACL_IDENTITY);\n        });\n    };\n    Sender.prototype._getACLIdentitySync = function () {\n        if (Sender.ACL_IDENTITY) {\n            return Sender.ACL_IDENTITY;\n        }\n        // Some very old versions of Node (< 0.11) don't have this\n        if (child_process.spawnSync) {\n            var psProc = child_process.spawnSync(Sender.POWERSHELL_PATH, [\"-Command\", \"[System.Security.Principal.WindowsIdentity]::GetCurrent().Name\"], {\n                windowsHide: true,\n                stdio: ['ignore', 'pipe', 'pipe'] // Needed to prevent hanging on Win 7\n            });\n            if (psProc.error) {\n                throw psProc.error;\n            }\n            else if (psProc.status !== 0) {\n                throw new Error(\"Getting ACL identity did not succeed (PS returned code \" + psProc.status + \")\");\n            }\n            Sender.ACL_IDENTITY = psProc.stdout && psProc.stdout.toString().trim();\n            return Sender.ACL_IDENTITY;\n        }\n        else {\n            throw new Error(\"Could not synchronously get ACL identity under current version of Node.js\");\n        }\n    };\n    Sender.prototype._getACLArguments = function (directory, identity) {\n        return [directory,\n            \"/grant\", \"*S-1-5-32-544:(OI)(CI)F\",\n            \"/grant\", identity + \":(OI)(CI)F\",\n            \"/inheritance:r\"]; // Remove all inherited permissions\n    };\n    Sender.prototype._applyACLRules = function (directory, callback) {\n        var _this = this;\n        if (!Sender.USE_ICACLS) {\n            return callback(null);\n        }\n        // For performance, only run ACL rules if we haven't already during this session\n        if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n            // Avoid multiple calls race condition by setting ACLED_DIRECTORIES to false for this directory immediately\n            // If batches are being failed faster than the processes spawned below return, some data won't be stored to disk\n            // This is better than the alternative of potentially infinitely spawned processes\n            Sender.ACLED_DIRECTORIES[directory] = false;\n            // Restrict this directory to only current user and administrator access\n            this._getACLIdentity(function (err, identity) {\n                if (err) {\n                    Sender.ACLED_DIRECTORIES[directory] = false; // false is used to cache failed (vs undefined which is \"not yet tried\")\n                    return callback(err);\n                }\n                else {\n                    _this._runICACLS(_this._getACLArguments(directory, identity), function (err) {\n                        Sender.ACLED_DIRECTORIES[directory] = !err;\n                        return callback(err);\n                    });\n                }\n            });\n        }\n        else {\n            return callback(Sender.ACLED_DIRECTORIES[directory] ? null :\n                new Error(\"Setting ACL restrictions did not succeed (cached result)\"));\n        }\n    };\n    Sender.prototype._applyACLRulesSync = function (directory) {\n        if (Sender.USE_ICACLS) {\n            // For performance, only run ACL rules if we haven't already during this session\n            if (Sender.ACLED_DIRECTORIES[directory] === undefined) {\n                this._runICACLSSync(this._getACLArguments(directory, this._getACLIdentitySync()));\n                Sender.ACLED_DIRECTORIES[directory] = true; // If we get here, it succeeded. _runIACLSSync will throw on failures\n                return;\n            }\n            else if (!Sender.ACLED_DIRECTORIES[directory]) {\n                throw new Error(\"Setting ACL restrictions did not succeed (cached result)\");\n            }\n        }\n    };\n    Sender.prototype._confirmDirExists = function (directory, callback) {\n        var _this = this;\n        fs.lstat(directory, function (err, stats) {\n            if (err && err.code === 'ENOENT') {\n                fs.mkdir(directory, function (err) {\n                    if (err && err.code !== 'EEXIST') {\n                        callback(err);\n                    }\n                    else {\n                        _this._applyACLRules(directory, callback);\n                    }\n                });\n            }\n            else if (!err && stats.isDirectory()) {\n                _this._applyACLRules(directory, callback);\n            }\n            else {\n                callback(err || new Error(\"Path existed but was not a directory\"));\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Asynchronously.\n     */\n    Sender.prototype._getShallowDirectorySize = function (directory, callback) {\n        // Get the directory listing\n        fs.readdir(directory, function (err, files) {\n            if (err) {\n                return callback(err, -1);\n            }\n            var error = null;\n            var totalSize = 0;\n            var count = 0;\n            if (files.length === 0) {\n                callback(null, 0);\n                return;\n            }\n            // Query all file sizes\n            for (var i = 0; i < files.length; i++) {\n                fs.stat(path.join(directory, files[i]), function (err, fileStats) {\n                    count++;\n                    if (err) {\n                        error = err;\n                    }\n                    else {\n                        if (fileStats.isFile()) {\n                            totalSize += fileStats.size;\n                        }\n                    }\n                    if (count === files.length) {\n                        // Did we get an error?\n                        if (error) {\n                            callback(error, -1);\n                        }\n                        else {\n                            callback(error, totalSize);\n                        }\n                    }\n                });\n            }\n        });\n    };\n    /**\n     * Computes the size (in bytes) of all files in a directory at the root level. Synchronously.\n     */\n    Sender.prototype._getShallowDirectorySizeSync = function (directory) {\n        var files = fs.readdirSync(directory);\n        var totalSize = 0;\n        for (var i = 0; i < files.length; i++) {\n            totalSize += fs.statSync(path.join(directory, files[i])).size;\n        }\n        return totalSize;\n    };\n    /**\n     * Stores the payload as a json file on disk in the temp directory\n     */\n    Sender.prototype._storeToDisk = function (payload) {\n        var _this = this;\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        // This will create the dir if it does not exist\n        // Default permissions on *nix are directory listing from other users but no file creations\n        Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n        this._confirmDirExists(directory, function (error) {\n            if (error) {\n                Logging.warn(Sender.TAG, \"Error while checking/creating directory: \" + (error && error.message));\n                _this._onErrorHelper(error);\n                return;\n            }\n            _this._getShallowDirectorySize(directory, function (err, size) {\n                if (err || size < 0) {\n                    Logging.warn(Sender.TAG, \"Error while checking directory size: \" + (err && err.message));\n                    _this._onErrorHelper(err);\n                    return;\n                }\n                else if (size > _this._maxBytesOnDisk) {\n                    Logging.warn(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + size);\n                    return;\n                }\n                //create file - file name for now is the timestamp, a better approach would be a UUID but that\n                //would require an external dependency\n                var fileName = new Date().getTime() + \".ai.json\";\n                var fileFullPath = path.join(directory, fileName);\n                // Mode 600 is w/r for creator and no read access for others (only applies on *nix)\n                // For Windows, ACL rules are applied to the entire directory (see logic in _confirmDirExists and _applyACLRules)\n                Logging.info(Sender.TAG, \"saving data to disk at: \" + fileFullPath);\n                fs.writeFile(fileFullPath, payload, { mode: 384 }, function (error) { return _this._onErrorHelper(error); });\n            });\n        });\n    };\n    /**\n     * Stores the payload as a json file on disk using sync file operations\n     * this is used when storing data before crashes\n     */\n    Sender.prototype._storeToDiskSync = function (payload) {\n        // tmpdir is /tmp for *nix and USERDIR/AppData/Local/Temp for Windows\n        var directory = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        try {\n            Logging.info(Sender.TAG, \"Checking existance of data storage directory: \" + directory);\n            if (!fs.existsSync(directory)) {\n                fs.mkdirSync(directory);\n            }\n            // Make sure permissions are valid\n            this._applyACLRulesSync(directory);\n            var dirSize = this._getShallowDirectorySizeSync(directory);\n            if (dirSize > this._maxBytesOnDisk) {\n                Logging.info(Sender.TAG, \"Not saving data due to max size limit being met. Directory size in bytes is: \" + dirSize);\n                return;\n            }\n            //create file - file name for now is the timestamp, a better approach would be a UUID but that\n            //would require an external dependency\n            var fileName = new Date().getTime() + \".ai.json\";\n            var fileFullPath = path.join(directory, fileName);\n            // Mode 600 is w/r for creator and no access for anyone else (only applies on *nix)\n            Logging.info(Sender.TAG, \"saving data before crash to disk at: \" + fileFullPath);\n            fs.writeFileSync(fileFullPath, payload, { mode: 384 });\n        }\n        catch (error) {\n            Logging.warn(Sender.TAG, \"Error while saving data to disk: \" + (error && error.message));\n            this._onErrorHelper(error);\n        }\n    };\n    /**\n     * Check for temp telemetry files\n     * reads the first file if exist, deletes it and tries to send its load\n     */\n    Sender.prototype._sendFirstFileOnDisk = function () {\n        var _this = this;\n        var tempDir = path.join(os.tmpdir(), Sender.TEMPDIR_PREFIX + this._config.instrumentationKey);\n        fs.exists(tempDir, function (exists) {\n            if (exists) {\n                fs.readdir(tempDir, function (error, files) {\n                    if (!error) {\n                        files = files.filter(function (f) { return path.basename(f).indexOf(\".ai.json\") > -1; });\n                        if (files.length > 0) {\n                            var firstFile = files[0];\n                            var filePath = path.join(tempDir, firstFile);\n                            fs.readFile(filePath, function (error, payload) {\n                                if (!error) {\n                                    // delete the file first to prevent double sending\n                                    fs.unlink(filePath, function (error) {\n                                        if (!error) {\n                                            _this.send(payload);\n                                        }\n                                        else {\n                                            _this._onErrorHelper(error);\n                                        }\n                                    });\n                                }\n                                else {\n                                    _this._onErrorHelper(error);\n                                }\n                            });\n                        }\n                    }\n                    else {\n                        _this._onErrorHelper(error);\n                    }\n                });\n            }\n        });\n    };\n    Sender.prototype._onErrorHelper = function (error) {\n        if (typeof this._onError === \"function\") {\n            this._onError(error);\n        }\n    };\n    Sender.TAG = \"Sender\";\n    Sender.ICACLS_PATH = process.env.systemdrive + \"/windows/system32/icacls.exe\";\n    Sender.POWERSHELL_PATH = process.env.systemdrive + \"/windows/system32/windowspowershell/v1.0/powershell.exe\";\n    Sender.ACLED_DIRECTORIES = {};\n    Sender.ACL_IDENTITY = null;\n    // the amount of time the SDK will wait between resending cached data, this buffer is to avoid any throtelling from the service side\n    Sender.WAIT_BETWEEN_RESEND = 60 * 1000;\n    Sender.MAX_BYTES_ON_DISK = 50 * 1000 * 1000;\n    Sender.MAX_CONNECTION_FAILURES_BEFORE_WARN = 5;\n    Sender.TEMPDIR_PREFIX = \"appInsights-node\";\n    Sender.OS_PROVIDES_FILE_PROTECTION = false;\n    Sender.USE_ICACLS = os.type() === \"Windows_NT\";\n    return Sender;\n}());\nmodule.exports = Sender;\n//# sourceMappingURL=Sender.js.map","\"use strict\";\nvar Contracts = require(\"../Declarations/Contracts\");\nvar Util = require(\"./Util\");\nvar CorrelationContextManager_1 = require(\"../AutoCollection/CorrelationContextManager\");\n/**\n * Manages the logic of creating envelopes from Telemetry objects\n */\nvar EnvelopeFactory = (function () {\n    function EnvelopeFactory() {\n    }\n    /**\n     * Creates envelope ready to be sent by Channel\n     * @param telemetry Telemetry data\n     * @param telemetryType Type of telemetry\n     * @param commonProperties Bag of custom common properties to be added to the envelope\n     * @param context Client context\n     * @param config Client configuration\n     */\n    EnvelopeFactory.createEnvelope = function (telemetry, telemetryType, commonProperties, context, config) {\n        var data = null;\n        switch (telemetryType) {\n            case Contracts.TelemetryType.Trace:\n                data = EnvelopeFactory.createTraceData(telemetry);\n                break;\n            case Contracts.TelemetryType.Dependency:\n                data = EnvelopeFactory.createDependencyData(telemetry);\n                break;\n            case Contracts.TelemetryType.Event:\n                data = EnvelopeFactory.createEventData(telemetry);\n                break;\n            case Contracts.TelemetryType.Exception:\n                data = EnvelopeFactory.createExceptionData(telemetry);\n                break;\n            case Contracts.TelemetryType.Request:\n                data = EnvelopeFactory.createRequestData(telemetry);\n                break;\n            case Contracts.TelemetryType.Metric:\n                data = EnvelopeFactory.createMetricData(telemetry);\n                break;\n            case Contracts.TelemetryType.Availability:\n                data = EnvelopeFactory.createAvailabilityData(telemetry);\n                break;\n        }\n        if (commonProperties && Contracts.domainSupportsProperties(data.baseData)) {\n            if (data && data.baseData) {\n                // if no properties are specified just add the common ones\n                if (!data.baseData.properties) {\n                    data.baseData.properties = commonProperties;\n                }\n                else {\n                    // otherwise, check each of the common ones\n                    for (var name in commonProperties) {\n                        // only override if the property `name` has not been set on this item\n                        if (!data.baseData.properties[name]) {\n                            data.baseData.properties[name] = commonProperties[name];\n                        }\n                    }\n                }\n            }\n            // sanitize properties\n            data.baseData.properties = Util.validateStringMap(data.baseData.properties);\n        }\n        var iKey = config ? config.instrumentationKey || \"\" : \"\";\n        var envelope = new Contracts.Envelope();\n        envelope.data = data;\n        envelope.iKey = iKey;\n        // this is kind of a hack, but the envelope name is always the same as the data name sans the chars \"data\"\n        envelope.name =\n            \"Microsoft.ApplicationInsights.\" +\n                iKey.replace(/-/g, \"\") +\n                \".\" +\n                data.baseType.substr(0, data.baseType.length - 4);\n        envelope.tags = this.getTags(context, telemetry.tagOverrides);\n        envelope.time = (new Date()).toISOString();\n        envelope.ver = 1;\n        envelope.sampleRate = config ? config.samplingPercentage : 100;\n        // Exclude metrics from sampling by default\n        if (telemetryType === Contracts.TelemetryType.Metric) {\n            envelope.sampleRate = 100;\n        }\n        return envelope;\n    };\n    EnvelopeFactory.createTraceData = function (telemetry) {\n        var trace = new Contracts.MessageData();\n        trace.message = telemetry.message;\n        trace.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            trace.severityLevel = telemetry.severity;\n        }\n        else {\n            trace.severityLevel = Contracts.SeverityLevel.Information;\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Trace);\n        data.baseData = trace;\n        return data;\n    };\n    EnvelopeFactory.createDependencyData = function (telemetry) {\n        var remoteDependency = new Contracts.RemoteDependencyData();\n        if (typeof telemetry.name === \"string\") {\n            remoteDependency.name = telemetry.name.length > 1024 ? telemetry.name.slice(0, 1021) + '...' : telemetry.name;\n        }\n        remoteDependency.data = telemetry.data;\n        remoteDependency.target = telemetry.target;\n        remoteDependency.duration = Util.msToTimeSpan(telemetry.duration);\n        remoteDependency.success = telemetry.success;\n        remoteDependency.type = telemetry.dependencyTypeName;\n        remoteDependency.properties = telemetry.properties;\n        remoteDependency.resultCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        if (telemetry.id) {\n            remoteDependency.id = telemetry.id;\n        }\n        else {\n            remoteDependency.id = Util.w3cTraceId();\n        }\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Dependency);\n        data.baseData = remoteDependency;\n        return data;\n    };\n    EnvelopeFactory.createEventData = function (telemetry) {\n        var event = new Contracts.EventData();\n        event.name = telemetry.name;\n        event.properties = telemetry.properties;\n        event.measurements = telemetry.measurements;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Event);\n        data.baseData = event;\n        return data;\n    };\n    EnvelopeFactory.createExceptionData = function (telemetry) {\n        var exception = new Contracts.ExceptionData();\n        exception.properties = telemetry.properties;\n        if (!isNaN(telemetry.severity)) {\n            exception.severityLevel = telemetry.severity;\n        }\n        else {\n            exception.severityLevel = Contracts.SeverityLevel.Error;\n        }\n        exception.measurements = telemetry.measurements;\n        exception.exceptions = [];\n        var stack = telemetry.exception[\"stack\"];\n        var exceptionDetails = new Contracts.ExceptionDetails();\n        exceptionDetails.message = telemetry.exception.message;\n        exceptionDetails.typeName = telemetry.exception.name;\n        exceptionDetails.parsedStack = this.parseStack(stack);\n        exceptionDetails.hasFullStack = Util.isArray(exceptionDetails.parsedStack) && exceptionDetails.parsedStack.length > 0;\n        exception.exceptions.push(exceptionDetails);\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Exception);\n        data.baseData = exception;\n        return data;\n    };\n    EnvelopeFactory.createRequestData = function (telemetry) {\n        var requestData = new Contracts.RequestData();\n        if (telemetry.id) {\n            requestData.id = telemetry.id;\n        }\n        else {\n            requestData.id = Util.w3cTraceId();\n        }\n        requestData.name = telemetry.name;\n        requestData.url = telemetry.url;\n        requestData.source = telemetry.source;\n        requestData.duration = Util.msToTimeSpan(telemetry.duration);\n        requestData.responseCode = (telemetry.resultCode ? telemetry.resultCode + '' : '');\n        requestData.success = telemetry.success;\n        requestData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Request);\n        data.baseData = requestData;\n        return data;\n    };\n    EnvelopeFactory.createMetricData = function (telemetry) {\n        var metrics = new Contracts.MetricData(); // todo: enable client-batching of these\n        metrics.metrics = [];\n        var metric = new Contracts.DataPoint();\n        metric.count = !isNaN(telemetry.count) ? telemetry.count : 1;\n        metric.kind = Contracts.DataPointType.Aggregation;\n        metric.max = !isNaN(telemetry.max) ? telemetry.max : telemetry.value;\n        metric.min = !isNaN(telemetry.min) ? telemetry.min : telemetry.value;\n        metric.name = telemetry.name;\n        metric.stdDev = !isNaN(telemetry.stdDev) ? telemetry.stdDev : 0;\n        metric.value = telemetry.value;\n        metrics.metrics.push(metric);\n        metrics.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Metric);\n        data.baseData = metrics;\n        return data;\n    };\n    EnvelopeFactory.createAvailabilityData = function (telemetry) {\n        var availabilityData = new Contracts.AvailabilityData();\n        if (telemetry.id) {\n            availabilityData.id = telemetry.id;\n        }\n        else {\n            availabilityData.id = Util.w3cTraceId();\n        }\n        availabilityData.name = telemetry.name;\n        availabilityData.duration = Util.msToTimeSpan(telemetry.duration);\n        availabilityData.success = telemetry.success;\n        availabilityData.runLocation = telemetry.runLocation;\n        availabilityData.message = telemetry.message;\n        availabilityData.measurements = telemetry.measurements;\n        availabilityData.properties = telemetry.properties;\n        var data = new Contracts.Data();\n        data.baseType = Contracts.telemetryTypeToBaseType(Contracts.TelemetryType.Availability);\n        data.baseData = availabilityData;\n        return data;\n    };\n    EnvelopeFactory.getTags = function (context, tagOverrides) {\n        var correlationContext = CorrelationContextManager_1.CorrelationContextManager.getCurrentContext();\n        // Make a copy of context tags so we don't alter the actual object\n        // Also perform tag overriding\n        var newTags = {};\n        if (context && context.tags) {\n            for (var key in context.tags) {\n                newTags[key] = context.tags[key];\n            }\n        }\n        if (tagOverrides) {\n            for (var key in tagOverrides) {\n                newTags[key] = tagOverrides[key];\n            }\n        }\n        // Fill in internally-populated values if not already set\n        if (correlationContext) {\n            newTags[context.keys.operationId] = newTags[context.keys.operationId] || correlationContext.operation.id;\n            newTags[context.keys.operationName] = newTags[context.keys.operationName] || correlationContext.operation.name;\n            newTags[context.keys.operationParentId] = newTags[context.keys.operationParentId] || correlationContext.operation.parentId;\n        }\n        return newTags;\n    };\n    EnvelopeFactory.parseStack = function (stack) {\n        var parsedStack = undefined;\n        if (typeof stack === \"string\") {\n            var frames = stack.split(\"\\n\");\n            parsedStack = [];\n            var level = 0;\n            var totalSizeInBytes = 0;\n            for (var i = 0; i <= frames.length; i++) {\n                var frame = frames[i];\n                if (_StackFrame.regex.test(frame)) {\n                    var parsedFrame = new _StackFrame(frames[i], level++);\n                    totalSizeInBytes += parsedFrame.sizeInBytes;\n                    parsedStack.push(parsedFrame);\n                }\n            }\n            // DP Constraint - exception parsed stack must be < 32KB\n            // remove frames from the middle to meet the threshold\n            var exceptionParsedStackThreshold = 32 * 1024;\n            if (totalSizeInBytes > exceptionParsedStackThreshold) {\n                var left = 0;\n                var right = parsedStack.length - 1;\n                var size = 0;\n                var acceptedLeft = left;\n                var acceptedRight = right;\n                while (left < right) {\n                    // check size\n                    var lSize = parsedStack[left].sizeInBytes;\n                    var rSize = parsedStack[right].sizeInBytes;\n                    size += lSize + rSize;\n                    if (size > exceptionParsedStackThreshold) {\n                        // remove extra frames from the middle\n                        var howMany = acceptedRight - acceptedLeft + 1;\n                        parsedStack.splice(acceptedLeft, howMany);\n                        break;\n                    }\n                    // update pointers\n                    acceptedLeft = left;\n                    acceptedRight = right;\n                    left++;\n                    right--;\n                }\n            }\n        }\n        return parsedStack;\n    };\n    return EnvelopeFactory;\n}());\nvar _StackFrame = (function () {\n    function _StackFrame(frame, level) {\n        this.sizeInBytes = 0;\n        this.level = level;\n        this.method = \"<no_method>\";\n        this.assembly = Util.trim(frame);\n        var matches = frame.match(_StackFrame.regex);\n        if (matches && matches.length >= 5) {\n            this.method = Util.trim(matches[2]) || this.method;\n            this.fileName = Util.trim(matches[4]) || \"<no_filename>\";\n            this.line = parseInt(matches[5]) || 0;\n        }\n        this.sizeInBytes += this.method.length;\n        this.sizeInBytes += this.fileName.length;\n        this.sizeInBytes += this.assembly.length;\n        // todo: these might need to be removed depending on how the back-end settles on their size calculation\n        this.sizeInBytes += _StackFrame.baseSize;\n        this.sizeInBytes += this.level.toString().length;\n        this.sizeInBytes += this.line.toString().length;\n    }\n    // regex to match stack frames from ie/chrome/ff\n    // methodName=$2, fileName=$4, lineNo=$5, column=$6\n    _StackFrame.regex = /^([\\s]+at)?(.*?)(\\@|\\s\\(|\\s)([^\\(\\@\\n]+):([0-9]+):([0-9]+)(\\)?)$/;\n    _StackFrame.baseSize = 58; //'{\"method\":\"\",\"level\":,\"assembly\":\"\",\"fileName\":\"\",\"line\":}'.length\n    return _StackFrame;\n}());\nmodule.exports = EnvelopeFactory;\n//# sourceMappingURL=EnvelopeFactory.js.map","import crypto from 'crypto';\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  return crypto.randomFillSync(rnds8);\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction bytesToUuid(buf, offset_) {\n  const offset = offset_ || 0; // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n\n  return (byteToHex[buf[offset + 0]] + byteToHex[buf[offset + 1]] + byteToHex[buf[offset + 2]] + byteToHex[buf[offset + 3]] + '-' + byteToHex[buf[offset + 4]] + byteToHex[buf[offset + 5]] + '-' + byteToHex[buf[offset + 6]] + byteToHex[buf[offset + 7]] + '-' + byteToHex[buf[offset + 8]] + byteToHex[buf[offset + 9]] + '-' + byteToHex[buf[offset + 10]] + byteToHex[buf[offset + 11]] + byteToHex[buf[offset + 12]] + byteToHex[buf[offset + 13]] + byteToHex[buf[offset + 14]] + byteToHex[buf[offset + 15]]).toLowerCase();\n}\n\nexport default bytesToUuid;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || bytesToUuid(b);\n}\n\nexport default v1;","import bytesToUuid from './bytesToUuid.js';\n\nfunction uuidToBytes(uuid) {\n  // Note: We assume we're being passed a valid uuid string\n  const bytes = [];\n  uuid.replace(/[a-fA-F0-9]{2}/g, function (hex) {\n    bytes.push(parseInt(hex, 16));\n  });\n  return bytes;\n}\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport const DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport const URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = uuidToBytes(namespace);\n    }\n\n    if (!Array.isArray(value)) {\n      throw TypeError('value must be an array of bytes');\n    }\n\n    if (!Array.isArray(namespace) || namespace.length !== 16) {\n      throw TypeError('namespace must be uuid string or an Array of 16 byte values');\n    } // Per 4.3\n\n\n    const bytes = hashfunc(namespace.concat(value));\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return bytesToUuid(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import v35 from './v35.js';\nimport md5 from './md5.js';\nconst v3 = v35('v3', 0x30, md5);\nexport default v3;","import crypto from 'crypto';\n\nfunction md5(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('md5').update(bytes).digest();\n}\n\nexport default md5;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return bytesToUuid(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nconst v5 = v35('v5', 0x50, sha1);\nexport default v5;","import crypto from 'crypto';\n\nfunction sha1(bytes) {\n  if (Array.isArray(bytes)) {\n    bytes = Buffer.from(bytes);\n  } else if (typeof bytes === 'string') {\n    bytes = Buffer.from(bytes, 'utf8');\n  }\n\n  return crypto.createHash('sha1').update(bytes).digest();\n}\n\nexport default sha1;"],"sourceRoot":""}