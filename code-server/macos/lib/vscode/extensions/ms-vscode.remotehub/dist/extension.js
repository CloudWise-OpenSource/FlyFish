(()=>{var yd={879:(u,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ByteStream=void 0;class w{constructor(D){this.bytes=D,this.byteIndexCurrent=0}hasMoreBytes(){return this.byteIndexCurrent<this.bytes.length}readBytes(D){const x=this.byteIndexCurrent;return this.byteIndexCurrent+=D,this.bytes.slice(x,this.byteIndexCurrent)}readByte(){let D=this.bytes[this.byteIndexCurrent];return this.byteIndexCurrent++,D}readString(D){let x="";for(let C=0;C<D;C++){const S=this.readByte();S!=0&&(x+=String.fromCharCode(S))}return x}}y.ByteStream=w},7106:(u,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ChunkSize=y.HeaderSizeInBytes=y.FileNameMaxLength=void 0,y.FileNameMaxLength=99,y.HeaderSizeInBytes=500,y.ChunkSize=512},5759:(u,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TarFile=void 0;const T=w(879),D=w(7106),x=w(4108),C=w(3335);class S{constructor(P){this.entries=P}static fromBytes(P){const _=new T.ByteStream(P),U=[],R=D.ChunkSize;let W=0;for(;_.hasMoreBytes()==!0;){const j=_.readBytes(R);let X=!0;for(let J=0;J<j.length;J++)if(j[J]!=0){X=!1;break}if(X==!0){if(W++,W==2)break}else{W=0;const J=x.TarFileEntry.fromBytes(j,_);U.push(J)}}let Y=new S(U);return Y.consolidateLongPathEntries(),Y}consolidateLongPathEntries(){var P;const _=C.TarFileTypeFlag.Instances().LongFilePath.name,U=this.entries;for(let R=0;R<U.length;R++){const W=U[R];if(((P=W.header.typeFlag)===null||P===void 0?void 0:P.name)==_){const Y=U[R+1];Y.header.fileName=W.dataAsBytes.reduce((j,X)=>j+=String.fromCharCode(X),""),Y.header.fileName=Y.header.fileName.replace(/\0/g,""),U.splice(R,1),R--}}}}y.TarFile=S},4108:(u,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TarFileEntry=void 0;const T=w(7106),D=w(2895);class x{constructor(S,I){this.header=S,this.dataAsBytes=I}static fromBytes(S,I){const P=T.ChunkSize,_=D.TarFileEntryHeader.fromBytes(S),U=_.fileSizeInBytes,W=Math.ceil(U/P)*P,Y=I.readBytes(W).slice(0,U);return new x(_,Y)}}y.TarFileEntry=x},2895:(u,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TarFileEntryHeader=void 0;const T=w(879),D=w(3335);class x{constructor(S,I,P,_,U,R,W,Y,j,X,J,ne,N,se,G,re){this.fileName=S,this.fileMode=I,this.userIDOfOwner=P,this.userIDOfGroup=_,this.fileSizeInBytes=U,this.timeModifiedInUnixFormat=R,this.checksum=W,this.typeFlag=Y,this.nameOfLinkedFile=j,this.uStarIndicator=X,this.uStarVersion=J,this.userNameOfOwner=ne,this.groupNameOfOwner=N,this.deviceNumberMajor=se,this.deviceNumberMinor=G,this.filenamePrefix=re,this.fullFileName=re+S}static fromBytes(S){const I=new T.ByteStream(S),P=I.readString(100).trim(),_=I.readString(8),U=I.readString(8),R=I.readString(8),W=I.readString(12),Y=I.readBytes(12),j=I.readString(8),X=I.readString(1),J=I.readString(100),ne=I.readString(6),N=I.readString(2),se=I.readString(32),G=I.readString(32),re=I.readString(8),E=I.readString(8),B=I.readString(155),Z=I.readBytes(12),ae=parseInt(W.trim(),8),v=parseInt(j,8),L=D.TarFileTypeFlag.Instances()._All,M="_"+X,z=L[M];return new x(P,_,U,R,ae,Y,v,z,J,ne,N,se,G,re,E,B)}}y.TarFileEntryHeader=x},3335:(u,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TarFileTypeFlag=void 0;class w{constructor(x,C){this.value=x,this.id="_"+this.value,this.name=C}static Instances(){return w._instances==null&&(w._instances=new T),w._instances}}y.TarFileTypeFlag=w;class T{constructor(){this.Normal=new w("0","Normal"),this.HardLink=new w("1","Hard Link"),this.SymbolicLink=new w("2","Symbolic Link"),this.CharacterSpecial=new w("3","Character Special"),this.BlockSpecial=new w("4","Block Special"),this.Directory=new w("5","Directory"),this.FIFO=new w("6","FIFO"),this.ContiguousFile=new w("7","Contiguous File"),this.LongFilePath=new w("L","././@LongLink"),this._All=[this.Normal,this.HardLink,this.SymbolicLink,this.CharacterSpecial,this.BlockSpecial,this.Directory,this.FIFO,this.ContiguousFile,this.LongFilePath];for(let x=0;x<this._All.length;x++){const C=this._All[x];this._All[C.id]=C}}}},5790:(u,y,w)=>{"use strict";var T;T={value:!0},y.t9=T=T=T=void 0;const D=w(5759);T={enumerable:!0,get:function(){return D.TarFile}};const x=w(4108);T={enumerable:!0,get:function(){return x.TarFileEntry}};const C=w(2895);T={enumerable:!0,get:function(){return C.TarFileEntryHeader}},y.t9=S=>D.TarFile.fromBytes(S)},9669:(u,y,w)=>{u.exports=w(1609)},7970:(u,y,w)=>{"use strict";var T=w(4867),D=w(6026),x=w(4097),C=w(5327),S=w(8605),I=w(7211),P=w(938).http,_=w(938).https,U=w(8835),R=w(8761),W=w(696),Y=w(5061),j=w(481),X=/https:?/;function J(ne,N,se){if(ne.hostname=N.host,ne.host=N.host,ne.port=N.port,ne.path=se,N.auth){var G=Buffer.from(N.auth.username+":"+N.auth.password,"utf8").toString("base64");ne.headers["Proxy-Authorization"]="Basic "+G}ne.beforeRedirect=function(E){E.headers.host=E.host,J(E,N,E.href)}}u.exports=function(N){return new Promise(function(G,re){var E=function(Se){G(Se)},B=function(Se){re(Se)},Z=N.data,ae=N.headers;if(!ae["User-Agent"]&&!ae["user-agent"]&&(ae["User-Agent"]="axios/"+W.version),Z&&!T.isStream(Z)){if(!Buffer.isBuffer(Z))if(T.isArrayBuffer(Z))Z=Buffer.from(new Uint8Array(Z));else if(T.isString(Z))Z=Buffer.from(Z,"utf-8");else return B(Y("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",N));ae["Content-Length"]=Z.length}var v=void 0;if(N.auth){var L=N.auth.username||"",M=N.auth.password||"";v=L+":"+M}var z=x(N.baseURL,N.url),K=U.parse(z),O=K.protocol||"http:";if(!v&&K.auth){var V=K.auth.split(":"),ie=V[0]||"",ee=V[1]||"";v=ie+":"+ee}v&&delete ae.Authorization;var le=X.test(O),ge=le?N.httpsAgent:N.httpAgent,de={path:C(K.path,N.params,N.paramsSerializer).replace(/^\?/,""),method:N.method.toUpperCase(),headers:ae,agent:ge,agents:{http:N.httpAgent,https:N.httpsAgent},auth:v};N.socketPath?de.socketPath=N.socketPath:(de.hostname=K.hostname,de.port=K.port);var _e=N.proxy;if(!_e&&_e!==!1){var pe=O.slice(0,-1)+"_proxy",we=process.env[pe]||process.env[pe.toUpperCase()];if(we){var he=U.parse(we),Ce=process.env.no_proxy||process.env.NO_PROXY,xe=!0;if(Ce){var De=Ce.split(",").map(function(Se){return Se.trim()});xe=!De.some(function(Se){return Se?Se==="*"||Se[0]==="."&&K.hostname.substr(K.hostname.length-Se.length)===Se?!0:K.hostname===Se:!1})}if(xe&&(_e={host:he.hostname,port:he.port,protocol:he.protocol},he.auth)){var Pe=he.auth.split(":");_e.auth={username:Pe[0],password:Pe[1]}}}}_e&&(de.headers.host=K.hostname+(K.port?":"+K.port:""),J(de,_e,O+"//"+K.hostname+(K.port?":"+K.port:"")+de.path));var Ne,Ue=le&&(_e?X.test(_e.protocol):!0);N.transport?Ne=N.transport:N.maxRedirects===0?Ne=Ue?I:S:(N.maxRedirects&&(de.maxRedirects=N.maxRedirects),Ne=Ue?_:P),N.maxBodyLength>-1&&(de.maxBodyLength=N.maxBodyLength);var Ie=Ne.request(de,function(Se){if(!Ie.aborted){var Ye=Se,Mt=Se.req||Ie;if(Se.statusCode!==204&&Mt.method!=="HEAD"&&N.decompress!==!1)switch(Se.headers["content-encoding"]){case"gzip":case"compress":case"deflate":Ye=Ye.pipe(R.createUnzip()),delete Se.headers["content-encoding"];break}var ar={status:Se.statusCode,statusText:Se.statusMessage,headers:Se.headers,config:N,request:Mt};if(N.responseType==="stream")ar.data=Ye,D(E,B,ar);else{var cr=[];Ye.on("data",function(ot){cr.push(ot),N.maxContentLength>-1&&Buffer.concat(cr).length>N.maxContentLength&&(Ye.destroy(),B(Y("maxContentLength size of "+N.maxContentLength+" exceeded",N,null,Mt)))}),Ye.on("error",function(ot){Ie.aborted||B(j(ot,N,null,Mt))}),Ye.on("end",function(){var ot=Buffer.concat(cr);N.responseType!=="arraybuffer"&&(ot=ot.toString(N.responseEncoding),(!N.responseEncoding||N.responseEncoding==="utf8")&&(ot=T.stripBOM(ot))),ar.data=ot,D(E,B,ar)})}}});Ie.on("error",function(Se){Ie.aborted&&Se.code!=="ERR_FR_TOO_MANY_REDIRECTS"||B(j(Se,N,null,Ie))}),N.timeout&&Ie.setTimeout(N.timeout,function(){Ie.abort(),B(Y("timeout of "+N.timeout+"ms exceeded",N,"ECONNABORTED",Ie))}),N.cancelToken&&N.cancelToken.promise.then(function(Se){Ie.aborted||(Ie.abort(),B(Se))}),T.isStream(Z)?Z.on("error",function(Se){B(j(Se,N,null,Ie))}).pipe(Ie):Ie.end(Z)})}},5448:(u,y,w)=>{"use strict";var T=w(4867),D=w(6026),x=w(4372),C=w(5327),S=w(4097),I=w(4109),P=w(7985),_=w(5061);u.exports=function(R){return new Promise(function(Y,j){var X=R.data,J=R.headers;T.isFormData(X)&&delete J["Content-Type"];var ne=new XMLHttpRequest;if(R.auth){var N=R.auth.username||"",se=R.auth.password?unescape(encodeURIComponent(R.auth.password)):"";J.Authorization="Basic "+btoa(N+":"+se)}var G=S(R.baseURL,R.url);if(ne.open(R.method.toUpperCase(),C(G,R.params,R.paramsSerializer),!0),ne.timeout=R.timeout,ne.onreadystatechange=function(){if(!(!ne||ne.readyState!==4)&&!(ne.status===0&&!(ne.responseURL&&ne.responseURL.indexOf("file:")===0))){var B="getAllResponseHeaders"in ne?I(ne.getAllResponseHeaders()):null,Z=!R.responseType||R.responseType==="text"?ne.responseText:ne.response,ae={data:Z,status:ne.status,statusText:ne.statusText,headers:B,config:R,request:ne};D(Y,j,ae),ne=null}},ne.onabort=function(){!ne||(j(_("Request aborted",R,"ECONNABORTED",ne)),ne=null)},ne.onerror=function(){j(_("Network Error",R,null,ne)),ne=null},ne.ontimeout=function(){var B="timeout of "+R.timeout+"ms exceeded";R.timeoutErrorMessage&&(B=R.timeoutErrorMessage),j(_(B,R,"ECONNABORTED",ne)),ne=null},T.isStandardBrowserEnv()){var re=(R.withCredentials||P(G))&&R.xsrfCookieName?x.read(R.xsrfCookieName):void 0;re&&(J[R.xsrfHeaderName]=re)}if("setRequestHeader"in ne&&T.forEach(J,function(B,Z){typeof X=="undefined"&&Z.toLowerCase()==="content-type"?delete J[Z]:ne.setRequestHeader(Z,B)}),T.isUndefined(R.withCredentials)||(ne.withCredentials=!!R.withCredentials),R.responseType)try{ne.responseType=R.responseType}catch(E){if(R.responseType!=="json")throw E}typeof R.onDownloadProgress=="function"&&ne.addEventListener("progress",R.onDownloadProgress),typeof R.onUploadProgress=="function"&&ne.upload&&ne.upload.addEventListener("progress",R.onUploadProgress),R.cancelToken&&R.cancelToken.promise.then(function(B){!ne||(ne.abort(),j(B),ne=null)}),X||(X=null),ne.send(X)})}},1609:(u,y,w)=>{"use strict";var T=w(4867),D=w(1849),x=w(321),C=w(7185),S=w(5655);function I(_){var U=new x(_),R=D(x.prototype.request,U);return T.extend(R,x.prototype,U),T.extend(R,U),R}var P=I(S);P.Axios=x,P.create=function(U){return I(C(P.defaults,U))},P.Cancel=w(5263),P.CancelToken=w(4972),P.isCancel=w(6502),P.all=function(U){return Promise.all(U)},P.spread=w(8713),P.isAxiosError=w(6268),u.exports=P,u.exports.default=P},5263:u=>{"use strict";function y(w){this.message=w}y.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},y.prototype.__CANCEL__=!0,u.exports=y},4972:(u,y,w)=>{"use strict";var T=w(5263);function D(x){if(typeof x!="function")throw new TypeError("executor must be a function.");var C;this.promise=new Promise(function(P){C=P});var S=this;x(function(P){S.reason||(S.reason=new T(P),C(S.reason))})}D.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},D.source=function(){var C,S=new D(function(P){C=P});return{token:S,cancel:C}},u.exports=D},6502:u=>{"use strict";u.exports=function(w){return!!(w&&w.__CANCEL__)}},321:(u,y,w)=>{"use strict";var T=w(4867),D=w(5327),x=w(782),C=w(3572),S=w(7185);function I(P){this.defaults=P,this.interceptors={request:new x,response:new x}}I.prototype.request=function(_){typeof _=="string"?(_=arguments[1]||{},_.url=arguments[0]):_=_||{},_=S(this.defaults,_),_.method?_.method=_.method.toLowerCase():this.defaults.method?_.method=this.defaults.method.toLowerCase():_.method="get";var U=[C,void 0],R=Promise.resolve(_);for(this.interceptors.request.forEach(function(Y){U.unshift(Y.fulfilled,Y.rejected)}),this.interceptors.response.forEach(function(Y){U.push(Y.fulfilled,Y.rejected)});U.length;)R=R.then(U.shift(),U.shift());return R},I.prototype.getUri=function(_){return _=S(this.defaults,_),D(_.url,_.params,_.paramsSerializer).replace(/^\?/,"")},T.forEach(["delete","get","head","options"],function(_){I.prototype[_]=function(U,R){return this.request(S(R||{},{method:_,url:U,data:(R||{}).data}))}}),T.forEach(["post","put","patch"],function(_){I.prototype[_]=function(U,R,W){return this.request(S(W||{},{method:_,url:U,data:R}))}}),u.exports=I},782:(u,y,w)=>{"use strict";var T=w(4867);function D(){this.handlers=[]}D.prototype.use=function(C,S){return this.handlers.push({fulfilled:C,rejected:S}),this.handlers.length-1},D.prototype.eject=function(C){this.handlers[C]&&(this.handlers[C]=null)},D.prototype.forEach=function(C){T.forEach(this.handlers,function(I){I!==null&&C(I)})},u.exports=D},4097:(u,y,w)=>{"use strict";var T=w(1793),D=w(7303);u.exports=function(C,S){return C&&!T(S)?D(C,S):S}},5061:(u,y,w)=>{"use strict";var T=w(481);u.exports=function(x,C,S,I,P){var _=new Error(x);return T(_,C,S,I,P)}},3572:(u,y,w)=>{"use strict";var T=w(4867),D=w(8527),x=w(6502),C=w(5655);function S(I){I.cancelToken&&I.cancelToken.throwIfRequested()}u.exports=function(P){S(P),P.headers=P.headers||{},P.data=D(P.data,P.headers,P.transformRequest),P.headers=T.merge(P.headers.common||{},P.headers[P.method]||{},P.headers),T.forEach(["delete","get","head","post","put","patch","common"],function(R){delete P.headers[R]});var _=P.adapter||C.adapter;return _(P).then(function(R){return S(P),R.data=D(R.data,R.headers,P.transformResponse),R},function(R){return x(R)||(S(P),R&&R.response&&(R.response.data=D(R.response.data,R.response.headers,P.transformResponse))),Promise.reject(R)})}},481:u=>{"use strict";u.exports=function(w,T,D,x,C){return w.config=T,D&&(w.code=D),w.request=x,w.response=C,w.isAxiosError=!0,w.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},w}},7185:(u,y,w)=>{"use strict";var T=w(4867);u.exports=function(x,C){C=C||{};var S={},I=["url","method","data"],P=["headers","auth","proxy","params"],_=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],U=["validateStatus"];function R(X,J){return T.isPlainObject(X)&&T.isPlainObject(J)?T.merge(X,J):T.isPlainObject(J)?T.merge({},J):T.isArray(J)?J.slice():J}function W(X){T.isUndefined(C[X])?T.isUndefined(x[X])||(S[X]=R(void 0,x[X])):S[X]=R(x[X],C[X])}T.forEach(I,function(J){T.isUndefined(C[J])||(S[J]=R(void 0,C[J]))}),T.forEach(P,W),T.forEach(_,function(J){T.isUndefined(C[J])?T.isUndefined(x[J])||(S[J]=R(void 0,x[J])):S[J]=R(void 0,C[J])}),T.forEach(U,function(J){J in C?S[J]=R(x[J],C[J]):J in x&&(S[J]=R(void 0,x[J]))});var Y=I.concat(P).concat(_).concat(U),j=Object.keys(x).concat(Object.keys(C)).filter(function(J){return Y.indexOf(J)===-1});return T.forEach(j,W),S}},6026:(u,y,w)=>{"use strict";var T=w(5061);u.exports=function(x,C,S){var I=S.config.validateStatus;!S.status||!I||I(S.status)?x(S):C(T("Request failed with status code "+S.status,S.config,null,S.request,S))}},8527:(u,y,w)=>{"use strict";var T=w(4867);u.exports=function(x,C,S){return T.forEach(S,function(P){x=P(x,C)}),x}},5655:(u,y,w)=>{"use strict";var T=w(4867),D=w(6016),x={"Content-Type":"application/x-www-form-urlencoded"};function C(P,_){!T.isUndefined(P)&&T.isUndefined(P["Content-Type"])&&(P["Content-Type"]=_)}function S(){var P;return typeof XMLHttpRequest!="undefined"?P=w(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(P=w(7970)),P}var I={adapter:S(),transformRequest:[function(_,U){return D(U,"Accept"),D(U,"Content-Type"),T.isFormData(_)||T.isArrayBuffer(_)||T.isBuffer(_)||T.isStream(_)||T.isFile(_)||T.isBlob(_)?_:T.isArrayBufferView(_)?_.buffer:T.isURLSearchParams(_)?(C(U,"application/x-www-form-urlencoded;charset=utf-8"),_.toString()):T.isObject(_)?(C(U,"application/json;charset=utf-8"),JSON.stringify(_)):_}],transformResponse:[function(_){if(typeof _=="string")try{_=JSON.parse(_)}catch(U){}return _}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(_){return _>=200&&_<300}};I.headers={common:{Accept:"application/json, text/plain, */*"}},T.forEach(["delete","get","head"],function(_){I.headers[_]={}}),T.forEach(["post","put","patch"],function(_){I.headers[_]=T.merge(x)}),u.exports=I},1849:u=>{"use strict";u.exports=function(w,T){return function(){for(var x=new Array(arguments.length),C=0;C<x.length;C++)x[C]=arguments[C];return w.apply(T,x)}}},5327:(u,y,w)=>{"use strict";var T=w(4867);function D(x){return encodeURIComponent(x).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}u.exports=function(C,S,I){if(!S)return C;var P;if(I)P=I(S);else if(T.isURLSearchParams(S))P=S.toString();else{var _=[];T.forEach(S,function(W,Y){W===null||typeof W=="undefined"||(T.isArray(W)?Y=Y+"[]":W=[W],T.forEach(W,function(X){T.isDate(X)?X=X.toISOString():T.isObject(X)&&(X=JSON.stringify(X)),_.push(D(Y)+"="+D(X))}))}),P=_.join("&")}if(P){var U=C.indexOf("#");U!==-1&&(C=C.slice(0,U)),C+=(C.indexOf("?")===-1?"?":"&")+P}return C}},7303:u=>{"use strict";u.exports=function(w,T){return T?w.replace(/\/+$/,"")+"/"+T.replace(/^\/+/,""):w}},4372:(u,y,w)=>{"use strict";var T=w(4867);u.exports=T.isStandardBrowserEnv()?function(){return{write:function(C,S,I,P,_,U){var R=[];R.push(C+"="+encodeURIComponent(S)),T.isNumber(I)&&R.push("expires="+new Date(I).toGMTString()),T.isString(P)&&R.push("path="+P),T.isString(_)&&R.push("domain="+_),U===!0&&R.push("secure"),document.cookie=R.join("; ")},read:function(C){var S=document.cookie.match(new RegExp("(^|;\\s*)("+C+")=([^;]*)"));return S?decodeURIComponent(S[3]):null},remove:function(C){this.write(C,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:u=>{"use strict";u.exports=function(w){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(w)}},6268:u=>{"use strict";u.exports=function(w){return typeof w=="object"&&w.isAxiosError===!0}},7985:(u,y,w)=>{"use strict";var T=w(4867);u.exports=T.isStandardBrowserEnv()?function(){var x=/(msie|trident)/i.test(navigator.userAgent),C=document.createElement("a"),S;function I(P){var _=P;return x&&(C.setAttribute("href",_),_=C.href),C.setAttribute("href",_),{href:C.href,protocol:C.protocol?C.protocol.replace(/:$/,""):"",host:C.host,search:C.search?C.search.replace(/^\?/,""):"",hash:C.hash?C.hash.replace(/^#/,""):"",hostname:C.hostname,port:C.port,pathname:C.pathname.charAt(0)==="/"?C.pathname:"/"+C.pathname}}return S=I(window.location.href),function(_){var U=T.isString(_)?I(_):_;return U.protocol===S.protocol&&U.host===S.host}}():function(){return function(){return!0}}()},6016:(u,y,w)=>{"use strict";var T=w(4867);u.exports=function(x,C){T.forEach(x,function(I,P){P!==C&&P.toUpperCase()===C.toUpperCase()&&(x[C]=I,delete x[P])})}},4109:(u,y,w)=>{"use strict";var T=w(4867),D=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];u.exports=function(C){var S={},I,P,_;return C&&T.forEach(C.split(`
`),function(R){if(_=R.indexOf(":"),I=T.trim(R.substr(0,_)).toLowerCase(),P=T.trim(R.substr(_+1)),I){if(S[I]&&D.indexOf(I)>=0)return;I==="set-cookie"?S[I]=(S[I]?S[I]:[]).concat([P]):S[I]=S[I]?S[I]+", "+P:P}}),S}},8713:u=>{"use strict";u.exports=function(w){return function(D){return w.apply(null,D)}}},4867:(u,y,w)=>{"use strict";var T=w(1849),D=Object.prototype.toString;function x(v){return D.call(v)==="[object Array]"}function C(v){return typeof v=="undefined"}function S(v){return v!==null&&!C(v)&&v.constructor!==null&&!C(v.constructor)&&typeof v.constructor.isBuffer=="function"&&v.constructor.isBuffer(v)}function I(v){return D.call(v)==="[object ArrayBuffer]"}function P(v){return typeof FormData!="undefined"&&v instanceof FormData}function _(v){var L;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?L=ArrayBuffer.isView(v):L=v&&v.buffer&&v.buffer instanceof ArrayBuffer,L}function U(v){return typeof v=="string"}function R(v){return typeof v=="number"}function W(v){return v!==null&&typeof v=="object"}function Y(v){if(D.call(v)!=="[object Object]")return!1;var L=Object.getPrototypeOf(v);return L===null||L===Object.prototype}function j(v){return D.call(v)==="[object Date]"}function X(v){return D.call(v)==="[object File]"}function J(v){return D.call(v)==="[object Blob]"}function ne(v){return D.call(v)==="[object Function]"}function N(v){return W(v)&&ne(v.pipe)}function se(v){return typeof URLSearchParams!="undefined"&&v instanceof URLSearchParams}function G(v){return v.replace(/^\s*/,"").replace(/\s*$/,"")}function re(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function E(v,L){if(!(v===null||typeof v=="undefined"))if(typeof v!="object"&&(v=[v]),x(v))for(var M=0,z=v.length;M<z;M++)L.call(null,v[M],M,v);else for(var K in v)Object.prototype.hasOwnProperty.call(v,K)&&L.call(null,v[K],K,v)}function B(){var v={};function L(K,O){Y(v[O])&&Y(K)?v[O]=B(v[O],K):Y(K)?v[O]=B({},K):x(K)?v[O]=K.slice():v[O]=K}for(var M=0,z=arguments.length;M<z;M++)E(arguments[M],L);return v}function Z(v,L,M){return E(L,function(K,O){M&&typeof K=="function"?v[O]=T(K,M):v[O]=K}),v}function ae(v){return v.charCodeAt(0)===65279&&(v=v.slice(1)),v}u.exports={isArray:x,isArrayBuffer:I,isBuffer:S,isFormData:P,isArrayBufferView:_,isString:U,isNumber:R,isObject:W,isPlainObject:Y,isUndefined:C,isDate:j,isFile:X,isBlob:J,isFunction:ne,isStream:N,isURLSearchParams:se,isStandardBrowserEnv:re,forEach:E,merge:B,extend:Z,trim:G,stripBOM:ae}},696:u=>{"use strict";u.exports=JSON.parse('{"name":"axios","version":"0.21.1","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.10.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5623:u=>{"use strict";u.exports=y;function y(D,x,C){D instanceof RegExp&&(D=w(D,C)),x instanceof RegExp&&(x=w(x,C));var S=T(D,x,C);return S&&{start:S[0],end:S[1],pre:C.slice(0,S[0]),body:C.slice(S[0]+D.length,S[1]),post:C.slice(S[1]+x.length)}}function w(D,x){var C=x.match(D);return C?C[0]:null}y.range=T;function T(D,x,C){var S,I,P,_,U,R=C.indexOf(D),W=C.indexOf(x,R+1),Y=R;if(R>=0&&W>0){if(D===x)return[R,W];for(S=[],P=C.length;Y>=0&&!U;)Y==R?(S.push(Y),R=C.indexOf(D,Y+1)):S.length==1?U=[S.pop(),W]:(I=S.pop(),I<P&&(P=I,_=W),W=C.indexOf(x,Y+1)),Y=R<W&&R>=0?R:W;S.length&&(U=[P,_])}return U}},5186:(u,y,w)=>{var T=w(3698),D=w(2505),x=w(5382),C=Function.bind,S=C.bind(C);function I(W,Y,j){var X=S(x,null).apply(null,j?[Y,j]:[Y]);W.api={remove:X},W.remove=X,["before","error","after","wrap"].forEach(function(J){var ne=j?[Y,J,j]:[Y,J];W[J]=W.api[J]=S(D,null).apply(null,ne)})}function P(){var W="h",Y={registry:{}},j=T.bind(null,Y,W);return I(j,Y,W),j}function _(){var W={registry:{}},Y=T.bind(null,W);return I(Y,W),Y}var U=!1;function R(){return U||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),U=!0),_()}R.Singular=P.bind(),R.Collection=_.bind(),u.exports=R,u.exports.Hook=R,u.exports.Singular=R.Singular,u.exports.Collection=R.Collection},2505:u=>{u.exports=y;function y(w,T,D,x){var C=x;w.registry[D]||(w.registry[D]=[]),T==="before"&&(x=function(S,I){return Promise.resolve().then(C.bind(null,I)).then(S.bind(null,I))}),T==="after"&&(x=function(S,I){var P;return Promise.resolve().then(S.bind(null,I)).then(function(_){return P=_,C(P,I)}).then(function(){return P})}),T==="error"&&(x=function(S,I){return Promise.resolve().then(S.bind(null,I)).catch(function(P){return C(P,I)})}),w.registry[D].push({hook:x,orig:C})}},3698:u=>{u.exports=y;function y(w,T,D,x){if(typeof D!="function")throw new Error("method for before hook must be a function");return x||(x={}),Array.isArray(T)?T.reverse().reduce(function(C,S){return y.bind(null,w,S,C,x)},D)():Promise.resolve().then(function(){return w.registry[T]?w.registry[T].reduce(function(C,S){return S.hook.bind(null,C,x)},D)():D(x)})}},5382:u=>{u.exports=y;function y(w,T,D){if(!!w.registry[T]){var x=w.registry[T].map(function(C){return C.orig}).indexOf(D);x!==-1&&w.registry[T].splice(x,1)}}},3644:(u,y,w)=>{var T=w(1048),D=w(5623);u.exports=Y;var x="\0SLASH"+Math.random()+"\0",C="\0OPEN"+Math.random()+"\0",S="\0CLOSE"+Math.random()+"\0",I="\0COMMA"+Math.random()+"\0",P="\0PERIOD"+Math.random()+"\0";function _(G){return parseInt(G,10)==G?parseInt(G,10):G.charCodeAt(0)}function U(G){return G.split("\\\\").join(x).split("\\{").join(C).split("\\}").join(S).split("\\,").join(I).split("\\.").join(P)}function R(G){return G.split(x).join("\\").split(C).join("{").split(S).join("}").split(I).join(",").split(P).join(".")}function W(G){if(!G)return[""];var re=[],E=D("{","}",G);if(!E)return G.split(",");var B=E.pre,Z=E.body,ae=E.post,v=B.split(",");v[v.length-1]+="{"+Z+"}";var L=W(ae);return ae.length&&(v[v.length-1]+=L.shift(),v.push.apply(v,L)),re.push.apply(re,v),re}function Y(G){return G?(G.substr(0,2)==="{}"&&(G="\\{\\}"+G.substr(2)),se(U(G),!0).map(R)):[]}function j(G){return G}function X(G){return"{"+G+"}"}function J(G){return/^-?0\d/.test(G)}function ne(G,re){return G<=re}function N(G,re){return G>=re}function se(G,re){var E=[],B=D("{","}",G);if(!B||/\$$/.test(B.pre))return[G];var Z=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(B.body),ae=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(B.body),v=Z||ae,L=B.body.indexOf(",")>=0;if(!v&&!L)return B.post.match(/,.*\}/)?(G=B.pre+"{"+B.body+S+B.post,se(G)):[G];var M;if(v)M=B.body.split(/\.\./);else if(M=W(B.body),M.length===1&&(M=se(M[0],!1).map(X),M.length===1)){var K=B.post.length?se(B.post,!1):[""];return K.map(function(Ue){return B.pre+M[0]+Ue})}var z=B.pre,K=B.post.length?se(B.post,!1):[""],O;if(v){var V=_(M[0]),ie=_(M[1]),ee=Math.max(M[0].length,M[1].length),le=M.length==3?Math.abs(_(M[2])):1,ge=ne,de=ie<V;de&&(le*=-1,ge=N);var _e=M.some(J);O=[];for(var pe=V;ge(pe,ie);pe+=le){var we;if(ae)we=String.fromCharCode(pe),we==="\\"&&(we="");else if(we=String(pe),_e){var he=ee-we.length;if(he>0){var Ce=new Array(he+1).join("0");pe<0?we="-"+Ce+we.slice(1):we=Ce+we}}O.push(we)}}else O=T(M,function(Ne){return se(Ne,!1)});for(var xe=0;xe<O.length;xe++)for(var De=0;De<K.length;De++){var Pe=z+O[xe]+K[De];(!re||v||Pe)&&E.push(Pe)}return E}},1048:u=>{u.exports=function(w,T){for(var D=[],x=0;x<w.length;x++){var C=T(w[x],x);y(C)?D.push.apply(D,C):D.push(C)}return D};var y=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"}},5175:u=>{"use strict";function y(w){if(!/^data:/i.test(w))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');w=w.replace(/\r?\n/g,"");const T=w.indexOf(",");if(T===-1||T<=4)throw new TypeError("malformed data: URI");const D=w.substring(5,T).split(";");let x="",C=!1;const S=D[0]||"text/plain";let I=S;for(let R=1;R<D.length;R++)D[R]==="base64"?C=!0:(I+=`;${D[R]}`,D[R].indexOf("charset=")===0&&(x=D[R].substring(8)));!D[0]&&!x.length&&(I+=";charset=US-ASCII",x="US-ASCII");const P=C?"base64":"ascii",_=unescape(w.substring(T+1)),U=Buffer.from(_,P);return U.type=S,U.typeFull=I,U.charset=x,U}u.exports=y},1227:(u,y,w)=>{y=u.exports=w(1658),y.log=x,y.formatArgs=D,y.save=C,y.load=S,y.useColors=T,y.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:I(),y.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function T(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}y.formatters.j=function(P){try{return JSON.stringify(P)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}};function D(P){var _=this.useColors;if(P[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+P[0]+(_?"%c ":" ")+"+"+y.humanize(this.diff),!!_){var U="color: "+this.color;P.splice(1,0,U,"color: inherit");var R=0,W=0;P[0].replace(/%[a-zA-Z%]/g,function(Y){Y!=="%%"&&(R++,Y==="%c"&&(W=R))}),P.splice(W,0,U)}}function x(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function C(P){try{P==null?y.storage.removeItem("debug"):y.storage.debug=P}catch(_){}}function S(){var P;try{P=y.storage.debug}catch(_){}return!P&&typeof process!="undefined"&&"env"in process&&(P=process.env.DEBUG),P}y.enable(S());function I(){try{return window.localStorage}catch(P){}}},1658:(u,y,w)=>{y=u.exports=x.debug=x.default=x,y.coerce=P,y.disable=S,y.enable=C,y.enabled=I,y.humanize=w(7824),y.names=[],y.skips=[],y.formatters={};var T;function D(_){var U=0,R;for(R in _)U=(U<<5)-U+_.charCodeAt(R),U|=0;return y.colors[Math.abs(U)%y.colors.length]}function x(_){function U(){if(!!U.enabled){var R=U,W=+new Date,Y=W-(T||W);R.diff=Y,R.prev=T,R.curr=W,T=W;for(var j=new Array(arguments.length),X=0;X<j.length;X++)j[X]=arguments[X];j[0]=y.coerce(j[0]),typeof j[0]!="string"&&j.unshift("%O");var J=0;j[0]=j[0].replace(/%([a-zA-Z%])/g,function(N,se){if(N==="%%")return N;J++;var G=y.formatters[se];if(typeof G=="function"){var re=j[J];N=G.call(R,re),j.splice(J,1),J--}return N}),y.formatArgs.call(R,j);var ne=U.log||y.log||console.log.bind(console);ne.apply(R,j)}}return U.namespace=_,U.enabled=y.enabled(_),U.useColors=y.useColors(),U.color=D(_),typeof y.init=="function"&&y.init(U),U}function C(_){y.save(_),y.names=[],y.skips=[];for(var U=(typeof _=="string"?_:"").split(/[\s,]+/),R=U.length,W=0;W<R;W++)!U[W]||(_=U[W].replace(/\*/g,".*?"),_[0]==="-"?y.skips.push(new RegExp("^"+_.substr(1)+"$")):y.names.push(new RegExp("^"+_+"$")))}function S(){y.enable("")}function I(_){var U,R;for(U=0,R=y.skips.length;U<R;U++)if(y.skips[U].test(_))return!1;for(U=0,R=y.names.length;U<R;U++)if(y.names[U].test(_))return!0;return!1}function P(_){return _ instanceof Error?_.stack||_.message:_}},5158:(u,y,w)=>{typeof process!="undefined"&&process.type==="renderer"?u.exports=w(1227):u.exports=w(39)},39:(u,y,w)=>{var T=w(3867),D=w(1669);y=u.exports=w(1658),y.init=W,y.log=P,y.formatArgs=I,y.save=_,y.load=U,y.useColors=S,y.colors=[6,2,3,4,5,1],y.inspectOpts=Object.keys(process.env).filter(function(Y){return/^debug_/i.test(Y)}).reduce(function(Y,j){var X=j.substring(6).toLowerCase().replace(/_([a-z])/g,function(ne,N){return N.toUpperCase()}),J=process.env[j];return/^(yes|on|true|enabled)$/i.test(J)?J=!0:/^(no|off|false|disabled)$/i.test(J)?J=!1:J==="null"?J=null:J=Number(J),Y[X]=J,Y},{});var x=parseInt(process.env.DEBUG_FD,10)||2;x!==1&&x!==2&&D.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var C=x===1?process.stdout:x===2?process.stderr:R(x);function S(){return"colors"in y.inspectOpts?Boolean(y.inspectOpts.colors):T.isatty(x)}y.formatters.o=function(Y){return this.inspectOpts.colors=this.useColors,D.inspect(Y,this.inspectOpts).split(`
`).map(function(j){return j.trim()}).join(" ")},y.formatters.O=function(Y){return this.inspectOpts.colors=this.useColors,D.inspect(Y,this.inspectOpts)};function I(Y){var j=this.namespace,X=this.useColors;if(X){var J=this.color,ne="  [3"+J+";1m"+j+" [0m";Y[0]=ne+Y[0].split(`
`).join(`
`+ne),Y.push("[3"+J+"m+"+y.humanize(this.diff)+"[0m")}else Y[0]=new Date().toUTCString()+" "+j+" "+Y[0]}function P(){return C.write(D.format.apply(D,arguments)+`
`)}function _(Y){Y==null?delete process.env.DEBUG:process.env.DEBUG=Y}function U(){return process.env.DEBUG}function R(Y){var j,X=process.binding("tty_wrap");switch(X.guessHandleType(Y)){case"TTY":j=new T.WriteStream(Y),j._type="tty",j._handle&&j._handle.unref&&j._handle.unref();break;case"FILE":var J=w(5747);j=new J.SyncWriteStream(Y,{autoClose:!1}),j._type="fs";break;case"PIPE":case"TCP":var ne=w(1631);j=new ne.Socket({fd:Y,readable:!1,writable:!0}),j.readable=!1,j.read=null,j._type="pipe",j._handle&&j._handle.unref&&j._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return j.fd=Y,j._isStdio=!0,j}function W(Y){Y.inspectOpts={};for(var j=Object.keys(y.inspectOpts),X=0;X<j.length;X++)Y.inspectOpts[j[X]]=y.inspectOpts[j[X]]}y.enable(U())},6030:(u,y,w)=>{const{Readable:T}=w(2413),D=new WeakMap;async function*x(S){for(const I of S)"stream"in I?yield*I.stream():yield I}class C{constructor(I=[],P={}){let _=0;const U=I.map(W=>{let Y;return W instanceof Buffer?Y=W:ArrayBuffer.isView(W)?Y=Buffer.from(W.buffer,W.byteOffset,W.byteLength):W instanceof ArrayBuffer?Y=Buffer.from(W):W instanceof C?Y=W:Y=Buffer.from(typeof W=="string"?W:String(W)),_+=Y.length||Y.size||0,Y}),R=P.type===void 0?"":String(P.type).toLowerCase();D.set(this,{type:/[^\u0020-\u007E]/.test(R)?"":R,size:_,parts:U})}get size(){return D.get(this).size}get type(){return D.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const I=new Uint8Array(this.size);let P=0;for await(const _ of this.stream())I.set(_,P),P+=_.length;return I.buffer}stream(){return T.from(x(D.get(this).parts))}slice(I=0,P=this.size,_=""){const{size:U}=this;let R=I<0?Math.max(U+I,0):Math.min(I,U),W=P<0?Math.max(U+P,0):Math.min(P,U);const Y=Math.max(W-R,0),j=D.get(this).parts.values(),X=[];let J=0;for(const N of j){const se=ArrayBuffer.isView(N)?N.byteLength:N.size;if(R&&se<=R)R-=se,W-=se;else{const G=N.slice(R,Math.min(se,W));if(X.push(G),J+=ArrayBuffer.isView(G)?G.byteLength:G.size,R=0,J>=Y)break}}const ne=new C([],{type:String(_).toLowerCase()});return Object.assign(D.get(ne),{size:Y,parts:X}),ne}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](I){return I&&typeof I=="object"&&typeof I.stream=="function"&&I.stream.length===0&&typeof I.constructor=="function"&&/^(Blob|File)$/.test(I[Symbol.toStringTag])}}Object.defineProperties(C.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),u.exports=C},2261:(u,y,w)=>{var T;u.exports=function(){if(!T)try{T=w(5158)("follow-redirects")}catch(D){T=function(){}}T.apply(null,arguments)}},938:(u,y,w)=>{var T=w(8835),D=T.URL,x=w(8605),C=w(7211),S=w(2413).Writable,I=w(2357),P=w(2261),_=["abort","aborted","connect","error","socket","timeout"],U=Object.create(null);_.forEach(function(E){U[E]=function(B,Z,ae){this._redirectable.emit(E,B,Z,ae)}});var R=G("ERR_FR_REDIRECTION_FAILURE",""),W=G("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Y=G("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),j=G("ERR_STREAM_WRITE_AFTER_END","write after end");function X(E,B){S.call(this),this._sanitizeOptions(E),this._options=E,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],B&&this.on("response",B);var Z=this;this._onNativeResponse=function(ae){Z._processResponse(ae)},this._performRequest()}X.prototype=Object.create(S.prototype),X.prototype.abort=function(){re(this._currentRequest),this.emit("abort"),this.removeAllListeners()},X.prototype.write=function(E,B,Z){if(this._ending)throw new j;if(!(typeof E=="string"||typeof E=="object"&&"length"in E))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof B=="function"&&(Z=B,B=null),E.length===0){Z&&Z();return}this._requestBodyLength+E.length<=this._options.maxBodyLength?(this._requestBodyLength+=E.length,this._requestBodyBuffers.push({data:E,encoding:B}),this._currentRequest.write(E,B,Z)):(this.emit("error",new Y),this.abort())},X.prototype.end=function(E,B,Z){if(typeof E=="function"?(Z=E,E=B=null):typeof B=="function"&&(Z=B,B=null),!E)this._ended=this._ending=!0,this._currentRequest.end(null,null,Z);else{var ae=this,v=this._currentRequest;this.write(E,B,function(){ae._ended=!0,v.end(null,null,Z)}),this._ending=!0}},X.prototype.setHeader=function(E,B){this._options.headers[E]=B,this._currentRequest.setHeader(E,B)},X.prototype.removeHeader=function(E){delete this._options.headers[E],this._currentRequest.removeHeader(E)},X.prototype.setTimeout=function(E,B){var Z=this;B&&this.on("timeout",B);function ae(M){M.setTimeout(E),M.removeListener("timeout",M.destroy),M.addListener("timeout",M.destroy)}function v(M){Z._timeout&&clearTimeout(Z._timeout),Z._timeout=setTimeout(function(){Z.emit("timeout"),L()},E),ae(M)}function L(){clearTimeout(this._timeout),B&&Z.removeListener("timeout",B),this.socket||Z._currentRequest.removeListener("socket",v)}return this.socket?v(this.socket):this._currentRequest.once("socket",v),this.on("socket",ae),this.once("response",L),this.once("error",L),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(E){X.prototype[E]=function(B,Z){return this._currentRequest[E](B,Z)}}),["aborted","connection","socket"].forEach(function(E){Object.defineProperty(X.prototype,E,{get:function(){return this._currentRequest[E]}})}),X.prototype._sanitizeOptions=function(E){if(E.headers||(E.headers={}),E.host&&(E.hostname||(E.hostname=E.host),delete E.host),!E.pathname&&E.path){var B=E.path.indexOf("?");B<0?E.pathname=E.path:(E.pathname=E.path.substring(0,B),E.search=E.path.substring(B))}},X.prototype._performRequest=function(){var E=this._options.protocol,B=this._options.nativeProtocols[E];if(!B){this.emit("error",new TypeError("Unsupported protocol "+E));return}if(this._options.agents){var Z=E.substr(0,E.length-1);this._options.agent=this._options.agents[Z]}var ae=this._currentRequest=B.request(this._options,this._onNativeResponse);this._currentUrl=T.format(this._options),ae._redirectable=this;for(var v=0;v<_.length;v++)ae.on(_[v],U[_[v]]);if(this._isRedirect){var L=0,M=this,z=this._requestBodyBuffers;(function K(O){if(ae===M._currentRequest)if(O)M.emit("error",O);else if(L<z.length){var V=z[L++];ae.finished||ae.write(V.data,V.encoding,K)}else M._ended&&ae.end()})()}},X.prototype._processResponse=function(E){var B=E.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:E.headers,statusCode:B});var Z=E.headers.location;if(Z&&this._options.followRedirects!==!1&&B>=300&&B<400){if(re(this._currentRequest),E.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new W);return}((B===301||B===302)&&this._options.method==="POST"||B===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],se(/^content-/i,this._options.headers));var ae=se(/^host$/i,this._options.headers)||T.parse(this._currentUrl).hostname,v=T.resolve(this._currentUrl,Z);P("redirecting to",v),this._isRedirect=!0;var L=T.parse(v);if(Object.assign(this._options,L),L.hostname!==ae&&se(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var M={headers:E.headers};try{this._options.beforeRedirect.call(null,this._options,M)}catch(K){this.emit("error",K);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(K){var z=new R("Redirected request failed: "+K.message);z.cause=K,this.emit("error",z)}}else E.responseUrl=this._currentUrl,E.redirects=this._redirects,this.emit("response",E),this._requestBodyBuffers=[]};function J(E){var B={maxRedirects:21,maxBodyLength:10*1024*1024},Z={};return Object.keys(E).forEach(function(ae){var v=ae+":",L=Z[v]=E[ae],M=B[ae]=Object.create(L);function z(O,V,ie){if(typeof O=="string"){var ee=O;try{O=N(new D(ee))}catch(le){O=T.parse(ee)}}else D&&O instanceof D?O=N(O):(ie=V,V=O,O={protocol:v});return typeof V=="function"&&(ie=V,V=null),V=Object.assign({maxRedirects:B.maxRedirects,maxBodyLength:B.maxBodyLength},O,V),V.nativeProtocols=Z,I.equal(V.protocol,v,"protocol mismatch"),P("options",V),new X(V,ie)}function K(O,V,ie){var ee=M.request(O,V,ie);return ee.end(),ee}Object.defineProperties(M,{request:{value:z,configurable:!0,enumerable:!0,writable:!0},get:{value:K,configurable:!0,enumerable:!0,writable:!0}})}),B}function ne(){}function N(E){var B={protocol:E.protocol,hostname:E.hostname.startsWith("[")?E.hostname.slice(1,-1):E.hostname,hash:E.hash,search:E.search,pathname:E.pathname,path:E.pathname+E.search,href:E.href};return E.port!==""&&(B.port=Number(E.port)),B}function se(E,B){var Z;for(var ae in B)E.test(ae)&&(Z=B[ae],delete B[ae]);return Z}function G(E,B){function Z(ae){Error.captureStackTrace(this,this.constructor),this.message=ae||B}return Z.prototype=new Error,Z.prototype.constructor=Z,Z.prototype.name="Error ["+E+"]",Z.prototype.code=E,Z}function re(E){for(var B=0;B<_.length;B++)E.removeListener(_[B],U[_[B]]);E.on("error",ne),E.abort()}u.exports=J({http:x,https:C}),u.exports.wrap=J},7360:function(u,y){var w,T,D;(function(x,C){T=[],w=C,D=typeof w=="function"?w.apply(y,T):w,D!==void 0&&(u.exports=D)})(this,function(){function C(N){var se={single:function(G,re,E){if(!G||(X(G)||(G=se.getPreparedSearch(G)),!re))return null;X(re)||(re=se.getPrepared(re));var B=E&&E.allowTypo!==void 0?E.allowTypo:N&&N.allowTypo!==void 0?N.allowTypo:!0,Z=B?se.algorithm:se.algorithmNoTypo;return Z(G,re,G[0])},go:function(G,re,E){if(!G)return _;G=se.prepareSearch(G);var B=G[0],Z=E&&E.threshold||N&&N.threshold||-9007199254740991,ae=E&&E.limit||N&&N.limit||9007199254740991,v=E&&E.allowTypo!==void 0?E.allowTypo:N&&N.allowTypo!==void 0?N.allowTypo:!0,L=v?se.algorithm:se.algorithmNoTypo,M=0,z=0,K=re.length;if(E&&E.keys)for(var O=E.scoreFn||Y,V=E.keys,ie=V.length,ee=K-1;ee>=0;--ee){for(var le=re[ee],ge=new Array(ie),de=ie-1;de>=0;--de){var _e=V[de],pe=j(le,_e);if(!pe){ge[de]=null;continue}X(pe)||(pe=se.getPrepared(pe)),ge[de]=L(G,pe,B)}ge.obj=le;var we=O(ge);we!==null&&(we<Z||(ge.score=we,M<ae?(ne.add(ge),++M):(++z,we>ne.peek().score&&ne.replaceTop(ge))))}else if(E&&E.key)for(var _e=E.key,ee=K-1;ee>=0;--ee){var le=re[ee],pe=j(le,_e);if(!!pe){X(pe)||(pe=se.getPrepared(pe));var he=L(G,pe,B);he!==null&&(he.score<Z||(he={target:he.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:he.score,indexes:he.indexes,obj:le},M<ae?(ne.add(he),++M):(++z,he.score>ne.peek().score&&ne.replaceTop(he))))}}else for(var ee=K-1;ee>=0;--ee){var pe=re[ee];if(!!pe){X(pe)||(pe=se.getPrepared(pe));var he=L(G,pe,B);he!==null&&(he.score<Z||(M<ae?(ne.add(he),++M):(++z,he.score>ne.peek().score&&ne.replaceTop(he))))}}if(M===0)return _;for(var Ce=new Array(M),ee=M-1;ee>=0;--ee)Ce[ee]=ne.poll();return Ce.total=M+z,Ce},goAsync:function(G,re,E){var B=!1,Z=new Promise(function(ae,v){if(!G)return ae(_);G=se.prepareSearch(G);var L=G[0],M=J(),z=re.length-1,K=E&&E.threshold||N&&N.threshold||-9007199254740991,O=E&&E.limit||N&&N.limit||9007199254740991,V=E&&E.allowTypo!==void 0?E.allowTypo:N&&N.allowTypo!==void 0?N.allowTypo:!0,ie=V?se.algorithm:se.algorithmNoTypo,ee=0,le=0;function ge(){if(B)return v("canceled");var de=Date.now();if(E&&E.keys)for(var _e=E.scoreFn||Y,pe=E.keys,we=pe.length;z>=0;--z){for(var he=re[z],Ce=new Array(we),xe=we-1;xe>=0;--xe){var De=pe[xe],Pe=j(he,De);if(!Pe){Ce[xe]=null;continue}X(Pe)||(Pe=se.getPrepared(Pe)),Ce[xe]=ie(G,Pe,L)}Ce.obj=he;var Ne=_e(Ce);if(Ne!==null&&!(Ne<K)&&(Ce.score=Ne,ee<O?(M.add(Ce),++ee):(++le,Ne>M.peek().score&&M.replaceTop(Ce)),z%1e3==0&&Date.now()-de>=10)){S?setImmediate(ge):setTimeout(ge);return}}else if(E&&E.key)for(var De=E.key;z>=0;--z){var he=re[z],Pe=j(he,De);if(!!Pe){X(Pe)||(Pe=se.getPrepared(Pe));var Ue=ie(G,Pe,L);if(Ue!==null&&!(Ue.score<K)&&(Ue={target:Ue.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:Ue.score,indexes:Ue.indexes,obj:he},ee<O?(M.add(Ue),++ee):(++le,Ue.score>M.peek().score&&M.replaceTop(Ue)),z%1e3==0&&Date.now()-de>=10)){S?setImmediate(ge):setTimeout(ge);return}}}else for(;z>=0;--z){var Pe=re[z];if(!!Pe){X(Pe)||(Pe=se.getPrepared(Pe));var Ue=ie(G,Pe,L);if(Ue!==null&&!(Ue.score<K)&&(ee<O?(M.add(Ue),++ee):(++le,Ue.score>M.peek().score&&M.replaceTop(Ue)),z%1e3==0&&Date.now()-de>=10)){S?setImmediate(ge):setTimeout(ge);return}}}if(ee===0)return ae(_);for(var Ie=new Array(ee),Ve=ee-1;Ve>=0;--Ve)Ie[Ve]=M.poll();Ie.total=ee+le,ae(Ie)}S?setImmediate(ge):ge()});return Z.cancel=function(){B=!0},Z},highlight:function(G,re,E){if(G===null)return null;re===void 0&&(re="<b>"),E===void 0&&(E="</b>");for(var B="",Z=0,ae=!1,v=G.target,L=v.length,M=G.indexes,z=0;z<L;++z){var K=v[z];if(M[Z]===z){if(++Z,ae||(ae=!0,B+=re),Z===M.length){B+=K+E+v.substr(z+1);break}}else ae&&(ae=!1,B+=E);B+=K}return B},prepare:function(G){if(!!G)return{target:G,_targetLowerCodes:se.prepareLowerCodes(G),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(G){if(!!G)return{target:G,_targetLowerCodes:se.prepareLowerCodes(G),_nextBeginningIndexes:se.prepareNextBeginningIndexes(G),score:null,indexes:null,obj:null}},prepareSearch:function(G){if(!!G)return se.prepareLowerCodes(G)},getPrepared:function(G){if(G.length>999)return se.prepare(G);var re=I.get(G);return re!==void 0||(re=se.prepare(G),I.set(G,re)),re},getPreparedSearch:function(G){if(G.length>999)return se.prepareSearch(G);var re=P.get(G);return re!==void 0||(re=se.prepareSearch(G),P.set(G,re)),re},algorithm:function(G,re,E){for(var B=re._targetLowerCodes,Z=G.length,ae=B.length,v=0,L=0,M=0,z=0;;){var K=E===B[L];if(K){if(U[z++]=L,++v,v===Z)break;E=G[M===0?v:M===v?v+1:M===v-1?v-1:v]}if(++L,L>=ae)for(;;){if(v<=1)return null;if(M===0){--v;var O=G[v];if(E===O)continue;M=v}else{if(M===1)return null;--M,v=M,E=G[v+1];var O=G[v];if(E===O)continue}z=v,L=U[z-1]+1;break}}var v=0,V=0,ie=!1,ee=0,le=re._nextBeginningIndexes;le===null&&(le=re._nextBeginningIndexes=se.prepareNextBeginningIndexes(re.target));var ge=L=U[0]===0?0:le[U[0]-1];if(L!==ae)for(;;)if(L>=ae){if(v<=0){if(++V,V>Z-2)break;if(G[V]===G[V+1])continue;L=ge;continue}--v;var de=R[--ee];L=le[de]}else{var K=G[V===0?v:V===v?v+1:V===v-1?v-1:v]===B[L];if(K){if(R[ee++]=L,++v,v===Z){ie=!0;break}++L}else L=le[L]}{if(ie)var _e=R,pe=ee;else var _e=U,pe=z;for(var we=0,he=-1,Ce=0;Ce<Z;++Ce){var L=_e[Ce];he!==L-1&&(we-=L),he=L}ie?V!==0&&(we+=-20):(we*=1e3,M!==0&&(we+=-20)),we-=ae-Z,re.score=we,re.indexes=new Array(pe);for(var Ce=pe-1;Ce>=0;--Ce)re.indexes[Ce]=_e[Ce];return re}},algorithmNoTypo:function(G,re,E){for(var B=re._targetLowerCodes,Z=G.length,ae=B.length,v=0,L=0,M=0;;){var z=E===B[L];if(z){if(U[M++]=L,++v,v===Z)break;E=G[v]}if(++L,L>=ae)return null}var v=0,K=!1,O=0,V=re._nextBeginningIndexes;V===null&&(V=re._nextBeginningIndexes=se.prepareNextBeginningIndexes(re.target));var ie=L=U[0]===0?0:V[U[0]-1];if(L!==ae)for(;;)if(L>=ae){if(v<=0)break;--v;var ee=R[--O];L=V[ee]}else{var z=G[v]===B[L];if(z){if(R[O++]=L,++v,v===Z){K=!0;break}++L}else L=V[L]}{if(K)var le=R,ge=O;else var le=U,ge=M;for(var de=0,_e=-1,pe=0;pe<Z;++pe){var L=le[pe];_e!==L-1&&(de-=L),_e=L}K||(de*=1e3),de-=ae-Z,re.score=de,re.indexes=new Array(ge);for(var pe=ge-1;pe>=0;--pe)re.indexes[pe]=le[pe];return re}},prepareLowerCodes:function(G){for(var re=G.length,E=[],B=G.toLowerCase(),Z=0;Z<re;++Z)E[Z]=B.charCodeAt(Z);return E},prepareBeginningIndexes:function(G){for(var re=G.length,E=[],B=0,Z=!1,ae=!1,v=0;v<re;++v){var L=G.charCodeAt(v),M=L>=65&&L<=90,z=M||L>=97&&L<=122||L>=48&&L<=57,K=M&&!Z||!ae||!z;Z=M,ae=z,K&&(E[B++]=v)}return E},prepareNextBeginningIndexes:function(G){for(var re=G.length,E=se.prepareBeginningIndexes(G),B=[],Z=E[0],ae=0,v=0;v<re;++v)Z>v?B[v]=Z:(Z=E[++ae],B[v]=Z===void 0?re:Z);return B},cleanup:W,new:C};return se}var S=typeof window=="undefined",I=new Map,P=new Map,_=[];_.total=0;var U=[],R=[];function W(){I.clear(),P.clear(),U=[],R=[]}function Y(N){for(var se=-9007199254740991,G=N.length-1;G>=0;--G){var re=N[G];if(re!==null){var E=re.score;E>se&&(se=E)}}return se===-9007199254740991?null:se}function j(N,se){var G=N[se];if(G!==void 0)return G;var re=se;Array.isArray(se)||(re=se.split("."));for(var E=re.length,B=-1;N&&++B<E;)N=N[re[B]];return N}function X(N){return typeof N=="object"}var J=function(){var N=[],se=0,G={};function re(){for(var E=0,B=N[E],Z=1;Z<se;){var ae=Z+1;E=Z,ae<se&&N[ae].score<N[Z].score&&(E=ae),N[E-1>>1]=N[E],Z=1+(E<<1)}for(var v=E-1>>1;E>0&&B.score<N[v].score;v=(E=v)-1>>1)N[E]=N[v];N[E]=B}return G.add=function(E){var B=se;N[se++]=E;for(var Z=B-1>>1;B>0&&E.score<N[Z].score;Z=(B=Z)-1>>1)N[B]=N[Z];N[B]=E},G.poll=function(){if(se!==0){var E=N[0];return N[0]=N[--se],re(),E}},G.peek=function(E){if(se!==0)return N[0]},G.replaceTop=function(E){N[0]=E,re()},G},ne=J();return C()})},1171:(u,y,w)=>{u.exports=X,X.Minimatch=J;var T={sep:"/"};try{T=w(5622)}catch(v){}var D=X.GLOBSTAR=J.GLOBSTAR={},x=w(3644),C={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},S="[^/]",I=S+"*?",P="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",_="(?:(?!(?:\\/|^)\\.).)*?",U=R("().*{}+?[]^$\\!");function R(v){return v.split("").reduce(function(L,M){return L[M]=!0,L},{})}var W=/\/+/;X.filter=Y;function Y(v,L){return L=L||{},function(M,z,K){return X(M,v,L)}}function j(v,L){v=v||{},L=L||{};var M={};return Object.keys(L).forEach(function(z){M[z]=L[z]}),Object.keys(v).forEach(function(z){M[z]=v[z]}),M}X.defaults=function(v){if(!v||!Object.keys(v).length)return X;var L=X,M=function(K,O,V){return L.minimatch(K,O,j(v,V))};return M.Minimatch=function(K,O){return new L.Minimatch(K,j(v,O))},M},J.defaults=function(v){return!v||!Object.keys(v).length?J:X.defaults(v).Minimatch};function X(v,L,M){if(typeof L!="string")throw new TypeError("glob pattern string required");return M||(M={}),!M.nocomment&&L.charAt(0)==="#"?!1:L.trim()===""?v==="":new J(L,M).match(v)}function J(v,L){if(!(this instanceof J))return new J(v,L);if(typeof v!="string")throw new TypeError("glob pattern string required");L||(L={}),v=v.trim(),T.sep!=="/"&&(v=v.split(T.sep).join("/")),this.options=L,this.set=[],this.pattern=v,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}J.prototype.debug=function(){},J.prototype.make=ne;function ne(){if(!this._made){var v=this.pattern,L=this.options;if(!L.nocomment&&v.charAt(0)==="#"){this.comment=!0;return}if(!v){this.empty=!0;return}this.parseNegate();var M=this.globSet=this.braceExpand();L.debug&&(this.debug=console.error),this.debug(this.pattern,M),M=this.globParts=M.map(function(z){return z.split(W)}),this.debug(this.pattern,M),M=M.map(function(z,K,O){return z.map(this.parse,this)},this),this.debug(this.pattern,M),M=M.filter(function(z){return z.indexOf(!1)===-1}),this.debug(this.pattern,M),this.set=M}}J.prototype.parseNegate=N;function N(){var v=this.pattern,L=!1,M=this.options,z=0;if(!M.nonegate){for(var K=0,O=v.length;K<O&&v.charAt(K)==="!";K++)L=!L,z++;z&&(this.pattern=v.substr(z)),this.negate=L}}X.braceExpand=function(v,L){return se(v,L)},J.prototype.braceExpand=se;function se(v,L){if(L||(this instanceof J?L=this.options:L={}),v=typeof v=="undefined"?this.pattern:v,typeof v=="undefined")throw new TypeError("undefined pattern");return L.nobrace||!v.match(/\{.*\}/)?[v]:x(v)}J.prototype.parse=re;var G={};function re(v,L){if(v.length>1024*64)throw new TypeError("pattern is too long");var M=this.options;if(!M.noglobstar&&v==="**")return D;if(v==="")return"";var z="",K=!!M.nocase,O=!1,V=[],ie=[],ee,le=!1,ge=-1,de=-1,_e=v.charAt(0)==="."?"":M.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",pe=this;function we(){if(ee){switch(ee){case"*":z+=I,K=!0;break;case"?":z+=S,K=!0;break;default:z+="\\"+ee;break}pe.debug("clearStateChar %j %j",ee,z),ee=!1}}for(var he=0,Ce=v.length,xe;he<Ce&&(xe=v.charAt(he));he++){if(this.debug("%s	%s %s %j",v,he,z,xe),O&&U[xe]){z+="\\"+xe,O=!1;continue}switch(xe){case"/":return!1;case"\\":we(),O=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",v,he,z,xe),le){this.debug("  in class"),xe==="!"&&he===de+1&&(xe="^"),z+=xe;continue}pe.debug("call clearStateChar %j",ee),we(),ee=xe,M.noext&&we();continue;case"(":if(le){z+="(";continue}if(!ee){z+="\\(";continue}V.push({type:ee,start:he-1,reStart:z.length,open:C[ee].open,close:C[ee].close}),z+=ee==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",ee,z),ee=!1;continue;case")":if(le||!V.length){z+="\\)";continue}we(),K=!0;var De=V.pop();z+=De.close,De.type==="!"&&ie.push(De),De.reEnd=z.length;continue;case"|":if(le||!V.length||O){z+="\\|",O=!1;continue}we(),z+="|";continue;case"[":if(we(),le){z+="\\"+xe;continue}le=!0,de=he,ge=z.length,z+=xe;continue;case"]":if(he===de+1||!le){z+="\\"+xe,O=!1;continue}if(le){var Pe=v.substring(de+1,he);try{RegExp("["+Pe+"]")}catch(vi){var Ne=this.parse(Pe,G);z=z.substr(0,ge)+"\\["+Ne[0]+"\\]",K=K||Ne[1],le=!1;continue}}K=!0,le=!1,z+=xe;continue;default:we(),O?O=!1:U[xe]&&!(xe==="^"&&le)&&(z+="\\"),z+=xe}}for(le&&(Pe=v.substr(de+1),Ne=this.parse(Pe,G),z=z.substr(0,ge)+"\\["+Ne[0],K=K||Ne[1]),De=V.pop();De;De=V.pop()){var Ue=z.slice(De.reStart+De.open.length);this.debug("setting tail",z,De),Ue=Ue.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(vi,wi,Tn){return Tn||(Tn="\\"),wi+wi+Tn+"|"}),this.debug(`tail=%j
   %s`,Ue,Ue,De,z);var Ie=De.type==="*"?I:De.type==="?"?S:"\\"+De.type;K=!0,z=z.slice(0,De.reStart)+Ie+"\\("+Ue}we(),O&&(z+="\\\\");var Ve=!1;switch(z.charAt(0)){case".":case"[":case"(":Ve=!0}for(var Se=ie.length-1;Se>-1;Se--){var Ye=ie[Se],Mt=z.slice(0,Ye.reStart),ar=z.slice(Ye.reStart,Ye.reEnd-8),cr=z.slice(Ye.reEnd-8,Ye.reEnd),St=z.slice(Ye.reEnd);cr+=St;var ot=Mt.split("(").length-1,_n=St;for(he=0;he<ot;he++)_n=_n.replace(/\)[+*?]?/,"");St=_n;var jr="";St===""&&L!==G&&(jr="$");var mi=Mt+ar+St+jr+cr;z=mi}if(z!==""&&K&&(z="(?=.)"+z),Ve&&(z=_e+z),L===G)return[z,K];if(!K)return Z(v);var ko=M.nocase?"i":"";try{var En=new RegExp("^"+z+"$",ko)}catch(vi){return new RegExp("$.")}return En._glob=v,En._src=z,En}X.makeRe=function(v,L){return new J(v,L||{}).makeRe()},J.prototype.makeRe=E;function E(){if(this.regexp||this.regexp===!1)return this.regexp;var v=this.set;if(!v.length)return this.regexp=!1,this.regexp;var L=this.options,M=L.noglobstar?I:L.dot?P:_,z=L.nocase?"i":"",K=v.map(function(O){return O.map(function(V){return V===D?M:typeof V=="string"?ae(V):V._src}).join("\\/")}).join("|");K="^(?:"+K+")$",this.negate&&(K="^(?!"+K+").*$");try{this.regexp=new RegExp(K,z)}catch(O){this.regexp=!1}return this.regexp}X.match=function(v,L,M){M=M||{};var z=new J(L,M);return v=v.filter(function(K){return z.match(K)}),z.options.nonull&&!v.length&&v.push(L),v},J.prototype.match=B;function B(v,L){if(this.debug("match",v,this.pattern),this.comment)return!1;if(this.empty)return v==="";if(v==="/"&&L)return!0;var M=this.options;T.sep!=="/"&&(v=v.split(T.sep).join("/")),v=v.split(W),this.debug(this.pattern,"split",v);var z=this.set;this.debug(this.pattern,"set",z);var K,O;for(O=v.length-1;O>=0&&(K=v[O],!K);O--);for(O=0;O<z.length;O++){var V=z[O],ie=v;M.matchBase&&V.length===1&&(ie=[K]);var ee=this.matchOne(ie,V,L);if(ee)return M.flipNegate?!0:!this.negate}return M.flipNegate?!1:this.negate}J.prototype.matchOne=function(v,L,M){var z=this.options;this.debug("matchOne",{this:this,file:v,pattern:L}),this.debug("matchOne",v.length,L.length);for(var K=0,O=0,V=v.length,ie=L.length;K<V&&O<ie;K++,O++){this.debug("matchOne loop");var ee=L[O],le=v[K];if(this.debug(L,ee,le),ee===!1)return!1;if(ee===D){this.debug("GLOBSTAR",[L,ee,le]);var ge=K,de=O+1;if(de===ie){for(this.debug("** at the end");K<V;K++)if(v[K]==="."||v[K]===".."||!z.dot&&v[K].charAt(0)===".")return!1;return!0}for(;ge<V;){var _e=v[ge];if(this.debug(`
globstar while`,v,ge,L,de,_e),this.matchOne(v.slice(ge),L.slice(de),M))return this.debug("globstar found match!",ge,V,_e),!0;if(_e==="."||_e===".."||!z.dot&&_e.charAt(0)==="."){this.debug("dot detected!",v,ge,L,de);break}this.debug("globstar swallow a segment, and continue"),ge++}return!!(M&&(this.debug(`
>>> no match, partial?`,v,ge,L,de),ge===V))}var pe;if(typeof ee=="string"?(z.nocase?pe=le.toLowerCase()===ee.toLowerCase():pe=le===ee,this.debug("string match",ee,le,pe)):(pe=le.match(ee),this.debug("pattern match",ee,le,pe)),!pe)return!1}if(K===V&&O===ie)return!0;if(K===V)return M;if(O===ie){var we=K===V-1&&v[K]==="";return we}throw new Error("wtf?")};function Z(v){return v.replace(/\\(.)/g,"$1")}function ae(v){return v.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},7824:u=>{var y=1e3,w=y*60,T=w*60,D=T*24,x=D*365.25;u.exports=function(_,U){U=U||{};var R=typeof _;if(R==="string"&&_.length>0)return C(_);if(R==="number"&&isNaN(_)===!1)return U.long?I(_):S(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))};function C(_){if(_=String(_),!(_.length>100)){var U=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(_);if(!!U){var R=parseFloat(U[1]),W=(U[2]||"ms").toLowerCase();switch(W){case"years":case"year":case"yrs":case"yr":case"y":return R*x;case"days":case"day":case"d":return R*D;case"hours":case"hour":case"hrs":case"hr":case"h":return R*T;case"minutes":case"minute":case"mins":case"min":case"m":return R*w;case"seconds":case"second":case"secs":case"sec":case"s":return R*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return R;default:return}}}}function S(_){return _>=D?Math.round(_/D)+"d":_>=T?Math.round(_/T)+"h":_>=w?Math.round(_/w)+"m":_>=y?Math.round(_/y)+"s":_+"ms"}function I(_){return P(_,D,"day")||P(_,T,"hour")||P(_,w,"minute")||P(_,y,"second")||_+" ms"}function P(_,U,R){if(!(_<U))return _<U*1.5?Math.floor(_/U)+" "+R:Math.ceil(_/U)+" "+R+"s"}},778:(u,y,w)=>{var T=w(2479);u.exports=T(D),u.exports.strict=T(x),D.proto=D(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return D(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return x(this)},configurable:!0})});function D(C){var S=function(){return S.called?S.value:(S.called=!0,S.value=C.apply(this,arguments))};return S.called=!1,S}function x(C){var S=function(){if(S.called)throw new Error(S.onceError);return S.called=!0,S.value=C.apply(this,arguments)},I=C.name||"Function wrapped with `once`";return S.onceError=I+" shouldn't be called more than once",S.called=!1,S}},800:(u,y,w)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.config=y.loadMessageBundle=y.localize=y.format=y.setPseudo=y.isPseudo=y.isDefined=y.BundleFormat=y.MessageFormat=void 0;var T=w(1926),D;(function(W){W.file="file",W.bundle="bundle",W.both="both"})(D=y.MessageFormat||(y.MessageFormat={}));var x;(function(W){W.standalone="standalone",W.languagePack="languagePack"})(x=y.BundleFormat||(y.BundleFormat={}));var C;(function(W){function Y(j){var X=j;return X&&S(X.key)&&S(X.comment)}W.is=Y})(C||(C={}));function S(W){return typeof W!="undefined"}y.isDefined=S,y.isPseudo=!1;function I(W){y.isPseudo=W}y.setPseudo=I;function P(W,Y){var j;return y.isPseudo&&(W="\uFF3B"+W.replace(/[aouei]/g,"$&$&")+"\uFF3D"),Y.length===0?j=W:j=W.replace(/\{(\d+)\}/g,function(X,J){var ne=J[0],N=Y[ne],se=X;return typeof N=="string"?se=N:(typeof N=="number"||typeof N=="boolean"||N===void 0||N===null)&&(se=String(N)),se}),j}y.format=P;function _(W,Y){for(var j=[],X=2;X<arguments.length;X++)j[X-2]=arguments[X];return P(Y,j)}y.localize=_;function U(W){return T.default().loadMessageBundle(W)}y.loadMessageBundle=U;function R(W){return T.default().config(W)}y.config=R},1926:(u,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0});var w;function T(){if(w===void 0)throw new Error("No runtime abstraction layer installed");return w}(function(D){function x(C){if(C===void 0)throw new Error("No runtime abstraction layer provided");w=C}D.install=x})(T||(T={})),y.default=T},8472:(u,y,w)=>{"use strict";var T;T={value:!0},T=y.LV=void 0;var D=w(5622),x=w(5747),C=w(1926),S=w(800),I=w(800);T={enumerable:!0,get:function(){return I.MessageFormat}},T={enumerable:!0,get:function(){return I.BundleFormat}};var P=Object.prototype.toString;function _(O){return P.call(O)==="[object Number]"}function U(O){return P.call(O)==="[object String]"}function R(O){return O===!0||O===!1}function W(O){return JSON.parse(x.readFileSync(O,"utf8"))}var Y,j;function X(){if(j={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:S.MessageFormat.bundle},U(process.env.VSCODE_NLS_CONFIG))try{var O=JSON.parse(process.env.VSCODE_NLS_CONFIG),V=void 0;if(O.availableLanguages){var ie=O.availableLanguages["*"];U(ie)&&(V=ie)}if(U(O.locale)&&(j.locale=O.locale.toLowerCase()),V===void 0?j.language=j.locale:V!=="en"&&(j.language=V),R(O._languagePackSupport)&&(j.languagePackSupport=O._languagePackSupport),U(O._cacheRoot)&&(j.cacheRoot=O._cacheRoot),U(O._languagePackId)&&(j.languagePackId=O._languagePackId),U(O._translationsConfigFile)){j.translationsConfigFile=O._translationsConfigFile;try{j.translationsConfig=W(j.translationsConfigFile)}catch(le){if(O._corruptedFile){var ee=D.dirname(O._corruptedFile);x.exists(ee,function(ge){ge&&x.writeFile(O._corruptedFile,"corrupted","utf8",function(de){console.error(de)})})}}}}catch(le){}S.setPseudo(j.locale==="pseudo"),Y=Object.create(null)}X();function J(){return j.languagePackSupport===!0&&j.cacheRoot!==void 0&&j.languagePackId!==void 0&&j.translationsConfigFile!==void 0&&j.translationsConfig!==void 0}function ne(O){return function(V,ie){for(var ee=[],le=2;le<arguments.length;le++)ee[le-2]=arguments[le];if(_(V)){if(V>=O.length){console.error(`Broken localize call found. Index out of bounds. Stacktrace is
: `+new Error("").stack);return}return S.format(O[V],ee)}else{if(U(ie))return console.warn("Message "+ie+" didn't get externalized correctly."),S.format(ie,ee);console.error(`Broken localize call found. Stacktrace is
: `+new Error("").stack)}}}function N(O){var V;if(j.cacheLanguageResolution&&V)V=V;else{if(S.isPseudo||!j.language)V=".nls.json";else for(var ie=j.language;ie;){var ee=".nls."+ie+".json";if(x.existsSync(O+ee)){V=ee;break}else{var le=ie.lastIndexOf("-");le>0?ie=ie.substring(0,le):(V=".nls.json",ie=null)}}j.cacheLanguageResolution&&(V=V)}return O+V}function se(O){for(var V=j.language;V;){var ie=D.join(O,"nls.bundle."+V+".json");if(x.existsSync(ie))return ie;var ee=V.lastIndexOf("-");ee>0?V=V.substring(0,ee):V=void 0}if(V===void 0){var ie=D.join(O,"nls.bundle.json");if(x.existsSync(ie))return ie}}function G(O){try{x.mkdirSync(O)}catch(ie){if(ie.code==="EEXIST")return;if(ie.code==="ENOENT"){var V=D.dirname(O);V!==O&&(G(V),x.mkdirSync(O))}else throw ie}}function re(O){var V=W(D.join(O,"nls.metadata.json")),ie=Object.create(null);for(var ee in V){var le=V[ee];ie[ee]=le.messages}return ie}function E(O,V){var ie=j.translationsConfig[O.id];if(!!ie){var ee=W(ie).contents,le=W(D.join(V,"nls.metadata.json")),ge=Object.create(null);for(var de in le){var _e=le[de],pe=ee[O.outDir+"/"+de];if(pe){for(var we=[],he=0;he<_e.keys.length;he++){var Ce=_e.keys[he],xe=U(Ce)?Ce:Ce.key,De=pe[xe];De===void 0&&(De=_e.messages[he]),we.push(De)}ge[de]=we}else ge[de]=_e.messages}return ge}}function B(O){var V=new Date;x.utimes(O,V,V,function(){})}function Z(O,V){return Y[O]=V,V}function ae(O,V){var ie,ee=D.join(j.cacheRoot,O.id+"-"+O.hash+".json"),le=!1,ge=!1;try{return ie=JSON.parse(x.readFileSync(ee,{encoding:"utf8",flag:"r"})),B(ee),ie}catch(de){if(de.code==="ENOENT")ge=!0;else if(de instanceof SyntaxError)console.log("Syntax error parsing message bundle: "+de.message+"."),x.unlink(ee,function(_e){_e&&console.error("Deleting corrupted bundle "+ee+" failed.")}),le=!0;else throw de}if(ie=E(O,V),!ie||le)return ie;if(ge)try{x.writeFileSync(ee,JSON.stringify(ie),{encoding:"utf8",flag:"wx"})}catch(de){if(de.code==="EEXIST")return ie;throw de}return ie}function v(O){try{return re(O)}catch(V){console.log("Generating default bundle from meta data failed.",V);return}}function L(O,V){var ie;if(J())try{ie=ae(O,V)}catch(le){console.log("Load or create bundle failed ",le)}if(!ie){if(j.languagePackSupport)return v(V);var ee=se(V);if(ee)try{return W(ee)}catch(le){console.log("Loading in the box message bundle failed.",le)}ie=v(V)}return ie}function M(O){for(var V,ie=D.dirname(O);V=D.join(ie,"nls.metadata.header.json"),!x.existsSync(V);){var ee=D.dirname(ie);if(ee===ie){V=void 0;break}else ie=ee}return V}function z(O){if(!O)return S.localize;var V=D.extname(O);if(V&&(O=O.substr(0,O.length-V.length)),j.messageFormat===S.MessageFormat.both||j.messageFormat===S.MessageFormat.bundle){var ie=M(O);if(ie){var ee=D.dirname(ie),le=Y[ee];if(le===void 0)try{var ge=JSON.parse(x.readFileSync(ie,"utf8"));try{var de=L(ge,ee);le=Z(ee,de?{header:ge,nlsBundle:de}:null)}catch(he){console.error("Failed to load nls bundle",he),le=Z(ee,null)}}catch(he){console.error("Failed to read header file",he),le=Z(ee,null)}if(le){var _e=O.substr(ee.length+1).replace(/\\/g,"/"),pe=le.nlsBundle[_e];return pe===void 0?(console.error("Messages for file "+O+" not found. See console for details."),function(){return"Messages not found."}):ne(pe)}}}if(j.messageFormat===S.MessageFormat.both||j.messageFormat===S.MessageFormat.file)try{var we=W(N(O));return Array.isArray(we)?ne(we):S.isDefined(we.messages)&&S.isDefined(we.keys)?ne(we.messages):(console.error("String bundle '"+O+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(he){he.code!=="ENOENT"&&console.error("Failed to load single file bundle",he)}return console.error("Failed to load message bundle for file "+O),function(){return"Failed to load message bundle. See console for details."}}y.LV=z;function K(O){return O&&(U(O.locale)&&(j.locale=O.locale.toLowerCase(),j.language=j.locale,Y=Object.create(null)),O.messageFormat!==void 0&&(j.messageFormat=O.messageFormat),O.bundleFormat===S.BundleFormat.standalone&&j.languagePackSupport===!0&&(j.languagePackSupport=!1)),S.setPseudo(j.locale==="pseudo"),z}T=K,C.default.install(Object.freeze({loadMessageBundle:z,config:K}))},2479:u=>{u.exports=y;function y(w,T){if(w&&T)return y(w)(T);if(typeof w!="function")throw new TypeError("need wrapper function");return Object.keys(w).forEach(function(x){D[x]=w[x]}),D;function D(){for(var x=new Array(arguments.length),C=0;C<x.length;C++)x[C]=arguments[C];var S=w.apply(this,x),I=x[x.length-1];return typeof S=="function"&&S!==I&&Object.keys(I).forEach(function(P){S[P]=I[P]}),S}}},2357:u=>{"use strict";u.exports=require("assert")},6417:u=>{"use strict";u.exports=require("crypto")},5747:u=>{"use strict";u.exports=require("fs")},8605:u=>{"use strict";u.exports=require("http")},7211:u=>{"use strict";u.exports=require("https")},1631:u=>{"use strict";u.exports=require("net")},5622:u=>{"use strict";u.exports=require("path")},2413:u=>{"use strict";u.exports=require("stream")},3867:u=>{"use strict";u.exports=require("tty")},8835:u=>{"use strict";u.exports=require("url")},1669:u=>{"use strict";u.exports=require("util")},8761:u=>{"use strict";u.exports=require("zlib")}},sa={};function Re(u){var y=sa[u];if(y!==void 0)return y.exports;var w=sa[u]={exports:{}};return yd[u].call(w.exports,w,w.exports,Re),w.exports}(()=>{Re.n=u=>{var y=u&&u.__esModule?()=>u.default:()=>u;return Re.d(y,{a:y}),y}})(),(()=>{var u=Object.getPrototypeOf?w=>Object.getPrototypeOf(w):w=>w.__proto__,y;Re.t=function(w,T){if(T&1&&(w=this(w)),T&8||typeof w=="object"&&w&&(T&4&&w.__esModule||T&16&&typeof w.then=="function"))return w;var D=Object.create(null);Re.r(D);var x={};y=y||[null,u({}),u([]),u(u)];for(var C=T&2&&w;typeof C=="object"&&!~y.indexOf(C);C=u(C))Object.getOwnPropertyNames(C).forEach(S=>x[S]=()=>w[S]);return x.default=()=>w,Re.d(D,x),D}})(),(()=>{Re.d=(u,y)=>{for(var w in y)Re.o(y,w)&&!Re.o(u,w)&&Object.defineProperty(u,w,{enumerable:!0,get:y[w]})}})(),(()=>{Re.o=(u,y)=>Object.prototype.hasOwnProperty.call(u,y)})(),(()=>{Re.r=u=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}})();var So={};(()=>{"use strict";Re.r(So),Re.d(So,{activate:()=>My,isVirtualWorkspace:()=>ta,isWeb:()=>zr,openWorkspace:()=>_t,showRepositoryNotFoundMessage:()=>ea});const u=require("vscode");var y=Re(8472);function w(){this.__data__=[],this.size=0}const T=w;function D(e,t){return e===t||e!==e&&t!==t}const x=D;function C(e,t){for(var r=e.length;r--;)if(x(e[r][0],t))return r;return-1}const S=C;var I=Array.prototype,P=I.splice;function _(e){var t=this.__data__,r=S(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():P.call(t,r,1),--this.size,!0}const U=_;function R(e){var t=this.__data__,r=S(t,e);return r<0?void 0:t[r][1]}const W=R;function Y(e){return S(this.__data__,e)>-1}const j=Y;function X(e,t){var r=this.__data__,n=S(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}const J=X;function ne(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ne.prototype.clear=T,ne.prototype.delete=U,ne.prototype.get=W,ne.prototype.has=j,ne.prototype.set=J;const N=ne;function se(){this.__data__=new N,this.size=0}const G=se;function re(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}const E=re;function B(e){return this.__data__.get(e)}const Z=B;function ae(e){return this.__data__.has(e)}const v=ae;var L=typeof global=="object"&&global&&global.Object===Object&&global;const M=L;var z=typeof self=="object"&&self&&self.Object===Object&&self,K=M||z||Function("return this")();const O=K;var V=O.Symbol;const ie=V;var ee=Object.prototype,le=ee.hasOwnProperty,ge=ee.toString,de=ie?ie.toStringTag:void 0;function _e(e){var t=le.call(e,de),r=e[de];try{e[de]=void 0;var n=!0}catch(o){}var i=ge.call(e);return n&&(t?e[de]=r:delete e[de]),i}const pe=_e;var we=Object.prototype,he=we.toString;function Ce(e){return he.call(e)}const xe=Ce;var De="[object Null]",Pe="[object Undefined]",Ne=ie?ie.toStringTag:void 0;function Ue(e){return e==null?e===void 0?Pe:De:Ne&&Ne in Object(e)?pe(e):xe(e)}const Ie=Ue;function Ve(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}const Se=Ve;var Ye="[object AsyncFunction]",Mt="[object Function]",ar="[object GeneratorFunction]",cr="[object Proxy]";function St(e){if(!Se(e))return!1;var t=Ie(e);return t==Mt||t==ar||t==Ye||t==cr}const ot=St;var _n=O["__core-js_shared__"];const jr=_n;var mi=function(){var e=/[^.]+$/.exec(jr&&jr.keys&&jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ko(e){return!!mi&&mi in e}const En=ko;var vi=Function.prototype,wi=vi.toString;function Tn(e){if(e!=null){try{return wi.call(e)}catch(t){}try{return e+""}catch(t){}}return""}const xr=Tn;var _d=/[\\^$.*+?()[\]{}|]/g,Ed=/^\[object .+?Constructor\]$/,Td=Function.prototype,Sd=Object.prototype,kd=Td.toString,Cd=Sd.hasOwnProperty,xd=RegExp("^"+kd.call(Cd).replace(_d,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rd(e){if(!Se(e)||En(e))return!1;var t=ot(e)?xd:Ed;return t.test(xr(e))}const Ad=Rd;function Dd(e,t){return e==null?void 0:e[t]}const Pd=Dd;function Fd(e,t){var r=Pd(e,t);return Ad(r)?r:void 0}const qr=Fd;var Od=qr(O,"Map");const Sn=Od;var Ud=qr(Object,"create");const kn=Ud;function Id(){this.__data__=kn?kn(null):{},this.size=0}const Ld=Id;function $d(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}const Gd=$d;var Bd="__lodash_hash_undefined__",Md=Object.prototype,Nd=Md.hasOwnProperty;function Hd(e){var t=this.__data__;if(kn){var r=t[e];return r===Bd?void 0:r}return Nd.call(t,e)?t[e]:void 0}const zd=Hd;var jd=Object.prototype,qd=jd.hasOwnProperty;function Wd(e){var t=this.__data__;return kn?t[e]!==void 0:qd.call(t,e)}const Vd=Wd;var Zd="__lodash_hash_undefined__";function Kd(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kn&&t===void 0?Zd:t,this}const Qd=Kd;function Wr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Wr.prototype.clear=Ld,Wr.prototype.delete=Gd,Wr.prototype.get=zd,Wr.prototype.has=Vd,Wr.prototype.set=Qd;const aa=Wr;function Yd(){this.size=0,this.__data__={hash:new aa,map:new(Sn||N),string:new aa}}const Xd=Yd;function Jd(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}const ef=Jd;function tf(e,t){var r=e.__data__;return ef(t)?r[typeof t=="string"?"string":"hash"]:r.map}const bi=tf;function rf(e){var t=bi(this,e).delete(e);return this.size-=t?1:0,t}const nf=rf;function of(e){return bi(this,e).get(e)}const sf=of;function af(e){return bi(this,e).has(e)}const cf=af;function lf(e,t){var r=bi(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}const uf=lf;function Vr(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vr.prototype.clear=Xd,Vr.prototype.delete=nf,Vr.prototype.get=sf,Vr.prototype.has=cf,Vr.prototype.set=uf;const ca=Vr;var df=200;function ff(e,t){var r=this.__data__;if(r instanceof N){var n=r.__data__;if(!Sn||n.length<df-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ca(n)}return r.set(e,t),this.size=r.size,this}const hf=ff;function Zr(e){var t=this.__data__=new N(e);this.size=t.size}Zr.prototype.clear=G,Zr.prototype.delete=E,Zr.prototype.get=Z,Zr.prototype.has=v,Zr.prototype.set=hf;const Co=Zr;var pf="__lodash_hash_undefined__";function gf(e){return this.__data__.set(e,pf),this}const mf=gf;function vf(e){return this.__data__.has(e)}const wf=vf;function yi(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ca;++t<r;)this.add(e[t])}yi.prototype.add=yi.prototype.push=mf,yi.prototype.has=wf;const bf=yi;function yf(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}const _f=yf;function Ef(e,t){return e.has(t)}const Tf=Ef;var Sf=1,kf=2;function Cf(e,t,r,n,i,o){var s=r&Sf,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var p=-1,h=!0,f=r&kf?new bf:void 0;for(o.set(e,t),o.set(t,e);++p<a;){var g=e[p],m=t[p];if(n)var k=s?n(m,g,p,t,e,o):n(g,m,p,e,t,o);if(k!==void 0){if(k)continue;h=!1;break}if(f){if(!_f(t,function(F,A){if(!Tf(f,A)&&(g===F||i(g,F,r,n,o)))return f.push(A)})){h=!1;break}}else if(!(g===m||i(g,m,r,n,o))){h=!1;break}}return o.delete(e),o.delete(t),h}const la=Cf;var xf=O.Uint8Array;const ua=xf;function Rf(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}const Af=Rf;function Df(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}const Pf=Df;var Ff=1,Of=2,Uf="[object Boolean]",If="[object Date]",Lf="[object Error]",$f="[object Map]",Gf="[object Number]",Bf="[object RegExp]",Mf="[object Set]",Nf="[object String]",Hf="[object Symbol]",zf="[object ArrayBuffer]",jf="[object DataView]",da=ie?ie.prototype:void 0,xo=da?da.valueOf:void 0;function qf(e,t,r,n,i,o,s){switch(r){case jf:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case zf:return!(e.byteLength!=t.byteLength||!o(new ua(e),new ua(t)));case Uf:case If:case Gf:return x(+e,+t);case Lf:return e.name==t.name&&e.message==t.message;case Bf:case Nf:return e==t+"";case $f:var a=Af;case Mf:var l=n&Ff;if(a||(a=Pf),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=Of,s.set(e,t);var d=la(a(e),a(t),n,i,o,s);return s.delete(e),d;case Hf:if(xo)return xo.call(e)==xo.call(t)}return!1}const Wf=qf;function Vf(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}const Zf=Vf;var Kf=Array.isArray;const _i=Kf;function Qf(e,t,r){var n=t(e);return _i(e)?n:Zf(n,r(e))}const Yf=Qf;function Xf(e,t){for(var r=-1,n=e==null?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}const Jf=Xf;function eh(){return[]}const th=eh;var rh=Object.prototype,nh=rh.propertyIsEnumerable,fa=Object.getOwnPropertySymbols,ih=fa?function(e){return e==null?[]:(e=Object(e),Jf(fa(e),function(t){return nh.call(e,t)}))}:th;const oh=ih;function sh(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}const ah=sh;function ch(e){return e!=null&&typeof e=="object"}const Cn=ch;var lh="[object Arguments]";function uh(e){return Cn(e)&&Ie(e)==lh}const ha=uh;var pa=Object.prototype,dh=pa.hasOwnProperty,fh=pa.propertyIsEnumerable,hh=ha(function(){return arguments}())?ha:function(e){return Cn(e)&&dh.call(e,"callee")&&!fh.call(e,"callee")};const ph=hh;function gh(){return!1}const mh=gh;var ga=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ma=ga&&typeof module=="object"&&module&&!module.nodeType&&module,vh=ma&&ma.exports===ga,va=vh?O.Buffer:void 0,wh=va?va.isBuffer:void 0,bh=wh||mh;const Ro=bh;var yh=9007199254740991,_h=/^(?:0|[1-9]\d*)$/;function Eh(e,t){var r=typeof e;return t=t==null?yh:t,!!t&&(r=="number"||r!="symbol"&&_h.test(e))&&e>-1&&e%1==0&&e<t}const Th=Eh;var Sh=9007199254740991;function kh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Sh}const wa=kh;var Ch="[object Arguments]",xh="[object Array]",Rh="[object Boolean]",Ah="[object Date]",Dh="[object Error]",Ph="[object Function]",Fh="[object Map]",Oh="[object Number]",Uh="[object Object]",Ih="[object RegExp]",Lh="[object Set]",$h="[object String]",Gh="[object WeakMap]",Bh="[object ArrayBuffer]",Mh="[object DataView]",Nh="[object Float32Array]",Hh="[object Float64Array]",zh="[object Int8Array]",jh="[object Int16Array]",qh="[object Int32Array]",Wh="[object Uint8Array]",Vh="[object Uint8ClampedArray]",Zh="[object Uint16Array]",Kh="[object Uint32Array]",Le={};Le[Nh]=Le[Hh]=Le[zh]=Le[jh]=Le[qh]=Le[Wh]=Le[Vh]=Le[Zh]=Le[Kh]=!0,Le[Ch]=Le[xh]=Le[Bh]=Le[Rh]=Le[Mh]=Le[Ah]=Le[Dh]=Le[Ph]=Le[Fh]=Le[Oh]=Le[Uh]=Le[Ih]=Le[Lh]=Le[$h]=Le[Gh]=!1;function Qh(e){return Cn(e)&&wa(e.length)&&!!Le[Ie(e)]}const Yh=Qh;function Xh(e){return function(t){return e(t)}}const Jh=Xh;var ba=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xn=ba&&typeof module=="object"&&module&&!module.nodeType&&module,ep=xn&&xn.exports===ba,Ao=ep&&M.process,tp=function(){try{var e=xn&&xn.require&&xn.require("util").types;return e||Ao&&Ao.binding&&Ao.binding("util")}catch(t){}}();const ya=tp;var _a=ya&&ya.isTypedArray,rp=_a?Jh(_a):Yh;const Ea=rp;var np=Object.prototype,ip=np.hasOwnProperty;function op(e,t){var r=_i(e),n=!r&&ph(e),i=!r&&!n&&Ro(e),o=!r&&!n&&!i&&Ea(e),s=r||n||i||o,a=s?ah(e.length,String):[],l=a.length;for(var c in e)(t||ip.call(e,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Th(c,l)))&&a.push(c);return a}const sp=op;var ap=Object.prototype;function cp(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||ap;return e===r}const lp=cp;function up(e,t){return function(r){return e(t(r))}}var dp=up(Object.keys,Object);const fp=dp;var hp=Object.prototype,pp=hp.hasOwnProperty;function gp(e){if(!lp(e))return fp(e);var t=[];for(var r in Object(e))pp.call(e,r)&&r!="constructor"&&t.push(r);return t}const mp=gp;function vp(e){return e!=null&&wa(e.length)&&!ot(e)}const wp=vp;function bp(e){return wp(e)?sp(e):mp(e)}const yp=bp;function _p(e){return Yf(e,yp,oh)}const Ta=_p;var Ep=1,Tp=Object.prototype,Sp=Tp.hasOwnProperty;function kp(e,t,r,n,i,o){var s=r&Ep,a=Ta(e),l=a.length,c=Ta(t),d=c.length;if(l!=d&&!s)return!1;for(var p=l;p--;){var h=a[p];if(!(s?h in t:Sp.call(t,h)))return!1}var f=o.get(e),g=o.get(t);if(f&&g)return f==t&&g==e;var m=!0;o.set(e,t),o.set(t,e);for(var k=s;++p<l;){h=a[p];var F=e[h],A=t[h];if(n)var H=s?n(A,F,h,t,e,o):n(F,A,h,e,t,o);if(!(H===void 0?F===A||i(F,A,r,n,o):H)){m=!1;break}k||(k=h=="constructor")}if(m&&!k){var $=e.constructor,Q=t.constructor;$!=Q&&"constructor"in e&&"constructor"in t&&!(typeof $=="function"&&$ instanceof $&&typeof Q=="function"&&Q instanceof Q)&&(m=!1)}return o.delete(e),o.delete(t),m}const Cp=kp;var xp=qr(O,"DataView");const Do=xp;var Rp=qr(O,"Promise");const Po=Rp;var Ap=qr(O,"Set");const Fo=Ap;var Dp=qr(O,"WeakMap");const Oo=Dp;var Sa="[object Map]",Pp="[object Object]",ka="[object Promise]",Ca="[object Set]",xa="[object WeakMap]",Ra="[object DataView]",Fp=xr(Do),Op=xr(Sn),Up=xr(Po),Ip=xr(Fo),Lp=xr(Oo),Rr=Ie;(Do&&Rr(new Do(new ArrayBuffer(1)))!=Ra||Sn&&Rr(new Sn)!=Sa||Po&&Rr(Po.resolve())!=ka||Fo&&Rr(new Fo)!=Ca||Oo&&Rr(new Oo)!=xa)&&(Rr=function(e){var t=Ie(e),r=t==Pp?e.constructor:void 0,n=r?xr(r):"";if(n)switch(n){case Fp:return Ra;case Op:return Sa;case Up:return ka;case Ip:return Ca;case Lp:return xa}return t});const Aa=Rr;var $p=1,Da="[object Arguments]",Pa="[object Array]",Ei="[object Object]",Gp=Object.prototype,Fa=Gp.hasOwnProperty;function Bp(e,t,r,n,i,o){var s=_i(e),a=_i(t),l=s?Pa:Aa(e),c=a?Pa:Aa(t);l=l==Da?Ei:l,c=c==Da?Ei:c;var d=l==Ei,p=c==Ei,h=l==c;if(h&&Ro(e)){if(!Ro(t))return!1;s=!0,d=!1}if(h&&!d)return o||(o=new Co),s||Ea(e)?la(e,t,r,n,i,o):Wf(e,t,l,r,n,i,o);if(!(r&$p)){var f=d&&Fa.call(e,"__wrapped__"),g=p&&Fa.call(t,"__wrapped__");if(f||g){var m=f?e.value():e,k=g?t.value():t;return o||(o=new Co),i(m,k,r,n,o)}}return h?(o||(o=new Co),Cp(e,t,r,n,i,o)):!1}const Mp=Bp;function Oa(e,t,r,n,i){return e===t?!0:e==null||t==null||!Cn(e)&&!Cn(t)?e!==e&&t!==t:Mp(e,t,r,n,Oa,i)}const Np=Oa;function Hp(e,t){return Np(e,t)}const zp=Hp,Nt="remoteHub";class Ua{constructor(){this._onDidChange=new u.EventEmitter,this._onDidChangeAny=new u.EventEmitter}static configure(t){t.subscriptions.push(u.workspace.onDidChangeConfiguration(Fe.onConfigurationChanged,Fe))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(t){if(!t.affectsConfiguration(Nt)){this._onDidChangeAny.fire(t);return}this._onDidChangeAny.fire(t),this._onDidChange.fire(t)}get(t,r,n){return n===void 0?u.workspace.getConfiguration(t===void 0?void 0:Nt,r).get(t===void 0?Nt:t):u.workspace.getConfiguration(t===void 0?void 0:Nt,r).get(t===void 0?Nt:t,n)}getAny(t,r,n){return n===void 0?u.workspace.getConfiguration(void 0,r).get(t):u.workspace.getConfiguration(void 0,r).get(t,n)}changed(t,r,n){var i;return(i=t==null?void 0:t.affectsConfiguration(`${Nt}.${r}`,n))!=null?i:!0}inspect(t,r){return u.workspace.getConfiguration(t===void 0?void 0:Nt,r).inspect(t===void 0?Nt:t)}inspectAny(t,r){return u.workspace.getConfiguration(void 0,r).inspect(t)}async migrate(t,r,n){const i=Fe.inspect(t);if(i===void 0)return!1;let o=!1;return i.globalValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.globalValue):i.globalValue,u.ConfigurationTarget.Global),o=!0),i.workspaceValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceValue):i.workspaceValue,u.ConfigurationTarget.Workspace),o=!0),i.workspaceFolderValue!==void 0&&(await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,u.ConfigurationTarget.WorkspaceFolder),o=!0),!o&&n.fallbackValue!==void 0&&(await this.update(r,n.fallbackValue,u.ConfigurationTarget.Global),o=!0),o}async migrateIfMissing(t,r,n){const i=Fe.inspect(t);if(i===void 0)return;const o=Fe.inspect(r);i.globalValue!==void 0&&(o===void 0||o.globalValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.globalValue):i.globalValue,u.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(o===void 0||o.workspaceValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceValue):i.workspaceValue,u.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(o===void 0||o.workspaceFolderValue===void 0)&&await this.update(r,n.migrationFn!=null?n.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,u.ConfigurationTarget.WorkspaceFolder)}name(t){return t}update(t,r,n){return u.workspace.getConfiguration(Nt).update(t,r,n)}updateAny(t,r,n,i){return u.workspace.getConfiguration(void 0,n===u.ConfigurationTarget.Global?void 0:i).update(t,r,n)}updateEffective(t,r){const n=Fe.inspect(t);return n.workspaceFolderValue!==void 0?r===n.workspaceFolderValue?Promise.resolve(void 0):Fe.update(t,r,u.ConfigurationTarget.WorkspaceFolder):n.workspaceValue!==void 0?r===n.workspaceValue?Promise.resolve(void 0):Fe.update(t,r,u.ConfigurationTarget.Workspace):n.globalValue===r||n.globalValue===void 0&&r===n.defaultValue?Promise.resolve(void 0):Fe.update(t,zp(r,n.defaultValue)?void 0:r,u.ConfigurationTarget.Global)}}const Fe=new Ua;var Ti;(function(e){e.HasVirtualFolders="remoteHub:hasVirtualFolders",e.VirtualFolderProviders="remoteHub:virtualFolderProviders"})(Ti||(Ti={}));const Ia=new Map;function Kr(e){return e==="isWeb"?zr:e==="remoteName"?u.env.remoteName:e==="virtualWorkspace"?ta():e.startsWith("config.")?Fe.getAny(e.substr(7)):Ia.get(e)}async function La(e,t){Ia.set(e,t),await u.commands.executeCommand("setContext",e,t)}const mt="";var Xe;(function(e){e.Silent="silent",e.Errors="errors",e.Verbose="verbose",e.Debug="debug"})(Xe||(Xe={}));const $a="RemoteHub",Si=`[${$a}]`,kt=class{static configure(e,t){this._isDebugging=e.extensionMode===u.ExtensionMode.Development,this.level=t}static get level(){return this._level}static set level(e){var t,r;this._level=e,e===Xe.Silent?((t=this.output)==null||t.dispose(),this.output=void 0):this.output=(r=this.output)!=null?r:u.window.createOutputChannel($a)}static get isDebugging(){return this._isDebugging}static debug(e,...t){this.level!==Xe.Debug&&!kt.isDebugging||(kt.isDebugging&&console.log(this.timestamp,Si,e!=null?e:mt,...t),this.output!=null&&this.level===Xe.Debug&&this.output.appendLine(`${this.timestamp} ${e!=null?e:mt}${this.toLoggableParams(!0,t)}`))}static error(e,t,...r){if(!(this.level===Xe.Silent&&!kt.isDebugging)){if(t===void 0){const n=e.stack;if(n){const i=/.*\s*?at\s(.+?)\s/.exec(n);i!=null&&(t=i[1])}}kt.isDebugging&&console.error(this.timestamp,Si,t!=null?t:mt,...r,e),this.output!=null&&this.level!==Xe.Silent&&this.output.appendLine(`${this.timestamp} ${t!=null?t:mt}${this.toLoggableParams(!1,r)}
${e==null?void 0:e.toString()}`)}}static log(e,...t){this.level!==Xe.Verbose&&this.level!==Xe.Debug&&!kt.isDebugging||(kt.isDebugging&&console.log(this.timestamp,Si,e!=null?e:mt,...t),this.output!=null&&(this.level===Xe.Verbose||this.level===Xe.Debug)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:mt}${this.toLoggableParams(!1,t)}`))}static warn(e,...t){this.level===Xe.Silent&&!kt.isDebugging||(kt.isDebugging&&console.warn(this.timestamp,Si,e!=null?e:mt,...t),this.output!=null&&this.level!==Xe.Silent&&this.output.appendLine(`${this.timestamp} ${e!=null?e:mt}${this.toLoggableParams(!1,t)}`))}static showOutputChannel(){var e;(e=this.output)==null||e.show()}static toLoggable(e,t){if(typeof e!="object")return String(e);if(e instanceof u.Uri)return`Uri(${e.toString(!0)})`;try{return JSON.stringify(e,t)}catch{return"<error>"}}static get timestamp(){const e=new Date;return`[${e.toISOString().replace(/T/," ").replace(/\..+/,mt)}:${`00${e.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(e,t){if(t.length===0||e&&this.level!==Xe.Debug&&!kt.isDebugging)return mt;const r=t.map(n=>this.toLoggable(n)).join(", ");return r.length!==0?` \u2014 ${r}`:mt}};let me=kt;me._level=Xe.Silent;class jp{constructor(t){this.menuItem=t}get label(){return`${this.menuItem.icon?`${this.menuItem.icon} `:""}${this.menuItem.title}`}get detail(){return this.menuItem.extension.builtin?"Built-in":this.menuItem.extension.name||this.menuItem.extension.id}async execute(t){return void await u.commands.executeCommand(this.menuItem.command,t)}}var Uo;(function(e){async function t(r,n,i){const o=qp(r).map(l=>new jp(l)),s=u.window.createQuickPick(),a=[];try{return await new Promise(c=>{a.push(s.onDidHide(()=>c(void 0)),s.onDidAccept(()=>{if(s.activeItems.length!==0){const[d]=s.activeItems;c(d)}})),s.title=i,s.placeholder=n,s.items=o,s.show()})}finally{s.dispose(),a.forEach(l=>void l.dispose())}}e.show=t})(Uo||(Uo={}));function qp(e){var t,r,n,i,o;const s=new Map,[,a]=e.extension.id.split(".");for(const c of u.extensions.all){const{name:d,displayName:p,contributes:h}=c.packageJSON;if(!h)continue;const f=(r=(t=h.virtualWorkspaces)==null?void 0:t.menus)==null?void 0:r.continueOn;if(f==null?void 0:f.length){const g=new Map(((n=h.commands)!=null?n:[]).map(m=>[m.command,m]));for(const m of f){if(!m.command)continue;if(s.has(m.command)){me.warn(`Duplicate 'continueOn' menu command: ${m.command}`);continue}const k=g.get(m.command);if(!k){me.warn(`Unable to find 'continueOn' menu command: ${m.command}`);continue}if(!Wp(m.when))continue;const F=(o=(i=m.group)==null?void 0:i.lastIndexOf("@"))!=null?o:-1;s.set(m.command,{extension:{id:d,name:p,builtin:d===a},command:k.command,title:k.title,icon:typeof k.icon=="string"?k.icon:void 0,group:F>0?m.group.substr(0,F):m.group,order:F>0?Number(m.group.substr(F+1)):0,category:k.category})}}}function l(c,d){const p=c.group,h=d.group;if(p!==h){if(!p)return 1;if(!h||p==="navigation")return-1;if(h==="navigation")return 1;const f=p.localeCompare(h);if(f!==0)return f}return c.order<d.order?-1:c.order>d.order?1:c.title.localeCompare(d.title)}return[...s.values()].sort(l)}function Wp(e){if(!e)return!0;function t(r){return r==="isWeb"||r==="remoteName"||r==="virtualWorkspace"||r.startsWith("remoteHub:")||r.startsWith("config.")}return e.split("&&").every(r=>{const n=/^(?:(!)?(\S+)|(\S+)\s?(==|!=|=~)\s?(\S+))$/.exec(r.trim());if(!n)return!0;const[,i,o,s,a,l]=n;if(o){if(o==="false")return!1;if(!t(o))return!0;const c=Kr(o);return i?!c:c}if(s&&a&&l)switch(a){case"==":return!t(s)||!t(l)||Kr(s)==Kr(l);case"!=":return!t(s)||!t(l)||Kr(s)!=Kr(l);case"=~":{if(!t(s))return!0;const c=Kr(s);try{return new RegExp(l.slice(1,-1)).test(String(c!=null?c:""))}catch{return!1}}}return!0})}function*Ga(e,t){for(const r of e)yield*t(r)}function*Vp(e,t){for(const r of e)t(r)&&(yield r)}function*lr(e,t){for(const r of e){const n=t(r);n!=null&&(yield n)}}function Zp(e,t){let r="";const n=e[Symbol.iterator]();let i=n.next();if(i.done)return r;for(;;){const o=i.value.toString();if(i=n.next(),i.done){r+=o;break}r+=o,r+=t}return r}function*ki(e,t){for(const r of e)yield t(r)}function*Kp(...e){for(const t of e)for(const r of t)yield r}function*Qp(e){const t=new Set;for(const r of e)t.has(r)||(t.add(r),yield r)}const Ba=47;function Ct(e){const t=e.path;let r=0,n=-1,i=!0;for(let o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Ba){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)}function e0(e){const t=e.path;if(t.length===1)return"/";let r,n=-1,i=!0;for(let o=t.length-1;o>=1;--o)if(r=t.charCodeAt(o),r===Ba){if(!i){n=o;break}}else i=!1;return n===-1?"/":t.slice(0,n)}function Yp(e){const t=e.path.lastIndexOf("/");return t===-1?e.with({path:"/"}):e.with({path:e.path.substring(0,t)})}function Rn(e,t){return Ma(e,t).path}function Ma(e,t){return t.path.startsWith(e.path)?u.Uri.joinPath(e,t.path.substr(e.path.length)):u.Uri.joinPath(e,t.path)}function Ci(e,t){return typeof t=="string"?(t.startsWith("/")||(t=`/${t}`),An(e,t)&&e.path.substr(t.length+(t.endsWith("/")?0:1)).split("/").length===1):An(e,t)&&e.path.substr(t.path.length+(t.path.endsWith("/")?0:1)).split("/").length===1}function An(e,t){return typeof t=="string"?(t.startsWith("/")||(t=`/${t}`),t.length===1||e.path.startsWith(t.endsWith("/")?t:`${t}/`)):t.scheme===e.scheme&&t.authority===e.authority&&(t.path.length===1||e.path.startsWith(t.path.endsWith("/")?t.path:`${t.path}/`))}const Na=/(?:^|&)originalRoot=([^&]+)/i;var vt;(function(e){e[e.Abort=0]="Abort",e[e.KeepCurrent=1]="KeepCurrent",e[e.DiscardCurrent=2]="DiscardCurrent",e[e.Merge=3]="Merge"})(vt||(vt={}));class Xp{constructor(t,r,n,i){this.providerService=t,this.uri=r,this.name=n,this.provider=i}createRelativeUri(t){return this.providerService.createRelativeUri(this.uri,t)}}const xt=class{constructor(){this._providers=new Map,this._onDidChangeProviders=new u.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new u.EventEmitter,this.disposable=u.Disposable.from(u.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onWorkspaceFoldersChanged(e){if(e.added.length)for(const t of e.added){if(t.uri.scheme!==xt.scheme||this._repositories.has(t.uri.toString()))continue;const r=this.getProvider(t.uri);if(!r)continue;const n=new Xp(this,t.uri,t.name,r);this._repositories.set(t.uri.toString(),n),this._onDidChangeRepositories.fire({added:[n],removed:[]})}if(e.removed.length)for(const t of e.removed){if(t.uri.scheme!==xt.scheme||!this._repositories.has(t.uri.toString()))continue;const r=this._repositories.get(t.uri.toString());r&&(this._repositories.delete(t.uri.toString()),this._onDidChangeRepositories.fire({added:[],removed:[r]}))}La(Ti.HasVirtualFolders,this._repositories.size!==0),La(Ti.VirtualFolderProviders,Zp(Qp(ki(this._repositories.values(),t=>t.provider.id)),","))}get count(){return this._providers.size}get providers(){return[...this._providers.values()]}get repositories(){return[...this._repositories.values()]}get schemes(){return this.providers.map(e=>e.id)}register(e,t,r,n,i){var o;if(this._providers.has(e))throw new Error(`Scheme '${e}' already has a provider registered`);const s={id:e,name:t,api:r,fs:n,uris:i};return this._providers.set(e,s),this._onDidChangeProviders.fire({added:[s],removed:[]}),this.onWorkspaceFoldersChanged({added:(o=u.workspace.workspaceFolders)!=null?o:[],removed:[]}),{dispose:()=>{this._providers.delete(e);const a=[...this._repositories.values()].filter(l=>l.provider.id===e);for(const l of a)this._repositories.delete(l.uri.toString());this._onDidChangeRepositories.fire({added:[],removed:a}),this._onDidChangeProviders.fire({added:[],removed:[s]})}}}getProvider(e){const t=typeof e=="string"?e:this.getProviderScheme(e);return this._providers.get(t)}getProviderScheme(e){const[t]=e.authority.split("+");return t}getApiProvider(e){var t;const r=(t=this.getProvider(e))==null?void 0:t.api;if(r)return r;throw new Error(`Scheme '${this.getProviderScheme(e)}' has no registered provider`)}getFileSystemProvider(e){var t;const r=(t=this.getProvider(e))==null?void 0:t.fs;if(r)return r;throw new Error(`Scheme '${this.getProviderScheme(e)}' has no registered provider`)}getUriHandler(e){var t;const r=(t=this.getProvider(e))==null?void 0:t.uris;if(r)return r;throw new Error(`Scheme '${typeof e=="string"?e:this.getProviderScheme(e)}' has no registered provider`)}findRemoteUrlHandler(e,t){if(t){const r=this.getProvider(t),n=r==null?void 0:r.uris.canOpenRemoteUrl(e);return n!==void 0?{provider:r,urlType:n}:void 0}for(const r of this._providers.values()){const n=r.uris.canOpenRemoteUrl(e);if(n!==void 0)return{provider:r,urlType:n}}}getRemoteWorkspaceSourceProviders(e){var t,r,n,i;return e?(i=(n=(t=this.getProvider(e))==null?void 0:(r=t.api).getRemoteWorkspaceSourceProviders)==null?void 0:n.call(r))!=null?i:[]:[...Ga(this._providers.values(),o=>{var s,a,l;return(l=(a=(s=o.api).getRemoteWorkspaceSourceProviders)==null?void 0:a.call(s))!=null?l:[]})]}async openWorkspaceForRemoteUrl(e,t,r=Be.CurrentWindow){var n;const i=this.findRemoteUrlHandler(e,t);return(n=i==null?void 0:i.provider)==null?void 0:n.uris.openWorkspaceForRemoteUrl(e,r)}createProviderUri(e,t,r){return this.getProviderUri(this.getUriHandler(e).createVirtualUri(xt.baseVirtualWorkspaceUri,t,r))}createRelativeProviderUri(e,t){return this.getProviderUri(this.createRelativeUri(e,t))}createRelativeUri(e,t){const r=this.getProviderRootUri(e);let n=`${r.path}/`;n.endsWith("/")&&(n=n.slice(0,-1));const i=r.with({path:`${r.path}/${t.startsWith("/")?t.substr(1):t}`});return e.scheme===xt.scheme?this.getVirtualUri(i):i}createRelativeVirtualUri(e,t){return this.getVirtualUri(this.createRelativeUri(e,t))}createVirtualUri(e,t,r){return this.getUriHandler(e).createVirtualUri(xt.baseVirtualWorkspaceUri,t,r)}async getBestExternalUri(e,t){var r,n,i,o;const{provider:s,repo:a,HEAD:l,defaultBranch:c,pullRequest:d}=await this.getMetadata(e);switch(t){case dr.Clone:return this.getExternalUri(s.id,{repo:a,clone:!0});case dr.Repository:return this.getExternalUri(s.id,{repo:a});case dr.PullRequest:return d?this.getExternalUri(s.id,{repo:a,pullRequest:d.id}):void 0;case dr.Commit:return this.getExternalUri(s.id,{repo:a,sha:l.sha});case dr.Branch:return this.getExternalUri(s.id,{repo:a,branch:(n=(r=l.branch)==null?void 0:r.name)!=null?n:c.name})}return this.getExternalUri(s.id,{repo:a,...d?{pullRequest:d.id}:l.detached?{sha:l.sha}:{branch:(o=(i=l.branch)==null?void 0:i.name)!=null?o:c.name}})}getExternalUri(e,t){var r,n;return(n=(r=this.getUriHandler(e)).getExternalUri)==null?void 0:n.call(r,t)}getProviderUri(e,t){var r,n,i;if(e.scheme!==xt.scheme)return((r=t==null?void 0:t.original)!=null?r:!0)||!e.query?e:e.with({query:e.query.replace(Na,"")});const o=this.getUriHandler(e),a=((n=o.getProviderUri)!=null?n:l=>l.with({scheme:this.getProviderScheme(l)}))(e);return((i=t==null?void 0:t.original)!=null?i:!0)?a.with({query:`${a.query?`${a.query}&`:""}originalRoot=${encodeURIComponent(o.getProviderRootUri(e).toString(!1))}`}):a}getProviderRootUri(e){return e=this.getProviderUri(e),this.getUriHandler(e).getProviderRootUri(e)}getRelativeFilePath(e,t){return t=this.getProviderUri(t),this.getUriHandler(t).getRelativeFilePath(e,t)}getVirtualUri(e){var t,r,n;if(e.scheme===xt.scheme)return e;let i;const o=e.query?Na.exec(e.query):void 0;if(o){const[,s]=o;i=Ma(u.Uri.parse(decodeURIComponent(s)),e)}else i=e.with({scheme:xt.scheme});return(n=(r=(t=this.getUriHandler(e)).getVirtualUri)==null?void 0:r.call(t,e,i))!=null?n:i}getVirtualRootUri(e){return this.getVirtualUri(this.getProviderRootUri(e))}getVirtualWorkspaceUri(e){var t;return(t=u.workspace.getWorkspaceFolder(this.getVirtualUri(e)))==null?void 0:t.uri}createIGitRepository(e,t,r,n){var i,o;return(o=(i=this.getApiProvider(e)).createIGitRepository)==null?void 0:o.call(i,e,t,r,n)}getMetadata(e){return this.getApiProvider(e).getMetadata(e)}async clone(e){const t=await this.getBestExternalUri(e,dr.Clone);if(!t)throw new Error("No url found for clone");if(zr)return void u.env.openExternal(u.Uri.parse(`${u.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(t.toString(!0))}`));try{const r=u.extensions.getExtension("vscode.git");if(r)await(r==null?void 0:r.activate()),await u.commands.executeCommand("git.clone",t.toString(!0));else throw new Error("Git extension not found")}catch(r){me.error(r,"Unable to clone repository")}}createBranch(e,t,r,n){return this.getApiProvider(e).createBranch(e,t,r,n)}createCommit(e,t,r,n){return this.getApiProvider(e).createCommit(e,t,r,n)}createPullRequest(e,t,r,n,i){return this.getApiProvider(e).createPullRequest(e,t,r,n,i)}fetch(e,t){return this.getApiProvider(e).fetch(e,t)}fork(e){return this.getApiProvider(e).fork(e)}getBranches(e,t){return this.getApiProvider(e).getBranches(e,t)}getCommit(e,t){return this.getApiProvider(e).getCommit(e,t)}getCommitOperations(e,t,r){let n;return(r==null?void 0:r.staged)?(n=t.getStagedChanges(e),n.length===0&&r.staged==="auto"&&(n=t.getChanges(e))):n=t.getChanges(e),this.getApiProvider(e).getCommitOperations(e,n,t)}getCommits(e,t){var r;return(r=this.getApiProvider(e))==null?void 0:r.getCommits(e,t)}getFileContent(e,t,r){return this.getApiProvider(e).getFileContent(e,t,r)}getFork(e){return this.getApiProvider(e).getFork(e)}async getIncomingChanges(e){var t,r,n;return(n=(r=(t=this.getApiProvider(e)).getIncomingChanges)==null?void 0:r.call(t,e))!=null?n:[]}getPullRequest(e,t){return this.getApiProvider(e).getPullRequest(e,t)}getTags(e,t){return this.getApiProvider(e).getTags(e,t)}async getTarGz(e,t){var r,n;return(n=(r=this.getApiProvider(e)).getTarGz)==null?void 0:n.call(r,e,t)}pushCommit(e,t,r,n){return this.getApiProvider(e).pushCommit(e,t,r,n)}switchTo(e,t,r){return this.getApiProvider(e).switchTo(e,t,r)}sync(e,t,r){return this.getApiProvider(e).sync(e,t,{conflictResolution:0,...r})}stat(e){return this.getFileSystemProvider(e).stat(e)}readDirectory(e){return this.getFileSystemProvider(e).readDirectory(e)}readFile(e){return this.getFileSystemProvider(e).readFile(e)}provideFileSearchResults(e,t,r){return this.getFileSystemProvider(t.folder).provideFileSearchResults(e,t,r)}provideTextSearchResults(e,t,r,n){return this.getFileSystemProvider(t.folder).provideTextSearchResults(e,t,r,n)}};let He=xt;He.scheme="vscode-vfs",He.baseVirtualWorkspaceUri=u.Uri.parse(`${xt.scheme}://`);var ur;(function(e){e[e.Repository=0]="Repository",e[e.PullRequest=1]="PullRequest"})(ur||(ur={}));var dr;(function(e){e[e.Clone=-1]="Clone",e[e.Repository=0]="Repository",e[e.PullRequest=1]="PullRequest",e[e.Branch=2]="Branch",e[e.Commit=3]="Commit"})(dr||(dr={}));var ze;(function(e){e[e.Repository=0]="Repository",e[e.PullRequest=1]="PullRequest",e[e.Branch=2]="Branch",e[e.Commit=3]="Commit",e[e.File=4]="File"})(ze||(ze={}));class Ha extends Error{constructor(t){super(t.message);this.original=t,Error.captureStackTrace(this,Ha)}}class Dn extends Error{constructor(t,r){super(t.message);this.original=t,this.name=r,Error.captureStackTrace(this,Dn)}}class Pn extends Error{constructor(t){super(t);Error.captureStackTrace(this,Pn)}}class Ar extends Error{constructor(t,r){super(t.message);this.original=t,this.duplicate=r,Error.captureStackTrace(this,Ar)}}class xi extends Error{constructor(t){super(t.message);this.original=t,Error.captureStackTrace(this,xi)}}class Io extends Error{constructor(t=!1){super(t?"Unable to synchronize the repository":"Unable to fetch the repository");Error.captureStackTrace(this,Io)}}class Ri extends Error{constructor(){super("Sync operation will result in conflicts");Error.captureStackTrace(this,Ri)}}var Be;(function(e){e.CurrentWindow="currentWindow",e.NewWindow="newWindow",e.AddToWorkspace="addToWorkspace"})(Be||(Be={}));var Fn;(function(e){e[e.Open=0]="Open",e[e.Closed=1]="Closed",e[e.Merged=2]="Merged"})(Fn||(Fn={}));var Rt;(function(e){e[e.Commit=0]="Commit",e[e.Tag=1]="Tag"})(Rt||(Rt={}));var rt;(function(e){e[e.Admin=100]="Admin",e[e.Maintain=40]="Maintain",e[e.Write=30]="Write",e[e.Triage=20]="Triage",e[e.Read=10]="Read",e[e.None=0]="None"})(rt||(rt={}));class za{constructor(t){this.defaultDelay=t}dispose(){this.cancelTimeout()}debounce(t,r=this.defaultDelay){return this.task=t,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((n,i)=>{this.resolver=n,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const n=this.task;return this.task=void 0,n()}})),this.timeout=setTimeout(()=>{var n;this.timeout=void 0,(n=this.resolver)==null||n.call(this,void 0)},r),this.completionPromise}cancel(){var t;this.cancelTimeout(),this.completionPromise&&((t=this.rejecter)==null||t.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}const Ai=(0,y.LV)(),Lo=Symbol("QuickPickGoBack");var $o;(function(e){async function t(r,n,i,o,s){const a=r.getRemoteWorkspaceSourceProviders();let l;a.length===0?l=[]:l=a.map(h=>new ja(h));const c=u.window.createQuickPick(),d=[];let p=n;try{for(;;){const h=await new Promise(f=>{d.push(c.onDidHide(()=>f(void 0)),c.onDidChangeValue(g=>{g=g.trim(),g.length===0?(c.ignoreFocusOut=!1,c.items=l):(c.ignoreFocusOut=!0,c.items=[new Go(r,g),...l])}),c.onDidAccept(()=>{if(c.activeItems.length!==0){const[g]=c.activeItems;g.validate()&&f(g)}}),c.onDidChangeActive(()=>{if(p!==void 0||!(s==null?void 0:s.allowAddToWorkspace))return;const[g]=c.activeItems;let m=!0;if(g===void 0?m=Boolean(c.value):m=g instanceof Go,m){if(c.buttons.length===1)return;c.buttons=[Qr.AddToWorkspace]}else{if(c.buttons.length===0)return;c.buttons=[]}}),c.onDidTriggerButton(g=>{if(g===Qr.AddToWorkspace){const[m]=c.activeItems;if(!(m instanceof Go))return;m.validate()&&(p=Be.AddToWorkspace,f(m))}})),c.title=o,c.placeholder=i,c.matchOnDescription=!0,c.items=l,c.sortByLabel=!1,c.show()});if(h instanceof ja){const f=await h.show(p,h.type===ur.PullRequest?Ai("pick pr","Choose a pull request"):Ai("pick repo","Choose a repository"),o,s);if(f===Lo)continue;return f}return[h,p]}}finally{c.dispose(),d.forEach(h=>void h.dispose())}}e.show=t})($o||($o={}));class ja{constructor(t){this.provider=t}get label(){return`${this.provider.icon?`${this.provider.icon} `:""}${this.provider.type===ur.PullRequest?Ai("open pr from","Open Pull Request from {0}",this.provider.name):Ai("open repo from","Open Repository from {0}",this.provider.name)}`}get type(){return this.provider.type}async show(t,r,n,i){const o=u.window.createQuickPick(),s=new za(500),a=[s];async function l(f,g,m){return(await f.provideSources(g,m)).map(F=>({label:`${f.type===ur.PullRequest?"$(git-pull-request) ":"$(repo) "}${F.name}`,description:F.description,detail:F.detail,url:F.url}))}const c=l(this.provider,void 0,{sort:"updated"});let d=t,p,h=!1;try{const f=await new Promise(g=>{a.push(o.onDidHide(()=>g(void 0)),o.onDidChangeValue(m=>{h=!1,m=m.trim(),o.busy=!0;let k=m,F;const A=m.indexOf("/");A!==-1&&(F=m.substring(0,A),k=m.substr(A+1));const H=s.debounce(m?()=>l(this.provider,k,{user:F,sort:"stars"}):()=>c);p===void 0&&(p=H.then(async $=>{p=void 0;const Q=o.activeItems;o.items=$!=null?$:await c,h&&Q.length!==0&&(o.activeItems=o.items.filter(ue=>Q.some(ce=>ce.url===ue.url))),o.busy=!1}))}),o.onDidAccept(()=>{if(o.activeItems.length!==0){const[m]=o.activeItems;g(m)}}),o.onDidChangeActive(()=>{if(h=o.activeItems.length!==0,d!==void 0||!(i==null?void 0:i.allowAddToWorkspace))return;const[m]=o.activeItems;if(m===void 0){if(o.buttons.length===1)return;o.buttons=[u.QuickInputButtons.Back]}else{if(o.buttons.length===2)return;o.buttons=[u.QuickInputButtons.Back,Qr.AddToWorkspace]}}),o.onDidTriggerButton(m=>{if(m===Qr.AddToWorkspace){const[k]=o.activeItems;if(k===void 0)return;d=Be.AddToWorkspace,g(k)}}),o.onDidTriggerButton(()=>g(Lo))),o.title=n,o.placeholder=r,o.matchOnDetail=!0,o.ignoreFocusOut=!0,o.sortByLabel=!1,o.buttons=[u.QuickInputButtons.Back],o.busy=!0,o.show(),p=s.debounce(async()=>c,0).then(m=>{p=void 0;const k=o.activeItems;o.items=m!=null?m:[],h&&k.length!==0&&(o.activeItems=o.items.filter(F=>k.some(A=>A.url===F.url))),o.busy=!1})});return f===Lo?f:[f,d]}finally{o.dispose(),a.forEach(f=>void f.dispose())}}validate(){return!0}}class Go{constructor(t,r){this.url=r,this.alwaysShow=!0,this.handler=t.findRemoteUrlHandler(r)}get label(){if(this.handler)switch(this.handler.urlType){case ze.PullRequest:return`Open ${this.handler.provider.name} Pull Request`;case ze.Branch:return`Open ${this.handler.provider.name} Repository to Branch`;case ze.Commit:return`Open ${this.handler.provider.name} Repository to Commit`;case ze.File:return`Open ${this.handler.provider.name} Repository to File`;default:return`Open ${this.handler.provider.name} Repository`}return"Enter a Remote Url"}get description(){return this.url}validate(){return this.handler!==void 0}}var Qr;(function(e){e.AddToWorkspace={iconPath:new u.ThemeIcon("plus"),tooltip:"Add to Workspace"}})(Qr||(Qr={}));const Je=(0,y.LV)();function Jp(e,t,r,n){async function i(s){const[a,l]=await $o.show(t,s,Je("open repo placeholder","Enter a remote url, or select a remote provider"),s===Be.AddToWorkspace?Je("open repo title add to workspace","Add Remote Repository to Workspace"):Je("open repo title current window","Open Remote Repository"),{allowAddToWorkspace:ta()});if(!!a)try{await t.openWorkspaceForRemoteUrl(a.url,void 0,l!=null?l:s)}catch(c){if(c instanceof Dn){ea(c.name);return}me.error(c)}}async function o(s,a,l){if(l==null?void 0:l.workspaceFolder){const d=r.getForWorkspaceFolder(l.workspaceFolder,a);if(d!==void 0)return d}const c=a?r.getForWorkspace(a):r.getForWorkspace();if(c.length!==0){if(c.length>1){const d=await u.window.showQuickPick(c.map(p=>({label:p.name,description:p.data.provider.name,folder:p})),{placeHolder:s});return d?d.folder:void 0}return c[0]}}return[u.commands.registerCommand("remoteHub.openRepository",()=>i()),u.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>i(Be.AddToWorkspace)),u.commands.registerCommand("remoteHub.continueOn",async()=>{const s=await o(Je("continue on choose repository placeholder","Choose which repository to continue elsewhere"));if(s===void 0)return;const a=await Uo.show(e,Je("continue on placeholder","Choose how you would like to continue working"),Je("continue on title","Continue '{0}' on",s.data.name));if(!a)return;if(n.hasChanges(s.folderUri)){const c={title:Je("continue","Continue")},d={title:Je("cancel","Cancel"),isCloseAffordance:!0};if(await u.window.showWarningMessage(Je("continue on uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them from elsewhere.`),{modal:!0},c,d)!==c)return}const l=t.getExternalUri(s.data.provider.id,{repo:s.data.repo});await a.execute({provider:s.data.provider,workspaceFolder:s.folderUri,name:s.data.name,url:l==null?void 0:l.toString(!0)})}),u.commands.registerCommand("remoteHub.openOnDesktop",async s=>{if(!zr)return;const a=await o(Je("continue on desktop choose repository placeholder","Choose which repository to open on the desktop"),void 0,s);if(a===void 0)return;const l=await t.getBestExternalUri(a.folderUri);l!==void 0&&u.env.openExternal(u.Uri.parse(`${u.env.uriScheme}://${e.extension.id}/open?url=${encodeURIComponent(l.toString(!0))}`))}),u.commands.registerCommand("remoteHub.openOnWeb",async s=>{if(zr)return;const a=await o(Je("continue on web choose repository placeholder","Choose which repository to open on the web"),void 0,s);if(a===void 0)return;const l=await t.getBestExternalUri(a.folderUri);l!==void 0&&u.env.openExternal(l.with({authority:"vscode.dev",path:`${l.authority}${l.path}`}))}),u.commands.registerCommand("remoteHub.openOnRemote",async s=>{const{provider:a,...l}=s,c=t.getExternalUri(a.id,l);if(c){await u.env.openExternal(c);return}u.window.showErrorMessage(Je("open on remote command provider not supported","Unable to open the resource on {0}",s.provider.name))}),u.commands.registerCommand("remoteHub.clone",async s=>{const a=await o(Je("clone placeholder","Choose which repository to clone"),void 0,s);if(a!==void 0){if(s===void 0&&n.hasChanges(a.folderUri)){const l={title:Je("continue","Continue")},c={title:Je("cancel","Cancel"),isCloseAffordance:!0};if(await u.window.showWarningMessage(Je("clone uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},l,c)!==l)return}await t.clone(a.folderUri)}}),u.commands.registerCommand("remoteHub.openInCodespaces",()=>{u.env.openExternal(u.Uri.parse("https://github.dev"))})]}function fr(e){return e}async function Bo(e,t){return u.commands.executeCommand(e,t)}class eg{constructor(){this._timeout=0,this._disposable=Fe.onDidChange(this.onConfigurationChanged,this),this.maybeQueueFetch()}dispose(){this._disposable.dispose(),this._timeout&&clearTimeout(this._timeout)}get config(){var t;if(this._config===void 0){const r=Fe.get("autoFetch");this._config={enabled:(t=r.enabled)!=null?t:!0,interval:r.interval*1e3}}return this._config}onConfigurationChanged(t){!Fe.changed(t,"autoFetch")||(this._config=void 0,this.maybeQueueFetch())}async fetchAll(){try{await Bo("remoteHub.fetchAll",{silent:!0})}catch(t){me.error(t,"Autofetch failed")}this.maybeQueueFetch()}maybeQueueFetch(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),!!this.config.enabled&&(this._timeout=setTimeout(()=>this.fetchAll(),this.config.interval))}}class tg extends Error{constructor(t){super(t);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var rg=Re(778),ng=Re.n(rg);const ig=ng()(e=>console.warn(e));class hr extends Error{constructor(t,r,n){super(t);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return ig(new tg("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}var og=Re(9669),sg=Re.n(og);async function Di(e){return(await Promise.resolve().then(Re.t.bind(Re,6417,23))).createHash("sha1").update(e).digest("base64")}function Ht(){}Ht.prototype={diff:function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=n.callback;typeof n=="function"&&(i=n,n={}),this.options=n;var o=this;function s(m){return i?(setTimeout(function(){i(void 0,m)},0),!0):m}t=this.castInput(t),r=this.castInput(r),t=this.removeEmpty(this.tokenize(t)),r=this.removeEmpty(this.tokenize(r));var a=r.length,l=t.length,c=1,d=a+l,p=[{newPos:-1,components:[]}],h=this.extractCommon(p[0],r,t,0);if(p[0].newPos+1>=a&&h+1>=l)return s([{value:this.join(r),count:r.length}]);function f(){for(var m=-1*c;m<=c;m+=2){var k=void 0,F=p[m-1],A=p[m+1],H=(A?A.newPos:0)-m;F&&(p[m-1]=void 0);var $=F&&F.newPos+1<a,Q=A&&0<=H&&H<l;if(!$&&!Q){p[m]=void 0;continue}if(!$||Q&&F.newPos<A.newPos?(k=cg(A),o.pushComponent(k.components,void 0,!0)):(k=F,k.newPos++,o.pushComponent(k.components,!0,void 0)),H=o.extractCommon(k,r,t,m),k.newPos+1>=a&&H+1>=l)return s(ag(o,k.components,r,t,o.useLongestToken));p[m]=k}c++}if(i)(function m(){setTimeout(function(){if(c>d)return i();f()||m()},0)})();else for(;c<=d;){var g=f();if(g)return g}},pushComponent:function(t,r,n){var i=t[t.length-1];i&&i.added===r&&i.removed===n?t[t.length-1]={count:i.count+1,added:r,removed:n}:t.push({count:1,added:r,removed:n})},extractCommon:function(t,r,n,i){for(var o=r.length,s=n.length,a=t.newPos,l=a-i,c=0;a+1<o&&l+1<s&&this.equals(r[a+1],n[l+1]);)a++,l++,c++;return c&&t.components.push({count:c}),t.newPos=a,l},equals:function(t,r){return this.options.comparator?this.options.comparator(t,r):t===r||this.options.ignoreCase&&t.toLowerCase()===r.toLowerCase()},removeEmpty:function(t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(t[n]);return r},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};function ag(e,t,r,n,i){for(var o=0,s=t.length,a=0,l=0;o<s;o++){var c=t[o];if(c.removed){if(c.value=e.join(n.slice(l,l+c.count)),l+=c.count,o&&t[o-1].added){var p=t[o-1];t[o-1]=t[o],t[o]=p}}else{if(!c.added&&i){var d=r.slice(a,a+c.count);d=d.map(function(f,g){var m=n[l+g];return m.length>f.length?m:f}),c.value=e.join(d)}else c.value=e.join(r.slice(a,a+c.count));a+=c.count,c.added||(l+=c.count)}}var h=t[s-1];return s>1&&typeof h.value=="string"&&(h.added||h.removed)&&e.equals("",h.value)&&(t[s-2].value+=h.value,t.pop()),t}function cg(e){return{newPos:e.newPos,components:e.components.slice(0)}}var lg=new Ht;function t0(e,t,r){return lg.diff(e,t,r)}function qa(e,t){if(typeof e=="function")t.callback=e;else if(e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var Wa=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Va=/\S/,Pi=new Ht;Pi.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!Va.test(e)&&!Va.test(t)},Pi.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),r=0;r<t.length-1;r++)!t[r+1]&&t[r+2]&&Wa.test(t[r])&&Wa.test(t[r+2])&&(t[r]+=t[r+2],t.splice(r+1,2),r--);return t};function r0(e,t,r){return r=qa(r,{ignoreWhitespace:!0}),Pi.diff(e,t,r)}function n0(e,t,r){return Pi.diff(e,t,r)}var Fi=new Ht;Fi.tokenize=function(e){var t=[],r=e.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var n=0;n<r.length;n++){var i=r[n];n%2&&!this.options.newlineIsToken?t[t.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),t.push(i))}return t};function ug(e,t,r){return Fi.diff(e,t,r)}function i0(e,t,r){var n=qa(r,{ignoreWhitespace:!0});return Fi.diff(e,t,n)}var Za=new Ht;Za.tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)};function o0(e,t,r){return Za.diff(e,t,r)}var Ka=new Ht;Ka.tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};function s0(e,t,r){return Ka.diff(e,t,r)}function Oi(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Oi=function(t){return typeof t}:Oi=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(e)}function zt(e){return dg(e)||fg(e)||hg(e)||pg()}function dg(e){if(Array.isArray(e))return Mo(e)}function fg(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function hg(e,t){if(!!e){if(typeof e=="string")return Mo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mo(e,t)}}function Mo(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pg(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gg=Object.prototype.toString,Yr=new Ht;Yr.useLongestToken=!0,Yr.tokenize=Fi.tokenize,Yr.castInput=function(e){var t=this.options,r=t.undefinedReplacement,n=t.stringifyReplacer,i=n===void 0?function(o,s){return typeof s=="undefined"?r:s}:n;return typeof e=="string"?e:JSON.stringify(No(e,null,null,i),i,"  ")},Yr.equals=function(e,t){return Ht.prototype.equals.call(Yr,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};function a0(e,t,r){return Yr.diff(e,t,r)}function No(e,t,r,n,i){t=t||[],r=r||[],n&&(e=n(i,e));var o;for(o=0;o<t.length;o+=1)if(t[o]===e)return r[o];var s;if(gg.call(e)==="[object Array]"){for(t.push(e),s=new Array(e.length),r.push(s),o=0;o<e.length;o+=1)s[o]=No(e[o],t,r,n,i);return t.pop(),r.pop(),s}if(e&&e.toJSON&&(e=e.toJSON()),Oi(e)==="object"&&e!==null){t.push(e),s={},r.push(s);var a=[],l;for(l in e)e.hasOwnProperty(l)&&a.push(l);for(a.sort(),o=0;o<a.length;o+=1)l=a[o],s[l]=No(e[l],t,r,n,l);t.pop(),r.pop()}else s=e;return s}var Ui=new Ht;Ui.tokenize=function(e){return e.slice()},Ui.join=Ui.removeEmpty=function(e){return e};function c0(e,t,r){return Ui.diff(e,t,r)}function Ho(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.split(/\r\n|[\n\v\f\r\x85]/),n=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function s(){var c={};for(i.push(c);o<r.length;){var d=r[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(d))break;var p=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(d);p&&(c.index=p[1]),o++}for(a(c),a(c),c.hunks=[];o<r.length;){var h=r[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(h))break;if(/^@@/.test(h))c.hunks.push(l());else{if(h&&t.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(h));o++}}}function a(c){var d=/^(---|\+\+\+)\s+(.*)$/.exec(r[o]);if(d){var p=d[1]==="---"?"old":"new",h=d[2].split("	",2),f=h[0].replace(/\\\\/g,"\\");/^".*"$/.test(f)&&(f=f.substr(1,f.length-2)),c[p+"FileName"]=f,c[p+"Header"]=(h[1]||"").trim(),o++}}function l(){var c=o,d=r[o++],p=d.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),h={oldStart:+p[1],oldLines:typeof p[2]=="undefined"?1:+p[2],newStart:+p[3],newLines:typeof p[4]=="undefined"?1:+p[4],lines:[],linedelimiters:[]};h.oldLines===0&&(h.oldStart+=1),h.newLines===0&&(h.newStart+=1);for(var f=0,g=0;o<r.length&&!(r[o].indexOf("--- ")===0&&o+2<r.length&&r[o+1].indexOf("+++ ")===0&&r[o+2].indexOf("@@")===0);o++){var m=r[o].length==0&&o!=r.length-1?" ":r[o][0];if(m==="+"||m==="-"||m===" "||m==="\\")h.lines.push(r[o]),h.linedelimiters.push(n[o]||`
`),m==="+"?f++:m==="-"?g++:m===" "&&(f++,g++);else break}if(!f&&h.newLines===1&&(h.newLines=0),!g&&h.oldLines===1&&(h.oldLines=0),t.strict){if(f!==h.newLines)throw new Error("Added line count did not match for hunk at line "+(c+1));if(g!==h.oldLines)throw new Error("Removed line count did not match for hunk at line "+(c+1))}return h}for(;o<r.length;)s();return i}function mg(e,t,r){var n=!0,i=!1,o=!1,s=1;return function a(){if(n&&!o){if(i?s++:n=!1,e+s<=r)return s;o=!0}if(!i)return o||(n=!0),t<=e-s?-s++:(i=!0,a())}}function vg(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof t=="string"&&(t=Ho(t)),Array.isArray(t)){if(t.length>1)throw new Error("applyPatch only works with a single input.");t=t[0]}var n=e.split(/\r\n|[\n\v\f\r\x85]/),i=e.match(/\r\n|[\n\v\f\r\x85]/g)||[],o=t.hunks,s=r.compareLine||function(or,ut,Et,Tt){return ut===Tt},a=0,l=r.fuzzFactor||0,c=0,d=0,p,h;function f(or,ut){for(var Et=0;Et<or.lines.length;Et++){var Tt=or.lines[Et],yn=Tt.length>0?Tt[0]:" ",To=Tt.length>0?Tt.substr(1):Tt;if(yn===" "||yn==="-"){if(!s(ut+1,n[ut],yn,To)&&(a++,a>l))return!1;ut++}}return!0}for(var g=0;g<o.length;g++){for(var m=o[g],k=n.length-m.oldLines,F=0,A=d+m.oldStart-1,H=mg(A,c,k);F!==void 0;F=H())if(f(m,A+F)){m.offset=d+=F;break}if(F===void 0)return!1;c=m.offset+m.oldStart+m.oldLines}for(var $=0,Q=0;Q<o.length;Q++){var ue=o[Q],ce=ue.oldStart+ue.offset+$-1;$+=ue.newLines-ue.oldLines;for(var be=0;be<ue.lines.length;be++){var ye=ue.lines[be],fe=ye.length>0?ye[0]:" ",ve=ye.length>0?ye.substr(1):ye,at=ue.linedelimiters[be];if(fe===" ")ce++;else if(fe==="-")n.splice(ce,1),i.splice(ce,1);else if(fe==="+")n.splice(ce,0,ve),i.splice(ce,0,at),ce++;else if(fe==="\\"){var pt=ue.lines[be-1]?ue.lines[be-1][0]:null;pt==="+"?p=!0:pt==="-"&&(h=!0)}}}if(p)for(;!n[n.length-1];)n.pop(),i.pop();else h&&(n.push(""),i.push(`
`));for(var gt=0;gt<n.length-1;gt++)n[gt]=n[gt]+i[gt];return n.join("")}function l0(e,t){typeof e=="string"&&(e=Ho(e));var r=0;function n(){var i=e[r++];if(!i)return t.complete();t.loadFile(i,function(o,s){if(o)return t.complete(o);var a=vg(s,i,t);t.patched(i,a,function(l){if(l)return t.complete(l);n()})})}n()}function Qa(e,t,r,n,i,o,s){s||(s={}),typeof s.context=="undefined"&&(s.context=4);var a=ug(r,n,s);a.push({value:"",lines:[]});function l(F){return F.map(function(A){return" "+A})}for(var c=[],d=0,p=0,h=[],f=1,g=1,m=function(A){var H=a[A],$=H.lines||H.value.replace(/\n$/,"").split(`
`);if(H.lines=$,H.added||H.removed){var Q;if(!d){var ue=a[A-1];d=f,p=g,ue&&(h=s.context>0?l(ue.lines.slice(-s.context)):[],d-=h.length,p-=h.length)}(Q=h).push.apply(Q,zt($.map(function(gt){return(H.added?"+":"-")+gt}))),H.added?g+=$.length:f+=$.length}else{if(d)if($.length<=s.context*2&&A<a.length-2){var ce;(ce=h).push.apply(ce,zt(l($)))}else{var be,ye=Math.min($.length,s.context);(be=h).push.apply(be,zt(l($.slice(0,ye))));var fe={oldStart:d,oldLines:f-d+ye,newStart:p,newLines:g-p+ye,lines:h};if(A>=a.length-2&&$.length<=s.context){var ve=/\n$/.test(r),at=/\n$/.test(n),pt=$.length==0&&h.length>fe.oldLines;!ve&&pt&&r.length>0&&h.splice(fe.oldLines,0,"\\ No newline at end of file"),(!ve&&!pt||!at)&&h.push("\\ No newline at end of file")}c.push(fe),d=0,p=0,h=[]}f+=$.length,g+=$.length}},k=0;k<a.length;k++)m(k);return{oldFileName:e,newFileName:t,oldHeader:i,newHeader:o,hunks:c}}function wg(e){var t=[];e.oldFileName==e.newFileName&&t.push("Index: "+e.oldFileName),t.push("==================================================================="),t.push("--- "+e.oldFileName+(typeof e.oldHeader=="undefined"?"":"	"+e.oldHeader)),t.push("+++ "+e.newFileName+(typeof e.newHeader=="undefined"?"":"	"+e.newHeader));for(var r=0;r<e.hunks.length;r++){var n=e.hunks[r];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),t.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),t.push.apply(t,n.lines)}return t.join(`
`)+`
`}function bg(e,t,r,n,i,o,s){return wg(Qa(e,t,r,n,i,o,s))}function yg(e,t,r,n,i,o){return bg(e,e,t,r,n,i,o)}function _g(e,t){return e.length!==t.length?!1:zo(e,t)}function zo(e,t){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Eg(e){var t=qo(e.lines),r=t.oldLines,n=t.newLines;r!==void 0?e.oldLines=r:delete e.oldLines,n!==void 0?e.newLines=n:delete e.newLines}function u0(e,t,r){e=Ya(e,r),t=Ya(t,r);var n={};(e.index||t.index)&&(n.index=e.index||t.index),(e.newFileName||t.newFileName)&&(Xa(e)?Xa(t)?(n.oldFileName=Ii(n,e.oldFileName,t.oldFileName),n.newFileName=Ii(n,e.newFileName,t.newFileName),n.oldHeader=Ii(n,e.oldHeader,t.oldHeader),n.newHeader=Ii(n,e.newHeader,t.newHeader)):(n.oldFileName=e.oldFileName,n.newFileName=e.newFileName,n.oldHeader=e.oldHeader,n.newHeader=e.newHeader):(n.oldFileName=t.oldFileName||e.oldFileName,n.newFileName=t.newFileName||e.newFileName,n.oldHeader=t.oldHeader||e.oldHeader,n.newHeader=t.newHeader||e.newHeader)),n.hunks=[];for(var i=0,o=0,s=0,a=0;i<e.hunks.length||o<t.hunks.length;){var l=e.hunks[i]||{oldStart:Infinity},c=t.hunks[o]||{oldStart:Infinity};if(Ja(l,c))n.hunks.push(ec(l,s)),i++,a+=l.newLines-l.oldLines;else if(Ja(c,l))n.hunks.push(ec(c,a)),o++,s+=c.newLines-c.oldLines;else{var d={oldStart:Math.min(l.oldStart,c.oldStart),oldLines:0,newStart:Math.min(l.newStart+s,c.oldStart+a),newLines:0,lines:[]};Tg(d,l.oldStart,l.lines,c.oldStart,c.lines),o++,i++,n.hunks.push(d)}}return n}function Ya(e,t){if(typeof e=="string"){if(/^@@/m.test(e)||/^Index:/m.test(e))return Ho(e)[0];if(!t)throw new Error("Must provide a base reference or pass in a patch");return Qa(void 0,void 0,t,e)}return e}function Xa(e){return e.newFileName&&e.newFileName!==e.oldFileName}function Ii(e,t,r){return t===r?t:(e.conflict=!0,{mine:t,theirs:r})}function Ja(e,t){return e.oldStart<t.oldStart&&e.oldStart+e.oldLines<t.oldStart}function ec(e,t){return{oldStart:e.oldStart,oldLines:e.oldLines,newStart:e.newStart+t,newLines:e.newLines,lines:e.lines}}function Tg(e,t,r,n,i){var o={offset:t,lines:r,index:0},s={offset:n,lines:i,index:0};for(rc(e,o,s),rc(e,s,o);o.index<o.lines.length&&s.index<s.lines.length;){var a=o.lines[o.index],l=s.lines[s.index];if((a[0]==="-"||a[0]==="+")&&(l[0]==="-"||l[0]==="+"))Sg(e,o,s);else if(a[0]==="+"&&l[0]===" "){var c;(c=e.lines).push.apply(c,zt(Dr(o)))}else if(l[0]==="+"&&a[0]===" "){var d;(d=e.lines).push.apply(d,zt(Dr(s)))}else a[0]==="-"&&l[0]===" "?tc(e,o,s):l[0]==="-"&&a[0]===" "?tc(e,s,o,!0):a===l?(e.lines.push(a),o.index++,s.index++):jo(e,Dr(o),Dr(s))}nc(e,o),nc(e,s),Eg(e)}function Sg(e,t,r){var n=Dr(t),i=Dr(r);if(ic(n)&&ic(i)){if(zo(n,i)&&oc(r,n,n.length-i.length)){var o;(o=e.lines).push.apply(o,zt(n));return}else if(zo(i,n)&&oc(t,i,i.length-n.length)){var s;(s=e.lines).push.apply(s,zt(i));return}}else if(_g(n,i)){var a;(a=e.lines).push.apply(a,zt(n));return}jo(e,n,i)}function tc(e,t,r,n){var i=Dr(t),o=kg(r,i);if(o.merged){var s;(s=e.lines).push.apply(s,zt(o.merged))}else jo(e,n?o:i,n?i:o)}function jo(e,t,r){e.conflict=!0,e.lines.push({conflict:!0,mine:t,theirs:r})}function rc(e,t,r){for(;t.offset<r.offset&&t.index<t.lines.length;){var n=t.lines[t.index++];e.lines.push(n),t.offset++}}function nc(e,t){for(;t.index<t.lines.length;){var r=t.lines[t.index++];e.lines.push(r)}}function Dr(e){for(var t=[],r=e.lines[e.index][0];e.index<e.lines.length;){var n=e.lines[e.index];if(r==="-"&&n[0]==="+"&&(r="+"),r===n[0])t.push(n),e.index++;else break}return t}function kg(e,t){for(var r=[],n=[],i=0,o=!1,s=!1;i<t.length&&e.index<e.lines.length;){var a=e.lines[e.index],l=t[i];if(l[0]==="+")break;if(o=o||a[0]!==" ",n.push(l),i++,a[0]==="+")for(s=!0;a[0]==="+";)r.push(a),a=e.lines[++e.index];l.substr(1)===a.substr(1)?(r.push(a),e.index++):s=!0}if((t[i]||"")[0]==="+"&&o&&(s=!0),s)return r;for(;i<t.length;)n.push(t[i++]);return{merged:n,changes:r}}function ic(e){return e.reduce(function(t,r){return t&&r[0]==="-"},!0)}function oc(e,t,r){for(var n=0;n<r;n++){var i=t[t.length-r+n].substr(1);if(e.lines[e.index+n]!==" "+i)return!1}return e.index+=r,!0}function qo(e){var t=0,r=0;return e.forEach(function(n){if(typeof n!="string"){var i=qo(n.mine),o=qo(n.theirs);t!==void 0&&(i.oldLines===o.oldLines?t+=i.oldLines:t=void 0),r!==void 0&&(i.newLines===o.newLines?r+=i.newLines:r=void 0)}else r!==void 0&&(n[0]==="+"||n[0]===" ")&&r++,t!==void 0&&(n[0]==="-"||n[0]===" ")&&t++}),{oldLines:t,newLines:r}}function d0(e){for(var t=[],r,n,i=0;i<e.length;i++)r=e[i],r.added?n=1:r.removed?n=-1:n=0,t.push([n,r.value]);return t}function f0(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];n.added?t.push("<ins>"):n.removed&&t.push("<del>"),t.push(Cg(n.value)),n.added?t.push("</ins>"):n.removed&&t.push("</del>")}return t.join("")}function Cg(e){var t=e;return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/"/g,"&quot;"),t}function Wo(e,t){let r={};for(let o=0;o<t.length;o++){const s=t[o];r[s]?r[s].push(o):r[s]=[o]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let o=0;o<e.length;o++){const s=e[o],a=r[s]||[];let l=0,c=i[0];for(let d=0;d<a.length;d++){const p=a[d];let h;for(h=l;h<i.length&&!(i[h].buffer2index<p&&(h===i.length-1||i[h+1].buffer2index>p));h++);if(h<i.length){const f={buffer1index:o,buffer2index:p,chain:i[h]};if(l===i.length?i.push(c):i[l]=c,l=h+1,c=f,l===i.length)break}}i[l]=c}return i[i.length-1]}function xg(e,t){const r=Wo(e,t);let n=[],i=e.length,o=t.length,s={common:[]};function a(){s.common.length&&(s.common.reverse(),n.push(s),s={common:[]})}for(let l=r;l!==null;l=l.chain){let c={buffer1:[],buffer2:[]};for(;--i>l.buffer1index;)c.buffer1.push(e[i]);for(;--o>l.buffer2index;)c.buffer2.push(t[o]);(c.buffer1.length||c.buffer2.length)&&(a(),c.buffer1.reverse(),c.buffer2.reverse(),n.push(c)),i>=0&&s.common.push(e[i])}return a(),n.reverse(),n}function sc(e,t){const r=Wo(e,t);let n=[],i=e.length,o=t.length;for(let s=r;s!==null;s=s.chain){const a=i-s.buffer1index-1,l=o-s.buffer2index-1;i=s.buffer1index,o=s.buffer2index,(a||l)&&n.push({buffer1:[i+1,a],buffer1Content:e.slice(i+1,i+1+a),buffer2:[o+1,l],buffer2Content:t.slice(o+1,o+1+l)})}return n.reverse(),n}function h0(e,t){const r=Wo(e,t);let n=[],i=e.length,o=t.length;function s(a,l,c){let d=[];for(let p=0;p<c;p++)d.push(a[l+p]);return{offset:l,length:c,chunk:d}}for(let a=r;a!==null;a=a.chain){const l=i-a.buffer1index-1,c=o-a.buffer2index-1;i=a.buffer1index,o=a.buffer2index,(l||c)&&n.push({buffer1:s(e,a.buffer1index+1,l),buffer2:s(t,a.buffer2index+1,c)})}return n.reverse(),n}function Rg(e,t,r){let n=[];function i(l,c){n.push({ab:c,oStart:l.buffer1[0],oLength:l.buffer1[1],abStart:l.buffer2[0],abLength:l.buffer2[1]})}sc(t,e).forEach(l=>i(l,"a")),sc(t,r).forEach(l=>i(l,"b")),n.sort((l,c)=>l.oStart-c.oStart);let o=[],s=0;function a(l){l>s&&(o.push({stable:!0,buffer:"o",bufferStart:s,bufferLength:l-s,bufferContent:t.slice(s,l)}),s=l)}for(;n.length;){let l=n.shift(),c=l.oStart,d=l.oStart+l.oLength,p=[l];for(a(c);n.length;){const h=n[0],f=h.oStart;if(f>d)break;d=Math.max(d,f+h.oLength),p.push(n.shift())}if(p.length===1){if(l.abLength>0){const h=l.ab==="a"?e:r;o.push({stable:!0,buffer:l.ab,bufferStart:l.abStart,bufferLength:l.abLength,bufferContent:h.slice(l.abStart,l.abStart+l.abLength)})}}else{let h={a:[e.length,-1,t.length,-1],b:[r.length,-1,t.length,-1]};for(;p.length;){l=p.shift();const A=l.oStart,H=A+l.oLength,$=l.abStart,Q=$+l.abLength;let ue=h[l.ab];ue[0]=Math.min($,ue[0]),ue[1]=Math.max(Q,ue[1]),ue[2]=Math.min(A,ue[2]),ue[3]=Math.max(H,ue[3])}const f=h.a[0]+(c-h.a[2]),g=h.a[1]+(d-h.a[3]),m=h.b[0]+(c-h.b[2]),k=h.b[1]+(d-h.b[3]);let F={stable:!1,aStart:f,aLength:g-f,aContent:e.slice(f,g),oStart:c,oLength:d-c,oContent:t.slice(c,d),bStart:m,bLength:k-m,bContent:r.slice(m,k)};o.push(F)}s=d}return a(t.length),o}function Vo(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n);const o=typeof e=="string",s=typeof t=="string",a=typeof r=="string";o&&(e=e.split(n.stringSeparator)),s&&(t=t.split(n.stringSeparator)),a&&(r=r.split(n.stringSeparator));let l=[];const c=Rg(e,t,r);let d=[];function p(){d.length&&l.push({ok:d}),d=[]}function h(f,g){if(f.length!==g.length)return!1;for(let m=0;m<f.length;m++)if(f[m]!==g[m])return!1;return!0}return c.forEach(f=>{f.stable?d.push(...f.bufferContent):n.excludeFalseConflicts&&h(f.aContent,f.bContent)?d.push(...f.aContent):(p(),l.push({conflict:{a:f.aContent,aIndex:f.aStart,o:f.oContent,oIndex:f.oStart,b:f.bContent,bIndex:f.bStart}}))}),p(),l}function p0(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},n);const o=Vo(e,t,r,n);let s=!1,a=[];return o.forEach(l=>{l.ok?a=a.concat(l.ok):l.conflict&&(s=!0,a.push(`<<<<<<<${n.label.a?` ${n.label.a}`:""}`),a=a.concat(l.conflict.a),a.push(`|||||||${n.label.o?` ${n.label.o}`:""}`),a=a.concat(l.conflict.o),a.push("======="),a=a.concat(l.conflict.b),a.push(`>>>>>>>${n.label.b?` ${n.label.b}`:""}`))}),{conflict:s,result:a}}function Ag(e,t,r,n){n=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},n);const o=Vo(e,t,r,n);let s=!1,a=[];for(let l=0;l<o.length;l++){const c=o[l];c.ok?a=a.concat(c.ok):(s=!0,a=a.concat([`
<<<<<<<<<
`],c.conflict.a,[`
=========
`],c.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:s,result:a}}function g0(e,t,r,n){n=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},n);const o=Vo(e,t,r,n);let s=!1,a=[];for(let l=0;l<o.length;l++){const c=o[l];if(c.ok)a=a.concat(c.ok);else{const d=xg(c.conflict.a,c.conflict.b);for(let p=0;p<d.length;p++){let h=d[p];h.common?a=a.concat(h.common):(s=!0,a=a.concat([`
<<<<<<<<<
`],h.buffer1,[`
=========
`],h.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:s,result:a}}function m0(e,t){let r=[],n=0;function i(o){for(;n<o;)r.push(e[n]),n++}for(let o=0;o<t.length;o++){let s=t[o];i(s.buffer1.offset);for(let a=0;a<s.buffer2.chunk.length;a++)r.push(s.buffer2.chunk[a]);n+=s.buffer1.length}return i(e.length),r}function v0(e){return e.map(t=>({buffer1:{offset:t.buffer1.offset,length:t.buffer1.length},buffer2:{chunk:t.buffer2.chunk}}))}function w0(e){return e.map(t=>({buffer1:t.buffer2,buffer2:t.buffer1}))}const jt=(0,y.LV)(),ac=`===================================================================
`,On=new TextDecoder,Dg=new TextEncoder;var Te;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Te||(Te={}));const cc="github.working.changes|",Zo="github.working|";function Li(e,t,r){return{type:e.type,rootUri:t,uri:r!=null?r:e.uri}}class Pg{constructor(t,r){this.providerService=t,this.memento=r,this._onDidChange=new u.EventEmitter,this._operationsMap=new Map}get onDidChange(){return this._onDidChange.event}async acceptAll(t){const r=this.getChanges(t);if(r.length===0)return;await this.saveWorkingOperations(t,void 0);const n=[];for(const i of r){await this.discardWorkingContent(i.uri);let o;i.type===2&&i.fileType===u.FileType.Directory&&(r.some(s=>Ci(s.uri,i.uri))||(o={type:3,uri:i.uri,rootUri:t})),n.push(o!=null?o:Li(i,t))}this._onDidChange.fire(n)}async discard(t){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const n=t.toString(),i=this.getWorkingOperations(r);if(i.length===0)return;const o=i.findIndex(p=>p.uri.toString()===n);if(o===-1)return;const[s]=i.splice(o,1);await this.saveWorkingOperations(r,i),await this.discardWorkingContent(t);let a;switch(s.type){case 2:a=3;break;case 3:a=2;break;default:a=s.type;break}this._onDidChange.fire([{type:a,rootUri:r,uri:t}]);const l=Yp(t),c=l.toString(),d=i.find(p=>p.uri.toString()===c);(d==null?void 0:d.type)===2&&(i.some(p=>Ci(p.uri,l))||await this.discard(l))}async discardAll(t){const r=this.getChanges(t);if(r.length===0)return;await this.saveWorkingOperations(t,void 0);const n=[];for(const i of r){await this.discardWorkingContent(i.uri);let o;switch(i.type){case 2:o=3;break;case 3:o=2;break;default:o=i.type;break}n.push({type:o,rootUri:t,uri:i.uri})}this._onDidChange.fire(n)}async stage(t){const[r,n]=this.getWorkingOperation(t);r!==void 0&&await this.spliceOperation(t,n,{...r,staged:!0,timestamp:Date.now()})}async stageAll(t){const r=this.getWorkingOperations(t).map(n=>({...n,staged:!0,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),this._onDidChange.fire(r.map(n=>Li(n,t))))}async unstage(t){const[r,n]=this.getWorkingOperation(t);r!==void 0&&await this.spliceOperation(t,n,{...r,staged:!1,timestamp:Date.now()})}async unstageAll(t){const r=this.getWorkingOperations(t).map(n=>({...n,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),this._onDidChange.fire(r.map(n=>Li(n,t))))}hasChanges(t){return this.getWorkingOperations(t).length!==0}hasMergeConflicts(t){return this.getWorkingOperations(t).some(r=>r.conflicts!==void 0)}hasStagedChanges(t){return this.getWorkingOperations(t).some(r=>r.staged&&r.conflicts===void 0)}hasWorkingChanges(t){return this.getWorkingOperations(t).some(r=>!r.staged&&r.conflicts===void 0)}getChange(t){const[r]=this.getWorkingOperation(t);return r}getChanges(t,r){let n=this.getWorkingOperations(t);if((r==null?void 0:r.excludeConflicts)||(r==null?void 0:r.predicate)){const{excludeConflicts:i,predicate:o}=r;n=n.filter(s=>{var a;return(!i||s.conflicts===void 0)&&((a=o==null?void 0:o(s))!=null?a:!0)})}return n}getContent(t){return this.memento.get(`${Zo}${t.toString()}`)}getMergeConflicts(t,r){return this.getWorkingOperations(t).filter(i=>{var o,s;return i.conflicts!==void 0&&((s=(o=r==null?void 0:r.predicate)==null?void 0:o.call(r,i))!=null?s:!0)})}getStagedChanges(t,r){return this.getWorkingOperations(t).filter(i=>{var o,s;return i.staged&&i.conflicts===void 0&&((s=(o=r==null?void 0:r.predicate)==null?void 0:o.call(r,i))!=null?s:!0)})}getWorkingChanges(t,r){return this.getWorkingOperations(t).filter(i=>{var o,s;return!i.staged&&i.conflicts===void 0&&((s=(o=r==null?void 0:r.predicate)==null?void 0:o.call(r,i))!=null?s:!0)})}async createPatch(t,r){if(r===void 0){const o=[];for(const s of this.getChanges(t)){const a=await this.createPatchCore(t,s);o.push(a)}return o.join("")}const n=this.getChange(r);if(n===void 0)throw new Error(`Unable to create patch for ${r.toString(!0)}`);return await this.createPatchCore(t,n)}async createPatchCore(t,r){const n=this.getContent(r.uri),i=On.decode(await u.workspace.fs.readFile(this.providerService.getProviderUri(r.uri))),o=this.providerService.getRelativeFilePath(t,r.uri),s=yg(o,i,n),a=s.indexOf(ac);return`${`diff --git a/${o} b/${o}`}
${s.substr(a+ac.length)}`}async keep(t,r){const[n,i]=this.getWorkingOperation(t);if(n===void 0)return;if(r===void 0&&n.conflicts){const[,s]=n.conflicts.status;switch(s){case 1:switch(n.type){case 1:case 2:case 3:await this.spliceOperation(t,i,{...n,conflicts:void 0,timestamp:Date.now()});break}break;case 2:switch(n.type){case 1:case 3:await this.spliceOperation(t,i,{...n,conflicts:void 0,timestamp:Date.now()});break;case 2:await this.spliceOperation(t,i,{...n,type:1,size:n.size,hash:n.hash,originalHash:n.originalHash,conflicts:void 0,timestamp:Date.now()});break}break;case 3:switch(n.type){case 3:await this.discard(t);break;case 1:await this.spliceOperation(t,i,{...n,type:2,originalHash:void 0,conflicts:void 0,timestamp:Date.now()});break;case 2:await this.spliceOperation(t,i,{...n,conflicts:void 0,timestamp:Date.now()});break}break}return}if(r===void 0)return;switch(r.type){case 1:switch(n.type){case 3:await this.spliceOperation(t,i,{...n,type:3,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()});return;case 2:break;case 1:break}break;case 2:switch(n.type){case 1:case 3:return;case 2:break}break;case 3:switch(n.type){case 3:return this.discard(t);case 1:await this.spliceOperation(t,i,{...n,type:2,originalHash:void 0,conflicts:void 0,timestamp:Date.now()});return;case 2:return}}const o=r!==void 0?await u.workspace.fs.readFile(r.providerUri):void 0;await this.spliceOperation(t,i,{...n,type:1,originalHash:o!==void 0?await Di(o):n.originalHash,conflicts:void 0,timestamp:Date.now()})}async merge(t,r,n){const[i,o]=this.getWorkingOperation(t);if(i===void 0)return;switch(r.type){case 1:switch(i.type){case 3:return void this.spliceOperation(t,o,{...i,type:3,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:r.providerUri,status:[i.type,r.type]},timestamp:Date.now()});case 2:break;case 1:break}break;case 2:switch(i.type){case 3:case 1:return;case 2:break}break;case 3:switch(i.type){case 3:return void this.discard(t);case 1:return void this.spliceOperation(t,o,{...i,type:2,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:r.providerUri,status:[i.type,r.type]},timestamp:Date.now()});case 2:return}}const s=this.getContent(t),a=await u.workspace.fs.readFile(n.providerUri),l=await u.workspace.fs.readFile(r.providerUri),c=Ag(s,On.decode(a),On.decode(l),{excludeFalseConflicts:!0,stringSeparator:`
`}),d=c.result;let p;if(c.conflict){let h;const f=[];let g=0;for(const F of d)F===`
<<<<<<<<<
`?h={start:g,mid:g,end:g}:F===`
=========
`?h.mid=g:F===`
>>>>>>>>>
`&&(h.end=g,f.push(h)),g++;let m=0,k=0;for(const F of f)d.splice(F.start-m,1),m++,k=F.end-F.mid+1,d.splice(F.mid-m,k),m+=k;p={baseUri:n.providerUri,incomingUri:r.providerUri,status:[i.type,r.type]}}await this.onFileChanged(t,Dg.encode(d.join(`
`)),()=>l!=null?l:new Uint8Array(0),p)}resolveDiffCommand(t,r,n,i){const[o]=this.getWorkingOperation(t);return(o==null?void 0:o.type)===3?this.resolveOpenCommand(r):((o==null?void 0:o.type)===2&&(r=r.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[r,t,n,i]})}resolveOpenCommand(t,r){return{command:"vscode.open",title:"Open File",arguments:[t,r]}}getStat(t){var r;const[n]=this.getWorkingOperation(t);if(n!==void 0){if(n.type===3)throw u.FileSystemError.FileNotFound(`The ${n.fileType===u.FileType.Directory?"folder":"file"} has been deleted.`);return{type:n.fileType,size:(r=n.size)!=null?r:0,ctime:0,mtime:n.timestamp}}}updateDirectoryEntries(t,r){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return r;const i=Rn(n,t),o=this.getChanges(n);for(const s of o)switch(s.type){case 1:break;case 2:{Ci(s.uri,i)&&r.push([Rn(t,s.uri),s.fileType]);break}case 3:{if(Ci(s.uri,i)){const a=Rn(t,s.uri),l=r.findIndex(([c])=>c===a);l!==-1&&r.splice(l,1)}break}}return r}async onDirectoryCreated(t){const[r,n]=this.getWorkingOperation(t);await this.spliceOperation(t,n,r===void 0?{type:2,uri:t,fileType:u.FileType.Directory,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...r,timestamp:Date.now()})}async onDirectoryDeleted(t){const[r,n]=this.getWorkingOperation(t);if((r==null?void 0:r.type)===2){await this.discard(t);return}await this.discardWorkingContent(t),await this.spliceOperation(t,n,{type:3,uri:t,fileType:u.FileType.Directory,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0})}async onFileChanged(t,r,n,i){const[o,s]=this.getWorkingOperation(t),a=await Di(r),l=await Di(await n());if(a===l){await this.discard(t);return}a===(o==null?void 0:o.hash)&&l===(o==null?void 0:o.originalHash)||(await this.saveWorkingContent(t,On.decode(r)),await this.spliceOperation(t,s,o===void 0?{type:1,uri:t,fileType:u.FileType.File,timestamp:Date.now(),size:r.byteLength,hash:a,originalHash:l,conflicts:i,staged:!1}:{...o,hash:a,originalHash:l,conflicts:i,staged:!1,timestamp:Date.now()}))}async onFileCreated(t,r){const[n,i]=this.getWorkingOperation(t),o=await Di(r);await this.saveWorkingContent(t,On.decode(r)),await this.spliceOperation(t,i,n===void 0?{type:2,uri:t,fileType:u.FileType.File,timestamp:Date.now(),size:r.byteLength,hash:o,originalHash:o}:{...n,type:2,hash:o,timestamp:Date.now()})}async onFileDeleted(t){const[r,n]=this.getWorkingOperation(t);if((r==null?void 0:r.type)===2){await this.discard(t);return}await this.discardWorkingContent(t),await this.spliceOperation(t,n,{type:3,uri:t,fileType:u.FileType.File,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0})}getWorkingOperation(t){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return[void 0,-1];const n=t.toString(),i=this.getWorkingOperations(r),o=i.findIndex(s=>s.uri.toString()===n);return o===-1?[void 0,-1]:[i[o],o]}getWorkingOperations(t){let r=this._operationsMap.get(t.toString());if(r===void 0){const n=this.memento.get(`${cc}${t.toString()}`);r=Fg(typeof n=="string"?n:JSON.stringify(n)),this._operationsMap.set(t.toString(),r)}return r}async saveWorkingOperations(t,r){this._operationsMap.delete(t.toString()),await this.memento.update(`${cc}${t.toString()}`,r)}async saveWorkingContent(t,r){await this.memento.update(`${Zo}${t.toString()}`,r)}async discardWorkingContent(t){await this.memento.update(`${Zo}${t.toString()}`,void 0)}async spliceOperation(t,r,n){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=this.getWorkingOperations(i);r!==-1?o.splice(r,1,n):o.push(n),await this.saveWorkingOperations(i,o),this._onDidChange.fire([Li(n,i,t)])}}function Fg(e){if(!e)return[];let t=!1;const r=JSON.parse(e,(n,i)=>{if(n==="type")switch(i){case"changed":i=1;break;case"created":i=2;break;case"deleted":i=3;break}else{if((n==="uri"||n.endsWith("Uri"))&&i!==null)return typeof i=="string"?u.Uri.parse(i):u.Uri.from(i);if(n==="base"||n==="incoming")return t=!0,typeof i=="string"?u.Uri.parse(i):u.Uri.from(i)}return i});if(t)for(const n of r)n.conflicts&&("base"in n.conflicts&&(n.conflicts.baseUri=n.conflicts.base,delete n.conflicts.base),"incoming"in n.conflicts&&(n.conflicts.incomingUri=n.conflicts.incoming,delete n.conflicts.incoming));return r}function lc(e){switch(e){case 1:return jt("change type changed","Modified");case 2:return jt("change type created","Added");case 3:return jt("change type deleted","Deleted")}}function Og(e){const[t,r]=e;switch(t){case 1:switch(r){case 1:case 2:return jt("conflict status changed both","Modified by Both");case 3:return jt("conflict status deleted them","Deleted by Incoming")}break;case 2:switch(r){case 1:case 2:return jt("conflict status created both","Added by Both");case 3:return jt("conflict status deleted them","Deleted by Incoming")}break;case 3:switch(r){case 1:case 2:return jt("conflict status deleted us","Deleted by Current");case 3:return jt("conflict status deleted both","Deleted by Both")}break}}const uc=class{constructor(e){this.memento=e,this._onDidChange=new u.EventEmitter}get onDidChange(){return this._onDidChange.event}delete(e){return this.set(e,void 0)}get(e,t){var r,n,i,o,s;this.assertMatchingScheme(e);const a=this.memento.get(`${He.scheme}.metadata|${e.toString()}`);if(a!=null){if((t==null?void 0:t.skipValidation)||typeof a.version=="number"&&a.version>=uc.schemaVersion&&typeof a.timestamp=="number"&&typeof((r=a.provider)==null?void 0:r.id)=="string"&&typeof a.provider.name=="string"&&typeof a.name=="string"&&a.repo&&typeof a.user=="string"&&typeof a.accessLevel=="number"&&typeof((n=a.HEAD)==null?void 0:n.sha)=="string"&&(typeof((i=a.HEAD.detached)==null?void 0:i.name)=="string"||typeof((o=a.HEAD.branch)==null?void 0:o.name)=="string")&&typeof((s=a.defaultBranch)==null?void 0:s.name)=="string"&&typeof a.defaultBranch.sha=="string")return a;me.warn("Repository metadata is out of date with current schema")}}getForWorkspace(e){return!u.workspace.workspaceFolders||u.workspace.workspaceFolders.length===0?[]:[...lr(u.workspace.workspaceFolders,t=>{if(t.uri.scheme!==He.scheme)return;const r=this.get(t.uri);if(!(r===void 0||e&&(r==null?void 0:r.provider.id)!==e))return{folderUri:t.uri,name:t.name,data:r}})]}getForWorkspaceFolder(e,t){if(!u.workspace.workspaceFolders||u.workspace.workspaceFolders.length===0)return;const r=u.workspace.getWorkspaceFolder(e);if(!r||r.uri.scheme!==He.scheme)return;const n=this.get(r.uri);if(!(!n||t!==void 0&&n.provider.id!==t))return{folderUri:r.uri,name:r.name,data:n}}async set(e,t){this.assertMatchingScheme(e),!(t===void 0&&this.get(e)===void 0)&&(await this.memento.update(`${He.scheme}.metadata|${e.toString()}`,t),this._onDidChange.fire(e))}assertMatchingScheme(e){if(e.scheme!==He.scheme)throw new Error(`Uri scheme '${e.scheme}' must match configured scheme '${He.scheme}'; uri=${e.toString()}`)}};let $i=uc;$i.schemaVersion=5;function dc(e){if(e==="HEAD")return"branch";if(fc(e))return"sha";if(hc(e))return"branch"}const Ug=/^[0-9a-f]{40}$/i;function fc(e){return e!==void 0&&Ug.test(e)}const Ig=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function hc(e){return Ig.test(e)}function nt(e){return e===""||e==="~"||e==="HEAD"?e:e.endsWith("^")?`${e.substr(0,7)}^`:e.substr(0,7)}function Un(e){const[t,r]=e.authority.split("+");let n,i;r&&([n,i]=r.split("~"));const[,o,s,a,...l]=e.path.split("/");return{scheme:t,repo:{owner:o,project:s,name:a},path:l.join("/")||"",ref:n||void 0,pullRequest:i?Number(i):void 0}}function pc(e,t){const{repo:r}=t!=null?t:Un(e);return e.with({path:`/${r.owner}/${r.project}/${r.name}`})}function b0(e,t,r){const{repo:{owner:n,name:i}}=e instanceof Uri?Un(e):e;return Uri.parse(`azdo://azdo+${t}/${n}/${i}/${r}`)}class Lg{constructor(t,r){this.providerService=t,this.metadataStore=r,this.pendingMetadataRequests=new Map,this.rootUriToMetadataMap=new Map}dispose(){}async getMetadata(t){t=this.providerService.getVirtualUri(t);const r=Un(t),n=pc(t,r),i=n.toString();let o=this.pendingMetadataRequests.get(i);o===void 0&&(o=this.getMetadataCore(n),this.pendingMetadataRequests.set(i,o));try{return{...await o,path:r.path,scheme:r.scheme}}finally{this.pendingMetadataRequests.delete(i)}}async getMetadataCore(t){var r,n,i,o;const s=t.toString();let a=this.rootUriToMetadataMap.get(s);if(a!==void 0)return a;if(a=this.metadataStore.get(t),a!==void 0)return this.rootUriToMetadataMap.set(s,a),a;let{repo:{owner:l,project:c,name:d},ref:p,pullRequest:h}=Un(t);(!p||/HEAD/i.test(p))&&(p="HEAD");const f=dc(p);if(f===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);const g=await this.getRepositoryInfo(l,c,d,{ref:p,pr:h});if(g===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let m;if(f==="sha")m=p;else if(m=(n=(r=g.ref)==null?void 0:r.sha)!=null?n:g.defaultBranch.sha,m===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let k;return((i=g.ref)==null?void 0:i.prefix)==="refs/heads/"?k={sha:m,branch:{name:g.ref.name,sha:g.ref.sha}}:((o=g.ref)==null?void 0:o.prefix)==="refs/tags/"?k={sha:m,detached:{type:Rt.Tag,name:g.ref.name}}:k={sha:m,detached:{type:Rt.Commit,name:nt(m)}},a={version:$i.schemaVersion,timestamp:Date.now(),provider:{id:"azdo",name:"Azure DevOps"},name:`${g.repo.owner}/${g.repo.name}`,repo:g.repo,user:g.user,accessLevel:g.accessLevel,HEAD:k,defaultBranch:g.defaultBranch,pullRequest:g.pullRequest},await this.updateMetadata(t,a),a}async updateMetadata(t,r){this.rootUriToMetadataMap.set(t.toString(),r),await this.metadataStore.set(this.providerService.getVirtualUri(t),r)}getRemoteWorkspaceSourceProviders(){return[{name:"Azure DevOps",type:ur.Repository,icon:"$(rocket)",provideSources:async(t,r)=>(await this.searchRepositoriesQuery(t!=null?t:"",r)).map(i=>({name:i.repoWithOwner,description:`${i.fork?i.fork:""}${i.stars>0?`${i.fork?" \u2022 ":""}$(star-full) ${i.stars}`:""}`,detail:i.description,url:i.url}))}]}async createBranch(t,r,n,i){try{return"TestBranch"}catch(o){throw o instanceof hr&&o.status===422?o.message==="Reference already exists"?new Ar(o,!0):new Ar(o,!1):(me.error(o),o)}}async createCommit(t,r,n,i){throw new Error}async createPullRequest(t,r,n,i,o){throw new Error}async fetch(t,r){const[n,i]=await this.fetchCore(t,{...r,sync:!1});n&&await this.updateMetadata(t,i)}async fetchCore(t,r){const n=await this.getMetadata(t);return[!1,n]}async fork(t){throw new Error}async getBranches(t,r){return{branches:[]}}async getCommit(t,r){const n={oid:"123",message:"Hey there!",parents:{nodes:[{oid:"231"}]},author:{name:"you",date:"today",email:""},committer:{name:"you",date:"today"}};return{hash:n.oid,message:n.message,parents:n.parents.nodes.map(i=>i.oid),authorDate:new Date(n.author.date),authorEmail:n.author.email,authorName:n.author.name,commitDate:new Date(n.committer.date)}}getCommitOperations(t,r,n){return r.map(o=>{const s=this.providerService.getRelativeFilePath(t,o.uri);switch(o.type){case Te.Created:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case Te.Changed:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case Te.Deleted:return{type:o.type,path:s,fileType:o.fileType}}})}async getCommits(t,r){try{throw new Error}catch(n){return}}async getFileContent(t,r,n){try{const i=await this.getMetadata(t),o=i.repo;let s=`https://dev.azure.com/${o.owner}/${o.project}/_apis/git/repositories/${o.name}/items?api-version=6.0`;i.path&&(s=`${s}&path=${i.path}&includeContent=true`);const a=await Xr(s);return(a==null?void 0:a.content)?new TextEncoder().encode(a.content):new TextEncoder().encode("404: Unable to retrieve content")}catch(i){throw me.error(i),i}}async getFork(t){throw new Error}async getIncomingChanges(t){return this.getIncomingChangesCore(t,await this.getMetadata(t))}getIncomingChangesCore(t,r){var n,i,o;return((o=(i=(n=r.state)==null?void 0:n.incomingChanges)==null?void 0:i.length)!=null?o:0)===0?[]:r.state.incomingChanges.map(s=>({uri:u.Uri.joinPath(t,s.path),type:s.type}))}async getObjectDetails(t,r,n){throw new Error}async getPullRequest(t,r){throw new Error}async getPullRequestForBranch(t,r,n){throw new Error}async getRepoItems(t){const r=await Xr(`https://dev.azure.com/${t.repo.owner}/${t.repo.project}/_apis/git/repositories/${t.repo.name}/items?api-version=6.0&scopePath=${t.path}&recursionLevel=1&includeContentMetadata=true&$format=json`);return r==null?void 0:r.value}async getRepoFileNames(t){try{const r=await this.getMetadata(t),n=await this.getRepoItems(r);return lr(n,i=>i.isFolder?void 0:i.path.substr(1))}catch(r){return[]}}async getTags(t,r){return{tags:[]}}async getTarGz(t,r){throw new Error}async pushCommit(t,r,n,i){throw new Error}async queryRepositoryObject(t,r){}async searchPullRequestsQuery(t){return[]}async searchRepositoriesQuery(t,r){try{const n=await Xr("https://dev.azure.com/homitc/AzDODemo/_apis/git/repositories?api-version=6.0");return n==null?void 0:n.value.map(i=>({repoWithOwner:i.name,description:void 0,url:i.webUrl,fork:void 0,stars:0}))}catch(n){return[]}}async searchCodeQuery(t,r,n){return{matches:[],limitHit:!0}}async switchTo(t,r,n){const{name:i,repo:o,HEAD:{branch:s}}=await this.getMetadata(t);r.startsWith("refs/heads/")?r=r.substr(11):r.startsWith("refs/tags/")&&(r=r.substr(10)),(s==null?void 0:s.name)!==r&&await _t(this.providerService.createVirtualUri(t,{repo:o,ref:r}),i,(n==null?void 0:n.openInNewWindow)?Be.NewWindow:Be.CurrentWindow)}async sync(t,r,n){}async getRepositoryInfo(t,r,n,i){const o=`https://dev.azure.com/${t}/${r}/_apis/git/repositories/${n}?api-version=6.0`,s=await Xr(o);if(!s)return;if(i={ref:s.defaultBranch.split("/").pop()},i.ref){if(fc(i.ref))throw new Error("Not supported yet :(");{const l=`https://dev.azure.com/${t}/${r}/_apis/git/repositories/${n}/stats/branches?name=${i.ref}&api-version=6.0`,c=await Xr(l);let d;if(i.ref===s.defaultBranch)d=c;else{const p=`https://dev.azure.com/${t}/${r}/_apis/git/repositories/${n}/stats/branches?name=${i.ref}&api-version=6.0`;d=await Xr(p)}if(d){const p={user:"jepetty",repo:{owner:t,project:r,name:n},repoId:s.id,accessLevel:rt.Admin,defaultBranch:{name:i.ref,sha:d==null?void 0:d.commit.commitId}};return c&&(p.ref={name:c.name,sha:c.commit.commitId,prefix:"refs/heads/"}),p}}}else throw new Error("Not supported yet :(")}}var Pr;(function(e){e.ADMIN="ADMIN",e.MAINTAIN="MAINTAIN",e.WRITE="WRITE",e.TRIAGE="TRIAGE",e.READ="READ",e.NONE="NONE"})(Pr||(Pr={}));function y0(e){switch(e){case Pr.ADMIN:return RepositoryAccessLevel.Admin;case Pr.MAINTAIN:return RepositoryAccessLevel.Maintain;case Pr.WRITE:return RepositoryAccessLevel.Write;case Pr.TRIAGE:return RepositoryAccessLevel.Triage;case Pr.READ:return RepositoryAccessLevel.Read;default:return RepositoryAccessLevel.None}}async function _0(e,t){const{repo:r}=t!=null?t:Un(e);return e.with({path:`/${r.organization}/${r.project}/_git/${r.name}`})}async function Xr(e,t){const r=u.Uri.parse(e);return $g(e)}async function E0(e,t){let r=Uri.parse(e);const n=new URLSearchParams(r.query);return n.set("api-version","5.1"),r=r.with({query:n.toString()}),Gg(r.toString(),t)}async function $g(e,t){const r=await sg().get(e,t);if(r.status!==404)return r.data}async function Gg(e,t,r){return(await axios.post(e,r,t)).data}var Jr=Re(7360);function Bg(e){return e.replace(/[-\\{}*+?|^$.[\]()#]/g,"\\$&")}function Mg(e,t,r={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=Bg(e)),r.wholeWord&&(/\B/.test(e.charAt(0))||(e=`\\b${e}`),/\B/.test(e.charAt(e.length-1))||(e=`${e}\\b`));let n="";return r.global&&(n+="g"),r.matchCase||(n+="i"),r.multiline&&(n+="m"),r.unicode&&(n+="u"),new RegExp(e,n)}var gc=Re(1171);let mc,vc,Ko;const Ng=(e,t,r,n)=>{const i=`${t.join("--")};;;;${r.join("--")}`,o=e.map(l=>l.path).join("::");if(mc===o&&i==vc&&Ko)return Ko;const s=new Set,a=l=>(t.length===0||t.some(c=>gc(l,c,{dot:!0})))&&!r.some(c=>gc(l,c,{dot:!0}));for(const l of e)a(l.path)&&(!n||l.size<n)&&s.add(l.path);return mc=o,vc=i,Ko=s,s},Hg=(e,t,r,n)=>{var i;const o=[];let s;if(typeof e=="string")s=e;else{const d=e;if(d[0]==255&&d[1]==254)s=new TextDecoder("utf-16le").decode(d);else if(d[0]==254&&d[1]==255)s=new TextDecoder("utf-16be").decode(d);else if(s=new TextDecoder("utf8").decode(d),s.slice(0,1e3).includes("\uFFFD")&&d.includes(0))return[]}const a=[];let l=null,c=n.remainingResultQuota;for(;c>=0&&(l=r.exec(s));)a.push({matchStartIndex:l.index,matchedText:l[0]}),c--;if(a.length){const d=new Set,p=new Set,h=[],f=A=>s.slice(h[A].start,h[A].end);let g=0,m=null;const k=/\r?\n/g;for(;m=k.exec(s);)h.push({start:g,end:m.index}),g=m.index+m[0].length;g<s.length&&h.push({start:g,end:s.length});let F=0;for(const{matchStartIndex:A,matchedText:H}of a){if(c<0)break;for(;Boolean(h[F+1])&&A>h[F].end;)F++;let $=F;for(;Boolean(h[$+1])&&A+H.length>h[$].end;)$++;if(n.beforeContext)for(let fe=Math.max(0,F-n.beforeContext);fe<F;fe++)d.add(fe);let Q="",ue=0;for(let fe=F;fe<=$;fe++){let ve=f(fe);((i=n.previewOptions)==null?void 0:i.charsPerLine)&&ve.length>n.previewOptions.charsPerLine&&(ue=Math.max(A-h[F].start-20,0),ve=ve.substr(ue,n.previewOptions.charsPerLine)),Q+=`${ve}
`,p.add(fe)}const ce=new u.Range(F,A-h[F].start,$,A+H.length-h[$].start),be=new u.Range(0,A-h[F].start-ue,$-F,A+H.length-h[$].start-($===F?ue:0)),ye={uri:u.Uri.file(t),ranges:ce,preview:{text:Q,matches:be}};if(o.push(ye),n.afterContext)for(let fe=$+1;fe<=Math.min($+n.afterContext,h.length-1);fe++)d.add(fe)}for(const A of d)p.has(A)||o.push({uri:u.Uri.file(t),text:f(A),lineNumber:A+1})}return o};var zg=Re(5790);/*! pako 2.0.3 https://github.com/nodeca/pako @license (MIT AND Zlib) */const jg=4,wc=0,bc=1,qg=2;function en(e){let t=e.length;for(;--t>=0;)e[t]=0}const Wg=0,yc=1,Vg=2,Zg=3,Kg=258,Qo=29,In=256,Ln=In+1+Qo,tn=30,Yo=19,_c=2*Ln+1,Fr=15,Xo=16,Qg=7,Jo=256,Ec=16,Tc=17,Sc=18,es=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Gi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Yg=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kc=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xg=512,qt=new Array((Ln+2)*2);en(qt);const $n=new Array(tn*2);en($n);const Gn=new Array(Xg);en(Gn);const Bn=new Array(Kg-Zg+1);en(Bn);const ts=new Array(Qo);en(ts);const Bi=new Array(tn);en(Bi);function rs(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}let Cc,xc,Rc;function ns(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Ac=e=>e<256?Gn[e]:Gn[256+(e>>>7)],Mn=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},st=(e,t,r)=>{e.bi_valid>Xo-r?(e.bi_buf|=t<<e.bi_valid&65535,Mn(e,e.bi_buf),e.bi_buf=t>>Xo-e.bi_valid,e.bi_valid+=r-Xo):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},At=(e,t,r)=>{st(e,r[t*2],r[t*2+1])},Dc=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},Jg=e=>{e.bi_valid===16?(Mn(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},em=(e,t)=>{const r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,p,h,f,g,m=0;for(h=0;h<=Fr;h++)e.bl_count[h]=0;for(r[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<_c;c++)d=e.heap[c],h=r[r[d*2+1]*2+1]+1,h>l&&(h=l,m++),r[d*2+1]=h,!(d>n)&&(e.bl_count[h]++,f=0,d>=a&&(f=s[d-a]),g=r[d*2],e.opt_len+=g*(h+f),o&&(e.static_len+=g*(i[d*2+1]+f)));if(m!==0){do{for(h=l-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;h!==0;h--)for(d=e.bl_count[h];d!==0;)p=e.heap[--c],!(p>n)&&(r[p*2+1]!==h&&(e.opt_len+=(h-r[p*2+1])*r[p*2],r[p*2+1]=h),d--)}},Pc=(e,t,r)=>{const n=new Array(Fr+1);let i=0,o,s;for(o=1;o<=Fr;o++)n[o]=i=i+r[o-1]<<1;for(s=0;s<=t;s++){let a=e[s*2+1];a!==0&&(e[s*2]=Dc(n[a]++,a))}},tm=()=>{let e,t,r,n,i;const o=new Array(Fr+1);for(r=0,n=0;n<Qo-1;n++)for(ts[n]=r,e=0;e<1<<es[n];e++)Bn[r++]=n;for(Bn[r-1]=n,i=0,n=0;n<16;n++)for(Bi[n]=i,e=0;e<1<<Gi[n];e++)Gn[i++]=n;for(i>>=7;n<tn;n++)for(Bi[n]=i<<7,e=0;e<1<<Gi[n]-7;e++)Gn[256+i++]=n;for(t=0;t<=Fr;t++)o[t]=0;for(e=0;e<=143;)qt[e*2+1]=8,e++,o[8]++;for(;e<=255;)qt[e*2+1]=9,e++,o[9]++;for(;e<=279;)qt[e*2+1]=7,e++,o[7]++;for(;e<=287;)qt[e*2+1]=8,e++,o[8]++;for(Pc(qt,Ln+1,o),e=0;e<tn;e++)$n[e*2+1]=5,$n[e*2]=Dc(e,5);Cc=new rs(qt,es,In+1,Ln,Fr),xc=new rs($n,Gi,0,tn,Fr),Rc=new rs(new Array(0),Yg,0,Yo,Qg)},Fc=e=>{let t;for(t=0;t<Ln;t++)e.dyn_ltree[t*2]=0;for(t=0;t<tn;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Yo;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Jo*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},Oc=e=>{e.bi_valid>8?Mn(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},rm=(e,t,r,n)=>{Oc(e),n&&(Mn(e,r),Mn(e,~r)),e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},Uc=(e,t,r,n)=>{const i=t*2,o=r*2;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]},is=(e,t,r)=>{const n=e.heap[r];let i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Uc(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Uc(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},Ic=(e,t,r)=>{let n,i,o=0,s,a;if(e.last_lit!==0)do n=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],i=e.pending_buf[e.l_buf+o],o++,n===0?At(e,i,t):(s=Bn[i],At(e,s+In+1,t),a=es[s],a!==0&&(i-=ts[s],st(e,i,a)),n--,s=Ac(n),At(e,s,r),a=Gi[s],a!==0&&(n-=Bi[s],st(e,n,a)));while(o<e.last_lit);At(e,Jo,t)},os=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.elems;let s,a,l=-1,c;for(e.heap_len=0,e.heap_max=_c,s=0;s<o;s++)r[s*2]!==0?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,r[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=n[c*2+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)is(e,r,s);c=o;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],is(e,r,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,r[c*2]=r[s*2]+r[a*2],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,r[s*2+1]=r[a*2+1]=c,e.heap[1]=c++,is(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],em(e,t),Pc(r,l,e.bl_count)},Lc=(e,t,r)=>{let n,i=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)o=s,s=t[(n+1)*2+1],!(++a<l&&o===s)&&(a<c?e.bl_tree[o*2]+=a:o!==0?(o!==i&&e.bl_tree[o*2]++,e.bl_tree[Ec*2]++):a<=10?e.bl_tree[Tc*2]++:e.bl_tree[Sc*2]++,a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))},$c=(e,t,r)=>{let n,i=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),n=0;n<=r;n++)if(o=s,s=t[(n+1)*2+1],!(++a<l&&o===s)){if(a<c)do At(e,o,e.bl_tree);while(--a!=0);else o!==0?(o!==i&&(At(e,o,e.bl_tree),a--),At(e,Ec,e.bl_tree),st(e,a-3,2)):a<=10?(At(e,Tc,e.bl_tree),st(e,a-3,3)):(At(e,Sc,e.bl_tree),st(e,a-11,7));a=0,i=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}},nm=e=>{let t;for(Lc(e,e.dyn_ltree,e.l_desc.max_code),Lc(e,e.dyn_dtree,e.d_desc.max_code),os(e,e.bl_desc),t=Yo-1;t>=3&&e.bl_tree[kc[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},im=(e,t,r,n)=>{let i;for(st(e,t-257,5),st(e,r-1,5),st(e,n-4,4),i=0;i<n;i++)st(e,e.bl_tree[kc[i]*2+1],3);$c(e,e.dyn_ltree,t-1),$c(e,e.dyn_dtree,r-1)},om=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return wc;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return bc;for(r=32;r<In;r++)if(e.dyn_ltree[r*2]!==0)return bc;return wc};let Gc=!1;const sm=e=>{Gc||(tm(),Gc=!0),e.l_desc=new ns(e.dyn_ltree,Cc),e.d_desc=new ns(e.dyn_dtree,xc),e.bl_desc=new ns(e.bl_tree,Rc),e.bi_buf=0,e.bi_valid=0,Fc(e)},Bc=(e,t,r,n)=>{st(e,(Wg<<1)+(n?1:0),3),rm(e,t,r,!0)},am=e=>{st(e,yc<<1,3),At(e,Jo,qt),Jg(e)},cm=(e,t,r,n)=>{let i,o,s=0;e.level>0?(e.strm.data_type===qg&&(e.strm.data_type=om(e)),os(e,e.l_desc),os(e,e.d_desc),s=nm(e),i=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=i&&(i=o)):i=o=r+5,r+4<=i&&t!==-1?Bc(e,t,r,n):e.strategy===jg||o===i?(st(e,(yc<<1)+(n?1:0),3),Ic(e,qt,$n)):(st(e,(Vg<<1)+(n?1:0),3),im(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Ic(e,e.dyn_ltree,e.dyn_dtree)),Fc(e),n&&Oc(e)},lm=(e,t,r)=>(e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Bn[r]+In+1)*2]++,e.dyn_dtree[Ac(t)*2]++),e.last_lit===e.lit_bufsize-1);var um=sm,dm=Bc,fm=cm,hm=lm,pm=am,gm={_tr_init:um,_tr_stored_block:dm,_tr_flush_block:fm,_tr_tally:hm,_tr_align:pm},Nn=(e,t,r,n)=>{let i=e&65535|0,o=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0};const mm=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},vm=new Uint32Array(mm());var qe=(e,t,r,n)=>{const i=vm,o=n+r;e^=-1;for(let s=n;s<o;s++)e=e>>>8^i[(e^t[s])&255];return e^-1},Or={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ur={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:wm,_tr_stored_block:bm,_tr_flush_block:ym,_tr_tally:pr,_tr_align:_m}=gm,{Z_NO_FLUSH:Ir,Z_PARTIAL_FLUSH:Em,Z_FULL_FLUSH:Tm,Z_FINISH:gr,Z_BLOCK:Mc,Z_OK:Dt,Z_STREAM_END:Nc,Z_STREAM_ERROR:dt,Z_DATA_ERROR:Sm,Z_BUF_ERROR:ss,Z_DEFAULT_COMPRESSION:km,Z_FILTERED:Cm,Z_HUFFMAN_ONLY:Mi,Z_RLE:xm,Z_FIXED:Rm,Z_DEFAULT_STRATEGY:Am,Z_UNKNOWN:Dm,Z_DEFLATED:Ni}=Ur,Pm=9,Fm=15,Om=8,Um=29,as=256+1+Um,Im=30,Lm=19,$m=2*as+1,Gm=15,ke=3,mr=258,wt=mr+ke+1,Bm=32,Hi=42,cs=69,zi=73,ji=91,qi=103,Lr=113,Hn=666,je=1,zn=2,$r=3,rn=4,Mm=3,vr=(e,t)=>(e.msg=Or[t],t),Hc=e=>(e<<1)-(e>4?9:0),wr=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let br=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const yr=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Ze=(e,t)=>{ym(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,yr(e.strm)},Ae=(e,t)=>{e.pending_buf[e.pending++]=t},jn=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Nm=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=Nn(e.adler,t,i,r):e.state.wrap===2&&(e.adler=qe(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},zc=(e,t)=>{let r=e.max_chain_length,n=e.strstart,i,o,s=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-wt?e.strstart-(e.w_size-wt):0,c=e.window,d=e.w_mask,p=e.prev,h=e.strstart+mr;let f=c[n+s-1],g=c[n+s];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do if(i=t,!(c[i+s]!==g||c[i+s-1]!==f||c[i]!==c[n]||c[++i]!==c[n+1])){n+=2,i++;do;while(c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&c[++n]===c[++i]&&n<h);if(o=mr-(h-n),n=h-mr,o>s){if(e.match_start=t,s=o,o>=a)break;f=c[n+s-1],g=c[n+s]}}while((t=p[t&d])>l&&--r!=0);return s<=e.lookahead?s:e.lookahead},Gr=e=>{const t=e.w_size;let r,n,i,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-wt)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=e.hash_size,r=n;do i=e.head[--r],e.head[r]=i>=t?i-t:0;while(--n);n=t,r=n;do i=e.prev[--r],e.prev[r]=i>=t?i-t:0;while(--n);o+=t}if(e.strm.avail_in===0)break;if(n=Nm(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=ke)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=br(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=br(e,e.ins_h,e.window[s+ke-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<ke)););}while(e.lookahead<wt&&e.strm.avail_in!==0)},Hm=(e,t)=>{let r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Gr(e),e.lookahead===0&&t===Ir)return je;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;const n=e.block_start+r;if((e.strstart===0||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,Ze(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-wt&&(Ze(e,!1),e.strm.avail_out===0))return je}return e.insert=0,t===gr?(Ze(e,!0),e.strm.avail_out===0?$r:rn):(e.strstart>e.block_start&&(Ze(e,!1),e.strm.avail_out===0),je)},ls=(e,t)=>{let r,n;for(;;){if(e.lookahead<wt){if(Gr(e),e.lookahead<wt&&t===Ir)return je;if(e.lookahead===0)break}if(r=0,e.lookahead>=ke&&(e.ins_h=br(e,e.ins_h,e.window[e.strstart+ke-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-wt&&(e.match_length=zc(e,r)),e.match_length>=ke)if(n=pr(e,e.strstart-e.match_start,e.match_length-ke),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ke){e.match_length--;do e.strstart++,e.ins_h=br(e,e.ins_h,e.window[e.strstart+ke-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=br(e,e.ins_h,e.window[e.strstart+1]);else n=pr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Ze(e,!1),e.strm.avail_out===0))return je}return e.insert=e.strstart<ke-1?e.strstart:ke-1,t===gr?(Ze(e,!0),e.strm.avail_out===0?$r:rn):e.last_lit&&(Ze(e,!1),e.strm.avail_out===0)?je:zn},nn=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<wt){if(Gr(e),e.lookahead<wt&&t===Ir)return je;if(e.lookahead===0)break}if(r=0,e.lookahead>=ke&&(e.ins_h=br(e,e.ins_h,e.window[e.strstart+ke-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ke-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-wt&&(e.match_length=zc(e,r),e.match_length<=5&&(e.strategy===Cm||e.match_length===ke&&e.strstart-e.match_start>4096)&&(e.match_length=ke-1)),e.prev_length>=ke&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ke,n=pr(e,e.strstart-1-e.prev_match,e.prev_length-ke),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=br(e,e.ins_h,e.window[e.strstart+ke-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=ke-1,e.strstart++,n&&(Ze(e,!1),e.strm.avail_out===0))return je}else if(e.match_available){if(n=pr(e,0,e.window[e.strstart-1]),n&&Ze(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return je}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=pr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ke-1?e.strstart:ke-1,t===gr?(Ze(e,!0),e.strm.avail_out===0?$r:rn):e.last_lit&&(Ze(e,!1),e.strm.avail_out===0)?je:zn},zm=(e,t)=>{let r,n,i,o;const s=e.window;for(;;){if(e.lookahead<=mr){if(Gr(e),e.lookahead<=mr&&t===Ir)return je;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=ke&&e.strstart>0&&(i=e.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=e.strstart+mr;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=mr-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ke?(r=pr(e,1,e.match_length-ke),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=pr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Ze(e,!1),e.strm.avail_out===0))return je}return e.insert=0,t===gr?(Ze(e,!0),e.strm.avail_out===0?$r:rn):e.last_lit&&(Ze(e,!1),e.strm.avail_out===0)?je:zn},jm=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(Gr(e),e.lookahead===0)){if(t===Ir)return je;break}if(e.match_length=0,r=pr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Ze(e,!1),e.strm.avail_out===0))return je}return e.insert=0,t===gr?(Ze(e,!0),e.strm.avail_out===0?$r:rn):e.last_lit&&(Ze(e,!1),e.strm.avail_out===0)?je:zn};function Pt(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}const qn=[new Pt(0,0,0,0,Hm),new Pt(4,4,8,4,ls),new Pt(4,5,16,8,ls),new Pt(4,6,32,32,ls),new Pt(4,4,16,16,nn),new Pt(8,16,32,32,nn),new Pt(8,16,128,128,nn),new Pt(8,32,128,256,nn),new Pt(32,128,258,1024,nn),new Pt(32,258,258,4096,nn)],qm=e=>{e.window_size=2*e.w_size,wr(e.head),e.max_lazy_match=qn[e.level].max_lazy,e.good_match=qn[e.level].good_length,e.nice_match=qn[e.level].nice_length,e.max_chain_length=qn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ke-1,e.match_available=0,e.ins_h=0};function Wm(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ni,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array($m*2),this.dyn_dtree=new Uint16Array((2*Im+1)*2),this.bl_tree=new Uint16Array((2*Lm+1)*2),wr(this.dyn_ltree),wr(this.dyn_dtree),wr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Gm+1),this.heap=new Uint16Array(2*as+1),wr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*as+1),wr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const jc=e=>{if(!e||!e.state)return vr(e,dt);e.total_in=e.total_out=0,e.data_type=Dm;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Hi:Lr,e.adler=t.wrap===2?0:1,t.last_flush=Ir,wm(t),Dt},qc=e=>{const t=jc(e);return t===Dt&&qm(e.state),t},Vm=(e,t)=>!e||!e.state||e.state.wrap!==2?dt:(e.state.gzhead=t,Dt),Wc=(e,t,r,n,i,o)=>{if(!e)return dt;let s=1;if(t===km&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>Pm||r!==Ni||n<8||n>15||t<0||t>9||o<0||o>Rm)return vr(e,dt);n===8&&(n=9);const a=new Wm;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=n,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ke-1)/ke),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=(1+2)*a.lit_bufsize,a.level=t,a.strategy=o,a.method=r,qc(e)},Zm=(e,t)=>Wc(e,t,Ni,Fm,Om,Am),Km=(e,t)=>{let r,n;if(!e||!e.state||t>Mc||t<0)return e?vr(e,dt):dt;const i=e.state;if(!e.output||!e.input&&e.avail_in!==0||i.status===Hn&&t!==gr)return vr(e,e.avail_out===0?ss:dt);i.strm=e;const o=i.last_flush;if(i.last_flush=t,i.status===Hi)if(i.wrap===2)e.adler=0,Ae(i,31),Ae(i,139),Ae(i,8),i.gzhead?(Ae(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ae(i,i.gzhead.time&255),Ae(i,i.gzhead.time>>8&255),Ae(i,i.gzhead.time>>16&255),Ae(i,i.gzhead.time>>24&255),Ae(i,i.level===9?2:i.strategy>=Mi||i.level<2?4:0),Ae(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Ae(i,i.gzhead.extra.length&255),Ae(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=qe(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=cs):(Ae(i,0),Ae(i,0),Ae(i,0),Ae(i,0),Ae(i,0),Ae(i,i.level===9?2:i.strategy>=Mi||i.level<2?4:0),Ae(i,Mm),i.status=Lr);else{let s=Ni+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=Mi||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,s|=a<<6,i.strstart!==0&&(s|=Bm),s+=31-s%31,i.status=Lr,jn(i,s),i.strstart!==0&&(jn(i,e.adler>>>16),jn(i,e.adler&65535)),e.adler=1}if(i.status===cs)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=qe(e.adler,i.pending_buf,i.pending-r,r)),yr(e),r=i.pending,i.pending===i.pending_buf_size));)Ae(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=qe(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=zi)}else i.status=zi;if(i.status===zi)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=qe(e.adler,i.pending_buf,i.pending-r,r)),yr(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.name.length?n=i.gzhead.name.charCodeAt(i.gzindex++)&255:n=0,Ae(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=qe(e.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.gzindex=0,i.status=ji)}else i.status=ji;if(i.status===ji)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=qe(e.adler,i.pending_buf,i.pending-r,r)),yr(e),r=i.pending,i.pending===i.pending_buf_size)){n=1;break}i.gzindex<i.gzhead.comment.length?n=i.gzhead.comment.charCodeAt(i.gzindex++)&255:n=0,Ae(i,n)}while(n!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=qe(e.adler,i.pending_buf,i.pending-r,r)),n===0&&(i.status=qi)}else i.status=qi;if(i.status===qi&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&yr(e),i.pending+2<=i.pending_buf_size&&(Ae(i,e.adler&255),Ae(i,e.adler>>8&255),e.adler=0,i.status=Lr)):i.status=Lr),i.pending!==0){if(yr(e),e.avail_out===0)return i.last_flush=-1,Dt}else if(e.avail_in===0&&Hc(t)<=Hc(o)&&t!==gr)return vr(e,ss);if(i.status===Hn&&e.avail_in!==0)return vr(e,ss);if(e.avail_in!==0||i.lookahead!==0||t!==Ir&&i.status!==Hn){let s=i.strategy===Mi?jm(i,t):i.strategy===xm?zm(i,t):qn[i.level].func(i,t);if((s===$r||s===rn)&&(i.status=Hn),s===je||s===$r)return e.avail_out===0&&(i.last_flush=-1),Dt;if(s===zn&&(t===Em?_m(i):t!==Mc&&(bm(i,0,0,!1),t===Tm&&(wr(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),yr(e),e.avail_out===0))return i.last_flush=-1,Dt}return t!==gr?Dt:i.wrap<=0?Nc:(i.wrap===2?(Ae(i,e.adler&255),Ae(i,e.adler>>8&255),Ae(i,e.adler>>16&255),Ae(i,e.adler>>24&255),Ae(i,e.total_in&255),Ae(i,e.total_in>>8&255),Ae(i,e.total_in>>16&255),Ae(i,e.total_in>>24&255)):(jn(i,e.adler>>>16),jn(i,e.adler&65535)),yr(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Dt:Nc)},Qm=e=>{if(!e||!e.state)return dt;const t=e.state.status;return t!==Hi&&t!==cs&&t!==zi&&t!==ji&&t!==qi&&t!==Lr&&t!==Hn?vr(e,dt):(e.state=null,t===Lr?vr(e,Sm):Dt)},Ym=(e,t)=>{let r=t.length;if(!e||!e.state)return dt;const n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==Hi||n.lookahead)return dt;if(i===1&&(e.adler=Nn(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(wr(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(r-n.w_size,r),0),t=l,r=n.w_size}const o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Gr(n);n.lookahead>=ke;){let l=n.strstart,c=n.lookahead-(ke-1);do n.ins_h=br(n,n.ins_h,n.window[l+ke-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--c);n.strstart=l,n.lookahead=ke-1,Gr(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ke-1,n.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,n.wrap=i,Dt};var Xm=Zm,Jm=Wc,ev=qc,tv=jc,rv=Vm,nv=Km,iv=Qm,ov=Ym,sv="pako deflate (from Nodeca project)",Wn={deflateInit:Xm,deflateInit2:Jm,deflateReset:ev,deflateResetKeep:tv,deflateSetHeader:rv,deflate:nv,deflateEnd:iv,deflateSetDictionary:ov,deflateInfo:sv};const av=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var cv=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(!!r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)av(r,n)&&(e[n]=r[n])}}return e},lv=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,o=e.length;n<o;n++){let s=e[n];r.set(s,i),i+=s.length}return r},Wi={assign:cv,flattenChunks:lv};let Vc=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Vc=!1}const Vn=new Uint8Array(256);for(let e=0;e<256;e++)Vn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Vn[254]=Vn[254]=1;var uv=e=>{let t,r,n,i,o,s=e.length,a=0;for(i=0;i<s;i++)r=e.charCodeAt(i),(r&64512)==55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)r=e.charCodeAt(i),(r&64512)==55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)==56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[o++]=r:r<2048?(t[o++]=192|r>>>6,t[o++]=128|r&63):r<65536?(t[o++]=224|r>>>12,t[o++]=128|r>>>6&63,t[o++]=128|r&63):(t[o++]=240|r>>>18,t[o++]=128|r>>>12&63,t[o++]=128|r>>>6&63,t[o++]=128|r&63);return t};const dv=(e,t)=>{if(t<65534&&e.subarray&&Vc)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var fv=(e,t)=>{let r,n;const i=t||e.length,o=new Array(i*2);for(n=0,r=0;r<i;){let s=e[r++];if(s<128){o[n++]=s;continue}let a=Vn[s];if(a>4){o[n++]=65533,r+=a-1;continue}for(s&=a===2?31:a===3?15:7;a>1&&r<i;)s=s<<6|e[r++]&63,a--;if(a>1){o[n++]=65533;continue}s<65536?o[n++]=s:(s-=65536,o[n++]=55296|s>>10&1023,o[n++]=56320|s&1023)}return dv(o,n)},hv=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)==128;)r--;return r<0||r===0?t:r+Vn[e[r]]>t?r:t},Zn={string2buf:uv,buf2string:fv,utf8border:hv};function pv(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Zc=pv;const Kc=Object.prototype.toString,{Z_NO_FLUSH:gv,Z_SYNC_FLUSH:mv,Z_FULL_FLUSH:vv,Z_FINISH:wv,Z_OK:Vi,Z_STREAM_END:bv,Z_DEFAULT_COMPRESSION:yv,Z_DEFAULT_STRATEGY:_v,Z_DEFLATED:Ev}=Ur;function Kn(e){this.options=Wi.assign({level:yv,method:Ev,chunkSize:16384,windowBits:15,memLevel:8,strategy:_v},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zc,this.strm.avail_out=0;let r=Wn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Vi)throw new Error(Or[r]);if(t.header&&Wn.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=Zn.string2buf(t.dictionary):Kc.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=Wn.deflateSetDictionary(this.strm,n),r!==Vi)throw new Error(Or[r]);this._dict_set=!0}}Kn.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let i,o;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?wv:gv,typeof e=="string"?r.input=Zn.string2buf(e):Kc.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(o===mv||o===vv)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=Wn.deflate(r,o),i===bv)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=Wn.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===Vi;if(r.avail_out===0){this.onData(r.output);continue}if(o>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0},Kn.prototype.onData=function(e){this.chunks.push(e)},Kn.prototype.onEnd=function(e){e===Vi&&(this.result=Wi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function us(e,t){const r=new Kn(t);if(r.push(e,!0),r.err)throw r.msg||Or[r.err];return r.result}function Tv(e,t){return t=t||{},t.raw=!0,us(e,t)}function Sv(e,t){return t=t||{},t.gzip=!0,us(e,t)}var kv=Kn,Cv=us,xv=Tv,Rv=Sv,Av=Ur,Dv={Deflate:kv,deflate:Cv,deflateRaw:xv,gzip:Rv,constants:Av};const Zi=30,Pv=12;var Fv=function(t,r){let n,i,o,s,a,l,c,d,p,h,f,g,m,k,F,A,H,$,Q,ue,ce,be,ye,fe;const ve=t.state;n=t.next_in,ye=t.input,i=n+(t.avail_in-5),o=t.next_out,fe=t.output,s=o-(r-t.avail_out),a=o+(t.avail_out-257),l=ve.dmax,c=ve.wsize,d=ve.whave,p=ve.wnext,h=ve.window,f=ve.hold,g=ve.bits,m=ve.lencode,k=ve.distcode,F=(1<<ve.lenbits)-1,A=(1<<ve.distbits)-1;e:do{g<15&&(f+=ye[n++]<<g,g+=8,f+=ye[n++]<<g,g+=8),H=m[f&F];t:for(;;){if($=H>>>24,f>>>=$,g-=$,$=H>>>16&255,$===0)fe[o++]=H&65535;else if($&16){Q=H&65535,$&=15,$&&(g<$&&(f+=ye[n++]<<g,g+=8),Q+=f&(1<<$)-1,f>>>=$,g-=$),g<15&&(f+=ye[n++]<<g,g+=8,f+=ye[n++]<<g,g+=8),H=k[f&A];r:for(;;){if($=H>>>24,f>>>=$,g-=$,$=H>>>16&255,$&16){if(ue=H&65535,$&=15,g<$&&(f+=ye[n++]<<g,g+=8,g<$&&(f+=ye[n++]<<g,g+=8)),ue+=f&(1<<$)-1,ue>l){t.msg="invalid distance too far back",ve.mode=Zi;break e}if(f>>>=$,g-=$,$=o-s,ue>$){if($=ue-$,$>d&&ve.sane){t.msg="invalid distance too far back",ve.mode=Zi;break e}if(ce=0,be=h,p===0){if(ce+=c-$,$<Q){Q-=$;do fe[o++]=h[ce++];while(--$);ce=o-ue,be=fe}}else if(p<$){if(ce+=c+p-$,$-=p,$<Q){Q-=$;do fe[o++]=h[ce++];while(--$);if(ce=0,p<Q){$=p,Q-=$;do fe[o++]=h[ce++];while(--$);ce=o-ue,be=fe}}}else if(ce+=p-$,$<Q){Q-=$;do fe[o++]=h[ce++];while(--$);ce=o-ue,be=fe}for(;Q>2;)fe[o++]=be[ce++],fe[o++]=be[ce++],fe[o++]=be[ce++],Q-=3;Q&&(fe[o++]=be[ce++],Q>1&&(fe[o++]=be[ce++]))}else{ce=o-ue;do fe[o++]=fe[ce++],fe[o++]=fe[ce++],fe[o++]=fe[ce++],Q-=3;while(Q>2);Q&&(fe[o++]=fe[ce++],Q>1&&(fe[o++]=fe[ce++]))}}else if(($&64)==0){H=k[(H&65535)+(f&(1<<$)-1)];continue r}else{t.msg="invalid distance code",ve.mode=Zi;break e}break}}else if(($&64)==0){H=m[(H&65535)+(f&(1<<$)-1)];continue t}else if($&32){ve.mode=Pv;break e}else{t.msg="invalid literal/length code",ve.mode=Zi;break e}break}}while(n<i&&o<a);Q=g>>3,n-=Q,g-=Q<<3,f&=(1<<g)-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=o<a?257+(a-o):257-(o-a),ve.hold=f,ve.bits=g};const on=15,Qc=852,Yc=592,Xc=0,ds=1,Jc=2,Ov=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Uv=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Iv=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Lv=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Qn=(e,t,r,n,i,o,s,a)=>{const l=a.bits;let c=0,d=0,p=0,h=0,f=0,g=0,m=0,k=0,F=0,A=0,H,$,Q,ue,ce,be=null,ye=0,fe;const ve=new Uint16Array(on+1),at=new Uint16Array(on+1);let pt=null,gt=0,or,ut,Et;for(c=0;c<=on;c++)ve[c]=0;for(d=0;d<n;d++)ve[t[r+d]]++;for(f=l,h=on;h>=1&&ve[h]===0;h--);if(f>h&&(f=h),h===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,a.bits=1,0;for(p=1;p<h&&ve[p]===0;p++);for(f<p&&(f=p),k=1,c=1;c<=on;c++)if(k<<=1,k-=ve[c],k<0)return-1;if(k>0&&(e===Xc||h!==1))return-1;for(at[1]=0,c=1;c<on;c++)at[c+1]=at[c]+ve[c];for(d=0;d<n;d++)t[r+d]!==0&&(s[at[t[r+d]]++]=d);if(e===Xc?(be=pt=s,fe=19):e===ds?(be=Ov,ye-=257,pt=Uv,gt-=257,fe=256):(be=Iv,pt=Lv,fe=-1),A=0,d=0,c=p,ce=o,g=f,m=0,Q=-1,F=1<<f,ue=F-1,e===ds&&F>Qc||e===Jc&&F>Yc)return 1;for(;;){or=c-m,s[d]<fe?(ut=0,Et=s[d]):s[d]>fe?(ut=pt[gt+s[d]],Et=be[ye+s[d]]):(ut=32+64,Et=0),H=1<<c-m,$=1<<g,p=$;do $-=H,i[ce+(A>>m)+$]=or<<24|ut<<16|Et|0;while($!==0);for(H=1<<c-1;A&H;)H>>=1;if(H!==0?(A&=H-1,A+=H):A=0,d++,--ve[c]==0){if(c===h)break;c=t[r+s[d]]}if(c>f&&(A&ue)!==Q){for(m===0&&(m=f),ce+=p,g=c-m,k=1<<g;g+m<h&&(k-=ve[g+m],!(k<=0));)g++,k<<=1;if(F+=1<<g,e===ds&&F>Qc||e===Jc&&F>Yc)return 1;Q=A&ue,i[Q]=f<<24|g<<16|ce-o|0}}return A!==0&&(i[ce+A]=c-m<<24|64<<16|0),a.bits=f,0};const $v=0,el=1,tl=2,{Z_FINISH:rl,Z_BLOCK:Gv,Z_TREES:Ki,Z_OK:Br,Z_STREAM_END:Bv,Z_NEED_DICT:Mv,Z_STREAM_ERROR:ft,Z_DATA_ERROR:nl,Z_MEM_ERROR:il,Z_BUF_ERROR:Nv,Z_DEFLATED:ol}=Ur,sl=1,al=2,cl=3,ll=4,ul=5,dl=6,fl=7,hl=8,pl=9,gl=10,Qi=11,Wt=12,fs=13,ml=14,hs=15,vl=16,wl=17,bl=18,yl=19,Yi=20,Xi=21,_l=22,El=23,Tl=24,Sl=25,kl=26,ps=27,Cl=28,xl=29,Ge=30,Rl=31,Hv=32,zv=852,jv=592,qv=15,Al=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Wv(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Dl=e=>{if(!e||!e.state)return ft;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=sl,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(zv),t.distcode=t.distdyn=new Int32Array(jv),t.sane=1,t.back=-1,Br},Pl=e=>{if(!e||!e.state)return ft;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Dl(e)},Fl=(e,t)=>{let r;if(!e||!e.state)return ft;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?ft:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,Pl(e))},Ol=(e,t)=>{if(!e)return ft;const r=new Wv;e.state=r,r.window=null;const n=Fl(e,t);return n!==Br&&(e.state=null),n},Vv=e=>Ol(e,qv);let Ul=!0,gs,ms;const Zv=e=>{if(Ul){gs=new Int32Array(512),ms=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Qn(el,e.lens,0,288,gs,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Qn(tl,e.lens,0,32,ms,0,e.work,{bits:5}),Ul=!1}e.lencode=gs,e.lenbits=9,e.distcode=ms,e.distbits=5},Il=(e,t,r,n)=>{let i;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),n>=o.wsize?(o.window.set(t.subarray(r-o.wsize,r),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),o.window.set(t.subarray(r-n,r-n+i),o.wnext),n-=i,n?(o.window.set(t.subarray(r-n,r),0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},Kv=(e,t)=>{let r,n,i,o,s,a,l,c,d,p,h,f,g,m,k=0,F,A,H,$,Q,ue,ce,be;const ye=new Uint8Array(4);let fe,ve;const at=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ft;r=e.state,r.mode===Wt&&(r.mode=fs),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,c=r.hold,d=r.bits,p=a,h=l,be=Br;e:for(;;)switch(r.mode){case sl:if(r.wrap===0){r.mode=fs;break}for(;d<16;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(r.wrap&2&&c===35615){r.check=0,ye[0]=c&255,ye[1]=c>>>8&255,r.check=qe(r.check,ye,2,0),c=0,d=0,r.mode=al;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=Ge;break}if((c&15)!==ol){e.msg="unknown compression method",r.mode=Ge;break}if(c>>>=4,d-=4,ce=(c&15)+8,r.wbits===0)r.wbits=ce;else if(ce>r.wbits){e.msg="invalid window size",r.mode=Ge;break}r.dmax=1<<r.wbits,e.adler=r.check=1,r.mode=c&512?gl:Wt,c=0,d=0;break;case al:for(;d<16;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(r.flags=c,(r.flags&255)!==ol){e.msg="unknown compression method",r.mode=Ge;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Ge;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&(ye[0]=c&255,ye[1]=c>>>8&255,r.check=qe(r.check,ye,2,0)),c=0,d=0,r.mode=cl;case cl:for(;d<32;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}r.head&&(r.head.time=c),r.flags&512&&(ye[0]=c&255,ye[1]=c>>>8&255,ye[2]=c>>>16&255,ye[3]=c>>>24&255,r.check=qe(r.check,ye,4,0)),c=0,d=0,r.mode=ll;case ll:for(;d<16;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&(ye[0]=c&255,ye[1]=c>>>8&255,r.check=qe(r.check,ye,2,0)),c=0,d=0,r.mode=ul;case ul:if(r.flags&1024){for(;d<16;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&(ye[0]=c&255,ye[1]=c>>>8&255,r.check=qe(r.check,ye,2,0)),c=0,d=0}else r.head&&(r.head.extra=null);r.mode=dl;case dl:if(r.flags&1024&&(f=r.length,f>a&&(f=a),f&&(r.head&&(ce=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(o,o+f),ce)),r.flags&512&&(r.check=qe(r.check,n,f,o)),a-=f,o+=f,r.length-=f),r.length))break e;r.length=0,r.mode=fl;case fl:if(r.flags&2048){if(a===0)break e;f=0;do ce=n[o+f++],r.head&&ce&&r.length<65536&&(r.head.name+=String.fromCharCode(ce));while(ce&&f<a);if(r.flags&512&&(r.check=qe(r.check,n,f,o)),a-=f,o+=f,ce)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=hl;case hl:if(r.flags&4096){if(a===0)break e;f=0;do ce=n[o+f++],r.head&&ce&&r.length<65536&&(r.head.comment+=String.fromCharCode(ce));while(ce&&f<a);if(r.flags&512&&(r.check=qe(r.check,n,f,o)),a-=f,o+=f,ce)break e}else r.head&&(r.head.comment=null);r.mode=pl;case pl:if(r.flags&512){for(;d<16;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(c!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Ge;break}c=0,d=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Wt;break;case gl:for(;d<32;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}e.adler=r.check=Al(c),c=0,d=0,r.mode=Qi;case Qi:if(r.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,r.hold=c,r.bits=d,Mv;e.adler=r.check=1,r.mode=Wt;case Wt:if(t===Gv||t===Ki)break e;case fs:if(r.last){c>>>=d&7,d-=d&7,r.mode=ps;break}for(;d<3;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}switch(r.last=c&1,c>>>=1,d-=1,c&3){case 0:r.mode=ml;break;case 1:if(Zv(r),r.mode=Yi,t===Ki){c>>>=2,d-=2;break e}break;case 2:r.mode=wl;break;case 3:e.msg="invalid block type",r.mode=Ge}c>>>=2,d-=2;break;case ml:for(c>>>=d&7,d-=d&7;d<32;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if((c&65535)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ge;break}if(r.length=c&65535,c=0,d=0,r.mode=hs,t===Ki)break e;case hs:r.mode=vl;case vl:if(f=r.length,f){if(f>a&&(f=a),f>l&&(f=l),f===0)break e;i.set(n.subarray(o,o+f),s),a-=f,o+=f,l-=f,s+=f,r.length-=f;break}r.mode=Wt;break;case wl:for(;d<14;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(r.nlen=(c&31)+257,c>>>=5,d-=5,r.ndist=(c&31)+1,c>>>=5,d-=5,r.ncode=(c&15)+4,c>>>=4,d-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ge;break}r.have=0,r.mode=bl;case bl:for(;r.have<r.ncode;){for(;d<3;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}r.lens[at[r.have++]]=c&7,c>>>=3,d-=3}for(;r.have<19;)r.lens[at[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,fe={bits:r.lenbits},be=Qn($v,r.lens,0,19,r.lencode,0,r.work,fe),r.lenbits=fe.bits,be){e.msg="invalid code lengths set",r.mode=Ge;break}r.have=0,r.mode=yl;case yl:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[c&(1<<r.lenbits)-1],F=k>>>24,A=k>>>16&255,H=k&65535,!(F<=d);){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(H<16)c>>>=F,d-=F,r.lens[r.have++]=H;else{if(H===16){for(ve=F+2;d<ve;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(c>>>=F,d-=F,r.have===0){e.msg="invalid bit length repeat",r.mode=Ge;break}ce=r.lens[r.have-1],f=3+(c&3),c>>>=2,d-=2}else if(H===17){for(ve=F+3;d<ve;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}c>>>=F,d-=F,ce=0,f=3+(c&7),c>>>=3,d-=3}else{for(ve=F+7;d<ve;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}c>>>=F,d-=F,ce=0,f=11+(c&127),c>>>=7,d-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ge;break}for(;f--;)r.lens[r.have++]=ce}}if(r.mode===Ge)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Ge;break}if(r.lenbits=9,fe={bits:r.lenbits},be=Qn(el,r.lens,0,r.nlen,r.lencode,0,r.work,fe),r.lenbits=fe.bits,be){e.msg="invalid literal/lengths set",r.mode=Ge;break}if(r.distbits=6,r.distcode=r.distdyn,fe={bits:r.distbits},be=Qn(tl,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,fe),r.distbits=fe.bits,be){e.msg="invalid distances set",r.mode=Ge;break}if(r.mode=Yi,t===Ki)break e;case Yi:r.mode=Xi;case Xi:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,r.hold=c,r.bits=d,Fv(e,h),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,n=e.input,a=e.avail_in,c=r.hold,d=r.bits,r.mode===Wt&&(r.back=-1);break}for(r.back=0;k=r.lencode[c&(1<<r.lenbits)-1],F=k>>>24,A=k>>>16&255,H=k&65535,!(F<=d);){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(A&&(A&240)==0){for($=F,Q=A,ue=H;k=r.lencode[ue+((c&(1<<$+Q)-1)>>$)],F=k>>>24,A=k>>>16&255,H=k&65535,!($+F<=d);){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}c>>>=$,d-=$,r.back+=$}if(c>>>=F,d-=F,r.back+=F,r.length=H,A===0){r.mode=kl;break}if(A&32){r.back=-1,r.mode=Wt;break}if(A&64){e.msg="invalid literal/length code",r.mode=Ge;break}r.extra=A&15,r.mode=_l;case _l:if(r.extra){for(ve=r.extra;d<ve;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=El;case El:for(;k=r.distcode[c&(1<<r.distbits)-1],F=k>>>24,A=k>>>16&255,H=k&65535,!(F<=d);){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if((A&240)==0){for($=F,Q=A,ue=H;k=r.distcode[ue+((c&(1<<$+Q)-1)>>$)],F=k>>>24,A=k>>>16&255,H=k&65535,!($+F<=d);){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}c>>>=$,d-=$,r.back+=$}if(c>>>=F,d-=F,r.back+=F,A&64){e.msg="invalid distance code",r.mode=Ge;break}r.offset=H,r.extra=A&15,r.mode=Tl;case Tl:if(r.extra){for(ve=r.extra;d<ve;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,d-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ge;break}r.mode=Sl;case Sl:if(l===0)break e;if(f=h-l,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ge;break}f>r.wnext?(f-=r.wnext,g=r.wsize-f):g=r.wnext-f,f>r.length&&(f=r.length),m=r.window}else m=i,g=s-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do i[s++]=m[g++];while(--f);r.length===0&&(r.mode=Xi);break;case kl:if(l===0)break e;i[s++]=r.length,l--,r.mode=Xi;break;case ps:if(r.wrap){for(;d<32;){if(a===0)break e;a--,c|=n[o++]<<d,d+=8}if(h-=l,e.total_out+=h,r.total+=h,h&&(e.adler=r.check=r.flags?qe(r.check,i,h,s-h):Nn(r.check,i,h,s-h)),h=l,(r.flags?c:Al(c))!==r.check){e.msg="incorrect data check",r.mode=Ge;break}c=0,d=0}r.mode=Cl;case Cl:if(r.wrap&&r.flags){for(;d<32;){if(a===0)break e;a--,c+=n[o++]<<d,d+=8}if(c!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Ge;break}c=0,d=0}r.mode=xl;case xl:be=Bv;break e;case Ge:be=nl;break e;case Rl:return il;case Hv:default:return ft}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,r.hold=c,r.bits=d,(r.wsize||h!==e.avail_out&&r.mode<Ge&&(r.mode<ps||t!==rl))&&Il(e,e.output,e.next_out,h-e.avail_out),p-=e.avail_in,h-=e.avail_out,e.total_in+=p,e.total_out+=h,r.total+=h,r.wrap&&h&&(e.adler=r.check=r.flags?qe(r.check,i,h,e.next_out-h):Nn(r.check,i,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Wt?128:0)+(r.mode===Yi||r.mode===hs?256:0),(p===0&&h===0||t===rl)&&be===Br&&(be=Nv),be},Qv=e=>{if(!e||!e.state)return ft;let t=e.state;return t.window&&(t.window=null),e.state=null,Br},Yv=(e,t)=>{if(!e||!e.state)return ft;const r=e.state;return(r.wrap&2)==0?ft:(r.head=t,t.done=!1,Br)},Xv=(e,t)=>{const r=t.length;let n,i,o;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==Qi)?ft:n.mode===Qi&&(i=1,i=Nn(i,t,r,0),i!==n.check)?nl:(o=Il(e,t,r,r),o?(n.mode=Rl,il):(n.havedict=1,Br))};var Jv=Pl,ew=Fl,tw=Dl,rw=Vv,nw=Ol,iw=Kv,ow=Qv,sw=Yv,aw=Xv,cw="pako inflate (from Nodeca project)",Vt={inflateReset:Jv,inflateReset2:ew,inflateResetKeep:tw,inflateInit:rw,inflateInit2:nw,inflate:iw,inflateEnd:ow,inflateGetHeader:sw,inflateSetDictionary:aw,inflateInfo:cw};function lw(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var uw=lw;const Ll=Object.prototype.toString,{Z_NO_FLUSH:dw,Z_FINISH:fw,Z_OK:Yn,Z_STREAM_END:vs,Z_NEED_DICT:ws,Z_STREAM_ERROR:hw,Z_DATA_ERROR:$l,Z_MEM_ERROR:pw}=Ur;function Xn(e){this.options=Wi.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zc,this.strm.avail_out=0;let r=Vt.inflateInit2(this.strm,t.windowBits);if(r!==Yn)throw new Error(Or[r]);if(this.header=new uw,Vt.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Zn.string2buf(t.dictionary):Ll.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Vt.inflateSetDictionary(this.strm,t.dictionary),r!==Yn)))throw new Error(Or[r])}Xn.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let o,s,a;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?fw:dw,Ll.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),o=Vt.inflate(r,s),o===ws&&i&&(o=Vt.inflateSetDictionary(r,i),o===Yn?o=Vt.inflate(r,s):o===$l&&(o=ws));r.avail_in>0&&o===vs&&r.state.wrap>0&&e[r.next_in]!==0;)Vt.inflateReset(r),o=Vt.inflate(r,s);switch(o){case hw:case $l:case ws:case pw:return this.onEnd(o),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||o===vs))if(this.options.to==="string"){let l=Zn.utf8border(r.output,r.next_out),c=r.next_out-l,d=Zn.buf2string(r.output,l);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(l,l+c),0),this.onData(d)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(o===Yn&&a===0)){if(o===vs)return o=Vt.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},Xn.prototype.onData=function(e){this.chunks.push(e)},Xn.prototype.onEnd=function(e){e===Yn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Wi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function bs(e,t){const r=new Xn(t);if(r.push(e),r.err)throw r.msg||Or[r.err];return r.result}function gw(e,t){return t=t||{},t.raw=!0,bs(e,t)}var mw=Xn,vw=bs,ww=gw,bw=bs,yw=Ur,_w={Inflate:mw,inflate:vw,inflateRaw:ww,ungzip:bw,constants:yw};const{Deflate:Ew,deflate:Tw,deflateRaw:Sw,gzip:kw}=Dv,{Inflate:Cw,inflate:xw,inflateRaw:Rw,ungzip:Aw}=_w;var Dw=Ew,Pw=Tw,Fw=Sw,Ow=kw,Uw=Cw,Iw=xw,Lw=Rw,Gl=Aw,$w=Ur,A0={Deflate:Dw,deflate:Pw,deflateRaw:Fw,gzip:Ow,Inflate:Uw,inflate:Iw,inflateRaw:Lw,ungzip:Gl,constants:$w};const D0=null,ys=(0,y.LV)(),Bl=new TextDecoder,Ml=new TextEncoder;class Gw{constructor(t,r=0){this.retainFor=r;try{this.weakRef=new WeakRef(t)}catch{}this.retain(t)}retain(t){this.retainTimeout&&clearTimeout(this.retainTimeout),this.strongRef=t,this.retainTimeout=setTimeout(()=>{this.strongRef=void 0,this.retainTimeout=void 0},this.retainFor)}deref(){var t,r;const n=(r=this.strongRef)!=null?r:(t=this.weakRef)==null?void 0:t.deref();return n&&this.retain(n),n}}class Bw{constructor(t){this.root=t,this.ongoingReqests=new Map,this.usageFile=u.Uri.joinPath(this.root,"usageHistory.json"),this._disposable=u.Disposable.from(...this.registerCommands())}dispose(){this._disposable.dispose()}registerCommands(){return[u.commands.registerCommand("remoteHub.enableIndexing",async()=>{const t={title:ys("search download prompt allow","Allow")},r={title:ys("search download prompt cancel","Cancel"),isCloseAffordance:!0};await u.window.showInformationMessage(ys("search download prompt",`In order to provide full-text search capabilities, a local index of the repository must be created.

Do you want to allow a local index to be created? This can be configured with the "Repo Limit" and "Size Limit" settings of Remote Hub`),{modal:!0},t,r)===t&&await Fe.update("search.download.enabled",!0,u.ConfigurationTarget.Global)}),u.commands.registerCommand("remoteHub.deleteLocalRepositoryData",async()=>{const t=i=>{const o=[{power:9,name:"GB"},{power:6,name:"MB"},{power:3,name:"kB"},{power:0,name:"B"}];for(const s of o)if(i>10**s.power)return`${Math.round(i/10**s.power)} ${s.name}`;return"Unknown size"},r=await this.listTars();if(r.length===0){await u.window.showInformationMessage("No Local Data Found");return}const n=u.window.createQuickPick();n.canSelectMany=!0,n.items=r.map(({name:i,size:o,path:s})=>({label:i,path:s,description:o?t(o):void 0})),n.show(),n.onDidAccept(async()=>{n.hide();for(const{label:i,path:o}of n.selectedItems){const s=u.workspace.fs.delete(o),a=u.window.setStatusBarMessage(`$(loading) Deleting ${i}`,s);await s,a.dispose()}}),n.onDidHide(()=>n.dispose())}),u.commands.registerCommand("remoteHub.deleteAllLocalRepositoryData",()=>u.window.withProgress({location:u.ProgressLocation.Notification,title:"Deleting Local Data..."},()=>Promise.all([u.workspace.fs.delete(this.root,{recursive:!0})])))]}getTarFromMemory(t){var r;if(t===this.lastReadKey){const n=(r=this.lastReadValue)==null?void 0:r.deref();if(n)return n;me.log("Weakref deallocated.")}}async getTarFromDisk(t){try{const r=await u.workspace.fs.readFile(t);return!r||!r.length?void 0:r}catch(r){if(r.code!=="FileNotFound")throw r;return}}async getTarFromNetwork(t,r){if(Fe.get("search.download.enabled")!==!0)throw Error("Unable to search without an index");const n=await t.getTarGz(r);if(n===void 0)throw Error("Unable to search without an index");return n}async getTar(t,r){const{repo:n,HEAD:{sha:i}}=await t.getMetadata(r),o=Object.values(n),s=`${o.join("/")}/${i}`,a=Date.now(),l=()=>`${Date.now()-a}ms`,c=u.Uri.joinPath(this.root,"tars",...o,i),d=c.toString(),p=this.ongoingReqests.get(d);if(me.log(`Geting .tar for ${s}`),p)return p;const h=(async()=>{const f=this.getTarFromMemory(d);if(f)return me.log(`Got .tar from memory in ${l()}`),f;let g=await this.getTarFromDisk(c);if((g==null?void 0:g.length)?me.log(`Got .tar.gz from disk in ${l()}`):(g=await this.getTarFromNetwork(t,r),me.log(`Got .tar.gz from network in ${l()}`),u.workspace.fs.writeFile(c,g).then(()=>me.debug(`Sucessfully wrote tarball to disk in ${l()}`),F=>me.error(F,`Error writing tarball to disk in ${l()}`))),!g||!g.length)throw Error("Internal Error: Invalid search index. Try deleting repository data and running search again: `RemoteHub: Delete Local Repository Data...`");const m=zl("unzip",()=>Gl(g)),k=zl("readTar",()=>(0,zg.t9)(m));return k.entries=k.entries.filter(F=>{var A;return((A=F.header.typeFlag)==null?void 0:A.name)==="Normal"}),k.entries.forEach(F=>{F.header.fullFileName=F.header.fullFileName.replace(/^[^/]+/,"")}),this.lastReadValue=new Gw(k,Number(Date.now())-a),this.lastReadKey=d,k})();return h.finally(()=>(this.ongoingReqests.delete(d),this.markCacheEntryUsed(`${s}`).catch(f=>me.log(`Error marking entry used: ${f}`)))).finally(()=>this.cleanUpCache().catch(f=>me.log(`Error cleaning cache: ${f}`))),this.ongoingReqests.set(d,h),h}async readDir(t){try{return(await u.workspace.fs.readDirectory(t)).map(r=>u.Uri.joinPath(t,r[0]))}catch{return[]}}async listTars(){const t=await this.readDir(u.Uri.joinPath(this.root,"tars")).catch(()=>[]),r=(await Promise.all(t.map(i=>this.readDir(i)))).flat(),n=(await Promise.all(r.map(i=>this.readDir(i)))).flat();return Promise.all(n.map(async i=>({name:i.path.replace(/^.*\/tars\//,""),path:i,size:(await u.workspace.fs.stat(i)).size})))}async markCacheEntryUsed(t){let r;try{r=JSON.parse(Bl.decode(await u.workspace.fs.readFile(this.usageFile)))}catch(n){me.log("Error reading usage data.",n),r={}}r[t]=Number(Date.now()),await u.workspace.fs.writeFile(this.usageFile,Ml.encode(JSON.stringify(r)))}async cleanUpCache(){var t,r;me.log("Cleaning up search cache...");const n=await this.listTars();let i;try{i=JSON.parse(Bl.decode(await u.workspace.fs.readFile(this.usageFile)))}catch(p){me.log("Error reading usage data. All existing indicies will be discarded.",p),i={}}const o=[];n.forEach(p=>{var h;const f=/^([^/]*\/[^/]*)\//.exec(p.name);if(!f)throw Error("Unexpected repo entry");const g=f[1],m=(h=i[p.name])!=null?h:0;o.push({...p,lastUsed:m,repo:g})}),o.sort((p,h)=>h.lastUsed-p.lastUsed);let s=0;const a=[],l=new Map,c=(t=Fe.get("search.download.sizeLimit"))!=null?t:100,d=(r=Fe.get("search.download.repoLimit"))!=null?r:4;o.forEach(p=>{var h,f;(p.lastUsed===0||s>c||((h=l.get(p.repo))!=null?h:0)>d)&&a.push(p),s+=p.size,l.set(p.repo,((f=l.get(p.repo))!=null?f:0)+1)}),await Promise.all(a.map(async p=>{await u.workspace.fs.delete(p.path),delete i[p.name],me.log(`Deleted cache entry for ${p.name}`)})),await u.workspace.fs.writeFile(this.usageFile,Ml.encode(JSON.stringify(i)))}}async function Nl(e,t,r,n,i,o,s){return _s("provideTextSearchResults",async()=>{const a=Mg(n.pattern,Boolean(n.isRegExp),{matchCase:n.isCaseSensitive,wholeWord:n.isWordMatch,multiline:n.isMultiline,global:!0}),l=await _s("fetch tarball",async()=>u.window.withProgress({location:u.ProgressLocation.Window},k=>(k.report({message:"Fetching index..."}),r.getTar(e,i.folder))));if(s.isCancellationRequested)return{limitHit:!1};const{maxResults:c,maxFileSize:d,includes:p,excludes:h}=i,f=Mw(e.getVirtualUri(i.folder),l,t);if(s.isCancellationRequested)return{limitHit:!0};let g=c;const m=Ng(f,p,h,d);return _s("searchFiles",async()=>{var k,F;let A=0;for(const H of f){if(!m.has(H.path))continue;const $=Hg(H.contents,H.path,a,{beforeContext:(k=i.beforeContext)!=null?k:0,afterContext:(F=i.afterContext)!=null?F:0,previewOptions:i.previewOptions,remainingResultQuota:g});for(const Q of $)o.report({...Q,uri:u.Uri.joinPath(i.folder,Q.uri.path)});if(g-=$.length,g<=0)return{limitHit:!0};if(A++,A%1e4==0&&(await new Promise(Q=>setTimeout(Q,0)),s.isCancellationRequested))return{limitHit:!1}}return{limitHit:!1}})})}function Mw(e,t,r){const n=t.entries,i=r.getChanges(e);if(i.length===0)return n.map(d=>({contents:d.dataAsBytes,path:d.header.fullFileName,size:d.dataAsBytes.byteLength}));const o=Vp(i,d=>d.fileType===u.FileType.File),s=lr(o,d=>{if(d.type!==Te.Created)return;const p=Hl(r.getContent(d.uri));return{path:d.uri.path,size:p.length,contents:p}}),a=lr(o,d=>{if(d.type!==Te.Changed)return;const p=Hl(r.getContent(d.uri));return{path:d.uri.path,size:p.length,contents:p}}),l=new Set(Kp(ki(a,d=>d.path),lr(o,d=>{if(d.type===Te.Deleted)return d.uri.path})));return[...lr(n,d=>{if(!l.has(d.header.fullFileName))return{contents:d.dataAsBytes,path:d.header.fullFileName,size:d.dataAsBytes.byteLength}}),...s,...a]}function Hl(e){if(e===void 0)throw Error("Unexpected undefined value");return e}function zl(e,t){const r=Date.now(),n=t();return me.log(`${e} time: ${Date.now()-r}`),n}async function _s(e,t){const r=Date.now(),n=await t();return me.log(`${e} time: ${Date.now()-r}`),n}const Es=(0,y.LV)(),Nw={dispose:()=>{}},Hw=/(\/|\\)/g,Jn=class{constructor(e,t,r,n,i){this.providerService=e,this.azdo=t,this.changeStore=n,this.tarPit=i,this._onDidChangeFile=new u.EventEmitter,this.fsCache=new Map,this.fileSearchCache=new Map,this.pathTypeMap={},this.disposable=u.Disposable.from(u.workspace.registerFileSystemProvider(Jn.scheme,this,{isCaseSensitive:!0,isReadonly:!0}),u.workspace.registerFileSearchProvider(Jn.scheme,this),u.workspace.registerTextSearchProvider(Jn.scheme,this),r.onDidChange(o=>{this.fsCache.clear(),this.updateOpenDocuments(e.getProviderUri(o))}))}get onDidChangeFile(){return this._onDidChangeFile.event}dispose(){var e;(e=this.disposable)==null||e.dispose()}getCache(e){return this.fsCache}updateOpenDocuments(e){const t=u.workspace.textDocuments.map(r=>{if(!(r.uri.scheme!==Jn.scheme||!An(r.uri,e)))return{uri:r.uri,type:u.FileChangeType.Changed}}).filter(r=>Boolean(r));t.length!==0&&this._onDidChangeFile.fire(t)}watch(){return Nw}async stat(e){const t=await this.azdo.getMetadata(e);if(!t.path)return{type:u.FileType.Directory,mtime:0,ctime:0,size:0};if(t.path in this.pathTypeMap||await this.updateWorkspaceItemMap(t,!0),t.path in this.pathTypeMap)return this.pathTypeMap[t.path]===u.FileType.Directory?{type:u.FileType.Directory,mtime:0,ctime:0,size:0}:{type:u.FileType.File,mtime:0,ctime:0,size:0};throw u.FileSystemError.FileNotFound()}async updateWorkspaceItemMap(e,t){const r=new Array,n=await this.azdo.getRepoItems(e);for(const i of n){const o=i.path.substring(1);if(o!==e.path||t){const s=i.isFolder===!0?u.FileType.Directory:u.FileType.File;this.pathTypeMap[o]=s,r.push([o,s])}}return r}async readDirectory(e){const t=await this.azdo.getMetadata(e);return this.updateWorkspaceItemMap(t,!1)}createDirectory(e){throw u.FileSystemError.NoPermissions()}async readFile(e){return await this.azdo.getFileContent(e)}writeFile(e,t,r){throw u.FileSystemError.NoPermissions()}delete(e,t){throw u.FileSystemError.NoPermissions()}rename(e,t,r){throw u.FileSystemError.NoPermissions()}copy(e,t,r){throw u.FileSystemError.NoPermissions()}async provideFileSearchResults(e,t,r){let n=this.fileSearchCache.get(t.folder.toString(!0));if(n===void 0){const o=await this.azdo.getRepoFileNames(t.folder);if(o===void 0||r.isCancellationRequested)return[];n=[...ki(o,s=>Jr.prepareSlow(s))],this.fileSearchCache.set(t.folder.toString(!0),n)}if(t.maxResults===void 0||t.maxResults===0||t.maxResults>=n.length)return n.map(s=>u.Uri.joinPath(t.folder,s.target));const i=Jr.go(e.pattern.replace(Hw,"/"),n,{allowTypo:!0,limit:t.maxResults}).map(o=>u.Uri.joinPath(t.folder,o.target));return Jr.cleanup(),i}async provideTextSearchResults(e,t,r,n){const i=[];if(Fe.get("search.download.enabled"))try{return Nl(this.providerService,this.changeStore,this.tarPit,e,t,r,n)}catch{i.push({text:Es("index error","Error searching with index, falling back to standard search"),type:u.TextSearchCompleteMessageType.Warning})}i.push({text:Es("enable index","To improve search accuracy, [enable indexing](command:remoteHub.enableIndexing)"),type:u.TextSearchCompleteMessageType.Information}),(e.isCaseSensitive||e.isRegExp||e.isWordMatch)&&i.push({text:Es("flags not supported","Search flags are not supported by GitHub search. Enable indexing for full search features."),type:u.TextSearchCompleteMessageType.Warning});const o=await this.azdo.searchCodeQuery(e.pattern,t.folder,{maxResults:t.maxResults,context:{before:t.beforeContext,after:t.afterContext}});if(o.warnings&&o.warnings.forEach(a=>{i.push({text:a,type:u.TextSearchCompleteMessageType.Warning})}),o===void 0)return{limitHit:!0,message:i};let s;for(const a of o.matches)s=u.Uri.joinPath(t.folder,a.path),r.report({uri:s,ranges:a.ranges,preview:{text:a.preview,matches:a.matches}});return{limitHit:!1,message:i}}async fsQuery(e,t,r){const n=`${e.toString()}:${zw(t)}`;let i=r==null?void 0:r.get(n);return i!==void 0||(i=await this.azdo.queryRepositoryObject(e,t),i===void 0?r==null||r.delete(n):r==null||r.set(n,i)),i}};let jl=Jn;jl.scheme="azdo";function zw(e){let t=0;if(e.length===0)return t;let r;const n=e.length;for(let i=0;i<n;i++)r=e.charCodeAt(i),t=(t<<5)-t+r,t|=0;return t}const jw=/^https:\/\/([^.]+)\.visualstudio\.com(?:\/defaultcollection)?\/([^/]+)?\/?(?:[^/]+)?\/?(?:\/pullrequest\/(?:\d+))?(?:\/commit\/?([^/^?]+))?\/?/i,ql=/^https:\/\/dev\.azure\.com(?:\/defaultcollection)?\/([^/]+)?\/?([^/]+)?\/?(?:_git)?\/?([^/]+)?\/?(?:\/pullrequest\/(?:\d+))?(?:\/commit\/?([^/^?]+))?\/?/i,Zt=(0,y.LV)();class qw{constructor(t,r){this.providerService=t,this.memento=r}canOpenRemoteUrl(t){const r=jw.exec(t),n=ql.exec(t);if(r){const[,,,i,,o,,s,,a]=r;switch(i||o||s||a){case"pull":break;case"blob":return ze.File;case"tree":return ze.Branch;case"commit":return ze.Commit;default:return ze.Repository}}else if(n){const[,,,i,,o,,s,,a]=n;switch(i||o||s||a){case"pull":break;case"blob":return ze.File;case"tree":return ze.Branch;case"commit":return ze.Commit;default:return ze.Repository}}}async openWorkspaceForRemoteUrl(t,r=Be.CurrentWindow){const n=ql.exec(t);if(n){const[,i,o,s,a,l,c,d,p,h,f,g]=n,m=a||c||p||f;let k=l||d||h||g||void 0;if(m==="pull")return this.openWorkspaceForPullRequest(r,i,o,s,k);let F;if(m==="blob"){const A=this.createVirtualUri(He.baseVirtualWorkspaceUri,{repo:{owner:i,project:o,name:s}});if(F=k,k=void 0,F){const $=(await this.providerService.getBranches(A,{query:F.split("/")[0]})).branches.map(Q=>`${Q.name}/`).sort((Q,ue)=>ue.length-Q.length);for(const Q of $)if(F.startsWith(Q)){k=Q.slice(0,-1),F=F.substr(k.length);break}}}return this.openWorkspaceForRepository(r,i,o,s,m,k,F)}}createVirtualUri(t,{repo:r,ref:n,pullRequest:i},o){return t.with({authority:`azdo${n?`+${n}${i?`~${i}`:""}`:""}`,path:`/${r.owner}/${r.project}/${r.name}${o?`${o.startsWith("/")?"":"/"}${o}`:""}`})}getExternalUri(t){const r=`https://dev.azure.com/${t.repo.owner}/${t.repo.project}/_git/${t.repo.name}`;return u.Uri.parse(r)}getProviderRootUri(t){return pc(t)}getRelativeFilePath(t,r){const[,,,,...n]=Rn(t,r).split("/");return n.join("/")||""}async openWorkspaceForRepository(t,r,n,i,o,s,a){if(o==="pull")return this.openWorkspaceForPullRequest(t,r,n,i,s);const l=this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i},ref:s}),c=await this.providerService.getMetadata(l);await _t(l,c.name,t,a?{memento:this.memento,paths:[a]}:void 0)}async openWorkspaceForPullRequest(t,r,n,i,o){var s,a,l,c;const d=await this.providerService.getPullRequest(this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i}}),o);let p;if(d)if((a=(s=d.refs)==null?void 0:s.head)==null?void 0:a.exists)p=this.providerService.createVirtualUri("azdo",{repo:{owner:d.refs.head.owner,project:d.refs.head.repo,name:d.refs.head.repo},ref:d.refs.head.branch,pullRequest:d.id});else if((c=(l=d.refs)==null?void 0:l.base)==null?void 0:c.exists){const h=Zt("pr source branch missing prompt confirm","Open Respository"),f=Zt("pr source branch missing prompt cancel","Cancel");if(await u.window.showInformationMessage(Zt("pr source branch missing prompt",`Unable to find the source branch for pull request #{0}.

Do you want to open the repository on the target branch instead?`,d.id),h,f)!==h)return;p=this.providerService.createVirtualUri("azdo",{repo:{owner:d.refs.base.owner,project:d.refs.base.owner,name:d.refs.base.repo},ref:d.refs.base.branch,pullRequest:d.id})}else{const h=Zt("pr branches missing prompt confirm","Open Respository"),f=Zt("pr branches missing prompt cancel","Cancel");if(await u.window.showInformationMessage(Zt("pr branches missing prompt",`Unable to find either the source or target branch for pull request #{0}.

Do you want to open the repository on the default branch instead?`,d.id),h,f)!==h)return;p=this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i}})}else{const h=Zt("pr missing prompt confirm","Open Respository"),f=Zt("pr missing prompt cancel","Cancel");if(await u.window.showInformationMessage(Zt("pr missing prompt",`Unable to find pull request.

Do you want to open the repository on the default branch instead?`),h,f)!==h)return;p=this.providerService.createVirtualUri("azdo",{repo:{owner:r,project:n,name:i}})}await _t(p,`${r}/${i}`,t)}}class P0{dispose(){}}class Ww{constructor(t){this.providerService=t,this.providers=[],this.services=new Map,this.disposable=u.Disposable.from(t.onDidChangeRepositories(r=>{for(const n of r.added)this.repositoryOpened(n);for(const n of r.removed)this.repositoryClosed(n)}));for(const r of this.providerService.repositories)this.repositoryOpened(r)}dispose(){this.disposable.dispose()}register(t){const r=this.providers.length;return this.providers.push(t),{dispose:()=>this.providers.splice(r,1)}}async repositoryOpened(t){for(const r of this.providers){const n=await r.handles(this.providerService,t);if(n!==void 0){const i=n();this.services.set(t.uri.toString(),{service:i})}}}repositoryClosed(t){const r=this.services.get(t.uri.toString());r!==void 0&&(r.service.dispose(),this.services.delete(t.uri.toString()))}}/*! (c) Andrea Giammarchi - ISC */var Ji={};try{(function(e,t){if(new e("q=%2B").get("q")!==t||new e({q:t}).get("q")!==t||new e([["q",t]]).get("q")!==t||new e(`q=
`).toString()!=="q=%0A"||new e({q:" &"}).toString()!=="q=+%26"||new e({q:"%zx"}).toString()!=="q=%25zx")throw e;Ji.URLSearchParams=e})(URLSearchParams,"+")}catch(e){(function(t,r,n){"use strict";var i=t.create,o=t.defineProperty,s=/[!'\(\)~]|%20|%00/g,a=/%(?![0-9a-fA-F]{2})/g,l=/\+/g,c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},d={append:function(A,H){g(this._ungap,A,H)},delete:function(A){delete this._ungap[A]},get:function(A){return this.has(A)?this._ungap[A][0]:null},getAll:function(A){return this.has(A)?this._ungap[A].slice(0):[]},has:function(A){return A in this._ungap},set:function(A,H){this._ungap[A]=[r(H)]},forEach:function(A,H){var $=this;for(var Q in $._ungap)$._ungap[Q].forEach(ue,Q);function ue(ce){A.call(H,ce,r(Q),$)}},toJSON:function(){return{}},toString:function(){var A=[];for(var H in this._ungap)for(var $=k(H),Q=0,ue=this._ungap[H];Q<ue.length;Q++)A.push($+"="+k(ue[Q]));return A.join("&")}};for(var p in d)o(h.prototype,p,{configurable:!0,writable:!0,value:d[p]});Ji.URLSearchParams=h;function h(A){var H=i(null);switch(o(this,"_ungap",{value:H}),!0){case!A:break;case typeof A=="string":A.charAt(0)==="?"&&(A=A.slice(1));for(var $=A.split("&"),Q=0,ue=$.length;Q<ue;Q++){var ce=$[Q],be=ce.indexOf("=");-1<be?g(H,m(ce.slice(0,be)),m(ce.slice(be+1))):ce.length&&g(H,m(ce),"")}break;case n(A):for(var Q=0,ue=A.length;Q<ue;Q++){var ce=A[Q];g(H,ce[0],ce[1])}break;case"forEach"in A:A.forEach(f,H);break;default:for(var ye in A)g(H,ye,A[ye])}}function f(A,H){g(this,H,A)}function g(A,H,$){var Q=n($)?$.join(","):$;H in A?A[H].push(Q):A[H]=[Q]}function m(A){return decodeURIComponent(A.replace(a,"%25").replace(l," "))}function k(A){return encodeURIComponent(A).replace(s,F)}function F(A){return c[A]}})(Object,String,Array.isArray)}(function(e){var t=!1;try{t=!!Symbol.iterator}catch(n){}"forEach"in e||(e.forEach=function(i,o){var s=this,a=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(l){!l.length||l in a||(a[l]=s.getAll(l)).forEach(function(c){i.call(o,c,l,s)})})}),"keys"in e||(e.keys=function(){return r(this,function(i,o){this.push(o)})}),"values"in e||(e.values=function(){return r(this,function(i,o){this.push(i)})}),"entries"in e||(e.entries=function(){return r(this,function(i,o){this.push([o,i])})}),t&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var i=this.entries(),o=i.next(),s=o.done,a=[],l=Object.create(null),c,d,p;!s;)p=o.value,d=p[0],a.push(d),d in l||(l[d]=[]),l[d].push(p[1]),o=i.next(),s=o.done;for(a.sort(),c=0;c<a.length;c++)this.delete(a[c]);for(c=0;c<a.length;c++)d=a[c],this.append(d,l[d].shift())});function r(n,i){var o=[];return n.forEach(i,o),t?o[Symbol.iterator]():{next:function(){var s=o.shift();return{done:s===void 0,value:s}}}}(function(n){var i=n.defineProperty,o=n.getOwnPropertyDescriptor,s=function(p){function h(m,k){e.append.call(this,m,k),m=this.toString(),p.set.call(this._usp,m?"?"+m:"")}function f(m){e.delete.call(this,m),m=this.toString(),p.set.call(this._usp,m?"?"+m:"")}function g(m,k){e.set.call(this,m,k),m=this.toString(),p.set.call(this._usp,m?"?"+m:"")}return function(m,k){return m.append=h,m.delete=f,m.set=g,i(m,"_usp",{configurable:!0,writable:!0,value:k})}},a=function(p){return function(h,f){return i(h,"_searchParams",{configurable:!0,writable:!0,value:p(f,h)}),f}},l=function(p){var h=p.append;p.append=e.append,URLSearchParams.call(p,p._usp.search.slice(1)),p.append=h},c=function(p,h){if(!(p instanceof h))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+h.name)},d=function(p){var h=p.prototype,f=o(h,"searchParams"),g=o(h,"href"),m=o(h,"search"),k;!f&&m&&m.set&&(k=a(s(m)),n.defineProperties(h,{href:{get:function(){return g.get.call(this)},set:function(F){var A=this._searchParams;g.set.call(this,F),A&&l(A)}},search:{get:function(){return m.get.call(this)},set:function(F){var A=this._searchParams;m.set.call(this,F),A&&l(A)}},searchParams:{get:function(){return c(this,p),this._searchParams||k(this,new URLSearchParams(this.search.slice(1)))},set:function(F){c(this,p),k(this,F)}}}))};try{d(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&d(URL)}catch(p){}})(Object)})(Ji.URLSearchParams.prototype,Object);const Vw=Ji.URLSearchParams;var Mr=Re(8605),Wl=Re(7211),ct=Re(8761),Oe=Re(2413),Zw=Re(5175),eo=Re(1669),Kw=Re(6030);class to extends Error{constructor(t,r){super(t);Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class Kt extends to{constructor(t,r,n){super(t,r);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}var Qw=Re(6417);const ro=Symbol.toStringTag,Vl=e=>typeof e=="object"&&typeof e.append=="function"&&typeof e.delete=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.has=="function"&&typeof e.set=="function"&&typeof e.sort=="function"&&e[ro]==="URLSearchParams",_r=e=>typeof e=="object"&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.constructor=="function"&&/^(Blob|File)$/.test(e[ro]);function Ts(e){return typeof e=="object"&&typeof e.append=="function"&&typeof e.set=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.delete=="function"&&typeof e.keys=="function"&&typeof e.values=="function"&&typeof e.entries=="function"&&typeof e.constructor=="function"&&e[ro]==="FormData"}const Yw=e=>typeof e=="object"&&e[ro]==="AbortSignal",sn=`\r
`,Ss="-".repeat(2),Xw=Buffer.byteLength(sn),Zl=e=>`${Ss}${e}${Ss}${sn.repeat(2)}`;function Kl(e,t,r){let n="";return n+=`${Ss}${e}${sn}`,n+=`Content-Disposition: form-data; name="${t}"`,_r(r)&&(n+=`; filename="${r.name}"${sn}`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}${sn.repeat(2)}`}const Jw=()=>(0,Qw.randomBytes)(8).toString("hex");async function*eb(e,t){for(const[r,n]of e)yield Kl(t,r,n),_r(n)?yield*n.stream():yield n,yield sn;yield Zl(t)}function tb(e,t){let r=0;for(const[n,i]of e)r+=Buffer.byteLength(Kl(t,n,i)),_r(i)?r+=i.size:r+=Buffer.byteLength(String(i)),r+=Xw;return r+=Buffer.byteLength(Zl(t)),r}const lt=Symbol("Body internals");class ks{constructor(t,{size:r=0}={}){let n=null;t===null?t=null:Vl(t)?t=Buffer.from(t.toString()):_r(t)||Buffer.isBuffer(t)||(eo.types.isAnyArrayBuffer(t)?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Oe||(Ts(t)?(n=`NodeFetchFormDataBoundary${Jw()}`,t=Oe.Readable.from(eb(t,n))):t=Buffer.from(String(t)))),this[lt]={body:t,boundary:n,disturbed:!1,error:null},this.size=r,t instanceof Oe&&t.on("error",i=>{const o=i instanceof to?i:new Kt(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[lt].error=o})}get body(){return this[lt].body}get bodyUsed(){return this[lt].disturbed}async arrayBuffer(){const{buffer:t,byteOffset:r,byteLength:n}=await no(this);return t.slice(r,r+n)}async blob(){const t=this.headers&&this.headers.get("content-type")||this[lt].body&&this[lt].body.type||"",r=await this.buffer();return new Kw([r],{type:t})}async json(){const t=await no(this);return JSON.parse(t.toString())}async text(){return(await no(this)).toString()}buffer(){return no(this)}}Object.defineProperties(ks.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function no(e){if(e[lt].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[lt].disturbed=!0,e[lt].error)throw e[lt].error;let{body:t}=e;if(t===null)return Buffer.alloc(0);if(_r(t)&&(t=t.stream()),Buffer.isBuffer(t))return t;if(!(t instanceof Oe))return Buffer.alloc(0);const r=[];let n=0;try{for await(const i of t){if(e.size>0&&n+i.length>e.size){const o=new Kt(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(o),o}n+=i.length,r.push(i)}}catch(i){throw i instanceof to?i:new Kt(`Invalid response body while trying to fetch ${e.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(i){throw new Kt(`Could not create Buffer from response body for ${e.url}: ${i.message}`,"system",i)}else throw new Kt(`Premature close of server response while trying to fetch ${e.url}`)}const Ql=(e,t)=>{let r,n,{body:i}=e;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Oe&&typeof i.getBoundary!="function"&&(r=new Oe.PassThrough({highWaterMark:t}),n=new Oe.PassThrough({highWaterMark:t}),i.pipe(r),i.pipe(n),e[lt].body=r,i=n),i},Yl=(e,t)=>e===null?null:typeof e=="string"?"text/plain;charset=UTF-8":Vl(e)?"application/x-www-form-urlencoded;charset=UTF-8":_r(e)?e.type||null:Buffer.isBuffer(e)||eo.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e&&typeof e.getBoundary=="function"?`multipart/form-data;boundary=${e.getBoundary()}`:Ts(e)?`multipart/form-data; boundary=${t[lt].boundary}`:e instanceof Oe?null:"text/plain;charset=UTF-8",rb=e=>{const{body:t}=e;return t===null?0:_r(t)?t.size:Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"?t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null:Ts(t)?tb(e[lt].boundary):null},nb=(e,{body:t})=>{t===null?e.end():_r(t)?t.stream().pipe(e):Buffer.isBuffer(t)?(e.write(t),e.end()):t.pipe(e)},io=typeof Mr.validateHeaderName=="function"?Mr.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Cs=typeof Mr.validateHeaderValue=="function"?Mr.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const r=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class Er extends URLSearchParams{constructor(t){let r=[];if(t instanceof Er){const n=t.raw();for(const[i,o]of Object.entries(n))r.push(...o.map(s=>[i,s]))}else if(t!=null)if(typeof t=="object"&&!eo.types.isBoxedPrimitive(t)){const n=t[Symbol.iterator];if(n==null)r.push(...Object.entries(t));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...t].map(i=>{if(typeof i!="object"||eo.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(io(n),Cs(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,o){switch(i){case"append":case"set":return(s,a)=>(io(s),Cs(s,String(a)),URLSearchParams.prototype[i].call(o,String(s).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return s=>(io(s),URLSearchParams.prototype[i].call(o,String(s).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,o)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){const r=this.getAll(t);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(t)&&(n=n.toLowerCase()),n}forEach(t){for(const r of this.keys())t(this.get(r),r)}*values(){for(const t of this.keys())yield this.get(t)}*entries(){for(const t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,r)=>(t[r]=this.getAll(r),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,r)=>{const n=this.getAll(r);return r==="host"?t[r]=n[0]:t[r]=n.length>1?n:n[0],t},{})}}Object.defineProperties(Er.prototype,["get","entries","forEach","values"].reduce((e,t)=>(e[t]={enumerable:!0},e),{}));function ib(e=[]){return new Er(e.reduce((t,r,n,i)=>(n%2==0&&t.push(i.slice(n,n+2)),t),[]).filter(([t,r])=>{try{return io(t),Cs(t,String(r)),!0}catch{return!1}}))}const ob=new Set([301,302,303,307,308]),Xl=e=>ob.has(e),Qt=Symbol("Response internals");class Ft extends ks{constructor(t=null,r={}){super(t,r);const n=r.status||200,i=new Er(r.headers);if(t!==null&&!i.has("Content-Type")){const o=Yl(t);o&&i.append("Content-Type",o)}this[Qt]={url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get url(){return this[Qt].url||""}get status(){return this[Qt].status}get ok(){return this[Qt].status>=200&&this[Qt].status<300}get redirected(){return this[Qt].counter>0}get statusText(){return this[Qt].statusText}get headers(){return this[Qt].headers}get highWaterMark(){return this[Qt].highWaterMark}clone(){return new Ft(Ql(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(t,r=302){if(!Xl(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Ft(null,{headers:{location:new URL(t).toString()},status:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Ft.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var oo=Re(8835);const sb=e=>{if(e.search)return e.search;const t=e.href.length-1,r=e.hash||(e.href[t]==="#"?"#":"");return e.href[t-r.length]==="?"?"?":""},Yt=Symbol("Request internals"),so=e=>typeof e=="object"&&typeof e[Yt]=="object";class ei extends ks{constructor(t,r={}){let n;so(t)?n=new URL(t.url):(n=new URL(t),t={});let i=r.method||t.method||"GET";if(i=i.toUpperCase(),(r.body!=null||so(t))&&t.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const o=r.body?r.body:so(t)&&t.body!==null?Ql(t):null;super(o,{size:r.size||t.size||0});const s=new Er(r.headers||t.headers||{});if(o!==null&&!s.has("Content-Type")){const l=Yl(o,this);l&&s.append("Content-Type",l)}let a=so(t)?t.signal:null;if("signal"in r&&(a=r.signal),a!==null&&!Yw(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Yt]={method:i,redirect:r.redirect||t.redirect||"follow",headers:s,parsedURL:n,signal:a},this.follow=r.follow===void 0?t.follow===void 0?20:t.follow:r.follow,this.compress=r.compress===void 0?t.compress===void 0?!0:t.compress:r.compress,this.counter=r.counter||t.counter||0,this.agent=r.agent||t.agent,this.highWaterMark=r.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||t.insecureHTTPParser||!1}get method(){return this[Yt].method}get url(){return(0,oo.format)(this[Yt].parsedURL)}get headers(){return this[Yt].headers}get redirect(){return this[Yt].redirect}get signal(){return this[Yt].signal}clone(){return new ei(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(ei.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const ab=e=>{const{parsedURL:t}=e[Yt],r=new Er(e[Yt].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(e.body===null&&/^(post|put)$/i.test(e.method)&&(n="0"),e.body!==null){const a=rb(e);typeof a=="number"&&!Number.isNaN(a)&&(n=String(a))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=e;typeof i=="function"&&(i=i(t)),!r.has("Connection")&&!i&&r.set("Connection","close");const o=sb(t);return{path:t.pathname+o,pathname:t.pathname,hostname:t.hostname,protocol:t.protocol,port:t.port,hash:t.hash,search:t.search,query:t.query,href:t.href,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:i}};class cb extends to{constructor(t,r="aborted"){super(t,r)}}const lb=new Set(["data:","http:","https:"]);async function ti(e,t){return new Promise((r,n)=>{const i=new ei(e,t),o=ab(i);if(!lb.has(o.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${o.protocol.replace(/:$/,"")}" is not supported.`);if(o.protocol==="data:"){const f=Zw(i.url),g=new Ft(f,{headers:{"Content-Type":f.typeFull}});r(g);return}const s=(o.protocol==="https:"?Wl:Mr).request,{signal:a}=i;let l=null;const c=()=>{const f=new cb("The operation was aborted.");n(f),i.body&&i.body instanceof Oe.Readable&&i.body.destroy(f),!(!l||!l.body)&&l.body.emit("error",f)};if(a&&a.aborted){c();return}const d=()=>{c(),h()},p=s(o);a&&a.addEventListener("abort",d);const h=()=>{p.abort(),a&&a.removeEventListener("abort",d)};p.on("error",f=>{n(new Kt(`request to ${i.url} failed, reason: ${f.message}`,"system",f)),h()}),p.on("response",f=>{p.setTimeout(0);const g=ib(f.rawHeaders);if(Xl(f.statusCode)){const H=g.get("Location"),$=H===null?null:new URL(H,i.url);switch(i.redirect){case"error":n(new Kt(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),h();return;case"manual":if($!==null)try{g.set("Location",$)}catch(Q){n(Q)}break;case"follow":{if($===null)break;if(i.counter>=i.follow){n(new Kt(`maximum redirect reached at: ${i.url}`,"max-redirect")),h();return}const Q={headers:new Er(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(f.statusCode!==303&&i.body&&t.body instanceof Oe.Readable){n(new Kt("Cannot follow redirect with body being a readable stream","unsupported-redirect")),h();return}(f.statusCode===303||(f.statusCode===301||f.statusCode===302)&&i.method==="POST")&&(Q.method="GET",Q.body=void 0,Q.headers.delete("content-length")),r(ti(new ei($,Q))),h();return}default:}}f.once("end",()=>{a&&a.removeEventListener("abort",d)});let m=(0,Oe.pipeline)(f,new Oe.PassThrough,H=>{n(H)});process.version<"v12.10"&&f.on("aborted",d);const k={url:i.url,status:f.statusCode,statusText:f.statusMessage,headers:g,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},F=g.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||F===null||f.statusCode===204||f.statusCode===304){l=new Ft(m,k),r(l);return}const A={flush:ct.Z_SYNC_FLUSH,finishFlush:ct.Z_SYNC_FLUSH};if(F==="gzip"||F==="x-gzip"){m=(0,Oe.pipeline)(m,ct.createGunzip(A),H=>{n(H)}),l=new Ft(m,k),r(l);return}if(F==="deflate"||F==="x-deflate"){(0,Oe.pipeline)(f,new Oe.PassThrough,$=>{n($)}).once("data",$=>{($[0]&15)==8?m=(0,Oe.pipeline)(m,ct.createInflate(),Q=>{n(Q)}):m=(0,Oe.pipeline)(m,ct.createInflateRaw(),Q=>{n(Q)}),l=new Ft(m,k),r(l)});return}if(F==="br"){m=(0,Oe.pipeline)(m,ct.createBrotliDecompress(),H=>{n(H)}),l=new Ft(m,k),r(l);return}l=new Ft(m,k),r(l)}),nb(p,i)})}var Jl,et;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(et||(et={}));class ub{constructor(){this[Jl]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var t;return(t=this._head)==null?void 0:t.value}get last(){var t;return(t=this._tail)==null?void 0:t.value}has(t){return this._map.has(t)}get(t,r=et.None){const n=this._map.get(t);if(!!n)return r!==et.None&&this.touch(n,r),n.value}set(t,r,n=et.None){let i=this._map.get(t);if(i)i.value=r,n!==et.None&&this.touch(i,n);else{switch(i={key:t,value:r,next:void 0,previous:void 0},n){case et.None:this.addItemLast(i);break;case et.First:this.addItemFirst(i);break;case et.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return Boolean(this.remove(t))}remove(t){const r=this._map.get(t);if(!!r)return this._map.delete(t),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,r){const n=this._state;let i=this._head;for(;i;){if(r?t.bind(r)(i.value,i.key,this):t(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const t=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.key,done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}values(){const t=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:r.value,done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}entries(){const t=this._state;let r=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(r){const i={value:[r.key,r.value],done:!1};return r=r.next,i}return{value:void 0,done:!0}}};return n}[(Jl=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>t;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{const r=t.next,n=t.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}t.next=void 0,t.previous=void 0,this._state++}touch(t,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==et.First&&r!==et.Last)){if(r===et.First){if(t===this._head)return;const n=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(r===et.Last){if(t===this._tail)return;const n=t.next,i=t.previous;t===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){const t=[];return this.forEach((r,n)=>{t.push([n,r])}),t}fromJSON(t){this.clear();for(const[r,n]of t)this.set(r,n)}}class db extends ub{constructor(t,r=1){super();this._limit=t,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,r=et.AsNew){return super.get(t,r)}peek(t){return super.get(t,et.None)}set(t,r){return super.set(t,r,et.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}var eu;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647})(eu||(eu={}));var ao;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647})(ao||(ao={}));var Ot;(function(e){function t(n,i){return n===Number.MAX_VALUE&&(n=ao.MAX_VALUE),i===Number.MAX_VALUE&&(i=ao.MAX_VALUE),{line:n,character:i}}e.create=t;function r(n){var i=n;return q.objectLiteral(i)&&q.uinteger(i.line)&&q.uinteger(i.character)}e.is=r})(Ot||(Ot={}));var Ke;(function(e){function t(n,i,o,s){if(q.uinteger(n)&&q.uinteger(i)&&q.uinteger(o)&&q.uinteger(s))return{start:Ot.create(n,i),end:Ot.create(o,s)};if(Ot.is(n)&&Ot.is(i))return{start:n,end:i};throw new Error("Range#create called with invalid arguments["+n+", "+i+", "+o+", "+s+"]")}e.create=t;function r(n){var i=n;return q.objectLiteral(i)&&Ot.is(i.start)&&Ot.is(i.end)}e.is=r})(Ke||(Ke={}));var xs;(function(e){function t(n,i){return{uri:n,range:i}}e.create=t;function r(n){var i=n;return q.defined(i)&&Ke.is(i.range)&&(q.string(i.uri)||q.undefined(i.uri))}e.is=r})(xs||(xs={}));var co;(function(e){function t(n,i,o,s){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}e.create=t;function r(n){var i=n;return q.defined(i)&&Ke.is(i.targetRange)&&q.string(i.targetUri)&&(Ke.is(i.targetSelectionRange)||q.undefined(i.targetSelectionRange))&&(Ke.is(i.originSelectionRange)||q.undefined(i.originSelectionRange))}e.is=r})(co||(co={}));var Rs;(function(e){function t(n,i,o,s){return{red:n,green:i,blue:o,alpha:s}}e.create=t;function r(n){var i=n;return q.numberRange(i.red,0,1)&&q.numberRange(i.green,0,1)&&q.numberRange(i.blue,0,1)&&q.numberRange(i.alpha,0,1)}e.is=r})(Rs||(Rs={}));var tu;(function(e){function t(n,i){return{range:n,color:i}}e.create=t;function r(n){var i=n;return Ke.is(i.range)&&Rs.is(i.color)}e.is=r})(tu||(tu={}));var ru;(function(e){function t(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}e.create=t;function r(n){var i=n;return q.string(i.label)&&(q.undefined(i.textEdit)||Tr.is(i))&&(q.undefined(i.additionalTextEdits)||q.typedArray(i.additionalTextEdits,Tr.is))}e.is=r})(ru||(ru={}));var ri;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(ri||(ri={}));var nu;(function(e){function t(n,i,o,s,a){var l={startLine:n,endLine:i};return q.defined(o)&&(l.startCharacter=o),q.defined(s)&&(l.endCharacter=s),q.defined(a)&&(l.kind=a),l}e.create=t;function r(n){var i=n;return q.uinteger(i.startLine)&&q.uinteger(i.startLine)&&(q.undefined(i.startCharacter)||q.uinteger(i.startCharacter))&&(q.undefined(i.endCharacter)||q.uinteger(i.endCharacter))&&(q.undefined(i.kind)||q.string(i.kind))}e.is=r})(nu||(nu={}));var As;(function(e){function t(n,i){return{location:n,message:i}}e.create=t;function r(n){var i=n;return q.defined(i)&&xs.is(i.location)&&q.string(i.message)}e.is=r})(As||(As={}));var an;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(an||(an={}));var lo;(function(e){e.Unnecessary=1,e.Deprecated=2})(lo||(lo={}));var Ds;(function(e){function t(r){var n=r;return n!=null&&q.string(n.href)}e.is=t})(Ds||(Ds={}));var uo;(function(e){function t(n,i,o,s,a,l){var c={range:n,message:i};return q.defined(o)&&(c.severity=o),q.defined(s)&&(c.code=s),q.defined(a)&&(c.source=a),q.defined(l)&&(c.relatedInformation=l),c}e.create=t;function r(n){var i,o=n;return q.defined(o)&&Ke.is(o.range)&&q.string(o.message)&&(q.number(o.severity)||q.undefined(o.severity))&&(q.integer(o.code)||q.string(o.code)||q.undefined(o.code))&&(q.undefined(o.codeDescription)||q.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(q.string(o.source)||q.undefined(o.source))&&(q.undefined(o.relatedInformation)||q.typedArray(o.relatedInformation,As.is))}e.is=r})(uo||(uo={}));var ni;(function(e){function t(n,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:n,command:i};return q.defined(o)&&o.length>0&&(a.arguments=o),a}e.create=t;function r(n){var i=n;return q.defined(i)&&q.string(i.title)&&q.string(i.command)}e.is=r})(ni||(ni={}));var Tr;(function(e){function t(o,s){return{range:o,newText:s}}e.replace=t;function r(o,s){return{range:{start:o,end:o},newText:s}}e.insert=r;function n(o){return{range:o,newText:""}}e.del=n;function i(o){var s=o;return q.objectLiteral(s)&&q.string(s.newText)&&Ke.is(s.range)}e.is=i})(Tr||(Tr={}));var cn;(function(e){function t(n,i,o){var s={label:n};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}e.create=t;function r(n){var i=n;return i!==void 0&&q.objectLiteral(i)&&q.string(i.label)&&(q.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(q.string(i.description)||i.description===void 0)}e.is=r})(cn||(cn={}));var tt;(function(e){function t(r){var n=r;return typeof n=="string"}e.is=t})(tt||(tt={}));var Sr;(function(e){function t(o,s,a){return{range:o,newText:s,annotationId:a}}e.replace=t;function r(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}e.insert=r;function n(o,s){return{range:o,newText:"",annotationId:s}}e.del=n;function i(o){var s=o;return Tr.is(s)&&(cn.is(s.annotationId)||tt.is(s.annotationId))}e.is=i})(Sr||(Sr={}));var ii;(function(e){function t(n,i){return{textDocument:n,edits:i}}e.create=t;function r(n){var i=n;return q.defined(i)&&ho.is(i.textDocument)&&Array.isArray(i.edits)}e.is=r})(ii||(ii={}));var ln;(function(e){function t(n,i,o){var s={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function r(n){var i=n;return i&&i.kind==="create"&&q.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||q.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||q.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||tt.is(i.annotationId))}e.is=r})(ln||(ln={}));var un;(function(e){function t(n,i,o,s){var a={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}e.create=t;function r(n){var i=n;return i&&i.kind==="rename"&&q.string(i.oldUri)&&q.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||q.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||q.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||tt.is(i.annotationId))}e.is=r})(un||(un={}));var dn;(function(e){function t(n,i,o){var s={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function r(n){var i=n;return i&&i.kind==="delete"&&q.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||q.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||q.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||tt.is(i.annotationId))}e.is=r})(dn||(dn={}));var Ps;(function(e){function t(r){var n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(function(i){return q.string(i.kind)?ln.is(i)||un.is(i)||dn.is(i):ii.is(i)}))}e.is=t})(Ps||(Ps={}));var fo=function(){function e(t,r){this.edits=t,this.changeAnnotations=r}return e.prototype.insert=function(t,r,n){var i,o;if(n===void 0?i=Tr.insert(t,r):tt.is(n)?(o=n,i=Sr.insert(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=Sr.insert(t,r,o)),this.edits.push(i),o!==void 0)return o},e.prototype.replace=function(t,r,n){var i,o;if(n===void 0?i=Tr.replace(t,r):tt.is(n)?(o=n,i=Sr.replace(t,r,n)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(n),i=Sr.replace(t,r,o)),this.edits.push(i),o!==void 0)return o},e.prototype.delete=function(t,r){var n,i;if(r===void 0?n=Tr.del(t):tt.is(r)?(i=r,n=Sr.del(t,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),n=Sr.del(t,i)),this.edits.push(n),i!==void 0)return i},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),iu=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,r){var n;if(tt.is(t)?n=t:(n=this.nextId(),r=t),this._annotations[n]!==void 0)throw new Error("Id "+n+" is already in use.");if(r===void 0)throw new Error("No annotation provided for id "+n);return this._annotations[n]=r,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),F0=function(){function e(t){var r=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new iu(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(n){if(ii.is(n)){var i=new fo(n.edits,r._changeAnnotations);r._textEditChanges[n.textDocument.uri]=i}})):t.changes&&Object.keys(t.changes).forEach(function(n){var i=new fo(t.changes[n]);r._textEditChanges[n]=i})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(ho.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r={uri:t.uri,version:t.version},n=this._textEditChanges[r.uri];if(!n){var i=[],o={textDocument:r,edits:i};this._workspaceEdit.documentChanges.push(o),n=new fo(i,this._changeAnnotations),this._textEditChanges[r.uri]=n}return n}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[t];if(!n){var i=[];this._workspaceEdit.changes[t]=i,n=new fo(i),this._textEditChanges[t]=n}return n}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new iu,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;cn.is(r)||tt.is(r)?i=r:n=r;var o,s;if(i===void 0?o=ln.create(t,n):(s=tt.is(i)?i:this._changeAnnotations.manage(i),o=ln.create(t,n,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e.prototype.renameFile=function(t,r,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;cn.is(n)||tt.is(n)?o=n:i=n;var s,a;if(o===void 0?s=un.create(t,r,i):(a=tt.is(o)?o:this._changeAnnotations.manage(o),s=un.create(t,r,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},e.prototype.deleteFile=function(t,r,n){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;cn.is(r)||tt.is(r)?i=r:n=r;var o,s;if(i===void 0?o=dn.create(t,n):(s=tt.is(i)?i:this._changeAnnotations.manage(i),o=dn.create(t,n,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e}(),ou;(function(e){function t(n){return{uri:n}}e.create=t;function r(n){var i=n;return q.defined(i)&&q.string(i.uri)}e.is=r})(ou||(ou={}));var su;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){var i=n;return q.defined(i)&&q.string(i.uri)&&q.integer(i.version)}e.is=r})(su||(su={}));var ho;(function(e){function t(n,i){return{uri:n,version:i}}e.create=t;function r(n){var i=n;return q.defined(i)&&q.string(i.uri)&&(i.version===null||q.integer(i.version))}e.is=r})(ho||(ho={}));var au;(function(e){function t(n,i,o,s){return{uri:n,languageId:i,version:o,text:s}}e.create=t;function r(n){var i=n;return q.defined(i)&&q.string(i.uri)&&q.string(i.languageId)&&q.integer(i.version)&&q.string(i.text)}e.is=r})(au||(au={}));var Xt;(function(e){e.PlainText="plaintext",e.Markdown="markdown"})(Xt||(Xt={})),function(e){function t(r){var n=r;return n===e.PlainText||n===e.Markdown}e.is=t}(Xt||(Xt={}));var Fs;(function(e){function t(r){var n=r;return q.objectLiteral(r)&&Xt.is(n.kind)&&q.string(n.value)}e.is=t})(Fs||(Fs={}));var cu;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(cu||(cu={}));var lu;(function(e){e.PlainText=1,e.Snippet=2})(lu||(lu={}));var uu;(function(e){e.Deprecated=1})(uu||(uu={}));var du;(function(e){function t(n,i,o){return{newText:n,insert:i,replace:o}}e.create=t;function r(n){var i=n;return i&&q.string(i.newText)&&Ke.is(i.insert)&&Ke.is(i.replace)}e.is=r})(du||(du={}));var fu;(function(e){e.asIs=1,e.adjustIndentation=2})(fu||(fu={}));var hu;(function(e){function t(r){return{label:r}}e.create=t})(hu||(hu={}));var pu;(function(e){function t(r,n){return{items:r||[],isIncomplete:!!n}}e.create=t})(pu||(pu={}));var po;(function(e){function t(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(n){var i=n;return q.string(i)||q.objectLiteral(i)&&q.string(i.language)&&q.string(i.value)}e.is=r})(po||(po={}));var gu;(function(e){function t(r){var n=r;return!!n&&q.objectLiteral(n)&&(Fs.is(n.contents)||po.is(n.contents)||q.typedArray(n.contents,po.is))&&(r.range===void 0||Ke.is(r.range))}e.is=t})(gu||(gu={}));var mu;(function(e){function t(r,n){return n?{label:r,documentation:n}:{label:r}}e.create=t})(mu||(mu={}));var vu;(function(e){function t(r,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s={label:r};return q.defined(n)&&(s.documentation=n),q.defined(i)?s.parameters=i:s.parameters=[],s}e.create=t})(vu||(vu={}));var oi;(function(e){e.Text=1,e.Read=2,e.Write=3})(oi||(oi={}));var wu;(function(e){function t(r,n){var i={range:r};return q.number(n)&&(i.kind=n),i}e.create=t})(wu||(wu={}));var Os;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Os||(Os={}));var Us;(function(e){e.Deprecated=1})(Us||(Us={}));var bu;(function(e){function t(r,n,i,o,s){var a={name:r,kind:n,location:{uri:o,range:i}};return s&&(a.containerName=s),a}e.create=t})(bu||(bu={}));var yu;(function(e){function t(n,i,o,s,a,l){var c={name:n,detail:i,kind:o,range:s,selectionRange:a};return l!==void 0&&(c.children=l),c}e.create=t;function r(n){var i=n;return i&&q.string(i.name)&&q.number(i.kind)&&Ke.is(i.range)&&Ke.is(i.selectionRange)&&(i.detail===void 0||q.string(i.detail))&&(i.deprecated===void 0||q.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}e.is=r})(yu||(yu={}));var Ut;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(Ut||(Ut={}));var _u;(function(e){function t(n,i){var o={diagnostics:n};return i!=null&&(o.only=i),o}e.create=t;function r(n){var i=n;return q.defined(i)&&q.typedArray(i.diagnostics,uo.is)&&(i.only===void 0||q.typedArray(i.only,q.string))}e.is=r})(_u||(_u={}));var Eu;(function(e){function t(n,i,o){var s={title:n},a=!0;return typeof i=="string"?(a=!1,s.kind=i):ni.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}e.create=t;function r(n){var i=n;return i&&q.string(i.title)&&(i.diagnostics===void 0||q.typedArray(i.diagnostics,uo.is))&&(i.kind===void 0||q.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||ni.is(i.command))&&(i.isPreferred===void 0||q.boolean(i.isPreferred))&&(i.edit===void 0||Ps.is(i.edit))}e.is=r})(Eu||(Eu={}));var Tu;(function(e){function t(n,i){var o={range:n};return q.defined(i)&&(o.data=i),o}e.create=t;function r(n){var i=n;return q.defined(i)&&Ke.is(i.range)&&(q.undefined(i.command)||ni.is(i.command))}e.is=r})(Tu||(Tu={}));var Su;(function(e){function t(n,i){return{tabSize:n,insertSpaces:i}}e.create=t;function r(n){var i=n;return q.defined(i)&&q.uinteger(i.tabSize)&&q.boolean(i.insertSpaces)}e.is=r})(Su||(Su={}));var ku;(function(e){function t(n,i,o){return{range:n,target:i,data:o}}e.create=t;function r(n){var i=n;return q.defined(i)&&Ke.is(i.range)&&(q.undefined(i.target)||q.string(i.target))}e.is=r})(ku||(ku={}));var Cu;(function(e){function t(n,i){return{range:n,parent:i}}e.create=t;function r(n){var i=n;return i!==void 0&&Ke.is(i.range)&&(i.parent===void 0||e.is(i.parent))}e.is=r})(Cu||(Cu={}));var O0=null,xu;(function(e){function t(o,s,a,l){return new fb(o,s,a,l)}e.create=t;function r(o){var s=o;return!!(q.defined(s)&&q.string(s.uri)&&(q.undefined(s.languageId)||q.string(s.languageId))&&q.uinteger(s.lineCount)&&q.func(s.getText)&&q.func(s.positionAt)&&q.func(s.offsetAt))}e.is=r;function n(o,s){for(var a=o.getText(),l=i(s,function(g,m){var k=g.range.start.line-m.range.start.line;return k===0?g.range.start.character-m.range.start.character:k}),c=a.length,d=l.length-1;d>=0;d--){var p=l[d],h=o.offsetAt(p.range.start),f=o.offsetAt(p.range.end);if(f<=c)a=a.substring(0,h)+p.newText+a.substring(f,a.length);else throw new Error("Overlapping edit");c=h}return a}e.applyEdits=n;function i(o,s){if(o.length<=1)return o;var a=o.length/2|0,l=o.slice(0,a),c=o.slice(a);i(l,s),i(c,s);for(var d=0,p=0,h=0;d<l.length&&p<c.length;){var f=s(l[d],c[p]);f<=0?o[h++]=l[d++]:o[h++]=c[p++]}for(;d<l.length;)o[h++]=l[d++];for(;p<c.length;)o[h++]=c[p++];return o}})(xu||(xu={}));var fb=function(){function e(t,r,n,i){this._uri=t,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var r=this.offsetAt(t.start),n=this.offsetAt(t.end);return this._content.substring(r,n)}return this._content},e.prototype.update=function(t,r){this._content=t.text,this._version=r,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],r=this._content,n=!0,i=0;i<r.length;i++){n&&(t.push(i),n=!1);var o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&t.push(r.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Ot.create(0,t);for(;n<i;){var o=Math.floor((n+i)/2);r[o]>t?i=o:n=o+1}var s=n-1;return Ot.create(s,t-r[s])},e.prototype.offsetAt=function(t){var r=this.getLineOffsets();if(t.line>=r.length)return this._content.length;if(t.line<0)return 0;var n=r[t.line],i=t.line+1<r.length?r[t.line+1]:this._content.length;return Math.max(Math.min(n+t.character,i),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),q;(function(e){var t=Object.prototype.toString;function r(f){return typeof f!="undefined"}e.defined=r;function n(f){return typeof f=="undefined"}e.undefined=n;function i(f){return f===!0||f===!1}e.boolean=i;function o(f){return t.call(f)==="[object String]"}e.string=o;function s(f){return t.call(f)==="[object Number]"}e.number=s;function a(f,g,m){return t.call(f)==="[object Number]"&&g<=f&&f<=m}e.numberRange=a;function l(f){return t.call(f)==="[object Number]"&&-2147483648<=f&&f<=2147483647}e.integer=l;function c(f){return t.call(f)==="[object Number]"&&0<=f&&f<=2147483647}e.uinteger=c;function d(f){return t.call(f)==="[object Function]"}e.func=d;function p(f){return f!==null&&typeof f=="object"}e.objectLiteral=p;function h(f,g){return Array.isArray(f)&&f.every(g)}e.typedArray=h})(q||(q={}));var si;(function(e){function t(n){return typeof n=="string"||n instanceof String}e.string=t;function r(n){return typeof n=="number"||n instanceof Number}e.number=r})(si||(si={}));var Is;(function(e){function t(r){const n=r;return n!=null&&(si.number(n.value)||si.string(n.value))&&si.string(n.target)}e.is=t})(Is||(Is={}));class hb extends u.Diagnostic{constructor(t,r,n,i){super(t,r,n);this.data=i,this.hasDiagnosticCode=!1}}var It;(function(e){const t=Object.prototype.toString;function r(d){return typeof d!="undefined"}e.defined=r;function n(d){return d===!0||d===!1}e.boolean=n;function i(d){return t.call(d)==="[object String]"}e.string=i;function o(d){return t.call(d)==="[object Number]"}e.number=o;function s(d){return d!==null&&typeof d=="object"}e.objectLiteral=s;function a(d){return Array.isArray(d)}e.array=a;function l(d){return a(d)&&d.every(p=>i(p))}e.stringArray=l;function c(d,p){return Array.isArray(d)&&d.every(p)}e.typedArray=c})(It||(It={}));var go;(function(e){function t(r){const n=r;return n&&It.string(n.language)&&It.string(n.value)}e.is=t})(go||(go={}));function pb(e){const t=b=>u.Uri.parse(b),r=e!=null?e:t;function n(b){return r(b)}function i(b){return b.map(o)}function o(b){const oe=new hb(p(b.range),b.message,f(b.severity),b.data);return b.code!==void 0&&(Ds.is(b.codeDescription)?oe.code={value:b.code,target:n(b.codeDescription.href)}:Is.is(b.code)?(oe.hasDiagnosticCode=!0,oe.code={value:b.code.value,target:n(b.code.target)}):oe.code=b.code),b.source&&(oe.source=b.source),b.relatedInformation&&(oe.relatedInformation=s(b.relatedInformation)),Array.isArray(b.tags)&&(oe.tags=l(b.tags)),oe}function s(b){return b.map(a)}function a(b){return new u.DiagnosticRelatedInformation(be(b.location),b.message)}function l(b){if(!b)return;const oe=[];for(const Ee of b){const Qe=c(Ee);Qe!==void 0&&oe.push(Qe)}return oe.length>0?oe:void 0}function c(b){switch(b){case lo.Unnecessary:return u.DiagnosticTag.Unnecessary;case lo.Deprecated:return u.DiagnosticTag.Deprecated;default:return}}function d(b){if(!!b)return new u.Position(b.line,b.character)}function p(b){if(!!b)return new u.Range(d(b.start),d(b.end))}function h(b){return b.map(oe=>p(oe))}function f(b){if(b==null)return u.DiagnosticSeverity.Error;switch(b){case an.Error:return u.DiagnosticSeverity.Error;case an.Warning:return u.DiagnosticSeverity.Warning;case an.Information:return u.DiagnosticSeverity.Information;case an.Hint:return u.DiagnosticSeverity.Hint}return u.DiagnosticSeverity.Error}function g(b){if(It.string(b))return new u.MarkdownString(b);if(go.is(b))return new u.MarkdownString().appendCodeblock(b.value,b.language);if(Array.isArray(b)){const Ee=[];for(const Qe of b){const gi=new u.MarkdownString;go.is(Qe)?gi.appendCodeblock(Qe.value,Qe.language):gi.appendMarkdown(Qe),Ee.push(gi)}return Ee}let oe;switch(b.kind){case Xt.Markdown:return new u.MarkdownString(b.value);case Xt.PlainText:return oe=new u.MarkdownString,oe.appendText(b.value),oe;default:return oe=new u.MarkdownString,oe.appendText(`Unsupported Markup content received. Kind is: ${b.kind}`),oe}}function m(b){if(It.string(b))return b;switch(b.kind){case Xt.Markdown:return new u.MarkdownString(b.value);case Xt.PlainText:return b.value;default:return`Unsupported Markup content received. Kind is: ${b.kind}`}}function k(b){if(!!b)return new u.Hover(g(b.contents),p(b.range))}function F(b){if(!!b)return new u.TextEdit(p(b.range),b.newText)}function A(b){if(!!b)return b.map(F)}function H(b){if(!b)return;const oe=new u.SignatureHelp;return It.number(b.activeSignature)?oe.activeSignature=b.activeSignature:oe.activeSignature=0,It.number(b.activeParameter)?oe.activeParameter=b.activeParameter:oe.activeParameter=0,b.signatures&&(oe.signatures=$(b.signatures)),oe}function $(b){return b.map(Q)}function Q(b){const oe=new u.SignatureInformation(b.label);return b.documentation!==void 0&&(oe.documentation=m(b.documentation)),b.parameters!==void 0&&(oe.parameters=ue(b.parameters)),b.activeParameter!==void 0&&(oe.activeParameter=b.activeParameter),oe}function ue(b){return b.map(ce)}function ce(b){const oe=new u.ParameterInformation(b.label);return b.documentation&&(oe.documentation=m(b.documentation)),oe}function be(b){if(!!b)return new u.Location(r(b.uri),p(b.range))}function ye(b){if(!!b)return at(b)}function fe(b){if(!!b)return at(b)}function ve(b){if(!b)return;const oe={targetUri:r(b.targetUri),targetRange:p(b.targetSelectionRange),originSelectionRange:p(b.originSelectionRange),targetSelectionRange:p(b.targetSelectionRange)};if(!oe.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return oe}function at(b){if(!!b)return It.array(b)?b.length===0?[]:co.is(b[0])?b.map(Qe=>ve(Qe)):b.map(Ee=>be(Ee)):co.is(b)?[ve(b)]:be(b)}function pt(b){if(!!b)return b.map(oe=>be(oe))}function gt(b){if(!!b)return b.map(or)}function or(b){const oe=new u.DocumentHighlight(p(b.range));return It.number(b.kind)&&(oe.kind=ut(b.kind)),oe}function ut(b){switch(b){case oi.Text:return u.DocumentHighlightKind.Text;case oi.Read:return u.DocumentHighlightKind.Read;case oi.Write:return u.DocumentHighlightKind.Write}return u.DocumentHighlightKind.Text}function Et(b,oe){if(!!b)return b.map(Ee=>fd(Ee,oe))}function Tt(b){return b<=Os.TypeParameter?b-1:u.SymbolKind.Property}function yn(b){switch(b){case Us.Deprecated:return u.SymbolTag.Deprecated;default:return}}function To(b){if(b==null)return;const oe=[];for(const Ee of b){const Qe=yn(Ee);Qe!==void 0&&oe.push(Qe)}return oe.length===0?void 0:oe}function fd(b,oe){const Ee=new u.SymbolInformation(b.name,Tt(b.kind),p(b.location.range),b.location.uri?r(b.location.uri):oe);return hd(Ee,b),b.containerName&&(Ee.containerName=b.containerName),Ee}function qy(b){if(b!=null)return b.map(ra)}function ra(b){var oe;const Ee=new u.DocumentSymbol(b.name,(oe=b.detail)!=null?oe:"",Tt(b.kind),p(b.range),p(b.selectionRange));if(hd(Ee,b),b.children!==void 0&&b.children.length>0){const Qe=[];for(const gi of b.children)Qe.push(ra(gi));Ee.children=Qe}return Ee}function hd(b,oe){b.tags=To(oe.tags),oe.deprecated&&(b.tags?b.tags.includes(u.SymbolTag.Deprecated)||(b.tags=b.tags.concat(u.SymbolTag.Deprecated)):b.tags=[u.SymbolTag.Deprecated])}function na(b){const oe={title:b.title,command:b.command};return b.arguments&&(oe.arguments=b.arguments),oe}function Wy(b){if(!!b)return b.map(na)}const sr=new Map;sr.set(Ut.Empty,u.CodeActionKind.Empty),sr.set(Ut.QuickFix,u.CodeActionKind.QuickFix),sr.set(Ut.Refactor,u.CodeActionKind.Refactor),sr.set(Ut.RefactorExtract,u.CodeActionKind.RefactorExtract),sr.set(Ut.RefactorInline,u.CodeActionKind.RefactorInline),sr.set(Ut.RefactorRewrite,u.CodeActionKind.RefactorRewrite),sr.set(Ut.Source,u.CodeActionKind.Source),sr.set(Ut.SourceOrganizeImports,u.CodeActionKind.SourceOrganizeImports);function ia(b){if(b==null)return;let oe=sr.get(b);if(oe)return oe;const Ee=b.split(".");oe=u.CodeActionKind.Empty;for(const Qe of Ee)oe=oe.append(Qe);return oe}function Vy(b){if(b!=null)return b.map(oe=>ia(oe))}function Zy(b){if(b==null)return;const oe=new u.CodeAction(b.title);return b.kind!==void 0&&(oe.kind=ia(b.kind)),b.diagnostics&&(oe.diagnostics=i(b.diagnostics)),b.edit&&(oe.edit=pd(b.edit)),b.command&&(oe.command=na(b.command)),b.isPreferred!==void 0&&(oe.isPreferred=b.isPreferred),oe}function pd(b){if(!b)return;const oe=new u.WorkspaceEdit;return b.documentChanges?b.documentChanges.forEach(Ee=>{if(ln.is(Ee))oe.createFile(r(Ee.uri),Ee.options);else if(un.is(Ee))oe.renameFile(r(Ee.oldUri),r(Ee.newUri),Ee.options);else if(dn.is(Ee))oe.deleteFile(r(Ee.uri),Ee.options);else if(ii.is(Ee))oe.set(r(Ee.textDocument.uri),A(Ee.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(Ee,void 0,4)}`)}):b.changes&&Object.keys(b.changes).forEach(Ee=>{oe.set(r(Ee),A(b.changes[Ee]))}),oe}function gd(b){return new u.Color(b.red,b.green,b.blue,b.alpha)}function md(b){return new u.ColorInformation(p(b.range),gd(b.color))}function Ky(b){if(Array.isArray(b))return b.map(md)}function vd(b){const oe=new u.ColorPresentation(b.label);return oe.additionalTextEdits=A(b.additionalTextEdits),b.textEdit&&(oe.textEdit=F(b.textEdit)),oe}function Qy(b){if(Array.isArray(b))return b.map(vd)}function wd(b){if(b)switch(b){case ri.Comment:return u.FoldingRangeKind.Comment;case ri.Imports:return u.FoldingRangeKind.Imports;case ri.Region:return u.FoldingRangeKind.Region}}function bd(b){return new u.FoldingRange(b.startLine,b.endLine,wd(b.kind))}function Yy(b){if(Array.isArray(b))return b.map(bd)}function oa(b){return new u.SelectionRange(p(b.range),b.parent?oa(b.parent):void 0)}function Xy(b){if(!Array.isArray(b))return[];const oe=[];for(const Ee of b)oe.push(oa(Ee));return oe}return{asUri:n,asDiagnostics:i,asDiagnostic:o,asRange:p,asRanges:h,asPosition:d,asDiagnosticSeverity:f,asDiagnosticTag:c,asHover:k,asTextEdit:F,asTextEdits:A,asSignatureHelp:H,asSignatureInformations:$,asSignatureInformation:Q,asParameterInformations:ue,asParameterInformation:ce,asDeclarationResult:ye,asDefinitionResult:fe,asLocation:be,asReferences:pt,asDocumentHighlights:gt,asDocumentHighlight:or,asDocumentHighlightKind:ut,asSymbolKind:Tt,asSymbolTag:yn,asSymbolTags:To,asSymbolInformations:Et,asSymbolInformation:fd,asDocumentSymbols:qy,asDocumentSymbol:ra,asCommand:na,asCommands:Wy,asCodeAction:Zy,asCodeActionKind:ia,asCodeActionKinds:Vy,asWorkspaceEdit:pd,asFoldingRangeKind:wd,asFoldingRange:bd,asFoldingRanges:Yy,asColor:gd,asColorInformation:md,asColorInformations:Ky,asColorPresentation:vd,asColorPresentations:Qy,asSelectionRange:oa,asSelectionRanges:Xy}}var Lt;(function(e){function t(r=!1){return{hoverProvider:r,declarationProvider:r,definitionProvider:r,typeDefinitionProvider:r,referencesProvider:r,documentSymbolProvider:r,foldingRangeProvider:r,diagnosticProvider:r}}e.create=t})(Lt||(Lt={}));var $t;(function(e){const t="v0.1",r="https://prod.richnav.vsengsaas.visualstudio.com/api";async function n(m,k){const F=await ti(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(F.status===200)return F.json()}async function i(m,k){return(await ti(m,{method:"Post",body:k})).json()}function o(m,k){return`${r}/${t}/HttpLanguageService/${m}/${k}`}async function s(m){const k=await ti(`${r}/${t}/WorkspaceSnapshot?commitId=${m}`);if(k.ok)return k.json()}e.getWorkspaceSnapshot=s;async function a(m){const k=new Vw;k.append("uriString",m.toString(!0));const F=await i(`${r}/${t}/WorkspaceSnapshot/latest`,k);if(F!==void 0)return{workspaceId:F.WorkspaceId,snapshotId:F.SnapshotId,commitId:F.commitId}}e.getLatestWorkspaceSnapshot=a;async function l(m,k){return n(o(m,"textDocument/capabilities"),k)}e.capabilities=l;async function c(m,k){return n(o(m,"textDocument/hover"),k)}e.provideHover=c;async function d(m,k){return n(o(m,"textDocument/definition"),k)}e.provideDefinition=d;async function p(m,k){return n(o(m,"textDocument/declaration"),k)}e.provideDeclaration=p;async function h(m,k){return n(o(m,"textDocument/typeDefinition"),k)}e.provideTypeDefinition=h;async function f(m,k){return n(o(m,"textDocument/references"),k)}e.provideReferences=f;async function g(m,k){return n(o(m,"textDocument/foldingRange"),k)}e.providerFoldingRanges=g})($t||($t={}));class gb{async handles(t,r){const n=await t.getMetadata(r.uri),i=await $t.getWorkspaceSnapshot(n.HEAD.sha);if(i!==void 0)return()=>new mo(t,r,i)}}const Gt=class{constructor(e,t,r){this.providerService=e,this.repository=t,this.workspaceSnapshot=r,this.metadata=this.providerService.getMetadata(this.repository.uri),this.converter=new Promise((n,i)=>{const o=`vsck://${r.workspaceId}/${this.workspaceSnapshot.snapshotId}/source/`;this.metadata.then(s=>{n(pb(a=>{const l=u.Uri.parse(a);if(s===void 0)return l;let c=l.path;l.toString(!0).startsWith(o)&&(c=l.toString(!0).substr(o.length));try{return this.repository.createRelativeUri(c)}catch(d){return l}}))},i)}),this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new db(2048),u.workspace.onDidOpenTextDocument(async n=>{const i=t.uri;if(!n.uri.toString().startsWith(i.toString()))return;const o=n.uri.toString();if(this.pendingCapabilitiesRequests.has(o))return;const s=await this.getSha();let a=this.capabilitiesCache.get(o);if(a===null)return;if(a===void 0){const h=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(o,h),a=await h,this.pendingCapabilitiesRequests.delete(o),this.capabilitiesCache.set(o,a===void 0?null:a)}if(a===void 0||!u.workspace.textDocuments.some(h=>h===n))return;const l=n.languageId,d=[{scheme:this.repository.uri.scheme,pattern:n.uri.fsPath,language:n.languageId,exclusive:!0}],p=[];Gt.registerCapability(l,"hoverProvider",a)&&p.push(u.languages.registerHoverProvider(d,{provideHover:async(h,f)=>(await this.converter).asHover(await $t.provideHover(s,this.createTextDocumentPositionParams(h.uri,f)))})),Gt.registerCapability(l,"definitionProvider",a)&&p.push(u.languages.registerDefinitionProvider(d,{provideDefinition:async(h,f)=>(await this.converter).asDefinitionResult(await $t.provideDefinition(s,this.createTextDocumentPositionParams(h.uri,f)))})),Gt.registerCapability(l,"declarationProvider",a)&&p.push(u.languages.registerDeclarationProvider(d,{provideDeclaration:async(h,f)=>(await this.converter).asDeclarationResult(await $t.provideDeclaration(s,this.createTextDocumentPositionParams(h.uri,f)))})),Gt.registerCapability(l,"typeDefinitionProvider",a)&&p.push(u.languages.registerTypeDefinitionProvider(d,{provideTypeDefinition:async(h,f)=>(await this.converter).asDefinitionResult(await $t.provideDeclaration(s,this.createTextDocumentPositionParams(h.uri,f)))})),Gt.registerCapability(l,"referencesProvider",a)&&p.push(u.languages.registerReferenceProvider(d,{provideReferences:async(h,f,g)=>{const m={position:{line:f.line,character:f.character},textDocument:{uri:this.createDocumentUri(h.uri).toString(!0)},context:{includeDeclaration:g.includeDeclaration}};return(await this.converter).asReferences(await $t.provideReferences(s,m))}})),Gt.registerCapability(l,"foldingRangeProvider",a)&&p.push(u.languages.registerFoldingRangeProvider(d,{provideFoldingRanges:async h=>(await this.converter).asFoldingRanges(await $t.providerFoldingRanges(s,this.createTextDocumentParams(h.uri)))})),this.registeredFeatures.set(n.uri.toString(),u.Disposable.from(...p)),this.updateStatusBarItem()}),u.workspace.onDidCloseTextDocument(n=>{const i=n.uri.toString(),o=this.registeredFeatures.get(i);o!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),o.dispose()),this.pendingCapabilitiesRequests.delete(i)}),u.window.onDidChangeActiveTextEditor(()=>{this.updateStatusBarItem()})}static registerCapability(e,t,r){var n;const i=this.disabledCapabilities.get(e);if(i==null?void 0:i[t])return!1;const o=this.localCapabilities.get(e);return(o==null?void 0:o[t])?!1:(n=r[t])!=null?n:!1}dispose(){for(const e of this.registeredFeatures.values())e.dispose();this.registeredFeatures.clear()}async updateStatusBarItem(){const e=u.window.activeTextEditor;if(e===void 0){Gt.statusBarItem.hide();return}const t=e.document.uri.toString(),r=this.pendingCapabilitiesRequests.get(t);r!==void 0&&(await r,e!==u.window.activeTextEditor)||(this.registeredFeatures.has(t)?Gt.statusBarItem.show():Gt.statusBarItem.hide())}async capabilities(e){var t;const r=await this.getSha();return(t=await $t.capabilities(r,this.createTextDocumentParams(e)))!=null?t:void 0}provideDocumentSymbols(){return Promise.resolve([])}createTextDocumentParams(e){return{textDocument:{uri:this.createDocumentUri(e).toString(!0)}}}createTextDocumentPositionParams(e,t){return{position:{line:t.line,character:t.character},textDocument:{uri:this.createDocumentUri(e).toString(!0)}}}createDocumentUri(e){const t=this.repository.uri.toString(!0),r=e.toString(!0);return u.Uri.file(r.substr(t.length))}async getSha(){return(await this.metadata).HEAD.sha}};let mo=Gt;mo.localCapabilities=new Map([["javascript",Object.assign(Lt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(Lt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(Lt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(Lt.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),mo.disabledCapabilities=new Map([["javascript",Object.assign(Lt.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(Lt.create(),{declarationProvider:!0})],["typescript",Object.assign(Lt.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(Lt.create(),{declarationProvider:!0})]]),mo.statusBarItem=function(){const e=u.window.createStatusBarItem(u.StatusBarAlignment.Right);return e.text="Indexed",e.tooltip=["The source file is indexed and provides","enhanced code comprehension features","like Go to Declaration and Find all","references."].join(`
`),e.hide(),e}();class mb{constructor(t,r){this.providerService=t,this.metadataStore=r}getProvider(t){const r=this.providerService.getProvider(t);return r!==void 0?{id:r.id,name:r.name}:void 0}getProviderUri(t){return this.providerService.getProviderUri(t)}getProviderRootUri(t){return this.providerService.getProviderRootUri(t)}isProviderUri(t,r){return t.scheme!==He.scheme&&t.scheme===this.providerService.getProviderScheme(t)&&(!r||t.scheme===r)}getVirtualUri(t){return this.providerService.getVirtualUri(t)}getVirtualWorkspaceUri(t){return this.providerService.getVirtualWorkspaceUri(t)}}const vb={dispose:()=>{}},wb=new TextEncoder;class bb{constructor(t,r,n){this.providerService=t,this.changeStore=n,this._onDidChangeFile=new u.EventEmitter,this.disposable=u.Disposable.from(u.workspace.registerFileSystemProvider(He.scheme,this,{isCaseSensitive:!0}),u.workspace.registerFileSearchProvider(He.scheme,this),u.workspace.registerTextSearchProvider(He.scheme,this),n.onDidChange(i=>{this._onDidChangeFile.fire(i.map(o=>{switch(o.type){case Te.Created:return{type:u.FileChangeType.Created,uri:o.uri};case Te.Changed:return{type:u.FileChangeType.Changed,uri:o.uri};case Te.Deleted:return{type:u.FileChangeType.Deleted,uri:o.uri}}}))}),r.onDidChange(i=>this.updateOpenDocuments(i)))}get onDidChangeFile(){return this._onDidChangeFile.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}updateOpenDocuments(t){const r=u.workspace.textDocuments.map(n=>{if(!(n.uri.scheme!==He.scheme||!An(n.uri,t)))return{uri:n.uri,type:u.FileChangeType.Changed}}).filter(n=>Boolean(n));r.push({type:u.FileChangeType.Changed,uri:t}),this._onDidChangeFile.fire(r)}watch(t,r){return vb}async stat(t){let r=this.changeStore.getStat(t);return r!==void 0||(r=await this.providerService.stat(this.providerService.getProviderUri(t))),r}async readDirectory(t){let r=await this.providerService.readDirectory(this.providerService.getProviderUri(t));return r=this.changeStore.updateDirectoryEntries(t,r),r}async createDirectory(t){me.log("createDirectory",t),await this.changeStore.onDirectoryCreated(t)}async readFile(t){const r=this.changeStore.getContent(t);return r!==void 0?wb.encode(r):await this.providerService.readFile(this.providerService.getProviderUri(t))}async writeFile(t,r,n){me.log("writeFile",t,n);let i;try{if(i=await this.stat(t),!n.overwrite)throw u.FileSystemError.FileExists()}catch(o){if(o instanceof u.FileSystemError&&o.code==="FileNotFound"){if(!n.create)throw u.FileSystemError.FileNotFound()}else throw o}i===void 0?await this.changeStore.onFileCreated(t,r):await this.changeStore.onFileChanged(t,r,()=>this.providerService.readFile(this.providerService.getProviderUri(t)))}async delete(t,r){switch(me.log("delete",t,r),(await this.stat(t)).type){case u.FileType.File:await this.changeStore.onFileDeleted(t);break;case u.FileType.Directory:{await this.deleteDirectory(t,r);break}default:throw u.FileSystemError.NoPermissions()}}async deleteDirectory(t,r){const n=await this.readDirectory(t);if(n.length!==0){if(!r.recursive&&n.some(([,i])=>i===u.FileType.Directory))throw u.FileSystemError.NoPermissions();for(const[i,o]of n)o===u.FileType.Directory?await this.deleteDirectory(u.Uri.joinPath(t,i),r):await this.changeStore.onFileDeleted(u.Uri.joinPath(t,i))}await this.changeStore.onDirectoryDeleted(t)}async rename(t,r,n){switch(me.log("rename",t,r,n),(await this.stat(t)).type){case u.FileType.File:{const o=await this.readFile(t);await this.writeFile(r,o,{create:!0,overwrite:n.overwrite}),await this.delete(t,{recursive:!1});break}case u.FileType.Directory:{await this.renameDirectory(t,r,n);break}default:throw u.FileSystemError.NoPermissions()}}async renameDirectory(t,r,n){me.log("renameDirectory",t,r,n),await this.copyDirectory(t,r,n),await this.delete(t,{recursive:!0})}async copy(t,r,n){switch(me.log("copy",t,r,n),(await this.stat(t)).type){case u.FileType.File:{const o=await this.readFile(t);await this.writeFile(r,o,{create:!0,overwrite:n.overwrite});break}case u.FileType.Directory:{await this.copyDirectory(t,r,n);break}default:throw u.FileSystemError.NoPermissions()}}async copyDirectory(t,r,n){if(me.log("copyDirectory",t,r,n),await this.exists(r))throw u.FileSystemError.FileExists();await this.createDirectory(r);const i=await this.readDirectory(t);for(const[o,s]of i)s===u.FileType.Directory?await this.copyDirectory(u.Uri.joinPath(t,o),u.Uri.joinPath(r,o),n):await this.copy(u.Uri.joinPath(t,o),u.Uri.joinPath(r,o),n)}async exists(t){try{return await this.stat(t),!0}catch(r){if(r instanceof u.FileSystemError&&r.code==="FileNotFound")return!1;throw r}}provideFileSearchResults(t,r,n){return this.providerService.provideFileSearchResults(t,{...r,folder:this.providerService.getProviderUri(r.folder)},n)}provideTextSearchResults(t,r,n,i){return this.providerService.provideTextSearchResults(t,{...r,folder:this.providerService.getProviderUri(r.folder)},{report:o=>n.report({...o,uri:this.providerService.getVirtualUri(o.uri)})},i)}}function yb(e){return Buffer.from(e,"base64")}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function Ru(e){return Object.prototype.toString.call(e)==="[object Object]"}function Au(e){var t,r;return Ru(e)===!1?!1:(t=e.constructor,t===void 0?!0:(r=t.prototype,!(Ru(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function vo(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function _b(e){return e?Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}):{}}function Du(e,t){const r=Object.assign({},e);return Object.keys(t).forEach(n=>{Au(t[n])?n in e?r[n]=Du(e[n],t[n]):Object.assign(r,{[n]:t[n]}):Object.assign(r,{[n]:t[n]})}),r}function Pu(e){for(const t in e)e[t]===void 0&&delete e[t];return e}function Ls(e,t,r){if(typeof t=="string"){let[i,o]=t.split(" ");r=Object.assign(o?{method:i,url:o}:{url:i},r)}else r=Object.assign({},t);r.headers=_b(r.headers),Pu(r),Pu(r.headers);const n=Du(e||{},r);return e&&e.mediaType.previews.length&&(n.mediaType.previews=e.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function Eb(e,t){const r=/\?/.test(e)?"&":"?",n=Object.keys(t);return n.length===0?e:e+r+n.map(i=>i==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(t[i])}`).join("&")}const Tb=/\{[^}]+\}/g;function Sb(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function kb(e){const t=e.match(Tb);return t?t.map(Sb).reduce((r,n)=>r.concat(n),[]):[]}function Fu(e,t){return Object.keys(e).filter(r=>!t.includes(r)).reduce((r,n)=>(r[n]=e[n],r),{})}function Ou(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function fn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function ai(e,t,r){return t=e==="+"||e==="#"?Ou(t):fn(t),r?fn(r)+"="+t:t}function hn(e){return e!=null}function $s(e){return e===";"||e==="&"||e==="?"}function Cb(e,t,r,n){var i=e[r],o=[];if(hn(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),o.push(ai(t,i,$s(t)?r:""));else if(n==="*")Array.isArray(i)?i.filter(hn).forEach(function(s){o.push(ai(t,s,$s(t)?r:""))}):Object.keys(i).forEach(function(s){hn(i[s])&&o.push(ai(t,i[s],s))});else{const s=[];Array.isArray(i)?i.filter(hn).forEach(function(a){s.push(ai(t,a))}):Object.keys(i).forEach(function(a){hn(i[a])&&(s.push(fn(a)),s.push(ai(t,i[a].toString())))}),$s(t)?o.push(fn(r)+"="+s.join(",")):s.length!==0&&o.push(s.join(","))}else t===";"?hn(i)&&o.push(fn(r)):i===""&&(t==="&"||t==="?")?o.push(fn(r)+"="):i===""&&o.push("");return o}function xb(e){return{expand:Rb.bind(null,e)}}function Rb(e,t){var r=["+","#",".","/",";","?","&"];return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,o){if(i){let a="";const l=[];if(r.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(c){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(c);l.push(Cb(t,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var s=",";return a==="?"?s="&":a!=="#"&&(s=a),(l.length!==0?a:"")+l.join(s)}else return l.join(",")}else return Ou(o)})}function Uu(e){let t=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},e.headers),i,o=Fu(e,["method","baseUrl","url","headers","request","mediaType"]);const s=kb(r);r=xb(r).expand(o),/^http/.test(r)||(r=e.baseUrl+r);const a=Object.keys(e).filter(d=>s.includes(d)).concat("baseUrl"),l=Fu(o,a);if(!/application\/octet-stream/i.test(n.accept)&&(e.mediaType.format&&(n.accept=n.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),e.mediaType.previews.length)){const d=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=d.concat(e.mediaType.previews).map(p=>{const h=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${p}-preview${h}`}).join(",")}return["GET","HEAD"].includes(t)?r=Eb(r,l):"data"in l?i=l.data:Object.keys(l).length?i=l:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof i=="undefined"&&(i=""),Object.assign({method:t,url:r,headers:n},typeof i!="undefined"?{body:i}:null,e.request?{request:e.request}:null)}function Ab(e,t,r){return Uu(Ls(e,t,r))}function Iu(e,t){const r=Ls(e,t),n=Ab.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:Iu.bind(null,r),merge:Ls.bind(null,r),parse:Uu})}const Db=`octokit-endpoint.js/6.0.11 ${vo()}`,Pb=Iu(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Db},mediaType:{format:"",previews:[]}}),Fb=Oe.Readable,Jt=Symbol("buffer"),Gs=Symbol("type");class pn{constructor(){this[Gs]="";const t=arguments[0],r=arguments[1],n=[];let i=0;if(t){const s=t,a=Number(s.length);for(let l=0;l<a;l++){const c=s[l];let d;c instanceof Buffer?d=c:ArrayBuffer.isView(c)?d=Buffer.from(c.buffer,c.byteOffset,c.byteLength):c instanceof ArrayBuffer?d=Buffer.from(c):c instanceof pn?d=c[Jt]:d=Buffer.from(typeof c=="string"?c:String(c)),i+=d.length,n.push(d)}}this[Jt]=Buffer.concat(n);let o=r&&r.type!==void 0&&String(r.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[Gs]=o)}get size(){return this[Jt].length}get type(){return this[Gs]}text(){return Promise.resolve(this[Jt].toString())}arrayBuffer(){const t=this[Jt],r=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);return Promise.resolve(r)}stream(){const t=new Fb;return t._read=function(){},t.push(this[Jt]),t.push(null),t}toString(){return"[object Blob]"}slice(){const t=this.size,r=arguments[0],n=arguments[1];let i,o;r===void 0?i=0:r<0?i=Math.max(t+r,0):i=Math.min(r,t),n===void 0?o=t:n<0?o=Math.max(t+n,0):o=Math.min(n,t);const s=Math.max(o-i,0),l=this[Jt].slice(i,i+s),c=new pn([],{type:arguments[2]});return c[Jt]=l,c}}Object.defineProperties(pn.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(pn.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function it(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}it.prototype=Object.create(Error.prototype),it.prototype.constructor=it,it.prototype.name="FetchError";let Bs;try{Bs=require("encoding").convert}catch(e){}const er=Symbol("Body internals"),Lu=Oe.PassThrough;function We(e){var t=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var o=r.timeout;let s=o===void 0?0:o;e==null?e=null:$u(e)?e=Buffer.from(e.toString()):ci(e)||Buffer.isBuffer(e)||(Object.prototype.toString.call(e)==="[object ArrayBuffer]"?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof Oe||(e=Buffer.from(String(e)))),this[er]={body:e,disturbed:!1,error:null},this.size=i,this.timeout=s,e instanceof Oe&&e.on("error",function(a){const l=a.name==="AbortError"?a:new it(`Invalid response body while trying to fetch ${t.url}: ${a.message}`,"system",a);t[er].error=l})}We.prototype={get body(){return this[er].body},get bodyUsed(){return this[er].disturbed},arrayBuffer(){return gn.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get("content-type")||"";return gn.call(this).then(function(t){return Object.assign(new pn([],{type:e.toLowerCase()}),{[Jt]:t})})},json(){var e=this;return gn.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(r){return We.Promise.reject(new it(`invalid json response body at ${e.url} reason: ${r.message}`,"invalid-json"))}})},text(){return gn.call(this).then(function(e){return e.toString()})},buffer(){return gn.call(this)},textConverted(){var e=this;return gn.call(this).then(function(t){return Ob(t,e.headers)})}},Object.defineProperties(We.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),We.mixIn=function(e){for(const t of Object.getOwnPropertyNames(We.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(We.prototype,t);Object.defineProperty(e,t,r)}};function gn(){var e=this;if(this[er].disturbed)return We.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[er].disturbed=!0,this[er].error)return We.Promise.reject(this[er].error);let t=this.body;if(t===null)return We.Promise.resolve(Buffer.alloc(0));if(ci(t)&&(t=t.stream()),Buffer.isBuffer(t))return We.Promise.resolve(t);if(!(t instanceof Oe))return We.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new We.Promise(function(o,s){let a;e.timeout&&(a=setTimeout(function(){i=!0,s(new it(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)),t.on("error",function(l){l.name==="AbortError"?(i=!0,s(l)):s(new it(`Invalid response body while trying to fetch ${e.url}: ${l.message}`,"system",l))}),t.on("data",function(l){if(!(i||l===null)){if(e.size&&n+l.length>e.size){i=!0,s(new it(`content size at ${e.url} over limit: ${e.size}`,"max-size"));return}n+=l.length,r.push(l)}}),t.on("end",function(){if(!i){clearTimeout(a);try{o(Buffer.concat(r,n))}catch(l){s(new it(`Could not create Buffer from response body for ${e.url}: ${l.message}`,"system",l))}}})})}function Ob(e,t){if(typeof Bs!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let n="utf-8",i,o;return r&&(i=/charset=([^;]*)/i.exec(r)),o=e.slice(0,1024).toString(),!i&&o&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(o)),!i&&o&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&o&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),Bs(e,"UTF-8",n).toString()}function $u(e){return typeof e!="object"||typeof e.append!="function"||typeof e.delete!="function"||typeof e.get!="function"||typeof e.getAll!="function"||typeof e.has!="function"||typeof e.set!="function"?!1:e.constructor.name==="URLSearchParams"||Object.prototype.toString.call(e)==="[object URLSearchParams]"||typeof e.sort=="function"}function ci(e){return typeof e=="object"&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"&&typeof e.stream=="function"&&typeof e.constructor=="function"&&typeof e.constructor.name=="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function Gu(e){let t,r,n=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof Oe&&typeof n.getBoundary!="function"&&(t=new Lu,r=new Lu,n.pipe(t),n.pipe(r),e[er].body=t,n=r),n}function Bu(e){return e===null?null:typeof e=="string"?"text/plain;charset=UTF-8":$u(e)?"application/x-www-form-urlencoded;charset=UTF-8":ci(e)?e.type||null:Buffer.isBuffer(e)||Object.prototype.toString.call(e)==="[object ArrayBuffer]"||ArrayBuffer.isView(e)?null:typeof e.getBoundary=="function"?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof Oe?null:"text/plain;charset=UTF-8"}function Mu(e){const t=e.body;return t===null?0:ci(t)?t.size:Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&(t._lengthRetrievers&&t._lengthRetrievers.length==0||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}function Ub(e,t){const r=t.body;r===null?e.end():ci(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}We.Promise=global.Promise;const Nu=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Ms=/[^\t\x20-\x7e\x80-\xff]/;function li(e){if(e=`${e}`,Nu.test(e)||e==="")throw new TypeError(`${e} is not a legal HTTP header name`)}function Hu(e){if(e=`${e}`,Ms.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function mn(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const Me=Symbol("map");class bt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[Me]=Object.create(null),t instanceof bt){const r=t.raw(),n=Object.keys(r);for(const i of n)for(const o of r[i])this.append(i,o);return}if(t!=null)if(typeof t=="object"){const r=t[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const i of t){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(const i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const n of Object.keys(t)){const i=t[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(t){t=`${t}`,li(t);const r=mn(this[Me],t);return r===void 0?null:this[Me][r].join(", ")}forEach(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=Ns(this),i=0;for(;i<n.length;){var o=n[i];const s=o[0],a=o[1];t.call(r,a,s,this),n=Ns(this),i++}}set(t,r){t=`${t}`,r=`${r}`,li(t),Hu(r);const n=mn(this[Me],t);this[Me][n!==void 0?n:t]=[r]}append(t,r){t=`${t}`,r=`${r}`,li(t),Hu(r);const n=mn(this[Me],t);n!==void 0?this[Me][n].push(r):this[Me][t]=[r]}has(t){return t=`${t}`,li(t),mn(this[Me],t)!==void 0}delete(t){t=`${t}`,li(t);const r=mn(this[Me],t);r!==void 0&&delete this[Me][r]}raw(){return this[Me]}keys(){return zs(this,"key")}values(){return zs(this,"value")}[Symbol.iterator](){return zs(this,"key+value")}}bt.prototype.entries=bt.prototype[Symbol.iterator],Object.defineProperty(bt.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(bt.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function Ns(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(e[Me]).sort().map(t==="key"?function(n){return n.toLowerCase()}:t==="value"?function(n){return e[Me][n].join(", ")}:function(n){return[n.toLowerCase(),e[Me][n].join(", ")]})}const Hs=Symbol("internal");function zs(e,t){const r=Object.create(js);return r[Hs]={target:e,kind:t,index:0},r}const js=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==js)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[Hs];const t=e.target,r=e.kind,n=e.index,i=Ns(t,r),o=i.length;return n>=o?{value:void 0,done:!0}:(this[Hs].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(js,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Ib(e){const t=Object.assign({__proto__:null},e[Me]),r=mn(e[Me],"Host");return r!==void 0&&(t[r]=t[r][0]),t}function Lb(e){const t=new bt;for(const r of Object.keys(e))if(!Nu.test(r))if(Array.isArray(e[r]))for(const n of e[r])Ms.test(n)||(t[Me][r]===void 0?t[Me][r]=[n]:t[Me][r].push(n));else Ms.test(e[r])||(t[Me][r]=[e[r]]);return t}const kr=Symbol("Response internals"),$b=Mr.STATUS_CODES;class Bt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};We.call(this,t,r);const n=r.status||200,i=new bt(r.headers);if(t!=null&&!i.has("Content-Type")){const o=Bu(t);o&&i.append("Content-Type",o)}this[kr]={url:r.url,status:n,statusText:r.statusText||$b[n],headers:i,counter:r.counter}}get url(){return this[kr].url||""}get status(){return this[kr].status}get ok(){return this[kr].status>=200&&this[kr].status<300}get redirected(){return this[kr].counter>0}get statusText(){return this[kr].statusText}get headers(){return this[kr].headers}clone(){return new Bt(Gu(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}We.mixIn(Bt.prototype),Object.defineProperties(Bt.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(Bt.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const tr=Symbol("Request internals"),qs=oo.parse,Gb=oo.format,Bb="destroy"in Oe.Readable.prototype;function wo(e){return typeof e=="object"&&typeof e[tr]=="object"}function Mb(e){const t=e&&typeof e=="object"&&Object.getPrototypeOf(e);return!!(t&&t.constructor.name==="AbortSignal")}class Nr{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;wo(t)?n=qs(t.url):(t&&t.href?n=qs(t.href):n=qs(`${t}`),t={});let i=r.method||t.method||"GET";if(i=i.toUpperCase(),(r.body!=null||wo(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let o=r.body!=null?r.body:wo(t)&&t.body!==null?Gu(t):null;We.call(this,o,{timeout:r.timeout||t.timeout||0,size:r.size||t.size||0});const s=new bt(r.headers||t.headers||{});if(o!=null&&!s.has("Content-Type")){const l=Bu(o);l&&s.append("Content-Type",l)}let a=wo(t)?t.signal:null;if("signal"in r&&(a=r.signal),a!=null&&!Mb(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[tr]={method:i,redirect:r.redirect||t.redirect||"follow",headers:s,parsedURL:n,signal:a},this.follow=r.follow!==void 0?r.follow:t.follow!==void 0?t.follow:20,this.compress=r.compress!==void 0?r.compress:t.compress!==void 0?t.compress:!0,this.counter=r.counter||t.counter||0,this.agent=r.agent||t.agent}get method(){return this[tr].method}get url(){return Gb(this[tr].parsedURL)}get headers(){return this[tr].headers}get redirect(){return this[tr].redirect}get signal(){return this[tr].signal}clone(){return new Nr(this)}}We.mixIn(Nr.prototype),Object.defineProperty(Nr.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Nr.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Nb(e){const t=e[tr].parsedURL,r=new bt(e[tr].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof Oe.Readable&&!Bb)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(e.body==null&&/^(POST|PUT)$/i.test(e.method)&&(n="0"),e.body!=null){const o=Mu(e);typeof o=="number"&&(n=String(o))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=e.agent;return typeof i=="function"&&(i=i(t)),!r.has("Connection")&&!i&&r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:Ib(r),agent:i})}function ui(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}ui.prototype=Object.create(Error.prototype),ui.prototype.constructor=ui,ui.prototype.name="AbortError";const zu=Oe.PassThrough,Hb=oo.resolve;function Cr(e,t){if(!Cr.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return We.Promise=Cr.Promise,new Cr.Promise(function(r,n){const i=new Nr(e,t),o=Nb(i),s=(o.protocol==="https:"?Wl:Mr).request,a=i.signal;let l=null;const c=function(){let m=new ui("The user aborted a request.");n(m),i.body&&i.body instanceof Oe.Readable&&i.body.destroy(m),!(!l||!l.body)&&l.body.emit("error",m)};if(a&&a.aborted){c();return}const d=function(){c(),f()},p=s(o);let h;a&&a.addEventListener("abort",d);function f(){p.abort(),a&&a.removeEventListener("abort",d),clearTimeout(h)}i.timeout&&p.once("socket",function(g){h=setTimeout(function(){n(new it(`network timeout at: ${i.url}`,"request-timeout")),f()},i.timeout)}),p.on("error",function(g){n(new it(`request to ${i.url} failed, reason: ${g.message}`,"system",g)),f()}),p.on("response",function(g){clearTimeout(h);const m=Lb(g.headers);if(Cr.isRedirect(g.statusCode)){const $=m.get("Location"),Q=$===null?null:Hb(i.url,$);switch(i.redirect){case"error":n(new it(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),f();return;case"manual":if(Q!==null)try{m.set("Location",Q)}catch(ce){n(ce)}break;case"follow":if(Q===null)break;if(i.counter>=i.follow){n(new it(`maximum redirect reached at: ${i.url}`,"max-redirect")),f();return}const ue={headers:new bt(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(g.statusCode!==303&&i.body&&Mu(i)===null){n(new it("Cannot follow redirect with body being a readable stream","unsupported-redirect")),f();return}(g.statusCode===303||(g.statusCode===301||g.statusCode===302)&&i.method==="POST")&&(ue.method="GET",ue.body=void 0,ue.headers.delete("content-length")),r(Cr(new Nr(Q,ue))),f();return}}g.once("end",function(){a&&a.removeEventListener("abort",d)});let k=g.pipe(new zu);const F={url:i.url,status:g.statusCode,statusText:g.statusMessage,headers:m,size:i.size,timeout:i.timeout,counter:i.counter},A=m.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||A===null||g.statusCode===204||g.statusCode===304){l=new Bt(k,F),r(l);return}const H={flush:ct.Z_SYNC_FLUSH,finishFlush:ct.Z_SYNC_FLUSH};if(A=="gzip"||A=="x-gzip"){k=k.pipe(ct.createGunzip(H)),l=new Bt(k,F),r(l);return}if(A=="deflate"||A=="x-deflate"){g.pipe(new zu).once("data",function(Q){(Q[0]&15)==8?k=k.pipe(ct.createInflate()):k=k.pipe(ct.createInflateRaw()),l=new Bt(k,F),r(l)});return}if(A=="br"&&typeof ct.createBrotliDecompress=="function"){k=k.pipe(ct.createBrotliDecompress()),l=new Bt(k,F),r(l);return}l=new Bt(k,F),r(l)}),Ub(p,i)})}Cr.isRedirect=function(e){return e===301||e===302||e===303||e===307||e===308},Cr.Promise=global.Promise;const zb=Cr,jb="5.4.15";function qb(e){return e.arrayBuffer()}function ju(e){(Au(e.body)||Array.isArray(e.body))&&(e.body=JSON.stringify(e.body));let t={},r,n;return(e.request&&e.request.fetch||zb)(e.url,Object.assign({method:e.method,body:e.body,headers:e.headers,redirect:e.redirect},e.request)).then(o=>{n=o.url,r=o.status;for(const a of o.headers)t[a[0]]=a[1];if(r===204||r===205)return;if(e.method==="HEAD"){if(r<400)return;throw new hr(o.statusText,r,{headers:t,request:e})}if(r===304)throw new hr("Not modified",r,{headers:t,request:e});if(r>=400)return o.text().then(a=>{const l=new hr(a,r,{headers:t,request:e});try{let c=JSON.parse(l.message);Object.assign(l,c);let d=c.errors;l.message=l.message+": "+d.map(JSON.stringify).join(", ")}catch(c){}throw l});const s=o.headers.get("content-type");return/application\/json/.test(s)?o.json():!s||/^text\/|charset=utf-8$/.test(s)?o.text():qb(o)}).then(o=>({status:r,url:n,headers:t,data:o})).catch(o=>{throw o instanceof hr?o:new hr(o.message,500,{headers:t,request:e})})}function Ws(e,t){const r=e.defaults(t);return Object.assign(function(i,o){const s=r.merge(i,o);if(!s.request||!s.request.hook)return ju(r.parse(s));const a=(l,c)=>ju(r.parse(r.merge(l,c)));return Object.assign(a,{endpoint:r,defaults:Ws.bind(null,r)}),s.request.hook(a,s)},{endpoint:r,defaults:Ws.bind(null,r)})}const bo=Ws(Pb,{headers:{"user-agent":`octokit-request.js/${jb} ${vo()}`}}),Wb="4.6.1";class Vb extends Error{constructor(t,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=t,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const Zb=["method","baseUrl","url","headers","request","query","mediaType"],Kb=["query","method","url"],qu=/\/api\/v3\/?$/;function Qb(e,t,r){if(r){if(typeof t=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const s in r)if(!!Kb.includes(s))return Promise.reject(new Error(`[@octokit/graphql] "${s}" cannot be used as variable name`))}const n=typeof t=="string"?Object.assign({query:t},r):t,i=Object.keys(n).reduce((s,a)=>Zb.includes(a)?(s[a]=n[a],s):(s.variables||(s.variables={}),s.variables[a]=n[a],s),{}),o=n.baseUrl||e.endpoint.DEFAULTS.baseUrl;return qu.test(o)&&(i.url=o.replace(qu,"/api/graphql")),e(i).then(s=>{if(s.data.errors){const a={};for(const l of Object.keys(s.headers))a[l]=s.headers[l];throw new Vb(i,{headers:a,data:s.data})}return s.data.data})}function Vs(e,t){const r=e.defaults(t);return Object.assign((i,o)=>Qb(r,i,o),{defaults:Vs.bind(null,r),endpoint:bo.endpoint})}const Yb=Vs(bo,{headers:{"user-agent":`octokit-graphql.js/${Wb} ${vo()}`},method:"POST",url:"/graphql"});function Xb(e){return Vs(e,{method:"POST",url:"/graphql"})}var Jb=Re(5186);async function ey(e){const t=e.split(/\./).length===3?"app":/^v\d+\./.test(e)?"installation":"oauth";return{type:"token",token:e,tokenType:t}}function ty(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function ry(e,t,r,n){const i=t.endpoint.merge(r,n);return i.headers.authorization=ty(e),t(i)}const ny=function(t){if(!t)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof t!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return t=t.replace(/^(token|bearer) +/i,""),Object.assign(ey.bind(null,t),{hook:ry.bind(null,t)})},Wu="3.4.0";class Zs{constructor(t={}){const r=new Jb.Collection,n={baseUrl:bo.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[t.userAgent,`octokit-core.js/${Wu} ${vo()}`].filter(Boolean).join(" "),t.baseUrl&&(n.baseUrl=t.baseUrl),t.previews&&(n.mediaType.previews=t.previews),t.timeZone&&(n.headers["time-zone"]=t.timeZone),this.request=bo.defaults(n),this.graphql=Xb(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},t.log),this.hook=r,t.authStrategy){const{authStrategy:o,...s}=t,a=o(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:s},t.auth));r.wrap("request",a.hook),this.auth=a}else if(!t.auth)this.auth=async()=>({type:"unauthenticated"});else{const o=ny(t.auth);r.wrap("request",o.hook),this.auth=o}this.constructor.plugins.forEach(o=>{Object.assign(this,o(this,t))})}static defaults(t){return class extends this{constructor(...n){const i=n[0]||{};if(typeof t=="function"){super(t(i));return}super(Object.assign({},t,i,i.userAgent&&t.userAgent?{userAgent:`${i.userAgent} ${t.userAgent}`}:null))}}}static plugin(...t){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(t.filter(o=>!n.includes(o))),r}}Zs.VERSION=Wu,Zs.plugins=[];const iy="1.0.3";function Vu(e){e.hook.wrap("request",(t,r)=>{e.log.debug("request",r);const n=Date.now(),i=e.request.endpoint.parse(r),o=i.url.replace(r.baseUrl,"");return t(r).then(s=>(e.log.info(`${i.method} ${o} - ${s.status} in ${Date.now()-n}ms`),s)).catch(s=>{throw e.log.info(`${i.method} ${o} - ${s.status} in ${Date.now()-n}ms`),s})})}Vu.VERSION=iy;const oy="2.13.3";function sy(e){if(!("total_count"in e.data&&!("url"in e.data)))return e;const r=e.data.incomplete_results,n=e.data.repository_selection,i=e.data.total_count;delete e.data.incomplete_results,delete e.data.repository_selection,delete e.data.total_count;const o=Object.keys(e.data)[0],s=e.data[o];return e.data=s,typeof r!="undefined"&&(e.data.incomplete_results=r),typeof n!="undefined"&&(e.data.repository_selection=n),e.data.total_count=i,e}function Ks(e,t,r){const n=typeof t=="function"?t.endpoint(r):e.request.endpoint(t,r),i=typeof t=="function"?t:e.request,o=n.method,s=n.headers;let a=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!a)return{done:!0};const l=await i({method:o,url:a,headers:s}),c=sy(l);return a=((c.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:c}}})}}function Zu(e,t,r,n){return typeof r=="function"&&(n=r,r=void 0),Ku(e,[],Ks(e,t,r)[Symbol.asyncIterator](),n)}function Ku(e,t,r,n){return r.next().then(i=>{if(i.done)return t;let o=!1;function s(){o=!0}return t=t.concat(n?n(i.value,s):i.value.data),o?t:Ku(e,t,r,n)})}const L0=Object.assign(Zu,{iterator:Ks}),ay=null;function $0(e){return typeof e=="string"?ay.includes(e):!1}function Qu(e){return{paginate:Object.assign(Zu.bind(null,e),{iterator:Ks.bind(null,e)})}}Qu.VERSION=oy;const Yu={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateEnvironmentSecret:["PUT /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getEnvironmentPublicKey:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repositories/{repository_id}/environments/{environment_name}/secrets/{secret_name}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repositories/{repository_id}/environments/{environment_name}/secrets"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.rest.reactions.deleteLegacy() is deprecated, see https://docs.github.com/rest/reference/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},Xu="5.0.1";function Ju(e,t){const r={};for(const[n,i]of Object.entries(t))for(const[o,s]of Object.entries(i)){const[a,l,c]=s,[d,p]=a.split(/ /),h=Object.assign({method:d,url:p},l);r[n]||(r[n]={});const f=r[n];if(c){f[o]=cy(e,n,o,h,c);continue}f[o]=e.request.defaults(h)}return r}function cy(e,t,r,n,i){const o=e.request.defaults(n);function s(...a){let l=o.endpoint.merge(...a);if(i.mapToData)return l=Object.assign({},l,{data:l[i.mapToData],[i.mapToData]:void 0}),o(l);if(i.renamed){const[c,d]=i.renamed;e.log.warn(`octokit.${t}.${r}() has been renamed to octokit.${c}.${d}()`)}if(i.deprecated&&e.log.warn(i.deprecated),i.renamedParameters){const c=o.endpoint.merge(...a);for(const[d,p]of Object.entries(i.renamedParameters))d in c&&(e.log.warn(`"${d}" parameter is deprecated for "octokit.${t}.${r}()". Use "${p}" instead`),p in c||(c[p]=c[d]),delete c[d]);return o(c)}return o(...a)}return Object.assign(s,o)}function ly(e){return{rest:Ju(e,Yu)}}ly.VERSION=Xu;function ed(e){const t=Ju(e,Yu);return{...t,rest:t}}ed.VERSION=Xu;const uy="18.5.3",dy=Zs.plugin(Vu,ed,Qu).defaults({userAgent:`octokit-rest.js/${uy}`});var td;(function(e){e[e.Force=0]="Force",e[e.ForceWithLease=1]="ForceWithLease"})(td||(td={}));var vn;(function(e){e[e.Head=0]="Head",e[e.RemoteHead=1]="RemoteHead",e[e.Tag=2]="Tag"})(vn||(vn={}));var di;(function(e){e[e.INDEX_MODIFIED=0]="INDEX_MODIFIED",e[e.INDEX_ADDED=1]="INDEX_ADDED",e[e.INDEX_DELETED=2]="INDEX_DELETED",e[e.INDEX_RENAMED=3]="INDEX_RENAMED",e[e.INDEX_COPIED=4]="INDEX_COPIED",e[e.MODIFIED=5]="MODIFIED",e[e.DELETED=6]="DELETED",e[e.UNTRACKED=7]="UNTRACKED",e[e.IGNORED=8]="IGNORED",e[e.INTENT_TO_ADD=9]="INTENT_TO_ADD",e[e.ADDED_BY_US=10]="ADDED_BY_US",e[e.ADDED_BY_THEM=11]="ADDED_BY_THEM",e[e.DELETED_BY_US=12]="DELETED_BY_US",e[e.DELETED_BY_THEM=13]="DELETED_BY_THEM",e[e.BOTH_ADDED=14]="BOTH_ADDED",e[e.BOTH_DELETED=15]="BOTH_DELETED",e[e.BOTH_MODIFIED=16]="BOTH_MODIFIED"})(di||(di={}));var rd;(function(e){e.BadConfigFile="BadConfigFile",e.AuthenticationFailed="AuthenticationFailed",e.NoUserNameConfigured="NoUserNameConfigured",e.NoUserEmailConfigured="NoUserEmailConfigured",e.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",e.NotAGitRepository="NotAGitRepository",e.NotAtRepositoryRoot="NotAtRepositoryRoot",e.Conflict="Conflict",e.StashConflict="StashConflict",e.UnmergedChanges="UnmergedChanges",e.PushRejected="PushRejected",e.RemoteConnectionError="RemoteConnectionError",e.DirtyWorkTree="DirtyWorkTree",e.CantOpenResource="CantOpenResource",e.GitNotFound="GitNotFound",e.CantCreatePipe="CantCreatePipe",e.PermissionDenied="PermissionDenied",e.CantAccessRemote="CantAccessRemote",e.RepositoryNotFound="RepositoryNotFound",e.RepositoryIsLocked="RepositoryIsLocked",e.BranchNotFullyMerged="BranchNotFullyMerged",e.NoRemoteReference="NoRemoteReference",e.InvalidBranchName="InvalidBranchName",e.BranchAlreadyExists="BranchAlreadyExists",e.NoLocalChanges="NoLocalChanges",e.NoStashFound="NoStashFound",e.LocalChangesOverwritten="LocalChangesOverwritten",e.NoUpstreamBranch="NoUpstreamBranch",e.IsInSubmodule="IsInSubmodule",e.WrongCase="WrongCase",e.CantLockRef="CantLockRef",e.CantRebaseMultipleBranches="CantRebaseMultipleBranches",e.PatchDoesNotApply="PatchDoesNotApply",e.NoPathFound="NoPathFound",e.UnknownPath="UnknownPath"})(rd||(rd={}));function nd(e,t,r){return[...e.reduce((i,o)=>{const s=t(o),a=i.get(s);if(a===void 0)i.set(s,o);else{const l=r(a,o);l!==void 0&&i.set(s,l)}return i},new Map).values()]}const fy="";function hy(...e){if(e.length===1){const t=e[0];return t==null?fy:typeof t=="string"?t:typeof t=="number"||typeof t=="boolean"?String(t):JSON.stringify(t)}return JSON.stringify(e)}function py(e){return e!=null&&typeof e.then=="function"}function gy(e){return(t,r,n)=>{let i;if(typeof n.value=="function"?i=n.value:typeof n.get=="function"&&(i=n.get),i==null)throw new Error("Not supported");const o=`$gate$${r}`;n.value=function(...s){const a=s.length===0?o:`${o}$${(e!=null?e:hy)(...s)}`;Object.prototype.hasOwnProperty.call(this,a)||Object.defineProperty(this,a,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let l=this[a];if(l===void 0){let c;try{if(c=i.apply(this,s),c==null||!py(c))return c;this[a]=l=c.then(d=>(this[a]=void 0,d)).catch(d=>{throw this[a]=void 0,d})}catch(d){throw this[a]=void 0,d}}return l}}}const my="github-pr-owner-number";function vy(e){return`branch.${e}.${my}`}const wy=(0,y.LV)(),by=new TextDecoder;class yy{constructor(t,r,n,i,o){this.rootUri=t,this.sourceControl=r,this.metadata=n,this.changeStore=i,this.github=o,this._onDidChangeSelection=new u.EventEmitter,this._onDidChangeState=new u.EventEmitter;var s;this.disposable=u.Disposable.from(this.sourceControl.onDidChangeSelection(()=>this._onDidChangeSelection.fire()),this.changeStore.onDidChange(()=>this._onDidChangeState.fire()),this._onDidChangeSelection,this._onDidChangeState),this._inputBox={get value(){return r.inputBox.value}},this._ui={get selected(){return r.selected},onDidChange:this._onDidChangeSelection.event};const{repo:{owner:a,name:l}}=n;this.remote={name:"origin",fetchUrl:`https://github.com/${a}/${l}.git`,isReadOnly:n.accessLevel>=rt.Write},this.remotes=[this.remote],n.pullRequest&&(n.pullRequest.repo.owner!==a||n.pullRequest.repo.name!==l)&&this.remotes.push({name:"upstream",fetchUrl:`https://github.com/${n.pullRequest.repo.owner}/${n.pullRequest.repo.name}.git`,isReadOnly:!0}),this._state={HEAD:((s=n.HEAD.detached)==null?void 0:s.type)===Rt.Tag?{type:vn.Tag,name:n.HEAD.detached.name,commit:n.HEAD.sha}:n.HEAD.branch?{type:vn.Head,commit:n.HEAD.sha,name:n.HEAD.branch.name,upstream:{name:n.HEAD.branch.name,remote:this.remote.name}}:void 0,indexChanges:[],mergeChanges:[],onDidChange:this._onDidChangeState.event,rebaseCommit:void 0,refs:[],remotes:this.remotes,submodules:[],get workingTreeChanges(){return[...lr(i.getChanges(t),c=>c.fileType!==u.FileType.File?void 0:{uri:c.uri,status:Ty(c.type),originalUri:c.uri,renameUri:c.uri})]}}}dispose(){this.disposable.dispose()}get inputBox(){return this._inputBox}get state(){return this._state}get ui(){return this._ui}getConfigs(){return Promise.resolve([])}async getConfig(t){if(!this.metadata.HEAD.branch)return"";if(t===vy(this.metadata.HEAD.branch.name)){const r=await this.github.getPullRequestForBranch(this.rootUri,this.metadata.HEAD.branch.name);if(r!==void 0)return`${r.repository.owner}#${r.repository.name}#${r.id}`}return""}setConfig(t,r){return Promise.resolve("")}getGlobalConfig(t){throw new Error("Method not implemented.")}async getObjectDetails(t,r){return this.github.getObjectDetails(this.rootUri,t,id(r))}detectObjectType(t){return Promise.resolve({mimetype:"text/plain"})}buffer(t,r){throw new Error("Method not implemented.")}async show(t,r){const n=await this.github.getFileContent(this.rootUri,t,id(r));return by.decode(n)}async getCommit(t){const r=await this.github.getCommit(this.rootUri,t);if(r===void 0)throw new Error(`Unable to find commit for ref "${t}"`);return r}clean(t){throw new Error("Method not implemented.")}apply(t,r){throw new Error("Method not implemented.")}diff(t){throw new Error("Method not implemented.")}diffWithHEAD(t){if(t)return"";throw new Error("Method not implemented.")}diffWith(t,r){throw new Error("Method not implemented.")}diffIndexWithHEAD(t){throw new Error("Method not implemented.")}diffIndexWith(t,r){throw new Error("Method not implemented.")}diffBlobs(t,r){throw new Error("Method not implemented.")}diffBetween(t,r,n){throw new Error("Method not implemented.")}hashObject(t){throw new Error("Method not implemented.")}async createBranch(t,r,n){n||(n=this.metadata.HEAD.sha);const i=await this.github.createBranch(this.rootUri,t,n);r&&await this.checkout(i)}deleteBranch(t,r){throw new Error("Method not implemented.")}async getBranch(t){const{branches:r}=await this.github.getBranches(this.rootUri,{query:t,limit:1}),[n]=r;if(n===void 0)throw new Error(`Unable to find branch named "${t}"`);return{type:n.type,name:n.name,commit:n.commit,remote:this.remote.name,upstream:{name:n.name,remote:n.commitUrl}}}async getBranches(t){var r,n;const{branches:i}=await this.github.getBranches(this.rootUri,{query:(n=(r=t.contains)!=null?r:t.pattern)!=null?n:"",limit:t.count});if(i.length===0)throw new Error(`Unable to find branches for "${t.contains}"`);return i.map(o=>({type:o.type,name:o.name,commit:o.commit}))}setBranchUpstream(t,r){throw new Error("Method not implemented.")}getMergeBase(t,r){throw new Error("Method not implemented.")}async status(){}async checkout(t){return this.github.switchTo(this.rootUri,t,{openInNewWindow:!1})}addRemote(t,r){var n;let i;const o=this.remotes.findIndex(s=>s.name===t);return o!==-1&&([i]=this.remotes.splice(o,1)),this.remotes.push({name:t,fetchUrl:r,isReadOnly:(n=i==null?void 0:i.isReadOnly)!=null?n:!1}),Promise.resolve()}removeRemote(t){const r=this.remotes.findIndex(n=>n.name===t);return r!==-1&&this.remotes.splice(r,1),Promise.resolve()}renameRemote(t,r){const n=this.remotes.findIndex(o=>o.name===t);if(n===-1)return Promise.resolve();const[i]=this.remotes.splice(n,1);return this.remotes.push({...i,name:r}),Promise.resolve()}async fetch(t,r,n){return this.github.fetch(this.rootUri)}async pull(t){return this.github.sync(this.rootUri,this.changeStore,{conflictResolution:vt.Merge})}push(t,r,n){throw new Error("Method not implemented.")}blame(t){throw new Error("Method not implemented.")}async log(t){if((t==null?void 0:t.maxEntries)!==1||(t==null?void 0:t.path)!==void 0)throw new Error("The specified log options are not yet supported.");return[await this.getCommit(this.metadata.HEAD.sha)]}async commit(t,r){if((r==null?void 0:r.amend)!==void 0||(r==null?void 0:r.empty)!==void 0||(r==null?void 0:r.signCommit)!==void 0||(r==null?void 0:r.signoff)!==void 0)throw new Error("The specified commit options are not yet supported.");let n;(r==null?void 0:r.all)===!1?n=this.changeStore.getStagedChanges(this.rootUri):n=this.changeStore.getChanges(this.rootUri);const i=this.github.getCommitOperations(this.rootUri,n,this.changeStore);if(!i.length){u.window.showInformationMessage(wy("no changes to commit","There are no changes to commit."));return}await this.github.createCommit(this.rootUri,t,i)}}const _y=/^\/?([a-zA-Z])(?::\/)(.*)$/,Ey=/\\/g;function id(e){e=u.Uri.file(e).fsPath.replace(Ey,"/");const t=_y.exec(e);return t!==null&&([,,e]=t),e.startsWith("/")?e.substr(1):e}function Ty(e){switch(e){case Te.Changed:return di.MODIFIED;case Te.Created:return di.INTENT_TO_ADD;case Te.Deleted:return di.DELETED}}var Sy=Object.defineProperty,ky=Object.getOwnPropertyDescriptor,Cy=(e,t,r,n)=>{for(var i=n>1?void 0:n?ky(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&Sy(t,r,i),i};const xy=(0,y.LV)();function yo(e){const[t,r]=e.authority.split("+");let n,i;r&&([n,i]=r.split("~"));const[,o,s,...a]=e.path.split("/");return{scheme:t,repo:{owner:o,name:s},path:a.join("/")||"",ref:n||void 0,pullRequest:i?Number(i):void 0}}function od(e,t){const{repo:r}=t!=null?t:yo(e);return e.with({path:`/${r.owner}/${r.name}`})}function Qs(e,t,r){const{repo:{owner:n,name:i}}=e instanceof u.Uri?yo(e):e;return u.Uri.parse(`github://github+${t}/${n}/${i}/${r}`)}class sd{constructor(t,r){this.providerService=t,this.metadataStore=r,this.pendingMetadataRequests=new Map,this.rootUriToMetadataMap=new Map}dispose(){}async ensureAuthenticated(){if(this._session===void 0){async function t(){try{return await u.authentication.getSession("github",["repo"],{createIfNone:!0})}catch{try{const n=await u.authentication.getSession("github",["repo"],{createIfNone:!1});if(n!==void 0)return n}catch{}return new Promise(async n=>{async function i(){const s=await u.authentication.getSession("github",["repo"],{createIfNone:!0});s!==void 0&&n(s)}if(u.authentication.providers.some(s=>s.id==="github")){await i();return}const o=u.authentication.onDidChangeSessions(async s=>{s.provider.id==="github"&&(o.dispose(),await i())})})}}this._session=await t();const r=u.authentication.onDidChangeSessions(n=>{if(this._session===void 0){r.dispose();return}n.provider.id==="github"&&(this._session=void 0,this._graphql=void 0,this._octokit=void 0,r.dispose())})}return this._session}async graphql(){if(this._graphql===void 0){const t=await this.ensureAuthenticated();this._graphql=Yb.defaults({headers:{Authorization:`Bearer ${t.accessToken}`}})}return this._graphql}async octokit(t){if(this._octokit===void 0){const r=await this.ensureAuthenticated();this._octokit=dy.defaults({auth:`token ${r.accessToken}`})}return new this._octokit(t)}async getMetadata(t){t=this.providerService.getVirtualUri(t);const r=yo(t),n=od(t,r),i=n.toString();let o=this.pendingMetadataRequests.get(i);o===void 0&&(o=this.getMetadataCore(n),this.pendingMetadataRequests.set(i,o));try{return{...await o,path:r.path,scheme:r.scheme}}finally{this.pendingMetadataRequests.delete(i)}}async getMetadataCore(t){var r,n,i,o;const s=t.toString();let a=this.rootUriToMetadataMap.get(s);if(a!==void 0)return a;if(a=this.metadataStore.get(t),a!==void 0)return this.rootUriToMetadataMap.set(s,a),a;let{repo:{owner:l,name:c},ref:d,pullRequest:p}=yo(t);(!d||/HEAD/i.test(d))&&(d="HEAD");const h=dc(d);if(h===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);const f=await this.getRepositoryInfo(l,c,{ref:d,pr:p});if(f===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let g;if(h==="sha")g=d;else if(g=(n=(r=f.ref)==null?void 0:r.sha)!=null?n:f.defaultBranch.sha,g===void 0)throw new Error(`Cannot get metadata for Uri(${t.toString(!0)}); Unable to get repository info`);let m;return((i=f.ref)==null?void 0:i.prefix)==="refs/heads/"?m={sha:g,branch:{name:f.ref.name,sha:f.ref.sha}}:((o=f.ref)==null?void 0:o.prefix)==="refs/tags/"?m={sha:g,detached:{type:Rt.Tag,name:f.ref.name}}:m={sha:g,detached:{type:Rt.Commit,name:nt(g)}},a={version:$i.schemaVersion,timestamp:Date.now(),provider:{id:"github",name:"GitHub"},name:`${f.repo.owner}/${f.repo.name}`,repo:f.repo,user:f.user,accessLevel:f.accessLevel,HEAD:m,defaultBranch:f.defaultBranch,pullRequest:f.pullRequest},await this.updateMetadata(t,a),a}async updateMetadata(t,r){this.rootUriToMetadataMap.set(t.toString(),r),await this.metadataStore.set(this.providerService.getVirtualUri(t),r)}getRemoteWorkspaceSourceProviders(){return[{name:"GitHub",type:ur.Repository,icon:"$(github)",provideSources:async(t,r)=>(await this.searchRepositoriesQuery(t!=null?t:"",r)).map(i=>({name:i.repoWithOwner,description:`${i.fork?`$(repo-forked) ${i.fork}`:""}${i.stars>0?`${i.fork?" \u2022 ":""}$(star-full) ${i.stars}`:""}`,detail:i.description,url:i.url}))},{name:"GitHub",type:ur.PullRequest,icon:"$(github)",provideSources:async(t,r)=>(await this.searchPullRequestsQuery(t!=null?t:"")).map(i=>({name:i.title,description:i.reasons.length!==0?i.reasons.sort().join(", "):void 0,detail:`${i.repoWithOwner} #${i.number}`,url:i.url}))}]}createIGitRepository(t,r,n,i){return new yy(t,r,n,i,this.providerService.getProvider(t).api)}async createBranch(t,r,n,i){try{const{repo:{owner:o,name:s}}=i!=null?i:await this.getMetadata(t);return r.startsWith("refs/heads/")||(r=`refs/heads/${r}`),(await(await this.octokit()).git.createRef({owner:o,repo:s,ref:r,sha:n})).data.ref.substr(11)}catch(o){throw o instanceof hr&&o.status===422?o.message==="Reference already exists"?new Ar(o,!0):new Ar(o,!1):(me.error(o),o)}}async createCommit(t,r,n,i){try{const o=await this.getMetadata(t),{repo:{owner:s,name:a}}=i!=null?i:o,l=await this.octokit(),c=await l.git.getTree({owner:s,repo:a,tree_sha:o.HEAD.sha,recursive:"true"}),d=[];for(const f of n)if(f.fileType===u.FileType.File)switch(f.type){case Te.Created:{d.push({path:f.path,mode:"100644",type:"blob",content:f.content});break}case Te.Changed:{const g=c.data.tree.find(m=>m.path===f.path);if(g!==void 0){const{path:m,mode:k,type:F}=g;d.push({path:m,mode:k,type:F,content:f.content})}else d.push({path:f.path,mode:"100644",type:"blob",content:f.content});break}case Te.Deleted:{d.push({path:f.path,mode:"100644",type:"blob",sha:null});break}}const p=await l.git.createTree({owner:s,repo:a,base_tree:c.data.sha,tree:d});return(await l.git.createCommit({owner:s,repo:a,message:r,tree:p.data.sha,parents:[o.HEAD.sha]})).data.sha}catch(o){throw me.error(o),o}}async createPullRequest(t,r,n,i,o){var s,a,l;try{const{repo:{owner:c,name:d},HEAD:{branch:p},defaultBranch:h}=await this.getMetadata(t),g=await(await this.octokit()).pulls.create({owner:c,repo:d,base:`refs/heads/${(s=p==null?void 0:p.name)!=null?s:h.name}`,head:o?`${o.repo.owner}:${r}`:r,title:n,draft:(a=i==null?void 0:i.draft)!=null?a:!1,maintainer_can_modify:(l=i==null?void 0:i.canMaintainerModify)!=null?l:!0});return{id:g.data.number.toString(),uri:u.Uri.parse(g.data.html_url)}}catch(c){throw me.error(c),c}}async fetch(t,r){const[n,i]=await this.fetchCore(t,{...r,sync:!1});n&&await this.updateMetadata(t,i)}async fetchCore(t,r){var n,i,o,s,a,l,c,d,p,h;const f=await this.getMetadata(t);if(f.HEAD.detached)return[!1,f];const g=await this.getBranchTips(t);if(!g)throw me.warn(`Unabled to fetch branch tips for rootUri=${t.toString(!0)}`),new Io(r.sync);if(!r.force&&((n=g.defaultBranch)==null?void 0:n.sha)!==void 0&&g.defaultBranch.sha===f.defaultBranch.sha&&((i=g.branch)==null?void 0:i.sha)!==void 0&&g.branch.sha===f.HEAD.branch.sha)return[!1,f];let m;if(((o=g.defaultBranch)==null?void 0:o.sha)!==void 0&&g.defaultBranch.sha!==f.defaultBranch.sha&&(m={defaultBranch:{...f.defaultBranch,sha:g.defaultBranch.sha}}),((s=g.branch)==null?void 0:s.sha)===void 0)return m!==void 0?[!0,{...f,...m}]:[!1,f];if(g.branch.sha!==f.HEAD.branch.sha&&(m={...m,HEAD:{...f.HEAD,branch:{...f.HEAD.branch,sha:g.branch.sha},detached:void 0}}),g.branch.sha===f.HEAD.sha)return f.state!==void 0||m!==void 0?[!0,{...f,...m,state:void 0}]:[!1,f];try{const F=await(await this.octokit()).repos.compareCommits({base:f.HEAD.sha,head:(c=(l=(a=m==null?void 0:m.HEAD)==null?void 0:a.branch)==null?void 0:l.sha)!=null?c:f.HEAD.branch.sha,owner:f.repo.owner,repo:f.repo.name}),A=[];for(const H of(d=F.data.files)!=null?d:[])switch(H.status){case"added":case"copied":A.push({path:H.filename,type:Te.Created});break;case"removed":A.push({path:H.filename,type:Te.Deleted});break;case"modified":A.push({path:H.filename,type:Te.Changed});break;case"renamed":A.push({path:H.filename,type:Te.Created}),A.push({path:H.previous_filename,type:Te.Deleted});break;default:me.warn(`Unknown file status encountered '${H.status}'`);break}return[!0,{...f,...m,state:{ahead:(p=F.data.behind_by)!=null?p:0,behind:(h=F.data.ahead_by)!=null?h:0,incomingChanges:A}}]}catch(k){return me.error(k),m!==void 0?[!0,{...f,...m}]:[!1,f]}}async fork(t){try{const{repo:{owner:r,name:n}}=await this.getMetadata(t),o=await(await this.octokit()).repos.createFork({owner:r,repo:n});let s;for(;;){try{if(s=await this.getRepositoryInfo(o.data.owner.login,o.data.name),s!==void 0)break}catch{}await new Promise(a=>setTimeout(a,250))}return{name:`${o.data.owner.login}/${o.data.name}`,repo:{owner:o.data.owner.login,name:o.data.name},url:o.data.url}}catch(r){throw me.error(r),r}}async getBranches(t,r){var n,i,o;try{const{repo:{owner:s,name:a}}=await this.getMetadata(t),l=`query (
	$owner: String!
	$repo: String!
	$branchQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $branchQuery, refPrefix: "refs/heads/", first: $limit, after: $cursor) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
				}
			}
		}
	}
}`,c=await this.gqlQuery(l,{owner:s,repo:a,branchQuery:(n=r==null?void 0:r.query)!=null?n:"",cursor:r==null?void 0:r.cursor,limit:Math.min(100,(i=r==null?void 0:r.limit)!=null?i:100)});if(c===void 0)return{branches:[]};const d=(o=c.repository)==null?void 0:o.refs;if(d===void 0)return{branches:[]};const p=d.nodes.map(h=>({type:vn.Head,name:h.name,commit:h.target.oid,commitUrl:h.target.commitUrl}));return{paging:{cursor:d.pageInfo.endCursor,more:d.pageInfo.hasNextPage},branches:p}}catch(s){return{branches:[]}}}async getCommit(t,r){var n;try{const{repo:{owner:i,name:o}}=await this.getMetadata(t),s=`query ($owner: String! $repo: String! $ref: GitObjectID!) {
	repository(name: $repo owner: $owner) {
		object(oid: $ref) {
			...on Commit {
				oid
				message
				parents(first: 100) {
					nodes {
						oid
					}
				}
				author {
					date
					email
					name
				}
				committer {
					date
				}
			}
		}
	}
}`,a=await this.gqlQuery(s,{owner:i,repo:o,ref:r});if(a===void 0)return;const l=(n=a.repository)==null?void 0:n.object;return l===void 0?void 0:{hash:l.oid,message:l.message,parents:l.parents.nodes.map(c=>c.oid),authorDate:new Date(l.author.date),authorEmail:l.author.email,authorName:l.author.name,commitDate:new Date(l.committer.date)}}catch(i){return}}getCommitOperations(t,r,n){return r.map(o=>{const s=this.providerService.getRelativeFilePath(t,o.uri);switch(o.type){case Te.Created:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case Te.Changed:return{type:o.type,path:s,fileType:o.fileType,content:n.getContent(o.uri)};case Te.Deleted:return{type:o.type,path:s,fileType:o.fileType}}})}async getCommits(t,r){var n,i,o;try{const{repo:{owner:s,name:a}}=await this.getMetadata(t),l=`query (
	$owner: String!
	$repo: String!
	$ref: GitObjectID!
	$path: String
	$cursor: String
	$limit: Int = 100
) {
	repository(name: $repo, owner: $owner) {
		object(oid: $ref) {
			... on Commit {
				history(first: $limit, path: $path, after: $cursor) {
					pageInfo {
						endCursor
						hasNextPage
					}
					nodes {
						... on Commit {
							...commit
						}
					}
				}
			}
		}
	}
}

fragment commit on Commit {
	oid
	message
	parents(first: 100) {
		nodes {
			oid
		}
	}
	author {
		date
		email
		name
	}
	committer {
		date
	}
}
`,c=await this.gqlQuery(l,{owner:s,repo:a,ref:r==null?void 0:r.ref,cursor:r==null?void 0:r.cursor,path:r==null?void 0:r.path,limit:Math.min(100,(n=r==null?void 0:r.limit)!=null?n:100)});if(c===void 0)return;const d=(o=(i=c.repository)==null?void 0:i.object)==null?void 0:o.history;if(d===void 0)return;const p=d.nodes.map(h=>({hash:h.oid,message:h.message,parents:h.parents.nodes.map(f=>f.oid),authorDate:new Date(h.author.date),authorEmail:h.author.email,authorName:h.author.name,commitDate:new Date(h.committer.date)}));return{paging:{cursor:d.pageInfo.endCursor,more:d.pageInfo.hasNextPage},commits:p}}catch(s){return}}async getFileContent(t,r,n){try{const{repo:{owner:i,name:o}}=await this.getMetadata(t),s=await this.getObjectDetails(t,r,n);if(s===void 0)throw new Error(`Cannot read contents of Uri(${t.toString(!0)})`);const l=await(await this.octokit()).git.getBlob({owner:i,repo:o,file_sha:s.object});return yb(l.data.content)}catch(i){throw me.error(i),i}}async getFork(t){var r,n,i;try{const{repo:{owner:o,name:s}}=await this.getMetadata(t),a=`query ($owner: String!, $repo: String!) {
	repository(owner: $owner, name: $repo) {
		forks(affiliations: OWNER, first: 1) {
			nodes {
				owner {
					login
				}
				name
				url
			}
		}
	}
}`,l=await this.gqlQuery(a,{owner:o,repo:s});if(l===void 0)return;const[c]=(i=(n=(r=l.repository)==null?void 0:r.forks)==null?void 0:n.nodes)!=null?i:[];return c===void 0?void 0:{name:`${c.owner.login}/${c.name}`,repo:{owner:c.owner.login,name:c.name},url:c.url}}catch(o){return}}async getIncomingChanges(t){return this.getIncomingChangesCore(t,await this.getMetadata(t))}getIncomingChangesCore(t,r){var n,i,o;return((o=(i=(n=r.state)==null?void 0:n.incomingChanges)==null?void 0:i.length)!=null?o:0)===0?[]:r.state.incomingChanges.map(s=>({uri:u.Uri.joinPath(t,s.path),type:s.type}))}async getObjectDetails(t,r,n){var i;try{const{repo:{owner:o,name:s},path:a,HEAD:{sha:l}}=await this.getMetadata(t);n=n?this.providerService.getRelativeFilePath(t,this.providerService.createRelativeUri(t,n)):a,r===void 0&&(r=l);const p=(await(await this.octokit()).git.getTree({owner:o,repo:s,tree_sha:r,recursive:"true"})).data.tree.find(h=>h.path===n);if(p===void 0||p.mode===void 0||p.sha===void 0)throw new Error(`Cannot get details of ${n} in ${r}`);return{mode:p.mode,object:p.sha,size:(i=p.size)!=null?i:0}}catch(o){throw me.error(o),o}}async getPullRequest(t,r){var n,i,o,s,a,l,c;try{const{repo:{owner:d,name:p}}=await this.getMetadata(t),h=`query ($owner: String!, $repo: String!, $number: Int!) {
	repository(name: $repo, owner: $owner) {
		pullRequest(number: $number) {
			author {
				login
				avatarUrl
				url
			}
			permalink
			number
			title
			state
			updatedAt
			closedAt
			mergedAt
			repository {
				name
				owner {
					login
				}
			}
			baseRef {
				name
			}
			baseRefName
			baseRefOid
			baseRepository {
				name
				owner {
					login
				}
			}
			headRef {
				name
			}
			headRefName
			headRefOid
			headRepository {
				name
				owner {
					login
				}
			}
			headRepositoryOwner {
				login
			}
		}
	}
}`,f=await this.gqlQuery(h,{owner:d,repo:p,number:Number(r)}),g=(n=f==null?void 0:f.repository)==null?void 0:n.pullRequest;return g?{author:{name:g.author.login,avatarUrl:g.author.avatarUrl,url:g.author.url},closedAt:g.closedAt?new Date(g.closedAt):void 0,mergedAt:g.mergedAt?new Date(g.mergedAt):void 0,id:g.number.toString(),repository:{name:g.repository.name,owner:g.repository.owner.login},state:_o(g.state),title:g.title,updatedAt:new Date(g.updatedAt),url:g.permalink,refs:{base:{owner:g.baseRepository.owner.login,repo:g.baseRepository.name,branch:g.baseRefName,sha:g.baseRefOid,exists:g.baseRef!=null},head:{owner:(a=(s=(i=g.headRepository)==null?void 0:i.owner.login)!=null?s:(o=g.headRepositoryOwner)==null?void 0:o.login)!=null?a:"<unknown>",repo:(c=(l=g.headRepository)==null?void 0:l.name)!=null?c:g.baseRepository.name,branch:g.headRefName,sha:g.headRefOid,exists:g.headRef!=null}}}:void 0}catch(d){me.error(d);return}}async getPullRequestForBranch(t,r,n){var i,o,s,a,l;try{const{repo:{owner:c,name:d}}=await this.getMetadata(t),p=`query ($owner: String!, $repo: String!, $branch: String!, $maxCount: Int!, $states: [PullRequestState!]) {
	repository(name: $repo, owner: $owner) {
		refs(query: $branch, refPrefix: "refs/heads/", first: 1) {
			nodes {
				associatedPullRequests(first: $maxCount, orderBy: {field: UPDATED_AT, direction: DESC}, states: $states) {
					nodes {
						author {
							login
							avatarUrl
							url
						}
						permalink
						number
						title
						state
						updatedAt
						closedAt
						mergedAt
						repository {
							isFork
							name
							owner {
								login
							}
						}
					}
				}
			}
		}
	}
}`,h=await this.gqlQuery(p,{owner:c,repo:d,branch:r,maxCount:(i=n==null?void 0:n.maxCount)!=null?i:1,states:n==null?void 0:n.include}),f=(l=(a=(s=(o=h==null?void 0:h.repository)==null?void 0:o.refs.nodes[0])==null?void 0:s.associatedPullRequests)==null?void 0:a.nodes)==null?void 0:l.filter(m=>!m.repository.isFork||m.repository.owner.login===c);if(f==null||f.length===0)return;f.length>1&&f.sort((m,k)=>(m.repository.owner.login===c?-1:1)-(k.repository.owner.login===c?-1:1)||(m.state==="OPEN"?-1:1)-(k.state==="OPEN"?-1:1)||new Date(k.updatedAt).getTime()-new Date(m.updatedAt).getTime());const[g]=f;return{author:{name:g.author.login,avatarUrl:g.author.avatarUrl,url:g.author.url},closedAt:g.closedAt?new Date(g.closedAt):void 0,mergedAt:g.mergedAt?new Date(g.mergedAt):void 0,id:g.number.toString(),repository:{name:g.repository.name,owner:g.repository.owner.login},state:_o(g.state),title:g.title,updatedAt:new Date(g.updatedAt),url:g.permalink}}catch(c){me.error(c);return}}async getRepoFileNames(t){try{const{repo:{owner:r,name:n},HEAD:{sha:i}}=await this.getMetadata(t),o=await(await this.octokit()).git.getTree({owner:r,repo:n,recursive:"1",tree_sha:i});return lr(o.data.tree,s=>s.type==="blob"?s.path:void 0)}catch(r){return[]}}async getTags(t,r){var n,i,o;try{const{repo:{owner:s,name:a}}=await this.getMetadata(t),l=`query (
	$owner: String!
	$repo: String!
	$tagQuery: String!
	$cursor: String
	$limit: Int = 100
) {
	repository(owner: $owner, name: $repo) {
		refs(query: $tagQuery, refPrefix: "refs/tags/", first: $limit, after: $cursor, orderBy: { field: TAG_COMMIT_DATE, direction: DESC }) {
			pageInfo {
				endCursor
				hasNextPage
			}
			nodes {
				name
				target {
					oid
				}
			}
		}
	}
}`,c=await this.gqlQuery(l,{owner:s,repo:a,tagQuery:(n=r==null?void 0:r.query)!=null?n:"",cursor:r==null?void 0:r.cursor,limit:Math.min(100,(i=r==null?void 0:r.limit)!=null?i:100)});if(c===void 0)return{tags:[]};const d=(o=c.repository)==null?void 0:o.refs;if(d===void 0)return{tags:[]};const p=d.nodes.map(h=>({type:vn.Tag,name:h.name,commit:h.target.oid,commitUrl:h.target.commitUrl}));return{paging:{cursor:d.pageInfo.endCursor,more:d.pageInfo.hasNextPage},tags:p}}catch(s){return{tags:[]}}}async getTarGz(t,r){const{repo:{owner:n,name:i},HEAD:{sha:o}}=await this.getMetadata(t);r=r!=null?r:o;let s=Fe.get("search.download.corsProxy")||void 0;s&&!/^http/.test(s)&&(s=`https://${s}`),s&&!/\/$/.test(s)&&(s=`${s}/`);const a=await this.ensureAuthenticated(),l=s?`${s}api.github.com/repos/${n}/${i}/tarball/${r}`:`https://api.github.com/repos/${n}/${i}/tarball/${r}`,c=await ti(l,{headers:{Authorization:`Bearer ${a.accessToken}`}});return new Uint8Array(await c.arrayBuffer())}async pushCommit(t,r,n,i){try{const o=await this.getMetadata(t),{repo:{owner:s,name:a}}=i!=null?i:o;if(n===void 0&&o.HEAD.detached)throw new Pn("Unable to commit; no current branch");(n==null?void 0:n.startsWith("refs/heads/"))&&(n=n.substr(11));const c=await(await this.octokit()).git.updateRef({owner:s,repo:a,ref:`heads/${n!=null?n:o.HEAD.branch.name}`,sha:r});return n===void 0&&!o.HEAD.detached&&await this.fastForwardTo(t,r,o),c.data.ref}catch(o){throw o instanceof hr&&o.status===422&&o.message.includes("Update is not a fast forward")?new xi(o):(me.error(o),o)}}async queryRepositoryObject(t,r){var n,i;try{const{repo:{owner:o,name:s},HEAD:{sha:a},path:l}=await this.getMetadata(t),c=`query ($owner: String!, $repo: String!, $path: String) {
	repository(owner: $owner, name: $repo) {
		object(expression: $path) {
			${r}
		}
	}
}`,d=await this.gqlQuery(c,{owner:o,repo:s,path:`${a}:${l}`});return(i=(n=d==null?void 0:d.repository)==null?void 0:n.object)!=null?i:void 0}catch(o){return}}async searchPullRequestsQuery(t){try{let r=function(s,a){return{number:s.number,title:s.title,repoWithOwner:s.repository.nameWithOwner,reasons:a?[a]:[],url:s.url}};const n=`query ($authored: String!, $assigned: String!, $reviewRequested: String!, $mentioned: String!) {
	viewer {
		repositories(first: 100, orderBy: { field: STARGAZERS, direction: DESC }) {
			nodes {
				pullRequests(first: 100, states: OPEN, orderBy: { field: UPDATED_AT, direction: DESC }) {
					nodes {
						number
						title
						url
						repository {
							nameWithOwner
						}
					}
				}
			}
		}
	}
	authored: search(first: 100, query: $authored, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	assigned: search(first: 100, query: $assigned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	reviewRequested: search(first: 100, query: $reviewRequested, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
	mentioned: search(first: 100, query: $mentioned, type: ISSUE) {
		nodes {
			...on PullRequest {
				number
				title
				url
				repository {
					nameWithOwner
				}
			}
		}
	}
}`;t=t.trim();const i=await this.gqlQuery(n,{authored:(t?`${t} is:pr is:open archived:false author:@me`:"is:pr is:open archived:false author:@me").trim(),assigned:(t?`${t} is:pr is:open archived:false assignee:@me`:"is:pr is:open archived:false assignee:@me").trim(),reviewRequested:(t?`${t} is:pr is:open archived:false review-requested:@me`:"is:pr is:open archived:false review-requested:@me").trim(),mentioned:(t?`${t} is:pr is:open archived:false mentions:@me`:"is:pr is:open archived:false mentions:@me").trim()});return i===void 0?[]:nd([...i.assigned.nodes.map(s=>r(s,"assigned")),...i.reviewRequested.nodes.map(s=>r(s,"review requested")),...i.mentioned.nodes.map(s=>r(s,"mentioned")),...i.authored.nodes.map(s=>r(s,"authored")),...Ga(i.viewer.repositories.nodes,s=>s.pullRequests.nodes.map(a=>r(a)))],s=>s.url,(s,a)=>(a.reasons.length!==0&&s.reasons.push(...a.reasons),s))}catch(r){return[]}}async searchRepositoriesQuery(t,r){try{const n=`query ($search: String!) {
	viewer {
		repositories(first: 100, orderBy: { field: UPDATED_AT, direction: DESC }) {
			nodes {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
	search(first: 100, query: $search, type: REPOSITORY) {
		nodes {
			...on Repository {
				nameWithOwner
				description
				url
				parent {
					nameWithOwner
				}
				stargazerCount
			}
		}
	}
}`;(r==null?void 0:r.user)&&(t+=` user:${r.user}`),(r==null?void 0:r.sort)&&(t+=` sort:${r.sort}`);const i=await this.gqlQuery(n,{search:t.trim()});return i===void 0?[]:nd((r==null?void 0:r.user)?[...i.search.nodes,...i.viewer.repositories.nodes]:[...i.viewer.repositories.nodes,...i.search.nodes],s=>s.url,s=>s).map(s=>{var a,l,c;return{repoWithOwner:s.nameWithOwner,description:(a=s.description)!=null?a:void 0,url:s.url,fork:(c=(l=s.parent)==null?void 0:l.nameWithOwner)!=null?c:void 0,stars:s.stargazerCount}})}catch(n){return[]}}async searchCodeQuery(t,r,n){var i,o,s;const{repo:{owner:a,name:l},HEAD:c,defaultBranch:d}=await this.getMetadata(r),p=[];((i=c.branch)==null?void 0:i.name)!==d.name&&p.push(xy("cant search branch","Unable to search {0}, falling back to {1}. Enable indexing for results specific to {0}.",(s=(o=c.branch)==null?void 0:o.name)!=null?s:c.detached.name,d.name));try{const h=await(await this.octokit({request:{headers:{accept:"application/vnd.github.v3.text-match+json"}}})).search.code({q:`${t} repo:${a}/${l}`}),f=new u.Range(0,0,0,0),g=[];let m=0,k;for(const F of h.data.items)for(const A of F.text_matches){if(m++,n.maxResults!==void 0&&m>n.maxResults)return{matches:g,limitHit:!0};k={path:F.path,ranges:[],preview:A.fragment,matches:[]};for(const H of A.matches){let $=0,Q=0,ue=0;for(let ce=0;ce<H.indices[1];ce++)ce===H.indices[0]&&(Q=ue),A.fragment[ce]===`
`?($++,ue=0):ue++;k.ranges.push(f),k.matches.push(new u.Range($,Q,$,ue))}g.push(k)}return{matches:g,limitHit:!1,warnings:p}}catch(h){return{matches:[],limitHit:!0}}}async switchTo(t,r,n){const{name:i,repo:o,HEAD:{branch:s}}=await this.getMetadata(t);r.startsWith("refs/heads/")?r=r.substr(11):r.startsWith("refs/tags/")&&(r=r.substr(10)),(s==null?void 0:s.name)!==r&&await _t(this.providerService.createVirtualUri(t,{repo:o,ref:r}),i,(n==null?void 0:n.openInNewWindow)?Be.NewWindow:Be.CurrentWindow)}async sync(t,r,n){var i,o;const[,s]=await this.fetchCore(t,{sync:!0});if(!s.HEAD.detached){if(((o=(i=s==null?void 0:s.state)==null?void 0:i.behind)!=null?o:0)>0&&r.hasChanges(t)){const a=this.getIncomingChangesCore(t,s),l=[];let c;if(a.length>0){c=r.getChanges(t);for(const d of c){const p=this.providerService.getRelativeFilePath(t,d.uri),h=a.find(f=>f.uri.path===d.uri.path);if(h!==void 0){l.push({path:p,current:d,incoming:h});break}}}if(l.length>0)switch(n.conflictResolution){case vt.KeepCurrent:for(const d of l)await r.keep(d.current.uri,{type:d.incoming.type,providerUri:Qs(s,s.HEAD.branch.sha,d.path)});break;case vt.DiscardCurrent:for(const d of l)await r.discard(d.current.uri);break;case vt.Merge:for(const d of l)await r.merge(d.current.uri,{type:d.incoming.type,providerUri:Qs(s,s.HEAD.branch.sha,d.path)},{providerUri:Qs(s,s.HEAD.sha,d.path)});break;case vt.Abort:default:throw await this.updateMetadata(t,s),new Ri}}await this.fastForwardTo(t,s.HEAD.branch.sha,s)}}async fastForwardTo(t,r,n){if(n.HEAD.detached)throw new Pn("Unable to fast-forward; no current branch");await this.updateMetadata(t,{...n,HEAD:{...n.HEAD,detached:void 0,sha:r},state:void 0,timestamp:Date.now()})}async getBranchTips(t,r){try{const{repo:{owner:n,name:i},HEAD:{branch:o}}=await this.getMetadata(t);r===void 0&&(r=o?`refs/heads/${o.name}`:"");const s=`query ($owner: String!, $repo: String!, $ref: String!) {
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			target {
				oid
			}
		}
		ref(qualifiedName: $ref) {
			target {
				oid
			}
		}
	}
}`,a=await this.gqlQuery(s,{owner:n,repo:i,ref:r});if(!(a==null?void 0:a.repository))return;const{defaultBranchRef:l,ref:c}=a.repository;return!l&&!c?void 0:{defaultBranch:l?{sha:l.target.oid}:void 0,branch:c?{sha:c.target.oid}:void 0}}catch(n){return}}async getRepositoryInfo(t,r,n){var i,o,s,a,l,c,d,p,h,f,g,m,k;try{const F=`query ($owner: String!, $repo: String!, $ref: String = "", $pr: Boolean!, $number: Int = 0) {
	viewer {
		login
	}
	repository(owner: $owner, name: $repo) {
		defaultBranchRef {
			name
			target {
				oid
			}
		}
		ref(qualifiedName: $ref) {
			name
			prefix
			target {
				oid
			}
		}
		viewerPermission
		parent {
			name
			owner {
				login
			}
			defaultBranchRef {
				name
				target {
					oid
				}
			}
			viewerPermission
			pullRequest(number: $number) @include(if: $pr) {
				number
				title
				state
				maintainerCanModify
				baseRef {
					name
				}
				baseRefName
				baseRefOid
				baseRepository {
					name
					owner {
						login
					}
					defaultBranchRef {
						name
						target {
							oid
						}
					}
					viewerPermission
				}
				headRef {
					name
				}
				headRefName
				headRefOid
				headRepository {
					name
					owner {
						login
					}
					defaultBranchRef {
						name
						target {
							oid
						}
					}
					viewerPermission
				}
				mergeCommit {
					oid
				}
			}
		}
		pullRequest(number: $number) @include(if: $pr) {
			number
			title
			state
			maintainerCanModify
			baseRef {
				name
			}
			baseRefName
			baseRefOid
			baseRepository {
				name
				owner {
					login
				}
				defaultBranchRef {
					name
					target {
						oid
					}
				}
				viewerPermission
			}
			headRef {
				name
			}
			headRefName
			headRefOid
			headRepository {
				name
				owner {
					login
				}
				defaultBranchRef {
					name
					target {
						oid
					}
				}
				viewerPermission
			}
			mergeCommit {
				oid
			}
		}
	}
}`;let A;try{A=await this.gqlQuery(F,{owner:t,repo:r,ref:(n==null?void 0:n.ref)!=="HEAD"?n==null?void 0:n.ref:void 0,pr:Boolean(n==null?void 0:n.pr),number:(i=n==null?void 0:n.pr)!=null?i:0})}catch(Q){if(!(Q instanceof Error)||!Q.message.startsWith("Could not resolve to a PullRequest with the number"))throw Q;A=Q.data}if(A===void 0)return;const H=(l=(o=A.repository)==null?void 0:o.pullRequest)!=null?l:(a=(s=A.repository)==null?void 0:s.parent)==null?void 0:a.pullRequest;if(H==null?void 0:H.headRef){const Q=(d=(c=H.headRepository)==null?void 0:c.defaultBranchRef)!=null?d:void 0;return(Q==null?void 0:Q.name)===void 0?void 0:{user:A.viewer.login,repo:{owner:H.headRepository.owner.login,name:H.headRepository.name},accessLevel:ad(H.headRepository.viewerPermission),ref:H.headRef?{prefix:"refs/heads/",name:H.headRef.name,sha:H.headRefOid}:(n==null?void 0:n.ref)==="HEAD"?{prefix:"refs/heads/",name:Q.name,sha:Q.target.oid}:void 0,defaultBranch:{name:Q.name,sha:Q.target.oid},pullRequest:H?{id:H.number.toString(),repo:{owner:H.baseRepository.owner.login,name:H.baseRepository.name},state:_o(H.state),title:H.title}:void 0}}const $=(h=(p=A.repository)==null?void 0:p.defaultBranchRef)!=null?h:void 0;return($==null?void 0:$.name)===void 0?void 0:{user:A.viewer.login,repo:{owner:t,name:r},accessLevel:ad((f=A==null?void 0:A.repository)==null?void 0:f.viewerPermission),ref:((g=A.repository)==null?void 0:g.ref)?{prefix:A.repository.ref.prefix,name:A.repository.ref.name,sha:A.repository.ref.target.oid}:(H==null?void 0:H.baseRef)?{prefix:"refs/heads/",name:H==null?void 0:H.baseRef.name,sha:(k=(m=H.mergeCommit)==null?void 0:m.oid)!=null?k:H==null?void 0:H.baseRefOid}:(n==null?void 0:n.ref)==="HEAD"?{prefix:"refs/heads/",name:$.name,sha:$.target.oid}:void 0,defaultBranch:{name:$.name,sha:$.target.oid},pullRequest:H?{id:H.number.toString(),repo:{owner:t,name:r},state:_o(H.state),title:H.title}:void 0}}catch(F){if(Ry(F)&&F.errors[0].type==="NOT_FOUND")throw new Dn(F,`${t}/${r}`);return}}async gqlQuery(t,r){return(await this.graphql())(t,r)}}Cy([gy()],sd.prototype,"ensureAuthenticated",1);function Ry(e){return e instanceof Error&&"name"in e&&e.name==="GraphqlError"}function _o(e){switch(e){case"OPEN":return Fn.Open;case"CLOSED":return Fn.Closed;case"MERGED":return Fn.Merged}}var Hr;(function(e){e.ADMIN="ADMIN",e.MAINTAIN="MAINTAIN",e.WRITE="WRITE",e.TRIAGE="TRIAGE",e.READ="READ",e.NONE="NONE"})(Hr||(Hr={}));function ad(e){switch(e){case Hr.ADMIN:return rt.Admin;case Hr.MAINTAIN:return rt.Maintain;case Hr.WRITE:return rt.Write;case Hr.TRIAGE:return rt.Triage;case Hr.READ:return rt.Read;default:return rt.None}}const Ys=(0,y.LV)(),Ay={dispose:()=>{}},Dy=/(\/|\\)/g,Py=new TextEncoder,fi=class{constructor(e,t,r,n,i){this.providerService=e,this.github=t,this.changeStore=n,this.tarPit=i,this._onDidChangeFile=new u.EventEmitter,this.fsCache=new Map,this.fileSearchCache=new Map,this.disposable=u.Disposable.from(u.workspace.registerFileSystemProvider(fi.scheme,this,{isCaseSensitive:!0,isReadonly:!0}),u.workspace.registerFileSearchProvider(fi.scheme,this),u.workspace.registerTextSearchProvider(fi.scheme,this),r.onDidChange(o=>{this.fsCache.clear(),this.updateOpenDocuments(e.getProviderUri(o))}))}get onDidChangeFile(){return this._onDidChangeFile.event}dispose(){var e;(e=this.disposable)==null||e.dispose()}getCache(e){return this.fsCache}updateOpenDocuments(e){const t=u.workspace.textDocuments.map(r=>{if(!(r.uri.scheme!==fi.scheme||!An(r.uri,e)))return{uri:r.uri,type:u.FileChangeType.Changed}}).filter(r=>Boolean(r));t.length!==0&&this._onDidChangeFile.fire(t)}watch(){return Ay}async stat(e){var t,r;const n=await this.fsQuery(e,`__typename
			...on Blob {
				byteSize
			}`,this.getCache(e));if(n===void 0&&e.query!=="~")throw u.FileSystemError.FileNotFound();const i=await this.github.getMetadata(e);return{type:ld((t=n==null?void 0:n.__typename)!=null?t:"blob"),size:(r=n==null?void 0:n.byteSize)!=null?r:0,ctime:0,mtime:i==null?void 0:i.timestamp}}async readDirectory(e){var t;const r=await this.fsQuery(e,`... on Tree {
				entries {
					name
					type
				}
			}`,this.getCache(e));return((t=r==null?void 0:r.entries)!=null?t:[]).map(n=>[n.name,ld(n.type)])}createDirectory(e){throw u.FileSystemError.NoPermissions()}async readFile(e){var t;const r=await this.fsQuery(e,`... on Blob {
				oid
				isBinary
				isTruncated
				text
			}`);return(r==null?void 0:r.isBinary)||(r==null?void 0:r.isTruncated)?await this.github.getFileContent(e):Py.encode((t=r==null?void 0:r.text)!=null?t:"")}writeFile(e,t,r){throw u.FileSystemError.NoPermissions()}delete(e,t){throw u.FileSystemError.NoPermissions()}rename(e,t,r){throw u.FileSystemError.NoPermissions()}copy(e,t,r){throw u.FileSystemError.NoPermissions()}async provideFileSearchResults(e,t,r){let n=this.fileSearchCache.get(t.folder.toString(!0));if(n===void 0){const o=await this.github.getRepoFileNames(t.folder);if(o===void 0||r.isCancellationRequested)return[];n=[...ki(o,s=>Jr.prepareSlow(s))],this.fileSearchCache.set(t.folder.toString(!0),n)}if(t.maxResults===void 0||t.maxResults===0||t.maxResults>=n.length)return n.map(s=>u.Uri.joinPath(t.folder,s.target));const i=Jr.go(e.pattern.replace(Dy,"/"),n,{allowTypo:!0,limit:t.maxResults}).map(o=>u.Uri.joinPath(t.folder,o.target));return Jr.cleanup(),i}async provideTextSearchResults(e,t,r,n){const i=[];if(Fe.get("search.download.enabled"))try{return Nl(this.providerService,this.changeStore,this.tarPit,e,t,r,n)}catch{i.push({text:Ys("index error","Error searching with index, falling back to standard search"),type:u.TextSearchCompleteMessageType.Warning})}i.push({text:Ys("enable index","To improve search accuracy, [enable indexing](command:remoteHub.enableIndexing)"),type:u.TextSearchCompleteMessageType.Information}),(e.isCaseSensitive||e.isRegExp||e.isWordMatch)&&i.push({text:Ys("flags not supported","Search flags are not supported by GitHub search. Enable indexing for full search features."),type:u.TextSearchCompleteMessageType.Warning});const o=await this.github.searchCodeQuery(e.pattern,t.folder,{maxResults:t.maxResults,context:{before:t.beforeContext,after:t.afterContext}});if(o.warnings&&o.warnings.forEach(a=>{i.push({text:a,type:u.TextSearchCompleteMessageType.Warning})}),o===void 0)return{limitHit:!0,message:i};let s;for(const a of o.matches)s=u.Uri.joinPath(t.folder,a.path),r.report({uri:s,ranges:a.ranges,preview:{text:a.preview,matches:a.matches}});return{limitHit:!1,message:i}}async fsQuery(e,t,r){const n=`${e.toString()}:${Fy(t)}`;let i=r==null?void 0:r.get(n);return i!==void 0||(i=await this.github.queryRepositoryObject(e,t),i===void 0?r==null||r.delete(n):r==null||r.set(n,i)),i}};let cd=fi;cd.scheme="github";function ld(e){switch(e&&(e=e.toLocaleLowerCase()),e){case"blob":return u.FileType.File;case"tree":return u.FileType.Directory;default:return u.FileType.Unknown}}function Fy(e){let t=0;if(e.length===0)return t;let r;const n=e.length;for(let i=0;i<n;i++)r=e.charCodeAt(i),t=(t<<5)-t+r,t|=0;return t}const ud=/^(?:(?:https:\/\/)?github.com\/)?(?<owner>[^/]+)\/(?<repo>[^/]+?)(?:\/(?:tree\/(?<tree>.+)|blob\/(?<blob>.+)|commit\/(?<commit>[0-9a-f]{40})|pull\/(?<pull>[0-9]+)))?(?:\/|\.git$|(?:#(?<hash>.*))?$)/i,rr=(0,y.LV)();class Oy{constructor(t,r){this.providerService=t,this.memento=r}canOpenRemoteUrl(t){const r=ud.exec(t);if((r==null?void 0:r.groups)===void 0)return;const{blob:n,commit:i,pull:o,tree:s}=r.groups;return o?ze.PullRequest:i?ze.Commit:s?ze.Branch:n?ze.File:ze.Repository}async openWorkspaceForRemoteUrl(t,r=Be.CurrentWindow){const n=ud.exec(t);if((n==null?void 0:n.groups)===void 0)return;const{owner:i,repo:o,blob:s,commit:a,pull:l,tree:c}=n.groups;if(l)return this.openWorkspaceForPullRequest(r,i,o,l);let d,p;if(s){const h=this.createVirtualUri(He.baseVirtualWorkspaceUri,{repo:{owner:i,name:o}});if(d=s,d){const g=(await this.providerService.getBranches(h,{query:d.split("/")[0]})).branches.map(m=>`${m.name}/`).sort((m,k)=>k.length-m.length);for(const m of g)if(d.startsWith(m)){p=m.slice(0,-1),d=d.substr(p.length);break}}}else p=a!=null?a:c;return this.openWorkspaceForRepository(r,i,o,p,d)}createVirtualUri(t,{repo:r,ref:n,pullRequest:i},o){return t.with({authority:`github${n?`+${n}${i?`~${i}`:""}`:""}`,path:`/${r.owner}/${r.name}${o?`${o.startsWith("/")?"":"/"}${o}`:""}`})}getExternalUri(t){const r=`https://github.com/${t.repo.owner}/${t.repo.name}`;return t.pullRequest?u.Uri.parse(`${r}/pull/${t.pullRequest}`):t.sha?u.Uri.parse(`${r}/commit/${t.sha}`):t.branch?u.Uri.parse(`${r}/tree/${t.branch}`):t.clone?u.Uri.parse(`${r}.git`):u.Uri.parse(r)}getProviderRootUri(t){return od(t)}getRelativeFilePath(t,r){const[,,,...n]=Rn(t,r).split("/");return n.join("/")||""}async openWorkspaceForRepository(t,r,n,i,o){const s=this.providerService.createVirtualUri("github",{repo:{owner:r,name:n},ref:i}),a=await this.providerService.getMetadata(s);await _t(s,a.name,t,o?{memento:this.memento,paths:[o]}:void 0)}async openWorkspaceForPullRequest(t,r,n,i){var o,s,a,l;const c=await this.providerService.getPullRequest(this.providerService.createVirtualUri("github",{repo:{owner:r,name:n}}),i);let d;if(c)if((s=(o=c.refs)==null?void 0:o.head)==null?void 0:s.exists)d=this.providerService.createVirtualUri("github",{repo:{owner:c.refs.head.owner,name:c.refs.head.repo},ref:c.refs.head.branch,pullRequest:c.id});else if((l=(a=c.refs)==null?void 0:a.base)==null?void 0:l.exists){const p=rr("pr source branch missing prompt confirm","Open Respository"),h=rr("pr source branch missing prompt cancel","Cancel");if(await u.window.showInformationMessage(rr("pr source branch missing prompt",`Unable to find the source branch for pull request #{0}.

Do you want to open the repository on the target branch instead?`,c.id),p,h)!==p)return;d=this.providerService.createVirtualUri("github",{repo:{owner:c.refs.base.owner,name:c.refs.base.repo},ref:c.refs.base.branch,pullRequest:c.id})}else{const p=rr("pr branches missing prompt confirm","Open Respository"),h=rr("pr branches missing prompt cancel","Cancel");if(await u.window.showInformationMessage(rr("pr branches missing prompt",`Unable to find either the source or target branch for pull request #{0}.

Do you want to open the repository on the default branch instead?`,c.id),p,h)!==p)return;d=this.providerService.createVirtualUri("github",{repo:{owner:r,name:n}})}else{const p=rr("pr missing prompt confirm","Open Respository"),h=rr("pr missing prompt cancel","Cancel");if(await u.window.showInformationMessage(rr("pr missing prompt",`Unable to find pull request.

Do you want to open the repository on the default branch instead?`),p,h)!==p)return;d=this.providerService.createVirtualUri("github",{repo:{owner:r,name:n}})}await _t(d,`${r}/${n}`,t)}}const ht=(0,y.LV)();class Uy{constructor(t,r,n){this.providerService=t,this.changeStore=n,this._onDidChangeFileDecorations=new u.EventEmitter,this._decorations=new Map,this.disposable=u.Disposable.from(u.window.registerFileDecorationProvider(this),r.onDidChange(()=>this.onMetadataChanged()),n.onDidChange(i=>this.onUrisChanged(i)))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onMetadataChanged(){this._decorations.clear(),this._onDidChangeFileDecorations.fire(void 0)}onUrisChanged(t){this._onDidChangeFileDecorations.fire(t.map(r=>(this._decorations.delete(r.uri.toString()),r.uri)))}async provideFileDecoration(t,r){if(t.scheme!==He.scheme)return;const n=t.toString();let i=this._decorations.get(n);if(i!==void 0)return i!=null?i:void 0;const o=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(t));let s;o.length>0&&(s=o.find(l=>l.uri.toString()===n));const a=this.changeStore.getChange(t);if(a===void 0){if(s!==void 0)switch(s.type){case Te.Created:i={badge:"\u2193A",color:new u.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:ht("decoration tooltip incoming change added","Pending Incoming Changes (Added)")};break;case Te.Deleted:i={badge:"\u2193D",color:new u.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:ht("decoration tooltip incoming change deleted","Pending Incoming Changes (Deleted)")};break;case Te.Changed:i={badge:"\u2193M",color:new u.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:ht("decoration tooltip incoming change modified","Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new u.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:ht("decoration tooltip incoming change","Pending Incoming Changes")};break}return this._decorations.set(n,i!=null?i:null),i}if(a.conflicts)i={badge:"\u26A0",color:new u.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:ht("decoration tooltip conflicts","Merge Conflicts ({0})",Og(a.conflicts.status))};else if(s!==void 0)switch(s.type){case Te.Created:i={badge:"\u26A0",color:new u.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:ht("decoration tooltip possible conflict added","Possible Merge Conflicts (Added)")};break;case Te.Deleted:i={badge:"\u26A0",color:new u.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:ht("decoration tooltip possible conflict deleted","Possible Merge Conflicts (Deleted)")};break;case Te.Changed:i={badge:"\u26A0",color:new u.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:ht("decoration tooltip possible conflict","Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new u.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:ht("decoration tooltip possible conflict","Possible Merge Conflicts")}}else switch(a.type){case Te.Created:i={badge:"A",color:new u.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:ht("decoration tooltip added","Added")};break;case Te.Changed:i={badge:"M",color:new u.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:ht("decoration tooltip modified","Modified")};break;case Te.Deleted:i={badge:"D",color:new u.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:ht("decoration tooltip deleted","Deleted")};break}return this._decorations.set(n,i!=null?i:null),i}}class wn{constructor(t){this.command=t}get label(){return this.command.title}async execute(){var t;return void await u.commands.executeCommand(this.command.command,...(t=this.command.arguments)!=null?t:[])}}var Eo;(function(e){async function t(r,n,i,o,s,a){let l;Array.isArray(s)?l=s:a===void 0&&(a=s);const c=l!=null?l:[],[d,p,h]=await Promise.all([r.getMetadata(n),r.getBranches(n,{limit:100}),r.getTags(n,{limit:100})]),f=d.defaultBranch.name,g=((a==null?void 0:a.filterBranches)?p.branches.filter(a==null?void 0:a.filterBranches):p.branches).sort((m,k)=>(m.name===f?-1:1)-(k.name===f?-1:1)||m.name.localeCompare(k.name));return c.push(...g.map(m=>({label:`$(git-branch) ${m.name}`,description:`$(git-commit) ${nt(m.commit)}`,name:m.name,sha:m.commit})),...h.tags.map(m=>({label:`$(tag) ${m.name}`,description:`$(git-commit) ${nt(m.commit)}`,name:m.name,sha:m.commit}))),u.window.showQuickPick(c,{placeHolder:i,title:o,matchOnDescription:!0})}e.show=t})(Eo||(Eo={}));const te=(0,y.LV)();class Iy{constructor(t,r,n){this.providerService=t,this.metadataStore=r,this.changeStore=n,this._onDidCloseRepository=new u.EventEmitter,this._onDidOpenRepository=new u.EventEmitter,this._onDidChangeState=new u.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=u.Disposable.from(Fe.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.metadataStore.onDidChange(async o=>{const s=this.getScmProvider(this.providerService.getVirtualUri(o));s!==void 0&&await this.updateStatusBarCommands(s)},this),this.changeStore.onDidChange(o=>this.update(o[0].rootUri)),...this.registerCommands());const i=this.providerService.repositories;i.length&&this.onRepositoriesChanged({added:i,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(t=>t.repository).filter(t=>Boolean(t))}dispose(){var t;(t=this.disposable)==null||t.dispose()}get staging(){return this._staging===void 0&&(this._staging=Fe.get("staging")),this._staging}get state(){return this._state}refresh(){for(const t of this._scmProviders)this.update(t.sourceControl.rootUri)}onConfigurationChanged(t){Fe.changed(t,"staging")&&(this._staging=void 0,Fe.changed(t,"staging.enabled")&&this.refresh())}async onRepositoriesChanged(t){if(t.added.length)for(const r of t.added){const n=await this.createOrUpdateScmProvider(r.uri,r.name);await this.update(r.uri),n.repository&&this._onDidOpenRepository.fire(n.repository)}if(t.removed.length)for(const r of t.removed){const n=this._scmProviders.findIndex(i=>i.sourceControl.rootUri.toString()===r.uri.toString());if(n!==-1){const i=this._scmProviders[n];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(n,1)}}this._scmProviders.length!==0&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[u.commands.registerCommand("remoteHub.createPullRequest",async t=>{t=this.getSourceControlFrom(t),t!==void 0&&await this.createPullRequest(t)}),u.commands.registerCommand("remoteHub.createDraftPullRequest",async t=>{t=this.getSourceControlFrom(t),t!==void 0&&await this.createPullRequest(t,{draft:!0})}),u.commands.registerCommand("remoteHub.commit",async t=>{t=this.getSourceControlFrom(t),t!==void 0&&await this.commitChanges(t)}),u.commands.registerCommand("remoteHub.discardAllChanges",async t=>{const r=this.getSourceControlFrom(t);if((r==null?void 0:r.rootUri)!==void 0)if(dd(t)){const n=this.changeStore.getChanges(r.rootUri);await Xs(n)&&await this.changeStore.discardAll(r.rootUri)}else{const i=t.resourceStates.filter(hi);if(await Xs(i))for(const o of i)await this.changeStore.discard(o.resourceUri)}}),u.commands.registerCommand("remoteHub.discardChanges",async t=>{hi(t)&&await Xs([t])&&await this.changeStore.discard(t.resourceUri)}),u.commands.registerCommand("remoteHub.stageAllChanges",async t=>{const r=this.getSourceControlFrom(t);(r==null?void 0:r.rootUri)!==void 0&&await this.changeStore.stageAll(r.rootUri)}),u.commands.registerCommand("remoteHub.stageChanges",async t=>{hi(t)&&await this.changeStore.stage(t.resourceUri)}),u.commands.registerCommand("remoteHub.unstageAllChanges",async t=>{const r=this.getSourceControlFrom(t);(r==null?void 0:r.rootUri)!==void 0&&await this.changeStore.unstageAll(r.rootUri)}),u.commands.registerCommand("remoteHub.unstageChanges",async t=>{hi(t)&&await this.changeStore.unstage(t.resourceUri)}),u.commands.registerCommand("remoteHub.keepChanges",async t=>{hi(t)&&await this.changeStore.keep(t.resourceUri)}),u.commands.registerCommand("remoteHub.openChanges",async t=>{var r;const{command:n}=t;!n||await u.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}),u.commands.registerCommand("remoteHub.openFile",async t=>{var r;const n=this.changeStore.resolveOpenCommand(t.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:u.ViewColumn.Active});await u.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}),u.commands.registerCommand("remoteHub.createBranch",async t=>{await Bo("remoteHub.createBranchFrom",{...t,fromSha:"HEAD"})}),u.commands.registerCommand("remoteHub.createBranchFrom",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await pi(this._scmProviders,te("choose repo for create branch placeholder","Choose which repository to create a new branch on"),te("choose repo for create branch title","Create Branch"));if(n===void 0)return;const i=await this.providerService.getMetadata(n);if(i.accessLevel<rt.Write){u.window.showErrorMessage(te("no permissions to create branch ","You don't have access to create branches on this repository."));return}let o;if(t==null?void 0:t.fromSha)o=t.fromSha,o==="HEAD"&&(o=i.HEAD.sha);else{const d=await Eo.show(this.providerService,n,te("choose branch for create placeholder","Choose which branch to create the new branch from"),te("choose branch for create title","Create Branch \u2022 {0}",i.name));if(!d)return;o=d.sha}let s;try{s=await u.window.withProgress({location:u.ProgressLocation.SourceControl},()=>Js(this.providerService,n,o,te("create branch","Please provide a new branch name"),te("create branch placeholder","New branch name"),te("create branch title","Create Branch \u2022 {0}",i.name)))}catch(d){me.error(d),u.window.showErrorMessage(te("unable to create branch","Unable to create the new branch."));return}if(!s)return;const a="Switch",l="Open in New Window",c=await u.window.showInformationMessage("Would you like to switch to the new branch?",a,l);!c||await this.providerService.switchTo(n,s,{openInNewWindow:c===l})}),u.commands.registerCommand("remoteHub.exportPatch",async t=>{const r=this.getSourceControlFrom(t);if((r==null?void 0:r.rootUri)===void 0)return;let n;$y(t)&&(n=t.resourceUri);const i=await this.changeStore.createPatch(r.rootUri,n),o=await u.workspace.openTextDocument({language:"diff",content:i});await u.window.showTextDocument(o)}),u.commands.registerCommand("remoteHub.switchToBranch",async t=>{var r,n;const i=(r=t==null?void 0:t.uri)!=null?r:await pi(this._scmProviders,te("choose repo for switch branch placeholder","Choose which repository to switch branches on"),te("choose repo for switch branch title","Switch to Branch Or Tag"));if(i===void 0)return;const o=[],s=await this.providerService.getMetadata(i);if(t==null?void 0:t.commands){if(s.HEAD.detached){const{detached:c}=s.HEAD;c.type===Rt.Tag?o.push(new wn(fr({command:"remoteHub.openOnRemote",title:te("open tag on remote command","$(globe) Open Tag on {0}...",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.detached.name}]}))):o.push(new wn(fr({command:"remoteHub.openOnRemote",title:te("open commit on remote command","$(globe) Open Commit on {0}...",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,sha:s.HEAD.sha}]})))}else o.push(new wn(fr({command:"remoteHub.openOnRemote",title:te("open branch on remote command","$(globe) Open Branch on {0}...",s.provider.name),arguments:[{provider:s.provider,repo:s.repo,branch:s.HEAD.branch.name}]})));s.accessLevel>=rt.Write&&o.push(new wn(fr({command:"remoteHub.createBranch",title:te("create branch command","$(add) Create New Branch..."),arguments:[{uri:i}]})),new wn(fr({command:"remoteHub.createBranchFrom",title:te("create branch from command","$(add) Create New Branch from..."),arguments:[{uri:i}]})))}const a=(n=s.HEAD.branch)==null?void 0:n.name,l=await Eo.show(this.providerService,i,te("choose switch branch placeholder","Choose which branch to switch to"),te("choose switch branch title","Switch to Branch Or Tag \u2022 {0}",s.name),o,{filterBranches:a?c=>c.name!==a:void 0});if(!!l)return l instanceof wn?void l.execute():void u.window.withProgress({location:u.ProgressLocation.SourceControl},()=>this.providerService.switchTo(i,l.name))}),u.commands.registerCommand("remoteHub.fetch",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await pi(this._scmProviders,te("choose repo for fetch placeholder","Choose which repository to fetch"),te("choose repo for fetch title","Fetch Repository"));if(n!==void 0)try{await u.window.withProgress({location:u.ProgressLocation.SourceControl},()=>this.providerService.fetch(n,{force:!0}))}catch(i){u.window.showErrorMessage(te("fetch failed","Unable to fetch repository"))}}),u.commands.registerCommand("remoteHub.fetchAll",async t=>{const r=this.metadataStore.getForWorkspace();if(r.length===0)return;(await u.window.withProgress({location:u.ProgressLocation.SourceControl},async()=>{const i=[];for(const o of r)if(!o.data.HEAD.detached)try{await this.providerService.fetch(o.folderUri)}catch(s){i.push(s)}return i})).length&&!(t==null?void 0:t.silent)&&u.window.showErrorMessage(r.length?te("fetch all failed","Unable to fetch repositories"):te("fetch failed","Unable to fetch repository"))}),u.commands.registerCommand("remoteHub.pull",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await pi(this._scmProviders,te("choose repo for pull placeholder","Choose which repository to pull"),te("choose repo for pull title","Pull Repository"));n!==void 0&&await this.sync(n,{pull:!0})}),u.commands.registerCommand("remoteHub.sync",async t=>{var r;const n=(r=t==null?void 0:t.uri)!=null?r:await pi(this._scmProviders,te("choose repo for sync placeholder","Choose which repository to sync"),te("choose repo for sync title","Synchronize Repository"));n!==void 0&&await this.sync(n)})]}async sync(t,{pull:r,...n}={pull:!1}){try{await u.window.withProgress({location:u.ProgressLocation.SourceControl},()=>this.providerService.sync(t,this.changeStore,n))}catch(i){if(i instanceof Ri){const o={title:te("sync keep","Keep My Changes")},s={title:te("sync incoming","Discard My Changes")},a={title:te("sync merge","Merge with Incoming Changes")},l={title:te("sync cancel","Cancel"),isCloseAffordance:!0},c=await u.window.showWarningMessage(r?te("sync pull",`Pulling in changes may cause conflicts with your uncommitted changes, because one of more of those files has changed since you started editing.

Choose how would you like to handle your uncommitted changes, or choose 'Cancel' to abort pulling.`):te("sync",`Synchronizing changes may cause conflicts with your uncommitted changes, because one of more of those files has changed since you started editing.

Choose how would like to handle your uncommitted changes, or choose 'Cancel' to abort synchronizing.`),{modal:!0},a,o,s,l);if(c&&c!==l){let d=vt.Merge;c===s?d=vt.DiscardCurrent:c===o&&(d=vt.KeepCurrent),await u.window.withProgress({location:u.ProgressLocation.SourceControl},()=>this.providerService.sync(t,this.changeStore,{conflictResolution:d}))}}else throw u.window.showErrorMessage(te("sync failed","Unable to synchronize repository")),i}}async commitChanges(t){try{await u.window.withProgress({location:u.ProgressLocation.SourceControl},()=>this.commitChangesCore(t))}catch(r){me.error(r),u.window.showErrorMessage(te("commit unable","Unable to commit."))}}async commitChangesCore(t){const r=t.rootUri,n=await this.providerService.getMetadata(r);let i,o;for(;;){const a=t.inputBox.value;if(this.changeStore.hasMergeConflicts(r)){t.inputBox.showValidationMessage(te("commit resolve conflicts","You must resolve any pending conflicts before committing."),u.SourceControlInputBoxValidationType.Error);return}const l=this.providerService.getCommitOperations(r,this.changeStore,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1});if(l.length===0){t.inputBox.showValidationMessage(this.staging.enabled?te("commit no staged changes","There are no staged changes to commit."):te("commit no changes","There are no changes to commit."),u.SourceControlInputBoxValidationType.Information);return}if(!a){t.inputBox.showValidationMessage(te("specify commit message","You must specify a commit message before committing."),u.SourceControlInputBoxValidationType.Error);return}if(o===void 0&&n.accessLevel<rt.Write&&(o=await this.providerService.getFork(r),o===void 0)){const d=te("fork confirm","Fork Repository");if(await u.window.showInformationMessage(te("fork","You\u2019re trying to make changes in a project you don\u2019t have write access to. Would you like to create a fork of this project to commit your proposed changes to?"),d)!==d)return;if(o=await u.window.withProgress({location:u.ProgressLocation.Notification,title:te("fork progress","Forking {0}...",n.name)},()=>this.providerService.fork(r)),o===void 0){u.window.showErrorMessage(te("unable to fork","Unable to fork repository."));return}}const c=await this.providerService.createCommit(r,a,l,o);try{await this.providerService.pushCommit(r,c,i,o)}catch(d){if(d instanceof Pn){const p={title:te("push detached head prompt","Commit to New Branch")},h={title:te("cancel","Cancel"),isCloseAffordance:!0};if(await u.window.showErrorMessage(te("push detached head prompt",`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},p,h)!==p)return;if(i=await Js(this.providerService,r,n.HEAD.sha,te("push to new branch prompt","Create a new branch to commit your changes to"),te("push to new branch placeholder","New branch name"),te("push to new branch title","Commit \u2022 Create Branch \u2022 {0}",n.name),o),i)continue}else if(d instanceof xi){const p={title:te("push conflicts prompt pull","Pull")},h={title:te("push conflicts prompt sync","Sync (Pull & Push)")},f={title:te("cancel","Cancel"),isCloseAffordance:!0},g=await u.window.showErrorMessage(te("push conflicts prompt",`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push again) your changes?`),{modal:!0},p,h,f);if(g!==p&&g!==h)return;await this.sync(r,{pull:g===p,conflictResolution:vt.Merge});continue}}break}if(t.inputBox.value="",o?await this.changeStore.discardAll(r):await this.changeStore.acceptAll(r),!o&&!i)return;async function s(){var a;if(o){const d=te("commit to fork confirm","Switch to Fork");await u.window.showInformationMessage(te("commit to fork","Committed changes to your fork of {0}. Would you like to switch to your fork to continue making changes?",n.name),d)===d&&_t(this.providerService.createVirtualUri(r,{repo:o.repo,ref:(a=n.HEAD.branch)==null?void 0:a.name}),o.name,Be.CurrentWindow);return}const l=te("commit to new branch confirm","Switch to Branch");await u.window.showInformationMessage(te("commit to new branch","Committed changes to new branch '{0}'. Would you like to switch to your new branch to continue making changes?",i),l)===l&&_t(this.providerService.createVirtualUri(r,{repo:n.repo,ref:i}),n.name,Be.CurrentWindow)}s.call(this)}async createPullRequest(t,r){try{await u.window.withProgress({location:u.ProgressLocation.SourceControl},()=>this.createPullRequestCore(t,r))}catch(n){me.error(n),u.window.showErrorMessage(te("unable to open pr","Unable to open a pull request."))}}async createPullRequestCore(t,r){var n,i;const o=t.rootUri,s=(n=r==null?void 0:r.draft)!=null?n:!1;let a;if(!(r==null?void 0:r.sha)&&(a=this.providerService.getCommitOperations(o,this.changeStore),!a.length)){u.window.showInformationMessage(te("no changes","There are no changes."));return}const l=t.inputBox.value;if(!l){t.inputBox.showValidationMessage(te("specify commit message","Please specify a commit message"),u.SourceControlInputBoxValidationType.Error);return}const c=await this.providerService.getMetadata(o);let d=r==null?void 0:r.fork;if(!d&&c.accessLevel<rt.Write&&(d=await this.providerService.getFork(o),d===void 0)){const k={title:te("fork confirm","Fork Repository")},F={title:te("cancel","Cancel"),isCloseAffordance:!0};if(await u.window.showInformationMessage(te("fork",`You\u2019re trying to make changes in a project you don\u2019t have write access to.

Would you like to create a fork of this project to commit your proposed changes to?`),{modal:!0},k,F)!==k)return;if(d=await u.window.withProgress({location:u.ProgressLocation.Notification,title:te("fork progress","Forking {0}...",c.name)},()=>this.providerService.fork(o)),d===void 0){u.window.showErrorMessage(te("unable to fork","Unable to fork repository."));return}}const p=await u.window.showInputBox({ignoreFocusOut:!0,placeHolder:te("create pr placeholder","Pull request title"),prompt:te("create pr prompt","Enter a title for the new pull request"),title:te("create pr title","New Pull Request"),value:l});if(!p)return;let h;(a==null?void 0:a.length)?h=await this.providerService.createCommit(o,l,a,d):h=(i=r==null?void 0:r.sha)!=null?i:c.HEAD.sha;const f=await Js(this.providerService,o,h,te("create pr branch prompt","Create a new branch for this pull request"),te("create pr branch placeholder","New branch name"),te("create pr branch title","New Pull Request \u2022 Create Branch \u2022 {0}",c.name),d);if(!f)return;const g=await this.providerService.createPullRequest(o,f,p,{draft:s},d);t.inputBox.value="",d?await this.changeStore.discardAll(o):await this.changeStore.acceptAll(o);async function m(){if(d){const A=te("created pr from fork confirm","Switch to Fork");await u.window.showInformationMessage(te("created pr from fork",'Created [Pull Request #{0}]({1} "Open Pull Request #{0} on {2}") for {3}. Would you like to switch to your fork to continue making changes?',g.id,g.uri.toString(!0),c.provider.name,c.name),A)===A&&_t(this.providerService.createVirtualUri(o,{repo:d.repo,ref:f,pullRequest:g.id}),d.name,Be.CurrentWindow);return}const k=te("created pr from branch confirm","Switch to Branch");await u.window.showInformationMessage(te("created pr from branch",'Created [Pull Request #{0}]({1} "Open Pull Request #{0} on {2}") for {3}. Would you like to switch to your new branch to continue making changes?',g.id,g.uri.toString(!0),c.provider.name,c.name),k)===k&&_t(this.providerService.createVirtualUri(o,{repo:c.repo,ref:f,pullRequest:g.id}),c.name,Be.CurrentWindow)}m.call(this)}async update(t){const r=u.workspace.getWorkspaceFolder(t);if(r===void 0)return;const n=await this.createOrUpdateScmProvider(t,r.name),i=this.changeStore.getMergeConflicts(t,{predicate:a=>a.fileType===u.FileType.File}).map(a=>({type:a.type,resourceUri:a.uri,command:this.changeStore.resolveDiffCommand(a.uri,a.conflicts.incomingUri,te("diff title with conflicts","{0} (Incoming Changes \u2194 Current Changes)",Ct(a.uri)))})),o=this.changeStore.getStagedChanges(t,{predicate:a=>a.fileType===u.FileType.File}).map(a=>({type:a.type,resourceUri:a.uri,command:this.changeStore.resolveDiffCommand(a.uri,this.providerService.getProviderUri(a.uri),te("diff title index","{0} (Index)",Ct(a.uri)))})),s=this.changeStore.getWorkingChanges(t,{predicate:a=>a.fileType===u.FileType.File}).map(a=>({type:a.type,resourceUri:a.uri,decorations:{strikeThrough:a.type===Te.Deleted},command:this.changeStore.resolveDiffCommand(a.uri,this.providerService.getProviderUri(a.uri),te("diff title working","{0} (Working Tree)",Ct(a.uri)))}));this.ensureMergeConflictsGroup(n).resourceStates=i,this.ensureStagedChangesGroup(n).resourceStates=this.staging.enabled?o:[],this.ensureWorkingChangesGroup(n).resourceStates=this.staging.enabled?s:[...o,...s]}async createOrUpdateScmProvider(t,r){const n=await this.providerService.getMetadata(t);let i=this.getScmProvider(t);if(i===void 0){r=n.name;const o=u.scm.createSourceControl(`remoteHub:${n.provider.id}`,r,t);o.quickDiffProvider={provideOriginalResource:a=>this.providerService.getProviderUri(a)},n.accessLevel>=rt.Write?(o.acceptInputCommand={command:"remoteHub.commit",title:te("scm input accept command title commit","Commit"),arguments:[o]},o.inputBox.placeholder=te("scm input placeholder commit","Message (Ctrl+Enter to commit to '{0}'",r)):(o.acceptInputCommand={command:"remoteHub.createPullRequest",title:te("scm input accept command title pr","Create a Pull Request"),arguments:[o]},o.inputBox.placeholder=te("scm input placeholder pr","Message (Ctrl+Enter to create a pull request for '{0}'",r));const s=this.providerService.createIGitRepository(t,o,n,this.changeStore);i={id:n.provider.id,name:n.provider.name,sourceControl:o,groups:[],repository:s},this.ensureMergeConflictsGroup(i),this.ensureStagedChangesGroup(i),this.ensureWorkingChangesGroup(i),this._scmProviders.push(i)}return await this.updateStatusBarCommands(i,n),i}async updateStatusBarCommands(t,r){var n,i,o;const s=t.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(s);const{HEAD:a}=r,l=this.changeStore.hasChanges(s),c=[fr({command:"remoteHub.switchToBranch",title:a.detached?a.detached.type===Rt.Tag?`$(tag) ${a.detached.name}${l?"*":""}`:`$(git-commit) ${nt(a.detached.name)}${l?"*":""}`:`$(git-branch) ${a.branch.name}${l?"*":""}`,tooltip:nt(a.sha),arguments:[{uri:s,commands:!0}]})];a.detached||c.push(fr({command:"remoteHub.sync",title:`$(sync)${((i=(n=r.state)==null?void 0:n.behind)!=null?i:0)>0?` ${(o=r.state)==null?void 0:o.behind}\u2193`:""}`,tooltip:"Sync (Pull & Push)",arguments:[{uri:s}]})),r.pullRequest&&c.push(fr({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:te("scm statusbar command open pr",`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.pullRequest.repo,pullRequest:r.pullRequest.id}]})),t.sourceControl.statusBarCommands=c}ensureMergeConflictsGroup(t){const r="conflicts";let n=t.groups.find(i=>i.id===r);return n===void 0&&(n=t.sourceControl.createResourceGroup(r,te("scm group conflicts","Merge Conflicts")),n.hideWhenEmpty=!0,t.groups.push(n)),n}ensureStagedChangesGroup(t){const r="staged";let n=t.groups.find(i=>i.id===r);return n===void 0&&(n=t.sourceControl.createResourceGroup(r,te("scm group staged","Staged Changes")),n.hideWhenEmpty=!0,t.groups.push(n)),n}ensureWorkingChangesGroup(t){const r="changes";let n=t.groups.find(i=>i.id===r);return n===void 0&&(n=t.sourceControl.createResourceGroup(r,te("scm group changes","Changes")),t.groups.push(n)),n}getScmProvider(t){return this._scmProviders.find(r=>{var n;return((n=r.sourceControl.rootUri)==null?void 0:n.toString())===t.toString()})}getSourceControlFrom(t){if(t===void 0){if(this._scmProviders.length!==1)return;t=this._scmProviders[0].sourceControl}let r;if(dd(t))r=t;else if(Ly(t)){const n=t,i=this._scmProviders.find(o=>o.groups.includes(n));r=i==null?void 0:i.sourceControl}else{const n=t,i=this._scmProviders.find(o=>o.groups.some(s=>s.resourceStates.includes(n)));r=i==null?void 0:i.sourceControl}return r}}function dd(e){return"rootUri"in e&&"inputBox"in e}function Ly(e){return e!==void 0&&"id"in e&&"label"in e&&"resourceStates"in e&&Array.isArray(e.resourceStates)}function $y(e){return e!==void 0&&"resourceUri"in e&&e.resourceUri instanceof u.Uri}function hi(e){return"type"in e}async function Xs(e){var t,r,n;let i,o=te("discard","Discard Changes");if(e.length===1){const a=e[0];a.type===Te.Created?(i=te("confirm delete",`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,Ct((t=a.resourceUri)!=null?t:a.uri)),o=te("delete file","Delete file")):a.type===Te.Deleted?(o=te("restore file","Restore file"),i=te("confirm restore","Are you sure you want to restore {0}?",Ct((r=a.resourceUri)!=null?r:a.uri))):i=te("confirm discard","Are you sure you want to discard changes in {0}?",Ct((n=a.resourceUri)!=null?n:a.uri))}else e.every(a=>a.type===Te.Created)?i=te("confirm delete multiple",`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,e.length):e.every(a=>a.type===Te.Deleted)?(o=te("restore files","Restore files"),i=te("confirm restore multiple","Are you sure you want to restore {0} files?",e.length)):i=te("confirm discard multiple","Are you sure you want to discard changes in {0} files?",e.length);return await u.window.showWarningMessage(i,{modal:!0},o)===o}async function pi(e,t,r){if(e.length===0)return;if(e.length===1)return e[0].sourceControl.rootUri;const n=await u.window.showQuickPick(e.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:t,title:r});if(!!n)return n.uri}async function Js(e,t,r,n,i,o,s){const a=new Set;let l;const c=u.window.createInputBox();c.ignoreFocusOut=!0;try{return await new Promise((d,p)=>{l=u.Disposable.from(c.onDidHide(()=>d(void 0)),c.onDidChangeValue(h=>{if(h=h.trim(),!h){c.validationMessage=te("scm create branch prompt validation missing name","Please enter a valid branch name");return}if(a.has(h)){c.validationMessage=te("scm create branch prompt validation already exists","Branch '{0}' already exists",h);return}if(!hc(h)){c.validationMessage=te("scm create branch prompt validation invalid name","'{0}' isn't a valid branch name",h);return}c.validationMessage=void 0}),c.onDidAccept(async()=>{const h=c.value;try{c.enabled=!1,c.busy=!0;const f=await e.createBranch(t,h,r,s);d(f)}catch(f){if(f instanceof Ar){c.enabled=!0,c.busy=!1,c.validationMessage=f.duplicate?te("scm create branch prompt validation already exists","Branch '{0}' already exists",h):te("scm create branch prompt validation invalid","Invalid branch name '{0}'",h),a.add(h);return}p(f)}})),c.prompt=n,c.placeholder=i,c.title=o,c.show()})}finally{c.dispose(),l==null||l.dispose()}}const $e=(0,y.LV)();class nr extends u.TimelineItem{static is(t){return t instanceof nr}constructor(t,r,n,i,{dateType:o,showAuthor:s,dateFormatter:a}){var l;const c=n.message.indexOf(`
`),d=c!==-1?`${n.message.substring(0,c)} \u2026`:n.message,p=o==="authored"?n.authorDate:n.commitDate;super(d,(l=p==null?void 0:p.getTime())!=null?l:0);this.id=n.hash,this.contextValue=`vscode-vfs:${r}:file:commit`,this.command=i,s&&(this.description=n.authorName),this.detail=$e("timeline item detail",`{0} ({1}) \u2014 {2}
{3}

{4}`,n.authorName,n.authorEmail,nt(n.hash),a.format(p),n.message),this.iconPath=new u.ThemeIcon("git-commit"),this.rootUri=t,this.providerId=r,this.hash=n.hash,this.parents=n.parents,this.message=n.message}}class bn extends u.TimelineItem{static is(t){return t instanceof bn}constructor(t,r,n,i,o,{dateFormatter:s,staged:a}){const l=a?$e("timeline staged changes","Staged Changes"):$e("timeline uncommitted changes","Uncommitted Changes");super(l,n.timestamp);this.id=a?"index":"working",this.contextValue=`vscode-vfs:${r}:file:${this.id}`,this.command=o,this.iconPath=new u.ThemeIcon("git-commit"),a?this.detail=$e("timeline index detail",`{0}  \u2014 {1}
{2}

{3}`,$e("timeline you","You"),$e("timeline index","Index"),s.format(new Date(n.timestamp)),lc(n.type)):this.detail=$e("timeline working detail",`{0}  \u2014 {1}
{2}

{3}`,$e("timeline you","You"),$e("timeline working","Working Tree"),s.format(new Date(n.timestamp)),lc(n.type)),this.rootUri=t,this.providerId=r,this.hash=a?"~":"",this.parents=i,this.message=l}}class Gy{constructor(t,r,n){this.providerService=t,this.changeStore=n,this._onDidChange=new u.EventEmitter,this.id="github-file-history",this.label=$e("timeline.source","GitHub File History"),this.debouncer=new za(500),this.disposable=u.Disposable.from(this.debouncer,t.onDidChangeProviders(this.onProvidersChanged,this),t.onDidChangeRepositories(this.onRepositoriesChanged,this),r.onDidChange(i=>this.onUriChanged(i),this),n.onDidChange(i=>this.onUrisChanged(i),this),Fe.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),t.count&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.providerDisposable)==null||t.dispose(),this.disposable.dispose()}onConfigurationChanged(t){(t.affectsConfiguration("git.timeline.date")||t.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(t){this.ensureProviderRegistration(),this.fireChanged()}onRepositoriesChanged(t){if(this.rootUri===void 0)return;const r=this.rootUri.toString();(t.added.some(n=>n.uri.toString()===r)||t.removed.some(n=>n.uri.toString()===r))&&this.fireChanged()}onUriChanged(t){this.rootUri===void 0||this.rootUri.toString()!==t.toString()||this.fireChanged()}onUrisChanged(t){if(this.rootUri===void 0)return;const r=this.rootUri.toString();t.some(n=>n.rootUri.toString()===r)&&this.fireChanged()}async provideTimeline(t,r,n){var i;try{this.rootUri=this.providerService.getVirtualRootUri(t);for(const g of this.providerService.repositories)if(g.uri.path===this.rootUri.path){this.rootUri=g.uri;break}const o=this.providerService.getRelativeFilePath(this.rootUri,t),s=await this.providerService.getMetadata(this.rootUri);if(!s||n.isCancellationRequested)return{items:[]};const a=await this.providerService.getCommits(this.rootUri,{ref:s.HEAD.sha,path:o||void 0,cursor:r.cursor,limit:typeof r.limit=="number"?r.limit:void 0});if(a===void 0||a.commits.length===0||n.isCancellationRequested)return{items:[]};const l=((i=a.paging)==null?void 0:i.more)?{cursor:a.paging.cursor}:void 0,c=new Intl.DateTimeFormat(u.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),d=Fe.getAny("git.timeline.date",void 0,"committed"),p=Fe.getAny("git.timeline.showAuthor",void 0,!0),h=a.commits.map(g=>new nr(this.rootUri,s.provider.id,g,this.resolveDiffCommand(g,s,t,o),{dateType:d,showAuthor:p,dateFormatter:c})),f=r.cursor===void 0?this.changeStore.getChange(t):void 0;if(f){const g=Boolean(f.staged&&Fe.get("staging.enabled")),m=new bn(this.rootUri,s.provider.id,f,[a.commits[0].hash],this.changeStore.resolveDiffCommand(f.uri,this.providerService.getProviderUri(f.uri),g?$e("diff title index","{0} (Index)",Ct(f.uri)):$e("diff title working","{0} (Working Tree)",Ct(f.uri))),{dateFormatter:c,staged:g});h.splice(0,0,m)}return{items:h,paging:l}}catch(o){return me.error(o),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=u.workspace.registerTimelineProvider([He.scheme,...this.providerService.schemes],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let t;return[u.commands.registerCommand("remoteHub.timeline.copyCommitId",(r,n,i)=>{!nr.is(r)||u.env.clipboard.writeText(r.hash)}),u.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(r,n,i)=>{!nr.is(r)||u.env.clipboard.writeText(r.message)}),u.commands.registerCommand("remoteHub.timeline.openDiff",async(r,n,i)=>{var o;!nr.is(r)&&!bn.is(r)||r.command!==void 0&&await u.commands.executeCommand(r.command.command,...(o=r.command.arguments)!=null?o:[])}),u.commands.registerCommand("remoteHub.timeline.openOnGitHub",async(r,n,i)=>{if(!nr.is(r))return;const o=await this.providerService.getMetadata(r.rootUri);await Bo("remoteHub.openOnRemote",{provider:o.provider,repo:o.repo,sha:r.hash})}),u.commands.registerCommand("remoteHub.timeline.selectForCompare",async(r,n,i)=>{!n||!nr.is(r)&&!bn.is(r)||(t={uri:n,left:r},await u.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),u.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(r,n,i)=>{if(!n||!nr.is(r)&&!bn.is(r)||n.toString()!==(t==null?void 0:t.uri.toString()))return;const{left:o}=t,s=this.providerService.getRelativeFilePath(r.rootUri,n),a=await this.providerService.getMetadata(r.rootUri),l=Ct(n),c=o.parents[0];let d;c===void 0?d=$e("timeline diff title ref","{0} ({1})",l,nt(r.hash)):o.hash===""?d=$e("timeline diff title working","{0} (Working Tree)",l):o.hash==="~"?d=$e("timeline diff title index","{0} (Index)",l):d=$e("timeline diff title ref","{0} ({1})",l,nt(o.hash));let p=o.hash===""||o.hash==="~"?n:this.providerService.createProviderUri(n,{repo:a.repo,ref:c!=null?c:"0000000000000000000000000000000000000000"},s);c===void 0&&(p=p.with({query:"~"}));const h=r.parents[0];let f;h===void 0?f=$e("timeline diff title ref","{0} ({1})",l,nt(r.hash)):h==="~"&&r.hash===""?f=$e("timeline diff title working","{0} (Working Tree)",l):r.hash==="~"?f=$e("timeline diff title index","{0} (Index)",l):f=$e("timeline diff title ref","{0} ({1})",l,nt(r.hash));const g=$e("timeline diff title","{0} \u27F7 {1}",d,f),m=r.hash===""||r.hash==="~"?n:this.providerService.createProviderUri(n,{repo:a.repo,ref:r.hash},s);await u.commands.executeCommand("vscode.diff",p,m,g)})]}resolveDiffCommand(t,r,n,i,o){const s=Ct(n),a=t.parents[0];let l;a===void 0?l=$e("timeline diff title ref","{0} ({1})",s,nt(t.hash)):t.hash===""?l=$e("timeline diff title working","{0} (Working Tree)",s):t.hash==="~"?l=$e("timeline diff title index","{0} (Index)",s):l=$e("timeline diff title refs","{0} ({1}) \u27F7  {0} ({2})",s,nt(a),nt(t.hash));let c=this.providerService.createProviderUri(n,{repo:r.repo,ref:a!=null?a:"0000000000000000000000000000000000000000"},i);a===void 0&&(c=c.with({query:"~"}));const d=t.hash===""||t.hash==="~"?n:this.providerService.createProviderUri(n,{repo:r.repo,ref:t.hash},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[c,d,l,o]}}}class By{constructor(t){this.providerService=t,this.disposable=u.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}handleUri(t){switch(me.log(`RemoteUriHandler.handleUri: uri=${t.toString(!0)}`),t.path){case"/open":{let r;for(const n of t.query.split("&")){const[i,o]=n.split("=");if(i==="url"){r=decodeURIComponent(o);break}}if(me.warn(`RemoteUriHandler.handleUri: Unable to find url to open in uri=${t.toString(!0)}`),!r)return;r=r.trim(),me.warn(`RemoteUriHandler.handleUri: Opening url ${r}`),this.providerService.openWorkspaceForRemoteUrl(r,void 0,Be.NewWindow);break}}}}const ir=(0,y.LV)();let zr,yt;async function My(e){if(me.configure(e,Xe.Debug),zr=e.extensionRuntime!==u.ExtensionRuntime.Node,me.log("Running in",zr?"webworker":"node"),e.extension.id==="ms-vscode.remotehub-insiders"&&u.extensions.getExtension("ms-vscode.remotehub")!=null){me.log("RemoteHub (Insiders) was NOT activated because RemoteHub is also installed"),u.window.showErrorMessage(ir("insiders warning","RemoteHub (Insiders) cannot be used while RemoteHub is also installed. Please ensure that only one version of RemoteHub is installed."));return}Ua.configure(e);try{const t=new He,r=new $i(e.workspaceState);yt=new Pg(t,e.workspaceState);const n=new Iy(t,r,yt),i=new Bw(e.globalStorageUri),o=new mb(t,r),s=new Ww(t);e.subscriptions.push(t,t.onDidChangeRepositories(a=>{for(const l of a.added){const c=r.get(l.uri);if(!c)return;const{HEAD:d,defaultBranch:p}=c,h=d.detached?` (${d.detached.type===Rt.Commit?nt(d.detached.name):d.detached.name})`:d.branch.name!==p.name?` (${d.branch.name}) `:"",f={uri:l.uri,type:"folder",label:`${c.name}${h}[${c.provider.name}]`};u.commands.executeCommand("_workbench.addToRecentlyOpened",f)}}),n,new Uy(t,r,yt),new eg,new bb(t,r,yt),new Gy(t,r,yt),new By(t),...Jp(e,t,r,yt),...jy(s),s,i,...Ny(t,e.globalState,r,yt,n,i));for(const a of r.getForWorkspace()){if(a.data.HEAD.detached)continue;yt.hasChanges(a.folderUri)?t.fetch(a.folderUri):t.sync(a.folderUri,yt);const l=e.globalState.get(`remoteHub:filesToOpen|${a.folderUri.toString()}`);if(l){e.globalState.update(`remoteHub:filesToOpen|${a.folderUri.toString()}`,void 0);for(const c of l)u.commands.executeCommand("vscode.open",u.Uri.joinPath(a.folderUri,c))}}return Promise.resolve(o)}catch(t){me.error(t),t instanceof Dn&&ea(t.name);return}}async function ea(e){const t=ir("repository not found open","Open Repository");await u.window.showErrorMessage(ir("repository not found","Unable to find repository named '{0}'. Would you like to open another repository?",e),t)===t&&u.commands.executeCommand("remoteHub.openRepository")}function Ny(e,t,r,n,i,o){return[Hy(e,t,r,n,i,o),...Fe.get("insiders")?[zy(e,t,r,n,i,o)]:[]]}function Hy(e,t,r,n,i,o){const s=new sd(e,r),a=new cd(e,s,r,n,o),l=new Oy(e,t);async function c(){var p,h;const f=(p=u.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?p:u.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),g=(h=await(f==null?void 0:f.activate()))==null?void 0:h.registerGitProvider(i),k=r.getForWorkspace("github").find(F=>Boolean(F.data.pullRequest));if(k){const{repo:{owner:F,name:A},id:H}=k.data.pullRequest;u.commands.executeCommand("github.api.preloadPullRequest",`https://github.com/${F}/${A}/pulls/${H}`)}return g}const d=c();return u.Disposable.from(e.register("github","GitHub",s,a,l),s,a,{dispose:async()=>{var p;return void((p=await d)==null?void 0:p.dispose())}})}function zy(e,t,r,n,i,o){const s=new Lg(e,r),a=new jl(e,s,r,n,o),l=new qw(e,t);return u.Disposable.from(e.register("azdo","AzureDevOps",s,a,l),s,a)}function jy(e){return[e.register(new gb)]}function ta(){var e,t;return(t=(e=u.workspace.workspaceFolders)==null?void 0:e.every(r=>r.uri.scheme===He.scheme))!=null?t:!1}async function _t(e,t,r,n){var i,o,s,a;if(r===Be.AddToWorkspace){const c=(o=(i=u.workspace.workspaceFolders)==null?void 0:i.length)!=null?o:0;return void u.workspace.updateWorkspaceFolders(c,0,{uri:e,name:t})}if(r===Be.CurrentWindow&&yt!==void 0&&((a=(s=u.workspace.workspaceFolders)==null?void 0:s.some(d=>d.uri.scheme===He.scheme&&yt.hasChanges(d.uri)))!=null?a:!1)){const d={title:ir("continue","Continue")},p={title:ir("cancel","Cancel"),isCloseAffordance:!0};if(await u.window.showWarningMessage(ir("open folder uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them from anywhere else. You can always re-open this workspace to see your changes again.

Do you want to continue opening a new workspace?`),{modal:!0},d,p)!==d)return}n&&await n.memento.update(`remoteHub:filesToOpen|${e.toString()}`,n.paths);let l;if(u.env.remoteName){const c=ir("open folder location local","Open from Local Machine"),d=ir("open folder location remote","Open from Remote Machine"),p=await u.window.showInformationMessage(ir("open folder location",`Do you want to open the remote repository from your local or remote machine?

Opening from the current remote connection will allow you to continue working on the remote repository from any other machine connected to this remote machine.`),{modal:!0},c,d);if(!p)return;p===c&&(l=!0)}return void u.commands.executeCommand("vscode.openFolder",e,{forceNewWindow:r===Be.NewWindow,forceLocalWindow:l})}})(),module.exports=So})();
