# 类型定义，发布应用服务时,产品包含的服务指定类型为 service （类型：string）
kind: service
# 服务在平台显示的名称，请与服务目录名称保持一致，建议字符：英文、数字、_ （类型：string）
name: lcapServer
# 上传后显示的服务版本，建议字符： 数字、字母、_ 、. （类型：string）
version: 1.2.0
product:
  # 产品名称 （类型: string)
  name: lcap
  # 产品版本 （类型: string)
  version: 5.4.0
# 指定该服务安装后是否需要启动 （类型：boolean)
auto_launch: true 
# 指定服务是否为基础环境组件，如 jdk, 该类组件以基础环境方式安装 （类型：boolean)
base_env: false
# 定义服务所需端口号，如不启用端口，可留空 （类型：list[map,map...])
ports:
    # 端口描述名称，用户在安装时会以该名称显示表单内容（类型：string)
  - name: 服务端口      
    # 端口协议，支持 TCP/UDP
    protocol: TCP 
    # 端口英文描述名称，该key会传入到安装脚本中 （类型： string）支持（英文、数字、_)
    key: service_port  # 注：service_port 为保留关键词，表示 为 提供服务的端口
    # 组件的默认端口号，在安装时，会以该值填入表单中（类型： int）
    default: "18531"

# 服务监控相关配置，定义该服务在安装后如何监控 ，如果不需要监控可留空 （类型： map）
monitor:
  # 监控进程名称，如“service_a”，平台在发现service_a进程不存在后，会发送告警提醒,不需要监控可留空（类型：string）
  process_name:
  # 监控端口号，请根据 ports 中的变量设置，不需要监控可留空 （类型： {string}）
  metric_port: "{service_port}"
  # 新增type类型, 前端展示对应类型的grafana面板
  type: ""
# 安装顺序 0、1 默认为0, 例如除了portalWeb外其他的web静态页面均置为 1
level: 1
# 绑定设置，可以为空
affinity:
# 定义该组件安装所需依赖组件名称与版本,如不需其他组件依赖，可留空 （类型： list[map,map..])
dependencies:
  - name: mongodb
    version: 4.0.28
  - name: nodejs
    version: 12.99.10
  - name: nacos
    version: 2.0.3

# 该组件所需最小资源需求 （类型：map)
resources:   

# 定义安装组件时所需参数，该参数会传入到 安装脚本中 （类型：list[map,map...]）
install:        
    # 传入参数中文描述名称，该名称会在用户安装组件时显示到表单中 （类型： string）
  - name: "安装目录"
    # 传入参数key值，会将该key与值 传入到安装脚本中 （类型：string）
    key: base_dir
    # 上面key默认值 （类型： string）
    default: "{data_path}/app/lcapServer"  # 注： {data_path} 为主机数据目录占位符，请勿使用其他代替
  - name: "数据目录"  
    key: data_dir
    default: "{data_path}/app/appData"
  - name: "日志目录"  
    key: log_dir
    default: "{data_path}/app/logs"
  - name: "启动内存"  
    key: memory
    default: "1g"    
  - name: "安装用户"  
    key: run_user
    default: "commonuser"
control: 
   # 启动脚本路径，如没有可留空,脚本名称建议与服务名称一致  （类型：string）
  start: "./bin/lcapServer start"
  # 停止脚本路径，如没有可留空，脚本名称建议与服务名称一致 （类型：string）
  stop: "./bin/lcapServer stop"
  # 重启脚本路径，如没有可留空，脚本名称建议与服务名称一致 （类型：string）
  restart:
  # 重载脚本路径，如没有可留空 （类型：string）
  reload: 
  # 安装脚本路径，必填 （类型：string）
  install: "./scripts/install.py"
  # 初始化脚本路径，如没有可留空  （类型：string）
  init: "./scripts/init.py"
deploy:
