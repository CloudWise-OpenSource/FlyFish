!function(C,w,N){"use strict";function p(){var T=[],f=[];return function(){return 0===arguments.length?f.join("")+A.apply(String,T):(T.length+arguments.length>1024&&(f.push(A.apply(String,T)),T.length=0),Array.prototype.push.apply(T,arguments),void 0)}}function X(P,e,j,b,B){var p,M,R=8*B-b-1,X=(1<<R)-1,i=X>>1,k=-7,S=j?B-1:0,I=j?-1:1,s=P[e+S];for(S+=I,p=s&(1<<-k)-1,s>>=-k,k+=R;k>0;p=256*p+P[e+S],S+=I,k-=8);for(M=p&(1<<-k)-1,p>>=-k,k+=b;k>0;M=256*M+P[e+S],S+=I,k-=8);if(0===p)p=1-i;else{if(p===X)return M?0/0:1/0*(s?-1:1);M+=Math.pow(2,b),p-=i}return(s?-1:1)*M*Math.pow(2,p-b)}var l="ht",I=C[l],G=null,P=Math,D=P.abs,E=P.max,R=Number.MAX_VALUE,k=I.Default,o=k.getInternal(),y=k.clone,T=o.vec3TransformMat4,L=[0,0],O=o.appendArray,f=function(){function X(I,e,n,x){if(I){var a=I[x];if(a){n.ignoreColor||(e.color=a.kd),!n.ignoreTransparent&&a.d>0&&a.d<1&&(e.transparent=!0,e.opacity=a.d);var t;if(!n.ignoreImage&&(t=a.map_kd)){t=t.split(" ");for(var o=-1,M=0;M<t.length;M++)"-o"===t[M]?(e.uvOffset=[parseFloat(t[M+1]),parseFloat(t[M+2])],M+=3,o=M):"-s"===t[M]&&(e.uvScale=[parseFloat(t[M+1]),parseFloat(t[M+2])],M+=3,o=M);e.image=(n.prefix||"")+t.splice(o+1).join(" ")}}}}var C=/v( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,q=/vt( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,i=/vn( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)( +[\d|\.|\+|\-|e|E]+| nan)/,$=/^[og]\s*(.+)?/,g=function(U,g){return g=parseInt(g),g>=0?U[g-1]:U[g+U.length]},n=function(V,k,K,A,C){if(V.lvs){var I=g(k,A),f=g(k,C),n=K.matrix,U=V.lvs;n?(O(U,T(y(I),n)),O(U,T(y(f),n))):(O(U,I),O(U,f))}},A=function(j,S,q,C,s,o){if(j.vs){var h=g(S,C),M=g(S,s),N=g(S,o),J=q.matrix,Q=j.vs;if(q.flipFace){var e=M;M=N,N=e}J?(O(Q,T(y(h),J)),O(Q,T(y(M),J)),O(Q,T(y(N),J))):(O(Q,h),O(Q,M),O(Q,N))}},K=function(Q,X,U,G,u,_){if(Q.vs){var S=U.flipY,l=G===N?L:g(X,G),a=u===N?L:g(X,u),w=_===N?L:g(X,_);if(U.flipFace){var h=a;a=w,w=h}Q.uv.push(l[0],S?1-l[1]:l[1],a[0],S?1-a[1]:a[1],w[0],S?1-w[1]:w[1])}},V=function(V,l,$,n,F,_){if(V.vs){var t=g(l,n),u=g(l,F),i=g(l,_),H=$.normalMatrix,p=V.ns;if($.flipFace){var x=u;u=i,i=x}H?(O(p,T(y(t),H)),O(p,T(y(u),H)),O(p,T(y(i),H))):(O(p,t),O(p,u),O(p,i))}},S=function(R,D,C,x){for(var q=x.length-1,u=0;q>u;++u)n(R,D,C,x[u],x[u+1]);n(R,D,C,x[q],x[0])},f=function(D,k,O,d,_,J,z,f){var m=d&&d.length&&f;J[3]===N?(A(D,k,_,J[0],J[1],J[2]),z?K(D,O,_,z[0],z[1],z[2]):D.uv&&D.uv.length&&K(D,O,_),m&&V(D,d,_,f[0],f[1],f[2])):(A(D,k,_,J[0],J[1],J[3]),A(D,k,_,J[1],J[2],J[3]),z?(K(D,O,_,z[0],z[1],z[3]),K(D,O,_,z[1],z[2],z[3])):D.uv&&D.uv.length&&(K(D,O,_),K(D,O,_)),m&&(V(D,d,_,f[0],f[1],f[3]),V(D,d,_,f[1],f[2],f[3])))},_=function(p,J,s,T){var o,Z,A,f,B,X,y,n,N=R,x=R,g=R,m=-R,P=-R,j=-R;for(o in p)for(X=p[o].vs,n=X.length,Z=0;n>Z;Z+=3)A=X[Z+0],f=X[Z+1],B=X[Z+2],N>A&&(N=A),x>f&&(x=f),g>B&&(g=B),A>m&&(m=A),f>P&&(P=f),B>j&&(j=B);var u;if(s){var k=N+(m-N)/2,M=x+(P-x)/2,q=g+(j-g)/2;for(o in p){for(X=p[o].vs,n=X.length,Z=0;n>Z;Z+=3)X[Z+0]-=k,X[Z+1]-=M,X[Z+2]-=q;if(y=p[o].lvs)for(n=y.length,Z=0;n>Z;Z+=3)y[Z+0]-=k,y[Z+1]-=M,y[Z+2]-=q}u=[k,M,q]}var w,i,O;s?(w=m-N,i=P-x,O=j-g):(w=2*E(D(N),D(m)),i=2*E(D(x),D(P)),O=2*E(D(g),D(j))),0===w&&(w=Math.min(i,O)/1e3||.001),0===i&&(i=Math.min(w,O)/1e3||.001),0===O&&(O=Math.min(w,i)/1e3||.001),T.rawS3=[w,i,O];for(o in p){if(X=p[o].vs,y=p[o].lvs,J){for(n=X.length,Z=0;n>Z;Z+=3)w&&(X[Z+0]/=w),i&&(X[Z+1]/=i),O&&(X[Z+2]/=O);if(y)for(n=y.length,Z=0;n>Z;Z+=3)w&&(y[Z+0]/=w),i&&(y[Z+1]/=i),O&&(y[Z+2]/=O);var F=p[o].ns;if(F){n=F.length;var $=new I.Math.Vector3;for(Z=0;n>Z;Z+=3)$.set(F[Z+0]*w,F[Z+1]*i,F[Z+2]*O).normalize(),F[Z+0]=$.x,F[Z+1]=$.y,F[Z+2]=$.z}}p[o].rawS3=T.rawS3,u&&(p[o].center=u)}};return function(K,N,D){if(!K)return G;(o.isString(N)||N instanceof ArrayBuffer)&&(N=a(N)),D||(D={}),D.flipY==G&&(D.flipY=!0),(D.s3||D.r3||D.t3||D.mat)&&(D.matrix=o.createWorldMatrix(D.mat,D.s3,D.r3,D.rotationMode,D.t3));var j,v,Z,r,V=I.Style["wf.loadQuadWireframe"],y=[],F=[],Y=D.ignoreNormal?G:[],E=D.reverseFlipMtls,d={vs:[],uv:[],ns:Y?[]:G},T={htdefault:d},H=new c(K),t="",z="";for(Y&&D.matrix&&(D.normalMatrix=o.createNormalMatrix(D.matrix));null!=(v=H.stepNext());)if(v=v.trim(),0!==v.length&&"#"!==v.charAt(0))if(v.indexOf("\\")!==v.length-1){if(t&&(v=t+v,t=""),v.indexOf("#QNAN0")>=0&&(v=v.replace(/#QNAN0/gi,"0")),Z=C.exec(v))y.push([parseFloat(Z[1]),parseFloat(Z[2]),parseFloat(Z[3])]);else if(Z=q.exec(v))F.push([parseFloat(Z[1]),parseFloat(Z[2])]);else if(Y&&(Z=i.exec(v)))D.flipFace?Y.push([parseFloat(-Z[1]),parseFloat(-Z[2]),parseFloat(-Z[3])]):Y.push([parseFloat(Z[1]),parseFloat(Z[2]),parseFloat(Z[3])]);else if("f"===v[0]){var A=v.split(/\s+/);if(A.length<4)continue;var l,j,O,x=[],M=[],U=[];for(j=1,O=A.length;O>j;j++)l=A[j].split("/"),x.push(parseInt(l[0],10)),l.length>1&&l[1].length>0&&U.push(parseInt(l[1],10)),l.length>2&&l[2].length>0&&M.push(parseInt(l[2],10));for(j=0,O=x.length-2;O>j;j++)f(d,y,F,Y,D,[x[0],x[j+1],x[j+2]],U.length?[U[0],U[j+1],U[j+2]]:G,M.length?[M[0],M[j+1],M[j+2]]:G);V&&S(d,y,D,x)}else if(D.part&&null!==(Z=$.exec(v)))z=(" "+Z[0].substr(1).trim()).substr(1);else if(/^usemtl /.test(v)){var Q=v.substring(7).trim();Q.split(" ").forEach(function(a){var i=D.part?z+"_"+a:a;(d=T[i])||(d=T[i]={name:i,vs:[],uv:[],ns:Y?[]:G,lvs:V?[]:G},D.ignoreMtls&&D.ignoreMtls.indexOf(a)>=0&&delete d.vs,(D.reverseFlip||"*"===E||E&&E.indexOf(a)>=0)&&(d.reverseFlip=!0),X(N,d,D,a))})}}else t+=v.substring(0,v.length-1);var n=[];for(var B in T){var J=T[B].vs;if(J&&0!==J.length){var b=T[B].uv;if(b)for(var h=2*J.length/3-b.length;h-->0;)b.push(0)}else n.push(B)}n.forEach(function(H){delete T[H]}),_(T,D.cube,D.center,D);var s=D.shape3d;if(s){var W=[];for(var r in T){var d=T[r];W.rawS3=d.rawS3,d.center&&(W.center=d.center),W.push(d)}k.setShape3dModel(s,W)}return T}}(),a=function(r){var L={};if(r)for(var T,k,h,x,m,y,d=new c(r),Z=/\s+/;null!=(k=d.stepNext());)k=k.trim(),0!==k.length&&"#"!==k.charAt(0)&&(h=k.indexOf(" "),x=(h?k.substring(0,h):k).toLowerCase(),m=(h?k.substring(h+1):"").trim(),"newmtl"===x?L[m]=T={name:m}:T&&("ka"===x||"kd"===x||"ks"===x?(y=m.split(Z,3),T[x]=[parseFloat(y[0]),parseFloat(y[1]),parseFloat(y[2]),1]):T[x]="ns"===x||"d"===x?parseFloat(m):m));return L},c=function(x){var e=this;if(x instanceof ArrayBuffer){e.isBuffer=!0;var E=0,N=new Uint8Array(x),A=N.length,X=N.length;e.stepNext=function(){for(var j,s,W=E;A>E;)if(j=N[E],s=j>>4,12===s||13==s)E+=2;else if(14===s)E+=3;else if(E++,10===j)return String.fromCharCode.apply(null,N.subarray(W,E));return E>W?String.fromCharCode.apply(null,N.subarray(W,E)):null}}else{e.isBuffer=!1;var g=x.split("\n"),k=0,X=g.length;e.stepNext=function(){return X>k?g[k++]:null}}};c.prototype={},c.prototype.constructor=c,o.addMethod(k,{loadObj:function(K,v,F){F=F||{};var o=!1;/(MSIE |Trident\/|Edge\/)/.test(C.navigator.userAgent)&&(o=!0);var r=function(s){var i,W=F.finishFunc,C=F.shape3d,X=s?f(s[0],s[1],F):null;if(X){if(C)i=k.getShape3dModel(C);else{i=[];for(var T in X){var z=X[T];i.rawS3=z.rawS3,i.push(z)}}W&&W(X,i,i.rawS3)}else W&&W(null)};if(o){F.responseType="arraybuffer";var u=function(C){k.xhrLoad(K,function(t){r([t,C])},F)};v?k.xhrLoad(v,function(l){u(l)},F):u()}else k.xhrLoad(v?[K,v]:[K],r,F)},parseObj:function(w,G,s){return f(w,G,s)}});var K=I.ByteBuffer=function(k,m,l){if("undefined"==typeof k&&(k=K.DEFAULT_CAPACITY),"undefined"==typeof m&&(m=K.DEFAULT_ENDIAN),"undefined"==typeof l&&(l=K.DEFAULT_NOASSERT),!l){if(k=0|k,0>k)throw RangeError("Illegal capacity");m=!!m,l=!!l}this.buffer=0===k?W:new ArrayBuffer(k),this.view=0===k?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=k,this.littleEndian=m,this.noAssert=l},W=new ArrayBuffer(0);K.LITTLE_ENDIAN=!0,K.BIG_ENDIAN=!1,K.DEFAULT_CAPACITY=16,K.DEFAULT_ENDIAN=K.BIG_ENDIAN,K.DEFAULT_NOASSERT=!1,K.METRICS_BYTES="b";var A=String.fromCharCode,J=K.prototype;J.readUint8=function(l){var $="undefined"==typeof l;if($&&(l=this.offset),!this.noAssert){if("number"!=typeof l||0!==l%1)throw TypeError("Illegal offset: "+l+" (not an integer)");if(l>>>=0,0>l||l+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+l+" (+"+1+") <= "+this.buffer.byteLength)}var g=this.view[l];return $&&(this.offset+=1),g},J.readUint16=function(_){var s="undefined"==typeof _;if(s&&(_=this.offset),!this.noAssert){if("number"!=typeof _||0!==_%1)throw TypeError("Illegal offset: "+_+" (not an integer)");if(_>>>=0,0>_||_+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+_+" (+"+2+") <= "+this.buffer.byteLength)}var m=0;return this.littleEndian?(m=this.view[_],m|=this.view[_+1]<<8):(m=this.view[_]<<8,m|=this.view[_+1]),s&&(this.offset+=2),m},J.readUint24=function(t){var z="undefined"==typeof t;if(z&&(t=this.offset),!this.noAssert){if("number"!=typeof t||0!==t%1)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+4+") <= "+this.buffer.byteLength)}var j=0;return this.littleEndian?(j=this.view[t+2]<<16,j|=this.view[t+1]<<8,j|=this.view[t]):(j=this.view[t+1]<<8,j|=this.view[t+2],j+=this.view[t]<<16>>>0),j|=0,z&&(this.offset+=3),j},J.readUint32=function(s){var p="undefined"==typeof s;if(p&&(s=this.offset),!this.noAssert){if("number"!=typeof s||0!==s%1)throw TypeError("Illegal offset: "+s+" (not an integer)");if(s>>>=0,0>s||s+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+s+" (+"+4+") <= "+this.buffer.byteLength)}var S=0;return this.littleEndian?(S=this.view[s+2]<<16,S|=this.view[s+1]<<8,S|=this.view[s],S+=this.view[s+3]<<24>>>0):(S=this.view[s+1]<<16,S|=this.view[s+2]<<8,S|=this.view[s+3],S+=this.view[s]<<24>>>0),p&&(this.offset+=4),S},J.readFloat32=function(I){var C="undefined"==typeof I;if(C&&(I=this.offset),!this.noAssert){if("number"!=typeof I||0!==I%1)throw TypeError("Illegal offset: "+I+" (not an integer)");if(I>>>=0,0>I||I+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+I+" (+"+4+") <= "+this.buffer.byteLength)}var o=X(this.view,I,this.littleEndian,23,4);return C&&(this.offset+=4),o};var j=function(){var e={};return e.MAX_CODEPOINT=1114111,e.decodeUTF8=function(B,c){for(var f,Z,j,Q,O=function(Q){Q=Q.slice(0,Q.indexOf(null));var V=Error(Q.toString());throw V.name="TruncatedError",V.bytes=Q,V};null!==(f=B());)if(0===(128&f))c(f);else if(192===(224&f))null===(Z=B())&&O([f,Z]),c((31&f)<<6|63&Z);else if(224===(240&f))(null===(Z=B())||null===(j=B()))&&O([f,Z,j]),c((15&f)<<12|(63&Z)<<6|63&j);else{if(240!==(248&f))throw RangeError("Illegal starting byte: "+f);(null===(Z=B())||null===(j=B())||null===(Q=B()))&&O([f,Z,j,Q]),c((7&f)<<18|(63&Z)<<12|(63&j)<<6|63&Q)}},e.UTF16toUTF8=function(c,F){for(var S,T=null;;){if(null===(S=null!==T?T:c()))break;S>=55296&&57343>=S&&null!==(T=c())&&T>=56320&&57343>=T?(F(1024*(S-55296)+T-56320+65536),T=null):F(S)}null!==T&&F(T)},e.UTF8toUTF16=function(h,A){var F=null;for("number"==typeof h&&(F=h,h=function(){return null});null!==F||null!==(F=h());)65535>=F?A(F):(F-=65536,A((F>>10)+55296),A(F%1024+56320)),F=null},e.decodeUTF8toUTF16=function(z,O){e.decodeUTF8(z,function(x){e.UTF8toUTF16(x,O)})},e.calculateCodePoint=function(X){return 128>X?1:2048>X?2:65536>X?3:4},e.calculateUTF8=function(a){for(var c,V=0;null!==(c=a());)V+=128>c?1:2048>c?2:65536>c?3:4;return V},e.calculateUTF16asUTF8=function(_){var u=0,j=0;return e.UTF16toUTF8(_,function(_){++u,j+=128>_?1:2048>_?2:65536>_?3:4}),[u,j]},e}();J.readString=function(S,J,z){"number"==typeof J&&(z=J,J=N);var P="undefined"==typeof z;if(P&&(z=this.offset),"undefined"==typeof J&&(J=K.METRICS_CHARS),!this.noAssert){if("number"!=typeof S||0!==S%1)throw TypeError("Illegal length: "+S+" (not an integer)");if(S|=0,"number"!=typeof z||0!==z%1)throw TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,0>z||z+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+z+" (+"+0+") <= "+this.buffer.byteLength)}var a,Q=0,r=z;if(J===K.METRICS_CHARS){if(a=p(),j.decodeUTF8(function(){return S>Q&&z<this.limit?this.view[z++]:null}.bind(this),function(P){++Q,j.UTF8toUTF16(P,a)}),Q!==S)throw RangeError("Illegal range: Truncated data, "+Q+" == "+S);return P?(this.offset=z,a()):{string:a(),length:z-r}}if(J===K.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof z||0!==z%1)throw TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,0>z||z+S>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+z+" (+"+S+") <= "+this.buffer.byteLength)}var q=z+S;if(j.decodeUTF8toUTF16(function(){return q>z?this.view[z++]:null}.bind(this),a=p(),this.noAssert),z!==q)throw RangeError("Illegal range: Truncated data, "+z+" == "+q);return P?(this.offset=z,a()):{string:a(),length:z-r}}throw TypeError("Unsupported metrics: "+J)};var Q=function(C){if(C){var b=new K(0);b.buffer=C,b.limit=C.byteLength,b.view=C.byteLength>0?new Uint8Array(C):null;var V=[];return B(V,b),U(V,b),$(V,b),V}},B=function(S,C){C.offset+=19},U=function(w,V){var Z=V.readUint8();1&Z&&(w.center=s(V)),2&Z&&(w.rawS3=s(V))},m=function(T){return[T.readFloat32(),T.readFloat32()]},s=function(H){return[H.readFloat32(),H.readFloat32(),H.readFloat32()]},z=function(i){var k=i.readUint32();return i.readString(k,K.METRICS_BYTES)},$=function(b,N){for(var H=N.readUint8(),w=0;H>w;w++)b.push(S(N))},S=function(c){var f={},Q=c.readUint32(),y=0,J=Q&1<<y++,K=Q&1<<y++,u=Q&1<<y++,L=Q&1<<y++,M=Q&1<<y++,R=Q&1<<y++,g=Q&1<<y++,j=Q&1<<y++,X=Q&1<<y++,h=Q&1<<y++,O=Q&1<<y++,$=Q&1<<y++;return(J||K)&&Z(f,c,3,"vs","lvs"),u&&Z(f,c,2,"uv"),L&&Z(f,c,3,"ns"),M&&(f.name=z(c)),R&&(f.color=s(c)),g&&(f.transparent=!!c.readUint8()),j&&(f.opacity=c.readFloat32()),X&&(f.uvoffset=m(c)),h&&(f.uvScale=s(c)),O&&(f.image=z(c)),$&&(f.reverseFlip=!!c.readUint8()),f},x=16383,M=function(F){var Q=F.readUint16(),h=16384&Q,V=32768&Q,R=(Q&x)/x,s=0;return V&&(s=F.readUint16()),(h?1:-1)*(s+R)},u=function(K){var d=K.readUint32(),B=d&1<<30,E=d&1<<29,G=d&1<<28,D=16383,m=(16383&d>>14)/D,f=(16383&d)/D,U=Math.sqrt(1-m*m-f*f)||0;return[m*(B?1:-1),f*(E?1:-1),U*(G?1:-1)]},Z=function(D,m,W,N,B){var Q=m.readUint32();m.readUint8();var l,Y,R,j=m.readUint32(),r=m.readUint32(),$=[];if("uv"===N)for(l=0;Q>l;l++)Y=M(m),R=M(m),$.push([Y,R]);else if("ns"===N)for(l=0;Q>l;l++)$.push(u(m));else for(var l=0;Q>l;l++)$.push(s(m));var T;T=256>Q?"readUint8":65536>Q?"readUint16":16777216>Q?"readUint24":"readUint32";var E,I,h;if(j)for(E=D[N]=[],l=0;j>l;l++)I=m[T](),h=$[I],"uv"===N?E.push(h[0],h[1]):E.push(h[0],h[1],h[2]);if(r)for(E=D[B]=[],l=0;r>l;l++)I=m[T](),h=$[I],E.push(h[0],h[1],h[2])};k.getInternal().addMethod(k,{loadBin:function(v,r){r=r||{};var S=function(l){var o,W=r.finishFunc,N=r.shape3d,B=l?Q(l):null;if(B){if(N)o=k.getShape3dModel(N);else{o=[];for(var _ in B){var t=B[_];o.rawS3=t.rawS3,o.push(t)}}W&&W(B,o,o.rawS3)}else W&&W(null)};r.responseType="arraybuffer",k.xhrLoad(v,function(t){S(t)},r)},parseBin:function(i){return Q(i)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);