(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{893:function(e,o,i){"use strict";i.r(o),function(e){var t=i(230),n=i(976),r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=Object(t.b)(function(e,t){return r({},t)})(n.a);o.default=function(){return e.createElement(a,null)}}.call(this,i(1))},932:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return u});var o=n(14),i=n(23),r=function(e,t,n){return o.a.request.postJSON(i.a.getTaskList,{instanceId:e,nodeIp:t,nodePort:n})},a=function(e,t,n){return o.a.request.postJSON(i.a.getCreateData,{instanceId:e,nodeIp:t,nodePort:n})},s=function(e,t,n,r){return o.a.request.postJSON(i.a.getEditData,{instanceId:e,nodeIp:t,nodePort:n,fileName:r})},c=function(e,t,n,r,a){return o.a.request.postJSON(i.a.saveEditTask,{instanceId:e,nodeIp:t,nodePort:n,fileName:r,content:a})},u=function(e,t,n,r){return o.a.request.postJSON(i.a.delTask,{instanceId:e,nodeIp:t,nodePort:n,fileName:r})}},976:function(e,k,w){"use strict";!function(o){w.d(k,"a",function(){return n});w(506);var a=w(92),i=(w(507),w(54)),s=(w(115),w(38)),e=w(894),c=w.n(e),u=w(14),l=w(21),p=w(858),f=w(977),d=w(978),h=w(979),t=w(1),m=w(231),b=w(228),y=w(932),e=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var n=u.a.decorator.contextTypes("router","store")((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,t.PureComponent),e(g,[{key:"componentDidMount",value:function(){this.getTaskList()}},{key:"getTaskList",value:function(){var t=this,e=this.getQueryString(),n=e.instanceId,r=e.nodeIp,a=e.nodePort,e=e.pluginType;this.setState({pluginType:e,nodeIp:r,instanceId:n,nodePort:a}),Object(y.d)(n,r,a).then(function(e){e=t.dataFormat(e.data);t.setState({taskList:e})},function(e){u.a.prompt.error(e.msg)})}},{key:"showEditModal",value:function(e){var t=this,n=e.instanceId,r=e.nodeIp,a=e.nodePort,e=e.fn;u.a.helper.renderModal(o.createElement(d.a,{instanceId:n,nodeIp:r,nodePort:a,fileName:e,getTaskList:function(){return t.getTaskList()}}))}},{key:"showCreateModal",value:function(){var e=this,t=this.state,n=t.instanceId,r=t.nodeIp,t=t.nodePort;u.a.helper.renderModal(o.createElement(f.a,{instanceId:n,nodeIp:r,nodePort:t,getTaskList:function(){return e.getTaskList()}}))}},{key:"dataFormat",value:function(e){var r,a=e.instanceId,o=e.nodeIp,i=e.nodePort,e=e.jobList,s=[];return e.map(function(e,t){var n=e.taskName,e=e.fn;r={key:String(t),number:t+1,taskName:n,fn:e,instanceId:a,nodeIp:o,nodePort:i},s.push(r)}),s}},{key:"showDelModal",value:function(e){var t=this,n=e.instanceId,r=e.nodeIp,a=e.nodePort,e=e.fn;u.a.helper.renderModal(o.createElement(h.a,{instanceId:n,nodeIp:r,nodePort:a,fileName:e,pluginType:this.state.pluginType,getTaskList:function(){return t.getTaskList()}}))}},{key:"render",value:function(){var e=this,t=this.state.taskList,r=this,n=[{title:"序号",dataIndex:"number",key:"number"},{title:"worker名称",dataIndex:"taskName",key:"taskName"},{title:"操作",dataIndex:"operator",render:function(e,t,n){return o.createElement("div",null,o.createElement(s.a,{className:c.a["task-edit"],type:"primary",icon:"edit",onClick:function(){return r.showEditModal(t)}},"编辑"),o.createElement(s.a,{className:c.a["task-del"],type:"primary",icon:"close",onClick:function(){return r.showDelModal(t)}},"删除任务"))}}];return o.createElement("div",null,o.createElement(m.b,{title:"任务",rightRender:o.createElement("div",null,o.createElement(b.a,{to:l.a.dHub_pluginList},o.createElement(s.a,{type:"primary",icon:"rollback"},"返回插件列表")),o.createElement(s.a,{type:"primary",icon:"plus",className:c.a["creat-btn"],onClick:function(){return e.showCreateModal()}},"新建任务"))}),o.createElement(m.a,null,o.createElement(a.a,null,o.createElement(i.a,{span:24,style:{fontSize:14}},"主机:",this.state.nodeIp)),o.createElement(a.a,null,o.createElement(i.a,{span:24,style:{fontSize:14}},"插件:",this.state.pluginType)),o.createElement(p.a,{pagination:!1,dataSource:t,columns:n})))}}]),e=g))||e;function g(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g);for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t=v(this,(e=g.__proto__||Object.getPrototypeOf(g)).call.apply(e,[this].concat(r)))).state={pluginType:"",nodeIp:"",instanceId:"",nodePort:"",taskList:[]},t.getQueryString=function(){return u.a.queryString.parse(t.context.router.route.location.search)},v(t,e)}}.call(this,w(1))},977:function(e,d,h){"use strict";!function(n){h.d(d,"a",function(){return p});h(855);var r=h(856),e=(h(229),h(232)),t=h(0),a=h.n(t),o=h(14),i=h(1),s=h(932),t=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e};function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=e.a.TextArea,p=o.a.decorator.propTypes({instanceId:a.a.string.isRequired,nodeIp:a.a.string.isRequired,nodePort:a.a.string.isRequired,getTaskList:a.a.func.isRequired})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,i.PureComponent),t(f,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.instanceId,r=e.nodeIp,e=e.nodePort;Object(s.b)(n,r,e).then(function(e){t.setState({content:e.data.content})},function(e){o.a.prompt.error(e.msg)})}},{key:"changeText",value:function(e){e=e.target.value;this.setState({content:e})}},{key:"render",value:function(){var t=this,e=this.state.content;return n.createElement(r.a,{cancelText:"取消",okText:"提交",title:"新建任务",width:700,visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},n.createElement(l,{value:e,disabled:!1,autosize:{minRows:20,maxRows:25},onChange:function(e){return t.changeText(e)}}))}}]),t=f))||t;function f(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a=u(this,(e=f.__proto__||Object.getPrototypeOf(f)).call.apply(e,[this].concat(n)))).state={visible:!0,content:""},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleOk=function(){var e=a.props,t=e.instanceId,n=e.nodeIp,r=e.nodePort,e=a.state.content;Object(s.e)(t,n,r,"",e).then(function(e){a.setState({visible:!1}),a.props.getTaskList(),o.a.prompt.success("创建成功")},function(e){o.a.prompt.error(e.msg)})},u(a,e)}}.call(this,h(1))},978:function(e,d,h){"use strict";!function(n){h.d(d,"a",function(){return p});h(855);var r=h(856),e=(h(229),h(232)),t=h(0),a=h.n(t),i=h(14),o=h(1),s=h(932),t=function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e};function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=e.a.TextArea,p=i.a.decorator.propTypes({instanceId:a.a.string.isRequired,nodeIp:a.a.string.isRequired,nodePort:a.a.number.isRequired,fileName:a.a.string.isRequired,getTaskList:a.a.func.isRequired})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,o.PureComponent),t(f,[{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.instanceId,r=e.nodeIp,a=e.nodePort,e=e.fileName;Object(s.c)(n,r,a,e).then(function(e){t.setState({content:e.data.content})},function(e){i.a.prompt.error(e.msg)})}},{key:"changeText",value:function(e){e=e.target.value;this.setState({content:e})}},{key:"render",value:function(){var t=this,e=this.state.content;return n.createElement(r.a,{cancelText:"取消",okText:"提交",title:"编辑任务",width:700,visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},n.createElement(l,{value:e,disabled:!1,autosize:{minRows:20,maxRows:25},onChange:function(e){return t.changeText(e)}}))}}]),t=f))||t;function f(){var e,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o=u(this,(e=f.__proto__||Object.getPrototypeOf(f)).call.apply(e,[this].concat(n)))).state={visible:!0,content:""},o.showModal=function(){o.setState({visible:!0})},o.handleCancel=function(){o.setState({visible:!1})},o.handleOk=function(){var e=o.props,t=e.instanceId,n=e.nodeIp,r=e.nodePort,a=e.fileName,e=o.state.content;Object(s.e)(t,n,r,a,e).then(function(e){o.setState({visible:!1}),o.props.getTaskList(),i.a.prompt.success("创建成功")},function(e){i.a.prompt.error(e.msg)})},u(o,e)}}.call(this,h(1))},979:function(e,h,m){"use strict";!function(r){m.d(h,"a",function(){return f});m(855);var a=m(856),o=(m(506),m(92)),i=(m(507),m(54)),e=m(895),s=m.n(e),t=m(0),n=m.n(t),c=m(14),e=m(1),u=m(932),t=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e};function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=c.a.decorator.propTypes({instanceId:n.a.string.isRequired,nodeIp:n.a.string.isRequired,nodePort:n.a.number.isRequired,fileName:n.a.string.isRequired,getTaskList:n.a.func.isRequired})((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,e.PureComponent),t(d,[{key:"render",value:function(){var e=this.props,t=e.nodeIp,n=e.fileName,e=e.pluginType;return r.createElement(a.a,{cancelText:"取消",okText:"提交",title:"删除任务",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},r.createElement(o.a,{className:s.a.row_sru_top},r.createElement(i.a,{span:2}),r.createElement(i.a,{span:20,className:s.a.col_sru_top},"您正准备删除主机",r.createElement("span",null,t),"上的插件",r.createElement("span",null,e),"的任务",r.createElement("span",null,n)),r.createElement(i.a,{span:2})),r.createElement(o.a,{className:s.a.row_sru_bottom},r.createElement(i.a,{span:2}),r.createElement(i.a,{span:20},"请确认"),r.createElement(i.a,{span:2})))}}]),t=d))||t;function d(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a=p(this,(e=d.__proto__||Object.getPrototypeOf(d)).call.apply(e,[this].concat(n)))).state={visible:!0},a.showModal=function(){a.setState({visible:!0})},a.handleCancel=function(){a.setState({visible:!1})},a.handleOk=function(){var e=a.props,t=e.instanceId,n=e.nodeIp,r=e.nodePort,e=e.fileName;Object(u.a)(t,n,r,e).then(function(e){a.props.getTaskList(),a.setState({visible:!1}),c.a.prompt.success("删除成功")},function(e){c.a.prompt.error(e.msg)})},p(a,e)}}.call(this,m(1))}}]);